<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Jadeliu&#39;s blog">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Jadeliu&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jade liu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Jadeliu's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jadeliu's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/05/21/myblog/JAVA/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/21/myblog/JAVA/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="post-title-link" itemprop="url">javaå¤šçº¿ç¨‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-21 10:52:08" itemprop="dateCreated datePublished" datetime="2022-05-21T10:52:08+08:00">2022-05-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-09-05 09:04:59" itemprop="dateModified" datetime="2022-09-05T09:04:59+08:00">2022-09-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="çº¿ç¨‹æ± Executorã€ExecutorServiceã€Executorsä¸‰è€…å…³ç³»"><a href="#çº¿ç¨‹æ± Executorã€ExecutorServiceã€Executorsä¸‰è€…å…³ç³»" class="headerlink" title="çº¿ç¨‹æ± Executorã€ExecutorServiceã€Executorsä¸‰è€…å…³ç³»"></a>çº¿ç¨‹æ± Executorã€ExecutorServiceã€Executorsä¸‰è€…å…³ç³»</h3><p><img src="https://img-blog.csdnimg.cn/img_convert/6f13f22d0f1e6bc6930273b38666f8cc.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/f207168124eedfd3438e9f714a53fa30.png"></p>
<p>å±‚æ¬¡å…³ç³»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public interface ExecutorService extends Executor &#123;&#125;</span><br><span class="line">public abstract class AbstractExecutorService implements ExecutorService &#123;&#125;</span><br><span class="line">public interface ScheduledExecutorService extends ExecutorService &#123;&#125;</span><br><span class="line"></span><br><span class="line">public class ThreadPoolExecutor extends AbstractExecutorService &#123;&#125;</span><br><span class="line">public class ScheduledThreadPoolExecutor extends ThreadPoolExecutor implements ScheduledExecutorService &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>åŒºåˆ«ï¼š<br>1.ExecutorService æ¥å£ç»§æ‰¿äº†Executor æ¥å£ï¼Œæ˜¯Executor çš„å­æ¥å£ã€‚</p>
<p>2.Executoræ¥å£ä¸­å®šä¹‰äº†execute()æ–¹æ³•ï¼Œç”¨æ¥æ¥æ”¶ä¸€ä¸ªRunnableæ¥å£çš„å¯¹è±¡ï¼Œè€ŒExecutorServiceæ¥å£ä¸­å®šä¹‰çš„submit()æ–¹æ³•å¯ä»¥æ¥æ”¶Runnableå’ŒCallableæ¥å£å¯¹è±¡ã€‚</p>
<p>3.Executoræ¥å£ä¸­execute()æ–¹æ³•ä¸è¿”å›ä»»ä½•ç»“æœï¼Œè€ŒExecutorServiceæ¥å£ä¸­submit()æ–¹æ³•å¯ä»¥é€šè¿‡ä¸€ä¸ª Future å¯¹è±¡è¿”å›è¿ç®—ç»“æœã€‚</p>
<p>4.Executorå’ŒExecutorServiceé™¤äº†å…è®¸å®¢æˆ·ç«¯æäº¤ä¸€ä¸ªä»»åŠ¡ï¼ŒExecutorService è¿˜æä¾›ç”¨æ¥æ§åˆ¶çº¿ç¨‹æ± çš„æ–¹æ³•ã€‚<br>æ¯”å¦‚ï¼šè°ƒç”¨ shutDown() æ–¹æ³•ç»ˆæ­¢çº¿ç¨‹æ± ã€‚</p>
<p>5.Executors æ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œç±»ä¼¼äº Collectionsã€‚Executors ç±»æä¾›å·¥å‚æ–¹æ³•ç”¨æ¥åˆ›å»ºä¸åŒç±»å‹çš„çº¿ç¨‹æ± ã€‚æ¯”å¦‚:<br>ã€€ã€€ Executors.newSingleThreadExecutor() åˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œ<br>ã€€ã€€ Executors.newFixedThreadPool(int numOfThreads)æ¥åˆ›å»ºå›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œ<br>ã€€ã€€ Executors.newCachedThreadPool()åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚<br>ã€€ã€€ Executors.newScheduledThreadPool(int corePoolSize) åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œå‘½ä»¤æˆ–è€…å®šæœŸåœ°æ‰§è¡Œã€‚</p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/whx20100101/p/9862392.html">https://www.cnblogs.com/whx20100101/p/9862392.html</a></p>
<p>ä½¿ç”¨Executorsè¿˜æ˜¯ExecutorServiceï¼Ÿ<br>å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å‡å¤„äºå·¥ä½œçŠ¶æ€ï¼Œå¹¶ä¸”çº¿ç¨‹æ•°å·²è¾¾çº¿ç¨‹æ± å…è®¸çš„æœ€å¤§çº¿ç¨‹æ•°æ—¶ï¼Œå°±ä¼šé‡‡å–æŒ‡å®šçš„é¥±å’Œç­–ç•¥æ¥å¤„ç†æ–°æäº¤çš„ä»»åŠ¡ã€‚æ€»å…±æœ‰å››ç§ç­–ç•¥ï¼š<br>AbortPolicy: ç›´æ¥æŠ›å¼‚å¸¸<br>CallerRunsPolicy: ç”¨è°ƒç”¨è€…çš„çº¿ç¨‹æ¥è¿è¡Œä»»åŠ¡<br>DiscardOldestPolicy: ä¸¢å¼ƒçº¿ç¨‹é˜Ÿåˆ—é‡Œæœ€è¿‘çš„ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œæ–°æäº¤çš„ä»»åŠ¡<br>DiscardPolicy ç›´æ¥å°†æ–°ä»»åŠ¡ä¸¢å¼ƒ</p>
<p>å¦‚æœä½¿ç”¨ Executors çš„å·¥å‚æ–¹æ³•åˆ›å»ºçš„çº¿ç¨‹æ± ï¼Œé‚£ä¹ˆé¥±å’Œç­–ç•¥éƒ½æ˜¯é‡‡ç”¨é»˜è®¤çš„ AbortPolicyï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³å½“çº¿ç¨‹æ± å·²æ»¡çš„æƒ…å†µï¼Œä½¿ç”¨è°ƒç”¨è€…çš„çº¿ç¨‹æ¥è¿è¡Œä»»åŠ¡ï¼Œå°±è¦è‡ªå·±åˆ›å»ºçº¿ç¨‹æ± ï¼ŒæŒ‡å®šæƒ³è¦çš„é¥±å’Œç­–ç•¥ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ Executors äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»º ThreadPoolExecutor(ExecutorServiceæ¥å£çš„å®ç°ç±») å¯¹è±¡ï¼Œè‡ªå®šä¹‰ä¸€äº›å‚æ•°ï¼Œè€Œä¸æ˜¯è°ƒç”¨ Executors çš„å·¥å‚æ–¹æ³•åˆ›å»ºã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43921491/article/details/115717604">https://blog.csdn.net/weixin_43921491/article/details/115717604</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService executor = new ThreadPoolExecutor(...);</span><br><span class="line">executor.submit(()-&gt;å•æ¡è¯­å¥);</span><br><span class="line"></span><br><span class="line">executor.submit(new Runnable()&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        dosomething();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="çº¿ç¨‹æ± java-util-concurrent-ThreadPoolExecutor"><a href="#çº¿ç¨‹æ± java-util-concurrent-ThreadPoolExecutor" class="headerlink" title="çº¿ç¨‹æ± java.util.concurrent.ThreadPoolExecutor"></a>çº¿ç¨‹æ± java.util.concurrent.ThreadPoolExecutor</h3><p>æ„é€ æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ThreadPoolExecutor(int corePoolSize, </span><br><span class="line">int maximumPoolSize, </span><br><span class="line">long keepAliveTime, </span><br><span class="line">TimeUnit unit, </span><br><span class="line">BlockingQueue workQueue,  </span><br><span class="line">RejectedExecutionHandler handler) </span><br><span class="line"></span><br><span class="line">corePoolSizeï¼š çº¿ç¨‹æ± ç»´æŠ¤çº¿ç¨‹çš„æœ€å°‘æ•°é‡ </span><br><span class="line">maximumPoolSizeï¼šçº¿ç¨‹æ± ç»´æŠ¤çº¿ç¨‹çš„æœ€å¤§æ•°é‡ </span><br><span class="line">keepAliveTimeï¼š çº¿ç¨‹æ± ç»´æŠ¤çº¿ç¨‹æ‰€å…è®¸çš„ç©ºé—²æ—¶é—´ </span><br><span class="line">unitï¼š çº¿ç¨‹æ± ç»´æŠ¤çº¿ç¨‹æ‰€å…è®¸çš„ç©ºé—²æ—¶é—´çš„å•ä½ </span><br><span class="line">workQueueï¼š çº¿ç¨‹æ± æ‰€ä½¿ç”¨çš„ç¼“å†²é˜Ÿåˆ— </span><br><span class="line">handlerï¼š çº¿ç¨‹æ± å¯¹æ‹’ç»ä»»åŠ¡çš„å¤„ç†ç­–ç•¥ </span><br><span class="line"></span><br><span class="line">unitå¯é€‰çš„å‚æ•°ä¸ºjava.util.concurrent.TimeUnitä¸­çš„å‡ ä¸ªé™æ€å±æ€§ï¼š </span><br><span class="line">NANOSECONDSã€MICROSECONDSã€MILLISECONDSã€SECONDSã€‚ </span><br><span class="line"></span><br><span class="line">workQueueå¯ç”¨çš„é˜Ÿåˆ—ç±»æ˜¯ï¼šjava.util.concurrent.ArrayBlockingQueue </span><br><span class="line"></span><br><span class="line">handleræœ‰å››ä¸ªé€‰æ‹©ï¼š </span><br><span class="line">ï¼ˆ1ï¼‰ThreadPoolExecutor.AbortPolicy()   æŠ›å‡ºjava.util.concurrent.RejectedExecutionExceptionå¼‚å¸¸ </span><br><span class="line">ï¼ˆ2ï¼‰ThreadPoolExecutor.CallerRunsPolicy()  é‡è¯•æ·»åŠ å½“å‰çš„ä»»åŠ¡ï¼Œä»–ä¼šè‡ªåŠ¨é‡å¤è°ƒç”¨execute()æ–¹æ³• </span><br><span class="line">ï¼ˆ3ï¼‰ThreadPoolExecutor.DiscardOldestPolicy() æŠ›å¼ƒæ—§çš„ä»»åŠ¡ ï¼ˆç­‰å¾…é˜Ÿåˆ—é‡Œé¢æœ€æ—©è¿›å…¥çš„ï¼‰</span><br><span class="line">ï¼ˆ4ï¼‰ThreadPoolExecutor.DiscardPolicy()     æŠ›å¼ƒå½“å‰çš„ä»»åŠ¡ </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å½“ä¸€ä¸ªä»»åŠ¡ï¼ˆ Runnableç±»å‹çš„å¯¹è±¡ï¼‰é€šè¿‡execute(Runnable)æ–¹æ³•æ¬²æ·»åŠ åˆ°çº¿ç¨‹æ± æ—¶ï¼š<br>1ã€å¦‚æœæ­¤æ—¶çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å°äºcorePoolSizeï¼Œå³ä½¿çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹éƒ½å¤„äºç©ºé—²çŠ¶æ€ï¼Œä¹Ÿè¦åˆ›å»ºæ–°çš„çº¿ç¨‹æ¥å¤„ç†è¢«æ·»åŠ çš„ä»»åŠ¡ã€‚<br>2ã€å¦‚æœæ­¤æ—¶çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡ç­‰äº corePoolSizeï¼Œä½†æ˜¯ç¼“å†²é˜Ÿåˆ— workQueueæœªæ»¡ï¼Œé‚£ä¹ˆä»»åŠ¡è¢«æ”¾å…¥ç¼“å†²é˜Ÿåˆ—ã€‚<br>3ã€å¦‚æœæ­¤æ—¶çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å¤§äºcorePoolSizeï¼Œç¼“å†²é˜Ÿåˆ—workQueueæ»¡ï¼Œå¹¶ä¸”çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å°äºmaximumPoolSizeï¼Œå»ºæ–°çš„çº¿ç¨‹æ¥å¤„ç†è¢«æ·»åŠ çš„ä»»åŠ¡ã€‚<br>4ã€å¦‚æœæ­¤æ—¶çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å¤§äºcorePoolSizeï¼Œç¼“å†²é˜Ÿåˆ—workQueueæ»¡ï¼Œå¹¶ä¸”çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡ç­‰äºmaximumPoolSizeï¼Œé‚£ä¹ˆé€šè¿‡ handleræ‰€æŒ‡å®šçš„ç­–ç•¥æ¥å¤„ç†æ­¤ä»»åŠ¡ã€‚ </p>
<p>ä¹Ÿå°±æ˜¯ï¼šå¤„ç†ä»»åŠ¡çš„ä¼˜å…ˆçº§ä¸ºï¼š<br>æ ¸å¿ƒçº¿ç¨‹corePoolSizeã€ä»»åŠ¡é˜Ÿåˆ—workQueueã€æœ€å¤§çº¿ç¨‹maximumPoolSizeï¼Œå¦‚æœä¸‰è€…éƒ½æ»¡äº†ï¼Œä½¿ç”¨handlerå¤„ç†è¢«æ‹’ç»çš„ä»»åŠ¡ã€‚ </p>
<p>å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å¤§äº corePoolSizeæ—¶ï¼Œå¦‚æœæŸçº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡keepAliveTimeï¼Œçº¿ç¨‹å°†è¢«ç»ˆæ­¢ã€‚è¿™æ ·ï¼Œçº¿ç¨‹æ± å¯ä»¥åŠ¨æ€çš„è°ƒæ•´æ± ä¸­çš„çº¿ç¨‹æ•°ã€‚ </p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3() throws InterruptedException &#123;</span><br><span class="line">    ExecutorService threadPool = new ThreadPoolExecutor(2, 4, 3, TimeUnit.SECONDS,</span><br><span class="line">            new ArrayBlockingQueue&lt;Runnable&gt;(3), new ThreadPoolExecutor.AbortPolicy());</span><br><span class="line"></span><br><span class="line">    class ThreadPoolTask implements Runnable, Serializable &#123;</span><br><span class="line">        private static final long serialVersionUID = 0;</span><br><span class="line">        // ä¿å­˜ä»»åŠ¡æ‰€éœ€è¦çš„æ•°æ®</span><br><span class="line">        private Object threadPoolTaskData;</span><br><span class="line"></span><br><span class="line">        ThreadPoolTask(Object tasks) &#123;</span><br><span class="line">            this.threadPoolTaskData = tasks;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void run() &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + &quot;start ..&quot; + getTask());</span><br><span class="line">            try &#123;</span><br><span class="line">                // //ä¾¿äºè§‚å¯Ÿï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´</span><br><span class="line">                Thread.sleep(2000);</span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            threadPoolTaskData = null;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Object getTask() &#123;</span><br><span class="line">            return this.threadPoolTaskData;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (int i = 1; i &lt;= 8; i++) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            // äº§ç”Ÿä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶å°†å…¶åŠ å…¥åˆ°çº¿ç¨‹æ± </span><br><span class="line">            String task = &quot;task@ &quot; + i;</span><br><span class="line">            System.out.println(&quot;put &quot; + task);</span><br><span class="line">            threadPool.submit(new ThreadPoolTask(task));</span><br><span class="line">            // ä¾¿äºè§‚å¯Ÿï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´</span><br><span class="line">            Thread.sleep(2);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Thread.sleep(10000);</span><br><span class="line">    // ä¹Ÿå¯ä»¥ç›´æ¥ç”¨lambdaè¡¨è¾¾å¼å¾€çº¿ç¨‹æ± é‡ŒåŠ çº¿ç¨‹</span><br><span class="line">    threadPool.submit(() -&gt; &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + &quot;start ..&quot; + &quot;lambda&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š</span><br><span class="line">put task@ 1</span><br><span class="line">pool-1-thread-1start ..task@ 1</span><br><span class="line">put task@ 2</span><br><span class="line">pool-1-thread-2start ..task@ 2</span><br><span class="line">put task@ 3</span><br><span class="line">put task@ 4</span><br><span class="line">put task@ 5</span><br><span class="line">put task@ 6</span><br><span class="line">pool-1-thread-3start ..task@ 6</span><br><span class="line">put task@ 7</span><br><span class="line">pool-1-thread-4start ..task@ 7</span><br><span class="line">put task@ 8</span><br><span class="line">java.util.concurrent.RejectedExecutionException: Task java.util....</span><br><span class="line">pool-1-thread-1start ..task@ 3</span><br><span class="line">pool-1-thread-2start ..task@ 4</span><br><span class="line">pool-1-thread-3start ..task@ 5</span><br><span class="line"></span><br><span class="line">å› ä¸ºçº¿ç¨‹åŠ å…¥çº¿ç¨‹æ± å¾ˆå¿«ï¼Œçº¿ç¨‹éƒ½è¿˜æ²¡å¤„ç†å®Œï¼Œæ‰€ä»¥æœ€å¼€å§‹å…ˆ2ä¸ªçº¿ç¨‹ï¼Œ</span><br><span class="line">ç„¶å3ä¸ªåŠ å…¥é˜Ÿåˆ—ï¼Œç„¶åå†æ¥2ä¸ªï¼Œæ‰©å¤§çº¿ç¨‹æ± ï¼Œå†ä¸€ä¸ªå°±æŠ›å‡ºå¼‚å¸¸äº†ï¼Œ</span><br><span class="line">æ…¢æ…¢é˜Ÿåˆ—ä¸­çš„ä¸‰ä¸ªä¼šè¢«æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœæ˜¯DiscardOldestPolicyç­–ç•¥ï¼Œå°±æŠŠæœ€æ—©è¿›å…¥é˜Ÿåˆ—çš„æ€¼å‡ºå»ã€‚</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/abcwywht/article/details/54744152">https://blog.csdn.net/abcwywht/article/details/54744152</a></p>
<p>âœ…è§„èŒƒåˆ›å»ºçº¿ç¨‹æ± <br>çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨Executorså»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ThreadPoolExecutorçš„æ–¹å¼ã€‚ç›®çš„æ˜¯è§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚FixedThreadPoolå’ŒSingleThreadPoolå…è®¸è¯·æ±‚é˜Ÿåˆ—é•¿åº¦Integer.MAX_VALUEï¼Œå¯èƒ½å †ç§¯å¤§é‡è¯·æ±‚ï¼ŒOOMã€‚CachedThreadPoolå…è®¸åˆ›å»ºçº¿ç¨‹æ•°é‡Integer.MAX_VALUEï¼Œå¯èƒ½åˆ›å»ºå¤§é‡çº¿ç¨‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class ThreadPoolDemo &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ExecutorService threadPool = new ThreadPoolExecutor(2, 4, 0L, TimeUnit.MILLISECONDS,</span><br><span class="line">                new LinkedBlockingDeque&lt;Runnable&gt;(6),</span><br><span class="line">                new ThreadFactory() &#123;</span><br><span class="line">                    AtomicInteger id = new AtomicInteger(0);</span><br><span class="line">                    @Override</span><br><span class="line">                    public Thread newThread(Runnable r) &#123;</span><br><span class="line">                        return new Thread(r, &quot;thread-poolName-&quot; + id.incrementAndGet());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        threadPool.submit(new Runnable() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        //å¯ä»¥ç›´æ¥ç”¨lambdaè¡¨è¾¾å¼ï¼š</span><br><span class="line">        threadPool.submit(() -&gt; System.out.println(Thread.currentThread().getName()));</span><br><span class="line">        threadPool.execute(() -&gt; System.out.println(Thread.currentThread().getName()));</span><br><span class="line">        threadPool.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡Œé¢æ²¡åŠ çº¿ç¨‹æ± åˆ°æœ€å¤§å’Œé˜Ÿåˆ—æ»¡äº†è¯¥æ€ä¹ˆåŠçš„å‚æ•°ï¼Œå¯ä»¥åŠ ã€‚</p>
<h3 id="ThreadPoolExecutorçš„executeæ–¹æ³•å’Œsubmitæ–¹æ³•"><a href="#ThreadPoolExecutorçš„executeæ–¹æ³•å’Œsubmitæ–¹æ³•" class="headerlink" title="ThreadPoolExecutorçš„executeæ–¹æ³•å’Œsubmitæ–¹æ³•"></a>ThreadPoolExecutorçš„executeæ–¹æ³•å’Œsubmitæ–¹æ³•</h3><p>1ã€executeæ˜¯Executoræ¥å£çš„æ–¹æ³•ï¼Œè€Œsubmitæ˜¯ExecutorServiceçš„æ–¹æ³•ï¼Œå¹¶ä¸”ExecutorServiceæ¥å£ç»§æ‰¿äº†Executoræ¥å£ã€‚</p>
<p>2ã€executeåªæ¥å—Runnableå‚æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼›è€Œsubmitå¯ä»¥æ¥å—Runnableå‚æ•°å’ŒCallableå‚æ•°ï¼Œå¹¶ä¸”è¿”å›äº†Futureå¯¹è±¡ï¼Œå¯ä»¥è¿›è¡Œä»»åŠ¡å–æ¶ˆã€è·å–ä»»åŠ¡ç»“æœã€åˆ¤æ–­ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæ¯•/å–æ¶ˆç­‰æ“ä½œã€‚</p>
<p>3ã€submitä¼šå¯¹Runnableæˆ–Callableå…¥å‚å°è£…æˆRunnableFutureå¯¹è±¡ï¼ˆåŒæ—¶ç»§æ‰¿äº†Runnableæ¥å£å’ŒFutureæ¥å£ï¼‰ï¼Œè°ƒç”¨executeæ–¹æ³•å¹¶è¿”å›ã€‚FutureTaskæ˜¯å®ç°äº†RunnableFutureæ¥å£</p>
<p>4ã€é€šè¿‡executeæ–¹æ³•æäº¤çš„ä»»åŠ¡å¦‚æœå‡ºç°å¼‚å¸¸åˆ™ç›´æ¥æŠ›å‡ºåŸå¼‚å¸¸ï¼Œæ˜¯åœ¨çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä¸­ï¼›è€Œsubmitæ–¹æ³•æ˜¯æ•è·äº†å¼‚å¸¸çš„ï¼Œåªæœ‰å½“è°ƒç”¨Futureçš„getæ–¹æ³•æ—¶ï¼Œæ‰ä¼šæŠ›å‡ºExecutionExceptionå¼‚å¸¸ï¼Œä¸”æ˜¯åœ¨è°ƒç”¨getæ–¹æ³•çš„çº¿ç¨‹ã€‚ï¼ˆFutureTaskåˆ™æ˜¯å°†catchåˆ°çš„å¼‚å¸¸å­˜ä¸‹æ¥ï¼Œåœ¨getçš„æ—¶å€™å†å»åˆ¤æ–­ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€ï¼Œå¦‚æœä»»åŠ¡çŠ¶æ€æ˜¯å¼‚å¸¸ï¼Œåˆ™å†æŠ›å‡ºExecutionExceptionå¼‚å¸¸ã€‚ï¼‰</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/happyyear1/article/details/122378013">https://blog.csdn.net/happyyear1/article/details/122378013</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/Mr_Zhang____/article/details/121866974">https://blog.csdn.net/Mr_Zhang____/article/details/121866974</a></p>
<h3 id="ThreadPoolExecutorçš„submitè¿”å›å€¼Future"><a href="#ThreadPoolExecutorçš„submitè¿”å›å€¼Future" class="headerlink" title="ThreadPoolExecutorçš„submitè¿”å›å€¼Future"></a>ThreadPoolExecutorçš„submitè¿”å›å€¼Future</h3><p>âœ…Executoræ¥å£ä¸­çš„executeæ–¹æ³•ï¼š<br>è¿™ä¸ªæ–¹æ³•æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œè€Œä¸”åªæ¥å—Runnableã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Executor &#123;</span><br><span class="line">    void execute(Runnable command);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…ExecutorServiceæ¥å£ä¸­çš„submitæ–¹æ³•ï¼š<br>è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ç§å‚æ•°ï¼ŒCallableå’ŒRunnableã€‚è¿”å›å€¼æ˜¯Futureã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task);</span><br><span class="line">&lt;T&gt; Future&lt;T&gt; submit(Runnable task, T result);</span><br><span class="line">Future&lt;?&gt; submit(Runnable task);</span><br></pre></td></tr></table></figure>

<p>âœ…Callableæ¥å£å’ŒRunnableæ¥å£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface Callable&lt;V&gt; &#123;</span><br><span class="line">  V call() throws Exception;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Runnable &#123;</span><br><span class="line">  public abstract void run();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒºåˆ«ï¼š<br>1ã€Callableèƒ½æ¥å—ä¸€ä¸ªæ³›å‹ï¼Œç„¶ååœ¨callæ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªè¿™ä¸ªç±»å‹çš„å€¼ã€‚è€ŒRunnableçš„runæ–¹æ³•æ²¡æœ‰è¿”å›å€¼<br>2ã€Callableçš„callæ–¹æ³•å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œè€ŒRunnableçš„runæ–¹æ³•ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>âœ…Futureæ¥å£<br>é€šè¿‡ä»–å¯ä»¥è·å¾—ä»»åŠ¡æ‰§è¡Œçš„è¿”å›å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public interface Future&lt;V&gt; &#123;</span><br><span class="line">    boolean cancel(boolean var1);</span><br><span class="line"> </span><br><span class="line">    boolean isCancelled();</span><br><span class="line"> </span><br><span class="line">    boolean isDone();</span><br><span class="line"> </span><br><span class="line">    V get() throws InterruptedException, ExecutionException;  //è·å–è¿”å›å€¼</span><br><span class="line"> </span><br><span class="line">    V get(long var1, TimeUnit var3) throws InterruptedException, ExecutionException, TimeoutException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…submit(Callable task)å®ç°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public static class Main &#123;</span><br><span class="line">    public static void main(String[] args) throws InterruptedException, ExecutionException &#123;</span><br><span class="line">        ExecutorService executor = Executors.newFixedThreadPool(2);</span><br><span class="line">        //åˆ›å»ºä¸€ä¸ªCallableï¼Œ3ç§’åè¿”å›Stringç±»å‹</span><br><span class="line">        Callable myCallable = new Callable() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public String call() throws Exception &#123;</span><br><span class="line">                Thread.sleep(3000);</span><br><span class="line">                System.out.println(&quot;calldæ–¹æ³•æ‰§è¡Œäº†&quot;);</span><br><span class="line">                return &quot;callæ–¹æ³•è¿”å›å€¼&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(&quot;æäº¤ä»»åŠ¡ä¹‹å‰ &quot;+getStringDate());</span><br><span class="line">        Future future = executor.submit(myCallable);</span><br><span class="line">        System.out.println(&quot;æäº¤ä»»åŠ¡ä¹‹åï¼Œè·å–ç»“æœä¹‹å‰ &quot;+getStringDate());</span><br><span class="line">        System.out.println(&quot;è·å–è¿”å›å€¼: &quot;+future.get());</span><br><span class="line">        System.out.println(&quot;è·å–åˆ°ç»“æœä¹‹å &quot;+getStringDate());</span><br><span class="line">    &#125;</span><br><span class="line">    public static String getStringDate() &#123;</span><br><span class="line">        Date currentTime = new Date();</span><br><span class="line">        SimpleDateFormat formatter = new SimpleDateFormat(&quot;HH:mm:ss&quot;);</span><br><span class="line">        String dateString = formatter.format(currentTime);</span><br><span class="line">        return dateString;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æäº¤ä»»åŠ¡ä¹‹å‰ 09:09:28</span><br><span class="line">æäº¤ä»»åŠ¡ä¹‹åï¼Œè·å–ç»“æœä¹‹å‰ 09:09:29</span><br><span class="line">calldæ–¹æ³•æ‰§è¡Œäº†</span><br><span class="line">è·å–è¿”å›å€¼: callæ–¹æ³•è¿”å›å€¼</span><br><span class="line">è·å–åˆ°ç»“æœä¹‹å 09:09:32</span><br></pre></td></tr></table></figure>

<p>âœ…get()æ–¹æ³•çš„é˜»å¡æ€§</p>
<p>é€šè¿‡ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œåœ¨è°ƒç”¨submitæäº¤ä»»åŠ¡ä¹‹åï¼Œä¸»çº¿ç¨‹æœ¬æ¥æ˜¯ç»§ç»­è¿è¡Œäº†ã€‚ä½†æ˜¯è¿è¡Œåˆ°future.get()çš„æ—¶å€™å°±é˜»å¡ä½äº†ï¼Œä¸€ç›´ç­‰åˆ°ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‹¿åˆ°äº†è¿”å›çš„è¿”å›å€¼ï¼Œä¸»çº¿ç¨‹æ‰ä¼šç»§ç»­è¿è¡Œã€‚</p>
<p>è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œä»–çš„é˜»å¡æ€§æ˜¯å› ä¸ºè°ƒç”¨get()æ–¹æ³•æ—¶ï¼Œä»»åŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œæ‰€ä»¥ä¼šä¸€ç›´ç­‰åˆ°ä»»åŠ¡å®Œæˆï¼Œå½¢æˆäº†é˜»å¡ã€‚</p>
<p>ä»»åŠ¡æ˜¯åœ¨è°ƒç”¨submitæ–¹æ³•æ—¶å°±å¼€å§‹æ‰§è¡Œäº†ï¼Œå¦‚æœåœ¨è°ƒç”¨get()æ–¹æ³•æ—¶ï¼Œä»»åŠ¡å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œé‚£ä¹ˆå°±ä¸ä¼šé€ æˆé˜»å¡ã€‚</p>
<p>submitå¤šä¸ªä»»åŠ¡æ—¶ï¼Œæ€»é˜»å¡æ—¶é—´æ˜¯æœ€é•¿çš„é‚£ä¸ªã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Callable myCallable = new Callable() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String call() throws Exception &#123;</span><br><span class="line">        Thread.sleep(5000);</span><br><span class="line">        System.out.println(&quot;calldæ–¹æ³•æ‰§è¡Œäº†&quot;);</span><br><span class="line">        return &quot;callæ–¹æ³•è¿”å›å€¼&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Callable myCallable2 = new Callable() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String call() throws Exception &#123;</span><br><span class="line">        Thread.sleep(3000);</span><br><span class="line">        System.out.println(&quot;calld2æ–¹æ³•æ‰§è¡Œäº†&quot;);</span><br><span class="line">        return &quot;call2æ–¹æ³•è¿”å›å€¼&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">System.out.println(&quot;æäº¤ä»»åŠ¡ä¹‹å‰ &quot;+getStringDate());</span><br><span class="line">Future future = executor.submit(myCallable);</span><br><span class="line">Future future2 = executor.submit(myCallable2);</span><br><span class="line">System.out.println(&quot;æäº¤ä»»åŠ¡ä¹‹å &quot;+getStringDate());</span><br><span class="line">System.out.println(&quot;å¼€å§‹è·å–ç¬¬ä¸€ä¸ªè¿”å›å€¼ &quot;+getStringDate());</span><br><span class="line">System.out.println(&quot;è·å–è¿”å›å€¼: &quot;+future.get());</span><br><span class="line">System.out.println(&quot;è·å–ç¬¬ä¸€ä¸ªè¿”å›å€¼ç»“æŸï¼Œå¼€å§‹è·å–ç¬¬äºŒä¸ªè¿”å›å€¼ &quot;+getStringDate());</span><br><span class="line">System.out.println(&quot;è·å–è¿”å›å€¼2: &quot;+future2.get());</span><br><span class="line">System.out.println(&quot;è·å–ç¬¬äºŒä¸ªè¿”å›å€¼ç»“æŸ &quot;+getStringDate());</span><br><span class="line"></span><br><span class="line">æäº¤ä»»åŠ¡ä¹‹å‰ 14:14:47</span><br><span class="line">æäº¤ä»»åŠ¡ä¹‹å 14:14:48</span><br><span class="line">å¼€å§‹è·å–ç¬¬ä¸€ä¸ªè¿”å›å€¼ 14:14:48</span><br><span class="line">calld2æ–¹æ³•æ‰§è¡Œäº†</span><br><span class="line">calldæ–¹æ³•æ‰§è¡Œäº†</span><br><span class="line">è·å–è¿”å›å€¼: callæ–¹æ³•è¿”å›å€¼</span><br><span class="line">è·å–ç¬¬ä¸€ä¸ªè¿”å›å€¼ç»“æŸï¼Œå¼€å§‹è·å–ç¬¬äºŒä¸ªè¿”å›å€¼ 14:14:53</span><br><span class="line">è·å–è¿”å›å€¼2: call2æ–¹æ³•è¿”å›å€¼</span><br><span class="line">è·å–ç¬¬äºŒä¸ªè¿”å›å€¼ç»“æŸ 14:14:53</span><br></pre></td></tr></table></figure>

<p>âœ…submit(Runnable task, T result)å®ç°</p>
<p>è™½ç„¶submitä¼ å…¥Runnableä¸èƒ½ç›´æ¥è¿”å›å†…å®¹ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡submit(Runnable task, T result)ä¼ å…¥ä¸€ä¸ªè½½ä½“ï¼Œé€šè¿‡è¿™ä¸ªè½½ä½“è·å–è¿”å›å€¼ã€‚è¿™ä¸ªå…¶å®ä¸èƒ½ç®—è¿”å›å€¼äº†ï¼Œæ˜¯äº¤ç»™çº¿ç¨‹å¤„ç†ä¸€ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1() throws ExecutionException, InterruptedException &#123;</span><br><span class="line">    ExecutorService executor = Executors.newFixedThreadPool(2); //ä¸æ¨èè¿™æ ·åˆ›å»º</span><br><span class="line">    Result res = new Result();</span><br><span class="line">    Future&lt;Result&gt; future = executor.submit(new MyThread(res), res);</span><br><span class="line">    System.out.println(&quot;è¿”å›çš„ç»“æœ  name: &quot; + future.get().getName()); //æ–°åå­—</span><br><span class="line">    System.out.println(&quot;åŸæ¥çš„Data  name: &quot; + res.getName()); //åŸæ¥çš„ä¹Ÿå˜æˆäº†æ–°åå­—</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static class MyThread implements Runnable &#123;</span><br><span class="line">    private Result result;</span><br><span class="line">    public MyThread(Result result) &#123;</span><br><span class="line">        this.result = result;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(2000);</span><br><span class="line">            System.out.println(&quot;çº¿ç¨‹  æ‰§è¡Œ:&quot;);</span><br><span class="line">            result.setName(&quot;æ–°åå­—&quot;);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">public static class Result &#123;</span><br><span class="line">    String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>âš ï¸Tæ˜¯Runnableé‡Œé¢çš„å±æ€§ï¼Œåˆ›å»ºæ—¶ä¼ å…¥ï¼Œçº¿ç¨‹ä¸­èµ‹å€¼ï¼Œgetæ–¹æ³•æ‹¿åˆ°ï¼Œä¹‹å‰ä¼ å…¥çš„å˜é‡ä¹Ÿè·Ÿç€å˜åŒ–ã€‚</p>
<p>âœ…get(long var1, TimeUnit var3)<br>å‰é¢éƒ½æ˜¯ç”¨çš„get()æ–¹æ³•è·å–è¿”å›å€¼ï¼Œé‚£ä¹ˆå› ä¸ºè¿™ä¸ªæ–¹æ³•æ˜¯é˜»å¡çš„ï¼Œæœ‰æ—¶éœ€è¦ç­‰å¾ˆä¹…ã€‚æ‰€ä»¥æœ‰æ—¶å€™éœ€è¦è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚</p>
<p>get(long var1, TimeUnit var3)è¿™ä¸ªæ–¹æ³•å°±æ˜¯è®¾ç½®ç­‰å¾…æ—¶é—´çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Future future1 = executor.submit(myCallable);</span><br><span class="line">System.out.println(&quot;å¼€å§‹æ‹¿ç»“æœ &quot;+getStringDate());</span><br><span class="line">try &#123;</span><br><span class="line">    System.out.println(&quot;è¿”å›çš„ç»“æœæ˜¯ï¼š &quot;+future1.get(3, TimeUnit.SECONDS)+ &quot; &quot;+getStringDate());</span><br><span class="line">&#125; catch (TimeoutException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    System.out.println(&quot;è¶…æ—¶äº† &quot;+getStringDate());</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(&quot;ç»“æŸæ‹¿ç»“æœ &quot;+getStringDate());</span><br><span class="line"></span><br><span class="line">è¿‡äº†ä¸‰ç§’å°±æŠ›å‡ºè¶…æ—¶å¼‚å¸¸äº†ï¼Œä¸»çº¿ç¨‹ç»§ç»­è¿è¡Œï¼Œä¸ä¼šå†ç»§ç»­é˜»å¡ã€‚</span><br></pre></td></tr></table></figure>


<p>âœ…executeä¸submitçš„å¼‚å¸¸å¤„ç†</p>
<p>ä½¿ç”¨submitæ–¹æ³•è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œä»–çš„å¼‚å¸¸å¯ä»¥åœ¨ä¸»çº¿ç¨‹ä¸­catchåˆ°ã€‚<br>è€Œä½¿ç”¨executeæ–¹æ³•æ‰§è¡Œä»»åŠ¡æ˜¯æ•æ‰ä¸åˆ°å¼‚å¸¸çš„ã€‚<br>ç”¨ä¸‹é¢è¿™ä¸ªRunnableæ¥è¯´,è¿™ä¸ª é‡Œé¢ä¸€å®šä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Runnable myRunnable = new Runnable() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        executor.execute(null);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨executeï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">            executor.execute(myRunnable);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(&quot;æŠ“åˆ°å¼‚å¸¸ &quot;+e.getMessage());</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ä¼šè¾“å‡ºæŠ“åˆ°å¼‚å¸¸é‚£è¡Œæ—¥å¿—ï¼Œè¾“å‡ºæ˜¯åœ¨çº¿ç¨‹pool-1-thread-1ä¸­ï¼Œå¹¶ä¸æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­ã€‚è¯´æ˜ä¸»çº¿ç¨‹çš„catchä¸èƒ½æ•æ‰åˆ°è¿™ä¸ªå¼‚å¸¸ã€‚å¼‚å¸¸åœ¨çº¿ç¨‹ä¸­ç›´æ¥æŠ›å‡ºã€‚</p>
<p>ä½¿ç”¨submitï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">           Future future1= executor.submit(myCallable);</span><br><span class="line">            future1.get();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(&quot;æŠ“åˆ°å¼‚å¸¸ &quot;+e.getMessage());</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æŠ“åˆ°å¼‚å¸¸ã€‚å¾—æœ‰getæ–¹æ³•ã€‚</p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zdx1515888659/article/details/109537577">https://blog.csdn.net/zdx1515888659/article/details/109537577</a></p>
<p>âœ…é¡¹ç›®ä¸­çš„çº¿ç¨‹æ± ä¸­å¼‚å¸¸æ•è·<br>é¡¹ç›®ä¸­æƒ³å°†çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„å¼‚å¸¸åœ¨å¤–é¢æ•è·åˆ°ï¼Œä¼ é€’ç»™å‰ç«¯ã€‚<br>æ‰€ä»¥ç”¨submitæ–¹æ³•ï¼Œè¿”å›Future&lt;?&gt;ï¼Œåœ¨submitæ–¹æ³•åç›´æ¥getï¼Œfuture.get()ï¼Œæœ‰ä¸¤ä¸ªå¼‚å¸¸éœ€è¦å¤„ç†ï¼šExecutionExceptionã€InterruptExceptionï¼Œç›´æ¥æ–¹æ³•ä¸Šthrowså‡ºå»ã€‚è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ–¹æ³•è¦ä¸ä¹Ÿthrowsï¼ˆç»™å‰ç«¯é€å‡ºå¼‚å¸¸ï¼‰ï¼Œè¦ä¸å°±try..catch..æ‰“logï¼ˆè¿™æ ·æ— æ³•ç»™å‰ç«¯é€å‡ºå¼‚å¸¸ï¼‰ã€‚<br>âš ï¸æ³¨æ„ï¼šç”¨getæ–¹æ³•ç›¸å½“äºæ˜¯é˜»å¡äº†ï¼Œæœ¬æ¥èµ·çº¿ç¨‹ï¼ŒæŠŠè¦æ‰§è¡Œçš„åŠ¨ä½œäº¤ç»™çº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹(submit)ï¼Œç„¶åä¸éœ€è¦ç®¡çº¿ç¨‹æ‰§è¡Œå®Œå°±ç›´æ¥é€€å‡ºå¹²åˆ«çš„äº†ï¼ŒåŠ äº†getçš„è¯ï¼Œå°±è¦ç­‰çº¿ç¨‹æ‰§è¡Œå®Œäº†ã€‚å¦‚æœæ˜¯å¤§é‡ä»»åŠ¡ä¸€æ¬¡äº¤ç»™çº¿ç¨‹æ± (çº¿ç¨‹æ± é‡Œçš„é˜Ÿåˆ—)ï¼Œéœ€è¦è€ƒè™‘getå¸¦æ¥çš„é˜»å¡æ€§æ˜¯å¦èƒ½æ¥å—ã€‚æœ¬æ¥æƒ³å¼‚æ­¥ï¼ŒåŠ äº†getæ•è·å¼‚å¸¸ä¹‹åï¼Œå˜æˆåŒæ­¥çš„äº†ã€‚</p>
<p>ğŸ¤”çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å‡ºç°å¼‚å¸¸ï¼Œgetæ–¹æ³•è¿™é‡Œä¼šæŠ¥å¼‚å¸¸ï¼Œå¦‚æœæ˜¯throwsï¼Œå¼‚å¸¸æŠ›å‡ºåˆ°å¤–é¢ï¼Œçº¿ç¨‹æ± é‡Œçš„å…¶ä»–çº¿ç¨‹ä¸å—å½±å“ã€‚å¤–é¢çš„æ–¹æ³•å¦‚æœæ²¡æœ‰catchä¼šä¸­æ–­ã€‚</p>
<p>ğŸ¤”é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œgetè¶…æ—¶äº†çš„è¯ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹è¿˜åœ¨ç»§ç»­åšå—ï¼Ÿ<br>é¦–å…ˆï¼ŒcountDownLatchè¶…æ—¶äº†æ˜¯ç»§ç»­åšçš„ã€‚<br>future.get(2,TimeUnit.SECOND);<br>å¦‚æœè¶…æ—¶äº†ï¼Œçº¿ç¨‹ä¸­æ–­ï¼Œä¼šæŠ¥å¼‚å¸¸TimeOutExcepTionï¼Œçœ‹æ˜¯ä¸æ˜¯è¦æ•è·äº†ã€‚<br>å³ä½¿æ•è·äº†ï¼Œçº¿ç¨‹ä¹Ÿä¸ä¼šç»§ç»­æ‰§è¡Œäº†ã€‚</p>
<h3 id="CountDownLatch"><a href="#CountDownLatch" class="headerlink" title="CountDownLatch"></a>CountDownLatch</h3><p>åœºæ™¯ï¼šåšå¤šçº¿ç¨‹å¹¶è¡Œä¼˜åŒ–ï¼Œå¤šçº¿ç¨‹å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œé¦–å…ˆè¾“å…¥æµæ˜¯å¯ä»¥å…±äº«çš„ï¼Œåªæ˜¯éœ€è¦é‡æ–°å®šä¹‰ä¸€ä¸ªåšä¼ é€’ï¼ˆä¸ç®¡æ˜¯æ™®é€šå˜é‡è¿˜æ˜¯å¼•ç”¨å˜é‡ï¼‰ï¼Œä½†æ˜¯forå¾ªç¯é‡Œé¢çº¿ç¨‹submitå®Œï¼Œç›´æ¥èµ°åˆ°ä¸»çº¿ç¨‹ä¸Šä¼ æ–‡ä»¶çš„éƒ¨åˆ†ï¼Œè¿™æ—¶çº¿ç¨‹æ± å†…çº¿ç¨‹è¿˜æ²¡å¾€æ–‡ä»¶é‡Œå†™ä¸œè¥¿ï¼Œä¸Šä¼ äº†ä¸€ä¸ªç©ºæ–‡ä»¶ã€‚</p>
<p>æƒ³è¦ï¼šåšä¸€ä¸ªåŒæ­¥ï¼ŒçŸ¥é“çº¿ç¨‹éƒ½æ‰§è¡Œå®Œäº†ï¼Œæ‰è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œèµ·åˆ°é˜»å¡çš„ä½œç”¨ã€‚</p>
<p>CountDownLatchå¯ä»¥åšåˆ°ï¼Œå½“åšä¸€ä¸ªè®¡æ•°å™¨ï¼Œè®¡ç®—å¤šå°‘ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œäº†ï¼š</p>
<p>è®©ä¸€äº›çº¿ç¨‹é˜»å¡ç›´åˆ°å¦å¤–ä¸€äº›å®Œæˆåæ‰è¢«å”¤é†’ã€‚<br>CountDownLatchä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š<br>ï¼ˆ1ï¼‰å½“ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹è°ƒç”¨awaitæ–¹æ³•æ—¶,çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶.<br>ï¼ˆ2ï¼‰å…¶ä»–çº¿ç¨‹è°ƒç”¨countDownæ–¹æ³•è®¡æ•°å™¨å‡1(è°ƒç”¨countDownæ–¹æ³•æ—¶çº¿ç¨‹ä¸ä¼šé˜»å¡),å½“è®¡æ•°å™¨çš„å€¼å˜ä¸º0,å› è°ƒç”¨awaitæ–¹æ³•è¢«é˜»å¡çš„çº¿ç¨‹ä¼šè¢«å”¤é†’,ç»§ç»­æ‰§è¡Œã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/li1325169021/article/details/122353217">https://blog.csdn.net/li1325169021/article/details/122353217</a></p>
<p>å®ä¾‹ï¼šæ¨¡æ‹Ÿå…¬å¸æ‰€æœ‰å‘˜å·¥éƒ½ä¸‹ç­åï¼Œå€¼ç­äººå‘˜é”é—¨ç¦»å¼€å…¬å¸ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line">public class CountDownLatchDemo1 &#123;</span><br><span class="line">    public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">        closeDoor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void closeDoor() throws InterruptedException &#123;</span><br><span class="line">        //åˆ›å»ºCountDownLatch,åˆå§‹å®¹é‡ä¸º10ï¼Œæ¨¡æ‹Ÿ10åå‘˜å·¥</span><br><span class="line">        CountDownLatch countDownLatch=new CountDownLatch(10);</span><br><span class="line">        for (int i=1;i&lt;=10;i++)&#123;</span><br><span class="line">            new Thread(()-&gt;&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + &quot;\t&quot; + &quot;å¿™å®Œå·¥ä½œï¼Œä¸‹ç­ã€‚&quot;);</span><br><span class="line">                //è®¡æ•°å™¨å‡1</span><br><span class="line">                countDownLatch.countDown();</span><br><span class="line">            &#125;,&quot;å‘˜å·¥ç¼–å·ï¼š&quot;+String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line">        //å½“è®¡æ•°å™¨çš„å€¼å˜ä¸º0,å› è°ƒç”¨awaitæ–¹æ³•è¢«é˜»å¡çš„çº¿ç¨‹ä¼šè¢«å”¤é†’,ç»§ç»­æ‰§è¡Œ</span><br><span class="line">        countDownLatch.await();</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + &quot;\tå€¼ç­äººå‘˜é”é—¨ç¦»å¼€å…¬å¸&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ†ä¸‰æ­¥ï¼š</p>
<p>1ã€çº¿ç¨‹æ± å¤–å®šä¹‰åˆå§‹è®¡æ•°ï¼š<br>CountDownLatch countDownLatch=new CountDownLatch(10);<br>2ã€çº¿ç¨‹æ± å†…executorService.submit()çš„çº¿ç¨‹new Runnable(){@Overide public void run() {}} runæ–¹æ³•å†…ï¼Œçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼š<br>countDownLatch.countDown();<br>3ã€æœ€åè¦è¿›è¡Œæ“ä½œå‰ï¼š<br>countDownLatch.await();</p>
<p>âœ…countDownLatchè¶…æ—¶ç»ˆæ­¢ï¼š<br><code>latch.await(10, TimeUnit.SECONDS);  //ç­‰å¾…10ç§’åï¼Œå¦‚æœçº¿ç¨‹æ²¡æœ‰æ‰§è¡Œå®Œï¼Œåˆ™ä¸å†ç­‰å¾…ï¼Œè¿›å…¥åç»­</code></p>
<p>è¶…æ—¶åï¼Œçº¿ç¨‹ä¾ç„¶ä¼šæ‰§è¡Œï¼Œä¸ä¼šä¸­æ–­ã€‚</p>
<h3 id="ScheduledExecutorService"><a href="#ScheduledExecutorService" class="headerlink" title="ScheduledExecutorService"></a>ScheduledExecutorService</h3><p>1ã€public interface ScheduledExecutorService extends ExecutorService å»¶è¿Ÿæˆ–å®šæœŸæ‰§è¡Œä»»åŠ¡ã€‚ </p>
<p>2ã€schedule æ–¹æ³•ä½¿ç”¨å„ç§å»¶è¿Ÿåˆ›å»ºä»»åŠ¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯ç”¨äºå–æ¶ˆæˆ–æ£€æŸ¥æ‰§è¡Œçš„ä»»åŠ¡å¯¹è±¡</p>
<p>3ã€scheduleAtFixedRate å’Œ scheduleWithFixedDelay æ–¹æ³•åˆ›å»ºå¹¶æ‰§è¡ŒæŸäº›åœ¨å–æ¶ˆå‰ä¸€ç›´å®šæœŸè¿è¡Œçš„ä»»åŠ¡</p>
<p>4ã€æ‰€æœ‰çš„ schedule æ–¹æ³•éƒ½æ¥å—ç›¸å¯¹å»¶è¿Ÿå’Œå‘¨æœŸä½œä¸ºå‚æ•°ï¼Œè€Œä¸æ˜¯ç»å¯¹çš„æ—¶é—´æˆ–æ—¥æœŸ</p>
<p>5ã€SheduleExecutorService æ˜¯JDK 1.5å‡ºæ¥çš„ï¼Œæ¯”ä»¥å‰çš„ Timer æ€§èƒ½å¥½</p>
<p>Timerç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() throws InterruptedException &#123;</span><br><span class="line">    TimerTask task = new TimerTask() &#123;</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            System.out.println(&quot;Task performed on: &quot; + new Date() + &quot;n&quot; +</span><br><span class="line">                    &quot;Thread&#x27;s name: &quot; + Thread.currentThread().getName());</span><br><span class="line">            try &#123;</span><br><span class="line">                Thread.sleep(5000);</span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;later: &quot; + new Date() + &quot;n&quot; +</span><br><span class="line">                    &quot;Thread&#x27;s name: &quot; + Thread.currentThread().getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Timer timer = new Timer(&quot;Timer&quot;);</span><br><span class="line"></span><br><span class="line">    long delay = 100L;</span><br><span class="line">    // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯TimeTaskå¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å»¶è¿Ÿï¼ˆåªæœ‰ç¬¬äºŒä¸ªå‚æ•°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å‘¨æœŸæ‰§è¡Œçš„å‘¨æœŸ</span><br><span class="line">    timer.schedule(task, delay, 4000);</span><br><span class="line">    Thread.sleep(10000);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Timerä¸­ï¼Œå¦‚æœä»»åŠ¡æ‰§è¡Œæ—¶é—´&gt;å‘¨æœŸï¼Œåˆ™ä¼šç­‰å¾…ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œï¼Œç«‹é©¬æ‰§è¡Œç¬¬äºŒä¸ªã€‚</p>
<p>âœ…ç”¨ScheduledExecutorService.scheduleAtFixedRateï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test5() throws InterruptedException &#123;</span><br><span class="line">    ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();</span><br><span class="line">    executorService.scheduleAtFixedRate(()-&gt;&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(2000);</span><br><span class="line">        &#125;catch (Exception ex)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+&quot; run : &quot;+ System.currentTimeMillis());</span><br><span class="line">    &#125;, 0, 1000, TimeUnit.MILLISECONDS);</span><br><span class="line">    Thread.sleep(10000);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ ·çš„ï¼Œå¦‚æœä»»åŠ¡æ‰§è¡Œæ—¶é—´&gt;å‘¨æœŸï¼Œåˆ™ä¼šç­‰ä¸Šä¸€ä¸ªæ‰§è¡Œå®Œç«‹é©¬æ‰§è¡Œä¸‹ä¸€ä¸ªã€‚</p>
<p>âœ…ç”¨ScheduledExecutorService.scheduleAtFixedRateï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test6() throws InterruptedException &#123;</span><br><span class="line">    ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();</span><br><span class="line">    executorService.scheduleWithFixedDelay(()-&gt;&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(2000);</span><br><span class="line">        &#125;catch (Exception ex)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+&quot; go : &quot;+ System.currentTimeMillis());</span><br><span class="line">    &#125;, 0, 1000, TimeUnit.MILLISECONDS);</span><br><span class="line">    Thread.sleep(10000);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸scheduleAtFixedRateï¼šä¸åŒçš„æ˜¯ï¼šè¿™ä¸ªæ˜¯ç­‰ä¸Šä¸€ä¸ªæ‰§è¡Œå®Œï¼Œdelayå¤šé•¿æ—¶é—´åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªã€‚</p>
<p>âœ…ScheduledExecutorServiceå¯¹è±¡çš„åˆ›å»ºæ–¹å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1ã€Executorså·¥å…·ç±»æ¥åˆ›å»º</span><br><span class="line">ScheduledExecutorService executorService1 = Executors.newScheduledThreadPool(3);</span><br><span class="line">åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œä»»åŠ¡æˆ–è€…å®šæœŸåœ°æ‰§è¡Œä»»åŠ¡ã€‚</span><br><span class="line">corePoolSize - æ± ä¸­æ‰€ä¿å­˜çš„çº¿ç¨‹æ•°ï¼Œå³ä½¿çº¿ç¨‹æ˜¯ç©ºé—²çš„ä¹ŸåŒ…æ‹¬åœ¨å†…ã€‚</span><br><span class="line">è¿è¡Œå‘ç°æœ‰å¤šä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œä½†æ˜¯æ•ˆæœä¸€æ ·ã€‚</span><br><span class="line"></span><br><span class="line">å¯ä»¥ä¼ å‚ThreadFactoryï¼Œç”¨æ¥å‘½åå’Œè®¾ç½®å®ˆæŠ¤çº¿ç¨‹</span><br><span class="line">ScheduledExecutorService executorService2 = Executors.newSingleThreadScheduledExecutor(r -&gt; &#123;</span><br><span class="line">    Thread t = new Thread(r, &quot;myThread&quot;);</span><br><span class="line">    t.setDaemon(true); //è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹</span><br><span class="line">    return t;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">2ã€Executorså·¥å…·ç±»æ¥åˆ›å»º</span><br><span class="line">ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();</span><br><span class="line">åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹æ‰§è¡Œç¨‹åºï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œå‘½ä»¤æˆ–è€…å®šæœŸåœ°æ‰§è¡Œä»»åŠ¡ã€‚</span><br><span class="line">å¯ä¿è¯é¡ºåºåœ°æ‰§è¡Œå„ä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨ä»»æ„ç»™å®šçš„æ—¶é—´ä¸ä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ˜¯æ´»åŠ¨çš„ã€‚ </span><br><span class="line">åŒæ ·è¿™æ˜¯ä¸€ä¸ªæ— ç•Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå³è™½ç„¶çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œä½†æ˜¯æ–°å¢çš„ä»»åŠ¡ä¼šåœ¨é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">3ã€ç”¨ScheduledExecutorService çš„å®ç°ç±» ScheduledThreadPoolExecutorï¼ˆæ¨èï¼‰</span><br><span class="line">ScheduledExecutorService executorService1 = new ScheduledThreadPoolExecutor(1);</span><br></pre></td></tr></table></figure>

<p>âœ…è§„èŒƒåˆ›å»ºï¼š<br>è¦ä½¿ç”¨å¸¦æœ‰ThreadFactoryå‚æ•°çš„ScheduledThreadPoolExecutoræ„é€ æ–¹æ³•åˆ›å»ºï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿è®¾ç½®çº¿ç¨‹åå­—ã€‚æ–¹ä¾¿å‡ºæªæ—¶å›æº¯ã€‚å¹¶ä¸”æä¾›è‡ªå®šä¹‰çš„ThreadFactoryå®ç°æˆ–ä¸‰æ–¹å®ç°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ScheduledExecutorService executorService3 = new ScheduledThreadPoolExecutor(1, new ThreadFactory() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Thread newThread(Runnable r) &#123;</span><br><span class="line">        return new Thread(r, &quot;myThread&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ScheduledExecutorService executorService4 = new ScheduledThreadPoolExecutor(1,</span><br><span class="line">    new BasicThreadFactory.Builder().namingPattern(&quot;myThread&quot;).daemon(true).build());</span><br></pre></td></tr></table></figure>


<h3 id="ThreadFactory"><a href="#ThreadFactory" class="headerlink" title="ThreadFactory"></a>ThreadFactory</h3><p>ç”¨æ¥åˆ›å»ºçº¿ç¨‹çš„ï¼Œå…¶ä¸­ä¹Ÿåªæ˜¯æœ‰ä¸€ä¸ªnewthreadæ–¹æ³•ã€‚</p>
<p>ä½œç”¨ï¼š<br>ç»™çº¿ç¨‹å‘½åï¼ŒæŸ¥çœ‹åˆ›å»ºçº¿ç¨‹æ•°<br>ç»™çº¿ç¨‹è®¾ç½®æ˜¯å¦æ˜¯åå°è¿è¡Œ<br>è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§</p>
<p>è‡ªå®šä¹‰ThreadFactoryï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">package com.demo.factory;</span><br><span class="line"></span><br><span class="line">import java.util.concurrent.ThreadFactory;</span><br><span class="line">import java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line">public class MyThreadFactory implements ThreadFactory&#123;</span><br><span class="line"></span><br><span class="line">    private AtomicInteger atomicInteger = new AtomicInteger();</span><br><span class="line"></span><br><span class="line">    private boolean isDaemon;</span><br><span class="line"></span><br><span class="line">    public MyThreadFactory(boolean isDaemon)&#123;</span><br><span class="line">        this.isDaemon = isDaemon;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Thread newThread(Runnable r) &#123;</span><br><span class="line">        atomicInteger.incrementAndGet();</span><br><span class="line">        Thread thread =  new MyWorkThread(atomicInteger,r);</span><br><span class="line">        thread.setDaemon(isDaemon);</span><br><span class="line">        return thread;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TestMain &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ExecutorService executorService = Executors.newCachedThreadPool(new MyThreadFactory(false));</span><br><span class="line">        for (int i=0;i&lt;1000;i++)&#123;</span><br><span class="line">            executorService.execute(new TestRunnable(String.valueOf(i)));</span><br><span class="line">        &#125;</span><br><span class="line">        executorService.shutdown();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static class TestRunnable implements Runnable&#123;</span><br><span class="line"></span><br><span class="line">        private String msg;</span><br><span class="line"></span><br><span class="line">        public TestRunnable(String msg)&#123;</span><br><span class="line">            this.msg = msg;</span><br><span class="line">        &#125;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            System.out.println(&quot;runnable:&quot;+msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…ä¸‰ç§åˆ›å»º ThreadFactory çš„æ–¹å¼</p>
<p>ç¬¬ä¸€ç§ CustomizableThreadFactory<br>Spring æ¡†æ¶æä¾›çš„ CustomizableThreadFactoryã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThreadFactory springThreadFactory = new CustomizableThreadFactory(&quot;springThread-pool-&quot;);</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§ ThreadFactoryBuilder<br>Google guava å·¥å…·ç±» æä¾›çš„ ThreadFactoryBuilder ,ä½¿ç”¨é“¾å¼æ–¹æ³•åˆ›å»ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ThreadFactory guavaThreadFactory = new ThreadFactoryBuilder().setNameFormat(&quot;retryClient-pool-&quot;).build();</span><br><span class="line">//-pool-åé¢åŠ %d ï¼Ÿ</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§ BasicThreadFactory<br>Apache commons-lang3 æä¾›çš„ BasicThreadFactory.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThreadFactory basicThreadFactory = new BasicThreadFactory.Builder().namingPattern(&quot;basicThreadFactory-&quot;).build();</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u010648555/article/details/106137206/">https://blog.csdn.net/u010648555/article/details/106137206/</a></p>
<h3 id="çº¿ç¨‹ç›¸å…³"><a href="#çº¿ç¨‹ç›¸å…³" class="headerlink" title="çº¿ç¨‹ç›¸å…³"></a>çº¿ç¨‹ç›¸å…³</h3><p>è¿›ç¨‹ï¼šæ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€ã€æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•å…ƒ<br>çº¿ç¨‹ï¼šè¿›ç¨‹ä¸­ç‹¬ç«‹è¿è¡Œçš„å­ä»»åŠ¡ï¼Œç¨‹åºæ‰§è¡Œçš„å•å…ƒã€‚<br>ä¾‹å¦‚ï¼šå¯åŠ¨jvmç›¸å½“äºèµ·äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œjvmå†…ï¼šmainæ–¹æ³•ã€åƒåœ¾å›æ”¶ç­‰ç›¸å½“äºå¤šä¸ªçº¿ç¨‹ã€‚<br>cpuæ˜¯è¿ç®—å’Œæ§åˆ¶çš„ä¸­å¿ƒï¼Œåœ¨cpuçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚<br>å¤šçº¿ç¨‹ä¸‹ï¼Œcpuåœ¨ä¸åŒçš„çº¿ç¨‹ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œå¤šçº¿ç¨‹ä¸ä¸€å®šæ¯”å•çº¿ç¨‹å¿«ã€‚<br>å¤šçº¿ç¨‹æ‰§è¡Œæ—¶ï¼Œæ‰§è¡Œé¡ºåºæ˜¯éšæœºçš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Thread.sleep(1000);  //ä¼‘æ¯1sï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</span><br><span class="line"></span><br><span class="line">æ–°å»ºThreadçº¿ç¨‹ï¼š</span><br><span class="line">Thread thread = new Thread(new Runnable()&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        dosomething();</span><br><span class="line">    &#125;, &quot;name&quot;);</span><br><span class="line">thread.start();</span><br></pre></td></tr></table></figure>

<h4 id="startã€runã€joinæ–¹æ³•"><a href="#startã€runã€joinæ–¹æ³•" class="headerlink" title="startã€runã€joinæ–¹æ³•"></a>startã€runã€joinæ–¹æ³•</h4><p>startï¼š ç”¨startæ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œï¼Œè¿™æ—¶æ— éœ€ç­‰å¾…runæ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•è€Œç›´æ¥ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚é€šè¿‡è°ƒç”¨Threadç±»çš„start()æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™æ—¶æ­¤çº¿ç¨‹å¤„äºå°±ç»ªï¼ˆå¯è¿è¡Œï¼‰çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¿è¡Œï¼Œä¸€æ—¦å¾—åˆ°cpuæ—¶é—´ç‰‡ï¼Œå°±å¼€å§‹æ‰§è¡Œrun()æ–¹æ³•ï¼Œè¿™é‡Œæ–¹æ³• run()ç§°ä¸ºçº¿ç¨‹ä½“ï¼Œå®ƒåŒ…å«äº†è¦æ‰§è¡Œçš„è¿™ä¸ªçº¿ç¨‹çš„å†…å®¹ï¼ŒRunæ–¹æ³•è¿è¡Œç»“æŸï¼Œæ­¤çº¿ç¨‹éšå³ç»ˆæ­¢ã€‚ </p>
<p>runï¼š run()æ–¹æ³•åªæ˜¯ç±»çš„ä¸€ä¸ªæ™®é€šæ–¹æ³•è€Œå·²ï¼Œå¦‚æœç›´æ¥è°ƒç”¨Runæ–¹æ³•ï¼Œç¨‹åºä¸­ä¾ç„¶åªæœ‰ä¸»çº¿ç¨‹è¿™ä¸€ä¸ªçº¿ç¨‹ï¼Œå…¶ç¨‹åºæ‰§è¡Œè·¯å¾„è¿˜æ˜¯åªæœ‰ä¸€æ¡ï¼Œè¿˜æ˜¯è¦é¡ºåºæ‰§è¡Œï¼Œè¿˜æ˜¯è¦ç­‰å¾…runæ–¹æ³•ä½“æ‰§è¡Œå®Œæ¯•åæ‰å¯ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œè¿™æ ·å°±æ²¡æœ‰è¾¾åˆ°å†™çº¿ç¨‹çš„ç›®çš„ã€‚</p>
<p>æ€»ç»“ï¼šè°ƒç”¨startæ–¹æ³•æ–¹å¯å¯åŠ¨çº¿ç¨‹ï¼Œè€Œrunæ–¹æ³•åªæ˜¯threadçš„ä¸€ä¸ªæ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œè¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹é‡Œæ‰§è¡Œã€‚æŠŠéœ€è¦å¹¶è¡Œå¤„ç†çš„ä»£ç æ”¾åœ¨run()æ–¹æ³•ä¸­ï¼Œstart()æ–¹æ³•å¯åŠ¨çº¿ç¨‹å°†è‡ªåŠ¨è°ƒç”¨ run()æ–¹æ³•ï¼Œè¿™æ˜¯ç”±jvmçš„å†…å­˜æœºåˆ¶è§„å®šçš„ã€‚å¹¶ä¸”run()æ–¹æ³•å¿…é¡»æ˜¯publicè®¿é—®æƒé™ï¼Œè¿”å›å€¼ç±»å‹ä¸ºvoidã€‚</p>
<p>joinæ–¹æ³•åœ¨çº¿ç¨‹å¤–ä½¿ç”¨ï¼Œè¡¨ç¤ºç­‰å¾…threadçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†ç»§ç»­æ‰§è¡Œå½“å‰joinæ–¹æ³•æ‰€åœ¨çš„çº¿ç¨‹ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹ç”Ÿæˆå¹¶èµ·åŠ¨äº†å­çº¿ç¨‹ï¼Œå¦‚æœå­çº¿ç¨‹é‡Œè¦è¿›è¡Œå¤§é‡çš„è€—æ—¶çš„è¿ç®—ï¼Œä¸»çº¿ç¨‹å¾€å¾€å°†äºå­çº¿ç¨‹ä¹‹å‰ç»“æŸï¼Œä½†æ˜¯å¦‚æœä¸»çº¿ç¨‹å¤„ç†å®Œå…¶ä»–çš„äº‹åŠ¡åï¼Œéœ€è¦ç”¨åˆ°å­çº¿ç¨‹çš„å¤„ç†ç»“æœï¼Œä¹Ÿå°±æ˜¯ä¸»çº¿ç¨‹éœ€è¦ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæˆä¹‹åå†ç»“æŸï¼Œè¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°join()æ–¹æ³•äº†ã€‚</p>
<p>âœ…å¤šçº¿ç¨‹ç´¯åŠ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// çº¿ç¨‹å®‰å…¨çš„ç´¯åŠ </span><br><span class="line">@Test</span><br><span class="line">public void test1() &#123;</span><br><span class="line">/**</span><br><span class="line">    * åˆ›å»ºçº¿ç¨‹</span><br><span class="line">    */</span><br><span class="line">class CreateThread implements Runnable &#123;</span><br><span class="line"></span><br><span class="line">    private int num = 1;</span><br><span class="line">    private final Object lock = new Object(); //ä½¿ç”¨ä¸€ä¸ªJavaå¯¹è±¡ä½œä¸ºä¸€ä¸ªé”</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        while(true) &#123;</span><br><span class="line">            synchronized (lock) &#123;</span><br><span class="line">                if (num &lt;= 100) &#123;</span><br><span class="line">                    System.out.println(&quot;çº¿ç¨‹ï¼š&quot; + Thread.currentThread().getName() + &quot;  num: &quot; + num );</span><br><span class="line">                    num++;</span><br><span class="line">                    lock.notifyAll(); //ä¸åŠ ä¹Ÿä¸€æ ·</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// å¿…é¡»å…±ç”¨ä¸€ä¸ªRunnable</span><br><span class="line">CreateThread myThread1 = new CreateThread();</span><br><span class="line">Thread thread1 = new Thread(myThread1, &quot;thread1&quot;);</span><br><span class="line">Thread thread2 = new Thread(myThread1, &quot;thread2&quot;);</span><br><span class="line">thread1.start();</span><br><span class="line">thread2.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…çº¿ç¨‹ä¼‘çœ ç­‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2() throws InterruptedException &#123;</span><br><span class="line">    // çº¿ç¨‹ç±»è¿˜å¿…é¡»æ”¾å‰é¢</span><br><span class="line">    class CreateThread1 implements Runnable &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;çº¿ç¨‹æ‰§è¡Œ&quot;);</span><br><span class="line">            Thread.yield(); //çº¿ç¨‹è®©æ­¥</span><br><span class="line">            System.out.println(&quot;ç»§ç»­æ‰§è¡Œ&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Thread thread1 = new Thread(new CreateThread1(), &quot;thread1&quot;);</span><br><span class="line">    thread1.start();</span><br><span class="line">    thread1.join();  //æ’é˜Ÿæ‰§è¡Œ</span><br><span class="line">    System.out.println(&quot;mainçº¿ç¨‹&quot;);</span><br><span class="line">    Thread.sleep(1000 * 10);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ˆæŠ¤çº¿ç¨‹"><a href="#å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹"></a>å®ˆæŠ¤çº¿ç¨‹</h3><p>å•æµ‹æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½“å•æµ‹æ–¹æ³•ç»“æŸçš„æ—¶å€™ï¼Œé‡Œé¢çš„çº¿ç¨‹ä¹Ÿè¦ç»“æŸï¼Œä¸ç®¡æ˜¯ä¸æ˜¯æ‰§è¡Œå®Œæˆã€‚å•æµ‹æ–¹æ³•ç»“æŸçš„æ—¶å€™ä¼šæŠŠé‡Œé¢çš„èµ„æºé‡Šæ”¾æ‰ï¼Œå¯¼è‡´é‡Œé¢çš„çº¿ç¨‹æå‰ç»“æŸã€‚<br>ç»“è®ºï¼šå°½é‡ä¸è¦åœ¨testä¸­å¼€å¯çº¿ç¨‹ï¼Œå¼€å¯çš„è¯ï¼Œsleepä¸€ä¸‹ï¼Œç­‰çº¿ç¨‹æ‰§è¡Œå®Œã€‚</p>
<p>ä½†æ˜¯åœ¨mainæ–¹æ³•ä¸­ï¼Œmainæ–¹æ³•æ‰§è¡Œå®Œä»¥åå­çº¿ç¨‹å¹¶ä¸ä¼šé€€å‡ºï¼Œå› ä¸ºå­çº¿ç¨‹æ˜¯éå®ˆæŠ¤çº¿ç¨‹ã€‚</p>
<p>é¦–å…ˆï¼ŒJVMç¨‹åºåœ¨ä»€ä¹ˆæƒ…å†µä¸‹èƒ½å¤Ÿæ­£å¸¸é€€å‡º<br>The Java Virtual Machine exits when the only threads running are all daemon threads.<br>å½“JVMä¸­ä¸å­˜åœ¨ä»»ä½•ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„éå®ˆæŠ¤çº¿ç¨‹æ—¶ï¼Œåˆ™JVMè¿›ç¨‹å³ä¼šé€€å‡ºã€‚<br>mainçº¿ç¨‹æ˜¯ä¸€ä¸ªéå®ˆæŠ¤çº¿ç¨‹ã€‚åªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹ï¼Œå°±ä¼šé€€å‡ºã€‚</p>
<p>ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ<br>åœ¨Javaä¸­æœ‰ä¸¤ç±»çº¿ç¨‹ï¼š</p>
<ul>
<li>User Thread(ç”¨æˆ·çº¿ç¨‹)</li>
<li>Daemon Thread(å®ˆæŠ¤çº¿ç¨‹)</li>
</ul>
<p>JVMä¸­çš„åƒåœ¾å›æ”¶å°±æ˜¯å…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹ï¼Œå½“JVMè¦é€€å‡ºæ—¶ï¼Œå¦‚æœåƒåœ¾å›æ”¶çº¿ç¨‹è¿˜åœ¨è¿è¡Œï¼Œå¯¼è‡´ç¨‹åºæ— æ³•é€€å‡ºã€‚è¿™å°±å¾ˆå°´å°¬äº†ã€‚å®ˆæŠ¤çº¿ç¨‹ä¸»è¦æ˜¯ä¸ºäº†ç»™å…¶ä»–çš„çº¿ç¨‹æä¾›æœåŠ¡ï¼Œæ¯”å¦‚è¯´è®¡æ—¶å™¨ï¼Œæ¸…ç©ºé«˜é€Ÿç¼“å­˜ç­‰ç­‰æ“ä½œã€‚å½“è¢«å®ˆæŠ¤çº¿ç¨‹æ­»äº¡ï¼Œå®ˆæŠ¤çº¿ç¨‹å¾€å¾€ä¹Ÿä¼šæ­»äº¡ï¼Œå½“è™šæ‹Ÿæœºä¸­åªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼Œè™šæ‹Ÿæœºå°±ä¼šé€€å‡ºï¼Œå› ä¸ºæ­¤æ—¶ä¹Ÿæ²¡æœ‰è¿è¡Œç¨‹åºçš„å¿…è¦äº†</p>
<p>å®ˆæŠ¤çº¿ç¨‹ç»å¸¸è¢«ç”¨æ¥æ‰§è¡Œä¸€äº›åå°ä»»åŠ¡ï¼Œå¦‚æœä½ å¸Œæœ›JVMé€€å‡ºæ—¶ï¼Œçº¿ç¨‹èƒ½å¤Ÿæ­£å¸¸é€€å‡ºï¼Œå®ˆæŠ¤çº¿ç¨‹æ˜¯ä½ çš„é¦–é€‰ã€‚<br>å®ˆæŠ¤çº¿ç¨‹åº”è¯¥æ°¸è¿œä¸å»è®¿é—®å›ºæœ‰èµ„æºï¼Œæ¯”å¦‚è¯´æ–‡ä»¶æˆ–è€…æ•°æ®åº“ï¼Œå› ä¸ºå®ƒä¼šåœ¨ä»»ä½•æ—¶å€™ç”šè‡³ä¸€ä¸ªæ“ä½œçš„ä¸­é—´å‘ç”Ÿä¸­æ–­ã€‚</p>
<h3 id="SynchronizedåŒæ­¥é”"><a href="#SynchronizedåŒæ­¥é”" class="headerlink" title="SynchronizedåŒæ­¥é”"></a>SynchronizedåŒæ­¥é”</h3><p>synchronizedçš„ä½œç”¨æ˜¯ä¿è¯åœ¨åŒä¸€æ—¶åˆ»ï¼Œ è¢«ä¿®é¥°çš„ä»£ç å—æˆ–æ–¹æ³•åªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œä»¥è¾¾åˆ°ä¿è¯å¹¶å‘å®‰å…¨çš„æ•ˆæœã€‚</p>
<p>synchronizedæ˜¯Javaä¸­è§£å†³å¹¶å‘é—®é¢˜çš„ä¸€ç§æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æœ€ç®€å•çš„ä¸€ç§æ–¹æ³•ã€‚</p>
<p>åœ¨JDK1.5ä¹‹å‰synchronizedæ˜¯ä¸€ä¸ªé‡é‡çº§é”ï¼Œç›¸å¯¹äºj.u.c.Lockï¼Œå®ƒä¼šæ˜¾å¾—é‚£ä¹ˆç¬¨é‡ï¼Œéšç€Javs SE 1.6å¯¹synchronizedè¿›è¡Œçš„å„ç§ä¼˜åŒ–åï¼Œsynchronizedå¹¶ä¸ä¼šæ˜¾å¾—é‚£ä¹ˆé‡äº†ã€‚</p>
<p>synchronizedçš„ä½œç”¨ä¸»è¦æœ‰ä¸‰ä¸ªï¼š</p>
<p>åŸå­æ€§ï¼šç¡®ä¿çº¿ç¨‹äº’æ–¥åœ°è®¿é—®åŒæ­¥ä»£ç ï¼›<br>å¯è§æ€§ï¼šä¿è¯å…±äº«å˜é‡çš„ä¿®æ”¹èƒ½å¤ŸåŠæ—¶å¯è§ï¼Œå…¶å®æ˜¯é€šè¿‡Javaå†…å­˜æ¨¡å‹ä¸­çš„â€œå¯¹ä¸€ä¸ªå˜é‡unlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»è¦åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼›å¦‚æœå¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œlockæ“ä½œï¼Œåˆ™å°†ä¼šæ¸…ç©ºå·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“ä½¿ç”¨æ­¤å˜é‡å‰ï¼Œéœ€è¦é‡æ–°ä»ä¸»å†…å­˜ä¸­loadæ“ä½œæˆ–assignæ“ä½œåˆå§‹åŒ–å˜é‡å€¼â€ æ¥ä¿è¯çš„ï¼›<br>æœ‰åºæ€§ï¼šæœ‰æ•ˆè§£å†³é‡æ’åºé—®é¢˜ï¼Œå³ â€œä¸€ä¸ªunlockæ“ä½œå…ˆè¡Œå‘ç”Ÿ(happen-before)äºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œâ€ï¼›<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_53474063/article/details/112389756">https://blog.csdn.net/m0_53474063/article/details/112389756</a></p>
<p>âœ…waitæ–¹æ³•ã€notifyæ–¹æ³•ã€notifyAllæ–¹æ³•</p>
<p>ç­‰å¾…æ± ï¼š<br>å‡è®¾çº¿ç¨‹ A è°ƒç”¨äº†é”å¯¹è±¡çš„ wait() æ–¹æ³•ï¼Œåˆ™ Açº¿ç¨‹å°±ä¼šé‡Šæ”¾è¯¥å¯¹è±¡çš„é”(å› ä¸º wait() æ–¹æ³•å¿…é¡»å‡ºç°åœ¨ synchronized ä¸­ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œ wait() æ–¹æ³•ä¹‹å‰ Açº¿ç¨‹å°±å·²ç»æ‹¥æœ‰äº†è¯¥å¯¹è±¡çš„é”)ï¼ŒåŒæ—¶çº¿ç¨‹ Aè¿›å…¥åˆ°äº†è¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ã€‚å¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹è°ƒç”¨äº†ç›¸åŒå¯¹è±¡çš„ notifyAll() æ–¹æ³•ï¼Œé‚£ä¹ˆå¤„äºè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­çš„çº¿ç¨‹å°±ä¼šå…¨éƒ¨è¿›å…¥è¯¥å¯¹è±¡çš„é”æ± ä¸­ï¼Œé‡æ–°äº‰å¤ºé”çš„æ‹¥æœ‰æƒã€‚å¦‚æœå¦å¤–çš„ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†ç›¸åŒå¯¹è±¡çš„ notify() æ–¹æ³•ï¼Œé‚£ä¹ˆä»…ä»…æœ‰ä¸€ä¸ªå¤„äºè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­çš„çº¿ç¨‹(éšæœº)ä¼šè¿›å…¥è¯¥å¯¹è±¡çš„é”æ± ã€‚</p>
<p>é”æ± ï¼š<br>å‡è®¾çº¿ç¨‹ Aå·²ç»æ‹¥æœ‰äº†é”ï¼Œè€Œå…¶å®ƒçš„çº¿ç¨‹æƒ³è¦è°ƒç”¨è¯¥å¯¹è±¡çš„ synchronized æ–¹æ³•(æˆ–è€… synchronized å—)ï¼Œå…¶ä»–æœªè·å¾—é”çš„çº¿ç¨‹åœ¨è¿›å…¥å¯¹è±¡çš„ synchronized æ–¹æ³•ä¹‹å‰éƒ½éœ€è¦å…ˆè·å¾—è¯¥å¯¹è±¡çš„é”çš„æ‹¥æœ‰æƒï¼Œä½†æ˜¯è¯¥å¯¹è±¡çš„é”ç›®å‰æ­£è¢« Açº¿ç¨‹æ‹¥æœ‰ï¼Œæ‰€ä»¥è¿™äº›çº¿ç¨‹å°±è¿›å…¥äº†è¯¥å¯¹è±¡çš„é”æ± ä¸­ã€‚</p>
<h3 id="leeco-æŒ‰åºæ‰“å°"><a href="#leeco-æŒ‰åºæ‰“å°" class="headerlink" title="leeco æŒ‰åºæ‰“å°"></a>leeco æŒ‰åºæ‰“å°</h3><p>ä¸‰ä¸ªä¸åŒçš„çº¿ç¨‹ Aã€Bã€Cï¼Œè°ƒç”¨åŒä¸€ä¸ªç±»çš„ä¸‰ä¸ªä¸åŒçš„æ–¹æ³•ï¼Œæƒ³è¦å¼‚æ­¥è°ƒç”¨ä¸‰ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯å®ç°çº¿ç¨‹è°ƒç”¨ç±»ä¸­æ–¹æ³•çš„åŒæ­¥è¾“å‡ºã€‚å®ç°å¼‚æ­¥è½¬åŒæ­¥çš„æ“ä½œã€‚<br>çº¿ç¨‹å†…runæ–¹æ³•é‡Œé¢è´Ÿè´£æ‰“å°ã€‚<br>æ¯”å¦‚å…ˆè°ƒç”¨secondï¼Œå†è°ƒç”¨firstï¼Œè¾“å‡ºçš„æ˜¯first-secondã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">class Foo &#123;</span><br><span class="line"></span><br><span class="line">    public Foo() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private Object lock = new Object(); //å¾—å®šä¹‰ï¼Œä¸ç„¶æ˜¯null</span><br><span class="line">    private Integer index = 1;</span><br><span class="line"></span><br><span class="line">    public void first(Runnable printFirst) throws InterruptedException &#123;</span><br><span class="line">        synchronized(lock) &#123;</span><br><span class="line">            while(index != 1) &#123;</span><br><span class="line">                lock.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            printFirst.run();</span><br><span class="line">            index++;</span><br><span class="line">            lock.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void second(Runnable printSecond) throws InterruptedException &#123;</span><br><span class="line">        synchronized(lock) &#123;</span><br><span class="line">            while(index != 2) &#123;</span><br><span class="line">                lock.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            printSecond.run();</span><br><span class="line">            index++;</span><br><span class="line">            lock.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void third(Runnable printThird) throws InterruptedException &#123;</span><br><span class="line">        synchronized(lock) &#123;</span><br><span class="line">            while(index != 3) &#123;</span><br><span class="line">                lock.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            index++;</span><br><span class="line">            printThird.run();</span><br><span class="line">            lock.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="leeco-äº¤æ›¿æ‰“å°FooBar"><a href="#leeco-äº¤æ›¿æ‰“å°FooBar" class="headerlink" title="leeco äº¤æ›¿æ‰“å°FooBar"></a>leeco äº¤æ›¿æ‰“å°FooBar</h3><p>ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹å°†ä¼šå…±ç”¨ä¸€ä¸ª FooBarå®ä¾‹ï¼Œåˆ†åˆ«è°ƒç”¨ä¸¤ä¸ªæ‰“å°æ–¹æ³•ï¼Œä¿è¯çº¿ç¨‹æ˜¯äº¤æ›¿æ‰“å°çš„ã€‚<br>éœ€è¦åŠ å¾ªç¯ï¼Œå¾ªç¯é‡Œé¢å†æŠ¢é”ã€‚å¦‚æœä¸åŠ å¾ªç¯ï¼Œwaitä¹‹åè¿›å…¥ç­‰å¾…æ± ï¼Œå…¶ä»–çº¿ç¨‹notifyAllï¼Œåªæ˜¯å‘Šè¯‰å…¶ä»–çº¿ç¨‹å¯ä»¥æŠ¢é”ï¼Œå¹¶ä¸æ˜¯å”¤é†’å…¶ä»–çº¿ç¨‹è®©ä»–ä»¬å¼€å§‹æŠ¢é”ã€‚æŠ¢é”è¿™ä¸ªåŠ¨ä½œè¿˜æ˜¯éœ€è¦è‡ªå·±è§¦å‘çš„ã€‚<br>å¦‚æœæŠŠå¾ªç¯åŠ åœ¨synchronizedé‡Œé¢å°±ä¸å¯¹äº†ï¼Œæ²¡æœ‰ä¸»åŠ¨è§¦å‘æŠ¢é”ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">class FooBar &#123;</span><br><span class="line">    private int n;</span><br><span class="line"></span><br><span class="line">    public FooBar(int n) &#123;</span><br><span class="line">        this.n = n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private Object lock = new Object();</span><br><span class="line">    private Integer index = 1;</span><br><span class="line"></span><br><span class="line">    public void foo(Runnable printFoo) throws InterruptedException &#123;</span><br><span class="line">        for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            synchronized(lock) &#123;</span><br><span class="line">                if(index != 1) &#123; //ä¸éœ€è¦whileï¼Œifå°±è¡Œ</span><br><span class="line">                //è¡¨ç¤ºçš„æ˜¯æ‹¿é”™é”äº†ï¼Œé‡Šæ”¾æ‰</span><br><span class="line">                    lock.wait();</span><br><span class="line">                    //waitè¿›å…¥é”æ± ï¼Œå†è¿›æ¥å°±æ˜¯é‡æ–°è·é”è¿›æ¥äº†</span><br><span class="line">                &#125;</span><br><span class="line">                //é”æ‹¿å¯¹äº†ï¼Œå°±è¿›è¡Œå¤„ç†</span><br><span class="line">                printFoo.run();</span><br><span class="line">                index =2;</span><br><span class="line">                lock.notifyAll();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void bar(Runnable printBar) throws InterruptedException &#123;</span><br><span class="line">        for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            synchronized(lock) &#123;</span><br><span class="line">                if(index != 2) &#123;</span><br><span class="line">                    lock.wait();</span><br><span class="line">                &#125;</span><br><span class="line">                printBar.run();</span><br><span class="line">                index =1;</span><br><span class="line">                lock.notifyAll();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/30/myblog/JAVA/java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/30/myblog/JAVA/java/" class="post-title-link" itemprop="url">javaå¸¸è§„</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-30 12:00:26" itemprop="dateCreated datePublished" datetime="2022-04-30T12:00:26+08:00">2022-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-09-11 23:46:42" itemprop="dateModified" datetime="2022-09-11T23:46:42+08:00">2022-09-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h3><p>1ã€sqlï¼ˆdaoå±‚ï¼‰è¿”å›çš„ï¼Œå°½é‡ä¸è¦ç”¨VOï¼Œè€Œä½¿ç”¨DOã€‚é™¤éè”è¡¨æŸ¥è¯¢ï¼Ÿdaoå±‚æŸ¥å‡ºæ¥çš„doéœ€è¦åŠ å…¶ä»–è¡¨çš„ä¸€ä¸¤ä¸ªå­—æ®µï¼Œå¯ä»¥åœ¨åŸè¡¨doçš„åŸºç¡€ä¸Šç»§æ‰¿å°è£…ä¸€ä¸‹ï¼Œå¦‚æœè¦ä¼ å…¥ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥å­ç±»ï¼Œdaoå±‚å¤„ç†æ—¶ä¼šè‡ªåŠ¨è§£æä¸ºçˆ¶ç±»ã€‚</p>
<p>2ã€serviceé‡Œé¢ä¸è¦è°ƒä¸æƒ³å¹²çš„daoå±‚æ–¹æ³•ï¼Œè€Œæ˜¯è°ƒdaoæ‰€åœ¨serviceçš„æ–¹æ³•ã€‚</p>
<p>3ã€ç»§æ‰¿è‡ªåŒä¸€æŠ½è±¡ç±»çš„ç±»æ–¹æ³•ï¼Œéœ€è¦å¯¹åŒä¸€è¿”å›å¤„ç†ï¼Œå¹¶ä¸”æ˜¯ä¸²è¡Œçš„ï¼Œå¯ä»¥è¾“å…¥ä¸­ç”¨contextã€‚</p>
<p>4ã€mainæ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼ŒåŒä¸€ä¸ªç±»å†…çš„æ–¹æ³•å¾—åŠ staticï¼Œä¸ç„¶å°±æ˜¯æˆå‘˜æ–¹æ³•ï¼Œæˆå‘˜æ–¹æ³•æ— æ³•åœ¨é™æ€æ–¹æ³•ä¸­è°ƒç”¨ã€‚</p>
<p>5ã€è¿è¡Œæ—¶å¼‚å¸¸æ¯”å¦‚NPEï¼Œåœ¨æ–¹æ³•é‡Œthrowï¼Œä¸éœ€è¦åœ¨æ–¹æ³•ä¸Šthrowäº†ï¼Œå¹¶ä¸”é‡Œé¢æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¯ä»¥åœ¨å¤–é¢æ–¹æ³•å¯ä»¥catchåˆ°ã€‚</p>
<p>6ã€å†™serviceä»€ä¹ˆæ—¶å€™å†™æˆç±»ï¼Œä»€ä¹ˆæ—¶å€™å†™æˆæ¥å£ï¼Ÿ å¦‚æœå¯¹å¤–çš„è¯å°±å†™æ¥å£ï¼Œå¦‚æœå†…éƒ¨ä»£ç ç”¨ï¼Œå°±serviceç±»å°±è¡Œã€‚</p>
<p>7ã€nullä¸èƒ½ç”¨æ¥åšæ¯”è¾ƒï¼Œä¼šæŠ¥NPEï¼Œä¾‹å¦‚ï¼š1 == nullï¼Œä¸è¡Œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Integer s1 = null;</span><br><span class="line">if(s1 == 1) System.out.println(&quot;ä¸å¯¹&quot;);  //æŠ¥NPE</span><br><span class="line">Integer s1 = 3;</span><br><span class="line">if(null == s1) System.out.println(&quot;å¯¹&quot;); //å¯¹çš„</span><br><span class="line">String s1 = null;</span><br><span class="line">if(s1 == &quot;a&quot;) System.out.println(&quot;å¯¹&quot;); //Stringä¸ä¼šNPE</span><br></pre></td></tr></table></figure>

<p>8ã€å¦‚æœç±»æŠ¥çº¢ï¼Œæ²¡æœ‰å¼•ç”¨åˆ°ï¼Œå°è¯•æ›´æ–°ä¸‹ä»“åº“ï¼šç‚¹ideaå³è¾¹mavenï¼Œç‚¹å·¦ä¸Šè§’æ›´æ–°åœˆï¼Œæ›´æ–°ä¸€ä¸‹ã€‚å¦‚æœè¿˜ä¸è¡Œï¼Œçœ‹ä¸€ä¸‹mavençš„settingæ–‡ä»¶å¯¹ä¸å¯¹ã€‚</p>
<h3 id="è®¿é—®æƒé™"><a href="#è®¿é—®æƒé™" class="headerlink" title="è®¿é—®æƒé™"></a>è®¿é—®æƒé™</h3><p>privateï¼šä»…é™ç±»æœ¬èº«å¯è§<br>defaultï¼šç±»å†…éƒ¨ã€åŒ…è®¿é—®æƒé™<br>protectedï¼šç±»å†…éƒ¨ã€åŒä¸€ä¸ªåŒ…ã€å­ç±»ä¸­è®¿é—®<br>publicï¼šç±»å†…éƒ¨ã€åŒä¸€ä¸ªåŒ…ã€å­ç±»ã€ä»»æ„ä½ç½®éƒ½èƒ½è®¿é—®</p>
<h3 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h3><p>âœ…java: Compilation failed:</p>
<p>æŠ¥é”™åŸå› ï¼š<br>é¡¹ç›®ä¸­Javaç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯ä»¥æŸ¥çœ‹é¡¹ç›®ä¸­çš„jdké…ç½®.<br>1ã€æŸ¥çœ‹é¡¹ç›®çš„jdk<br>File -&gt;Project Structure-&gt;Project Settings -&gt;Project </p>
<p>2ã€æŸ¥çœ‹å·¥ç¨‹çš„jdk<br>File -&gt;Project Structure-&gt;Project Settings -&gt; Modules -&gt; ï¼ˆéœ€è¦ä¿®æ”¹çš„å·¥ç¨‹åç§°ï¼‰ -&gt; Sources -&gt;</p>
<p>3ã€æŸ¥çœ‹ideaä¸­Javaé…ç½®<br>compile çš„ java compileä¸­ã€‚</p>
<p>âœ…ç©ºæŒ‡é’ˆNPE</p>
<p>ç©ºæŒ‡é’ˆ(Null Pointer Exceptionï¼ŒNPE)<br>ç©ºæŒ‡é’ˆå¼‚å¸¸å±äºè¿è¡Œæ—¶çš„å¼‚å¸¸ã€‚å½“Javaå°è¯•å»è°ƒç”¨çœŸå®å¯¹è±¡ä¸Šçš„ä»»ä½•æ–¹æ³•æ—¶ï¼Œå¦‚æœåœ¨è¿è¡Œæ—¶ä¸­ï¼Œè¯¥å¯¹è±¡è°ƒç”¨çš„æ˜¯ç©ºå¼•ç”¨(Null Reference)ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>ç”±äºç§ç§åŸå› ï¼Œå¼€å‘äººå‘˜æ—¶å¸¸ä¼šå¿˜è®°åˆå§‹åŒ–å¯¹è±¡å’ŒéªŒè¯å¯¹è±¡ã€‚è¿™å¾€å¾€æ˜¯å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸çš„æ ¹æºã€‚<br>ä¾‹å¦‚ï¼šå¯¹ä¸€ä¸ªä¸ºnullçš„å¯¹è±¡è°ƒç”¨get/setæ–¹æ³•ï¼Œå°±ä¼šNPEã€‚</p>
<p>ğŸ¤”Optionalé¿å…ç©ºæŒ‡é’ˆ<br>java.util.Optional æ˜¯java8ä¸­å¼•è¿›çš„ä¸€ä¸ªæ–°çš„ç±»ï¼Œå®ƒå¯ä»¥å¯¹å¯èƒ½ç¼ºå¤±çš„å€¼è¿›è¡Œå»ºæ¨¡ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†nullèµ‹å€¼ç»™å˜é‡ã€‚</p>
<p>javaå¼•å…¥ç©ºæŒ‡é’ˆçš„å±å®³ï¼š<br>1ã€å®ƒæ˜¯å¾ˆå¤šé—®é¢˜çš„é”™è¯¯ä¹‹æºï¼Œå®ƒæ˜¯ç›®å‰å¼€å‘ä¸­æœ€å…¸å‹çš„å¼‚å¸¸ã€‚<br>2ã€å®ƒä¼šä½¿ä»£ç è†¨èƒ€ï¼Œå®ƒä¼šä½¿æˆ‘ä»¬çš„ä»£ç å……æ»¡äº†æ·±åº¦åµŒå¥—çš„nullæ£€æŸ¥ï¼Œä»£ç çš„å¯è¯»æ€§ä¸‹é™ã€‚<br>3ã€å®ƒè‡ªèº«æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œnullè‡ªèº«æ²¡æœ‰ä»»ä½•çš„è¯­ä¹‰ï¼Œå®ƒè¡¨ç¤ºä»¥ä¸€ç§é”™è¯¯çš„æ–¹å¼å¯¹ç¼ºå¤±å˜é‡çš„å€¼å»ºæ¨¡ã€‚<br>4ã€å®ƒç ´åäº†javaçš„å“²å­¦ï¼Œjavaä¸€ç›´é¿å…å¼•å…¥æŒ‡é’ˆçš„å­˜åœ¨ï¼Œè€Œå”¯ä¸€çš„ä¾‹å¤–å°±æ˜¯nullæŒ‡é’ˆã€‚<br>5ã€å®ƒç ´åäº†javaçš„ç±»å‹ï¼Œnullä¸å±äºä»»ä½•ç±»å‹ï¼Œè¿™ä¹Ÿæ„å‘³ç€å®ƒå¯ä»¥è¢«èµ‹å€¼ç»™ä»»æ„å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œæˆ‘ä»¬å°†æ— æ³•è·å–è¿™ä¸ªnullå€¼æœ€åˆçš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚<br>è€ŒOptionalçš„å‡ºç°å¯ä»¥è®©æˆ‘ä»¬æœ€å¤§ç¨‹åº¦ä¸Šè§„é¿ä¸Šè¿°é—®é¢˜ã€‚</p>
<p>Optionalçš„ä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/aaaPostcard/article/details/123596787">https://blog.csdn.net/aaaPostcard/article/details/123596787</a><br>ï¼ˆæ„Ÿè§‰åªèƒ½é¿å…å¯¹è‡ªå·±å®šä¹‰çš„domainäº§ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œæ— æ³•é¿å…ä»æ•°æ®åº“ä¸­è·å–åˆ°nullï¼Œç„¶åæ“ä½œé€ æˆNPEã€‚ï¼‰</p>
<p>âœ… IllegalStateException:Failed to load ApplicationContext</p>
<p>åŠ è½½ç±»å‡ºé—®é¢˜ï¼Œå¾€ä¸‹çœ‹æ˜¯å“ªä¸ªç±»æ²¡åŠ è½½ï¼Œè·å–beanå‡ºç°é—®é¢˜ï¼Œçœ‹æ˜¯ä¸æ˜¯å½“ä½œå¯¹è±¡è°ƒç”¨äº†ï¼Œä½†æ˜¯æ²¡åŠ @Serviceã€‚</p>
<h3 id="Void-ä¸-void-ä¸-null"><a href="#Void-ä¸-void-ä¸-null" class="headerlink" title="Void ä¸ void ä¸ null"></a>Void ä¸ void ä¸ null</h3><p>void æ˜¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ã€‚è€Œ Void æ˜¯ void å°è£…ç±»å‹ã€‚<br>Void ä¹‹äº void ç±»ä¼¼äº Integer ä¹‹äº intã€‚ä½†å¹¶éå¦‚æ­¤ï¼ŒVoid æ¯”è¾ƒç‰¹åˆ«ï¼š<br>å®ƒä¸å¯å®ä¾‹åŒ–<br>å®ƒæ²¡æœ‰å†…ç½®çš„ç±»å‹å®ä¾‹ï¼Œä¹Ÿæ²¡æœ‰å¯ç”¨çš„å­—é¢å€¼ã€‚</p>
<p>å£°æ˜ä¸€ä¸ª Void å˜é‡é€šå¸¸æ˜¯æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰çš„ï¼Œå› ä¸ºæ²¡æœ‰å¯ä¸ºå…¶èµ‹å€¼çš„å®ä¾‹ã€‚Void å˜é‡å”¯ä¸€èƒ½æŒæœ‰çš„æ˜¯ nullã€‚Void ä¸€ä¸ªå¯ç”¨çš„åœ°æ–¹æ˜¯åå°„åˆ¤æ–­æ–¹æ³•çš„è¿”å›å€¼æ—¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(m.getReturnType().equals(Void.TYPE)) &#123;</span><br><span class="line">	// å¤„ç†è¿”å›å€¼ä¸º void çš„æ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†ä¹Ÿä¸æ˜¯å¿…éœ€ä½¿ç”¨Void.TYPEï¼Œä¹Ÿå¯ä»¥ç”¨void.classã€‚<br>æ€»ç»“æ¥è¯´ï¼Œå‡ ä¹å¾ˆå°‘ä¼šç”¨åˆ° Void ã€‚</p>
<p>nullæ˜¯æ‰€æœ‰å¼•ç”¨ç±»å‹çš„é»˜è®¤å€¼ï¼Œä½†æ˜¯è¦æ¾„æ¸…ä¸€äº›è¯¯è§£ï¼Œnullæ—¢ä¸æ˜¯å¯¹è±¡ä¹Ÿä¸æ˜¯ä¸€ç§ç±»å‹ï¼Œå®ƒä»…æ˜¯ä¸€ç§ç‰¹æ®Šçš„å€¼ï¼Œä½ å¯ä»¥å°†å…¶èµ‹äºˆä»»ä½•å¼•ç”¨ç±»å‹ï¼Œä½ ä¹Ÿå¯ä»¥å°†nullè½¬åŒ–æˆä»»ä½•ç±»å‹ã€‚</p>
<p>è®¿é—®ä¸€ä¸ªç±»é‡Œçš„æ–¹æ³•ï¼Œå¦‚æœç”¨nullèµ‹äºˆçš„å¯¹è±¡è®¿é—®æ™®é€šæ–¹æ³•ï¼Œä¼šNullPointerExceptionï¼Œè€Œè®¿é—®staticæ–¹æ³•ï¼Œæ²¡äº‹ï¼Œå› ä¸ºè®¿é—®é™æ€æ–¹æ³•ä¸éœ€è¦å®ä¾‹å¯¹è±¡ã€‚å› æ­¤ï¼Œé™æ€æ–¹æ³•çš„è®¿é—®ï¼Œä¸å»ºè®®ç”¨å®ä¾‹è°ƒç”¨ï¼Œç”¨ç±»è°ƒç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Main m = (Main) null;</span><br><span class="line">System.out.println(m instanceof Main); //è¿”å›false</span><br><span class="line">System.out.println(m.getClass()); //ç©ºæŒ‡é’ˆ</span><br></pre></td></tr></table></figure>

<p>voidä¸æ˜¯å‡½æ•°ï¼Œæ˜¯æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼Œvoidçš„æ„æ€æ˜¯è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œæ„æ€å°±æ˜¯æ–¹æ³•åªä¼šè¿è¡Œæ–¹æ³•ä¸­çš„è¯­å¥ï¼Œä½†æ˜¯ä¸è¿”å›ä»»ä½•ä¸œè¥¿ã€‚ java.lang.Voidæ˜¯ä¸€ç§ç±»å‹ã€‚ä¾‹å¦‚ç»™Voidå¼•ç”¨èµ‹å€¼nullã€‚é€šè¿‡Voidç±»çš„æºä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒVoidç±»å‹ä¸å¯ä»¥ç»§æ‰¿ä¸å®ä¾‹åŒ–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public final class Main &#123;</span><br><span class="line"></span><br><span class="line">    public void do1() &#123;</span><br><span class="line">        return; //è¿”å›voidï¼Œreturnå¯å†™å¯ä¸å†™</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Void do2() &#123;</span><br><span class="line">        return null; //æ­¤å¤„å¿…é¡»è¿”å›null è¿”å›å…¶ä½™ç±»å‹éƒ½ä¸å¥½ä½¿</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public final class Main &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(Void.class); //class java.lang.Void</span><br><span class="line">        System.out.println(void.class); //void</span><br><span class="line">        //ç±»ä¼¼äºä¸‹é¢çš„</span><br><span class="line">        System.out.println(Integer.class); //class java.lang.Integer</span><br><span class="line">        System.out.println(int.class); //int</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Voidæˆ‘ä»¬åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®åœ¨æ³›å‹å‡ºç°ä¹‹å‰ï¼ŒVoidä¸€èˆ¬ç”¨äºåå°„ä¹‹ä¸­ã€‚åˆ¤æ–­æ–¹æ³•è¿”å›æ˜¯å¦ä¸ºvoidã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">  public void print(String v) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  public static void main(String args[])&#123;</span><br><span class="line">    for(Method method : Test.class.getMethods()) &#123;</span><br><span class="line">      //åˆ¤æ–­è¿”å›å€¼ç±»å‹ ç”¨åˆ°äº†Voidç±»</span><br><span class="line">      if(method.getReturnType().equals(Void.TYPE)) &#123;</span><br><span class="line">        System.out.println(method.getName());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰æœ‰çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦è¿”å›å€¼çš„æŠ½åƒæ€§è®¾è®¡ï¼Œæ¯”å¦‚ä¸‹é¢è®¾è®¡çš„åˆ†å¸ƒå¼é”ï¼šRedisLock.</p>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/f641385712/article/details/80409211?utm_source=blogxgwz0">https://blog.csdn.net/f641385712/article/details/80409211?utm_source=blogxgwz0</a></p>
<h3 id="Javaä¸­åŒ…è£…ç±»å‹å’ŒåŸºæœ¬ç±»å‹çš„ä½¿ç”¨åœºæ™¯"><a href="#Javaä¸­åŒ…è£…ç±»å‹å’ŒåŸºæœ¬ç±»å‹çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="Javaä¸­åŒ…è£…ç±»å‹å’ŒåŸºæœ¬ç±»å‹çš„ä½¿ç”¨åœºæ™¯"></a>Javaä¸­åŒ…è£…ç±»å‹å’ŒåŸºæœ¬ç±»å‹çš„ä½¿ç”¨åœºæ™¯</h3><p>æœ€ç®€å•çš„ç†è§£ï¼ŒåŸºæœ¬ç±»å‹æœ‰é»˜è®¤å€¼ï¼Œè€ŒåŒ…è£…ç±»å‹åˆå§‹ä¸ºnullã€‚ç„¶åå†æ ¹æ®è¿™ä¸¤ä¸ªç‰¹æ€§è¿›è¡Œåˆ†ä¸šåŠ¡ä½¿ç”¨ï¼Œåœ¨é˜¿é‡Œå·´å·´çš„è§„èŒƒé‡Œæ‰€æœ‰çš„POJOç±»å¿…é¡»ä½¿ç”¨åŒ…è£…ç±»å‹ï¼Œè€Œåœ¨æœ¬åœ°å˜é‡æ¨èä½¿ç”¨åŸºæœ¬ç±»å‹ã€‚å®šä¹‰æ–¹æ³•çš„è¾“å…¥è¾“å‡ºå‚æ•°ç”¨åŒ…è£…ç±»å‹ã€‚Listé‡Œç”¨åŒ…è£…ç±»å‹(,å› ä¸ºListä¸­çš„æ³›å‹å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ã€‚)ï¼Œforå¾ªç¯é‡Œç”¨åŒ…è£…ç±»å‹ã€‚</p>
<p>Javaè¯­è¨€æä¾›äº†å…«ç§åŸºæœ¬ç±»å‹ã€‚å…­ç§æ•°å­—ç±»å‹ï¼ˆå››ä¸ªæ•´æ•°å‹ï¼Œä¸¤ä¸ªæµ®ç‚¹å‹ï¼‰ï¼Œä¸€ç§å­—ç¬¦ç±»å‹ï¼Œè¿˜æœ‰ä¸€ç§å¸ƒå°”å‹ã€‚<br>1ã€æ•´æ•°ï¼šåŒ…æ‹¬intã€shortã€byteã€longåˆå§‹å€¼ä¸º0ã€‚<br>2ã€æµ®ç‚¹å‹ï¼šfloatã€doubleåˆå§‹å€¼ä¸º0.0<br>3ã€å­—ç¬¦ï¼šcharåˆå§‹å€¼ä¸ºç©ºæ ¼ï¼Œå³â€™â€™ â€œï¼Œå¦‚æœè¾“å‡ºï¼Œåœ¨Consoleä¸Šæ˜¯çœ‹ä¸åˆ°æ•ˆæœçš„ã€‚<br>4ã€å¸ƒå°”ï¼šbooleanåˆå§‹å€¼ä¸ºfalse </p>
<p>åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»<br>Integer ã€Longã€Shortã€Byteã€Characterã€Doubleã€Floatã€Booleanã€BigIntegerã€BigDecimal<br>å…¶ä¸­BigIntegerã€BigDecimalæ²¡æœ‰ç›¸å¯¹åº”çš„åŸºæœ¬ç±»å‹ï¼Œä¸»è¦åº”ç”¨äºé«˜ç²¾åº¦çš„è¿ç®—ï¼ŒBigInteger æ”¯æŒä»»æ„ç²¾åº¦çš„æ•´æ•°ï¼Œ<br>BigDecimalæ”¯æŒä»»æ„ç²¾åº¦å¸¦å°æ•°ç‚¹çš„è¿ç®—ã€‚</p>
<p>åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»å‹çš„å¼‚åŒï¼š<br>1ã€åœ¨Javaä¸­ï¼Œä¸€åˆ‡çš†å¯¹è±¡ï¼Œä½†å…«å¤§åŸºæœ¬ç±»å‹å´ä¸æ˜¯å¯¹è±¡ã€‚<br>2ã€å£°æ˜æ–¹å¼çš„ä¸åŒï¼ŒåŸºæœ¬ç±»å‹æ— éœ€é€šè¿‡newå…³é”®å­—æ¥åˆ›å»ºï¼Œè€Œå°è£…ç±»å‹åˆ™éœ€newå…³é”®å­—ã€‚<br>3ã€å­˜å‚¨æ–¹å¼åŠä½ç½®çš„ä¸åŒï¼ŒåŸºæœ¬ç±»å‹æ˜¯ç›´æ¥å­˜å‚¨å˜é‡çš„å€¼ï¼Œä¿å­˜åœ¨å †æ ˆä¸­èƒ½é«˜æ•ˆçš„å­˜å–ï¼›å°è£…ç±»å‹éœ€è¦é€šè¿‡å¼•ç”¨æŒ‡å‘å®ä¾‹ï¼Œå…·ä½“çš„å®ä¾‹ä¿å­˜åœ¨å †ä¸­ï¼›<br>4ã€åˆå§‹å€¼çš„ä¸åŒï¼Œå°è£…ç±»å‹çš„åˆå§‹å€¼ä¸ºnullï¼ŒåŸºæœ¬ç±»å‹çš„çš„åˆå§‹å€¼è§†å…·ä½“çš„ç±»å‹è€Œå®šï¼Œæ¯”å¦‚intç±»å‹çš„åˆå§‹å€¼ä¸º0ï¼Œbooleanç±»å‹ä¸ºfalseï¼›<br>5ã€ä½¿ç”¨æ–¹å¼çš„ä¸åŒï¼Œæ¯”å¦‚ä¸é›†åˆç±»åˆä½œä½¿ç”¨æ—¶åªèƒ½ä½¿ç”¨åŒ…è£…ç±»å‹ã€‚<br>6ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨åŒ…è£…ç±»ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨åŸºæœ¬ç±»å‹ï¼Œçœ‹åŸºæœ¬çš„ä¸šåŠ¡æ¥å®šï¼šè¿™ä¸ªå­—æ®µå…ä¸å…è®¸nullå€¼ï¼Œå¦‚æœå…è®¸ï¼Œåˆ™å¿…ç„¶è¦ç”¨å°è£…ç±»ï¼›å¦åˆ™ï¼ŒåŸºæœ¬ç±»å‹å°±å¯ä»¥äº†ã€‚å¦‚æœç”¨åˆ°æ¯”å¦‚æ³›å‹å’Œåå°„è°ƒç”¨å‡½æ•°ï¼Œå°±éœ€è¦ç”¨åŒ…è£…ç±»ï¼ </p>
<p>è½¬è‡ª <a target="_blank" rel="noopener" href="http://t.zoukankan.com/east7-p-9887722.html">http://t.zoukankan.com/east7-p-9887722.html</a></p>
<p>âœ…Doubleç±»parseDouble()å’ŒvalueOf()æ–¹æ³•çš„åŒºåˆ«ï¼ˆStringè½¬Doubleï¼‰</p>
<p>1ã€Double.parseDouble(java.lang.String)çš„å‚æ•°åªèƒ½æ˜¯Stringã€‚Double.valueOf()çš„å‚æ•°ç±»å‹å¯ä»¥æ˜¯æµ®ç‚¹å‹æˆ–è€…æ˜¯å­—ç¬¦ä¸²å‡å¯ã€‚</p>
<p>2ã€Double.parseDouble(java.lang.String)æŠŠæ•°å­—ç±»å‹çš„å­—ç¬¦ä¸²è½¬æ¢æˆdoubleç±»å‹<br>Double.valueOf()æ–¹æŠŠæ•°å­—ç±»å‹çš„å­—ç¬¦ä¸²è½¬æ¢æˆDoubleç±»å‹ </p>
<p>âœ…Doubleè½¬String</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String s = Double.toString(1.1);</span><br><span class="line">double d = 1.1;</span><br><span class="line">String s1 = Double.toString(d);</span><br></pre></td></tr></table></figure>

<p>âœ…å¼ºåˆ¶ç±»å‹è½¬æ¢<br>é¦–å…ˆï¼Œæ¯ä¸ªåŒ…è£…ç±»å‹éƒ½æœ‰ä¸€ä¸ªvalueOfæ–¹æ³•ï¼Œç”¨æ¥æŠŠå…¶ä»–ç±»å‹è½¬æ¢ä¸ºè‡ªå·±ç±»å‹ã€‚ä¾‹å¦‚ï¼šDouble d = Double.valueOf(â€œ1â€);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1() &#123;</span><br><span class="line">    System.out.println((double) 1 / 1000); //è¾“å‡º0.001</span><br><span class="line">    System.out.println((double) (1 / 1000)); //è¾“å‡º0.0</span><br><span class="line">    Integer integer = 1;</span><br><span class="line">    System.out.println((double) integer / 1000); //è¾“å‡º0.001</span><br><span class="line"></span><br><span class="line">    //å‘ä¸Šå–æ•´</span><br><span class="line">    double d = Math.ceil(2.3);</span><br><span class="line">    Integer i = (int) d;</span><br><span class="line">    System.out.println(i); //è¾“å‡º3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ¤æ–­å°æ•°ç²¾ç¡®åº¦"><a href="#åˆ¤æ–­å°æ•°ç²¾ç¡®åº¦" class="headerlink" title="åˆ¤æ–­å°æ•°ç²¾ç¡®åº¦"></a>åˆ¤æ–­å°æ•°ç²¾ç¡®åº¦</h4><p>å®ç°æ€è·¯ï¼šç”¨Stringçš„splitæ–¹æ³•ï¼Œå¾—åˆ°å°æ•°ç‚¹åçš„Stringï¼Œå†çœ‹å¤§å°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (&quot;1231312.12&quot;.split(&quot;\\.&quot;)[1].length()==2) &#123;</span><br><span class="line">    System.out.println(&quot;æ˜¯ä¸¤ä½å°æ•°&quot;);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="BigDecimal"><a href="#BigDecimal" class="headerlink" title="BigDecimal"></a>BigDecimal</h3><p>ä½¿ç”¨åœºæ™¯ï¼šæ¯”è¾ƒç²¾ç¡®çš„æ•°å­—çš„åŠ å‡æ³•ã€å°æ•°çš„å››èˆäº”å…¥</p>
<p>é¦–å…ˆï¼Œæµ®ç‚¹æ•°ä¸ºä»€ä¹ˆä¸å‡†ç¡®ï¼Ÿ<br>ç å†œåœ¨ç¨‹åºé‡Œå†™çš„10è¿›åˆ¶å°æ•°ï¼Œè®¡ç®—æœºå†…éƒ¨æ— æ³•ç”¨äºŒè¿›åˆ¶çš„å°æ•°æ¥ç²¾ç¡®çš„è¡¨è¾¾ã€‚<br>å¯¹äºäºŒè¿›åˆ¶å°æ•°ï¼Œå°æ•°ç‚¹å³è¾¹èƒ½è¡¨è¾¾çš„å€¼æ˜¯ 1/2, 1/4, 1/8, 1/16, 1/32, 1/64, 1/128 â€¦ 1/(2^nï¼‰</p>
<p>è¯•ä¸€è¯•å¦‚ä½•è¡¨è¾¾åè¿›åˆ¶çš„ 0.2 å§ã€‚</p>
<p>0.01 = 1/4 = 0.25 ,å¤ªå¤§</p>
<p>0.001 =1/8 = 0.125 , åˆå¤ªå°</p>
<p>0.0011 = 1/8 + 1/16 = 0.1875 , é€¼è¿‘0.2äº†</p>
<p>0.00111 = 1/8 + 1/16 + 1/32 = 0.21875 , åˆå¤§äº†</p>
<p>0.001101 = 1/8+ 1/16 + 1/64 = 0.203125 è¿˜æ˜¯å¤§</p>
<p>0.0011001 = 1/8 + 1/16 + 1/128 = 0.1953125 è¿™ç»“æœä¸é”™</p>
<p>0.00110011 = 1/8+1/16+1/128+1/256 = 0.19921875<br>å·²ç»å¾ˆé€¼è¿‘äº†ï¼Œ å°±è¿™æ ·å§ã€‚</p>
<p>è¿™å°±æ˜¯ç”¨äºŒè¿›åˆ¶å°æ•°æ²¡æ³•ç²¾ç¡®è¡¨è¾¾10è¿›åˆ¶å°æ•°çš„å«ä¹‰ã€‚<br>æ ¹æœ¬åŸå› æ˜¯:åè¿›åˆ¶å€¼é€šå¸¸æ²¡æœ‰å®Œå…¨ç›¸åŒçš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼;åè¿›åˆ¶æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼å¯èƒ½ä¸ç²¾ç¡®ã€‚åªèƒ½æ— é™æ¥è¿‘äºé‚£ä¸ªå€¼</p>
<p>ã€ŠEffective Javaã€‹åœ¨ç¬¬48æ¡æ¨èâ€œä½¿ç”¨BigDecimalæ¥åšç²¾ç¡®è¿ç®—â€ã€‚</p>
<hr>
<p>floatå’Œdoubleç±»å‹çš„ä¸»è¦è®¾è®¡ç›®æ ‡æ˜¯ä¸ºäº†ç§‘å­¦è®¡ç®—å’Œå·¥ç¨‹è®¡ç®—ã€‚ä»–ä»¬æ‰§è¡ŒäºŒè¿›åˆ¶æµ®ç‚¹è¿ç®—ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨å¹¿åŸŸæ•°å€¼èŒƒå›´ä¸Šæä¾›è¾ƒä¸ºç²¾ç¡®çš„å¿«é€Ÿè¿‘ä¼¼è®¡ç®—è€Œç²¾å¿ƒè®¾è®¡çš„ã€‚ç„¶è€Œï¼Œå®ƒä»¬æ²¡æœ‰æä¾›å®Œå…¨ç²¾ç¡®çš„ç»“æœï¼Œæ‰€ä»¥ä¸åº”è¯¥è¢«ç”¨äºè¦æ±‚ç²¾ç¡®ç»“æœçš„åœºåˆã€‚ä½†æ˜¯ï¼Œå•†ä¸šè®¡ç®—å¾€å¾€è¦æ±‚ç»“æœç²¾ç¡®ï¼Œè¿™æ—¶å€™BigDecimalå°±æ´¾ä¸Šå¤§ç”¨åœºå•¦ã€‚</p>
<p>Javaåœ¨java.mathåŒ…ä¸­æä¾›çš„APIç±»BigDecimalï¼Œç”¨æ¥å¯¹è¶…è¿‡16ä½æœ‰æ•ˆä½çš„æ•°è¿›è¡Œç²¾ç¡®çš„è¿ç®—ã€‚åŒç²¾åº¦æµ®ç‚¹å‹å˜é‡doubleå¯ä»¥å¤„ç†16ä½æœ‰æ•ˆæ•°ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦å¯¹æ›´å¤§æˆ–è€…æ›´å°çš„æ•°è¿›è¡Œè¿ç®—å’Œå¤„ç†ã€‚floatå’Œdoubleåªèƒ½ç”¨æ¥åšç§‘å­¦è®¡ç®—æˆ–è€…æ˜¯å·¥ç¨‹è®¡ç®—ï¼Œåœ¨å•†ä¸šè®¡ç®—ä¸­è¦ç”¨java.math.BigDecimalã€‚BigDecimalæ‰€åˆ›å»ºçš„æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ä¼ ç»Ÿçš„+ã€-ã€*ã€/ç­‰ç®—æœ¯è¿ç®—ç¬¦ç›´æ¥å¯¹å…¶å¯¹è±¡è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œè€Œå¿…é¡»è°ƒç”¨å…¶ç›¸å¯¹åº”çš„æ–¹æ³•ã€‚</p>
<hr>
<p>âœ…BigDecimalæ„é€ æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public BigDecimal(double val)    å°†doubleè¡¨ç¤ºå½¢å¼è½¬æ¢ä¸ºBigDecimal *ä¸å»ºè®®ä½¿ç”¨</span><br><span class="line">public BigDecimal(int val)ã€€ã€€å°†intè¡¨ç¤ºå½¢å¼è½¬æ¢æˆBigDecimal</span><br><span class="line">public BigDecimal(long)    åˆ›å»ºä¸€ä¸ªå…·æœ‰å‚æ•°æ‰€æŒ‡å®šé•¿æ•´æ•°å€¼çš„å¯¹è±¡ã€‚ </span><br><span class="line">public BigDecimal(String val)ã€€ã€€å°†Stringè¡¨ç¤ºå½¢å¼è½¬æ¢æˆBigDecimal *æ¨èä½¿ç”¨</span><br></pre></td></tr></table></figure>
<p>âš ï¸BigDecimal ä¸åƒDoubleä¸€æ ·å¯ä»¥ç›´æ¥=1.1ã€‚ BigDecimaléœ€è¦newä¸ªå¯¹è±¡ï¼Œæˆ–è€…ï¼šBigDecimal.ZERO è¡¨ç¤º0.0ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨Doubleå…¥å‚ï¼Ÿ<br>BigDecimal bDouble = new BigDecimal(2.3);<br>æœ€ç»ˆè¾“å‡ºçš„æ•°æ˜¯ï¼š2.29999999â€¦.</p>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</p>
<p>JDKçš„æè¿°ï¼š<br>1ã€å‚æ•°ç±»å‹ä¸ºdoubleçš„æ„é€ æ–¹æ³•çš„ç»“æœæœ‰ä¸€å®šçš„ä¸å¯é¢„çŸ¥æ€§ã€‚æœ‰äººå¯èƒ½è®¤ä¸ºåœ¨Javaä¸­å†™å…¥newBigDecimal(0.1)æ‰€åˆ›å»ºçš„BigDecimalæ­£å¥½ç­‰äº 0.1ï¼ˆéæ ‡åº¦å€¼ 1ï¼Œå…¶æ ‡åº¦ä¸º 1ï¼‰ï¼Œä½†æ˜¯å®ƒå®é™…ä¸Šç­‰äº0.1000000000000000055511151231257827021181583404541015625ã€‚è¿™æ˜¯å› ä¸º0.1æ— æ³•å‡†ç¡®åœ°è¡¨ç¤ºä¸º doubleï¼ˆæˆ–è€…è¯´å¯¹äºè¯¥æƒ…å†µï¼Œä¸èƒ½è¡¨ç¤ºä¸ºä»»ä½•æœ‰é™é•¿åº¦çš„äºŒè¿›åˆ¶å°æ•°ï¼‰ã€‚è¿™æ ·ï¼Œä¼ å…¥åˆ°æ„é€ æ–¹æ³•çš„å€¼ä¸ä¼šæ­£å¥½ç­‰äº 0.1ï¼ˆè™½ç„¶è¡¨é¢ä¸Šç­‰äºè¯¥å€¼ï¼‰ã€‚</p>
<p>2ã€å¦ä¸€æ–¹é¢ï¼ŒString æ„é€ æ–¹æ³•æ˜¯å®Œå…¨å¯é¢„çŸ¥çš„ï¼šå†™å…¥ newBigDecimal(â€œ0.1â€) å°†åˆ›å»ºä¸€ä¸ª BigDecimalï¼Œå®ƒæ­£å¥½ç­‰äºé¢„æœŸçš„ 0.1ã€‚å› æ­¤ï¼Œæ¯”è¾ƒè€Œè¨€ï¼Œé€šå¸¸å»ºè®®ä¼˜å…ˆä½¿ç”¨Stringæ„é€ æ–¹æ³•ã€‚</p>
<p>å½“doubleå¿…é¡»ç”¨ä½œBigDecimalçš„æºæ—¶ï¼Œè¯·ä½¿ç”¨Double.toString(double)è½¬æˆStringï¼Œç„¶åä½¿ç”¨Stringæ„é€ æ–¹æ³•ï¼Œæˆ–ä½¿ç”¨BigDecimalçš„é™æ€æ–¹æ³•valueOf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal bDouble1 = BigDecimal.valueOf(2.3); //æ–¹æ³•ä¸èƒ½ä¼ null</span><br><span class="line">BigDecimal bDouble2 = new BigDecimal(Double.toString(2.3));</span><br></pre></td></tr></table></figure>

<hr>
<p>âœ…BigDecimalç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        BigDecimal a = new BigDecimal(&quot;4.5&quot;);</span><br><span class="line">        BigDecimal b = new BigDecimal(&quot;1.5&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;a + b =&quot; + a.add(b));</span><br><span class="line">        System.out.println(&quot;a - b =&quot; + a.subtract(b));</span><br><span class="line">        System.out.println(&quot;a * b =&quot; + a.multiply(b));</span><br><span class="line">        System.out.println(&quot;a / b =&quot; + a.divide(b));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>BigDecimalé™¤æ³•å¯èƒ½å‡ºç°ä¸èƒ½æ•´é™¤çš„æƒ…å†µï¼Œæ¯”å¦‚ 4.5/1.3ï¼Œè¿™æ—¶ä¼šæŠ¥é”™java.lang.ArithmeticException: Non-terminating decimal expansion; no exact representable decimal result.</p>
<p>å…¶å®divideæ–¹æ³•æœ‰å¯ä»¥ä¼ ä¸‰ä¸ªå‚æ•°</p>
<p>public BigDecimal divide(BigDecimal divisor, int scale, int roundingMode)<br>ç¬¬ä¸€å‚æ•°è¡¨ç¤ºé™¤æ•°ï¼Œ ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå°æ•°ç‚¹åä¿ç•™ä½æ•°ï¼Œ<br>ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºèˆå…¥æ¨¡å¼ï¼Œåªæœ‰åœ¨ä½œé™¤æ³•è¿ç®—æˆ–å››èˆäº”å…¥æ—¶æ‰ç”¨åˆ°èˆå…¥æ¨¡å¼ï¼Œæœ‰ä¸‹é¢è¿™å‡ ç§:</p>
<pre><code>ROUND_CEILING    //å‘æ­£æ— ç©·æ–¹å‘èˆå…¥
ROUND_DOWN    //å‘é›¶æ–¹å‘èˆå…¥
ROUND_FLOOR    //å‘è´Ÿæ— ç©·æ–¹å‘èˆå…¥
ROUND_HALF_DOWN    //å‘ï¼ˆè·ç¦»ï¼‰æœ€è¿‘çš„ä¸€è¾¹èˆå…¥ï¼Œé™¤éä¸¤è¾¹ï¼ˆçš„è·ç¦»ï¼‰æ˜¯ç›¸ç­‰,å¦‚æœæ˜¯è¿™æ ·ï¼Œå‘ä¸‹èˆå…¥, ä¾‹å¦‚1.55 ä¿ç•™ä¸€ä½å°æ•°ç»“æœä¸º1.5
ROUND_HALF_EVEN    //å‘ï¼ˆè·ç¦»ï¼‰æœ€è¿‘çš„ä¸€è¾¹èˆå…¥ï¼Œé™¤éä¸¤è¾¹ï¼ˆçš„è·ç¦»ï¼‰æ˜¯ç›¸ç­‰,å¦‚æœæ˜¯è¿™æ ·ï¼Œå¦‚æœä¿ç•™ä½æ•°æ˜¯å¥‡æ•°ï¼Œä½¿ç”¨ROUND_HALF_UPï¼Œå¦‚æœæ˜¯å¶æ•°ï¼Œä½¿ç”¨ROUND_HALF_DOWN
ROUND_HALF_UP    //å‘ï¼ˆè·ç¦»ï¼‰æœ€è¿‘çš„ä¸€è¾¹èˆå…¥ï¼Œé™¤éä¸¤è¾¹ï¼ˆçš„è·ç¦»ï¼‰æ˜¯ç›¸ç­‰,å¦‚æœæ˜¯è¿™æ ·ï¼Œå‘ä¸Šèˆå…¥, 1.55ä¿ç•™ä¸€ä½å°æ•°ç»“æœä¸º1.6
ROUND_UNNECESSARY    //è®¡ç®—ç»“æœæ˜¯ç²¾ç¡®çš„ï¼Œä¸éœ€è¦èˆå…¥æ¨¡å¼
ROUND_UP    //å‘è¿œç¦»0çš„æ–¹å‘èˆå…¥

å››èˆäº”å…¥é‡‡ç”¨ ROUND_HALF_UP
</code></pre>
<p>å¯¹BigDecimalè¿›è¡Œæˆªæ–­å’Œå››èˆäº”å…¥å¯ç”¨setScaleæ–¹æ³•:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        BigDecimal a = new BigDecimal(&quot;4.5635&quot;);</span><br><span class="line"></span><br><span class="line">        a = a.setScale(3, RoundingMode.HALF_UP);    //ä¿ç•™3ä½å°æ•°ï¼Œä¸”å››èˆäº”å…¥</span><br><span class="line">        a = a.setScale(3, BigDecimal.ROUND_HALF_UP);    //è¿™ä¸ªä¹Ÿè¡Œ</span><br><span class="line">        System.out.println(a);</span><br><span class="line"></span><br><span class="line">        Double d = a.doubleValue();  //è½¬ä¸ºdouble/Doubleç±»å‹</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>BigDecimaléƒ½æ˜¯ä¸ä¸»åŠ¨å˜çš„ï¼ˆimmutableï¼‰çš„ï¼Œåœ¨è¿›è¡Œæ¯ä¸€æ­¥è¿ç®—æ—¶ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨åšåŠ å‡ä¹˜é™¤è¿ç®—æ—¶åƒä¸‡è¦ä¿å­˜æ“ä½œåçš„å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        BigDecimal a = new BigDecimal(&quot;4.5&quot;);</span><br><span class="line">        BigDecimal b = new BigDecimal(&quot;1.5&quot;);</span><br><span class="line">        a.add(b);</span><br><span class="line"></span><br><span class="line">        System.out.println(a);  //è¾“å‡º4.5. åŠ å‡ä¹˜é™¤æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„BigDecimalå¯¹è±¡ï¼ŒåŸæ¥çš„aä¸å˜</span><br><span class="line">        a = a.add(b);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/YangJavaer/p/6056394.html">https://www.cnblogs.com/YangJavaer/p/6056394.html</a></p>
<hr>
<p>âœ…BigDecimalæ¯”è¾ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int flag = bigdemical.compareTo(bigdemical1)ã€‚</span><br><span class="line"></span><br><span class="line">flag = -1ï¼Œè¡¨ç¤ºbigdemicalå°äºbigdemical1ã€‚</span><br><span class="line"></span><br><span class="line">flag =0ï¼Œè¡¨ç¤ºbigdemicalç­‰äºbigdemical1ã€‚</span><br><span class="line"></span><br><span class="line">flag =1ï¼Œè¡¨ç¤ºbigdemicalå¤§äºbigdemical1ã€‚</span><br><span class="line"></span><br><span class="line">å®é™…ä¸­ç›´æ¥è·Ÿ0æ¯”è¾ƒå°±å¯ä»¥äº†ï¼Œåˆ«è·Ÿ-1æˆ–è€…1æ¯”è¾ƒã€‚</span><br></pre></td></tr></table></figure>

<p>BigDecimalçš„equalsæ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal a=BigDecimal.valueOf(1.0);</span><br><span class="line">BigDecimal b=BigDecimal.valueOf(1.000);</span><br><span class="line">System.out.println(a.equals(b));  //true</span><br><span class="line"></span><br><span class="line">BigDecimal c = new BigDecimal(&quot;10.00&quot;);</span><br><span class="line">BigDecimal d = new BigDecimal(&quot;10&quot;);</span><br><span class="line">BigDecimal e = new BigDecimal(10.00);</span><br><span class="line">System.out.println(c.equals(d));  //false</span><br><span class="line">System.out.println(c.equals(e));  //false</span><br><span class="line">// equalsæ˜¯æ¯”è¾ƒå†…å®¹ï¼Œâ€œ1.0â€å’Œâ€œ1.000â€ä¸ä¸€æ ·.</span><br><span class="line"></span><br><span class="line">//toPlainStringå†equals</span><br><span class="line">System.out.println(c.toPlainString().equals(d.toPlainString())); //false</span><br><span class="line">System.out.println(c.toPlainString().equals(e.toPlainString())); //false</span><br><span class="line"></span><br><span class="line">//longValueæ–¹å¼</span><br><span class="line">System.out.println(c.longValue() == d.longValue()); //true</span><br><span class="line">System.out.println(c.longValue() == e.longValue()); //true</span><br><span class="line"></span><br><span class="line">//compareTo</span><br><span class="line">System.out.println(c.compareTo(d) == 0); //true</span><br><span class="line">System.out.println(c.compareTo(e) == 0); //true</span><br><span class="line"></span><br><span class="line">BigDecimal f = new BigDecimal(&quot;10.100001&quot;);</span><br><span class="line">BigDecimal g = new BigDecimal(10.100001);</span><br><span class="line">System.out.println(f.compareTo(g) == 0); //false</span><br><span class="line">// è¿™æ˜¯å› ä¸ºæœ¬èº«Doubleä¼ å‚çš„æ„é€ å°±ä¸å‡†ï¼Œçœ‹ä¸Šé¢</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.iteye.com/blog/bijian1013-2366549">https://www.iteye.com/blog/bijian1013-2366549</a></p>
<hr>
<p>âœ…mysqlçš„decimal<br>decimal:æ•°å­—å‹ï¼Œä¸å­˜åœ¨ç²¾åº¦æŸå¤±ï¼Œå¸¸ç”¨äºé“¶è¡Œå¸ç›®è®¡ç®—</p>
<p><code>distance decimal(10,1) not null default 0.0 comment &#39;è·ç¦»&#39;</code></p>
<p>decimal(P,m)<br>Pçš„å–å€¼èŒƒå›´æ˜¯1â€“65ï¼Œè¡¨ç¤ºæ•´æ•°ä½æ•°<br>Mçš„å–å€¼æ˜¯0â€“30.è¡¨ç¤ºå°æ•°ä½<br>ç²¾åº¦Mæœ€å¤§ä¸º30ï¼Œè¡¨ç¤ºæœ‰30ä½å°æ•°ã€‚<br>decimalæ•´æ•°å’Œå°æ•°ä½å‡ä¸å†™ é»˜è®¤ä¸ºdecimal(10,0)<br>è‹¥å°æ•°ä½ä¸å†™é»˜è®¤çš„å°æ•°ä½ä¸º0ã€‚</p>
<p>decimal(22,6ï¼‰è¡¨ç¤ºæ•´æ•°ä½16ä¸ªå°æ•°ä½6ä¸ªã€‚</p>
<p>decimal è¿˜å¯ä»¥å­˜å‚¨è¶…è¿‡bigintçš„æ•´æ•°ä½ï¼Œæœ€å¤§å­˜å‚¨65ä½çš„æ•´æ•°ç±»å‹ã€‚<br>è¿˜å¯ä»¥å­˜å‚¨å¯¹åº”ä½æ•°çš„è´Ÿæ•°</p>
<p>ä¾‹ï¼šdecimal(2,1)ï¼Œæ­¤æ—¶ï¼Œæ’å…¥æ•°æ®â€œ12.3â€ã€â€œ12â€ç­‰ä¼šå‡ºç°â€œæ•°æ®æº¢å‡ºé”™è¯¯â€çš„å¼‚å¸¸ï¼›æ’å…¥â€œ1.23â€æˆ–â€œ1.2345â€¦â€ä¼šè‡ªåŠ¨å››èˆäº”å…¥æˆâ€œ1.2â€ï¼›æ’å…¥â€œ2â€ä¼šè‡ªåŠ¨è¡¥æˆâ€œ2.0â€ï¼Œä»¥ç¡®ä¿2ä½çš„æœ‰æ•ˆé•¿åº¦ï¼Œå…¶ä¸­åŒ…å«1ä½å°æ•°ã€‚<br>å½“ç”¨ intç±»å‹ä¼šæœ‰æº¢å‡ºæ—¶ï¼Œå¯ä»¥ç”¨ decimal ç±»å‹è¿›è¡Œå¤„ç†ï¼ŒæŠŠç»“æœå¯ä»¥ç”¨ convert æˆ–æ˜¯ cast è¿›è¡Œè½¬æ¢ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/chenpp666/article/details/124372731">https://blog.csdn.net/chenpp666/article/details/124372731</a></p>
<h3 id="javaä½è¿ç®—"><a href="#javaä½è¿ç®—" class="headerlink" title="javaä½è¿ç®—"></a>javaä½è¿ç®—</h3><p>1ã€å·¦ç§»( &lt;&lt; )  å‘å·¦ç§»åŠ¨ï¼Œä½ä½è¡¥0<br>2ã€å³ç§»( &gt;&gt; )  å‘å³ç§»åŠ¨ï¼Œé«˜ä½è¡¥0<br>3ã€æ— ç¬¦å·å³ç§»( &gt;&gt;&gt; )   æ­£æ•°å³ç§»ï¼Œé«˜ä½è¡¥0ï¼Œè´Ÿæ•°å³ç§»ï¼Œé«˜ä½è¡¥1ï¼Œå½“è´Ÿæ•°ä½¿ç”¨æ— ç¬¦å·å³ç§»æ—¶ï¼Œç”¨0è¿›è¡Œè¡¥ä½(è‡ªç„¶è€Œç„¶çš„ï¼Œå°±ç”±è´Ÿæ•°å˜æˆäº†æ­£æ•°äº†)<br>4ã€ä¸( &amp; )  éƒ½ä¸º1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0<br>5ã€æˆ–( | )  ä¸€ä¸ªæ˜¯1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0<br>6ã€å¼‚æˆ–( ^ )  ä¸¤ä¸ªç›¸åï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0<br>7ã€é( ~ ) ä¸€å…ƒæ“ä½œç¬¦   å–ç›¸åã€‚</p>
<h3 id="Autowiredæ¥å£è¿˜æ˜¯ç°å®ç±»ï¼Ÿ"><a href="#Autowiredæ¥å£è¿˜æ˜¯ç°å®ç±»ï¼Ÿ" class="headerlink" title="Autowiredæ¥å£è¿˜æ˜¯ç°å®ç±»ï¼Ÿ"></a>Autowiredæ¥å£è¿˜æ˜¯ç°å®ç±»ï¼Ÿ</h3><p>ç­”æ¡ˆï¼šæ¥å£å¥½</p>
<p>å½“å®ç°ç±»å”¯ä¸€æ—¶ï¼Œè¡¨é¢ä¸Šæ³¨å…¥æ¥å£ï¼Œå…¶å®æ³¨å…¥å®ç°ç±»<br>å½“å®ç°ç±»å¤šä¸ªæ—¶ï¼Œé€šè¿‡@Service(â€œmenuService1â€)æŒ‡å®šå®ç°ç±»</p>
<p>è§£æï¼š<br>è¿™ä¸ªå…¶å®æ˜¯åˆ›å»ºäº†å®ç°ç±»çš„å¯¹è±¡ä½†å¼•ç”¨äº†æ¥å£ç±»å‹ï¼Œ<br>å³ â€œInjectionDao injectionDao = new InjectionDaoImpl ()â€, æ˜¯ Java å¤šæ€æ€§ï¼ˆå‘ä¸Šè½¬å‹ï¼‰çš„ä¸€ç§åº”ç”¨ã€‚<br>åœ¨å®ç°ç±»å¤„åŠ  @Repository æ³¨è§£ï¼Œæ„æ€å°±æ˜¯ new InjectionDaoImpl (),</p>
<p>è€Œåœ¨ InjectionServiceImpl ä¸­å®šä¹‰å±æ€§ InjectionDAO injectionDAO å°±æ˜¯å°† new å‡ºæ¥çš„è¿™ä¸ª InjectionDaoImpl å¯¹è±¡å‘ä¸Šè½¬å‹ä¸º InjectionDao ç±»å‹ã€‚</p>
<p>æ³¨æ„ï¼š<br>è‹¥ä¸€ä¸ªæ¥å£è¢«å¤šä¸ªå®ç°ç±»ï¼Œå®ç°çš„æ—¶å€™ï¼Œ@Autowiredï¼ŒSpring ä¼šæŒ‰ byType çš„æ–¹å¼å¯»æ‰¾æ¥å£çš„å®ç°ç±»ï¼Œå°†å…¶æ³¨å…¥ã€‚å­˜åœ¨å¤šä¸ªå®ç°ç±»ï¼Œåº”è¯¥æŒ‡å®šåå­—ï¼Œå¯ä»¥é€šè¿‡ byName æ³¨å…¥çš„æ–¹å¼ã€‚å¯ä»¥ä½¿ç”¨ @Resource æˆ– @Qualifier æ³¨è§£ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//å®ç°ç±»1</span><br><span class="line">@Service(&quot;menuService1&quot;)</span><br><span class="line">public class MenuServiceImpl implements IMenuService</span><br><span class="line"> </span><br><span class="line">//å®ç°ç±»2</span><br><span class="line">@Service(&quot;menuService2&quot;)</span><br><span class="line">public class MenuServiceImpl implements IMenuService</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//æ³¨å…¥æ¥å£ï¼Œç›¸å½“äºnewä¸€ä¸ªå®ç°ç±»ï¼ŒæŒ‡å®šåç§°menuService1å®ç°ç±»</span><br><span class="line">@Autowired</span><br><span class="line">@Qualifier(&quot;menuService1&quot;)</span><br><span class="line">private IMenuService menuService;</span><br><span class="line"></span><br><span class="line">//æ³¨å…¥æ¥å£ï¼Œç›¸å½“äºnewä¸€ä¸ªå®ç°ç±»ï¼ŒæŒ‡å®šåç§°menuService2å®ç°ç±»  </span><br><span class="line">@Autowired</span><br><span class="line">@Qualifier(&quot;menuService2&quot;)</span><br><span class="line">private IMenuService menuService;</span><br></pre></td></tr></table></figure>

<p>é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/huangkechen/article/details/122475824">https://blog.csdn.net/huangkechen/article/details/122475824</a></p>
<p>æ€»ç»“ï¼šå°±æ˜¯Java å¤šæ€æ€§ï¼ˆå‘ä¸Šè½¬å‹ï¼‰çš„ä¸€ç§åº”ç”¨ï¼Œä½†æ˜¯è¿™æ ·åšçš„å¥½å¤„å¹¶æ²¡æœ‰è¯´ã€‚<br>è§„çŸ©ï¼šæ³¨å…¥å®ç°ç±»æ—¶ç”¨@Resourceï¼ˆ@Autowiredåº”è¯¥ä¹Ÿå¯ä»¥ï¼‰ï¼Œæ¥å£å•ä¸ªå®ç°ç±»ç”¨@Autowiredï¼ˆ@Resourceåº”è¯¥ä¹Ÿå¯ä»¥ï¼‰ï¼Œæ¥å£å¤šä¸ªå®ç°ç±»ç”¨@Autowired + @Qualifier(value=â€â€) æˆ– @Resource(name=â€â€)ã€‚</p>
<h3 id="Collectionã€Collectionsã€CollectionUtils"><a href="#Collectionã€Collectionsã€CollectionUtils" class="headerlink" title="Collectionã€Collectionsã€CollectionUtils"></a>Collectionã€Collectionsã€CollectionUtils</h3><p>Collection æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ã€‚å®ƒæä¾›äº†å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚Collectionæ¥å£åœ¨Java ç±»åº“ä¸­æœ‰å¾ˆå¤šå…·ä½“çš„å®ç°ã€‚Collectionæ¥å£çš„æ„ä¹‰æ˜¯ä¸ºå„ç§å…·ä½“çš„é›†åˆæä¾›äº†æœ€å¤§åŒ–çš„ç»Ÿä¸€æ“ä½œæ–¹å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Collectionï¼ˆå•ä¾‹é›†åˆ  ï¼‰ </span><br><span class="line">â”œ-Listï¼ˆæœ‰åºï¼Œå¯é‡å¤ ï¼‰  </span><br><span class="line">â”‚  â”œ-LinkedListï¼ˆæŸ¥è¯¢é€Ÿåº¦æ…¢ï¼Œå¢åˆ å¿«ï¼‰   </span><br><span class="line">â”‚  â”œ-ArrayListï¼ˆæŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œå¢åˆ æ…¢ï¼‰  </span><br><span class="line">â”‚  â””-Vectorï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼Œæ“ä½œæ•ˆç‡ä½ ï¼‰  </span><br><span class="line">â”‚ã€€    â””-Stack   </span><br><span class="line">â””-Setï¼ˆæ— åºï¼Œä¸å¯é‡å¤ï¼‰ </span><br><span class="line">      â”œ-HashSetï¼ˆä½¿ç”¨äº†å“ˆå¸Œè¡¨å­˜å–ï¼‰</span><br><span class="line">      â”‚    â””-LinkedHashSet</span><br><span class="line">      â””-SortedSet</span><br><span class="line">               â””-TreeSetï¼ˆæœ‰åºï¼‰</span><br><span class="line">Mapï¼ˆé”®å€¼å¯¹ï¼‰  </span><br><span class="line">â”œ-Hashtable   </span><br><span class="line">â”œ-HashMap   </span><br><span class="line">â””-WeakHashMap</span><br></pre></td></tr></table></figure>
<p>setæ˜¯åœ¨HashMapçš„åŸºç¡€ä¸Šå®ç°çš„ï¼ŒHashSetçš„å­˜å‚¨æ–¹å¼æ˜¯æŠŠHashMapä¸­çš„Keyä½œä¸ºSetçš„å¯¹åº”å­˜å‚¨é¡¹ã€‚HashMapæ˜¯éåŒæ­¥çš„ï¼Œçº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒHashtableè™½ç„¶æ˜¯åŒæ­¥çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å·²ç»è¿‡æœŸäº†ã€‚ ç°åœ¨ä½¿ç”¨ConcurrentHashMapï¼Œè¿™ä¸ªæ˜¯çº¿ç¨‹å®‰å…¨åŒæ­¥çš„ã€‚</p>
<p>Collections æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ã€‚å®ƒåŒ…å«æœ‰å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€å¤šæ€æ–¹æ³•ã€‚æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äºJavaçš„Collectionæ¡†æ¶ã€‚</p>
<p>ä¾‹å¦‚ï¼šæ’åº(Sort)ã€å€’åº(reverse)ã€æœ€å¤§(max)ã€æœ€å°(min)ã€æ›¿æ¢(fill)</p>
<p>ä½¿ç”¨sortæ–¹æ³•å¯ä»¥æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®šåˆ—è¡¨æŒ‰å‡åºè¿›è¡Œæ’åˆ—ã€‚åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ éƒ½å¿…é¡»å®ç°Comparableæ¥å£ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Collections.sort(list);//æ’åº</span><br><span class="line">System.out.println(list);</span><br><span class="line">Collections.reverse(list);//å€’åº</span><br><span class="line">System.out.println(list);</span><br><span class="line">int max = Collections.max(list);//æœ€å¤§</span><br><span class="line">System.out.println(max);</span><br><span class="line">int min = Collections.min(list);//æœ€å°</span><br></pre></td></tr></table></figure>

<p>CollectionUtilsæ˜¯å¯¹Collectioné›†åˆæ“ä½œçš„ç±»æ–¹æ³•ï¼Œè¿™ä¸ªç±»ä¸æ˜¯javaè‡ªå¸¦çš„ç±»æ–¹æ³•ï¼Œéœ€è¦å¦å¤–å¯¼å…¥ä¸€ä¸ªcommons-collections.jaråŒ…æ‰å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»ä¸­æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼šCollectionUtils.isEmpty(list)<br>å®ƒå¯ä»¥å¤„ç†nullï¼Œä½†æ˜¯list.isEmptyé‡Œé¢ä¸ºnullï¼Œä¼šNPEã€‚</p>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/chaoge321/article/details/83788667">https://blog.csdn.net/chaoge321/article/details/83788667</a></p>
<h3 id="listçš„ä¸€äº›æ“ä½œ"><a href="#listçš„ä¸€äº›æ“ä½œ" class="headerlink" title="listçš„ä¸€äº›æ“ä½œ"></a>listçš„ä¸€äº›æ“ä½œ</h3><h4 id="ä¸€ã€Lists-newArrayList-å’Œ-new-ArrayList-ï¼š"><a href="#ä¸€ã€Lists-newArrayList-å’Œ-new-ArrayList-ï¼š" class="headerlink" title="ä¸€ã€Lists.newArrayList() å’Œ new ArrayList() ï¼š"></a>ä¸€ã€Lists.newArrayList() å’Œ new ArrayList() ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();</span><br><span class="line">List&lt;Integer&gt; list = Lists.newArrayList();</span><br><span class="line"></span><br><span class="line">Listså’ŒMapsæ˜¯è°·æ­Œçš„ä¸¤ä¸ªå·¥å…·ç±»,</span><br><span class="line"></span><br><span class="line">Lists.newArrayList()å…¶å®å’Œnew ArrayList()å‡ ä¹ä¸€æ¨¡ä¸€æ ·,</span><br><span class="line"></span><br><span class="line">å”¯ä¸€å®ƒå¸®ä½ åšçš„(å…¶å®æ˜¯javacå¸®ä½ åšçš„),å°±æ˜¯è‡ªåŠ¨æ¨å¯¼å°–æ‹¬å·é‡Œçš„æ•°æ®ç±»å‹.</span><br><span class="line"></span><br><span class="line">åœ¨ Java 7 ä¹‹åï¼Œéƒ½å…è®¸ç±»å‹æ¨æ–­ - åœ¨è¿è¡Œæ—¶æ²¡æœ‰åŒºåˆ«ã€‚</span><br><span class="line"></span><br><span class="line">java8 çš„new ArrayList&lt;&gt;()çš„&lt;&gt;é‡Œé¢å¯ä»¥ä¸å†™ç±»å‹ï¼Œjavaå›å¸®ä½ è‡ªåŠ¨æ¨å¯¼ç±»å‹</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>

<p>åŒæ ·ï¼Œè¿˜æœ‰Setsï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; sets = Sets.newHashSet(&quot;ww&quot;); //å¯ç›´æ¥å®šä¹‰</span><br><span class="line">Set&lt;String&gt; sets = new HashSet&lt;&gt;(Lists.newArrayList(&quot;11&quot;,&quot;22&quot;));</span><br><span class="line">//è¿˜å¾—ç”¨listè½¬æ¢</span><br><span class="line"></span><br><span class="line">setæ²¡æœ‰get(i)æ–¹æ³•ï¼Œéå†å¾—ç”¨è¿­ä»£å™¨ã€‚è¦ä¹ˆå…ˆè½¬æ¢æˆlistã€‚</span><br><span class="line">setè½¬æ¢ä¸ºlistï¼š</span><br><span class="line">ArrayList&lt;Long&gt; list = new ArrayList(set);</span><br></pre></td></tr></table></figure>

<p>æ–°å»ºListï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//List&lt;String&gt; list1 = new ArrayList&lt;String&gt;(&quot;1&quot;, &quot;2&quot;); ä¸è¡Œ</span><br><span class="line">List&lt;String&gt; list2 = Lists.newArrayList(&quot;1&quot;, &quot;2&quot;);</span><br><span class="line">list2.add(&quot;3&quot;);  //å’©é—®é¢˜</span><br><span class="line">System.out.println(list2);</span><br><span class="line">List&lt;String&gt; list3 = Arrays.asList(&quot;1&quot;, &quot;2&quot;);</span><br><span class="line">list3.set(1, &quot;3&quot;); //è®¾ç½®é™¤äº†0ã€1ä¼šæŠ¥é”™</span><br><span class="line">System.out.println(list3);</span><br><span class="line">list3.add(&quot;3&quot;);  //æŠ¥é”™ï¼šjava.lang.UnsupportedOperationException</span><br><span class="line">System.out.println(list3);</span><br><span class="line">List&lt;String&gt; list4 = Collections.singletonList(&quot;1&quot;);</span><br><span class="line">list4.add(&quot;2&quot;); //æŠ¥é”™ï¼šjava.lang.UnsupportedOperationException</span><br><span class="line"></span><br><span class="line">String a[] = new String[] &#123; &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot; &#125;;</span><br><span class="line">List&lt;String&gt; list5 = Arrays.asList(a);</span><br></pre></td></tr></table></figure>

<p>âœ…Array.asListåˆ›å»ºæ–¹å¼ï¼š<br>java.util.Arrays ç±»çš„ asList() æ–¹æ³•ç”¨äºè¿”å›ä¸€ä¸ªç”±æŒ‡å®šæ•°ç»„æ”¯æŒçš„å›ºå®šå¤§å°çš„åˆ—è¡¨ã€‚<br>Arrays.asList æœ€å¤§ç‰¹ç‚¹æ˜¯æ•´ä¸ªé›†åˆå…è®¸æœ‰å¤šä¸ªå…ƒç´ å­˜å…¥æ•°ç»„ï¼Œä¸€æ—¦åˆå§‹åŒ–åï¼Œè¿™ä¸ªæ•°ç»„çš„é•¿åº¦å°±æ˜¯å›ºå®šçš„ï¼Œä½†æ•°ç»„çš„å…ƒç´ å¯ä»¥ä¿®æ”¹ï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ add å’Œ remove æ–¹æ³•æŠ¥é”™çš„åŸå› ã€‚å¦‚æœåœ¨å¼€å‘ä¸­ç¢°åˆ°é•¿åº¦å¯ä»¥ç¡®å®šçš„é›†åˆï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–æ—¶å·²ç»ç¡®å®šäº†å‚¨å­˜å…ƒç´ çš„æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ã€‚<br>Arrays.asList ä¸­ä¼ å…¥çš„æ•°ç»„å‚æ•°ä¸­å…è®¸å­˜åœ¨ nullï¼Œä½†ä¸å…è®¸åªæœ‰ä¸€ä¸ª null</p>
<p>âœ…Collections.singletonList()åˆ›å»ºæ–¹å¼ï¼š<br>Collection.singletonList é•¿åº¦ä¸º 1ï¼Œåˆå§‹å®Œåä¸å¯ä¿®æ”¹ã€‚æ ¹æ®è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨å¼€å‘çš„æ—¶å€™é‡åˆ°åªè¦å‚¨å­˜ä¸€ä¸ªå…ƒç´ çš„é›†åˆï¼Œå¹¶ä¸”æ•´ä¸ªè¿‡ç¨‹å­˜å‚¨æˆ–è€…ä¼ é€’ä¸ºä¸»ï¼Œä¸ä¼šè¿›è¡Œä¿®æ”¹æˆ–è°ƒæ•´çš„æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ã€‚<br>Collections.singletonList ä¸­ä¿å­˜å…ƒç´ çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</p>
<p>âœ…Arrays.asList() å’Œ Collections.singletonList()åŒºåˆ« ï¼š<br>1ã€Arrays.asList()å¾—åˆ°çš„Listä¸­å…ƒç´ æ˜¯å¯å˜çš„ï¼Œå¤§å°ä¸å¯å˜ã€‚<br>è€ŒCollections.singletonListæ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦ä¿®æ”¹å°±ä¼šå¯¼è‡´UnsupportedOperationExceptionå¼‚å¸¸æŠ›å‡º<br>2ã€Collections.singletonList()å¾—åˆ°çš„Listå…ƒç´ åªèƒ½æœ‰1ä¸ª<br>3ã€Arrays.asList(strArray)ä¸å…·æœ‰addæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡setæ–¹æ³•è¿›è¡Œæ”¹å˜å€¼ã€‚Collections.singletonList()è¿”å›çš„æ˜¯ä¸å¯å˜çš„é›†åˆï¼Œä½†æ˜¯è¿™ä¸ªé•¿åº¦çš„é›†åˆåªæœ‰1ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41606477/article/details/108449415">https://blog.csdn.net/weixin_41606477/article/details/108449415</a></p>
<p>æ–°å»ºSetï¼Œé™¤äº†ä¸Šé¢çš„ï¼Œè¿˜æœ‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; list4 = Collections.singleton(&quot;1&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="äºŒã€å¯¹listæ’åºï¼šComparator-javaå·¥å…·ç±»"><a href="#äºŒã€å¯¹listæ’åºï¼šComparator-javaå·¥å…·ç±»" class="headerlink" title="äºŒã€å¯¹listæ’åºï¼šComparator-javaå·¥å…·ç±»"></a>äºŒã€å¯¹listæ’åºï¼šComparator-javaå·¥å…·ç±»</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">list.sort(Comparator.comparing(A::getB));</span><br><span class="line"></span><br><span class="line">List&lt;ç±»&gt; list; ä»£è¡¨æŸé›†åˆ</span><br><span class="line"> </span><br><span class="line">//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€å‡åºæ’åº</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€));</span><br><span class="line"> </span><br><span class="line">//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€é™åºæ’åº æ³¨æ„ä¸¤ç§å†™æ³•</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).reversed());//å…ˆä»¥å±æ€§ä¸€å‡åº,ç»“æœè¿›è¡Œå±æ€§ä¸€é™åº</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€,Comparator.reverseOrder()));//ä»¥å±æ€§ä¸€é™åº</span><br><span class="line"> </span><br><span class="line">//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€å‡åº å±æ€§äºŒå‡åº</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).thenComparing(ç±»::å±æ€§äºŒ));</span><br><span class="line"> </span><br><span class="line">//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€é™åº å±æ€§äºŒå‡åº æ³¨æ„ä¸¤ç§å†™æ³•</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).reversed().thenComparing(ç±»::å±æ€§äºŒ));//å…ˆä»¥å±æ€§ä¸€å‡åº,å‡åºç»“æœè¿›è¡Œå±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒå‡åº</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€,Comparator.reverseOrder()).thenComparing(ç±»::å±æ€§äºŒ));//å…ˆä»¥å±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒå‡åº</span><br><span class="line"></span><br><span class="line">//å«Nullæ•°æ®æ’åº,nullsLastç©ºçš„æ”¾åé¢ï¼Œè·ç¦»Dateç±»å‹å±æ€§</span><br><span class="line">list.stream().sorted(Comparator.comparing(item -&gt; item.å±æ€§, Comparator.nullsLast(Date::compareTo))).collect(Collectors.toList());</span><br><span class="line">// nullLastæˆ–nullFirsté‡Œé¢å¸¦ç±»å‹ï¼Œå¯ä»¥ç”¨Comparator.nullsLast(Comparator.naturalOrder()))</span><br><span class="line"></span><br><span class="line">//ç©º/Nullæ•°æ®åˆ†ç»„</span><br><span class="line">Map&lt;String, List&lt;ç±»&gt;&gt; map = list.stream().collect(Collectors.groupingBy(item -&gt; &#123;</span><br><span class="line">  if (item.å±æ€§ä¸€ == null || item.å±æ€§ä¸€.equals(&quot;&quot;)) &#123;</span><br><span class="line">  ã€€ã€€return &quot;&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  return DateFormat.getDateInstance().format(item.å±æ€§ä¸€);</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>
<p>listå¯ä»¥ç›´æ¥ä½¿ç”¨sortã€‚<br>ç”¨sortedå°±éœ€è¦å…ˆ.stream()ï¼Œå†.collect(Collectors.toList())<br>::éƒ½å¾—æ˜¯getå±æ€§</p>
<p>è‡ªå®šä¹‰æ’åºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Collections.sort(list, new Comparator&lt;listä¸­å…ƒç´ &gt;()&#123;</span><br><span class="line">  @Override</span><br><span class="line">  public int compare(å…ƒç´  o1, å…ƒç´  o2) &#123;</span><br><span class="line">    if(..)  return 1;  //è¡¨ç¤ºo1åœ¨å‰</span><br><span class="line">    if(..)  return 0;  //è¡¨ç¤ºä¸€æ ·</span><br><span class="line">    return -1ï¼›  //è¡¨ç¤ºo2åœ¨å‰</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="ä¸‰ã€listç§»é™¤ï¼š-removeIf"><a href="#ä¸‰ã€listç§»é™¤ï¼š-removeIf" class="headerlink" title="ä¸‰ã€listç§»é™¤ï¼š removeIf"></a>ä¸‰ã€listç§»é™¤ï¼š removeIf</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">removeIf() æ–¹æ³•ç”¨äºåˆ é™¤æ‰€æœ‰æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ•°ç»„å…ƒç´ ã€‚</span><br><span class="line">ArrayList&lt;String&gt; sites = new ArrayList&lt;&gt;();</span><br><span class="line">sites.add(&quot;Taobao&quot;);</span><br><span class="line">sites.removeIf(e -&gt; e.contains(&quot;Tao&quot;));</span><br><span class="line">ç”¨äº†Stringçš„containsæ–¹æ³•</span><br></pre></td></tr></table></figure>
<p>listå…ƒç´ å¯ä»¥å…ˆè®¾ç½®ï¼Œå†æ›´æ”¹ã€‚</p>
<p>ä¸èƒ½åœ¨å¾ªç¯ä¸­ç”¨æ­£åºç´¢å¼•è¿›è¡Œç§»é™¤ï¼Œå› ä¸ºç§»é™¤çš„è¿‡ç¨‹ä¸­ç´¢å¼•ä¼šå˜ã€‚<br>å¯ä»¥ç”¨å€’åºç´¢å¼•ã€‚<br>å¦‚æœéå¾—ç”¨å¾ªç¯ç§»é™¤ï¼Œç”¨è¿­ä»£å™¨ã€‚</p>
<p>forçš„ä¸‹æ ‡å€’åºéå†:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (int i = list.size() - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">    if (&quot;b&quot;.equals(list.get(i))) &#123;</span><br><span class="line">        list.remove(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨list.stream().filter().collect()ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; newList = list.stream()</span><br><span class="line">        .filter(e -&gt; !&quot;b&quot;.equals(e))</span><br><span class="line">        .collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<p>ç”¨è¿­ä»£å™¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line">while (it.hasNext()) &#123;</span><br><span class="line">    String s = it.next();</span><br><span class="line">    if (&quot;b&quot;.equals(s)) &#123;</span><br><span class="line">        it.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ¤”æ€»ç»“ä¸€ä¸‹listç§»é™¤æ–¹æ³•ï¼š<br>1ã€removeIf<br>2ã€å€’å™forå¾ªç¯<br>3ã€stream filter<br>4ã€è¿­ä»£å™¨</p>
<h4 id="å››ã€åˆ¤æ–­listä¸ºç©º"><a href="#å››ã€åˆ¤æ–­listä¸ºç©º" class="headerlink" title="å››ã€åˆ¤æ–­listä¸ºç©º"></a>å››ã€åˆ¤æ–­listä¸ºç©º</h4><p>if(CollectionUtils.isEmpty(list)){}</p>
<h4 id="äº”ã€indexOfæ–¹æ³•"><a href="#äº”ã€indexOfæ–¹æ³•" class="headerlink" title="äº”ã€indexOfæ–¹æ³•"></a>äº”ã€indexOfæ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">indexOf() æ–¹æ³•è¿”å›åŠ¨æ€æ•°ç»„ä¸­å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</span><br><span class="line">int i = arraylist.indexOf(Object obj)</span><br></pre></td></tr></table></figure>

<h4 id="å…­ã€listã€setã€Stringè½¬æ¢"><a href="#å…­ã€listã€setã€Stringè½¬æ¢" class="headerlink" title="å…­ã€listã€setã€Stringè½¬æ¢"></a>å…­ã€listã€setã€Stringè½¬æ¢</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//listç›´æ¥å˜setï¼š</span><br><span class="line">Set&lt;Long&gt; set2 = new HashSet&lt;&gt;(list);</span><br><span class="line">Set&lt;Long&gt; set1 = Sets.newHashSet(list);</span><br><span class="line">//setå˜listï¼š</span><br><span class="line">List&lt;Long&gt; list2 = new ArrayList&lt;&gt;(set1);</span><br><span class="line">List&lt;Long&gt; list3 = Lists.newArrayList(set1);</span><br></pre></td></tr></table></figure>

<p>,åˆ†å‰²çš„Stringè½¬æ¢ä¸ºListï¼Œçœ‹ä¸‹é¢Splitterã€‚</p>
<p>Listè½¬æ¢ä¸º,åˆ†å‰²å­—ç¬¦ä¸²ï¼Œçœ‹ä¸‹é¢Joinerè¿æ¥å­—ç¬¦ä¸²ã€‚</p>
<h4 id="ä¸ƒã€foreach"><a href="#ä¸ƒã€foreach" class="headerlink" title="ä¸ƒã€foreach"></a>ä¸ƒã€foreach</h4><p>forEach() æ–¹æ³•ç”¨äºéå†åŠ¨æ€æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ å¹¶æ‰§è¡Œç‰¹å®šæ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void testArray()&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; numbers = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        // å¾€æ•°ç»„ä¸­æ·»åŠ å…ƒç´ </span><br><span class="line">        numbers.add(1);</span><br><span class="line">        numbers.add(2);</span><br><span class="line">        numbers.add(3);</span><br><span class="line">        numbers.add(4);</span><br><span class="line">        System.out.println(&quot;ArrayList: &quot; + numbers);</span><br><span class="line"></span><br><span class="line">        // å°† lambda è¡¨è¾¾å¼ä¼ é€’ç»™ forEach</span><br><span class="line">        numbers.forEach((e) -&gt; &#123;</span><br><span class="line">            System.out.print(e + &quot; &quot;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="å…«ã€Listæˆªå–"><a href="#å…«ã€Listæˆªå–" class="headerlink" title="å…«ã€Listæˆªå–"></a>å…«ã€Listæˆªå–</h4><p>Listè‡ªå·±çš„suubListæ–¹æ³•ï¼Œä¼ å‚æ•°èµ·å§‹ç´¢å¼•å’Œç»ˆç‚¹ç´¢å¼•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2() &#123;</span><br><span class="line">    List&lt;Long&gt; list = Lists.newArrayList(1L, 2L, 3L);</span><br><span class="line">    System.out.println(list.subList(1, list.size()));</span><br><span class="line">    // 2,3</span><br><span class="line"></span><br><span class="line">    // æ–°å»ºå›ºå®šå¤§å°çš„List</span><br><span class="line">    List&lt;Long&gt; list1 = Lists.newArrayListWithExpectedSize(3);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ã€æ•°ç»„è½¬æ¢ä¸ºList"><a href="#ä¹ã€æ•°ç»„è½¬æ¢ä¸ºList" class="headerlink" title="ä¹ã€æ•°ç»„è½¬æ¢ä¸ºList"></a>ä¹ã€æ•°ç»„è½¬æ¢ä¸ºList</h4><p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://www.jb51.net/article/221887.htm">https://www.jb51.net/article/221887.htm</a></p>
<p>1ã€ä½¿ç”¨ArrayList.asList(strArray)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String[] str = &#123;&quot;fgx&quot;, &quot;lzy&quot;&#125;;</span><br><span class="line">//æ³¨æ„è¿™ä¸ªListä¸æ˜¯CollectionsåŒ…å†…çš„List,è€Œæ˜¯utilåŒ…é‡Œé¢çš„Listæ¥å£</span><br><span class="line">List&lt;String&gt; ints = Arrays.asList(str);</span><br><span class="line">//è¿™é‡Œä¼šæŠ¥é”™</span><br><span class="line">ints.add(&quot;laopo&quot;);</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨Arrayså·¥å…·ç±»Arrays.asList(strArray)æ–¹å¼,è½¬æ¢å®Œæˆå,åªèƒ½å¯¹Listæ•°ç»„è¿›è¡ŒæŸ¥æ”¹,ä¸èƒ½å¢åˆ ,å¢åˆ å°±ä¼šæŠ›å‡ºUnsupportedOperationException å¼‚å¸¸ã€‚<br>æŠ¥é”™åŸå› :Arrays.asList(str)è¿”å›å€¼æ˜¯java.util.Arraysç±»ä¸­ä¸€ä¸ªç§æœ‰é™æ€å†…éƒ¨ç±» java.utiil.Arrays.Arraylist,å¹¶ä¸æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨çš„java.util.ArrayList();</p>
<p>2ã€ä½¿ç”¨new ArrayList(Arrays.asList(strArray))</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//æ³¨æ„è¿™ä¸ªListä¸æ˜¯CollectionsåŒ…å†…çš„List,è€Œæ˜¯utilåŒ…é‡Œé¢çš„Listæ¥å£</span><br><span class="line">java.util.ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;(Arrays.asList(str));</span><br><span class="line">strings.add(&quot;aop&quot;);</span><br><span class="line">strings.stream().forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ArrayListçš„æ„é€ å™¨,å°†Arrays.asList(strArray)çš„è¿”å›å€¼ç”±java.utilArrays.ArrayListè½¬ä¸ºjava.util.ArrayList.</p>
<p>3ã€é›†åˆå·¥å…·ç±»Collections.addAll()æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] str = &#123;&quot;fgx&quot;, &quot;lzy&quot;&#125;;</span><br><span class="line">java.util.ArrayList&lt;String&gt; stringList = new ArrayList&lt;&gt;(str.length);</span><br><span class="line">Collections.addAll(stringList,str);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡Collections.addAll(arrayList, strArray)æ–¹å¼è½¬æ¢ï¼Œæ ¹æ®æ•°ç»„çš„é•¿åº¦åˆ›å»ºä¸€ä¸ªé•¿åº¦ç›¸åŒçš„Listï¼Œç„¶åé€šè¿‡Collections.addAll()æ–¹æ³•ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ è½¬ä¸ºäºŒè¿›åˆ¶ï¼Œç„¶åæ·»åŠ åˆ°Listä¸­ï¼Œè¿™æ˜¯æœ€é«˜æ•ˆçš„æ–¹æ³•ã€‚</p>
<p>4ã€JDK8çš„Streamæµå°†3æ€»åŸºæœ¬ç±»å‹æ•°ç»„è½¬ä¸ºList</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">long[] longs = &#123;1, 2, 3&#125;;</span><br><span class="line">double[] doubles = &#123;1, 2, 3&#125;;</span><br><span class="line">Arrays.stream(ints).boxed().collect(Collectors.toList());</span><br><span class="line">Arrays.stream(longs).boxed().collect(Collectors.toList());</span><br><span class="line">Arrays.stream(doubles).boxed().collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<p>å¦‚æœJDKç‰ˆæœ¬åœ¨1.8ä»¥ä¸Š,ä½¿ç”¨æµstreamæ¥å°†ä¸‹åˆ—3ç§æ•°ç»„å¿«é€Ÿè½¬ä¸ºList,åˆ†åˆ«æ˜¯int[],long[],double[],ä¸æ”¯æŒshort[ ],byte[ ],char[]åœ¨JDK1.8ä¸­æš‚ä¸æ”¯æŒ.</p>
<p>âš ï¸ ä¸èƒ½æŠŠåŸºæœ¬æ•°æ®ç±»å‹è½¬åŒ–ä¸ºåˆ—è¡¨<br>asListæ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªæ³›å‹çš„å˜é•¿å‚æ•°ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹æ˜¯æ— æ³•æ³›å‹åŒ–çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int [] intarray = &#123; 1 ,  2 ,  3 ,  4 ,  5 &#125;;</span><br><span class="line">//List&lt;Integer&gt; list = Arrays.asList(intarray); ç¼–è¯‘é€šä¸è¿‡</span><br><span class="line">List&lt; int []&gt; list = Arrays.asList(intarray);  //è¾“å‡ºä¸€ä¸ªint[]å…ƒç´ çš„list</span><br></pre></td></tr></table></figure>

<p>è¦æƒ³æŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„è½¬åŒ–ä¸ºå…¶åŒ…è£…ç±»å‹çš„listï¼Œå¯ä»¥ä½¿ç”¨guavaç±»åº“çš„å·¥å…·æ–¹æ³•â€œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int [] intArray = &#123; 1 ,  2 ,  3 ,  4 &#125;;</span><br><span class="line">List&lt;Integer&gt; list = Ints.asList(intArray);</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆint[]ä¸èƒ½ç›´æ¥è½¬ä¸ºList,è€ŒInteger[]å¯ä»¥è½¬ä¸ºList,è€ŒInteger[]å°±å¯ä»¥è½¬ä¸ºListäº†,å› ä¸ºListä¸­çš„æ³›å‹å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ã€‚ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>âš ï¸asListæ–¹æ³•è¿”å›çš„æ˜¯æ•°ç»„çš„ä¸€ä¸ªè§†å›¾</p>
<p>è§†å›¾æ„å‘³ç€ï¼Œå¯¹è¿™ä¸ªlistçš„æ“ä½œéƒ½ä¼šåæ˜ åœ¨åŸæ•°ç»„ä¸Šï¼Œè€Œä¸”è¿™ä¸ªlistæ˜¯å®šé•¿çš„ï¼Œä¸æ”¯æŒaddã€removeç­‰æ”¹å˜é•¿åº¦çš„æ–¹æ³•ã€‚</p>
<h4 id="åã€åˆ†å‰²list"><a href="#åã€åˆ†å‰²list" class="headerlink" title="åã€åˆ†å‰²list"></a>åã€åˆ†å‰²list</h4><p>Listsçš„æ–¹æ³•ï¼Œcom.google.guavaä¸­ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼šlisté›†åˆä¸­æ•°æ®é‡è¿‡å¤§ï¼Œå¯æ ¹æ®éœ€è¦è¿›è¡Œæ‹†åˆ†ï¼Œè¿›è€Œé€šè¿‡å¾ªç¯æˆ–è€…å¤šçº¿ç¨‹æ¥å¤„ç†æ•°æ®ã€‚<br>æˆ–è€…æ˜¯listæ‹†åˆ†åï¼Œåˆ†æ‰¹æ’å…¥æ•°æ®åº“ã€‚<br>Lists.partitionæ–¹æ³•ï¼Œæ ¹æ®ä¼ å…¥çš„sizeï¼Œå¯¹listè¿›è¡Œæ‹†åˆ†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å°†é›†åˆlistæŒ‰ç…§ 2 ä¸ªå…ƒç´ ä¸€ä»½è¿›è¡Œåˆ’åˆ†</span><br><span class="line">List&lt;List&lt;String&gt;&gt; partition = Lists.partition(list, 2);</span><br></pre></td></tr></table></figure>

<h4 id="åä¸€ã€listæ ¹æ®å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡"><a href="#åä¸€ã€listæ ¹æ®å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡" class="headerlink" title="åä¸€ã€listæ ¹æ®å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡"></a>åä¸€ã€listæ ¹æ®å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">package org.example.javaer;</span><br><span class="line"></span><br><span class="line">import lombok.Getter;</span><br><span class="line">import lombok.RequiredArgsConstructor;</span><br><span class="line">import lombok.Setter;</span><br><span class="line">import lombok.ToString;</span><br><span class="line"></span><br><span class="line">import java.util.*;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author: liuxuan</span><br><span class="line"> * @date: 2022-09-11 22:25</span><br><span class="line"> **/</span><br><span class="line">public class TestRemoveDup &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *     TreeSetçš„æœ¬è´¨æ˜¯ä¸€ä¸ª&quot;æœ‰åºçš„ï¼Œå¹¶ä¸”æ²¡æœ‰é‡å¤å…ƒç´ &quot;çš„é›†åˆï¼Œå®ƒæ˜¯é€šè¿‡TreeMapå®ç°çš„ã€‚</span><br><span class="line">     *     TreeSetæ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line">     *     å¦‚æœå‘TreeSeté›†åˆä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå…ƒç´ æœ¬èº«æ²¡æœ‰å…·å¤‡è‡ªç„¶é¡ºåºçš„ç‰¹æ€§ï¼Œå¹¶ä¸”å…ƒç´ æ‰€å±çš„ç±»ä¹Ÿæ²¡æœ‰</span><br><span class="line">     *     å®ç°Comparableæ¥å£ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨åˆ›å»ºTreeSetå¯¹è±¡çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼›</span><br><span class="line">     */</span><br><span class="line">    //æ ¹æ®åå­—è¿›è¡Œæ¯”è¾ƒï¼Œç›¸ç­‰æ—¶TreeSetä¼šå°†è¯¥å…ƒç´ è§†ä¸ºé‡å¤å…ƒç´ ï¼Œä¸å…è®¸æ·»åŠ ï¼›</span><br><span class="line">    private List&lt;Person&gt; removeDupByName(List&lt;Person&gt; people) &#123;</span><br><span class="line">        Set&lt;Person&gt; personSet = new TreeSet&lt;&gt;(Comparator.comparing(Person::getName));</span><br><span class="line">        personSet.addAll(people);</span><br><span class="line">        return new ArrayList&lt;&gt;(personSet);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private List&lt;Person&gt; removeDupByName2(List&lt;Person&gt; people) &#123;</span><br><span class="line">        List&lt;Person&gt; unique = people.stream().collect(</span><br><span class="line">                Collectors.collectingAndThen(</span><br><span class="line">                        Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;(Comparator.comparing(Person::getName))), ArrayList::new)</span><br><span class="line">        );</span><br><span class="line">        return unique;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //filterçš„ä½¿ç”¨æ–¹å¼ä¸ºï¼š filter(item -&gt; itemçš„é€»è¾‘åˆ¤æ–­ ) ï¼Œå…¶ä¸­filterä¼šä¿ç•™åˆ¤æ–­æ¡ä»¶ä¸ºtrueçš„è®°å½•</span><br><span class="line">    private List&lt;Person&gt; removeDupByName3(List&lt;Person&gt; people) &#123;</span><br><span class="line">        //ç”¨ä¸€ä¸ªnameçš„listå»é‡ï¼Œæ²¡ç”¨TreeSet</span><br><span class="line">        List&lt;String&gt; names = new ArrayList&lt;&gt;();//ç”¨æ¥ä¸´æ—¶å­˜å‚¨personçš„id</span><br><span class="line"></span><br><span class="line">        List&lt;Person&gt; personList = people.stream().filter(// è¿‡æ»¤å»é‡</span><br><span class="line">                v -&gt; &#123;</span><br><span class="line">                    boolean flag = !names.contains(v.getName());</span><br><span class="line">                    names.add(v.getName());</span><br><span class="line">                    return flag;</span><br><span class="line">                &#125;</span><br><span class="line">        ).collect(Collectors.toList());</span><br><span class="line">        return personList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Person&gt; people = new ArrayList&lt;&gt;();</span><br><span class="line">        Person p1 = new Person(&quot;Liu&quot;,30);</span><br><span class="line">        people.add(p1);</span><br><span class="line">        Person p2 = new Person(&quot;Mi&quot;,36);</span><br><span class="line">        people.add(p2);</span><br><span class="line">        Person p3 = new Person(&quot;Liu&quot;,31);</span><br><span class="line">        people.add(p3);</span><br><span class="line">        TestRemoveDup testRemoveDup = new TestRemoveDup();</span><br><span class="line"></span><br><span class="line">        List&lt;Person&gt; people1 = testRemoveDup.removeDupByName(people);</span><br><span class="line">        List&lt;Person&gt; people2 = testRemoveDup.removeDupByName2(people);</span><br><span class="line">        List&lt;Person&gt; people3 = testRemoveDup.removeDupByName3(people);</span><br><span class="line">        System.out.println(people1);</span><br><span class="line">        System.out.println(people2);</span><br><span class="line">        System.out.println(people3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Getter</span><br><span class="line">    @Setter</span><br><span class="line">    @ToString</span><br><span class="line">    @RequiredArgsConstructor</span><br><span class="line">    static class Person &#123;</span><br><span class="line">        private final String name;</span><br><span class="line">        private final Integer age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Comparableã€Comparator"><a href="#Comparableã€Comparator" class="headerlink" title="Comparableã€Comparator"></a>Comparableã€Comparator</h3><p>è¦è®²è¿™ä¸ªï¼Œå°±è¦è®²listçš„æ’åºï¼Œçœ‹ä¸Šé¢ï¼Œæœ‰å‡ ç§åŠæ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.list.sort(Comparator.comparing(A::getB))</span><br><span class="line">2.list.stream.sorted(Comparator.comparing(A::getB)).collect(Collectors.toList())</span><br><span class="line">3.list.stream.sorted((a1,a2)-&gt;a1.compareTo(a2))</span><br><span class="line">4.ç›´æ¥Collections.sort(list)  </span><br><span class="line">//è¿™ä¸ªéœ€è¦listçš„å…ƒç´ å®ç°Comparableæ¥å£ï¼Œé‡å†™compareToæ–¹æ³•ï¼Œæ¯”å¦‚Stringå°±å®ç°äº†</span><br><span class="line">5.Collections.sort(list, new Comparator&lt;A&gt;()&#123;</span><br><span class="line">  @Oerride</span><br><span class="line">  public int compare(A a1, A a2)&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä»–ä»¬éƒ½æ˜¯javaçš„æ¥å£, å¹¶ä¸”æ˜¯ç”¨æ¥å¯¹è‡ªå®šä¹‰çš„å®ä½“ç±»æ¯”è¾ƒå¤§å°çš„.</p>
<p>Comparableæ¥å£éœ€è¦è¿›è¡Œæ¯”è¾ƒçš„å®ä½“ç±»åœ¨å®šä¹‰æ—¶å®ç°å®ƒï¼Œé‡å†™compareToæ–¹æ³•ã€‚<br>Comparatoræ¥å£æ˜¯åœ¨é›†åˆå¤–éƒ¨å®ç°çš„æ’åºï¼Œé‡å†™compareæ–¹æ³•ã€‚Comparatoræ¥å£æ¯”Comparableæ¥å£è¦çµæ´»ã€‚</p>
<p>âœ… compareTo()æ–¹æ³•<br>Javaæä¾›äº†ä¸€ä¸ªComparableæ¥å£ï¼Œè¯¥æ¥å£é‡Œå®šä¹‰äº†ä¸€ä¸ªcompareTo(Object obj)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œå®ç°è¯¥æ¥å£çš„ç±»å¿…é¡»å®ç°è¯¥æ–¹æ³•ï¼Œå®ç°äº†è¯¥æ¥å£çš„ç±»çš„å¯¹è±¡å°±å¯ä»¥æ¯”è¾ƒå¤§å°ã€‚å½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä¸å¦ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œä¾‹å¦‚obj1.compareTo(obj2)ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å›0ï¼Œåˆ™è¡¨ç¤ºä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ­£æ•´æ•°ï¼Œåˆ™è¡¨æ˜obj1å¤§äºobj2ï¼›å¦‚æœè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨æ˜obj1å°äºobj2ã€‚</p>
<p>ä¸€äº›å·²ç»å®ç°äº†Comparableæ¥å£çš„å¸¸ç”¨ç±»ï¼š<br>Characterï¼šæŒ‰ç…§å­—ç¬¦çš„UNICODEå€¼è¿›è¡Œæ¯”è¾ƒ<br>Stringï¼šæŒ‰ç…§å­—ç¬¦çš„UNICODEå€¼è¿›è¡Œæ¯”è¾ƒ<br>Date\Timeï¼šå¤–é¢æ¯”é‡Œé¢æ–°ï¼Œè¿”å›1<br>Longï¼ša.compareTo(b)ï¼Œaæ¯”bå¤§è¿”å›1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ä»¥ç‰¹å®šæ ¼å¼è¿”å›æ—¥æœŸæ ¼å¼åŒ–ç¨‹åº</span><br><span class="line">DateFormat dateFormat = DateFormat.getDateInstance();</span><br><span class="line">Date oldTime = dateFormat.parse(&quot;2019-04-07 19:50:11&quot;);</span><br><span class="line">Date newTime = new Date();</span><br><span class="line">int result = oldTime.compareTo(newTime);</span><br><span class="line">System.out.println(result);</span><br><span class="line"></span><br><span class="line">// æ—¥æœŸå˜ä¸ºå­—ç¬¦ä¸²</span><br><span class="line">String str = dateFormat.format(new Date());</span><br></pre></td></tr></table></figure>

<h3 id="streamæµ-parallelStreamæµ"><a href="#streamæµ-parallelStreamæµ" class="headerlink" title="streamæµ parallelStreamæµ"></a>streamæµ parallelStreamæµ</h3><p>stream(): æ˜¯ä¸²è¡Œæ‰§è¡Œï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œ</p>
<p>parallelStream()ï¼šæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œå¼‚æ­¥æ‰§è¡Œï¼Œå¤šçº¿ç¨‹ï¼Œå¹¶ä¸”ä½¿ç”¨çš„çº¿ç¨‹æ± æ˜¯ForkJoinPool.commonï¼Œå¯èƒ½å­˜åœ¨å…±äº«èµ„æºã€çº¿ç¨‹å®‰å…¨ç­‰é—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">è¿‡æ»¤ï¼š</span><br><span class="line">List&lt;Integer&gt; integerList = Arrays.asList(1, 2, 3, 4, 5, 6);</span><br><span class="line">Stream&lt;Integer&gt; stream = integerList.stream().filter(i -&gt; i &gt; 3);   //filteré‡Œé¢çš„æ¡ä»¶æ˜¯ç•™ä¸‹æ¥çš„æ¡ä»¶</span><br><span class="line">integerList = stream.collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">æ’åºï¼š</span><br><span class="line">.stream().sorted((e1,e2)-&gt;e1.compareTo(e2)).</span><br><span class="line"></span><br><span class="line">å»é‡ï¼š</span><br><span class="line">.stream().distinct().</span><br><span class="line"></span><br><span class="line">æŒ‰ç…§å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡ï¼š[tolook]</span><br><span class="line">.stream().filter(...)</span><br><span class="line"></span><br><span class="line">è¿”å›æŒ‡å®šæµä¸ªæ•°ï¼š</span><br><span class="line">.limit(5)</span><br><span class="line"></span><br><span class="line">è·³è¿‡æµä¸­å…ƒç´ ï¼š</span><br><span class="line">.skip(2)</span><br><span class="line"></span><br><span class="line">mapæµæ˜ å°„ï¼šå°†æ¥æ”¶çš„å…ƒç´ æ˜ å°„æˆå¦å¤–ä¸€ä¸ªå…ƒç´ ï¼š</span><br><span class="line">.map(ç±»::getå±æ€§).collect...</span><br><span class="line">.map(å¯¹è±¡-&gt;&#123;</span><br><span class="line">  æ„é€ å¦ä¸€ç§å¯¹è±¡;</span><br><span class="line">  return å¦ä¸€å¯¹è±¡;</span><br><span class="line">&#125;).</span><br><span class="line">.map(string-&gt;Long.valueOf(string)).  //Stringå˜ä¸ºLong</span><br><span class="line"></span><br><span class="line">å¯¹è±¡listæ ¹æ®æŸä¸€ä¸ªå…ƒç´ å˜ä¸ºmapï¼š(å˜æˆ å…ƒç´ -å¯¹è±¡listçš„map)</span><br><span class="line">list.stream().collect(Collectors.groupingBy(ç±»::getå±æ€§))</span><br><span class="line"></span><br><span class="line">//æµçš„è¿‡ç¨‹ä¸­å¯¹å…ƒç´ è¿›è¡Œæ“ä½œ</span><br><span class="line">List&lt;Long&gt; list = Lists.newArrayList();</span><br><span class="line">list2.stream().forEach(s -&gt; list.add(Long.valueOf(s)));</span><br><span class="line"></span><br><span class="line">anyMatchåˆ¤æ–­</span><br><span class="line">æƒ³æ¯”è¾ƒlist1ä¸­æ˜¯å¦å­˜åœ¨list2ä¸­çš„ä»»ä½•å¯¹è±¡</span><br><span class="line">å¯ä»¥éå†ä¸¤ä¸ªåˆ—è¡¨å¹¶ä½¿ç”¨.contains()æ¯”è¾ƒæ‰€æœ‰å…ƒç´ </span><br><span class="line">ä½†æ˜¯æ›´é«˜æ•ˆçš„æ–¹æ³•æ˜¯anyMatchï¼š</span><br><span class="line">List&lt;Item&gt; list1;</span><br><span class="line">List&lt;Item&gt; list2;</span><br><span class="line">boolean anyMatch = list1.stream().anyMatch(x -&gt; x.equals(list2.stream()));</span><br><span class="line">System.out.println(anyMatch);</span><br><span class="line">å¾ˆå®¹æ˜“ç†è§£ï¼Œå³æ˜¯æœ‰ä¸€ä¸ªæˆ–ä¸€ä¸ªä»¥ä¸Šçš„å…ƒç´ æ»¡è¶³å‡½æ•°å‚æ•°è®¡ç®—ç»“æœä¸ºtrueé‚£æ•´ä¸ªæ–¹æ³•è¿”å›å€¼ä¸ºtrueã€‚</span><br></pre></td></tr></table></figure>

<h3 id="Dateç›¸å…³"><a href="#Dateç›¸å…³" class="headerlink" title="Dateç›¸å…³"></a>Dateç›¸å…³</h3><h4 id="âœ…now-after"><a href="#âœ…now-after" class="headerlink" title="âœ…now.after()"></a>âœ…now.after()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DateFormat dateformat = DateFormat.getDateInstance();</span><br><span class="line">Date old = dateformat.parse(&quot;2022-04-07 19:50:11&quot;);</span><br><span class="line">Date now = new Date();</span><br><span class="line">if(now.after(oldTime))&#123;</span><br><span class="line">    System.out.println(&quot;nowæ¯”afteræ–°&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…DateFormatç±»"><a href="#âœ…DateFormatç±»" class="headerlink" title="âœ…DateFormatç±»"></a>âœ…DateFormatç±»</h4><p>DateFormat æ˜¯æ—¥æœŸ/æ—¶é—´æ ¼å¼åŒ–å­ç±»çš„æŠ½è±¡ç±»ï¼Œå®ƒä»¥ä¸è¯­è¨€æ— å…³çš„æ–¹å¼æ ¼å¼åŒ–å¹¶è§£ææ—¥æœŸæˆ–æ—¶é—´ã€‚æ—¥æœŸ/æ—¶é—´æ ¼å¼åŒ–å­ç±»ï¼ˆå¦‚ SimpleDateFormatï¼‰å…è®¸è¿›è¡Œæ ¼å¼åŒ–ï¼ˆä¹Ÿå°±æ˜¯æ—¥æœŸâ†’æ–‡æœ¬ï¼‰ã€è§£æï¼ˆæ–‡æœ¬â†’æ—¥æœŸï¼‰å’Œæ ‡å‡†åŒ–æ—¥æœŸã€‚</p>
<p>åœ¨åˆ›å»º DateFormat å¯¹è±¡æ—¶ä¸èƒ½ä½¿ç”¨ new å…³é”®å­—ï¼Œè€Œåº”è¯¥ä½¿ç”¨ DateFormat ç±»ä¸­çš„é™æ€æ–¹æ³• getDateInstance()ï¼š<br><code>DateFormat df = DateFormat.getDatelnstance();</code><br>åœ¨åˆ›å»ºäº†ä¸€ä¸ª DateFormat å¯¹è±¡åï¼Œå¯ä»¥è°ƒç”¨è¯¥å¯¹è±¡ä¸­çš„æ–¹æ³•æ¥å¯¹æ—¥æœŸ/æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰å¯¹è±¡ï¼Œæ—¥æœŸã€æ—¶é—´ï¼Œä¹Ÿæœ‰getDateTimeInstance</span><br><span class="line">SHORTï¼š18-10-15 ä¸Šåˆ9:30</span><br><span class="line">FULLï¼š2018å¹´10æœˆ15æ—¥ æ˜ŸæœŸä¸€ ä¸Šåˆ09æ—¶30åˆ†43ç§’ CST</span><br><span class="line">MEDIUMï¼š2018-10-15 9:30:43</span><br><span class="line">LONGï¼š2018å¹´10æœˆ15æ—¥ ä¸Šåˆ09æ—¶30åˆ†43ç§’</span><br><span class="line"></span><br><span class="line">DateFormat df1 = DateFormat.getDateInstance(DateFormat.SHORT, Locale.CHINA);</span><br><span class="line">DateFormat df5 = DateFormat.getTimeInstance(DateFormat.SHORT, Locale.CHINA);</span><br><span class="line"></span><br><span class="line">//å­—ç¬¦ä¸²åˆ°Date</span><br><span class="line">Date old = dateformat.parse(&quot;2022-04-07 19:50:11&quot;);</span><br><span class="line"></span><br><span class="line">//Dateåˆ°å­—ç¬¦ä¸²</span><br><span class="line">String str = dateFormat.format(new Date());</span><br><span class="line"></span><br><span class="line">Date newTime = new Date();</span><br><span class="line">int result = oldTime.compareTo(newTime);</span><br><span class="line">System.out.println(result);</span><br><span class="line"></span><br><span class="line">DateFormat dateformat = DateFormat.getDateInstance();</span><br><span class="line">Date old = dateformat.parse(&quot;2022-04-07 19:50:11&quot;);</span><br><span class="line">Date now = new Date();</span><br><span class="line">if(now.after(old))&#123;</span><br><span class="line">    System.out.println(&quot;nowæ¯”oldæ–°&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…SimpleDateFormat"><a href="#âœ…SimpleDateFormat" class="headerlink" title="âœ…SimpleDateFormat"></a>âœ…SimpleDateFormat</h4><p>SimpleDateFormat ä½¿å¾—å¯ä»¥é€‰æ‹©ä»»ä½•ç”¨æˆ·å®šä¹‰çš„æ—¥æœŸ/æ—¶é—´æ ¼å¼çš„æ¨¡å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Date now = new Date(); // åˆ›å»ºä¸€ä¸ªDateå¯¹è±¡ï¼Œè·å–å½“å‰æ—¶é—´</span><br><span class="line">// æŒ‡å®šæ ¼å¼åŒ–æ ¼å¼</span><br><span class="line">SimpleDateFormat f = new SimpleDateFormat(&quot;ä»Šå¤©æ˜¯ &quot; + &quot;yyyy å¹´ MM æœˆ dd æ—¥ E HH ç‚¹ mm åˆ† ss ç§’&quot;);</span><br><span class="line">System.out.println(f.format(now)); // å°†å½“å‰æ—¶é—´è¢¼å¼åŒ–ä¸ºæŒ‡å®šçš„æ ¼å¼</span><br><span class="line">// formatæ–¹æ³•è¾“å‡ºçš„æ˜¯stringç±»å‹</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://c.biancheng.net/view/878.html">http://c.biancheng.net/view/878.html</a></p>
<h4 id="âœ…FastDataFormat"><a href="#âœ…FastDataFormat" class="headerlink" title="âœ…FastDataFormat"></a>âœ…FastDataFormat</h4><p>Apache commons-langä¸­çš„FastDateFormatã€‚ä¹Ÿå¯ä»¥åšæ—¶é—´çš„æ ¼å¼åŒ–ã€‚<br>FastDateFormatæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸å¿…è€ƒè™‘å¤šçº¿ç¨‹çš„æƒ…å†µ<br>JDKé‡Œè‡ªå¸¦çš„SimpleDateFormatå­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ã€‚<br>SimpleDateFormatåœ¨å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–çš„æ–¹æ³•formatä¸­ï¼Œä¼šå…ˆå¯¹calendarå¯¹è±¡è¿›è¡ŒsetTimeçš„èµ‹å€¼ï¼Œè‹¥æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªSimpleDateFormatå®ä¾‹çš„è¯ï¼Œå°±ä¼šå¯¹calendarçš„èµ‹å€¼è¿›è¡Œè¦†ç›–ï¼Œè¿›è€Œäº§ç”Ÿé—®é¢˜ã€‚</p>
<p>FastDateFormatç”¨æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FastDateFormat f = FastDateFormat.getInstance(&quot;yyyy-MM-dd HH:mm:ss&quot;);  </span><br><span class="line">String s = f.format(new Date());</span><br><span class="line">System.out.println(s);</span><br></pre></td></tr></table></figure>


<h4 id="âœ…å½“å‰æ—¶é—´çš„åå‡ ç§’ï¼š"><a href="#âœ…å½“å‰æ—¶é—´çš„åå‡ ç§’ï¼š" class="headerlink" title="âœ…å½“å‰æ—¶é—´çš„åå‡ ç§’ï¼š"></a>âœ…å½“å‰æ—¶é—´çš„åå‡ ç§’ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å½“å‰æ—¶é—´çš„åå‡ ç§’</span><br><span class="line">Date data = new Date(System.currentTimeMillis() + 10 * 1000);</span><br><span class="line">System.out.println(data);</span><br><span class="line">åŠ çš„æ˜¯æ¯«ç§’</span><br></pre></td></tr></table></figure>

<p>è·å–å½“å‰æ—¶é—´çš„æœˆä»½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int mon = LocalDate.now().getMonthValue();</span><br></pre></td></tr></table></figure>

<h4 id="âœ…LocalDateã€LocalTimeã€LocalDateTimeã€java8æ–°æä¾›çš„ç±»ã€‘"><a href="#âœ…LocalDateã€LocalTimeã€LocalDateTimeã€java8æ–°æä¾›çš„ç±»ã€‘" class="headerlink" title="âœ…LocalDateã€LocalTimeã€LocalDateTimeã€java8æ–°æä¾›çš„ç±»ã€‘"></a>âœ…LocalDateã€LocalTimeã€LocalDateTimeã€java8æ–°æä¾›çš„ç±»ã€‘</h4><p>ä¸ºä»€ä¹ˆéœ€è¦LocalDateã€LocalTimeã€LocalDateTime</p>
<p>1.Dateå¦‚æœä¸æ ¼å¼åŒ–ï¼Œæ‰“å°å‡ºçš„æ—¥æœŸå¯è¯»æ€§å·®<br>Tue Sep 10 09:34:04 CST 2019<br>Dateå¯¹æ—¶é—´å¤„ç†æ¯”è¾ƒéº»çƒ¦ã€‚<br>getYearã€getMonthè¿™äº›æ–¹æ³•å—ï¼Œè·å–å¹´æœˆæ—¥å¾ˆEasyï¼Œä½†éƒ½è¢«å¼ƒç”¨äº†ã€‚</p>
<p>2.ä½¿ç”¨SimpleDateFormatå¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–ï¼Œä½†SimpleDateFormatæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚SimpleDateFormatçš„formatæ–¹æ³•ä¸­çš„calendaræ˜¯å…±äº«å˜é‡ï¼Œå¹¶ä¸”è¿™ä¸ªå…±äº«å˜é‡æ²¡æœ‰åšçº¿ç¨‹å®‰å…¨æ§åˆ¶ã€‚å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨ç›¸åŒçš„SimpleDateFormatå¯¹è±¡ã€å¦‚ç”¨staticä¿®é¥°çš„SimpleDateFormatã€‘è°ƒç”¨formatæ–¹æ³•æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹ä¼šåŒæ—¶è°ƒç”¨calendar.setTimeæ–¹æ³•ï¼Œå¯èƒ½ä¸€ä¸ªçº¿ç¨‹åˆšè®¾ç½®å¥½timeå€¼ã€‚å¦å¤–çš„ä¸€ä¸ªçº¿ç¨‹é©¬ä¸ŠæŠŠè®¾ç½®çš„timeå€¼ç»™ä¿®æ”¹äº†å¯¼è‡´è¿”å›çš„æ ¼å¼åŒ–æ—¶é—´å¯èƒ½æ˜¯é”™è¯¯çš„ã€‚åœ¨å¤šå¹¶å‘æƒ…å†µä¸‹ä½¿ç”¨SimpleDateFormatéœ€æ ¼å¤–æ³¨æ„ SimpleDateFormaté™¤äº†formatæ˜¯çº¿ç¨‹ä¸å®‰å…¨ä»¥å¤–ï¼Œparseæ–¹æ³•ä¹Ÿæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p>
<p>å¤šçº¿ç¨‹å¹¶å‘å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ - é¿å…çº¿ç¨‹ä¹‹é—´å…±äº«ä¸€ä¸ªSimpleDateFormatå¯¹è±¡ï¼Œæ¯ä¸ªçº¿ç¨‹ä½¿ç”¨æ—¶éƒ½åˆ›å»ºä¸€æ¬¡SimpleDateFormatå¯¹è±¡ =&gt; åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„å¼€é”€å¤§ - å¯¹ä½¿ç”¨formatå’Œparseæ–¹æ³•çš„åœ°æ–¹è¿›è¡ŒåŠ é” =&gt; çº¿ç¨‹é˜»å¡æ€§èƒ½å·® - ä½¿ç”¨ThreadLocalä¿è¯æ¯ä¸ªçº¿ç¨‹æœ€å¤šåªåˆ›å»ºä¸€æ¬¡SimpleDateFormatå¯¹è±¡ =&gt; è¾ƒå¥½çš„æ–¹æ³•ã€‚</p>
<p>LocalDateç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">åªä¼šè·å–å¹´æœˆæ—¥</span><br><span class="line">//è·å–å½“å‰å¹´æœˆæ—¥</span><br><span class="line">LocalDate localDate = LocalDate.now();</span><br><span class="line">//æ„é€ æŒ‡å®šçš„å¹´æœˆæ—¥</span><br><span class="line">LocalDate localDate1 = LocalDate.of(2019, 9, 10);</span><br><span class="line">è·å–å¹´ã€æœˆã€æ—¥ã€æ˜ŸæœŸå‡ </span><br><span class="line">int year = localDate.getYear();  //2022</span><br><span class="line">int year1 = localDate.get(ChronoField.YEAR); //2022</span><br><span class="line">Month month = localDate.getMonth();  //JUNE</span><br><span class="line">int month1 = localDate.get(ChronoField.MONTH_OF_YEAR);  //6</span><br><span class="line">int day = localDate.getDayOfMonth();  //26</span><br><span class="line">int day1 = localDate.get(ChronoField.DAY_OF_MONTH);  //26</span><br><span class="line">DayOfWeek dayOfWeek = localDate.getDayOfWeek(); //SUNDAY</span><br><span class="line">int dayOfWeek1 = localDate.get(ChronoField.DAY_OF_WEEK); //7</span><br></pre></td></tr></table></figure>

<p>LocalTimeç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">åªä¼šè·å–å‡ ç‚¹å‡ åˆ†å‡ ç§’</span><br><span class="line">åˆ›å»ºLocalTime</span><br><span class="line">LocalTime localTime = LocalTime.of(13, 51, 10);</span><br><span class="line">LocalTime localTime1 = LocalTime.now();</span><br><span class="line">è·å–æ—¶åˆ†ç§’</span><br><span class="line">//è·å–å°æ—¶</span><br><span class="line">int hour = localTime.getHour();</span><br><span class="line">int hour1 = localTime.get(ChronoField.HOUR_OF_DAY);</span><br><span class="line">//è·å–åˆ†</span><br><span class="line">int minute = localTime.getMinute();</span><br><span class="line">int minute1 = localTime.get(ChronoField.MINUTE_OF_HOUR);</span><br><span class="line">//è·å–ç§’</span><br><span class="line">int second = localTime.getSecond();</span><br><span class="line">int second1 = localTime.get(ChronoField.SECOND_OF_MINUTE);</span><br></pre></td></tr></table></figure>

<p>LocalDateTime:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">è·å–å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œç­‰äºLocalDate+LocalTime</span><br><span class="line">åˆ›å»ºLocalDateTime</span><br><span class="line">LocalDateTime localDateTime = LocalDateTime.now();</span><br><span class="line">LocalDateTime localDateTime1 = LocalDateTime.of(2019, Month.SEPTEMBER, 10, 14, 46, 56);</span><br><span class="line">LocalDateTime localDateTime1 = LocalDateTime.of(2019, 6, 26, 10, 14, 46, 56);</span><br><span class="line">LocalDateTime localDateTime2 = LocalDateTime.of(localDate, localTime);</span><br><span class="line">LocalDateTime localDateTime3 = localDate.atTime(localTime);</span><br><span class="line">LocalDateTime localDateTime4 = localTime.atDate(localDate);</span><br><span class="line">è·å–LocalDate</span><br><span class="line">LocalDate localDate2 = localDateTime.toLocalDate();</span><br><span class="line">è·å–LocalTime</span><br><span class="line">LocalTime localTime2 = localDateTime.toLocalTime();</span><br></pre></td></tr></table></figure>

<p>Instant: å¯ä»¥ç²¾ç¡®åˆ°çº³ç§’çš„æ—¶é—´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">è·å–ç§’æ•°</span><br><span class="line">åˆ›å»ºInstantå¯¹è±¡</span><br><span class="line">Instant instant = Instant.now();  //æå‰åŒ—äº¬æ—¶é—´8å°æ—¶</span><br><span class="line"></span><br><span class="line">//æ ¹æ®æ—¶æœŸæ·»åŠ åç§»é‡</span><br><span class="line">OffsetDateTime offsetDateTime1 = instance.atOffset(ZoneOffset.ofHours(8));</span><br><span class="line">System.out.println(&quot;å¤„ç†åæ—¶é—´ä¸ºï¼š&quot;+offsetDateTime1);</span><br><span class="line"></span><br><span class="line">è·å–ç§’æ•°</span><br><span class="line">long currentSecond = instant.getEpochSecond();</span><br><span class="line">è·å–æ¯«ç§’æ•°</span><br><span class="line">long currentMilli = instant.toEpochMilli();</span><br><span class="line">å¦‚æœåªæ˜¯ä¸ºäº†è·å–ç§’æ•°æˆ–è€…æ¯«ç§’æ•°ï¼Œä½¿ç”¨System.currentTimeMillis()æ¥å¾—æ›´ä¸ºæ–¹ä¾¿</span><br></pre></td></tr></table></figure>

<p>æ—¶é—´å˜åŒ–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">LocalDateã€LocalTimeã€LocalDateTimeã€Instantä¸ºä¸å¯å˜å¯¹è±¡ï¼Œä¿®æ”¹è¿™äº›å¯¹è±¡å¯¹è±¡ä¼šè¿”å›ä¸€ä¸ªå‰¯æœ¬</span><br><span class="line">å¢åŠ ã€å‡å°‘å¹´æ•°ã€æœˆæ•°ã€å¤©æ•°ç­‰ ä»¥LocalDateTimeä¸ºä¾‹</span><br><span class="line">LocalDateTime localDateTime = LocalDateTime.of(2019, Month.SEPTEMBER, 10,</span><br><span class="line">14, 46, 56);</span><br><span class="line">//å¢åŠ ä¸€å¹´</span><br><span class="line">localDateTime = localDateTime.plusYears(1);</span><br><span class="line">localDateTime = localDateTime.plus(1, ChronoUnit.YEARS);</span><br><span class="line">//å‡å°‘ä¸€ä¸ªæœˆ</span><br><span class="line">localDateTime = localDateTime.minusMonths(1);</span><br><span class="line">localDateTime = localDateTime.minus(1, ChronoUnit.MONTHS);</span><br><span class="line">é€šè¿‡withä¿®æ”¹æŸäº›å€¼</span><br><span class="line">//ä¿®æ”¹å¹´ä¸º2019</span><br><span class="line">localDateTime = localDateTime.withYear(2020);</span><br><span class="line">//ä¿®æ”¹ä¸º2022</span><br><span class="line">localDateTime = localDateTime.with(ChronoField.YEAR, 2022);</span><br><span class="line">è¿˜å¯ä»¥ä¿®æ”¹æœˆã€æ—¥</span><br></pre></td></tr></table></figure>

<p>æ—¶é—´è®¡ç®—:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚æœ‰äº›æ—¶å€™æƒ³çŸ¥é“è¿™ä¸ªæœˆçš„æœ€åä¸€å¤©æ˜¯å‡ å·ã€ä¸‹ä¸ªå‘¨æœ«æ˜¯å‡ å·ï¼Œé€šè¿‡æä¾›çš„æ—¶é—´å’Œæ—¥æœŸAPIå¯ä»¥å¾ˆå¿«å¾—åˆ°ç­”æ¡ˆ</span><br><span class="line">LocalDate localDate = LocalDate.now();</span><br><span class="line">//å¾—åˆ°ä»Šå¹´ç¬¬ä¸€å¤©</span><br><span class="line">LocalDate localDate1 = localDate.with(firstDayOfYear());</span><br><span class="line">æ¯”å¦‚é€šè¿‡firstDayOfYear()è¿”å›äº†å½“å‰æ—¥æœŸçš„ç¬¬ä¸€å¤©æ—¥æœŸï¼Œè¿˜æœ‰å¾ˆå¤šæ–¹æ³•è¿™é‡Œä¸åœ¨ä¸¾ä¾‹è¯´æ˜</span><br></pre></td></tr></table></figure>

<p>æ ¼å¼åŒ–æ—¶é—´:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">LocalDate localDate = LocalDate.of(2019, 9, 10);</span><br><span class="line">String s1 = localDate.format(DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">String s2 = localDate.format(DateTimeFormatter.ISO_LOCAL_DATE);</span><br><span class="line">//è‡ªå®šä¹‰æ ¼å¼åŒ–</span><br><span class="line">DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;);</span><br><span class="line">String s3 = localDate.format(dateTimeFormatter);</span><br><span class="line">DateTimeFormatteré»˜è®¤æä¾›äº†å¤šç§æ ¼å¼åŒ–æ–¹å¼ï¼Œå¦‚æœé»˜è®¤æä¾›çš„ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œå¯ä»¥é€šè¿‡DateTimeFormatterçš„ofPatternæ–¹æ³•åˆ›å»ºè‡ªå®šä¹‰æ ¼å¼åŒ–æ–¹å¼</span><br></pre></td></tr></table></figure>

<p>è§£ææ—¶é—´ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LocalDate localDate1 = LocalDate.parse(&quot;20190910&quot;, DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">LocalDate localDate2 = LocalDate.parse(&quot;2019-09-10&quot;, DateTimeFormatter.ISO_LOCAL_DATE);</span><br><span class="line">å’ŒSimpleDateFormatç›¸æ¯”ï¼ŒDateTimeFormatteræ˜¯çº¿ç¨‹å®‰å…¨çš„</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1685414035437236647&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1685414035437236647&amp;wfr=spider&amp;for=pc</a></p>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class DateUtilsTest &#123;</span><br><span class="line">    public static final String DATE_PATTERN = &quot;yyyy-MM-dd HH:mm:ss&quot;;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test1() &#123;</span><br><span class="line">        // è·å–æŒ‡å®šæ ¼å¼æ—¶é—´å­—ç¬¦ä¸²</span><br><span class="line">        String date = LocalDateTime.now().format(DateTimeFormatter.ofPattern(DATE_PATTERN));</span><br><span class="line">        System.out.println(date);</span><br><span class="line">        // è·å–å½“å‰æœˆä»½</span><br><span class="line">        Integer month = LocalDateTime.now().getMonth().getValue();</span><br><span class="line">        System.out.println(month);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test2() &#123;</span><br><span class="line">        // æ—¶é—´æˆ³</span><br><span class="line">        long timeStamp = System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;æ—¶é—´æˆ³ï¼š&quot; + timeStamp);</span><br><span class="line">        // æ—¶é—´æˆ³å­—ç¬¦ä¸²åˆ°æ—¶é—´æˆ³åˆ°LocalDateTime</span><br><span class="line">        LocalDateTime time = new Timestamp(timeStamp).toLocalDateTime();</span><br><span class="line">        System.out.println(&quot;LocatDateTimeï¼š&quot; + time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…Calendarã€Dateã€LocalDate-LocalTimeå…³ç³»"><a href="#âœ…Calendarã€Dateã€LocalDate-LocalTimeå…³ç³»" class="headerlink" title="âœ…Calendarã€Dateã€LocalDate/LocalTimeå…³ç³»"></a>âœ…Calendarã€Dateã€LocalDate/LocalTimeå…³ç³»</h4><p>1ã€Date ç±»å¦‚ä»Šå¾ˆå¤šæ–¹æ³•å·²ç»æ²¡æœ‰ä»€ä¹ˆç”¨å¤„äº†ï¼Œå¦‚ä»Šæ—¶é—´çš„å¤„ç†å¹¶ä¸ç›´æ¥åœ¨Date ç±»ä¸­è¿›è¡Œï¼Œè€Œæ˜¯é€šè¿‡Calendarï¼Œæˆ–è€…LocalDate æ¥è¿›è¡Œï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œæ›´å¤šçš„æ˜¯è¦æ¥åšä¸€ä¸ªè®°å½•æ—¥æœŸçš„å®ä¾‹ã€‚</p>
<p>2ã€Dateç”¨äºè®°å½•æŸä¸€ä¸ªå«æ—¥æœŸçš„ã€ç²¾ç¡®åˆ°æ¯«ç§’çš„æ—¶é—´ã€‚é‡ç‚¹åœ¨ä»£è¡¨ä¸€åˆ¹é‚£çš„æ—¶é—´æœ¬èº«ã€‚Calendarç”¨äºå°†æŸä¸€æ—¥æœŸæ”¾åˆ°å†æ³•ä¸­çš„äº’åŠ¨â€”â€”æ—¶é—´å’Œå¹´ã€æœˆã€æ—¥ã€æ˜ŸæœŸã€ä¸Šåˆã€ä¸‹åˆã€å¤ä»¤æ—¶ç­‰è¿™äº›å†æ³•è§„å®šäº’ç›¸ä½œç”¨å…³ç³»å’Œäº’åŠ¨ã€‚Calendaræœ¬èº«ä»£è¡¨å…¬å†çš„ä¸€ä¸ªç®€åŒ–ç¼©æ°´ç‰ˆï¼Œå§‘ä¸”å«â€œè®¡ç®—æœºå†â€ã€‚</p>
<p>3ã€Java 8æ–°å¢äº†LocalDateå’ŒLocalTimeæ¥å£ï¼Œä¸ºä»€ä¹ˆè¦æä¸€å¥—å…¨æ–°çš„å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„APIï¼Ÿå› ä¸ºæ—§çš„java.util.Dateå®åœ¨æ˜¯å¤ªéš¾ç”¨äº†ã€‚<br>java.util.Dateæœˆä»½ä»0å¼€å§‹ï¼Œä¸€æœˆæ˜¯0ï¼ŒåäºŒæœˆæ˜¯11ï¼Œå˜æ€å§ï¼java.time.LocalDateæœˆä»½å’Œæ˜ŸæœŸéƒ½æ”¹æˆäº†enumï¼Œå°±ä¸å¯èƒ½å†ç”¨é”™äº†ã€‚<br>java.util.Dateå’ŒSimpleDateFormatteréƒ½ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€ŒLocalDateå’ŒLocalTimeå’Œæœ€åŸºæœ¬çš„Stringä¸€æ ·ï¼Œæ˜¯ä¸å˜ç±»å‹ï¼Œä¸ä½†çº¿ç¨‹å®‰å…¨ï¼Œè€Œä¸”ä¸èƒ½ä¿®æ”¹ã€‚</p>
<p>æ¥è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/jaycekon/p/6179700.html">https://www.cnblogs.com/jaycekon/p/6179700.html</a></p>
<h4 id="âœ…Calender"><a href="#âœ…Calender" class="headerlink" title="âœ…Calender"></a>âœ…Calender</h4><p>Calendar æ˜¯ä¸€ä¸ªæŠ½è±¡ç±», æ— æ³•é€šè¿‡ç›´æ¥å®ä¾‹åŒ–å¾—åˆ°å¯¹è±¡. å› æ­¤, Calendar æä¾›äº†ä¸€ä¸ªæ–¹æ³• getInstanceï¼ˆå·¥å‚æ–¹æ³•ï¼‰,æ¥è·å¾—ä¸€ä¸ªCalendarçš„å­ç±»å¯¹è±¡, å¾—åˆ°çš„ Calendar ç”±å½“å‰æ—¶é—´åˆå§‹åŒ–.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class CalenderTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Calendar cal = Calendar.getInstance();</span><br><span class="line">        cal.set (2013, 5, 4, 13, 44, 51);//å¹´æœˆæ—¥æ—¶åˆ†ç§’ (æœˆä»½0ä»£è¡¨1æœˆ)</span><br><span class="line">        cal.set (Calendar.YEAR, 2014); //å¹´</span><br><span class="line">        cal.set (Calendar.MONTH, 7); //æœˆ (æœˆä»½0ä»£è¡¨1æœˆ)</span><br><span class="line">        cal.set (Calendar.DATE, 11); //æ—¥</span><br><span class="line">        cal.set (Calendar.HOUR_OF_DAY, 15); //æ—¶</span><br><span class="line">        cal.set (Calendar.MINUTE, 33); //åˆ†</span><br><span class="line">        cal.set (Calendar.SECOND, 32); //ç§’</span><br><span class="line"></span><br><span class="line">        //åŒæ—¶è¿˜æœ‰getã€addæ–¹æ³•ï¼Œä½¿ç”¨ç±»ä¼¼</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Calendaræ˜¯çˆ¶ç±»ï¼ŒGregorianCalendaræ˜¯å­ç±»ã€‚<br>GregorianCalendarï¼ˆå…¬å†ï¼‰æ˜¯Calendarçš„ä¸€ä¸ªå…·ä½“å­ç±»ï¼Œæä¾›äº†ä¸–ç•Œä¸Šå¤§å¤šæ•°å›½å®¶/åœ°åŒºä½¿ç”¨çš„æ ‡å‡†æ—¥å†ç³»ç»Ÿã€‚å¯ä»¥ä½¿ç”¨newå…³é”®å­—åˆ›å»ºå®ä¾‹ã€‚</p>
<p>ä¾‹å­ï¼šè¿”å›å½“å‰æ—¶é—´åŠ 10åˆ†é’Ÿåçš„æ—¥æœŸæ—¶é—´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Calendar calendar = new GregorianCalendar();</span><br><span class="line">Date date = new Date();</span><br><span class="line">calendar.setTime(date);</span><br><span class="line">calendar.add(GregorianCalendar.MINUTE, 10);</span><br><span class="line">Date after = calendar.getTime();</span><br><span class="line">System.out.println(after);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//1.åˆ›å»ºCalendarå¯¹è±¡</span><br><span class="line">Calendar calendar =Calendar.getInstance();</span><br><span class="line">System.out.println(calendar.getTime());//Calenderå˜Date</span><br><span class="line">System.out.println(calendar.getTimeInMillis());//Calenderå˜æ—¶é—´æˆ³</span><br><span class="line">Calendar calendar1 = new GregorianCalendar();</span><br><span class="line">System.out.println(calendar1.getTime()); //è¾“å‡ºä¸€æ ·</span><br><span class="line"></span><br><span class="line">//2.è·å–æ—¶é—´ä¿¡æ¯</span><br><span class="line">//è·å–å¹´</span><br><span class="line">int year = calendar.get(Calendar.YEAR);</span><br><span class="line">//æœˆ</span><br><span class="line">int month = calendar.get(Calendar.MONTH);</span><br><span class="line">//æ—¥</span><br><span class="line">int day = calendar.get(Calendar.DAY_OF_MONTH);//DATE</span><br><span class="line">//å°æ—¶</span><br><span class="line">int hour = calendar.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">//åˆ†é’Ÿ</span><br><span class="line">int minute = calendar.get(Calendar.MINUTE);</span><br><span class="line">//ç§’</span><br><span class="line">int second = calendar.get(Calendar.SECOND);</span><br><span class="line">System.out.println(year+&quot;å¹´&quot;+month+&quot;æœˆ&quot;+day+&quot;æ—¥&quot;+&quot;  &quot;+hour+&quot;æ—¶&quot;+minute+&quot;åˆ†&quot;+second+&quot;ç§’&quot;);</span><br><span class="line"></span><br><span class="line">//ä¿®æ”¹æ—¶é—´</span><br><span class="line">Calendar calendar2 =Calendar.getInstance();</span><br><span class="line">calendar2.set(Calendar.DAY_OF_MONTH,5);</span><br><span class="line">System.out.println(calendar2.getTime().toLocaleString());</span><br><span class="line"></span><br><span class="line">//addæ–¹æ³•ä¿®æ”¹æ—¶é—´</span><br><span class="line">calendar2.add(Calendar.HOUR,-1);</span><br><span class="line">System.out.println(calendar2.getTime().toLocaleString());</span><br><span class="line"></span><br><span class="line">//è·å–å½“æœˆå¤šå°‘å¤©</span><br><span class="line">int max = calendar2.getActualMaximum(Calendar.DAY_OF_MONTH); //30</span><br><span class="line">int min = calendar2.getActualMinimum(Calendar.DAY_OF_MONTH); //1</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/a1439775520/article/details/98442556">https://blog.csdn.net/a1439775520/article/details/98442556</a> </p>
<h4 id="âœ…æ—¶é—´æˆ³"><a href="#âœ…æ—¶é—´æˆ³" class="headerlink" title="âœ…æ—¶é—´æˆ³"></a>âœ…æ—¶é—´æˆ³</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void timeStampTest() &#123;</span><br><span class="line">  // å½“å‰æ—¶é—´æ—¶é—´æˆ³</span><br><span class="line">  long nowStamp = System.currentTimeMillis();</span><br><span class="line">  System.out.println(&quot;æ¯«ç§’æ—¶é—´æˆ³ï¼š&quot; + nowStamp);</span><br><span class="line">  long nowhaomiao = System.currentTimeMillis() * 1000;</span><br><span class="line">  System.out.println(&quot;å¾®å¦™æ—¶é—´æˆ³&quot; + nowhaomiao);</span><br><span class="line">  long nowhaomiao1 = System.nanoTime() / 1000;</span><br><span class="line">  System.out.println(&quot;å¾®å¦™æ—¶é—´æˆ³1&quot; + nowhaomiao1); //ä¸è¡Œ</span><br><span class="line"></span><br><span class="line">  // æ˜¨å¤©è¿™ä¸ªæ—¶é—´æ—¶é—´æˆ³</span><br><span class="line">  Calendar calendar = Calendar.getInstance();</span><br><span class="line">  calendar.add(Calendar.DAY_OF_YEAR, -1);</span><br><span class="line">  //calender.getTimeå˜Dateï¼Œå†getTimeå˜æ—¶é—´æˆ³ï¼ˆlongå‹çš„ï¼‰</span><br><span class="line">  System.out.println(&quot;æ˜¨å¤©æ­¤æ—¶ï¼š&quot; + calendar.getTime().getTime());</span><br><span class="line"></span><br><span class="line">  // æ˜¨å¤©æŸæ—¶é—´çš„æ—¶é—´æˆ³</span><br><span class="line">  Calendar calendar1 = Calendar.getInstance();</span><br><span class="line">  calendar.set(calendar1.get(Calendar.YEAR), calendar1.get(Calendar.MONTH), calendar1.get(Calendar.DAY_OF_MONTH) - 1, 23, 59, 59);</span><br><span class="line">  System.out.println(calendar.getTime().getTime());</span><br><span class="line"></span><br><span class="line">  // æ—¶é—´æˆ³è½¬æ¢ä¸ºDate</span><br><span class="line">  Date now = new Date(nowStamp);  //longå‹</span><br><span class="line">  //å¦‚æœæ˜¯æ—¶é—´æˆ³å­—ç¬¦ä¸²ï¼Œç”¨ä¸‹é¢</span><br><span class="line">  //Date now1 = new Date(Long.parseLong(nowStamp));</span><br><span class="line">  System.out.println(&quot;now: &quot; + now);</span><br><span class="line">  // å†è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><br><span class="line">  String format = &quot;yyyy-MM-dd HH:mm:ss&quot;;</span><br><span class="line">  SimpleDateFormat sdf = new SimpleDateFormat(format);</span><br><span class="line">  System.out.println(&quot;now: &quot; + sdf.format(now));</span><br><span class="line"></span><br><span class="line">  // æ—¥æœŸæ ¼å¼å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´æˆ³</span><br><span class="line">  String s = &quot;2022-06-25 12:12:12&quot;;</span><br><span class="line">  try &#123;</span><br><span class="line">      // String-Date-longå‹æ—¶é—´æˆ³</span><br><span class="line">      System.out.println(&quot;æ—¶é—´æˆ³ï¼š&quot; + String.valueOf(sdf.parse(s).getTime()));</span><br><span class="line">  &#125; catch (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…DateUtilså·¥å…·ç±»"><a href="#âœ…DateUtilså·¥å…·ç±»" class="headerlink" title="âœ…DateUtilså·¥å…·ç±»"></a>âœ…DateUtilså·¥å…·ç±»</h4><p>apache.commons.lang3åŒ…ä¸‹çš„å·¥å…·ç±»</p>
<p>1ã€è·å–æŒ‡å®šæ—¥æœŸçš„å¼€å§‹æ—¶é—´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testDateUtils() throws ParseException &#123;</span><br><span class="line">    // è·å–æŒ‡å®šæ—¥æœŸçš„å¼€å§‹æ—¶é—´</span><br><span class="line">    DateFormat df = DateFormat.getDateInstance();</span><br><span class="line">    Date date = df.parse(&quot;2022-06-24 14:01:01&quot;);</span><br><span class="line">    Date begin = org.apache.commons.lang3.time.DateUtils.truncate(date, Calendar.DATE);</span><br><span class="line">    System.out.println(&quot;åˆå§‹æ—¶é—´ï¼š&quot; + begin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…è®¡ç®—ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´çš„æ‰€æœ‰å¤©"><a href="#âœ…è®¡ç®—ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´çš„æ‰€æœ‰å¤©" class="headerlink" title="âœ…è®¡ç®—ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´çš„æ‰€æœ‰å¤©"></a>âœ…è®¡ç®—ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´çš„æ‰€æœ‰å¤©</h4><p>è¾“å…¥ï¼šbegin:â€˜2022-08-01â€™ end:â€˜2022-08-05â€™<br>è¾“å‡ºï¼šâ€2021-08-01â€,â€2021-08-02â€,â€2021-08-03â€,â€2021-08-04â€,â€2021-08-05â€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public static List&lt;String&gt; findDates(String beginTime, String endTime)</span><br><span class="line">        throws ParseException &#123;</span><br><span class="line">    List&lt;String&gt; allDate = new ArrayList();</span><br><span class="line">    SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line"></span><br><span class="line">    Date dBegin = sdf.parse(beginTime);</span><br><span class="line">    Date dEnd = sdf.parse(endTime);</span><br><span class="line">    allDate.add(sdf.format(dBegin));</span><br><span class="line">    Calendar calBegin = Calendar.getInstance();</span><br><span class="line">    // ä½¿ç”¨ç»™å®šçš„ Date è®¾ç½®æ­¤ Calendar çš„æ—¶é—´</span><br><span class="line">    calBegin.setTime(dBegin);</span><br><span class="line">    Calendar calEnd = Calendar.getInstance();</span><br><span class="line">    // ä½¿ç”¨ç»™å®šçš„ Date è®¾ç½®æ­¤ Calendar çš„æ—¶é—´</span><br><span class="line">    calEnd.setTime(dEnd);</span><br><span class="line">    // æµ‹è¯•æ­¤æ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šæ—¥æœŸä¹‹å</span><br><span class="line">    while (dEnd.after(calBegin.getTime())) &#123;</span><br><span class="line">        // æ ¹æ®æ—¥å†çš„è§„åˆ™ï¼Œä¸ºç»™å®šçš„æ—¥å†å­—æ®µæ·»åŠ æˆ–å‡å»æŒ‡å®šçš„æ—¶é—´é‡</span><br><span class="line">        calBegin.add(Calendar.DAY_OF_MONTH, 1);</span><br><span class="line">        allDate.add(sdf.format(calBegin.getTime()));</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(&quot;æ—¶é—´==&quot; + allDate);</span><br><span class="line">    return allDate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Stringç›¸å…³"><a href="#Stringç›¸å…³" class="headerlink" title="Stringç›¸å…³"></a>Stringç›¸å…³</h3><h4 id="intå˜String-Stringå˜int"><a href="#intå˜String-Stringå˜int" class="headerlink" title="intå˜String,Stringå˜int"></a>intå˜String,Stringå˜int</h4><p>ç¬¬ä¸€ç§æ–¹å¼ï¼šä½¿ç”¨intçš„å°è£…ç±»Integerï¼Œåœ¨Integeré‡Œé¢ç”¨ä»–çš„toStringæ–¹æ³•ã€‚ï¼ˆæ€§èƒ½æœ€å¥½ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int i=3ï¼›</span><br><span class="line">String s=Integer.toString(i);</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§æ–¹å¼ï¼šStringçš„valueOfæ–¹æ³•ï¼Œä¼ å‚æ˜¯Objectï¼ˆæ€§èƒ½ç¬¬äºŒï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int i=1;</span><br><span class="line">String s=String.valueOf(i);</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§æ–¹å¼ï¼Œç›´æ¥åœ¨intåé¢åŠ ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºåœ¨javaé‡Œé¢ï¼Œé»˜è®¤ä»»åŠ¡intç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹ç›¸åŠ ï¼Œä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚ï¼ˆæ€§èƒ½æœ€å·®ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int i=2ï¼›</span><br><span class="line">String s=i+&quot;&quot;;</span><br></pre></td></tr></table></figure>

<p>stringå˜int/Longï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Integer i1 = Integer.parseInt(s);</span><br><span class="line">Integer i = Integer.valueOf(s);</span><br><span class="line">Long l = Long.valueOf(s);</span><br><span class="line">Long l1 = Long.parseLong(s);</span><br></pre></td></tr></table></figure>

<h4 id="String-format"><a href="#String-format" class="headerlink" title="String.format"></a>String.format</h4><p>String.format(String format, Objectâ€¦ args)<br>å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹æ³•ï¼Œsoutä¹Ÿè¿™ä¹ˆç”¨ã€‚</p>
<p><code>String str=String.format(&quot;Hi,%s %s %s&quot;, &quot;å°è¶…&quot;,&quot;æ˜¯ä¸ª&quot;,&quot;å¤§å¸…å“¥&quot;);  </code></p>
<p>%s    å­—ç¬¦ä¸²ç±»å‹    â€œhelloâ€<br>%c    å­—ç¬¦ç±»å‹    â€˜mâ€™<br>%b    å¸ƒå°”ç±»å‹    true<br>%d    æ•´æ•°ç±»å‹ï¼ˆåè¿›åˆ¶ï¼‰    88<br>%x    æ•´æ•°ç±»å‹ï¼ˆåå…­è¿›åˆ¶ï¼‰    FF<br>%o    æ•´æ•°ç±»å‹ï¼ˆå…«è¿›åˆ¶ï¼‰    77<br>%f    æµ®ç‚¹ç±»å‹    8.888<br>%a    åå…­è¿›åˆ¶æµ®ç‚¹ç±»å‹    FF.35AE<br>%e    æŒ‡æ•°ç±»å‹    9.38e+5<br>%g    é€šç”¨æµ®ç‚¹ç±»å‹ï¼ˆfå’Œeç±»å‹ä¸­è¾ƒçŸ­çš„ï¼‰    ä¸ä¸¾ä¾‹(åŸºæœ¬ç”¨ä¸åˆ°)<br>%h    æ•£åˆ—ç     ä¸ä¸¾ä¾‹(åŸºæœ¬ç”¨ä¸åˆ°)<br>%%    ç™¾åˆ†æ¯”ç±»å‹    ï¼…(%ç‰¹æ®Šå­—ç¬¦%%æ‰èƒ½æ˜¾ç¤º%)<br>%n    æ¢è¡Œç¬¦    ä¸ä¸¾ä¾‹(åŸºæœ¬ç”¨ä¸åˆ°)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">    String str=null;  </span><br><span class="line">    str=String.format(&quot;Hi,%s&quot;, &quot;å°è¶…&quot;);  </span><br><span class="line">    System.out.println(str);  </span><br><span class="line">    str=String.format(&quot;Hi,%s %s %s&quot;, &quot;å°è¶…&quot;,&quot;æ˜¯ä¸ª&quot;,&quot;å¤§å¸…å“¥&quot;);            </span><br><span class="line">    System.out.println(str);                           </span><br><span class="line">    System.out.printf(&quot;å­—æ¯cçš„å¤§å†™æ˜¯ï¼š%c %n&quot;, &#x27;C&#x27;);  </span><br><span class="line">    System.out.printf(&quot;å¸ƒå°”ç»“æœæ˜¯ï¼š%b %n&quot;, &quot;å°è¶…&quot;.equal(&quot;å¸…å“¥&quot;));  </span><br><span class="line">    System.out.printf(&quot;100çš„ä¸€åŠæ˜¯ï¼š%d %n&quot;, 100/2);  </span><br><span class="line">    System.out.printf(&quot;100çš„16è¿›åˆ¶æ•°æ˜¯ï¼š%x %n&quot;, 100);  </span><br><span class="line">    System.out.printf(&quot;100çš„8è¿›åˆ¶æ•°æ˜¯ï¼š%o %n&quot;, 100);  </span><br><span class="line">    System.out.printf(&quot;50å…ƒçš„ä¹¦æ‰“8.5æŠ˜æ‰£æ˜¯ï¼š%f å…ƒ%n&quot;, 50*0.85);  </span><br><span class="line">    System.out.printf(&quot;ä¸Šé¢ä»·æ ¼çš„16è¿›åˆ¶æ•°æ˜¯ï¼š%a %n&quot;, 50*0.85);  </span><br><span class="line">    System.out.printf(&quot;ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°è¡¨ç¤ºï¼š%e %n&quot;, 50*0.85);  </span><br><span class="line">    System.out.printf(&quot;ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°å’Œæµ®ç‚¹æ•°ç»“æœçš„é•¿åº¦è¾ƒçŸ­çš„æ˜¯ï¼š%g %n&quot;, 50*0.85);  </span><br><span class="line">    System.out.printf(&quot;ä¸Šé¢çš„æŠ˜æ‰£æ˜¯%d%% %n&quot;, 85);  </span><br><span class="line">    System.out.printf(&quot;å­—æ¯Açš„æ•£åˆ—ç æ˜¯ï¼š%h %n&quot;, &#x27;A&#x27;);  </span><br><span class="line"></span><br><span class="line">æ—¥æœŸæ ¼å¼ï¼š%tx xä»£è¡¨æ—¥æœŸè½¬æ¢ç¬¦</span><br><span class="line">c	åŒ…æ‹¬å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯	æ˜ŸæœŸå…­ åæœˆ 27 14:21:20 CST 2007</span><br><span class="line">F	â€œå¹´-æœˆ-æ—¥â€æ ¼å¼	2007-10-27</span><br><span class="line">D	â€œæœˆ/æ—¥/å¹´â€æ ¼å¼	10/27/07</span><br><span class="line">r	â€œHH:MM:SS PMâ€æ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰	02:25:51 ä¸‹åˆ</span><br><span class="line">T	â€œHH:MM:SSâ€æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰	14:28:16</span><br><span class="line">R	â€œHH:MMâ€æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰	14:28</span><br><span class="line"></span><br><span class="line">Date date=new Date();                                  </span><br><span class="line">//cçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼š%tc%n&quot;,date);          </span><br><span class="line">//fçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;å¹´-æœˆ-æ—¥æ ¼å¼ï¼š%tF%n&quot;,date);  </span><br><span class="line">//dçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;æœˆ/æ—¥/å¹´æ ¼å¼ï¼š%tD%n&quot;,date);  </span><br><span class="line">//rçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;HH:MM:SS PMæ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰ï¼š%tr%n&quot;,date);  </span><br><span class="line">//tçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;HH:MM:SSæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š%tT%n&quot;,date);  </span><br><span class="line">//Rçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;HH:MMæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š%tR&quot;,date);  </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">System.out.printf(&quot;%f&quot;, d);// &quot;f&quot;è¡¨ç¤ºæ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%9.2f&quot;, d);// &quot;9.2&quot;ä¸­çš„9è¡¨ç¤ºè¾“å‡ºçš„é•¿åº¦ï¼Œ2è¡¨ç¤ºå°æ•°ç‚¹åçš„ä½æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%+9.2f&quot;, d);// &quot;+&quot;è¡¨ç¤ºè¾“å‡ºçš„æ•°å¸¦æ­£è´Ÿå·ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%-9.4f&quot;, d);// &quot;-&quot;è¡¨ç¤ºè¾“å‡ºçš„æ•°å·¦å¯¹é½ï¼ˆé»˜è®¤ä¸ºå³å¯¹é½ï¼‰ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%+-9.3f&quot;, d);// &quot;+-&quot;è¡¨ç¤ºè¾“å‡ºçš„æ•°å¸¦æ­£è´Ÿå·ä¸”å·¦å¯¹é½ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%d&quot;, i);// &quot;d&quot;è¡¨ç¤ºè¾“å‡ºåè¿›åˆ¶æ•´æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%o&quot;, i);// &quot;o&quot;è¡¨ç¤ºè¾“å‡ºå…«è¿›åˆ¶æ•´æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%x&quot;, i);// &quot;d&quot;è¡¨ç¤ºè¾“å‡ºåå…­è¿›åˆ¶æ•´æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%#x&quot;, i);// &quot;d&quot;è¡¨ç¤ºè¾“å‡ºå¸¦æœ‰åå…­è¿›åˆ¶æ ‡å¿—çš„æ•´æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%s&quot;, s);// &quot;d&quot;è¡¨ç¤ºè¾“å‡ºå­—ç¬¦ä¸²ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;è¾“å‡ºä¸€ä¸ªæµ®ç‚¹æ•°ï¼š%fï¼Œä¸€ä¸ªæ•´æ•°ï¼š%dï¼Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼š%s&quot;, d, i, s);  </span><br><span class="line">// å¯ä»¥è¾“å‡ºå¤šä¸ªå˜é‡ï¼Œæ³¨æ„é¡ºåºã€‚  </span><br><span class="line">System.out.println();  </span><br></pre></td></tr></table></figure>

<h4 id="Strings-nullToEmpty"><a href="#Strings-nullToEmpty" class="headerlink" title="Strings.nullToEmpty"></a>Strings.nullToEmpty</h4><p>Stringsã€Listsã€Maps éƒ½æ˜¯googleæä¾›çš„å·¥å…·ç±»ã€‚<br>ä½¿ç”¨ä¹‹å‰å¯¼å…¥åŒ…guavaã€‚</p>
<p>vo.setS(String.nullToEmpty(s));  ä¸€èˆ¬ç”¨äºç»™å¯¹è±¡å±æ€§èµ‹å€¼ï¼Œå¦‚æœä¸ºnullï¼Œå°±è®¾ç©ºã€‚</p>
<p>å…¶ä»–guavaå·¥å…·ç±»ä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://www.w3cschool.cn/article/17770773.html">https://www.w3cschool.cn/article/17770773.html</a></p>
<h4 id="StringUtilså·¥å…·ç±»"><a href="#StringUtilså·¥å…·ç±»" class="headerlink" title="StringUtilså·¥å…·ç±»"></a>StringUtilså·¥å…·ç±»</h4><p>StringUtilså·¥å…·ç±»æ˜¯org.apache.commons.lang3åŒ…ä¸‹çš„å·¥å…·ç±»ï¼Œå¯¹Stringç±»å‹çš„æ“ä½œä½œäº†å°è£…ï¼Œæ˜¯å¯¹Javaè‡ªå¸¦çš„APIçš„æœ‰æ•ˆè¡¥å……ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´é«˜æ•ˆå¿«é€Ÿåœ°å¤„ç†å­—ç¬¦ä¸²ã€‚</p>
<p>å¯¼å…¥commons-lang3åŒ…ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String substringAfter(String str,String separator)ï¼š</span><br><span class="line">åœ¨ç¬¬ä¸€æ¬¡å‡ºç°åˆ†éš”ç¬¦åè·å–å­å­—ç¬¦ä¸²ã€‚</span><br><span class="line"></span><br><span class="line">String substringAfterLast(String str,String separator)ï¼š</span><br><span class="line">åœ¨æœ€åä¸€æ¬¡å‡ºç°åˆ†éš”ç¬¦ä¹‹åè·å–å­å­—ç¬¦ä¸²ã€‚</span><br></pre></td></tr></table></figure>

<p>å·¥å…·ç±»ï¼šä¸€èˆ¬æ˜¯ç›´æ¥ç”¨å®ƒçš„é™æ€æ–¹æ³•ï¼Œç›´æ¥ç”¨ç±»æ¥è°ƒç”¨ï¼Œä¾‹å¦‚ï¼šCollectionsã€Arraysç­‰jaaè‡ªå¸¦çš„å·¥å…·ç±»ï¼›Listsã€Mapsç­‰googleå·¥å…·ç±»ï¼›CollectionUtilsã€StringUtilsç­‰apacheå·¥å…·ç±»ã€‚</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1662921">https://cloud.tencent.com/developer/article/1662921</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">StringUtils.EMPTY = &quot;&quot;</span><br><span class="line"></span><br><span class="line">// åªæ›¿æ¢ä¸€æ¬¡--&gt;ç»“æœæ˜¯ï¼šphhhss</span><br><span class="line">StringUtils.replaceOnce(&quot;sshhhss&quot;, &quot;ss&quot;, &quot;p&quot;);</span><br><span class="line">// å…¨éƒ¨æ›¿æ¢</span><br><span class="line">StringUtils.replace(&quot;sshhhs&quot;, &quot;ss&quot;, &quot;p&quot;);</span><br><span class="line">// å®šä¹‰æ›¿æ¢æ¬¡æ•°</span><br><span class="line">StringUtils.replace(&quot;sshhhsshss&quot;, &quot;ss&quot;, &quot;7777&quot;,2);</span><br><span class="line">// æ£€éªŒå­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºnullä¸”ä¸ä¸ºâ€œâ€</span><br><span class="line">if(!StringUtils.isEmpty(s))</span><br><span class="line"></span><br><span class="line">//å¿½ç•¥å¤§å°å†™çš„æ¯”è¾ƒï¼š</span><br><span class="line">System.out.println(StringUtils.equalsIgnoreCase(&quot;abc&quot;, &quot;aBC&quot;));</span><br></pre></td></tr></table></figure>

<h4 id="stringè‡ªå·±çš„æ–¹æ³•"><a href="#stringè‡ªå·±çš„æ–¹æ³•" class="headerlink" title="stringè‡ªå·±çš„æ–¹æ³•"></a>stringè‡ªå·±çš„æ–¹æ³•</h4><p>âœ…str.trim()  ç”¨äºåˆ é™¤å­—ç¬¦ä¸²çš„å¤´å°¾ç©ºç™½ç¬¦ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str = new String(&quot;   hello   &quot;);</span><br><span class="line">System.out.println( str.trim() );</span><br></pre></td></tr></table></figure>

<p>âœ…str.replaceAll(æ­£åˆ™è¡¨è¾¾å¼, æ›¿æ¢å­—ç¬¦ä¸²)<br>ä½¿ç”¨ç»™å®šçš„å‚æ•° replacement æ›¿æ¢å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String Str = new String(&quot;www.hello.com&quot;);</span><br><span class="line">System.out.println(Str.replaceAll(&quot;(.*)hello(.*)&quot;, &quot;hi&quot; ));</span><br></pre></td></tr></table></figure>

<p>âœ…str.replace(åŸå­—ç¬¦/å­—ç¬¦ä¸², æ›¿æ¢æˆçš„æ–°å­—ç¬¦/å­—ç¬¦ä¸²)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">String replace(char oldChar, char newChar)</span><br><span class="line">ç”¨æ–°å­—ç¬¦newChar æ›¿æ¢æ‰€æœ‰çš„ æ—§å­—ç¬¦oldChar ã€‚</span><br><span class="line"></span><br><span class="line">String replace(CharSequence target, CharSequence replacement)</span><br><span class="line">ç”¨æ–°å­—ç¬¦ä¸²replacementæ›¿æ¢æ‰€æœ‰çš„ æ—§å­—ç¬¦ä¸²targetã€‚</span><br><span class="line"></span><br><span class="line">String replaceAll(String regex, String replacement)</span><br><span class="line">ç”¨æ–°å­—ç¬¦ä¸²replacement æ›¿æ¢æ‰€æœ‰çš„ æ­£åˆ™æ¨¡å¼åŒ¹é…çš„ä¸²ã€‚â€”â€”ï¼ˆæ›¿æ¢çš„æ˜¯æ¨¡ç³Šå­—ä¸²ï¼‰</span><br><span class="line"></span><br><span class="line">String replaceFirst(String regex, String replacement)</span><br><span class="line">ç”¨æ–°å­—ç¬¦ä¸²replacement æ›¿æ¢ç¬¬ä¸€ä¸ª æ­£åˆ™æ¨¡å¼åŒ¹é…çš„ä¸²ã€‚â€”â€”ï¼ˆæ›¿æ¢çš„æ˜¯æ¨¡ç³Šå­—ä¸²ï¼‰</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">å¦å¤–ï¼ŒStringBuilderä¸­ä¹Ÿæœ‰è¯¥æ–¹æ³•ï¼š</span><br><span class="line">replace(int startï¼Œint endï¼ŒString str)</span><br><span class="line">ç”¨str æ›¿æ¢ startâ€“endçš„å­ä¸²ã€‚//ä¸åŒ…æ‹¬end</span><br></pre></td></tr></table></figure>

<p>âœ…str.indexof() ç”¨äºè¿”å›å­—ç¬¦ä¸²ä¸­æŸéƒ¨åˆ†çš„ç´¢å¼•<br>1ã€ indexOf(String str): è¿”å›æŒ‡å®šå­—ç¬¦stråœ¨å­—ç¬¦ä¸²ä¸­ï¼ˆæ–¹æ³•è°ƒç”¨è€…ï¼‰ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„èµ·å§‹ç´¢å¼•ï¼Œå¦‚æœæ­¤å­—ç¬¦ä¸²ä¸­æ²¡æœ‰è¿™æ ·çš„å­—ç¬¦ï¼Œåˆ™è¿”å› -1ã€‚<br>2ã€indexOf(String str, int index): è¿”å›ä» index ä½ç½®å¼€å§‹æŸ¥æ‰¾æŒ‡å®šå­—ç¬¦stråœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„èµ·å§‹ç´¢å¼•ï¼Œå¦‚æœæ­¤å­—ç¬¦ä¸²ä¸­æ²¡æœ‰è¿™æ ·çš„å­—ç¬¦ï¼Œåˆ™è¿”å› -1ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str = &quot;01234567890123456789&quot;;</span><br><span class="line">System.out.println(str.indexOf(&quot;123&quot;));  //return 1</span><br><span class="line">System.out.println(str.indexOf(&quot;123&quot;,5));  //return 11</span><br></pre></td></tr></table></figure>

<p>str.lastIndexOf(â€œ//â€œ)  è¿”å›æœ€åä¸€æ¬¡å‡ºç°å­—ç¬¦/å­—ç¬¦ä¸²çš„ä½ç½®ã€‚</p>
<p>âœ…String.join()é™æ€æ–¹æ³•<br>ç”¨äºå°†list/setå˜ä¸ºString</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Long&gt; list = Lists.newArrayList(1L, 2L, 2L);</span><br><span class="line">// å…ƒç´ ä¸­ç±»å‹å˜æ¢</span><br><span class="line">List&lt;String&gt; ls = list.stream().distinct().map(String::valueOf).collect(Collectors.toList());</span><br><span class="line">// é‡Œé¢çš„lsä¸èƒ½ä¸ºç©ºï¼Œå¿…é¡»æ˜¯Stringå…ƒç´ ç±»å‹</span><br><span class="line">String s = String.join(&quot;,&quot;, ls);</span><br><span class="line">System.out.println(s);</span><br><span class="line"></span><br><span class="line">//ç”¨setä¹Ÿå¯ä»¥</span><br><span class="line">Set&lt;Long&gt; set = Sets.newHashSet(1L, 2L);</span><br><span class="line">Set&lt;String&gt; ss = set.stream().map(i-&gt;String.valueOf(i)).collect(Collectors.toSet());</span><br><span class="line">s = String.join(&quot;,&quot;, ss);</span><br><span class="line">System.out.println(s);</span><br></pre></td></tr></table></figure>

<h4 id="Splitterå·¥å…·ç±»ï¼ˆStringæ‹†åˆ†æˆlistï¼‰"><a href="#Splitterå·¥å…·ç±»ï¼ˆStringæ‹†åˆ†æˆlistï¼‰" class="headerlink" title="Splitterå·¥å…·ç±»ï¼ˆStringæ‹†åˆ†æˆlistï¼‰"></a>Splitterå·¥å…·ç±»ï¼ˆStringæ‹†åˆ†æˆlistï¼‰</h4><p>æ˜¯googleå‡ºå“çš„ï¼ŒguavaåŒ…ä¸‹çš„å·¥å…·ç±»ï¼Œç”¨äºå¯¹å­—ç¬¦ä¸²åˆ†å‰²å¤„ç†ã€‚</p>
<p>é¦–å…ˆï¼Œå·²æœ‰çš„å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²çš„æ–¹æ³•ï¼š</p>
<p>1.Stringè‡ªå¸¦çš„split()æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;1,2,3&quot;;</span><br><span class="line">String[] split = s.split(&quot;,&quot;);</span><br></pre></td></tr></table></figure>
<p>ä¸è¶³ä¹‹å¤„ï¼šå¦‚æœ,åæœ‰ç©ºæ ¼çš„è¯ï¼Œè¿˜éœ€è¦åšè¿›ä¸€æ­¥å¤„ç†ï¼Œ<br>å¹¶ä¸”åˆ†å‰²åä»¥æ•°ç»„æ¥æ”¶ï¼Œå¦‚æœæ•°æ®è¿‡å¤šï¼Œè¿˜éœ€è¦å†è½¬ä¸ºé›†åˆã€‚</p>
<p>2.ä½¿ç”¨Patterç±»çš„splité™æ€æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String input = &quot;This!!unusual use!!hh!!points&quot;;</span><br><span class="line">System.out.println(Arrays.toString(Pattern.compile(&quot;!!&quot;).split(input)));</span><br></pre></td></tr></table></figure>

<p>3.Splitteræ¥åˆ†å‰²å­—ç¬¦ä¸²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class SplitterTest &#123;</span><br><span class="line"></span><br><span class="line">    //å®šä¹‰ä¸€ä¸ªæ‹†åˆ†å™¨ï¼Œâ€œ,â€åˆ†éš”ï¼Œå»ç©ºæ ¼</span><br><span class="line">    private static final Splitter splitter = Splitter.on(&quot;,&quot;).trimResults().omitEmptyStrings();</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        String s = &quot;1,2, 3&quot;;</span><br><span class="line">        List&lt;String&gt; list = splitter.splitToList(s);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        List&lt;Long&gt; list1 = list.stream().map(Long::valueOf).collect(Collectors.toList());</span><br><span class="line">        System.out.println(list1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Joinerè¿æ¥å­—ç¬¦ä¸²"><a href="#Joinerè¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="Joinerè¿æ¥å­—ç¬¦ä¸²"></a>Joinerè¿æ¥å­—ç¬¦ä¸²</h4><p>google guavaæä¾›çš„ç”¨æ¥è¿æ¥å­—ç¬¦ä¸²çš„ç±»ã€‚éœ€è¦å¯¼åŒ…ï¼šguavaã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// è¿æ¥å­—ç¬¦ä¸²list</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(&quot;AA&quot;, &quot;BB&quot;, &quot;CC&quot;);</span><br><span class="line">String str = Joiner.on(&quot;:&quot;).join(list);</span><br><span class="line">System.out.println(str);</span><br><span class="line">// è¾“å‡ºï¼šAA:BB:CC</span><br><span class="line"></span><br><span class="line">//è¿‡æ»¤å…¶ä¸­çš„null</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(&quot;AA&quot;, &quot;BB&quot;, null);</span><br><span class="line">String str = Joiner.on(&quot;:&quot;).skipNulls().join(list);</span><br><span class="line">System.out.println(str);</span><br><span class="line">// è¾“å‡ºï¼šAA:BB</span><br><span class="line"></span><br><span class="line">// å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªJoinå¯¹è±¡</span><br><span class="line">private static Joiner MY_JOINER = Joiner.on(&quot;/&quot;).skipNulls();</span><br><span class="line">String s = MY_JOINER.join(..);  é‡Œé¢çš„å‚æ•°æ˜¯Objectç±»å‹ï¼Œå¯ä»¥å¤šä¸ªã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44143796/article/details/122998799">https://blog.csdn.net/qq_44143796/article/details/122998799</a></p>
<h4 id="Stringæ“ä½œ"><a href="#Stringæ“ä½œ" class="headerlink" title="Stringæ“ä½œ"></a>Stringæ“ä½œ</h4><p>âœ…æˆªå–å­—ç¬¦ä¸²</p>
<p>1ã€stringè‡ªå·±çš„substringæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;hello&quot;;</span><br><span class="line">System.out.println(s.substring(2)); //llo</span><br><span class="line">System.out.println(s.substring(2, 4)); //ll å·¦é—­å³å¼€</span><br></pre></td></tr></table></figure>

<p>2ã€StringUtilsæä¾›çš„æ–¹æ³•ï¼ˆapacheï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">StringUtils.substring(&quot;hello world&quot;, 4);   // è¿”å›å€¼ï¼Œä»ç¬¬4ä½æˆªå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ : o wrold</span><br><span class="line">StringUtils.substring(&quot;hello world&quot;, 4, 10); // è¿”å›å€¼ï¼Œä»ç¬¬4ä½æˆªå–åˆ°ç¬¬9ä½ :   o wrol</span><br><span class="line"></span><br><span class="line">//æˆªå–æŸä¸ªå­—ç¬¦ä¸²ä¹‹å‰çš„å­—ç¬¦</span><br><span class="line">StringUtils.substringBefore(&quot;hello world&quot;, &quot;l&quot;); </span><br><span class="line">//ç»“æœæ˜¯ï¼šhe          è¿™é‡Œæ˜¯ä»¥ç¬¬ä¸€ä¸ªâ€lâ€ï¼Œä¸ºæ ‡å‡†ã€‚</span><br><span class="line">StringUtils.substringBeforeLast(&quot;hello world&quot;, &quot;l&quot;);</span><br><span class="line">//ç»“æœä¸ºï¼šhello wor   è¿™é‡Œä»¥æœ€åä¸€ä¸ªâ€œlâ€ä¸ºå‡†ã€‚</span><br><span class="line"></span><br><span class="line">//æˆªå–æŸä¸ªå­—ç¬¦ä¸²ä¹‹åçš„å­—ç¬¦</span><br><span class="line">StringUtils.substringAfter(&quot;hello world&quot;, &quot;l&quot;);</span><br><span class="line">//ç»“æœæ˜¯ï¼šlo world   è¿™é‡Œæ˜¯ä»¥ç¬¬ä¸€ä¸ªâ€lâ€ï¼Œä¸ºæ ‡å‡†ã€‚</span><br><span class="line">StringUtils.substringAfterLast(&quot;hello world&quot;, &quot;l&quot;);</span><br><span class="line">//ç»“æœä¸ºï¼šd          è¿™é‡Œä»¥æœ€åä¸€ä¸ªâ€œlâ€ä¸ºå‡†ã€‚</span><br><span class="line"></span><br><span class="line">//æˆªå–ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´éš”çš„å­—ç¬¦</span><br><span class="line">StringUtils.substringBetween(&quot;hello world&quot;, &quot;o&quot;);    </span><br><span class="line">//ç»“æœæ˜¯ï¼š w   ä¸¤ä¸ªoä¹‹é—´çš„å­—ç¬¦ä¸²ã€‚   </span><br><span class="line">StringUtils.substringBetween(&quot;hello world&quot;, &quot;l&quot;, &quot;r&quot;); </span><br><span class="line">//ç»“æœæ˜¯ï¼š lo wo   ç¬¬ä¸€ä¸ªå­—ç¬¦â€œlâ€ä¸ç¬¬ä¸€ä¸ªå­—ç¬¦â€œrâ€ä¹‹é—´çš„å­—ç¬¦ä¸²   </span><br><span class="line">StringUtils.substringsBetween(&quot;hello world&quot;, &quot;l&quot;, &quot;r&quot;);</span><br><span class="line">//ç»“æœæ˜¯ï¼šæ•°ç»„ [lo wo]   ç¬¬ä¸€ä¸ªå­—ç¬¦â€œlâ€ä¸ç¬¬ä¸€ä¸ªå­—ç¬¦â€œrâ€ä¹‹é—´çš„å­—ç¬¦ä¸²ï¼Œä»¥æ•°ç»„å½¢å¼è¿”å›ã€‚   </span><br></pre></td></tr></table></figure>

<p>3ã€stringè‡ªå·±çš„splitæ–¹æ³•<br>å°†å­—ç¬¦ä¸²æŒ‰ç…§åˆ†å‰²ç¬¦æˆªå–ï¼Œä»¥æ•°ç»„å½¢å¼è¿”å›</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String str = &quot;hello, world, ni,  hao&quot;;</span><br><span class="line">String[]  strs=str.split(&quot;,&quot;);</span><br><span class="line">for(int i=0,len=strs.length;i&lt;len;i++)&#123;</span><br><span class="line">    System.out.println(strs[i]);</span><br><span class="line">&#125;</span><br><span class="line">//ç©ºæ ¼ä¹Ÿç®—äº†</span><br><span class="line">hello</span><br><span class="line"> world</span><br><span class="line"> ni</span><br><span class="line">  hao</span><br></pre></td></tr></table></figure>

<p>âœ…å­—ç¬¦ä¸²æ‹¼æ¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3() &#123;</span><br><span class="line">    // 1.ç›´æ¥ç”¨+ï¼Œå†…éƒ¨ä¼šæ›¿æ¢æˆStringBuilderçš„appendæ–¹æ³•</span><br><span class="line">    // ä¸å»ºè®®åœ¨ for å¾ªç¯ä¸­ä½¿ç”¨ â€œ+â€ è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¼šåˆ›å»ºå¤šä¸ªStringBuilder å¯¹è±¡</span><br><span class="line">    String s1 = &quot;hel&quot;;</span><br><span class="line">    String s2 = null;</span><br><span class="line">    System.out.println(s1 + s2); //helnull  å¦‚æœæ˜¯nullï¼Œå½“ä½œå­—ç¬¦ä¸²nullæ¥å¤„ç†</span><br><span class="line">    </span><br><span class="line">    // 2.StringBuilderçš„appendæ–¹æ³• ï¼ˆéçº¿ç¨‹å®‰å…¨ï¼‰</span><br><span class="line">    StringBuilder s3 = new StringBuilder(&quot;hel&quot;);</span><br><span class="line">    System.out.println(s3.append(&quot;lo&quot;));</span><br><span class="line">    </span><br><span class="line">    // 3.StringBufferçš„appendæ–¹æ³• ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</span><br><span class="line">    StringBuffer s4 = new StringBuffer(&quot;hel&quot;);</span><br><span class="line">    System.out.println(s4.append(&quot;lo&quot;));</span><br><span class="line">    </span><br><span class="line">    // 4.Stringç±»çš„concatæ–¹æ³•</span><br><span class="line">    System.out.println(s1.concat(&quot;lo&quot;));</span><br><span class="line">    //System.out.println(s1.concat(null)); //NPE</span><br><span class="line">    </span><br><span class="line">    // 5.Stringç±»çš„é™æ€joinæ–¹æ³• JDK 1.8 æä¾›ï¼Œå¯ä»¥åˆ†éš”ç¬¦ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªå­—ç¬¦ä¸²</span><br><span class="line">    System.out.println(String.join(&quot;&quot;, &quot;hel&quot;, &quot;lo&quot;)); //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå­—ç¬¦ä¸²è¿æ¥ç¬¦ï¼Œåé¢å¯ä»¥æ˜¯å¾ˆå¤šä¸ªå­—ç¬¦ä¸²è¿æ¥</span><br><span class="line">    </span><br><span class="line">    // 6.org.apache.commons.lang3.StringUtilçš„joinæ–¹æ³•</span><br><span class="line">    // ä¸ç”¨æ‹…å¿ƒ NullPointerException,å†…éƒ¨ä½¿ç”¨çš„ä»ç„¶æ˜¯ StringBuilder</span><br><span class="line">    System.out.println(StringUtils.join(&quot;hel&quot;, &quot;lo&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/ChineseSoftware/article/details/122956817">https://blog.csdn.net/ChineseSoftware/article/details/122956817</a></p>
<p>concatä¸+çš„åŒºåˆ«ï¼š<br>â‘ å¦‚æœæ‹¼æ¥çš„å­—ç¬¦ä¸²æ˜¯ nullï¼Œconcat æ—¶å€™å°±ä¼šæŠ›å‡º NullPointerExceptionï¼Œâ€œ+â€ æ“ä½œç¬¦ä¼šå½“åšæ˜¯ â€œnullâ€ å­—ç¬¦ä¸²æ¥å¤„ç†ã€‚<br>â‘¡å¦‚æœæ‹¼æ¥çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²(â€œâ€)ï¼Œé‚£ä¹ˆ concat çš„æ•ˆç‡è¦æ›´é«˜ä¸€ç‚¹ã€‚æ¯•ç«Ÿä¸éœ€è¦ new StringBuilder å¯¹è±¡ã€‚<br>â‘¢å¦‚æœæ‹¼æ¥çš„å­—ç¬¦ä¸²éå¸¸å¤šï¼Œconcat çš„æ•ˆç‡å°±ä¼šä¸‹é™ï¼Œå› ä¸ºç”¨åˆ°å­—ç¬¦æ•°ç»„ï¼Œå¼€é”€å°±å¤§ã€‚</p>
<h3 id="mapç›¸å…³"><a href="#mapç›¸å…³" class="headerlink" title="mapç›¸å…³"></a>mapç›¸å…³</h3><h4 id="mapå‡ ç§éå†æ–¹å¼"><a href="#mapå‡ ç§éå†æ–¹å¼" class="headerlink" title="mapå‡ ç§éå†æ–¹å¼"></a>mapå‡ ç§éå†æ–¹å¼</h4><p>ä¸€ã€Map.Entryéå†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) &#123;  </span><br><span class="line">  System.out.println(&quot;key= &quot; + entry.getKey());</span><br><span class="line">  System.out.println(&quot;value= &quot; + entry.getValue());</span><br><span class="line"> &#125;  </span><br></pre></td></tr></table></figure>
<p>äºŒã€é€šè¿‡Iteratorè¿­ä»£å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**é€šè¿‡entrySet()æ–¹æ³•å°†keyå’Œvalueå­˜æ”¾åˆ°Seté›†åˆä¸­ï¼ŒSeté›†åˆä¸­æœ‰è¿­ä»£å™¨**/</span><br><span class="line">Set&lt;Entry&lt;String,String&gt;&gt; entry = map.entrySet();</span><br><span class="line">Iterator&lt;Entry&lt;String,String&gt;&gt; iterators = entry.iterator();</span><br><span class="line">while(iterators.hasNext())&#123;</span><br><span class="line">  Entry&lt;String,String&gt; entrys  = iterators.next();</span><br><span class="line">  System.out.println(&quot;key=&quot;+entrys.getKey()+&quot;&amp;&amp;value=&quot;+entrys.getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‰ã€é€šè¿‡keySet()éå†<br>keySet()ï¼šå°†Mapä¸­æ‰€æœ‰çš„keyå­˜æ”¾åˆ°Seté›†åˆä¸­ã€‚å› ä¸ºSeté›†åˆæœ‰è¿­ä»£å™¨ï¼Œå¯ä»¥é€šè¿‡è¿­ä»£å™¨å¾ªç¯keyï¼Œå†é€šè¿‡get()æ–¹æ³•ï¼Œå¾—åˆ°æ¯ä¸ªkeyæ‰€å¯¹åº”çš„valueï¼›</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**é€šè¿‡keySet()æ–¹æ³•å°†æ‰€æœ‰çš„keyå€¼å­˜æ”¾åˆ°Seté›†åˆä¸­,Seté›†åˆä¸­æœ‰è¿­ä»£å™¨**/</span><br><span class="line">Iterator&lt;String&gt; iterator = map.keySet().iterator();</span><br><span class="line">while(iterator.hasNext())&#123;</span><br><span class="line">  String key = iterator.next();</span><br><span class="line">  System.out.println(&quot;key=&quot;+key+&quot;  &quot;+map.get(key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å¯ä»¥ä¸ç”¨è¿­ä»£å™¨ï¼Œç›´æ¥forå¾ªç¯</span><br><span class="line">for (String key: map.keySet()) &#123;</span><br><span class="line">  System.out.println(&quot;key:&quot; + map.get(key));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å››ã€values()éå†<br>values()è·å–é›†åˆä¸­çš„æ‰€æœ‰çš„valueå€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;String&gt; collection = map.values();</span><br><span class="line">å†foréå†å¾—åˆ°valueï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç”¨è¿­ä»£å™¨</span><br><span class="line">Iterator var3 = values.iterator();</span><br><span class="line">while(var3.hasNext()) &#123;</span><br><span class="line">  String value = (String)var3.next();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>äº”ã€ç›´æ¥foreach map</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map.forEach((key, value) -&gt; &#123;</span><br><span class="line">  System.out.println(&quot;ç¬¬äº”ç§:&quot; + key + &quot; ï¼š&quot; + value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="MapUtilså·¥å…·ç±»"><a href="#MapUtilså·¥å…·ç±»" class="headerlink" title="MapUtilså·¥å…·ç±»"></a>MapUtilså·¥å…·ç±»</h4><p>MapUtilsæ˜¯ org.apache.commons.collections å·¥å…·åŒ…ä¸­å¸¸ç”¨çš„å·¥å…·ç±»<br>éœ€è¦å¯¼å…¥åŒ…ï¼šcommons-collections4</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int value = MapUtils.getInteger(map, key, 0)</span><br><span class="line">//å°†ç»“æœè½¬æ¢ä¸ºIntegerï¼Œå¦‚æœè½¬æ¢å¤±è´¥åˆ™ä½¿ç”¨é»˜è®¤å€¼</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012894692/article/details/82557843">https://blog.csdn.net/u012894692/article/details/82557843</a></p>
<h4 id="mapçš„ä¸€äº›æ“ä½œ"><a href="#mapçš„ä¸€äº›æ“ä½œ" class="headerlink" title="mapçš„ä¸€äº›æ“ä½œ"></a>mapçš„ä¸€äº›æ“ä½œ</h4><p>âœ…mapçš„size</p>
<p>map.size() è¿”å› hashMap ä¸­é”®/å€¼å¯¹çš„æ•°é‡ã€‚</p>
<p>âœ…mapçš„putå’ŒputIfAbsent<br>1.ä½¿ç”¨ put æ–¹æ³•æ·»åŠ é”®å€¼å¯¹ï¼Œå¦‚æœ map é›†åˆä¸­æ²¡æœ‰è¯¥ key å¯¹åº”çš„å€¼ï¼Œåˆ™ç›´æ¥æ·»åŠ ï¼Œå¹¶è¿”å› valueï¼›å¦‚æœå·²ç»å­˜åœ¨å¯¹åº”çš„å€¼ï¼Œåˆ™ä¼š<strong>è¦†ç›–æ—§å€¼</strong>ï¼Œvalue ä¸ºæ–°çš„å€¼ï¼Œè¿”å›å€¼ä¸º valueã€‚<br><code>map.put(key, value)</code></p>
<p>2.ä½¿ç”¨ putIfAbsent æ–¹æ³•æ·»åŠ é”®å€¼å¯¹ï¼Œå¦‚æœ map é›†åˆä¸­æ²¡æœ‰è¯¥ key å¯¹åº”çš„å€¼ï¼Œåˆ™ç›´æ¥æ·»åŠ ï¼Œå¹¶è¿”å› nullï¼Œå¦‚æœå·²ç»å­˜åœ¨å¯¹åº”çš„å€¼ï¼Œåˆ™ä¾æ—§ä¸ºåŸæ¥çš„å€¼ï¼Œè¿”å›å€¼ä¸º valueï¼ˆæ—§çš„å€¼ï¼‰ã€‚<br><code>map.putIfAbsent(key, value)</code></p>
<p>âœ…map.getOrDefault(key, defaultvalue)<br>ç”¨äºmapè·å–valueï¼Œä¸.get(key)ä¸åŒçš„æ˜¯ï¼Œå¦‚æœå¾—åˆ°çš„valueæ˜¯nullçš„è¯ï¼Œå¯ä»¥ç»™ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;StudentGrade&gt; gradeList = Lists.newArrayList();</span><br><span class="line">//æŠŠå­¦ç”Ÿæˆç»©listå˜ä¸ºmapï¼šå­¦ç”Ÿ-æˆç»©list</span><br><span class="line">Map&lt;String, List&lt;String&gt;&gt; gradeMap = Maps.newHashMap();</span><br><span class="line">for(StudentGrade studentGrade : gradeList) &#123;</span><br><span class="line">  List&lt;String&gt; grades = gradeMap.getOrDefault(studentGrade.getName(), Lists.newArrayList());</span><br><span class="line">  grades.add(studentGrade.getGrade());</span><br><span class="line">  gradeMap.put(studentGrade.getName(), grades); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h3><p>å®šä¹‰æšä¸¾ç±»ï¼Œå®šä¹‰åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œå’Œimplã€serviceã€voåŒ…å¹³çº§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public enum SexEnum:int &#123;</span><br><span class="line">    male,female;</span><br><span class="line">&#125;</span><br><span class="line">å¤šä¸ªæšä¸¾æˆå‘˜ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ï¼Œ</span><br><span class="line">å¦‚æœæ²¡æœ‰æ˜¾å¼åœ°å£°æ˜åŸºç¡€ç±»å‹çš„æšä¸¾ï¼Œé‚£ä¹ˆæ„å‘³ç€å®ƒæ‰€å¯¹åº”çš„åŸºç¡€ç±»å‹æ˜¯ intã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@Getter</span><br><span class="line">public enum DemoEnum &#123;</span><br><span class="line">  LIU(&quot;liu&quot;, 1),</span><br><span class="line">  WANG(&quot;wang&quot;, 2);</span><br><span class="line">  UN_KNOW(&quot;unknow&quot;, 99)</span><br><span class="line"></span><br><span class="line">  private final String name;</span><br><span class="line">  private final int age;</span><br><span class="line"></span><br><span class="line">  //æ„é€ å‡½æ•°</span><br><span class="line">  private DemoEnum(String name, int age)&#123; </span><br><span class="line">    this.name = name;</span><br><span class="line">    this.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //å¯ä»¥å­˜ä¸€ä¸ªmapä¾›å¤–éƒ¨ä½¿ç”¨ï¼Œé‡Œé¢æ˜¯ç›´æ¥çš„enumç±»</span><br><span class="line">  static Map&lt;String, DemoEnum&gt; map = new TreeMap&lt;&gt;();</span><br><span class="line">  static &#123;</span><br><span class="line">    for (DemoEnum enum : DemoEnum.values()) &#123;</span><br><span class="line">      map.put(enum.getName(), enum)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public static DemoEnum getEnumByName(String name) &#123;</span><br><span class="line">    return map.get(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //æ ¹æ®å±æ€§è·å¾—enumï¼Œå†è·å¾—å¦ä¸€å±æ€§</span><br><span class="line">  //å¯ä»¥ä½¿ç”¨ä¸Šé¢æ„é€ ä¸ªmapï¼Œå†ä»mapè·å–çš„æ–¹æ³•</span><br><span class="line">  //ä¹Ÿå¯ä»¥åŠ ä¸ªæ–¹æ³•ï¼Œéå†è·å–ï¼Œæ ¹æ®å±æ€§è·å–enum</span><br><span class="line">  public static DemoEnum nameOf(String name) &#123;</span><br><span class="line">    for (DemoEnum e : DemoEnum.values()) &#123;</span><br><span class="line">      if (e.name = name) &#123;</span><br><span class="line">        return e;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return UN_KNOW;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æšä¸¾ç±»çš„values()æ–¹æ³•ï¼Œè·å–å®šä¹‰çš„æˆå‘˜æ•°ç»„ï¼š<br><code>DemoEnum[] values = DemoEnum.values();</code></p>
<p>Enum valueOfæ–¹æ³•ï¼š<br>é€šè¿‡å­—ç¬¦ä¸²æ¥è·å–æšä¸¾enumï¼š<br><code>DemoEnum e = DemoEnum.valueOf(&quot;LIU&quot;)</code></p>
<h3 id="Fileç›¸å…³"><a href="#Fileç›¸å…³" class="headerlink" title="Fileç›¸å…³"></a>Fileç›¸å…³</h3><h4 id="File"><a href="#File" class="headerlink" title="File"></a>File</h4><p>Javaæ–‡ä»¶ç±»ä»¥æŠ½è±¡çš„æ–¹å¼ä»£è¡¨æ–‡ä»¶åå’Œç›®å½•è·¯å¾„åã€‚è¯¥ç±»ä¸»è¦ç”¨äºæ–‡ä»¶å’Œç›®å½•çš„åˆ›å»ºã€æ–‡ä»¶çš„æŸ¥æ‰¾å’Œæ–‡ä»¶çš„åˆ é™¤ç­‰ã€‚<br>Fileå¯¹è±¡ä»£è¡¨ç£ç›˜ä¸­å®é™…å­˜åœ¨çš„æ–‡ä»¶å’Œç›®å½•ã€‚<br>è‡ªæˆ‘ç†è§£ï¼šFileå¯¹è±¡å°±æ˜¯æ–‡ä»¶è·¯å¾„åœ¨javaé‡Œçš„ä¸€ä¸ªæŠ½è±¡ï¼Œå¹¶ä¸ä»£è¡¨çœŸå®æ–‡ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">æ–°å»ºæ–‡ä»¶ï¼š</span><br><span class="line">String dirname = &quot;/java&quot;;</span><br><span class="line">File f1 = new File(dirname);</span><br><span class="line"></span><br><span class="line">// åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½•</span><br><span class="line">if (f1.isDirectory()) &#123; &#125;</span><br><span class="line">f1.isFile() æ˜¯å¦æ˜¯æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">// è¿”å›ç”±æ­¤æŠ½è±¡è·¯å¾„åæ‰€è¡¨ç¤ºçš„ç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„åç§°æ‰€ç»„æˆå­—ç¬¦ä¸²æ•°ç»„ã€‚</span><br><span class="line">String s[] = f1.list();</span><br><span class="line">for (int i = 0; i &lt; s.length; i++) &#123;</span><br><span class="line">  File f = new File(dirname + &quot;/&quot; + s[i]);</span><br><span class="line">  if (f.isDirectory()) &#123;</span><br><span class="line">    System.out.println(s[i] + &quot; is a directory&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    System.out.println(s[i] + &quot; is a file&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public String getName()  è¿”å›æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„åç§°ã€‚ï¼ˆæ–‡ä»¶åï¼‰</span><br><span class="line"></span><br><span class="line">public String getPath()  å°†æ­¤æŠ½è±¡è·¯å¾„åè½¬æ¢ä¸ºä¸€ä¸ªè·¯å¾„åå­—ç¬¦ä¸²ã€‚ï¼ˆè·¯å¾„åï¼‰</span><br><span class="line"></span><br><span class="line">public String getParent()  è¿”å›æ­¤æŠ½è±¡è·¯å¾„åçš„çˆ¶è·¯å¾„åçš„è·¯å¾„åå­—ç¬¦ä¸²ï¼ˆè·¯å¾„åï¼‰</span><br><span class="line"></span><br><span class="line">public File getParentFile()  è¿”å›çˆ¶æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">public boolean exists()  æµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼š</span><br><span class="line">File file = new File(&quot;/Users/liuxuan/MyProject/hi.md&quot;);</span><br><span class="line">File dirFile = file.getParentFile();</span><br><span class="line">if(dirFile != null &amp;&amp; !dirFile.exists())&#123;</span><br><span class="line">  dirFile.mkdirs();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://www.runoob.com/java/java-file.html">https://www.runoob.com/java/java-file.html</a></p>
<p>âœ…æ–‡ä»¶è¯»å†™çš„æ“ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1() throws IOException &#123;</span><br><span class="line">    // 1. æ–°å»ºæ–‡ä»¶å¤¹</span><br><span class="line">    String filePath = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    File file1 = new File(filePath);</span><br><span class="line">    boolean isSame = file.equals(file1);  //true é‡å†™äº†ï¼Œå˜å€¼æ¯”è¾ƒ</span><br><span class="line">    boolean isSame1 = file == file1;  //false åœ°å€æ¯”è¾ƒ</span><br><span class="line">    System.out.println(isSame);  //true</span><br><span class="line">    if(!file.getParentFile().exists()) &#123;</span><br><span class="line">        File dirFile = file.getParentFile();</span><br><span class="line">        dirFile.mkdirs();  //å»ºç«‹çˆ¶æ–‡ä»¶å¤¹</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 2.å­—èŠ‚æ•°ç»„ç›´æ¥å†™æ–‡ä»¶ï¼Œä¸‹é¢æœ‰åŠ ä¸€æ­¥è¾“å‡ºæµçš„æ–¹å¼</span><br><span class="line">    String filePath1 = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hi.java&quot;;</span><br><span class="line">    File file2 = new File(filePath1);</span><br><span class="line">    if(file2.exists()) &#123;</span><br><span class="line">        boolean res = file2.delete();</span><br><span class="line">        System.out.println(&quot;delete:&quot; + res);</span><br><span class="line">    &#125;</span><br><span class="line">    byte[] data = &quot;hi&quot;.getBytes();</span><br><span class="line">    byte[] data1 = &quot;System.out.println(\&quot;hi\&quot;)&quot;.getBytes();  //Stringå˜å­—èŠ‚æ•°ç»„</span><br><span class="line">    try &#123;</span><br><span class="line">        FileUtils.writeByteArrayToFile(file2, data);</span><br><span class="line">        FileUtils.writeByteArrayToFile(file2, data1);  //è¦†å†™çš„æ–¹å¼</span><br><span class="line">    &#125; catch(Exception e) &#123;</span><br><span class="line">        System.out.println(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 3.è¯»å–æ–‡ä»¶ï¼šç”¨è¾“å…¥æµ æ–‡ä»¶-&gt;è¾“å…¥æµ-&gt;å­—èŠ‚æ•°ç»„</span><br><span class="line">    FileInputStream in = new FileInputStream(file2);  //ä¹Ÿæœ‰ä¼ å…¥è·¯å¾„å­—ç¬¦ä¸²çš„æ„é€ å‡½æ•°</span><br><span class="line">    // è¾“å…¥æµå˜å­—èŠ‚æ•°ç»„</span><br><span class="line">    byte[] data2 = IOUtils.toByteArray(in);</span><br><span class="line">    //String content = data2.toString();  //å­—èŠ‚æ•°ç»„å˜Stringï¼Œç”¨è¿™ä¸ªä¸å¯¹</span><br><span class="line">    String content = new String(data2);  //å¾—ç”¨å®ƒ</span><br><span class="line">    System.out.println(&quot;è¾“å…¥æµå†…å®¹ï¼š&quot; + content);</span><br><span class="line">    String content4 = Arrays.toString(data2);</span><br><span class="line">    System.out.println(&quot;è¾“å…¥æµå†…å®¹ï¼š&quot; + content4); //è¿™æ ·è¾“å‡ºçš„æ˜¯æ•°å­—</span><br><span class="line"></span><br><span class="line">    // 3.è¯»å–æ–‡ä»¶ï¼šç”¨è¾“å…¥æµ æ–‡ä»¶-&gt;è¾“å…¥æµ-&gt;å­—èŠ‚æ•°ç»„ï¼Œå¦ç§æ–¹æ³•</span><br><span class="line">    FileInputStream in1 = new FileInputStream(file2);</span><br><span class="line">    byte[] data3 = new byte[20];</span><br><span class="line">    String content3 = CharStreams.toString(new InputStreamReader(in1, Charsets.UTF_8)); //è¿™é‡Œä¹Ÿæ¶ˆè€—è¾“å…¥æµ</span><br><span class="line">    System.out.println(&quot;å‰é¢è·å–è¾“å…¥æµå†…å®¹ï¼š&quot; + content3);</span><br><span class="line">    int num = in1.read(data3);  //è¾“å…¥æµæ¶ˆè€—20ä¸ªå­—èŠ‚</span><br><span class="line">    System.out.println(&quot;å‡ ä¸ªå­—èŠ‚ï¼š&quot; + num);</span><br><span class="line">    String content1 = IOUtils.toString(in1, String.valueOf(StandardCharsets.UTF_8));</span><br><span class="line">    System.out.println(&quot;è¾“å…¥æµå†…å®¹ï¼š&quot; + content1);   //è¿™é‡Œåªå‰©å‡ ä¸ªå¯ä»¥å±•ç¤º</span><br><span class="line">    String content2 = IOUtils.toString(in1, String.valueOf(StandardCharsets.UTF_8));</span><br><span class="line">    System.out.println(&quot;è¾“å…¥æµå†…å®¹2ï¼š&quot; + content2);  //è¿™é‡Œå·²ç»æ²¡æœ‰äº†</span><br><span class="line"></span><br><span class="line">    // 4.å†™æ–‡ä»¶ï¼šç”¨è¾“å‡ºæµ å­—èŠ‚æ•°ç»„-&gt;è¾“å‡ºæµ-&gt;æ–‡ä»¶</span><br><span class="line">    String filePath2 = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hi2.java&quot;;  //è¦å†™çš„æ–‡ä»¶ï¼Œå¯ä»¥æ²¡å»ºç«‹</span><br><span class="line">    File file3 = new File(filePath2);</span><br><span class="line">    FileOutputStream out = new FileOutputStream(filePath2);</span><br><span class="line">    byte[] data4 = &quot;System.out.println(\&quot;hi2\&quot;)&quot;.getBytes();</span><br><span class="line">    out.write(data4);  //å¦‚æœæ–‡ä»¶å­˜åœ¨å†…å®¹ï¼Œåˆ™æ˜¯è¦†ç›–çš„æ–¹å¼</span><br><span class="line">    if(file3.exists()) System.out.println(&quot;å†™å…¥æˆåŠŸ&quot;);</span><br><span class="line">    //å…³é—­æµ</span><br><span class="line">    IOUtils.closeQuietly(in);</span><br><span class="line">    IOUtils.closeQuietly(out);</span><br><span class="line"></span><br><span class="line">    // 5.copyæ–‡ä»¶ï¼šæ–‡ä»¶-è¾“å…¥æµ-å­—èŠ‚æ•°ç»„-è¾“å‡ºæµ-æ–‡ä»¶ï¼Œç”¨IOUtils.copy()ä¸€æ­¥åˆ°ä½</span><br><span class="line">    String filePath3 = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hi3.java&quot;;  //è¦å†™çš„æ–‡ä»¶ï¼Œå¯ä»¥æ²¡å»ºç«‹</span><br><span class="line">    File file4 = new File(filePath3);</span><br><span class="line">    FileInputStream in3 = new FileInputStream(file3);</span><br><span class="line">    FileOutputStream out2 = new FileOutputStream(file4);</span><br><span class="line">    IOUtils.copy(in3, out2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…è·å–æ–‡ä»¶å¤§å°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2() throws IOException &#123;</span><br><span class="line">    // 1.æ–¹æ³•ä¸€ï¼šä½¿ç”¨java io</span><br><span class="line">    String filePath = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    long size = file.length();</span><br><span class="line">    System.out.println(&quot;æ–‡ä»¶å¤§å°ï¼š&quot; + size + &quot;B&quot;);</span><br><span class="line"></span><br><span class="line">    // 2.æ–¹æ³•äºŒï¼šä½¿ç”¨java nio</span><br><span class="line">    Path filePath1 = Paths.get(&quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;);  //ç»å¯¹è·¯å¾„</span><br><span class="line">    FileChannel fileChannel = FileChannel.open(filePath1);</span><br><span class="line">    long size1 = fileChannel.size();</span><br><span class="line">    System.out.println(&quot;æ–‡ä»¶å¤§å°ï¼š&quot; + size1 + &quot;B&quot;);</span><br><span class="line">    Path filePath2 = Paths.get(&quot;src/test/resources/hi.md&quot;);  //é¡¹ç›®ä¸‹è·¯å¾„</span><br><span class="line">    FileChannel fileChannel2 = FileChannel.open(filePath2);</span><br><span class="line">    long size2 = fileChannel2.size();</span><br><span class="line">    System.out.println(&quot;æ–‡ä»¶å¤§å°ï¼š&quot; + size2 + &quot;B&quot;);</span><br><span class="line"></span><br><span class="line">    // 3.æ–¹æ³•ä¸‰ï¼šä½¿ç”¨  apache commons io (åªèƒ½è¯»æ–‡ä»¶å¤¹çš„å¤§å°)</span><br><span class="line">    String dir = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile&quot;;</span><br><span class="line">    File file1 = new File(dir);</span><br><span class="line">    long size3 = FileUtils.sizeOfDirectory(file1);</span><br><span class="line">    System.out.println(&quot;æ–‡ä»¶å¤¹å¤§å°ï¼š&quot; + size3 + &quot;B&quot;);</span><br><span class="line"></span><br><span class="line">    // ç”¨æˆ·å¯è¯»è§†è§’ï¼Ÿ</span><br><span class="line">    String display = FileUtils.byteCountToDisplaySize(size);</span><br><span class="line">    System.out.println(display);  //117 bytes</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Fileæµ"><a href="#Fileæµ" class="headerlink" title="Fileæµ"></a>Fileæµ</h4><p>JAVAä¸­é’ˆå¯¹æ–‡ä»¶çš„è¯»å†™æ“ä½œè®¾ç½®äº†ä¸€ç³»åˆ—çš„æµï¼Œå…¶ä¸­ä¸»è¦æœ‰FileInputStream,FileOutputStream,FileReader,FileWriterå››ç§æœ€ä¸ºå¸¸ç”¨çš„æµ</p>
<p>ä¸€ã€FileInputStreamæµ</p>
<p>è¢«ç§°ä¸ºæ–‡ä»¶å­—èŠ‚è¾“å…¥æµï¼Œæ„æ€æŒ‡å¯¹æ–‡ä»¶æ•°æ®ä»¥å­—èŠ‚çš„å½¢å¼è¿›è¡Œè¯»å–æ“ä½œå¦‚è¯»å–å›¾ç‰‡è§†é¢‘ç­‰</p>
<p>è‹¥Fileç±»å¯¹è±¡çš„æ‰€ä»£è¡¨çš„æ–‡ä»¶ä¸å­˜åœ¨;ä¸æ˜¯æ–‡ä»¶æ˜¯ç›®å½•;æˆ–è€…å…¶ä»–åŸå› ä¸èƒ½æ‰“å¼€çš„è¯ï¼Œåˆ™ä¼šæŠ›å‡ºFileNotFoundExceptionã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public static void main(String[] args)&#123;</span><br><span class="line">  File file=new File(&quot;xxxxxxxx&quot;); </span><br><span class="line">  //æ ¹æ®è·¯å¾„åˆ›å»ºFileç±»å¯¹è±¡--è¿™é‡Œè·¯å¾„å³ä½¿é”™è¯¯ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºåªæ˜¯äº§ç”ŸFileå¯¹è±¡ï¼Œè¿˜å¹¶æœªä¸è®¡ç®—æœºæ–‡ä»¶è¯»å†™æœ‰å…³è”</span><br><span class="line">        </span><br><span class="line">  try&#123;</span><br><span class="line">    FileInputStream fileInputStream=new FileInputStream(file);</span><br><span class="line">    //ä¸æ ¹æ®Fileç±»å¯¹è±¡çš„æ‰€ä»£è¡¨çš„å®é™…æ–‡ä»¶å»ºç«‹é“¾æ¥åˆ›å»ºfileInputStreamå¯¹è±¡</span><br><span class="line">      &#125;catch (FileNotFoundException e)&#123;</span><br><span class="line">          System.out.println(&quot;æ–‡ä»¶ä¸å­˜åœ¨æˆ–è€…æ–‡ä»¶ä¸å¯è¯»æˆ–è€…æ–‡ä»¶æ˜¯ç›®å½•&quot;);</span><br><span class="line">      &#125; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">// ä¹Ÿå¯ä»¥æ ¹æ®æ–‡ä»¶è·¯å¾„åå­—ç¬¦ä¸²è¿›è¡Œå»ºç«‹</span><br><span class="line">FileInputStream fileInputStream=new FileInputStream(filepath);</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/ai_bao_zi/article/details/81097898">https://blog.csdn.net/ai_bao_zi/article/details/81097898</a></p>
<p>IOæµçš„å…³ç³»ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lianshan/p/11911773.html">https://www.cnblogs.com/lianshan/p/11911773.html</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/q306507291/article/details/118825930">https://blog.csdn.net/q306507291/article/details/118825930</a></p>
<h4 id="FileUtils-å·¥å…·ç±»"><a href="#FileUtils-å·¥å…·ç±»" class="headerlink" title="FileUtils å·¥å…·ç±»"></a>FileUtils å·¥å…·ç±»</h4><p>apache çš„commons-ioåŒ…ä¸‹çš„FileUtilsï¼Œå¯¼åŒ…ï¼šcommons-io</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">File file = new File(&quot;E:\\java\\file04\\abcé›ª.jpg&quot;);</span><br><span class="line">//åˆ é™¤æŒ‡å®šæ–‡ä»¶ï¼Œä»ä¸å¼•å‘å¼‚å¸¸ã€‚</span><br><span class="line">FileUtils.deleteQuietly(file);</span><br><span class="line"></span><br><span class="line">//å°†byteæ•°ç»„å†™ä¸ºFile</span><br><span class="line">byte[] bytes = IOUtils.toByteArray(inputStream);</span><br><span class="line">FileUtils.writeByteArrayToFile(new File(path), bytes)</span><br><span class="line"></span><br><span class="line">//åˆ é™¤æ‰æŒ‡å®šç›®å½•çš„æ–‡ä»¶</span><br><span class="line">FileUtils.deleteExistFile(new File(localpath));</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42402854/article/details/83374559">https://blog.csdn.net/qq_42402854/article/details/83374559</a></p>
<h4 id="IOUtilså·¥å…·ç±»"><a href="#IOUtilså·¥å…·ç±»" class="headerlink" title="IOUtilså·¥å…·ç±»"></a>IOUtilså·¥å…·ç±»</h4><p>å®ƒæ˜¯ Apache Commons IO çš„ä¸€éƒ¨åˆ† ã€‚è¯¥ç±»çš„æ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½è¢«ç”¨æ¥å¤„ç†è¾“å…¥ - è¾“å‡ºæµã€‚è¿™äº›æ–¹æ³•åŸºäº InputStream,  OutputStream,  Reader å’Œ Writerå·¥ä½œã€‚</p>
<p>æ‰€æœ‰æˆå‘˜å­—æ®µå’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼Œä¸éœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥ç”¨ç±»åè°ƒç”¨ã€‚</p>
<p>âœ…è¾“å…¥æµè½¬ä¸ºå­—èŠ‚æ•°ç»„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°†è¾“å…¥æµè½¬æ¢æˆå­—ç¬¦æ•°ç»„:</span><br><span class="line">byte[] bytes = IOUtils.toByteArray(inputStream);</span><br></pre></td></tr></table></figure>

<p>âœ…å…³é—­æµ<br>ä¹‹å‰å…³é—­æµï¼Œå¾€å¾€åœ¨finallyä¸­ï¼Œå› ä¸ºä¼šæŠ›å‡ºIOExceptionï¼Œæ‰€ä»¥finallyä¸­éœ€è¦try catchï¼Œå¹¶ä¸”closeä¹‹å‰éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºnullã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">finally &#123;</span><br><span class="line">  if (in != null) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      in.close();</span><br><span class="line">      &#125; catch (IOException e) &#123;</span><br><span class="line">          LOGGER.warn(&quot;Fail to close stream : &quot;, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ IOUtils.closeQuietly æ¥ç²¾ç®€ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">byte[] data = new byte[1024];</span><br><span class="line">InputStream in = null;</span><br><span class="line">OutputStream out = null;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">      in = new FileInputStream(&quot;foo.txt&quot;);</span><br><span class="line">      in.read(data);</span><br><span class="line"></span><br><span class="line">      out = new FileOutputStream(&quot;foo.txt&quot;);</span><br><span class="line">      data = &quot;Hello, World&quot;.getBytes();</span><br><span class="line">      out.write(data);</span><br><span class="line"></span><br><span class="line">      IOUtils.copy(in, out);</span><br><span class="line"></span><br><span class="line">      in.close(); //close errors are handled</span><br><span class="line">      out.close();</span><br><span class="line">&#125; catch (IOException e) &#123; </span><br><span class="line">      // error handling</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">      IOUtils.closeQuietly(in);</span><br><span class="line">      IOUtils.closeQuietly(out);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/sulia1234567890/article/details/120569718">https://blog.csdn.net/sulia1234567890/article/details/120569718</a></p>
<p>âœ…å†™æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() throws IOException &#123;</span><br><span class="line">    String filePath = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    OutputStream out = new FileOutputStream(file, true);</span><br><span class="line">    IOUtils.write(&quot;hello&quot;, out);</span><br><span class="line">    IOUtils.write(&quot;\n&quot;, out);</span><br><span class="line">    IOUtils.write(&quot;hi&quot;, out);</span><br><span class="line">    //ä¹Ÿå¯ä»¥ä¼ å­—èŠ‚æ•°ç»„ã€å­—ç¬¦æ•°ç»„</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âš ï¸new FileOutputStream(â€œb.txtâ€,true);</p>
<p>é»˜è®¤ç¬¬äºŒä¸ªå‚æ•°æ˜¯falseï¼Œè¡¨ç¤ºä¸è¿½åŠ ï¼Œæ¯æ¬¡newå¯¹è±¡éƒ½ä¼šæ¸…ç©ºä¹‹å‰çš„å†…å®¹åˆ›å»ºæ–°çš„å†…å®¹ï¼Œtureè¡¨ç¤ºåœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šè¿½åŠ å†…å®¹</p>
<h4 id="MultipartFile"><a href="#MultipartFile" class="headerlink" title="MultipartFile"></a>MultipartFile</h4><p>éœ€è¦ä¾èµ–ï¼šspring-web</p>
<p>é¦–å…ˆï¼Œâ€œæµâ€æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¾“å…¥è¾“å‡ºè®¾å¤‡çš„ä¸€ç§æŠ½è±¡ç†è§£ï¼Œåœ¨javaä¸­ï¼Œå¯¹æ•°æ®çš„è¾“å…¥è¾“å‡ºæ“ä½œéƒ½æ˜¯ä»¥â€œæµâ€çš„æ–¹å¼è¿›è¡Œçš„ã€‚â€œæµâ€å…·æœ‰æ–¹å‘æ€§ï¼Œè¾“å…¥æµã€è¾“å‡ºæµæ˜¯ç›¸å¯¹çš„ã€‚å½“ç¨‹åºéœ€è¦ä»æ•°æ®æºä¸­è¯»å…¥æ•°æ®çš„æ—¶å€™å°±ä¼šå¼€å¯ä¸€ä¸ªè¾“å…¥æµï¼Œç›¸åï¼Œå†™å‡ºæ•°æ®åˆ°æŸä¸ªæ•°æ®æºç›®çš„åœ°çš„æ—¶å€™ä¹Ÿä¼šå¼€å¯ä¸€ä¸ªè¾“å‡ºæµã€‚</p>
<p>MultipartFileæ˜¯SpringMVCæä¾›ç®€åŒ–ä¸Šä¼ æ“ä½œçš„å·¥å…·ç±»ã€‚å®ç°æ–‡ä»¶çš„å¿«é€Ÿä¸Šä¼ ï¼Œä¸éœ€è¦å…ˆå°†Fileè½¬æ¢æˆoutputæµ å†ä¼ è¾“è¿‡å» æ¥æ”¶ç«¯æ¥æ”¶æµå†ç”Ÿæˆæ–‡ä»¶ã€‚</p>
<p>åœ¨ä¸ä½¿ç”¨æ¡†æ¶ä¹‹å‰ï¼Œéƒ½æ˜¯ä½¿ç”¨åŸç”Ÿçš„HttpServletRequestæ¥æ¥æ”¶ä¸Šä¼ çš„æ•°æ®ï¼Œæ–‡ä»¶æ˜¯ä»¥äºŒè¿›åˆ¶æµä¼ é€’åˆ°åç«¯çš„ï¼Œç„¶åéœ€è¦æˆ‘ä»¬è‡ªå·±è½¬æ¢ä¸ºFileç±»ã€‚ä½¿ç”¨äº†MultipartFileå·¥å…·ç±»ä¹‹åï¼Œæˆ‘ä»¬å¯¹æ–‡ä»¶ä¸Šä¼ çš„æ“ä½œå°±ç®€ä¾¿è®¸å¤šäº†ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45393094/article/details/112056436">https://blog.csdn.net/weixin_45393094/article/details/112056436</a></p>
<p>âœ…å†…éƒ¨æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public interface MultipartFile extends InputStreamSource &#123;</span><br><span class="line">    //getName() è¿”å›å‚æ•°çš„åç§°</span><br><span class="line">    String getName();</span><br><span class="line">    //è·å–æºæ–‡ä»¶çš„æ˜µç§°</span><br><span class="line">    @Nullable</span><br><span class="line">    String getOriginalFilename();</span><br><span class="line">    //getContentType() è¿”å›æ–‡ä»¶çš„å†…å®¹ç±»å‹</span><br><span class="line">    @Nullable</span><br><span class="line">    String getContentType();</span><br><span class="line">    //isEmpty() åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œæˆ–è€…ä¸Šä¼ çš„æ–‡ä»¶æ˜¯å¦æœ‰å†…å®¹</span><br><span class="line">    boolean isEmpty();</span><br><span class="line">    //getSize() è¿”å›æ–‡ä»¶å¤§å° ä»¥å­—èŠ‚ä¸ºå•ä½</span><br><span class="line">    long getSize();</span><br><span class="line">    //getBytes() å°†æ–‡ä»¶å†…å®¹è½¬åŒ–æˆä¸€ä¸ªbyte[] è¿”å›</span><br><span class="line">    byte[] getBytes() throws IOException;</span><br><span class="line">    //getInputStream() è¿”å›InputStreamè¯»å–æ–‡ä»¶çš„å†…å®¹</span><br><span class="line">    InputStream getInputStream() throws IOException;</span><br><span class="line"></span><br><span class="line">    default Resource getResource() &#123;</span><br><span class="line">        return new MultipartFileResource(this);</span><br><span class="line">    &#125;</span><br><span class="line">    //transferTo(File dest) ç”¨æ¥æŠŠ MultipartFile è½¬æ¢æ¢æˆ File</span><br><span class="line">    void transferTo(File var1) throws IOException, IllegalStateException;</span><br><span class="line"></span><br><span class="line">    default void transferTo(Path dest) throws IOException, IllegalStateException &#123;</span><br><span class="line">        FileCopyUtils.copy(this.getInputStream(), Files.newOutputStream(dest));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…MockMultipartFile</p>
<p>å¯ä»¥ç”¨MockMultipartFileåˆ›å»ºMultipartFileã€‚éœ€è¦å¯¼å…¥spring-test.jar</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MockMultipartFile(String name, @Nullable String originalFilename, @Nullable String contentType, InputStream contentStream)</span><br><span class="line">ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¼ è¾“åçš„æ–‡ä»¶å </span><br><span class="line">ç¬¬äºŒä¸ªï¼šæ—§æ–‡ä»¶åå­—ï¼ˆå¯ä¸ºç©ºï¼‰ </span><br><span class="line">ç¬¬ä¸‰ï¼šç±»å‹</span><br><span class="line">ç¬¬å››ï¼šè¾“å…¥æµ</span><br></pre></td></tr></table></figure>

<p>âœ…MultipartFileä¸Fileçš„ç›¸äº’è½¬æ¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3() throws IOException &#123;</span><br><span class="line">    // 1.Fileè½¬ä¸ºMultipartFileï¼šfile-InputStream-MultipartFile</span><br><span class="line">    String filePath = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    System.out.println(file.getName());  //hello.java</span><br><span class="line">    System.out.println(FilenameUtils.getExtension(file.getName()));  //åç¼€java</span><br><span class="line">    FileInputStream in = new FileInputStream(file);</span><br><span class="line">    MultipartFile mf = new MockMultipartFile(file.getName(), file.getName(), &quot;text/plain&quot;, in);</span><br><span class="line">    System.out.println(mf.getName()); //hello.java</span><br><span class="line">    System.out.println(mf.getOriginalFilename());  //hello.java</span><br><span class="line"></span><br><span class="line">    // 2.MultipartFileè½¬ä¸ºFile</span><br><span class="line">    try &#123;</span><br><span class="line">        String uuid = UUID.randomUUID().toString();</span><br><span class="line">        //å¾—åˆ°æ–‡ä»¶åç¼€</span><br><span class="line">        String originalName = mf.getOriginalFilename();</span><br><span class="line">        String ext = &quot;.&quot; + FilenameUtils.getExtension(originalName);</span><br><span class="line">        String fileName = uuid + ext;</span><br><span class="line">        File targetFile = new File(&quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/&quot;, fileName);</span><br><span class="line">        //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–‡ä»¶å¤¹  ç¬¬äºŒä¸ªå‚æ•°ï¼šæ–‡ä»¶å</span><br><span class="line">        // æ–¹æ³•ä¸€ï¼šMultipartFile - å­—èŠ‚æ•°ç»„ - Fileæœ¬åœ°</span><br><span class="line">        FileUtils.writeByteArrayToFile(targetFile, mf.getBytes());</span><br><span class="line">        // æ–¹æ³•äºŒï¼šMultipartFile - å­—èŠ‚æ•°ç»„ - è¾“å‡ºæµ - Fileæœ¬åœ°</span><br><span class="line">        byte[] data = mf.getBytes();</span><br><span class="line">        FileOutputStream out = new FileOutputStream(targetFile);</span><br><span class="line">        out.write(data);</span><br><span class="line">        IOUtils.closeQuietly(out);</span><br><span class="line">        // æ–¹æ³•ä¸‰ï¼šç›´æ¥ç”¨MultipartFileå†…éƒ¨æ–¹æ³•</span><br><span class="line">        mf.transferTo(targetFile);</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        System.out.println(&quot;å¤±è´¥&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="lambdaè¡¨è¾¾å¼"><a href="#lambdaè¡¨è¾¾å¼" class="headerlink" title="lambdaè¡¨è¾¾å¼"></a>lambdaè¡¨è¾¾å¼</h3><p>çœ‹ã€ŠjavaåŸºç¡€ã€‹<br>é’ˆå¯¹æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£å®ç°ï¼Œä»¥ç®€æ´çš„è¡¨è¾¾å¼å½¢å¼å®ç°æ¥å£åŠŸèƒ½æ¥ä½œä¸ºæ–¹æ³•å‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">set.stream().map(i-&gt;String.valueOf(i)).</span><br><span class="line">æ‹¬å·å†…çš„iï¼Œè¡¨ç¤ºæµå¤„ç†ä¸­çš„å…ƒç´ ï¼Œä¹Ÿæ˜¯lambdaè¡¨è¾¾å¼çš„è¾“å…¥</span><br><span class="line">åªæœ‰ä¸€å¥è¯­å¥ï¼Œçœå»äº†&#123;&#125;ï¼Œçœå»äº†return</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨ç°æœ‰çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä¸Šé¢çš„ï¼Œå¯ä»¥å˜æˆlambdaè¡¨è¾¾å¼çš„å¼•ç”¨å½¢å¼::</span><br><span class="line">.map(String::valueOf).</span><br><span class="line"></span><br><span class="line">ä¸Šé¢çš„æ–¹æ³•ä¾‹å¦‚map()ï¼Œå†…éƒ¨çš„ä¼ å‚æ˜¯åªæœ‰ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œ</span><br><span class="line">æœ‰çš„æ–¹æ³•ç©¿å‚ï¼Œé™¤äº†ä¸€ä¸ªå‡½æ•°å¼æ¥å£è¿˜æœ‰å…¶ä»–ï¼Œæ‰€ä»¥ä¼šæœ‰å…¶ä»–å‚æ•°ã€‚</span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">æ–¹æ³•ï¼šshowSum(int x, int y, Calculate cu)</span><br><span class="line">ä½¿ç”¨ï¼šshowSum(10, 20, (x,y)-&gt;x+y);</span><br></pre></td></tr></table></figure>



<h3 id="spring-expression-Spelè¡¨è¾¾å¼-javaè¯­è¨€è§£æ"><a href="#spring-expression-Spelè¡¨è¾¾å¼-javaè¯­è¨€è§£æ" class="headerlink" title="spring-expression Spelè¡¨è¾¾å¼ javaè¯­è¨€è§£æ"></a>spring-expression Spelè¡¨è¾¾å¼ javaè¯­è¨€è§£æ</h3><p>ExpressionParseæ¥å£æ˜¯springframeworkåŒ…ä¸‹çš„ã€‚<br>å¯¹è¡¨è¾¾å¼è¿›è¡Œè§£æï¼Œé€šè¿‡å­—ç¬¦ä¸²ä¼ å…¥è§£æå™¨ï¼Œè¿›è¡Œè§£æã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    //å°†ä¸€æ•´ä¸ªè¯­å¥ç›´æ¥å®šä¹‰äº†å­—ç¬¦ä¸² ,å…¶ä¸­å¯¹å­—ç¬¦ä¸²çš„å¼€å§‹ç´¢å¼•ä¸ç»“æŸç´¢å¼•ä½¿ç”¨æ›¿ä»£å˜é‡</span><br><span class="line">    //å˜é‡å‰éœ€è¦åŠ #</span><br><span class="line">    String str = &quot;#var + 2&quot;;</span><br><span class="line">    //1å®šä¹‰ä¸€ä¸ªä¸“å±çš„è¡¨è¾¾å¼è§£æå·¥å…·</span><br><span class="line">    ExpressionParser parser = new SpelExpressionParser() ;</span><br><span class="line">    //2å®šä¹‰ä¸€ä¸ªè¡¨è¾¾å¼å¤„ç†ç±»</span><br><span class="line">    Expression exp = parser.parseExpression(str);</span><br><span class="line">    //3è¿›è¡Œæœ€ç»ˆçš„è¡¨è¾¾å¼è®¡ç®—ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡ç”¨æ¥ä¼ å‚</span><br><span class="line">    EvaluationContext context = new StandardEvaluationContext() ;</span><br><span class="line">    context.setVariable(&quot;var&quot;, 5);</span><br><span class="line">    //4é€šè¿‡è¡¨è¾¾å¼è¿›è¡Œç»“æœè®¡ç®—</span><br><span class="line">    System.out.println(exp.getValue(context, Integer.class));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="AtomicInteger"><a href="#AtomicInteger" class="headerlink" title="AtomicInteger"></a>AtomicInteger</h3><p>AtomicIntegerç±»æ˜¯ç³»ç»Ÿåº•å±‚ä¿æŠ¤çš„intç±»å‹ï¼Œé€šè¿‡æä¾›æ‰§è¡Œæ–¹æ³•çš„æ§åˆ¶è¿›è¡Œå€¼çš„åŸå­æ“ä½œã€‚AtomicIntegerå®ƒä¸èƒ½å½“ä½œIntegeræ¥ä½¿ç”¨ã€‚</p>
<p>ä»JAVA 1.5å¼€å§‹ï¼ŒAtomicInteger å±äºjava.util.concurrent.atomic åŒ…ä¸‹çš„ä¸€ä¸ªç±»ã€‚</p>
<p>AtomicIntegeré€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°å¯ä»¥ç›´æ¥åˆ›å»ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//åˆå§‹å€¼æ˜¯ 0</span><br><span class="line">AtomicInteger atomicInteger = new AtomicInteger(); </span><br><span class="line"> </span><br><span class="line">//åˆå§‹å€¼æ˜¯ 100</span><br><span class="line">AtomicInteger atomicInteger = new AtomicInteger(100);</span><br><span class="line"> </span><br><span class="line">int currentValue = atomicInteger.get();         //100</span><br><span class="line"> </span><br><span class="line">atomicInteger.set(1234);                        //å½“å‰å€¼1234</span><br></pre></td></tr></table></figure>

<p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ<br>1ã€ä½œä¸ºå¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨çš„åŸå­è®¡æ•°å™¨ã€‚<br>2ã€åœ¨æ¯”è¾ƒå’Œäº¤æ¢æ“ä½œä¸­å®ç°éé˜»å¡ç®—æ³•ã€‚</p>
<p>åŸå­è®¡æ•°å™¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ä¸€äº›ä»¥åŸå­æ–¹å¼æ‰§è¡ŒåŠ æ³•å’Œå‡æ³•æ“ä½œçš„æ–¹æ³•:</span><br><span class="line">addAndGet()- ä»¥åŸå­æ–¹å¼å°†ç»™å®šå€¼æ·»åŠ åˆ°å½“å‰å€¼ï¼Œå¹¶åœ¨æ·»åŠ åè¿”å›æ–°å€¼ã€‚</span><br><span class="line">getAndAdd() - ä»¥åŸå­æ–¹å¼å°†ç»™å®šå€¼æ·»åŠ åˆ°å½“å‰å€¼å¹¶è¿”å›æ—§å€¼ã€‚</span><br><span class="line">incrementAndGet()- ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼é€’å¢1å¹¶åœ¨é€’å¢åè¿”å›æ–°å€¼ã€‚å®ƒç›¸å½“äºi ++æ“ä½œã€‚</span><br><span class="line">getAndIncrement() - ä»¥åŸå­æ–¹å¼é€’å¢å½“å‰å€¼å¹¶è¿”å›æ—§å€¼ã€‚å®ƒç›¸å½“äº++ iæ“ä½œã€‚</span><br><span class="line">decrementAndGet()- åŸå­åœ°å°†å½“å‰å€¼å‡1å¹¶åœ¨å‡é‡åè¿”å›æ–°å€¼ã€‚å®ƒç­‰åŒäºi-æ“ä½œã€‚</span><br><span class="line">getAndDecrement() - ä»¥åŸå­æ–¹å¼é€’å‡å½“å‰å€¼å¹¶è¿”å›æ—§å€¼ã€‚å®ƒç›¸å½“äº-iæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">public class Main&#123;</span><br><span class="line">    public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        AtomicInteger atomicInteger = new AtomicInteger(100);</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.addAndGet(2));         //102</span><br><span class="line">        System.out.println(atomicInteger);                      //102</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.getAndAdd(2));         //102</span><br><span class="line">        System.out.println(atomicInteger);                      //104</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.incrementAndGet());    //105  </span><br><span class="line">        System.out.println(atomicInteger);                      //105  </span><br><span class="line">                 </span><br><span class="line">        System.out.println(atomicInteger.getAndIncrement());    //105</span><br><span class="line">        System.out.println(atomicInteger);                      //106</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.decrementAndGet());    //105</span><br><span class="line">        System.out.println(atomicInteger);                      //105</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.getAndDecrement());    //105</span><br><span class="line">        System.out.println(atomicInteger);                      //104</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”è¾ƒå’Œäº¤æ¢ï¼š<br>1ã€æ¯”è¾ƒå’Œäº¤æ¢æ“ä½œå°†å†…å­˜ä½ç½®çš„å†…å®¹ä¸ç»™å®šå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ä¸”åªæœ‰å®ƒä»¬ç›¸åŒæ—¶ï¼Œæ‰å°†è¯¥å†…å­˜ä½ç½®çš„å†…å®¹ä¿®æ”¹ä¸ºç»™å®šçš„æ–°å€¼ã€‚è¿™æ˜¯ä½œä¸ºå•ä¸ªåŸå­æ“ä½œå®Œæˆçš„ã€‚<br>2ã€åŸå­æ€§ä¿è¯äº†æ–°å€¼æ˜¯æ ¹æ®æœ€æ–°ä¿¡æ¯è®¡ç®—å‡ºæ¥çš„; å¦‚æœåœ¨æ­¤æœŸé—´è¯¥å€¼å·²è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ›´æ–°ï¼Œåˆ™å†™å…¥å°†å¤±è´¥ã€‚<br><code>boolean compareAndSet(int expect, int update)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)&#123;</span><br><span class="line">        //1ã€é»˜è®¤åˆå§‹å€¼</span><br><span class="line">        AtomicInteger atomicInteger = new AtomicInteger(100);</span><br><span class="line">        //2ã€é»˜è®¤åˆå§‹å€¼å’Œç»™å®šå€¼ï¼Œéƒ½æ˜¯100ï¼Œæ‰€ä»¥ä¼šæ›´æ”¹æˆåŠŸ</span><br><span class="line">        boolean isSuccess = atomicInteger.compareAndSet(100,110);   //current value 100</span><br><span class="line">        //3ã€è¿”å›true</span><br><span class="line">        System.out.println(isSuccess);      //true</span><br><span class="line">        System.out.println(atomicInteger);  //110</span><br><span class="line">        //4ã€é»˜è®¤åˆå§‹å€¼æ˜¯110,ç»™å®šå€¼æ˜¯100ï¼Œæ‰€ä»¥ä¼šæ›´æ”¹å¤±è´¥</span><br><span class="line">        isSuccess = atomicInteger.compareAndSet(100,120);       //current value 110</span><br><span class="line">        //5ã€è¿”å›false</span><br><span class="line">        System.out.println(isSuccess);      //false</span><br><span class="line">        System.out.println(atomicInteger);  //110</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/073096a729f6">https://www.jianshu.com/p/073096a729f6</a></p>
<h3 id="getClass"><a href="#getClass" class="headerlink" title="getClass()"></a>getClass()</h3><p>è¿”å›Classç±»å‹çš„å¯¹è±¡ã€‚åªæ˜¯getClass()ï¼Œè¿”å›å½“å‰è¿è¡Œæ—¶ç±»ã€‚object.getClass()å‰é¢å¸¦å¯¹è±¡.getClass()è¿”å›å¯¹è±¡çš„ç±»ã€‚</p>
<p>Classå¸¸ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1() throws IllegalAccessException, InstantiationException, IOException &#123;</span><br><span class="line">  Class cl = getClass();</span><br><span class="line">  System.out.println(cl); //class org.example.javaer.ClassTest</span><br><span class="line">  String name = cl.getName(); // org.example.javaer.ClassTest</span><br><span class="line">  System.out.println(name);</span><br><span class="line">  Object classTest = cl.newInstance(); //åˆ›å»ºå®ä¾‹</span><br><span class="line">  String packName = cl.getPackage().getName();</span><br><span class="line">  System.out.println(packName); //org.example.javaer</span><br><span class="line">  ClassLoader classLoader = cl.getClassLoader(); //è·å–ç±»åŠ è½½å™¨</span><br><span class="line">  System.out.println(classLoader);</span><br><span class="line">  //getResourceAsStreamä»é¡¹ç›®ä¸‹æ–‡ä»¶ä¸­è·å–è¾“å…¥æµ</span><br><span class="line">  InputStream in = cl.getResourceAsStream(&quot;/hi.md&quot;); //åŠ &quot;/&quot;ï¼Œ/è¡¨ç¤ºsrc/test/resourcesä¸‹ï¼ˆClassPathæ ¹ç›®å½•ï¼‰</span><br><span class="line">  System.out.println(IOUtils.toString(in, String.valueOf(StandardCharsets.UTF_8)));</span><br><span class="line">  InputStream in1 = cl.getResourceAsStream(&quot;src/test/resources/hi.md&quot;); //ä¸è¡Œï¼ŒNPE</span><br><span class="line">  System.out.println(IOUtils.toString(in1, String.valueOf(StandardCharsets.UTF_8)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…è·å–å„ç§è·¯å¾„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2() throws IOException &#123;</span><br><span class="line">    // 1.è·å–ClassPathæ ¹è·¯å¾„ï¼ˆç±»åŠ è½½æ ¹è·¯å¾„ï¼‰ï¼Œåˆ°src/test/resourcesï¼Œä¸¤ç§æ–¹æ³•</span><br><span class="line">    String path1 = getClass().getResource(&quot;/&quot;).toString(); //file:/Users/liuxuan/MyProject/JavaProject/java/web/target/test-classes/</span><br><span class="line">    System.out.println(&quot;ClassPathæ ¹è·¯å¾„ï¼š&quot; + path1);</span><br><span class="line">    System.out.println(&quot;é¡¹ç›®è·¯å¾„ï¼š&quot; + getClass().getClassLoader().getResource(&quot;&quot;)); //å’Œä¸Šé¢ä¸€æ ·</span><br><span class="line"></span><br><span class="line">    // 2.è·å–ç»å¯¹è·¯å¾„</span><br><span class="line">    String path2 = getClass().getResource(&quot;&quot;).toString(); //file:/Users/liuxuan/MyProject/JavaProject/java/web/target/classes/org/example/javaer/</span><br><span class="line">    System.out.println(&quot;ç»å¯¹è·¯å¾„ï¼š&quot; + path2);</span><br><span class="line"></span><br><span class="line">    // 3.è·å–é¡¹ç›®è·¯å¾„ ä¸¤ç§æ–¹æ³•</span><br><span class="line">    File dir = new File(&quot;&quot;); //å‚æ•°ä¸ºç©º</span><br><span class="line">    String path3 = dir.getCanonicalPath(); ///Users/liuxuan/MyProject/JavaProject/java/web</span><br><span class="line">    System.out.println(&quot;é¡¹ç›®è·¯å¾„ï¼š&quot; + path3);</span><br><span class="line">    String path4 = System.getProperty(&quot;user.dir&quot;); ///Users/liuxuan/MyProject/JavaProject/java/web</span><br><span class="line">    System.out.println(&quot;é¡¹ç›®è·¯å¾„ï¼š&quot; + path4);</span><br><span class="line">    String allPath = System.getProperty(&quot;java.class.path&quot;); //æ‰€æœ‰jaråŒ…çš„è·¯å¾„</span><br><span class="line">    System.out.println(&quot;javaç±»è·¯å¾„ï¼š&quot; + allPath);</span><br><span class="line"></span><br><span class="line">    // å†çœ‹çœ‹</span><br><span class="line">    String path5 = getClass().getResource(&quot;/&quot;).getPath(); //è¿™æ ·è·å¾—çš„å‰é¢æ²¡æœ‰file</span><br><span class="line">    System.out.println(&quot;ClassPathæ ¹è·¯å¾„ï¼š&quot; + path5);</span><br><span class="line">    URL url = getClass().getClassLoader().getResource(&quot;&quot;); //file:/Users/liuxuan/MyProject/JavaProject/java/web/target/test-classes/</span><br><span class="line">    System.out.println(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15057811/4080631">https://blog.51cto.com/u_15057811/4080631</a></p>
<p>âœ…System.getProperty()æ–¹æ³•<br>è·å–å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬ç­‰ä¸€äº›ä¿¡æ¯ã€‚<br>å†…éƒ¨keyï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">String path4 = System.getProperty(&quot;user.dir&quot;); ///Users/liuxuan/MyProject/JavaProject/java/web</span><br><span class="line">System.out.println(&quot;é¡¹ç›®è·¯å¾„ï¼š&quot; + path4);</span><br><span class="line">String allPath = System.getProperty(&quot;java.class.path&quot;);</span><br><span class="line">System.out.println(&quot;javaç±»è·¯å¾„ï¼š&quot; + allPath);</span><br><span class="line"></span><br><span class="line">Java.version</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒç‰ˆæœ¬</span><br><span class="line">java.vendor</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒä¾›åº”å•†</span><br><span class="line">java.vendor.url</span><br><span class="line">Java ä¾›åº”å•†çš„ URL</span><br><span class="line">java.home</span><br><span class="line">Java å®‰è£…ç›®å½•</span><br><span class="line">java.vm.specification.version</span><br><span class="line">Java è™šæ‹Ÿæœºè§„èŒƒç‰ˆæœ¬</span><br><span class="line">java.vm.specification.vendor</span><br><span class="line">Java è™šæ‹Ÿæœºè§„èŒƒä¾›åº”å•†</span><br><span class="line">java.vm.specification.name</span><br><span class="line">Java è™šæ‹Ÿæœºè§„èŒƒåç§°</span><br><span class="line">java.vm.version</span><br><span class="line">Java è™šæ‹Ÿæœºå®ç°ç‰ˆæœ¬</span><br><span class="line">java.vm.vendor</span><br><span class="line">Java è™šæ‹Ÿæœºå®ç°ä¾›åº”å•†</span><br><span class="line">java.vm.name</span><br><span class="line">Java è™šæ‹Ÿæœºå®ç°åç§°</span><br><span class="line">java.specification.version</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒç‰ˆæœ¬</span><br><span class="line">java.specification.vendor</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒä¾›åº”å•†</span><br><span class="line">java.specification.name</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒåç§°</span><br><span class="line">java.class.version</span><br><span class="line">Java ç±»æ ¼å¼ç‰ˆæœ¬å·</span><br><span class="line">java.class.path</span><br><span class="line">Java ç±»è·¯å¾„</span><br><span class="line">java.library.path</span><br><span class="line">åŠ è½½åº“æ—¶æœç´¢çš„è·¯å¾„åˆ—è¡¨</span><br><span class="line">java.io.tmpdir</span><br><span class="line">é»˜è®¤çš„ä¸´æ—¶æ–‡ä»¶è·¯å¾„</span><br><span class="line">java.compiler</span><br><span class="line">è¦ä½¿ç”¨çš„ JIT ç¼–è¯‘å™¨çš„åç§°</span><br><span class="line">java.ext.dirs</span><br><span class="line">ä¸€ä¸ªæˆ–å¤šä¸ªæ‰©å±•ç›®å½•çš„è·¯å¾„</span><br><span class="line">os.name</span><br><span class="line">æ“ä½œç³»ç»Ÿçš„åç§°</span><br><span class="line">os.arch</span><br><span class="line">æ“ä½œç³»ç»Ÿçš„æ¶æ„</span><br><span class="line">os.version</span><br><span class="line">æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬</span><br><span class="line">file.separator</span><br><span class="line">æ–‡ä»¶åˆ†éš”ç¬¦ï¼ˆåœ¨ UNIX ç³»ç»Ÿä¸­æ˜¯â€œ/â€ï¼‰</span><br><span class="line">path.separator</span><br><span class="line">è·¯å¾„åˆ†éš”ç¬¦ï¼ˆåœ¨ UNIX ç³»ç»Ÿä¸­æ˜¯â€œ:â€ï¼‰</span><br><span class="line">line.separator</span><br><span class="line">è¡Œåˆ†éš”ç¬¦ï¼ˆåœ¨ UNIX ç³»ç»Ÿä¸­æ˜¯â€œ/nâ€ï¼‰</span><br><span class="line">user.name</span><br><span class="line">ç”¨æˆ·çš„è´¦æˆ·åç§°</span><br><span class="line">user.home</span><br><span class="line">ç”¨æˆ·çš„ä¸»ç›®å½•</span><br><span class="line">user.dir</span><br><span class="line">ç”¨æˆ·çš„å½“å‰å·¥ä½œç›®å½•</span><br></pre></td></tr></table></figure>

<p>âœ…ç±»åŠ è½½å™¨</p>
<p>ç”¨æ¥æŠŠç±»è£…è½½è¿›å†…å­˜çš„ã€‚</p>
<p>éå¸¸ä¸é”™çš„è¯¦è§£ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_68064743/article/details/123957150">https://blog.csdn.net/m0_68064743/article/details/123957150</a></p>
<h3 id="å¯¹è±¡æ‹·è´"><a href="#å¯¹è±¡æ‹·è´" class="headerlink" title="å¯¹è±¡æ‹·è´"></a>å¯¹è±¡æ‹·è´</h3><p>é¦–å…ˆï¼Œæµ…æ‹·è´å’Œæ·±æ‹·è´éƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ªå·²æœ‰å¯¹è±¡çš„æ“ä½œã€‚</p>
<p>åœ¨ Java ä¸­ï¼Œé™¤äº†åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå…ƒç±»å‹ï¼‰ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ ç±»çš„å®ä¾‹å¯¹è±¡ï¼ˆå¼•ç”¨æ•°æ®ç±»å‹ï¼‰ã€‚è€Œä¸€èˆ¬ä½¿ç”¨ ã€ = ã€å·åšèµ‹å€¼æ“ä½œçš„æ—¶å€™ã€‚å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®é™…ä¸Šæ˜¯æ‹·è´çš„å®ƒçš„å€¼ï¼Œä½†æ˜¯å¯¹äºå¯¹è±¡è€Œè¨€ï¼Œå…¶å®èµ‹å€¼çš„åªæ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå°†åŸå¯¹è±¡çš„å¼•ç”¨ä¼ é€’è¿‡å»ï¼Œä»–ä»¬å®é™…ä¸Šè¿˜æ˜¯æŒ‡å‘çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3() &#123;</span><br><span class="line">    // 1.ç›´æ¥</span><br><span class="line">    Student stu1 = new Student();</span><br><span class="line">    stu1.setNumber(12345);</span><br><span class="line">    Student stu2 = stu1;</span><br><span class="line">    stu2.setNumber(54321);</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ1:&quot; + stu1.getNumber());</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ2:&quot; + stu2.getNumber());  //æ”¹2ï¼Œ1è·Ÿç€ä¹Ÿæ”¹äº†</span><br><span class="line">    //åŸå› å‡ºåœ¨(stu2 = stu1) è¿™ä¸€å¥ã€‚</span><br><span class="line">    //è¯¥è¯­å¥çš„ä½œç”¨æ˜¯å°†stu1çš„å¼•ç”¨èµ‹å€¼ç»™stu2ã€‚å…¶å®ï¼Œstu1å’Œstu2åœ¨å †å†…å­˜ä¸­æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span><br><span class="line"></span><br><span class="line">    // 2.æ–°å»ºä¸€ä¸ªï¼Œå†set</span><br><span class="line">    Student stu3 = new Student();</span><br><span class="line">    stu3.setNumber(stu1.getNumber());</span><br><span class="line">    stu3.setNumber(111);</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ1:&quot; + stu1.getNumber());</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ3:&quot; + stu3.getNumber());  //æ”¹2ï¼Œ1ä¸ä¼šè·Ÿç€ä¹Ÿæ”¹äº†</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œæµ…æ‹·è´å’Œæ·±æ‹·è´å°±æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¹‹ä¸Šåšçš„åŒºåˆ†ï¼Œå¦‚æœåœ¨æ‹·è´è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œåªå¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œäº†æ‹·è´ï¼Œè€Œå¯¹å¼•ç”¨æ•°æ®ç±»å‹åªæ˜¯è¿›è¡Œäº†å¼•ç”¨çš„ä¼ é€’ï¼Œè€Œæ²¡æœ‰çœŸå®çš„åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œåˆ™è®¤ä¸ºæ˜¯æµ…æ‹·è´ã€‚åä¹‹ï¼Œåœ¨å¯¹å¼•ç”¨æ•°æ®ç±»å‹è¿›è¡Œæ‹·è´çš„æ—¶å€™ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶ä¸”å¤åˆ¶å…¶å†…çš„æˆå‘˜å˜é‡ï¼Œåˆ™è®¤ä¸ºæ˜¯æ·±æ‹·è´ã€‚</p>
<p>æ‰€è°“çš„æµ…æ‹·è´å’Œæ·±æ‹·è´ï¼Œåªæ˜¯åœ¨æ‹·è´å¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹ ç±»çš„å®ä¾‹å¯¹è±¡ è¿™ç§å¼•ç”¨æ•°æ®ç±»å‹çš„ä¸åŒæ“ä½œè€Œå·²ã€‚</p>
<p>æ€»ç»“æ¥è¯´ï¼š</p>
<p>1ã€æµ…æ‹·è´ï¼šå¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå€¼ä¼ é€’ï¼Œå¯¹å¼•ç”¨æ•°æ®ç±»å‹è¿›è¡Œå¼•ç”¨ä¼ é€’èˆ¬çš„æ‹·è´ï¼Œæ­¤ä¸ºæµ…æ‹·è´ã€‚</p>
<p>2ã€æ·±æ‹·è´ï¼šå¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå€¼ä¼ é€’ï¼Œå¯¹å¼•ç”¨æ•°æ®ç±»å‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶å¤åˆ¶å…¶å†…å®¹ï¼Œæ­¤ä¸ºæ·±æ‹·è´ã€‚</p>
<p>Object ä¸Šçš„ clone() æ–¹æ³•<br>åœ¨ Java ä¸­ï¼Œæ‰€æœ‰çš„ Class éƒ½ç»§æ‰¿è‡ª Object ï¼Œè€Œåœ¨ Object ä¸Šï¼Œå­˜åœ¨ä¸€ä¸ª clone() æ–¹æ³•ï¼Œå®ƒè¢«å£°æ˜ä¸ºäº† protected ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…¶å­ç±»ä¸­ï¼Œä½¿ç”¨å®ƒã€‚<br>è€Œæ— è®ºæ˜¯æµ…æ‹·è´è¿˜æ˜¯æ·±æ‹·è´ï¼Œéƒ½éœ€è¦å®ç° clone() æ–¹æ³•ï¼Œæ¥å®Œæˆæ“ä½œã€‚</p>
<p>è¢«å¤åˆ¶çš„ç±»éœ€è¦å®ç°Clonenableæ¥å£ï¼ˆä¸å®ç°çš„è¯åœ¨è°ƒç”¨cloneæ–¹æ³•ä¼šæŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸) è¯¥æ¥å£ä¸ºæ ‡è®°æ¥å£(ä¸å«ä»»ä½•æ–¹æ³•)<br>è¦†ç›–clone()æ–¹æ³•ï¼Œè®¿é—®ä¿®é¥°ç¬¦è®¾ä¸ºpublicã€‚æ–¹æ³•ä¸­è°ƒç”¨super.clone()æ–¹æ³•å¾—åˆ°éœ€è¦çš„å¤åˆ¶å¯¹è±¡ï¼ˆnativeä¸ºæœ¬åœ°æ–¹æ³•)</p>
<hr>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/hongshi/p/16189920.html">https://www.cnblogs.com/hongshi/p/16189920.html</a></p>
<p>âœ…æµ…æ‹·è´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() &#123;</span><br><span class="line">    // 1.æµ…æ‹·è´</span><br><span class="line">    Student stu1 = new Student();</span><br><span class="line">    stu1.setNumber(1);</span><br><span class="line">    stu1.setName(&quot;ll&quot;);</span><br><span class="line">    stu1.setTeacher(new Teacher(23));</span><br><span class="line">    Student stu2 = (Student)stu1.clone();</span><br><span class="line">    stu2.setNumber(2);</span><br><span class="line">    stu2.setName(&quot;oo&quot;);</span><br><span class="line">    //stu2.setTeacher(new Teacher(24)); //æ–°å»ºä¸å¯¹</span><br><span class="line">    stu2.getTeacher().setAge(24);</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ1:&quot; + stu1 + &quot; hashCode:&quot; + stu1.hashCode());</span><br><span class="line">    //ClassTest.Student(number=1, name=ll, teacher=ClassTest.Teacher(age=24)) hashCode:1407343478</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ2:&quot; + stu2 + &quot; hashCode:&quot; + stu2.hashCode());</span><br><span class="line">    //ClassTest.Student(number=2, name=oo, teacher=ClassTest.Teacher(age=24)) hashCode:1940447180</span><br><span class="line">    System.out.println(&quot;teacherçš„hashCodeï¼š&quot; + stu1.getTeacher().hashCode() + &quot; &quot; + stu2.getTeacher().hashCode());</span><br><span class="line">    //teacherçš„hashCodeï¼š83 83</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@ToString</span><br><span class="line">static class Student implements Cloneable &#123;</span><br><span class="line">    private int number;</span><br><span class="line">    private String name;</span><br><span class="line">    private Teacher teacher;</span><br><span class="line">    public int getNumber() &#123;</span><br><span class="line">        return number;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setNumber(int number) &#123;</span><br><span class="line">        this.number = number;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setTeacher(Teacher teacher) &#123;</span><br><span class="line">        this.teacher = teacher;</span><br><span class="line">    &#125;</span><br><span class="line">    public Teacher getTeacher() &#123;return teacher;&#125;</span><br><span class="line">    //æµ…æ‹·è´</span><br><span class="line">    @Override</span><br><span class="line">    public Object clone() &#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            return super.clone();</span><br><span class="line">        &#125;catch(CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">class Teacher &#123;</span><br><span class="line">    private Integer age;</span><br><span class="line">    Teacher(Integer age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°é‡Œé¢çš„Teacherå¯¹è±¡ï¼Œå®é™…ä¸Šè¿˜æ˜¯æŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªå¯¹å¯¹å®ƒçš„å¼•ç”¨è¿›è¡Œäº†ä¼ é€’ã€‚</p>
<p>æ³¨æ„âš ï¸ï¼šStringä½œä¸ºä¸å¯æ›´æ”¹çš„ç±»ï¼ˆimmutable classï¼‰ï¼Œåœ¨newèµ‹å€¼çš„æ—¶å€™ï¼Œå°±å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›è¡¨ç°å‡ºæ¥çš„æ˜¯æ·±æ‹·è´ï¼ˆå’ŒåŸºæœ¬æ•°æ®ç±»å‹ä¸€æ ·ï¼‰ã€‚</p>
<p>âœ…æ·±æ‹·è´</p>
<p>ä¸¤ç§æ–¹æ³•ï¼š<br>1ã€åºåˆ—åŒ–ï¼ˆserializationï¼‰è¿™ä¸ªå¯¹è±¡ï¼Œå†ååºåˆ—åŒ–å›æ¥ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ— éå°±æ˜¯åºåˆ—åŒ–çš„è§„åˆ™éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥å†™ã€‚<br>2ã€ç»§ç»­åˆ©ç”¨ clone() æ–¹æ³•ï¼Œæ—¢ç„¶ clone() æ–¹æ³•ï¼Œæ˜¯æˆ‘ä»¬æ¥é‡å†™çš„ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¯ä»¥å¯¹å…¶å†…çš„å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œå†è¿›è¡Œä¸€æ¬¡ clone()ã€‚ä¹Ÿå°±æ˜¯è®©Teacherç±»ä¹Ÿå®ç°Cloneableæ¥å£ï¼Œé‡å†™cloneæ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() &#123;</span><br><span class="line">    // 1.æµ…æ‹·è´</span><br><span class="line">    Student stu1 = new Student();</span><br><span class="line">    stu1.setNumber(1);</span><br><span class="line">    stu1.setName(&quot;ll&quot;);</span><br><span class="line">    stu1.setTeacher(new Teacher(23));</span><br><span class="line">    Student stu2 = (Student)stu1.clone();</span><br><span class="line">    stu2.setNumber(2);</span><br><span class="line">    stu2.setName(&quot;oo&quot;);</span><br><span class="line">    //stu2.setTeacher(new Teacher(24)); //æ–°å»ºä¸å¯¹</span><br><span class="line">    stu2.getTeacher().setAge(24);</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ1:&quot; + stu1 + &quot; hashCode:&quot; + stu1.hashCode());</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ2:&quot; + stu2 + &quot; hashCode:&quot; + stu2.hashCode());</span><br><span class="line">    System.out.println(&quot;teacherçš„hashCodeï¼š&quot; + stu1.getTeacher().hashCode() + &quot; &quot; + stu2.getTeacher().hashCode());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@ToString</span><br><span class="line">static class Student implements Cloneable &#123;</span><br><span class="line">    private int number;</span><br><span class="line">    private String name;</span><br><span class="line">    private Teacher teacher;</span><br><span class="line">    public int getNumber() &#123;</span><br><span class="line">        return number;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setNumber(int number) &#123;</span><br><span class="line">        this.number = number;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setTeacher(Teacher teacher) &#123;</span><br><span class="line">        this.teacher = teacher;</span><br><span class="line">    &#125;</span><br><span class="line">    public Teacher getTeacher() &#123;return teacher;&#125;</span><br><span class="line">//        //æµ…æ‹·è´</span><br><span class="line">//        @Override</span><br><span class="line">//        public Object clone() &#123;</span><br><span class="line">//            try&#123;</span><br><span class="line">//                return super.clone();</span><br><span class="line">//            &#125;catch(CloneNotSupportedException e) &#123;</span><br><span class="line">//                e.printStackTrace();</span><br><span class="line">//            &#125;</span><br><span class="line">//            return null;</span><br><span class="line">//        &#125;</span><br><span class="line">    //æ·±æ‹·è´</span><br><span class="line">    @Override</span><br><span class="line">    public Object clone() &#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            Student stu = (Student)super.clone();</span><br><span class="line">            stu.setTeacher((Teacher)this.teacher.clone());</span><br><span class="line">            return stu;</span><br><span class="line"></span><br><span class="line">        &#125; catch (CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">class Teacher implements Cloneable&#123;</span><br><span class="line">    private Integer age;</span><br><span class="line">    Teacher(Integer age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public Object clone() &#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            return super.clone();</span><br><span class="line">        &#125;catch(CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="hashcode"><a href="#hashcode" class="headerlink" title="hashcode"></a>hashcode</h3><p>1ã€hashå’Œhashè¡¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>hashæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸­çš„å®ç°å°±æ˜¯ä¸€ç§ç®—æ³•ï¼Œå°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„ç®—æ³•æ¥å¾—åˆ°ä¸€ä¸ªhashå€¼ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦çŸ¥é“å¦ä¸€ä¸ªä¸œè¥¿ï¼Œhashè¡¨ï¼Œé€šè¿‡hashç®—æ³•å¾—åˆ°çš„hashå€¼å°±åœ¨è¿™å¼ hashè¡¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œhashè¡¨å°±æ˜¯æ‰€æœ‰çš„hashå€¼ç»„æˆçš„ï¼Œæœ‰å¾ˆå¤šç§hashå‡½æ•°ï¼Œä¹Ÿå°±ä»£è¡¨ç€æœ‰å¾ˆå¤šç§ç®—æ³•å¾—åˆ°hashå€¼ã€‚</p>
</blockquote>
<p>2ã€hashcodeã€€</p>
<blockquote>
<p>hashcodeå°±æ˜¯é€šè¿‡hashå‡½æ•°å¾—æ¥çš„ï¼Œé€šä¿—çš„è¯´ï¼Œå°±æ˜¯é€šè¿‡æŸä¸€ç§ç®—æ³•å¾—åˆ°çš„ï¼Œhashcodeå°±æ˜¯åœ¨hashè¡¨ä¸­æœ‰å¯¹åº”çš„ä½ç½®ã€‚<br>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰hashcodeï¼Œå¯¹è±¡çš„hashcodeæ€ä¹ˆå¾—æ¥çš„å‘¢ï¼Ÿ<br>é¦–å…ˆä¸€ä¸ªå¯¹è±¡è‚¯å®šæœ‰ç‰©ç†åœ°å€ï¼Œåœ¨åˆ«çš„åšæ–‡ä¸­ä¼šhashcodeè¯´æˆæ˜¯ä»£è¡¨å¯¹è±¡çš„åœ°å€ï¼Œè¿™é‡Œè‚¯å®šä¼šè®©è¯»è€…å½¢æˆè¯¯åŒºï¼Œå¯¹è±¡çš„ç‰©ç†åœ°å€è·Ÿè¿™ä¸ªhashcodeåœ°å€ä¸ä¸€æ ·ï¼Œhashcodeä»£è¡¨å¯¹è±¡çš„åœ°å€è¯´çš„æ˜¯å¯¹è±¡åœ¨hashè¡¨ä¸­çš„ä½ç½®ï¼Œç‰©ç†åœ°å€è¯´çš„å¯¹è±¡å­˜æ”¾åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œé‚£ä¹ˆå¯¹è±¡å¦‚ä½•å¾—åˆ°hashcodeå‘¢ï¼Ÿ<br>é€šè¿‡å¯¹è±¡çš„å†…éƒ¨åœ°å€(ä¹Ÿå°±æ˜¯ç‰©ç†åœ°å€)è½¬æ¢æˆä¸€ä¸ªæ•´æ•°ï¼Œç„¶åè¯¥æ•´æ•°é€šè¿‡hashå‡½æ•°çš„ç®—æ³•å°±å¾—åˆ°äº†hashcodeã€‚æ‰€ä»¥ï¼Œhashcodeæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯åœ¨hashè¡¨ä¸­å¯¹åº”çš„ä½ç½®ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™é‡Œå¦‚æœè¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šçš„è¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œhashè¡¨ä¸­æœ‰ hashcodeä¸º1ã€hashcodeä¸º2ã€(â€¦)3ã€4ã€5ã€6ã€7ã€8è¿™æ ·å…«ä¸ªä½ç½®ï¼Œæœ‰ä¸€ä¸ªå¯¹è±¡Aï¼ŒAçš„ç‰©ç†åœ°å€è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°17(è¿™æ˜¯å‡å¦‚)ï¼Œå°±é€šè¿‡ç›´æ¥å–ä½™ç®—æ³•ï¼Œ17%8=1ï¼Œé‚£ä¹ˆAçš„hashcodeå°±ä¸º1ï¼Œä¸”Aå°±åœ¨hashè¡¨ä¸­1çš„ä½ç½®ã€‚</p>
</blockquote>
<p>3ã€hashcodeæœ‰ä»€ä¹ˆä½œç”¨</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆhashcodeä¸ç›´æ¥å†™ç‰©ç†åœ°å€å‘¢ï¼Œè¿˜è¦å¦å¤–ç”¨ä¸€å¼ hashè¡¨æ¥ä»£è¡¨å¯¹è±¡çš„åœ°å€ï¼Ÿ<br>HashCodeçš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†æŸ¥æ‰¾çš„å¿«æ·æ€§ï¼ŒHashCodeæ˜¯ç”¨æ¥åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ç¡®å®šå¯¹è±¡çš„å­˜å‚¨åœ°å€çš„(ååŠå¥è¯´çš„ç”¨hashcodeæ¥ä»£è¡¨å¯¹è±¡å°±æ˜¯åœ¨hashè¡¨ä¸­çš„ä½ç½®)<br>ä¸ºä»€ä¹ˆhashcodeå°±æŸ¥æ‰¾çš„æ›´å¿«ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªèƒ½å­˜æ”¾1000ä¸ªæ•°è¿™æ ·å¤§çš„å†…å­˜ä¸­ï¼Œåœ¨å…¶ä¸­è¦å­˜æ”¾1000ä¸ªä¸ä¸€æ ·çš„æ•°å­—ï¼Œç”¨æœ€ç¬¨çš„æ–¹æ³•ï¼Œå°±æ˜¯å­˜ä¸€ä¸ªæ•°å­—ï¼Œå°±éå†ä¸€éï¼Œçœ‹æœ‰æ²¡æœ‰ç›¸åŒå¾—æ•°ï¼Œå½“å­˜äº†900ä¸ªæ•°å­—ï¼Œå¼€å§‹å­˜901ä¸ªæ•°å­—çš„æ—¶å€™ï¼Œå°±éœ€è¦è·Ÿ900ä¸ªæ•°å­—è¿›è¡Œå¯¹æ¯”ï¼Œè¿™æ ·å°±å¾ˆéº»çƒ¦ï¼Œå¾ˆæ˜¯æ¶ˆè€—æ—¶é—´ï¼Œç”¨hashcodeæ¥è®°å½•å¯¹è±¡çš„ä½ç½®ï¼Œæ¥çœ‹ä¸€ä¸‹ã€‚<br>hashè¡¨ä¸­æœ‰1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ä¸ªä½ç½®ï¼Œå­˜ç¬¬ä¸€ä¸ªæ•°ï¼Œhashcodeä¸º1ï¼Œè¯¥æ•°å°±æ”¾åœ¨hashè¡¨ä¸­1çš„ä½ç½®ï¼Œå­˜åˆ°100ä¸ªæ•°å­—ï¼Œhashè¡¨ä¸­8ä¸ªä½ç½®ä¼šæœ‰å¾ˆå¤šæ•°å­—äº†ï¼Œ1ä¸­å¯èƒ½æœ‰20ä¸ªæ•°å­—ï¼Œå­˜101ä¸ªæ•°å­—æ—¶ï¼Œä»–å…ˆæŸ¥hashcodeå€¼å¯¹åº”çš„ä½ç½®ï¼Œå‡è®¾ä¸º1ï¼Œé‚£ä¹ˆå°±æœ‰20ä¸ªæ•°å­—å’Œä»–çš„hashcodeç›¸åŒï¼Œä»–åªéœ€è¦è·Ÿè¿™20ä¸ªæ•°å­—ç›¸æ¯”è¾ƒ(equals)ï¼Œå¦‚æœæ¯ä¸€ä¸ªç›¸åŒï¼Œé‚£ä¹ˆå°±æ”¾åœ¨1è¿™ä¸ªä½ç½®ï¼Œè¿™æ ·æ¯”è¾ƒçš„æ¬¡æ•°å°±å°‘äº†å¾ˆå¤šï¼Œå®é™…ä¸Šhashè¡¨ä¸­æœ‰å¾ˆå¤šä½ç½®ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¾‹åªæœ‰8ä¸ªï¼Œæ‰€ä»¥æ¯”è¾ƒçš„æ¬¡æ•°ä¼šè®©ä½ è§‰å¾—ä¹ŸæŒºå¤šçš„ï¼Œå®é™…ä¸Šï¼Œå¦‚æœhashè¡¨å¾ˆå¤§ï¼Œé‚£ä¹ˆæ¯”è¾ƒçš„æ¬¡æ•°å°±å¾ˆå°‘å¾ˆå°‘äº†ã€‚<br>é€šè¿‡å¯¹åŸå§‹æ–¹æ³•å’Œä½¿ç”¨hashcodeæ–¹æ³•è¿›è¡Œå¯¹æ¯”ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†hashcodeçš„ä½œç”¨ï¼Œå¹¶ä¸”ä¸ºä»€ä¹ˆè¦ä½¿ç”¨hashcodeäº†</p>
</blockquote>
<p>4ã€equalsæ–¹æ³•å’Œhashcodeçš„å…³ç³»</p>
<blockquote>
<p>é€šè¿‡å‰é¢è¿™ä¸ªä¾‹å­ï¼Œå¤§æ¦‚å¯ä»¥çŸ¥é“ï¼Œå…ˆé€šè¿‡hashcodeæ¥æ¯”è¾ƒï¼Œå¦‚æœhashcodeç›¸ç­‰ï¼Œé‚£ä¹ˆå°±ç”¨equalsæ–¹æ³•æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚</p>
</blockquote>
<blockquote>
<p>ç”¨ä¸ªä¾‹å­è¯´æ˜ï¼šä¸Šé¢è¯´çš„hashè¡¨ä¸­çš„8ä¸ªä½ç½®ï¼Œå°±å¥½æ¯”8ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶é‡Œèƒ½è£…å¾ˆå¤šçš„å¯¹è±¡ï¼Œå¯¹è±¡Aé€šè¿‡hashå‡½æ•°ç®—æ³•å¾—åˆ°å°†å®ƒæ”¾åˆ°1å·æ¡¶ä¸­ï¼Œå½“ç„¶è‚¯å®šæœ‰åˆ«çš„å¯¹è±¡ä¹Ÿä¼šæ”¾åˆ°1å·æ¡¶ä¸­ï¼Œå¦‚æœå¯¹è±¡Bä¹Ÿé€šè¿‡ç®—æ³•åˆ†åˆ°äº†1å·æ¡¶ï¼Œé‚£ä¹ˆå®ƒå¦‚ä½•è¯†åˆ«æ¡¶ä¸­å…¶ä»–å¯¹è±¡æ˜¯å¦å’Œå®ƒä¸€æ ·å‘¢ï¼Œè¿™æ—¶å€™å°±éœ€è¦equalsæ–¹æ³•æ¥è¿›è¡Œç­›é€‰äº†ã€‚</p>
</blockquote>
<blockquote>
<p>1ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡çš„HashCodeä¸€å®šä¹Ÿç›¸åŒ<br>2ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„HashCodeç›¸åŒï¼Œä¸ä»£è¡¨ä¸¤ä¸ªå¯¹è±¡å°±ç›¸åŒï¼Œåªèƒ½è¯´æ˜è¿™ä¸¤ä¸ªå¯¹è±¡åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ï¼Œå­˜æ”¾äºåŒä¸€ä¸ªä½ç½®</p>
</blockquote>
<p>5ã€ä¸ºä»€ä¹ˆequalsæ–¹æ³•é‡å†™çš„è¯ï¼Œå»ºè®®ä¹Ÿä¸€èµ·é‡å†™hashcodeæ–¹æ³•</p>
<blockquote>
<p>æ¯”å¦‚ï¼šæœ‰ä¸ªAç±»é‡å†™äº†equalsæ–¹æ³•ï¼Œä½†æ˜¯æ²¡æœ‰é‡å†™hashCodeæ–¹æ³•ï¼Œçœ‹è¾“å‡ºç»“æœï¼Œå¯¹è±¡a1å’Œå¯¹è±¡a2ä½¿ç”¨equalsæ–¹æ³•ç›¸ç­‰ï¼ŒæŒ‰ç…§ä¸Šé¢çš„hashcodeçš„ç”¨æ³•ï¼Œé‚£ä¹ˆä»–ä»¬ä¸¤ä¸ªçš„hashcodeè‚¯å®šç›¸ç­‰ï¼Œä½†æ˜¯è¿™é‡Œç”±äºæ²¡é‡å†™hashcodeæ–¹æ³•ï¼Œä»–ä»¬ä¸¤ä¸ªhashcodeå¹¶ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨é‡å†™äº†equalsæ–¹æ³•åï¼Œå°½é‡ä¹Ÿé‡å†™äº†hashcodeæ–¹æ³•ï¼Œé€šè¿‡ä¸€å®šçš„ç®—æ³•ï¼Œä½¿ä»–ä»¬åœ¨equalsç›¸ç­‰æ—¶ï¼Œä¹Ÿä¼šæœ‰ç›¸åŒçš„hashcodeå€¼ã€‚</p>
</blockquote>
<p>hashCodeæ˜¯ç”¨äºæŸ¥æ‰¾ä½¿ç”¨çš„ï¼Œè€Œ equalsæ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ˜¯å¦ç›¸ç­‰çš„ã€‚hashCodeçš„å­˜åœ¨ä¸»è¦æ˜¯ç”¨äºæŸ¥æ‰¾çš„å¿«æ·æ€§ï¼Œå¦‚Hashtableï¼ŒHashMapç­‰ï¼ŒhashCodeæ˜¯ç”¨æ¥åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ç¡®å®šå¯¹è±¡çš„å­˜å‚¨åœ°å€çš„.</p>
<p>å¦‚æœå¯¹è±¡çš„equalsæ–¹æ³•è¢«é‡å†™ï¼Œé‚£ä¹ˆå¯¹è±¡çš„hashCodeä¹Ÿå°½é‡é‡å†™ï¼Œå¹¶ä¸”äº§ç”ŸhashCodeä½¿ç”¨çš„å¯¹è±¡ï¼Œä¸€å®šè¦å’Œequalsæ–¹æ³•ä¸­ä½¿ç”¨çš„ä¸€è‡´.</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44364444/article/details/120054230">https://blog.csdn.net/weixin_44364444/article/details/120054230</a></p>
<h3 id="javaå¼‚å¸¸"><a href="#javaå¼‚å¸¸" class="headerlink" title="javaå¼‚å¸¸"></a>javaå¼‚å¸¸</h3><p>èƒŒæ™¯ï¼šä»£ç ä¸­éœ€è¦æ•è·åˆ°ä¸“é—¨çš„å¼‚å¸¸è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¸å½±å“ä¸»æµç¨‹ï¼Œè¯¥ç”¨tryâ€¦catchï¼Œæ˜¯åœ¨è°ƒç”¨çš„æ—¶å€™catchï¼Œè¿˜æ˜¯åœ¨è°ƒç”¨æ–¹æ³•é‡Œcatchï¼Ÿ<br>ğŸ¤”å¦‚æœæ˜¯åªæƒ³åœ¨è¿™æ¬¡è°ƒç”¨æ—¶è¡¥è´§å¼‚å¸¸å°±åœ¨è°ƒç”¨å¤„ä½¿ç”¨ï¼Œå¦‚æœæ˜¯æƒ³æŠŠæ–¹æ³•åŒ…è£…å¥½éšæ„è°ƒç”¨ä¸å‘ç”Ÿå¼‚å¸¸å°±åœ¨æ–¹æ³•é‡Œæ•è·ã€‚ä½œç”¨æ˜¯ï¼šå‘ç”Ÿå¼‚å¸¸äº†ä¸ä¸­æ–­æµç¨‹ï¼Œåªæ˜¯æ‰“ä¸ªerror logä¹‹ç±»çš„ã€‚å¦‚æœä¸åŠ ï¼Œå°±æ˜¯è‡ªåŠ¨æŠ›å‡ºthrowså¼‚å¸¸äº†ã€‚</p>
<p>èƒŒæ™¯ï¼šé‡Œé¢æ–¹æ³•çš„å¼‚å¸¸ï¼Œå¤–é¢æ–¹æ³•èƒ½ä¸èƒ½catchåˆ°ï¼Ÿé‡Œé¢æ–¹æ³•ä¹Ÿcatchäº†ï¼Œå¤–é¢æ–¹æ³•è¿˜èƒ½ä¸èƒ½catchåˆ°ï¼Ÿ<br>ğŸ¤”é‡Œé¢æ–¹æ³•æ²¡æœ‰catchå¼‚å¸¸çš„è¯ï¼Œå¤–é¢æ–¹æ³•æ˜¯èƒ½æ•è·åˆ°çš„ï¼Œå¹¶ä¸”è¿è¡Œæ—¶å¼‚å¸¸ä¸ç”¨åœ¨é‡Œé¢çš„æ–¹æ³•ä¸ŠåŠ throwsï¼Œå¤–é¢æ–¹æ³•å°±èƒ½æ•è·åˆ°ã€‚ç¼–è¯‘æ—¶å¼‚å¸¸å¿…é¡»åšï¼šcatchä½å¤„ç†æˆ–è€…throw + throwsï¼Œæˆ–è€…ç›´æ¥throwså‡ºå»ï¼Œè¿™æ ·æ‰èƒ½åœ¨å¤–é¢æ–¹æ³•æ•è·åˆ°ã€‚å¦‚æœé‡Œé¢æ–¹æ³•æ•è·äº†å¼‚å¸¸ï¼Œä½†æ˜¯æ²¡throwå‡ºå»ï¼ˆè¿è¡Œæ—¶å¼‚å¸¸throwäº†ä¸éœ€è¦throwsï¼Œç¼–è¯‘æ—¶å¼‚å¸¸throwäº†è¿˜éœ€è¦throwsï¼‰ï¼Œå¤–é¢æ–¹æ³•å°±æ•è·ä¸åˆ°è¿™ä¸ªå¼‚å¸¸ã€‚</p>
<p>èƒŒæ™¯ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦åœ¨æ–¹æ³•ä¸Šthrowså¼‚å¸¸ï¼Œä¸€å®šè¦throwså—ï¼Ÿ<br>ğŸ¤”è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¯ä»¥ä¸åœ¨æ–¹æ³•ä¸Šthrowsï¼Œè™šæ‹Ÿæœºä¼šè‡ªåŠ¨æ•è·æŠ›å‡ºå»ã€‚ç¼–è¯‘æ—¶å¼‚å¸¸é€šå¸¸åœ¨ç¼–è¯‘æ—¶å°±è¦æ±‚throwså‡ºå»å¼‚å¸¸ï¼Œæˆ–è€…ç”¨tryâ€¦catchè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼ˆæ‰“logä¹‹ç±»ï¼‰ã€‚</p>
<p>èƒŒæ™¯ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦try..catch..throw..throws<br>ğŸ¤”é¦–å…ˆè¿è¡Œæ—¶å¼‚å¸¸å¯ä»¥ä¸throwsï¼Œå¦‚æœæ²¡æœ‰try..catchï¼Œä¼šè‡ªåŠ¨throwså‡ºå»ï¼Œæ‰€ä»¥å¦‚æœä¸æ˜¯try..catch..å¯¹ç‰¹æ®Šå¼‚å¸¸æ•è·ï¼Œæ²¡å¿…è¦try..catch..throwsã€‚ç¼–è¯‘å‹å¼‚å¸¸å¦‚æœæ˜¯try..catch..æ‰“logäº†ï¼Œå°±ä¸ç”¨throwsäº†ã€‚å¦‚æœæƒ³æŠ›å‡ºå»ï¼Œå°±ç›´æ¥throwså°±è¡Œã€‚æ‰€ä»¥ä¸éœ€è¦try..catch..throw..throwsã€‚å¦‚æœå³æƒ³ç”¨try..catch..finally..è¿˜æƒ³throwså‡ºå»ï¼Œå°±ç”¨ã€‚</p>
<p>âœ…javaçš„å¼‚å¸¸ä½“ç³»</p>
<p>é¦–å…ˆExceptionå’ŒErroréƒ½æ˜¯ç»§æ‰¿äºThrowable ç±»ï¼Œåœ¨ Java ä¸­åªæœ‰ Throwable ç±»å‹çš„å®ä¾‹æ‰å¯ä»¥è¢«æŠ›å‡ºï¼ˆthrowï¼‰æˆ–è€…æ•è·ï¼ˆcatchï¼‰ï¼Œå®ƒæ˜¯å¼‚å¸¸å¤„ç†æœºåˆ¶çš„åŸºæœ¬ç»„æˆç±»å‹ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/2019101117003396.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5MjI5NTY3,size_16,color_FFFFFF,t_70"></p>
<p>Erroræ˜¯ç¼–è¯‘æ—¶é”™è¯¯å’Œç³»ç»Ÿé”™è¯¯ï¼Œç³»ç»Ÿé”™è¯¯åœ¨é™¤ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œéƒ½ä¸éœ€è¦ä½ æ¥å…³å¿ƒï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°ã€‚è€Œç¼–è¯‘æ—¶é”™è¯¯ï¼Œå¦‚æœä½ ä½¿ç”¨äº†ç¼–è¯‘å™¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæç¤ºã€‚</p>
<p>Exceptionåˆ™æ˜¯å¯ä»¥è¢«æŠ›å‡ºçš„åŸºæœ¬ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸»è¦å…³å¿ƒçš„ä¹Ÿæ˜¯è¿™ä¸ªç±»ã€‚<br>Exceptionåˆåˆ†ä¸ºRunTimeExceptionå’Œå…¶ä»–Exceptionã€‚</p>
<p>RunTimeExceptionï¼šè¿è¡Œæ—¶å¼‚å¸¸ï¼Œåˆç§°ä¸å—æ£€æŸ¥å¼‚å¸¸ï¼Œä¸å—æ£€æŸ¥ï¼Œå› ä¸ºä¸å—æ£€æŸ¥ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­å¯èƒ½ä¼šæœ‰RunTimeExceptionæ—¶Javaç¼–è¯‘æ£€æŸ¥æ—¶ä¸ä¼šå‘Šè¯‰ä½ æœ‰è¿™ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯åœ¨å®é™…è¿è¡Œä»£ç æ—¶åˆ™ä¼šæš´éœ²å‡ºæ¥ï¼Œæ¯”å¦‚ç»å…¸çš„1/0ï¼Œç©ºæŒ‡é’ˆç­‰ã€‚å¦‚æœä¸å¤„ç†ä¹Ÿä¼šè¢«Javaè‡ªå·±å¤„ç†ã€‚</p>
<p>å…¶ä»–Exceptionï¼Œå—æ£€æŸ¥å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶å¼‚å¸¸ã€‚å¯ä»¥ç†è§£ä¸ºé”™è¯¯ï¼Œå¿…é¡»è¦å¼€å‘è€…è§£å†³ä»¥åæ‰èƒ½ç¼–è¯‘é€šè¿‡ï¼Œè§£å†³çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œ<br>1ï¼šthrowåˆ°ä¸Šå±‚ï¼Œ<br>2ï¼Œtry-catchå¤„ç†ã€‚</p>
<hr>
<p>Erroræ˜¯javaç¨‹åºè¿è¡Œä¸­ä¸å¯é¢„æ–™çš„å¼‚å¸¸æƒ…å†µï¼ˆæ­£å¸¸æƒ…å†µä¸‹ä¸å¤§å¯èƒ½å‡ºç°çš„æƒ…å†µï¼‰ï¼Œè¿™ç§å¼‚å¸¸å‘ç”Ÿä»¥åï¼Œä¼šç›´æ¥å¯¼è‡´JVMä¸å¯å¤„ç†æˆ–è€…ä¸å¯æ¢å¤çš„æƒ…å†µã€‚æ‰€ä»¥è¿™ç§å¼‚å¸¸ä¸å¯èƒ½æŠ“å–åˆ°ï¼Œæ¯”å¦‚OutOfMemoryErrorã€NoClassDefFoundErrorç­‰ã€‚ã€è¡¨ç¤ºç”±JVMæ‰€ä¾¦æµ‹åˆ°çš„æ— æ³•é¢„æœŸçš„é”™è¯¯ï¼Œç”±äºè¿™æ˜¯å±äºJVMå±‚æ¬¡çš„ä¸¥é‡é”™è¯¯ ï¼Œå¯¼è‡´JVMæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤ï¼Œè¿™æ˜¯ä¸å¯æ•æ‰åˆ°çš„ï¼Œæ— æ³•é‡‡å–ä»»ä½•æ¢å¤çš„æ“ä½œï¼Œé¡¶å¤šåªèƒ½æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚ Errorç±»ä½“ç³»æè¿°äº†Javaè¿è¡Œç³»ç»Ÿä¸­çš„å†…éƒ¨é”™è¯¯ä»¥åŠèµ„æºè€—å°½çš„æƒ…å½¢.åº”ç”¨ç¨‹åºä¸åº”è¯¥æŠ›å‡ºè¿™ç§ç±»å‹çš„å¯¹è±¡(ä¸€èˆ¬æ˜¯ç”±è™šæ‹ŸæœºæŠ›å‡º).å‡å¦‚å‡ºç°è¿™ç§é”™è¯¯,é™¤äº†å°½åŠ›ä½¿ç¨‹åºå®‰å…¨é€€å‡ºå¤–,åœ¨å…¶ä»–æ–¹é¢æ˜¯æ— èƒ½ä¸ºåŠ›çš„ã€‚ã€‘</p>
<p>Exceptionï¼š<br>1ï¼å¯ä»¥æ˜¯å¯è¢«æ§åˆ¶(checked) æˆ–ä¸å¯æ§åˆ¶çš„(unchecked)ã€‚<br>2ï¼è¡¨ç¤ºä¸€ä¸ªç”±ç¨‹åºå‘˜å¯¼è‡´çš„é”™è¯¯ã€‚<br>3ï¼åº”è¯¥åœ¨åº”ç”¨ç¨‹åºçº§è¢«å¤„ç†ã€‚<br>Errorï¼š<br>1ï¼æ€»æ˜¯ä¸å¯æ§åˆ¶çš„(unchecked)ã€‚<br>2ï¼ç»å¸¸ç”¨æ¥ç”¨äºè¡¨ç¤ºç³»ç»Ÿé”™è¯¯æˆ–ä½å±‚èµ„æºçš„é”™è¯¯ã€‚<br>3ï¼å¦‚ä½•å¯èƒ½çš„è¯ï¼Œåº”è¯¥åœ¨ç³»ç»Ÿçº§è¢«æ•æ‰ã€‚</p>
<hr>
<p>âœ…å¸¸è§çš„ Error å’Œ Exceptionï¼š</p>
<p>1ï¼‰è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntimeExceptionï¼‰ä¹Ÿç§° ã€éæ£€æŸ¥å‹å¼‚å¸¸ UncheckedExceptionã€‘ï¼š</p>
<p>Nullpointer Exceptionï¼šç©ºæŒ‡é’ˆå¼‚å¸¸ï¼›<br>ClassCastExceptionï¼šç±»å‹å¼ºåˆ¶è½¬æ¢å¼‚å¸¸<br>IllegalArgumentExceptionï¼šä¼ é€’éæ³•å‚æ•°å¼‚å¸¸<br>IndexOutOfBoundsExceptionï¼šä¸‹æ ‡è¶Šç•Œå¼‚å¸¸<br>NumberFormatExceptionï¼šæ•°å­—æ ¼å¼å¼‚å¸¸<br>ArrayIndexOutOfBoundsException: æ•°ç»„è¶Šç•Œå¼‚å¸¸<br>ArrayStoreException: æ•°æ®å­˜å‚¨å¼‚å¸¸ï¼Œæ“ä½œæ•°ç»„æ—¶ç±»å‹ä¸ä¸€è‡´<br>ArithmeticExceptionï¼š (ç®—æœ¯å¼‚å¸¸)<br>BufferOverflowExceptionï¼š (ç¼“å†²åŒºæº¢å‡ºå¼‚å¸¸)</p>
<p>2ï¼‰éè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆCheckedExceptionï¼‰ä¹Ÿç§° ã€æ£€æŸ¥å‹å¼‚å¸¸ã€‘ï¼š</p>
<p>ClassNotFoundExceptionï¼šæ‰¾ä¸åˆ°æŒ‡å®š class çš„å¼‚å¸¸<br>IOExceptionï¼šIO æ“ä½œå¼‚å¸¸<br>FileNotFoundExceptionï¼šæ–‡ä»¶ä¸å­˜åœ¨å¼‚å¸¸<br>SQLExceptionï¼šSQLè¯­å¥å¼‚å¸¸<br>InterruptedExceptionï¼š (ä¸­æ–­å¼‚å¸¸-è°ƒç”¨çº¿ç¨‹ç¡çœ æ—¶å€™)</p>
<p>3ï¼‰é”™è¯¯ï¼ˆErrorï¼‰ï¼š</p>
<p>NoClassDefFoundErrorï¼šæ‰¾ä¸åˆ° class å®šä¹‰å¼‚å¸¸<br>StackOverflowErrorï¼šæ·±é€’å½’å¯¼è‡´æ ˆè¢«è€—å°½è€ŒæŠ›å‡ºçš„å¼‚å¸¸<br>OutOfMemoryErrorï¼šå†…å­˜æº¢å‡ºå¼‚å¸¸</p>
<p>âœ…é‡åˆ°çš„å¼‚å¸¸è®°å½•</p>
<p>1ã€ExecutionException<br>future.get()æŠ›å‡ºçš„ï¼ŒExecutionExceptionåŒ…è£…æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æŠ›å‡ºçš„ä»»ä½•å¼‚å¸¸ã€‚æ²¡æ˜ç™½ï¼Œåº”è¯¥æ˜¯ä¸ªæ£€æŸ¥å‹å¼‚å¸¸ã€‚æ˜¯å¿…é¡»è¦ç¨‹åºå‘˜å¤„ç†çš„ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://www.orcode.com/question/618888_kb0916.html">https://www.orcode.com/question/618888_kb0916.html</a><br><a target="_blank" rel="noopener" href="https://www.mianshigee.com/question/91669mas/">https://www.mianshigee.com/question/91669mas/</a></p>
<p>2ã€InterruptException<br>future.get()ä¼šæŠ›å‡ºï¼ŒThread.sleepä¹Ÿä¼šæŠ›å‡ºã€‚<br>å½“çº¿ç¨‹æ­£åœ¨ç­‰å¾…ã€ä¼‘çœ æˆ–ä»¥å…¶ä»–æ–¹å¼è¢«å ç”¨ï¼Œå¹¶ä¸”çº¿ç¨‹åœ¨æ´»åŠ¨ä¹‹å‰æˆ–æ´»åŠ¨æœŸé—´è¢«ä¸­æ–­æ—¶æŠ›å‡ºã€‚ æœ‰æ—¶ï¼Œæ–¹æ³•å¯èƒ½å¸Œæœ›æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç«‹å³æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚<br>æ´»åŠ¨çº¿ç¨‹çš„æ‰§è¡Œä¸­æ–­è¡Œä¸ºï¼Œå¯ä»¥æŠ›å‡ºè¿™æ ·çš„å¼‚å¸¸ã€‚<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/kevinmeanscool/article/details/123566970">https://blog.csdn.net/kevinmeanscool/article/details/123566970</a></p>
<p>3ã€</p>
<hr>
<p>âœ…NoClassDefFoundError å’Œ ClassNotFoundException çš„åŒºåˆ«ï¼š</p>
<p>åŒºåˆ«ä¸€ï¼š<br>NoClassDefFoundErrorå®ƒæ˜¯Errorï¼Œ<br>ClassNotFoundExceptionæ˜¯Exceptionã€‚</p>
<p>åŒºåˆ«äºŒï¼š<br>NoClassDefFoundErroræ˜¯JVMè¿è¡Œæ—¶é€šè¿‡classpathåŠ è½½ç±»æ—¶ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„ç±»è€ŒæŠ›å‡ºçš„é”™è¯¯ã€‚<br>ClassNotFoundExceptionæ˜¯ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¿…é¡»å°†ClassNotFoundExceptionå¼‚å¸¸æŠ›å‡ºï¼</p>
<p>NoClassDefFoundErrorå‘ç”Ÿåœºæ™¯å¦‚ä¸‹ï¼š<br>1ã€ç±»ä¾èµ–çš„classæˆ–è€…jarä¸å­˜åœ¨ ï¼ˆç®€å•è¯´å°±æ˜¯mavenç”Ÿæˆè¿è¡ŒåŒ…åè¢«ç¯¡æ”¹ï¼‰<br>2ã€ç±»æ–‡ä»¶å­˜åœ¨ï¼Œä½†æ˜¯å­˜åœ¨ä¸åŒçš„åŸŸä¸­ ï¼ˆç®€å•è¯´å°±æ˜¯å¼•å…¥çš„ç±»ä¸åœ¨å¯¹åº”çš„åŒ…ä¸‹)<br>3ã€å¤§å°å†™é—®é¢˜ï¼Œjavacç¼–è¯‘çš„æ—¶å€™æ˜¯æ— è§†å¤§å°çš„ï¼Œå¾ˆæœ‰å¯èƒ½ä½ ç¼–è¯‘å‡ºæ¥çš„classæ–‡ä»¶å°±ä¸æƒ³è¦çš„ä¸ä¸€æ ·ï¼è¿™ä¸ªæ²¡æœ‰åšéªŒè¯ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>ClassNotFoundExceptionå‘ç”Ÿåœºæ™¯å¦‚ä¸‹ï¼š<br>1ã€è°ƒç”¨classçš„forNameæ–¹æ³•æ—¶ï¼Œæ‰¾ä¸åˆ°æŒ‡å®šçš„ç±»<br>2ã€ClassLoader ä¸­çš„ findSystemClass() æ–¹æ³•æ—¶ï¼Œæ‰¾ä¸åˆ°æŒ‡å®šçš„ç±»<br>ä¸¾ä¾‹è¯´æ˜å¦‚ä¸‹:<br>Class.forName(â€œabcâ€); æ¯”å¦‚abcè¿™ä¸ªç±»ä¸å­˜é¡¹ç›®ä¸­ï¼Œä»£ç ç¼–å†™æ—¶ï¼Œå°±ä¼šæç¤ºæ­¤å¼‚å¸¸æ˜¯æ£€æŸ¥æ€§å¼‚å¸¸ï¼Œæ¯”å¦‚å°†æ­¤å¼‚å¸¸æŠ›å‡ºã€‚</p>
<hr>
<p>âœ…è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntime exception)ä¸æ£€æŸ¥å‹å¼‚å¸¸ï¼ˆchecked exceptionï¼‰çš„åŒºåˆ«ï¼š</p>
<p>1:checked ï¼ˆæ£€æŸ¥å‹å¼‚å¸¸ï¼‰ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸é‡åˆ°çš„IOå¼‚å¸¸ï¼Œä»¥åŠSQLå¼‚å¸¸éƒ½æ˜¯è¿™ç§å¼‚å¸¸ã€‚ç¼–è¯‘å™¨è¦æ£€æŸ¥è¿™ç±»å¼‚å¸¸ï¼Œæ£€æŸ¥çš„ç›®çš„ä¸€æ–¹é¢æ˜¯å› ä¸ºè¯¥ç±»å¼‚å¸¸çš„å‘ç”Ÿéš¾ä»¥é¿å…ï¼Œ<br>å¦ä¸€æ–¹é¢å°±æ˜¯è®©å¼€å‘è€…å»è§£å†³æ‰è¿™ç±»å¼‚å¸¸ï¼Œæ‰€ä»¥ç§°ä¸ºå¿…é¡»å¤„ç†ï¼ˆtry â€¦catchï¼‰çš„å¼‚å¸¸ã€‚å¦‚æœä¸å¤„ç†è¿™ç±»å¼‚å¸¸ï¼Œé›†æˆå¼€å‘ç¯å¢ƒä¸­çš„ç¼–è¯‘å™¨ä¸€èˆ¬ä¼šç»™å‡ºé”™è¯¯æç¤ºã€‚</p>
<p>å¦‚æœä¸€ä¸ªæ–¹æ³•æ²¡æœ‰æ•è·ä¸€ä¸ªæ£€æŸ¥æ€§å¼‚å¸¸ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å¿…é¡»ä½¿ç”¨ throws å…³é”®å­—æ¥å£°æ˜ã€‚throws å…³é”®å­—æ”¾åœ¨æ–¹æ³•åçš„åè¾¹ï¼Œeg:  æ–¹æ³•åï¼ˆï¼‰ throws  IOExecptionã€‚</p>
<p>ç†è§£ï¼šæ£€æŸ¥å‹å¼‚å¸¸ï¼Œè¦ä¹ˆï¼štryâ€¦ catch.. æ‰“logï¼Œè¦ä¹ˆï¼štry..catch..throw..throwsï¼ˆå¤šæ­¤ä¸€ä¸¾ï¼Œæ²¡å¿…è¦ï¼‰ï¼Œè¦ä¹ˆåªæ˜¯throwsã€‚</p>
<p>2:runtime exceptionï¼ˆè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ï¼Œç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿™ç±»å¼‚å¸¸ï¼Œä¸æ£€æŸ¥çš„åˆ™å¼€å‘è€…åœ¨ä»£ç çš„ç¼–è¾‘ç¼–è¯‘é˜¶æ®µå°±ä¸æ˜¯å¿…é¡»å¤„ç†ï¼Œè¿™ç±»å¼‚å¸¸ä¸€èˆ¬å¯ä»¥é¿å…ï¼Œå› æ­¤æ— éœ€å¤„ç†ï¼ˆtry â€¦catchï¼‰,ä¼šç›´æ¥throwså‡ºå»ï¼Œå¦‚æœä¸æƒ³throwså‡ºå»ï¼Œå°±try catch æ‰“logã€‚<br>å¦‚æœä¸å¤„ç†è¿™ç±»å¼‚å¸¸ï¼Œé›†æˆå¼€å‘ç¯å¢ƒä¸­çš„ç¼–è¯‘å™¨ä¹Ÿä¸ä¼šç»™å‡ºé”™è¯¯æç¤ºã€‚  å½“å‡ºç°è¿™æ ·çš„å¼‚å¸¸æ—¶ï¼Œæ€»æ˜¯ç”±è™šæ‹Ÿæœºæ¥ç®¡ã€‚</p>
<p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/liangbaolong/p/12884224.html">https://www.cnblogs.com/liangbaolong/p/12884224.html</a></p>
<hr>
<p>âœ…å¤šå¼‚å¸¸æ•è·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line"></span><br><span class="line">&#125; catch(NullPointerException | IOException e) &#123;</span><br><span class="line">    //log.error(e);</span><br><span class="line"></span><br><span class="line">&#125; catch(Exception e) &#123;</span><br><span class="line">    //log.error(e);</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">    //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>| ç¬¦åˆ å¯ä»¥ å†™å¤šä¸ªï¼Œç¬¦åˆå…¶ä¸­ä¹‹ä¸€ã€‚<br>æ³¨æ„è¦æŠŠå¼‚å¸¸èŒƒå›´å°çš„æ”¾åœ¨å‰é¢ï¼ŒèŒƒå›´å¤§çš„æ”¾åœ¨åé¢ã€‚<br>âš ï¸æ³¨æ„åœ¨tryå†…returnæˆ–è€…breakäº†ï¼Œfinallyä¹Ÿä¼šæ‰§è¡Œçš„ã€‚</p>
<h3 id="ArrayListçº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#ArrayListçº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="ArrayListçº¿ç¨‹å®‰å…¨é—®é¢˜"></a>ArrayListçº¿ç¨‹å®‰å…¨é—®é¢˜</h3><p>ArrayList æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„é›†åˆç±»ï¼Œå½“å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¹¶å‘å¯¹åŒä¸€ä¸ªArrayListæ‰§è¡Œaddï¼Œå¯èƒ½ä¼šæŠ›å‡ºjava.util.ConcurrentModificationExceptionçš„å¼‚å¸¸ã€‚</p>
<blockquote>
<p>ConcurrentModificationException: å¹¶å‘ä¿®æ”¹å¼‚å¸¸<br>    ä½¿ç”¨è¿­ä»£å™¨å¾ªç¯ï¼Œåœ¨å¾ªç¯ä¸­ç”¨ArrayListçš„add/removeæ–¹æ³•ä¼šå‡ºç°è¯¥å¼‚å¸¸ã€‚åŸå› åŠè§£å†³æ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013168615/article/details/116570591">https://blog.csdn.net/u013168615/article/details/116570591</a></p>
</blockquote>
<p>å¤šçº¿ç¨‹å¯¹Listè¿›è¡Œaddï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() throws InterruptedException &#123;</span><br><span class="line">    List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">    for (int i = 1; i &lt;= 30; i++)&#123;</span><br><span class="line">        new Thread(() -&gt; &#123;</span><br><span class="line">            list.add(UUID.randomUUID().toString().substring(0, 8));</span><br><span class="line">            System.out.println(list);</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;;</span><br><span class="line">    Thread.sleep(60 * 1000);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼‚å¸¸ï¼šException in thread â€œThread-0â€ java.util.ConcurrentModificationException<br>åŸå› ï¼š<br>ArrayListçš„æ‰€æœ‰æ–¹æ³•éƒ½æ²¡æœ‰åŠ Lockï¼Œä¹Ÿæ²¡æœ‰åŠ synchronizedï¼Œå› æ­¤åœ¨å¹¶å‘æ“ä½œä¸‹ï¼Œæ‰©å®¹å‡½æ•°grow()ä¼šå­˜åœ¨é—®é¢˜ã€‚</p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š<br>elementDataæ•°ç»„åˆšåˆšæ·»åŠ äº†æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åˆšå¥½æ»¡å‘˜äº†<br>è¿™æ—¶2ä¸ªçº¿ç¨‹åŒæ—¶åˆè°ƒç”¨äº†addï¼Œé‚£ä¹ˆå°±å¿…é¡»è¦æ‰§è¡Œgrowè¿›è¡Œæ‰©å®¹<br>ç¬¬1ä¸ªçº¿ç¨‹è°ƒç”¨å®Œgrow()ï¼Œç„¶åä¹Ÿè°ƒç”¨äº†elementData[size++] = eï¼ŒæŠŠæ–°å…ƒç´ æ·»åŠ ä¸Šå»<br>ç¬¬2ä¸ªçº¿ç¨‹åˆè°ƒç”¨ä¸€æ¬¡grow()ï¼Œæ•´ä¸ªelementDataæ•°ç»„å°±ä¹±æ‰äº†ã€‚</p>
<p>âœ…å¤šçº¿ç¨‹æƒ…å†µä¸‹è¯¥ç”¨ä»€ä¹ˆï¼š</p>
<p>1ã€ä½¿ç”¨ Vector åˆå§‹åŒ– list å¯¹è±¡<br><code>List&lt;String&gt; list = new Vector&lt;&gt;();</code><br>Vector.addä½¿ç”¨äº†synchronizedåŠ é”<br>è½¬æ¢æˆArrayListï¼š<br><code>List&lt;String&gt; newList = new ArrayList&lt;String&gt;(vector);</code></p>
<p>2ã€ä½¿ç”¨ Collections.synchronizedList<br><code>List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;());</code><br>addæ–¹æ³•åŒæ ·åŠ äº† synchronized é”ã€‚</p>
<p>3ã€ä½¿ç”¨ CopyOnWriteArrayList<br><code>List&lt;String&gt; list = new CopyOnWriteArrayList&lt;&gt;();</code><br>ä½¿ç”¨äº†lock</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public boolean add(E e) &#123;</span><br><span class="line">    final ReentrantLock lock = this.lock;</span><br><span class="line">    lock.lock();</span><br><span class="line">    try &#123;</span><br><span class="line">        Object[] elements = getArray();</span><br><span class="line">        int len = elements.length;</span><br><span class="line">        Object[] newElements = Arrays.copyOf(elements, len + 1);</span><br><span class="line">        newElements[len] = e;</span><br><span class="line">        setArray(newElements);</span><br><span class="line">        return true;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/fhblikesky/p/13692641.html">https://www.cnblogs.com/fhblikesky/p/13692641.html</a></p>
<h3 id="javaæ³›å‹"><a href="#javaæ³›å‹" class="headerlink" title="javaæ³›å‹"></a>javaæ³›å‹</h3><p>1ã€æ³›å‹ä¸Objectçš„åŒºåˆ«</p>
<p>æ–¹æ³•çš„å£°æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public Object doSomething(Object obj) &#123;....&#125;</span><br><span class="line">â€‹</span><br><span class="line">public &lt;T&gt; T doSomething(T t) &#123;....&#125;</span><br></pre></td></tr></table></figure>

<p>æ— è®ºæ˜¯Tè¿˜æ˜¯ objï¼Œä½ éƒ½åªèƒ½è°ƒç”¨Objectç±»å‹çš„å‚æ•°å’Œè¿”å›å€¼ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯ä½¿ç”¨äº†æ³›å‹çš„ç±»ï¼Œå’Œæ™®é€šçš„è°ƒç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MyClass&lt;Foo&gt; my = new MyClass&lt;Foo&gt;();</span><br><span class="line">Foo foo = new Foo();</span><br><span class="line"></span><br><span class="line">æ³›å‹ï¼š</span><br><span class="line">Foo newFoo = my.doSomething(foo);</span><br><span class="line"></span><br><span class="line">Object:</span><br><span class="line">Foo newFoo = (Foo) my.doSomething(foo);</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œä½¿ç”¨æ³›å‹çš„å¥½å¤„ï¼š</p>
<p>1.ä¸éœ€è¦åšå¼ºåˆ¶ç±»å‹è½¬æ¢</p>
<p>2.ç¼–è¯‘æ—¶æ›´å®‰å…¨ã€‚å¦‚æœä½¿ç”¨Objectç±»çš„è¯ï¼Œä½ æ²¡æ³•ä¿è¯è¿”å›çš„ç±»å‹ä¸€å®šæ˜¯Fooï¼Œä¹Ÿè®¸æ˜¯å…¶å®ƒç±»å‹ã€‚è¿™æ—¶ä½ å°±ä¼šåœ¨è¿è¡Œæ—¶å¾—åˆ°ä¸€ä¸ªç±»å‹è½¬æ¢å¼‚å¸¸ï¼ˆClassCastExceptionï¼‰</p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/SDDDDDSA/article/details/120733398">https://blog.csdn.net/SDDDDDSA/article/details/120733398</a></p>
<p>2ã€æ³›å‹<code>&lt;T&gt; T</code> ä¸ T çš„åŒºåˆ«</p>
<p>æ–¹æ³•è¿”å›å‰çš„<code>&lt;T&gt; </code>æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå½“å‰æ–¹æ³•çš„å€¼ä¼ å…¥ç±»å‹å¯ä»¥å’Œç±»åˆå§‹åŒ–çš„æ³›å‹ç±»å‹ä¸åŒï¼Œä¹Ÿæ˜¯å°±æ˜¯è¯¥æ–¹æ³•çš„æ³›å‹ç±»å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸éœ€è¦è·Ÿç±»åˆå§‹åŒ–çš„æ³›å‹ç±»ç›¸åŒ.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.test;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">/**</span><br><span class="line"> * @Description</span><br><span class="line"> * æœ‰çš„æ–¹æ³•è¿”å›å€¼ä¸º &lt;T&gt; T ï¼Œæœ‰çš„æ–¹æ³•è¿”å›å€¼ä¸º T ,åŒºåˆ«åœ¨é‚£é‡Œ ï¼Ÿ</span><br><span class="line"> **/</span><br><span class="line">public class Request&lt;E&gt; &#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    public &lt;T&gt; T getObject(Class&lt;T&gt; tClass) throws IllegalAccessException, InstantiationException &#123;</span><br><span class="line">        T t = tClass.newInstance();</span><br><span class="line">        return t;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * æ–¹æ³•è¿”å›å‰çš„ &lt;T&gt; æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå½“å‰æ–¹æ³•çš„å€¼ä¼ å…¥ç±»å‹å¯ä»¥å’Œç±»åˆå§‹åŒ–çš„æ³›å‹ç±»å‹ä¸åŒï¼Œ</span><br><span class="line">     * ä¹Ÿæ˜¯å°±æ˜¯è¯¥æ–¹æ³•çš„æ³›å‹ç±»å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸éœ€è¦è·Ÿç±»åˆå§‹åŒ–çš„æ³›å‹ç±»ç›¸åŒ</span><br><span class="line">     *</span><br><span class="line">     * å‚æ•° T</span><br><span class="line">     *  ç¬¬ä¸€ä¸ª è¡¨ç¤ºæ˜¯æ³›å‹</span><br><span class="line">     *  ç¬¬äºŒä¸ª è¡¨ç¤ºæ˜¯è¿”å›æ˜¯Tç±»å‹çš„æ•°æ®</span><br><span class="line">     *  ç¬¬ä¸‰ä¸ª è¡¨ç¤ºé™åˆ¶å‚æ•°ç±»å‹ä¸ºT</span><br><span class="line">     * @param data</span><br><span class="line">     * @param &lt;T&gt;</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    private &lt;T&gt; T getListFirst(List&lt;T&gt; data) &#123;</span><br><span class="line">        if (data == null || data.size() == 0) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        return data.get(0);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * è¿™ä¸ªåªèƒ½ä¼ Tç±»å‹çš„æ•°æ®</span><br><span class="line">     * @param data</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    private E getListFirst2(List&lt;E&gt; data) &#123;</span><br><span class="line">        if (data == null || data.size() == 0) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        return data.get(0);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Integer&gt; data = new ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; data2 = new ArrayList&lt;&gt;();</span><br><span class="line">        // å…¥å‚ç”±List&lt;T&gt;çš„T å†³å®šï¼Œå› ä¸ºè¿”å›å€¼ä¸º&lt;T&gt; T ,æ‰€ä»¥å…¥å‚ä¸å— Request&lt;T&gt; å½±å“</span><br><span class="line">        Integer a = new Request&lt;String&gt;().getListFirst(data);</span><br><span class="line"> </span><br><span class="line">        // ç¼–è¯‘å‡ºé”™ï¼Œå…¥å‚ç”±Request&lt;T&gt; Tçš„å†³å®šï¼Œå—Request&lt;T&gt;å½±å“</span><br><span class="line">        //new Request&lt;String&gt;().getListFirst2(data);</span><br><span class="line"> </span><br><span class="line">        // æ²¡ä»€ä¹ˆåŒºåˆ«</span><br><span class="line">        String aa = new Request&lt;String&gt;().getListFirst(data2);</span><br><span class="line">        String bb = new Request&lt;String&gt;().getListFirst2(data2);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qianzhitu/article/details/107962657">https://blog.csdn.net/qianzhitu/article/details/107962657</a></p>
<p>3ã€æ³›å‹é€šé…ç¬¦</p>
<p>æ³›å‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ã€‚</p>
<p>å¸¸ç”¨çš„ Tï¼ŒEï¼ŒKï¼ŒVï¼Œï¼Ÿ</p>
<p>æœ¬è´¨ä¸Šè¿™äº›ä¸ªéƒ½æ˜¯é€šé…ç¬¦ï¼Œæ²¡å•¥åŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯ç¼–ç æ—¶çš„ä¸€ç§çº¦å®šä¿—æˆçš„ä¸œè¥¿ã€‚æ¯”å¦‚ä¸Šè¿°ä»£ç ä¸­çš„ T ï¼Œæˆ‘ä»¬å¯ä»¥æ¢æˆ A-Z ä¹‹é—´çš„ä»»ä½•ä¸€ä¸ª å­—æ¯éƒ½å¯ä»¥ï¼Œå¹¶ä¸ä¼šå½±å“ç¨‹åºçš„æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯å¦‚æœæ¢æˆå…¶ä»–çš„å­—æ¯ä»£æ›¿ T ï¼Œåœ¨å¯è¯»æ€§ä¸Šå¯èƒ½ä¼šå¼±ä¸€äº›ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒTï¼ŒEï¼ŒKï¼ŒVï¼Œï¼Ÿæ˜¯è¿™æ ·çº¦å®šçš„ï¼š</p>
<p>ï¼Ÿè¡¨ç¤ºä¸ç¡®å®šçš„ java ç±»å‹<br>T (type) è¡¨ç¤ºå…·ä½“çš„ä¸€ä¸ªjavaç±»å‹<br>K V (key value) åˆ†åˆ«ä»£è¡¨javaé”®å€¼ä¸­çš„Key Value<br>E (element) ä»£è¡¨Element</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/minkeyto/article/details/116205607">https://blog.csdn.net/minkeyto/article/details/116205607</a></p>
<p>å­¦é•¿æ•™å­¦å¦¹javaæ³›å‹ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_67401499/article/details/125401501">https://blog.csdn.net/m0_67401499/article/details/125401501</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/30/myblog/JAVA/java%E6%8E%A5%E5%8F%A3&%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/30/myblog/JAVA/java%E6%8E%A5%E5%8F%A3&%E7%B1%BB/" class="post-title-link" itemprop="url">javaå¸¸è§„æ¥å£ã€ç±»</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-30 09:59:37" itemprop="dateCreated datePublished" datetime="2022-04-30T09:59:37+08:00">2022-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-14 15:59:30" itemprop="dateModified" datetime="2022-08-14T15:59:30+08:00">2022-08-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Serializableæ¥å£"><a href="#Serializableæ¥å£" class="headerlink" title="Serializableæ¥å£"></a>Serializableæ¥å£</h3><p>ä½äºjava.io.SerializableåŒ…ä¸­ï¼Œä¸€èˆ¬åœ¨åˆ›å»ºå®ä½“ç±»çš„æ—¶å€™ä¼šå»å®ç°è¿™ä¸ªæ¥å£ï¼Œç›®çš„æ˜¯ä¸ºäº†åºåˆ—åŒ–ã€‚</p>
<p>åºåˆ—åŒ–æŒ‡çš„æ˜¯æŠŠå¯¹è±¡è½¬åŒ–æˆå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠå†…å­˜ä¸­çš„å¯¹è±¡è½¬æ¢æˆä¸€è¿ä¸²çš„å­—èŠ‚bytesæè¿°çš„è¿‡ç¨‹ã€‚<br>ååºåˆ—åŒ–å°±æ˜¯å°†å­—èŠ‚bytesæ•°æ®æ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚</p>
<p>éœ€è¦å°†å†…å­˜ä¸­å¯¹è±¡çŠ¶æ€æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­æ—¶ï¼Œéœ€è¦è¿›è¡Œåºåˆ—åŒ–ã€‚è¿™ä¸ªæ¯”è¾ƒç›´è§‚çš„å°±æ˜¯é€šè¿‡ObjectOutputStreamå’ŒFileOutputStreamå‘æ–‡ä»¶ä¸­ä¿å­˜å¯¹è±¡æ—¶ï¼Œå®ç°äº†Serializableæ¥å£çš„å¯¹è±¡ä¼šä»¥äºŒè¿›åˆ¶æ•°æ®çš„å½¢å¼ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œæœªå®ç°Serializableæ¥å£çš„å¯¹è±¡åˆ™ä¼šç›´æ¥æŠ¥é”™ï¼Œæ— æ³•ä¿å­˜ã€‚</p>
<p>serialVersionUIDï¼š<br>å¦‚æœåœ¨è¿›è¡Œååºåˆ—åŒ–å‰ï¼Œå°†æŸä¸ªå®ä½“ç±»åŸæœ‰çš„serialVersionUIDæ”¹å˜ï¼Œåœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶å°±ä¼šæŠ¥InvalidClassExceptionå¼‚å¸¸ã€‚<br>å¦‚æœæ²¡æœ‰æŒ‡å®šserialVersionUIDï¼Œåœ¨è¿›è¡Œåºåˆ—åŒ–æ—¶ï¼ŒJVMä¼šé€šè¿‡è®¡ç®—ç»™è¯¥ç±»ä¸€ä¸ªé»˜è®¤çš„serialVersionUIDå€¼ã€‚<br>ä½†æ˜¯ä¸å»ºè®®ä¸æŒ‡å®šserialVersionUIDï¼Œé«˜åº¦ä¾èµ–äºJVMé»˜è®¤ç”ŸæˆserialVersionUIDï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä¸ç¼–è¯‘å™¨çš„å®ç°ç»†èŠ‚è€¦åˆï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´åœ¨ååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å‘ç”Ÿæ„å¤–çš„InvalidClassExceptionå¼‚å¸¸ã€‚ä¸ªäººè®¤ä¸ºåº”è¯¥æ˜¯æŒ‡ä¸åŒç¼–è¯‘å™¨ç¼–è¯‘çš„ä¸åŒç±»å¯èƒ½äº§ç”Ÿä¸€ä¸ªç›¸åŒçš„é»˜è®¤serialVersionUIDã€‚<br>å¦å¤–å°½é‡ç”¨privateæ¥ä¿®é¥°serialVersionUIDã€‚</p>
<hr>
<p>Serializableå…¶å®æ˜¯ä¸ªç©ºæ¥å£ï¼Œç”¨æ¥æ ‡è¯†å½“å‰ç±»å¯ä»¥è¢«åºåˆ—åŒ–ã€‚<br>å‘Šè¯‰jvmï¼Œè®©jvmå¸®å¿™åšåºåˆ—åŒ–ã€‚</p>
<p>å®ç°äº†Serializableæ¥å£çš„ç±»å¯ä»¥è¢«ObjectOutputStreamè½¬æ¢ä¸ºå­—èŠ‚æµï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ObjectInputStreamå†å°†å…¶è§£æä¸ºå¯¹è±¡ã€‚</p>
<p>âœ…ä»€ä¹ˆæ˜¯åºåˆ—åŒ–ï¼Ÿ</p>
<p>åºåˆ—åŒ–ï¼ˆserializeï¼‰ - åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµã€‚<br>ååºåˆ—åŒ–ï¼ˆdeserializeï¼‰ - ååºåˆ—åŒ–æ˜¯å°†å­—èŠ‚æµè½¬æ¢ä¸ºå¯¹è±¡ã€‚</p>
<p>ä½œç”¨ï¼š<br>åºåˆ—åŒ–å¯ä»¥å°†å¯¹è±¡çš„å­—èŠ‚åºåˆ—æŒä¹…åŒ–â€”â€”ä¿å­˜åœ¨å†…å­˜ã€æ–‡ä»¶ã€æ•°æ®åº“ä¸­ã€‚<br>åœ¨ç½‘ç»œä¸Šä¼ é€å¯¹è±¡çš„å­—èŠ‚åºåˆ—ã€‚<br>RMI(è¿œç¨‹æ–¹æ³•è°ƒç”¨)</p>
<p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š<br>1ã€æƒ³æŠŠå†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–è€…æ•°æ®åº“ä¸­æ—¶<br>2ã€æƒ³æŠŠå¯¹è±¡é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“æ—¶</p>
<p>âœ…å¦‚ä½•ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">// Genderç±»ï¼Œè¡¨ç¤ºæ€§åˆ«</span><br><span class="line">// æ¯ä¸ªæšä¸¾ç±»å‹éƒ½ä¼šé»˜è®¤ç»§æ‰¿ç±»java.lang.Enumï¼Œè€ŒEnumç±»å®ç°äº†Serializableæ¥å£ï¼Œæ‰€ä»¥æšä¸¾ç±»å‹å¯¹è±¡éƒ½æ˜¯é»˜è®¤å¯ä»¥è¢«åºåˆ—åŒ–çš„ã€‚</span><br><span class="line">public enum Gender &#123;  </span><br><span class="line">    MALE, FEMALE  </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// Person ç±»å®ç°äº† Serializable æ¥å£ï¼Œå®ƒåŒ…å«ä¸‰ä¸ªå­—æ®µã€‚å¦å¤–ï¼Œå®ƒè¿˜é‡å†™äº†è¯¥ç±»çš„ toString() æ–¹æ³•ï¼Œä»¥æ–¹ä¾¿æ‰“å° Person å®ä¾‹ä¸­çš„å†…å®¹ã€‚</span><br><span class="line">public class Person implements Serializable &#123;  </span><br><span class="line">    private String name = null;  </span><br><span class="line">    private Integer age = null;  </span><br><span class="line">    private Gender gender = null;  </span><br><span class="line"></span><br><span class="line">    public Person() &#123;  </span><br><span class="line">        System.out.println(&quot;none-arg constructor&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">    public Person(String name, Integer age, Gender gender) &#123;  </span><br><span class="line">        System.out.println(&quot;arg constructor&quot;);  </span><br><span class="line">        this.name = name;  </span><br><span class="line">        this.age = age;  </span><br><span class="line">        this.gender = gender;  </span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">    // çœç•¥ set get æ–¹æ³•</span><br><span class="line">    @Override </span><br><span class="line">    public String toString() &#123;  </span><br><span class="line">        return &quot;[&quot; + name + &quot;, &quot; + age + &quot;, &quot; + gender + &quot;]&quot;;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">// SimpleSerialç±»ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„åºåˆ—åŒ–ç¨‹åºï¼Œå®ƒå…ˆå°†Personå¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶person.outä¸­ï¼Œç„¶åå†ä»è¯¥æ–‡ä»¶ä¸­è¯»å‡ºè¢«å­˜å‚¨çš„Personå¯¹è±¡ï¼Œå¹¶æ‰“å°è¯¥å¯¹è±¡ã€‚</span><br><span class="line">public class SimpleSerial &#123;  </span><br><span class="line">    public static void main(String[] args) throws Exception &#123;  </span><br><span class="line">        File file = new File(&quot;person.out&quot;);  </span><br><span class="line">        ObjectOutputStream oout = new ObjectOutputStream(new FileOutputStream(file)); // æ³¨æ„è¿™é‡Œä½¿ç”¨çš„æ˜¯ ObjectOutputStream å¯¹è±¡è¾“å‡ºæµå°è£…å…¶ä»–çš„è¾“å‡ºæµ</span><br><span class="line">        Person person = new Person(&quot;John&quot;, 101, Gender.MALE);  </span><br><span class="line">        oout.writeObject(person);  </span><br><span class="line">        oout.close();  </span><br><span class="line"> </span><br><span class="line">        ObjectInputStream oin = new ObjectInputStream(new FileInputStream(file));  // ä½¿ç”¨å¯¹è±¡è¾“å…¥æµè¯»å–åºåˆ—åŒ–çš„å¯¹è±¡</span><br><span class="line">        Object newPerson = oin.readObject(); // æ²¡æœ‰å¼ºåˆ¶è½¬æ¢åˆ°Personç±»å‹  </span><br><span class="line">        oin.close();  </span><br><span class="line">        System.out.println(newPerson);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">// ä¸Šè¿°ç¨‹åºçš„è¾“å‡ºçš„ç»“æœä¸ºï¼š</span><br><span class="line">arg constructor  </span><br><span class="line">[John, 31, MALE]</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼šç®€ä¹¦<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8e4a9cac727f">https://www.jianshu.com/p/8e4a9cac727f</a></p>
<p>csdnï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u011568312/article/details/57611440">https://blog.csdn.net/u011568312/article/details/57611440</a></p>
<h3 id="MultipartFileæ¥å£"><a href="#MultipartFileæ¥å£" class="headerlink" title="MultipartFileæ¥å£"></a>MultipartFileæ¥å£</h3><p>ç”¨äºhttpä¸­è·å–å‰å°ä¼ æ¥çš„æ–‡ä»¶</p>
<p>ä½äºï¼špackage org.springframework.web.multipart;åŒ…ä¸‹<br>ä¸­æ–‡åï¼šå¤šç»„ä»¶æ–‡æ¡£<br>ç»§æ‰¿è‡ªï¼šInputStreamSource,å¹¶å°è£…äº†getInputStream()æ–¹æ³•<br>æ­¤æ–¹æ³•ç”¨æ³•ï¼š<code>@RequesParam(&quot;file&quot;)MultipartFile file</code><br><code>InputStream is  = file.getInputStream();</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String getName():å¾—åˆ°çš„æ˜¯@RequesParam(value = &quot;file&quot;)ä¸­çš„valueå€¼ï¼Œä¸ä¼šä¸ºç©ºã€‚</span><br><span class="line">String getOriginalFilename():è·å–çš„æ˜¯æ–‡ä»¶çš„å®Œæ•´åç§°ï¼ŒåŒ…æ‹¬æ–‡ä»¶åç§°+æ–‡ä»¶æ‹“å±•åã€‚</span><br><span class="line">String getContentType()ï¼šè¿”å›æ–‡ä»¶å†…å®¹ç±»å‹ï¼Œä¸æ˜¯æ–‡ä»¶æ‰©å±•åï¼ˆä¾‹å¦‚ï¼šjpegå›¾ç‰‡ï¼šimage/jpegï¼‰</span><br><span class="line">boolean isEmpty()ï¼šè¿”å›ä¸Šä¼ çš„æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼Œå³multipartå½¢å¼ä¸­æ²¡æœ‰é€‰æ‹©ä»»ä½•æ–‡ä»¶æˆ–è€…é€‰æ‹©çš„æ–‡ä»¶æ²¡æœ‰å†…å®¹</span><br><span class="line">long getSize()ï¼šä»¥å­—èŠ‚ä¸ºå•ä½è¿”å›æ–‡ä»¶å¤§å°</span><br><span class="line">byte[] getBytes()ï¼šä»¥å­—èŠ‚æ•°ç»„çš„å½¢å¼è¿”å›æ–‡ä»¶å†…å®¹</span><br><span class="line">InputStream getInputStream()ï¼šè¿”å›ä¸€ä¸ªå­—èŠ‚æµ</span><br><span class="line">void transferTo()ï¼šç”¨æ¥å°†æ¥æ”¶æ–‡ä»¶ä¼ è¾“åˆ°ç»™å®šç›®æ ‡è·¯å¾„ï¼Œä¼šæŠ›å‡ºIOExceptionã€IllegalStateExceptionå¼‚å¸¸ã€‚è¯¥æ–¹æ³•åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ä½¿ç”¨è¾ƒå°‘ã€‚</span><br></pre></td></tr></table></figure>


<h3 id="Patternç±»-amp-Matcherç±»"><a href="#Patternç±»-amp-Matcherç±»" class="headerlink" title="Patternç±»&amp;Matcherç±»"></a>Patternç±»&amp;Matcherç±»</h3><p>Patternç±»æ˜¯java.util.regexåŒ…ä¸­çš„finalç±»ã€‚æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„ç¼–è¯‘è¡¨ç¤ºå½¢å¼ï¼Œæ­¤ç±»çš„å®ä¾‹æ˜¯ä¸å¯å˜çš„ï¼Œå¯ä¾›å¤šä¸ªå¹¶å‘çº¿ç¨‹å®‰å…¨ä½¿ç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰</span><br><span class="line">public final class Pattern extends Object implements Serializable</span><br><span class="line"></span><br><span class="line">//Patternè°ƒç”¨é™æ€æ–¹æ³•compileè¿”å›Patternå®ä¾‹ã€‚</span><br><span class="line">// å°†ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘å¹¶èµ‹äºˆç»™Patternç±»</span><br><span class="line">Pattern pattern = Pattern.compile(paternStr);</span><br><span class="line"></span><br><span class="line">// å¢åŠ flagå‚æ•°çš„æŒ‡å®šï¼Œå¯é€‰çš„flagå‚æ•°åŒ…æ‹¬ï¼šCASE INSENSITIVE,MULTILINE,DOTALL,UNICODE CASEï¼Œ CANON EQ </span><br><span class="line">static Pattern compile(String regex, int flags) </span><br><span class="line">//å…ˆä¸æ˜ç™½</span><br><span class="line"></span><br><span class="line">//Pattern.split()ï¼ˆé™æ€æ–¹æ³•ï¼‰å’Œstring.split()ç”¨é€”ä¸€æ ·ï¼Œ</span><br><span class="line">//æ˜¯å°†å­—ç¬¦ä¸²ä»æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„åœ°æ–¹åˆ†å¼€</span><br><span class="line">String input = &quot;This!!unusual use!!hh!!points&quot;;</span><br><span class="line">System.out.println(Arrays.toString(Pattern.compile(&quot;!!&quot;).split(input)));</span><br><span class="line">System.out.println(Arrays.toString(Pattern.compile(&quot;!!&quot;).split(input, 3)));</span><br><span class="line">// ç¬¬äºŒç§ï¼Œç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥é™åˆ¶å°†è¾“å…¥åˆ†å‰²æˆå­—ç¬¦ä¸²çš„æ•°é‡</span><br></pre></td></tr></table></figure>

<p>æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\\d è¡¨ç¤ºæ•°å­—ï¼Œå‰é¢å¤šäº†ç¬¬ä¸€ä¸ª\ï¼Œæ˜¯è½¬ä¹‰çš„æ„æ€ã€‚</span><br><span class="line">+è¡¨ç¤ºé‡å¤å‰é¢çš„</span><br><span class="line">\\d+ è¡¨ç¤ºå¤šä¸ªæ•°å­—</span><br></pre></td></tr></table></figure>

<p>Matcherå¯¹è±¡æ˜¯ä¸€ä¸ªçŠ¶æ€æœºå™¨ï¼Œå®ƒä¾æ®Patternå¯¹è±¡åšä¸ºåŒ¹é…æ¨¡å¼å¯¹å­—ç¬¦ä¸²å±•å¼€åŒ¹é…æ£€æŸ¥ï¼Œæ­¤ç±»çš„å®ä¾‹ç”¨äºå¤šä¸ªå¹¶å‘çº¿ç¨‹æ˜¯ä¸å®‰å…¨çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Pattern.matcher é™æ€æ–¹æ³•ï¼š</span><br><span class="line">Pattern.matcher(String regex,CharSequence input)</span><br><span class="line">é™æ€æ–¹æ³•,ç”¨äºå¿«é€ŸåŒ¹é…å­—ç¬¦ä¸²,åŒ¹é…å…¨éƒ¨å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">pattern.matcher(CharSequence input):</span><br><span class="line">è¿”å›ä¸€ä¸ªMatcherå¯¹è±¡ã€‚</span><br><span class="line">Matcherç±»çš„æ„é€ æ–¹æ³•ä¹Ÿæ˜¯ç§æœ‰çš„,ä¸èƒ½éšæ„åˆ›å»º,</span><br><span class="line">åªèƒ½é€šè¿‡pattern.matcher(CharSequence input)æ–¹æ³•å¾—åˆ°è¯¥ç±»çš„å®ä¾‹</span><br><span class="line"></span><br><span class="line">Pattern p=Pattern.compile(&quot;\\d+&quot;); </span><br><span class="line">Matcher m=p.matcher(&quot;22bb23&quot;); </span><br><span class="line">m.pattern();//è¿”å›p ä¹Ÿå°±æ˜¯è¿”å›è¯¥Matcherå¯¹è±¡æ˜¯ç”±å“ªä¸ªPatternå¯¹è±¡çš„åˆ›å»ºçš„</span><br></pre></td></tr></table></figure>

<p>ç”¨Patternä»¥åŠMatcheråŒ¹é…ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String str = &quot;aa11bb&quot;;</span><br><span class="line">String paternStr = &quot;\\d+&quot;;</span><br><span class="line">Pattern pattern = Pattern.compile(paternStr);</span><br><span class="line">Matcher matcher = pattern.matcher(str);</span><br><span class="line">if (matcher.find()) &#123;   //æœ‰åŒ¹é…å°±è¡Œ</span><br><span class="line">    System.out.println(matcher.group(0));  //è¾“å‡º11</span><br><span class="line">&#125;</span><br><span class="line">if (matcher.matches()) &#123;  //éœ€è¦å®Œå…¨åŒ¹é…</span><br><span class="line">    System.out.println(matcher.group(0));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šæ–¹æ³•ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/woniu317/article/details/52186694">https://blog.csdn.net/woniu317/article/details/52186694</a><br><a target="_blank" rel="noopener" href="http://www.51gjie.com/java/759.html">http://www.51gjie.com/java/759.html</a></p>
<h3 id="Functionæ¥å£"><a href="#Functionæ¥å£" class="headerlink" title="Functionæ¥å£"></a>Functionæ¥å£</h3><p>JDKæä¾›äº†å¤§é‡å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£ä»¥ä¸°å¯ŒLambdaçš„å…¸å‹ä½¿ç”¨åœºæ™¯ï¼Œå®ƒä»¬ä¸»è¦åœ¨ java.util.function åŒ…ä¸­è¢«æä¾›ã€‚ </p>
<p>java.util.function.Function&lt;T,R&gt; æ¥å£ç”¨æ¥æ ¹æ®ä¸€ä¸ªç±»å‹çš„æ•°æ®å¾—åˆ°å¦ä¸€ä¸ªç±»å‹çš„æ•°æ®ï¼Œå‰è€…ç§°ä¸ºå‰ç½®æ¡ä»¶ï¼Œåè€…ç§°ä¸ºåç½®æ¡ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@FunctionalInterface</span><br><span class="line">public interface Function&lt;T, R&gt; &#123;</span><br><span class="line">    R apply(T t);</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å­ï¼šèµ·åˆ°äº†è½¬æ¢ç±»å‹çš„ä½œç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class FunctionTest &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        method(s -&gt; Integer.parseInt(s));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void method(Function&lt;String, Integer&gt; function) &#123;</span><br><span class="line">        int num = function.apply(&quot;10&quot;);</span><br><span class="line">        System.out.println(num + 20);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–æ–¹æ³•ï¼šå¦‚andThenæ–¹æ³•<br><a target="_blank" rel="noopener" href="http://t.zoukankan.com/liyihua-p-12286100.html">http://t.zoukankan.com/liyihua-p-12286100.html</a></p>
<p>å’Œ@FunctionalInterfaceä½œç”¨ä¸€æ ·ï¼Ÿ</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/30/myblog/JAVA/fastjson/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/30/myblog/JAVA/fastjson/" class="post-title-link" itemprop="url">fastjson</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-30 09:44:44" itemprop="dateCreated datePublished" datetime="2022-04-30T09:44:44+08:00">2022-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-09-11 15:56:05" itemprop="dateModified" datetime="2022-09-11T15:56:05+08:00">2022-09-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>fastjsonæ˜¯é˜¿é‡Œå‡ºå“çš„å¤„ç†JSONå­—ç¬¦ä¸²çš„Javaç±»åº“ï¼Œå¯ä»¥å¯¹JSONå­—ç¬¦ä¸²ã€JSONå¯¹è±¡ã€Javaå¯¹è±¡è¿›è¡Œäº’ç›¸è½¬æ¢ã€‚éœ€è¦å¯¼å…¥fastjsonåŒ…ã€‚</p>
<h3 id="Stringã€JSONObjectã€Objectè½¬æ¢"><a href="#Stringã€JSONObjectã€Objectè½¬æ¢" class="headerlink" title="Stringã€JSONObjectã€Objectè½¬æ¢"></a>Stringã€JSONObjectã€Objectè½¬æ¢</h3><p>ä¸€ã€å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡/æ•°ç»„<br>å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡<br>JSON.parseObject(String text)<br>JSON.parse(String text)</p>
<p>å­—ç¬¦ä¸²è½¬æˆJSONæ•°ç»„<br>JSON.parseArray(String text)<br>JSON.parse(String text)</p>
<p>äºŒã€å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡/åˆ—è¡¨<br>å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡<br>JSON.parseObject(String text, Class<T> clazz)</T></p>
<p>å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡åˆ—è¡¨<br>JSON.parseArray(String text, Class<T> clazz)</T></p>
<p>ä¸‰ã€Javaå¯¹è±¡/åˆ—è¡¨è½¬æˆJSONå¯¹è±¡/æ•°ç»„<br>Javaå¯¹è±¡è½¬æˆJSONå¯¹è±¡<br>JSONObject.toJSON(Object javaObject)<br>JSON.toJSON(Object javaObject)</p>
<p>Javaå¯¹è±¡åˆ—è¡¨è½¬æˆJSONæ•°ç»„<br>JSONArray.toJSON(Object javaObject)<br>JSON.toJSON(Object javaObject)</p>
<p>å››ã€JSONå¯¹è±¡/æ•°ç»„è½¬æˆJavaå¯¹è±¡/åˆ—è¡¨<br>JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡<br>JSON.toJavaObject(JSON json, Class<T> clazz)<br>jsonObject.toJavaObject(JSON json) (éé™æ€æ–¹æ³•)</T></p>
<p>JSONæ•°ç»„è½¬æˆJavaå¯¹è±¡åˆ—è¡¨<br>jsonArray.toJavaList(Class<T> clazz) (éé™æ€æ–¹æ³•)</T></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.alibaba.fastjson.JSONArray;</span><br><span class="line">import com.alibaba.fastjson.JSONObject;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">public class FastJSONLearning &#123;</span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">    String jsonObjectStr = &quot;&#123;\&quot;prop\&quot;:\&quot;code\&quot;,\&quot;label\&quot;:\&quot;ä»£ç \&quot;,\&quot;required\&quot;:true,\&quot;key\&quot;:true&#125;&quot;;</span><br><span class="line">    String jsonArrayStr = &quot;[&#123;\&quot;prop\&quot;:\&quot;code\&quot;,\&quot;label\&quot;:\&quot;ä»£ç \&quot;,\&quot;required\&quot;:true,\&quot;key\&quot;:true&#125;,&#123;\&quot;prop\&quot;:\&quot;explain\&quot;,\&quot;label\&quot;:\&quot;ä¸­æ–‡é‡Šä¹‰\&quot;,\&quot;required\&quot;:true&#125;]&quot;;</span><br><span class="line"> </span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡/æ•°ç»„</span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    JSONObject jsonObject1 = JSON.parseObject(jsonObjectStr);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡: &quot; + jsonObject1);</span><br><span class="line"> </span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    JSONObject jsonObject2 = (JSONObject) JSON.parse(jsonObjectStr);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡: &quot; + jsonObject2);</span><br><span class="line"> </span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJSONæ•°ç»„</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    JSONArray jsonArray1 = JSON.parseArray(jsonArrayStr);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJSONæ•°ç»„: &quot; + jsonArray1);</span><br><span class="line"> </span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    JSONArray jsonArray2 = (JSONArray) JSON.parse(jsonArrayStr);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJSONæ•°ç»„: &quot; + jsonArray2);</span><br><span class="line"> </span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡/åˆ—è¡¨</span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡</span><br><span class="line">    Dict dict = JSON.parseObject(jsonObjectStr, Dict.class);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡: &quot; + dict.toString());</span><br><span class="line"> </span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡åˆ—è¡¨</span><br><span class="line">    List&lt;Dict&gt; dictList = JSON.parseArray(jsonArrayStr, Dict.class);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡åˆ—è¡¨: &quot; + dictList.toString());</span><br><span class="line"> </span><br><span class="line">    // Javaå¯¹è±¡/åˆ—è¡¨è½¬æˆJSONå¯¹è±¡/æ•°ç»„</span><br><span class="line">    // Javaå¯¹è±¡è½¬æˆJSONå¯¹è±¡</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    JSONObject jsonObject3 = (JSONObject) JSONObject.toJSON(dict);</span><br><span class="line">    System.out.println(&quot;Javaå¯¹è±¡è½¬æˆJSONå¯¹è±¡: &quot; + jsonObject3.toJSONString());</span><br><span class="line"> </span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    JSONObject jsonObject4 = (JSONObject) JSON.toJSON(dict);</span><br><span class="line">    System.out.println(&quot;Javaå¯¹è±¡è½¬æˆJSONå¯¹è±¡: &quot; + jsonObject4.toJSONString());</span><br><span class="line"> </span><br><span class="line">    // Javaå¯¹è±¡åˆ—è¡¨è½¬æˆJSONæ•°ç»„</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    JSONArray jsonArray3 = (JSONArray) JSONArray.toJSON(dictList);</span><br><span class="line">    System.out.println(&quot;Javaå¯¹è±¡åˆ—è¡¨è½¬æˆJSONæ•°ç»„: &quot; + jsonArray3.toJSONString());</span><br><span class="line"> </span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    JSONArray jsonArray4 = (JSONArray) JSON.toJSON(dictList);</span><br><span class="line">    System.out.println(&quot;Javaå¯¹è±¡åˆ—è¡¨è½¬æˆJSONæ•°ç»„: &quot; + jsonArray4.toJSONString());</span><br><span class="line"> </span><br><span class="line">    // JSONå¯¹è±¡/æ•°ç»„è½¬æˆJavaå¯¹è±¡/åˆ—è¡¨</span><br><span class="line">    // JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    Dict dict1 = JSON.toJavaObject(jsonObject1, Dict.class);</span><br><span class="line">    System.out.println(&quot;JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡: &quot; + dict1);</span><br><span class="line"> </span><br><span class="line">    // JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡</span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    Dict dict2 = jsonObject1.toJavaObject(Dict.class);</span><br><span class="line">    System.out.println(&quot;JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡: &quot; + dict2);</span><br><span class="line"> </span><br><span class="line">    // JSONæ•°ç»„è½¬æˆJavaå¯¹è±¡åˆ—è¡¨</span><br><span class="line">    List&lt;Dict&gt; dictList1 = jsonArray1.toJavaList(Dict.class);</span><br><span class="line">    System.out.println(&quot;JSONæ•°ç»„è½¬æˆJavaå¯¹è±¡åˆ—è¡¨: &quot; + dictList1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lasdaybg/p/15144350.html">https://www.cnblogs.com/lasdaybg/p/15144350.html</a></p>
<h3 id="jsonæ–‡ä»¶ä¸­è·å–"><a href="#jsonæ–‡ä»¶ä¸­è·å–" class="headerlink" title="jsonæ–‡ä»¶ä¸­è·å–"></a>jsonæ–‡ä»¶ä¸­è·å–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class JsonTest &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void TestJ()&#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            File jsonFile = ResourceUtils.getFile(&quot;classpath:hello.json&quot;);</span><br><span class="line">            String s = FileUtils.readFileToString(jsonFile);</span><br><span class="line">            System.out.println(&quot;s:&quot;+s);</span><br><span class="line">        &#125; catch(Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;error:&quot;+e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>FileUtils éœ€è¦å¯¼åŒ…ï¼šcommons-ioã€‚<br>classpathè¡¨ç¤ºé¡¹ç›®ä¸­çš„resourceæ–‡ä»¶å¤¹ã€‚</p>
<h3 id="JSONObjectã€JSONArray"><a href="#JSONObjectã€JSONArray" class="headerlink" title="JSONObjectã€JSONArray"></a>JSONObjectã€JSONArray</h3><p>ä¹Ÿæ˜¯fastjsonä¸‹çš„</p>
<p>JSONæ˜¯äº’è”ç½‘å¼€å‘è¿‡ç¨‹ä¸­åº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§æ•°æ®ç±»å‹ï¼Œä¸ç®¡æ˜¯åç«¯APIæ¥å£ä¸­ï¼Œè¿˜æ˜¯åœ¨å‰ç«¯éƒ½èƒ½å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚JSON å°±æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œè¢«å¹¿æ³›åº”ç”¨äº WEB åº”ç”¨ç¨‹åºå¼€å‘</p>
<p>åœ¨çº¿è§£æï¼š<a target="_blank" rel="noopener" href="https://c.runoob.com/front-end/53/">https://c.runoob.com/front-end/53/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;area&quot;: &quot;å±±ä¸œèæ³½&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;é©¬é©¬é©¬é©¬é©¬ç™¾ä¸‡&quot;,</span><br><span class="line">  &quot;age&quot;: [1,2,3]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JSONã€JSONå¯¹è±¡ã€JSONæ•°ç»„åŒºåˆ«<br>JSON å‘¢åªæ˜¯ä¸€ç§å®è§‚ä¸Šçš„å«æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå°±åƒ xml ç»“æ„ä¸€æ ·ï¼Œæ˜¯ä¸€ç§è§„çº¦æ€§å†…å®¹ï¼›è€Œ JSON å¯¹è±¡åˆ™æ˜¯å¯¹ JSON çš„å…·ä½“ä½“ç°ï¼›JSON æ•°ç»„åˆ™æ˜¯å°†å¤šä¸ª JSON å¯¹è±¡è¿›è¡Œå­˜å‚¨çš„ä¸€ä¸ªé›†åˆï¼Œå¯ä»¥æƒ³è±¡æˆ Java ä¸­çš„ List å’Œ Object çš„å…³ç³»</p>
<h4 id="JSONObject"><a href="#JSONObject" class="headerlink" title="JSONObject"></a>JSONObject</h4><p>JSONObject æ˜¯æ ¹æ® JSON å½¢å¼åœ¨ Java ä¸­å­˜åœ¨çš„å¯¹è±¡æ˜ å°„<br>å„å¤§ JSON ç±»åº“çš„ JSONObject å†…éƒ¨å®ç°ä¹Ÿæ˜¯ä¸å¤ªä¸€æ ·çš„ã€‚<br>ä¾‹å¦‚fastjsonï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class JSONObject extends JSON implements Map&lt;String, Object&gt;, Cloneable, Serializable, InvocationHandler &#123;</span><br><span class="line">&#125;</span><br><span class="line">å¯¹ HashMap çš„ä¸€å±‚å°è£…ï¼Œå¹¶æä¾›äº†ä¸€äº›ä¸ªæ€§åŒ–æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JSONObject json = new JSONObject();</span><br><span class="line">json.put(&quot;key&quot;,&quot;value&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="JSONArray"><a href="#JSONArray" class="headerlink" title="JSONArray"></a>JSONArray</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class JSONArray extends JSON implements List&lt;Object&gt;, Cloneable, RandomAccess, Serializable &#123;</span><br><span class="line">&#125;</span><br><span class="line">ä¸€ä¸ª List ä¸­ å¥—äº†ä¸ª Map ç±»ç»“æ„</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">JSONObject person = new JSONObject();</span><br><span class="line">person.put(&quot;name&quot;, &quot;é©¬é©¬é©¬é©¬é©¬ç™¾ä¸‡&quot;);</span><br><span class="line">JSONObject drug = new JSONObject();</span><br><span class="line">drug.put(&quot;drugName&quot;, &quot;ç›é…¸ä¸å¡å› æ³¨å°„æ¶²&quot;);</span><br><span class="line">JSONArray array = new JSONArray();</span><br><span class="line">array.add(person);</span><br><span class="line">array.add(drug);</span><br></pre></td></tr></table></figure>

<h4 id="å„ç§è½¬æ¢"><a href="#å„ç§è½¬æ¢" class="headerlink" title="å„ç§è½¬æ¢"></a>å„ç§è½¬æ¢</h4><p>æ™®é€šå¯¹è±¡ã€jsonå­—ç¬¦ä¸²ã€jsonObject</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å°†å¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">String jsonStr = JSON.toJSONString(person);</span><br><span class="line">å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONObjectå¯¹è±¡</span><br><span class="line">JSONObject jsonObject = JSON.parseObject(jsonStr);</span><br><span class="line">å°†JSONObject è½¬æ¢ä¸ºå¯¹è±¡</span><br><span class="line">JSONObject person = new JSONObject();</span><br><span class="line">person.put(&quot;name&quot;, &quot;é©¬é©¬é©¬é©¬é©¬ç™¾ä¸‡&quot;);</span><br><span class="line">person.put(&quot;age&quot;, 25);</span><br><span class="line">Student stuObj = JSON.toJavaObject(person, Student.class);</span><br></pre></td></tr></table></figure>

<h3 id="ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡"><a href="#ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡"></a>ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">B = JSON.parseObject(JSON.toString(a), b.class)</span><br></pre></td></tr></table></figure>


<h3 id="getJSONObjectã€getJSONArray"><a href="#getJSONObjectã€getJSONArray" class="headerlink" title="getJSONObjectã€getJSONArray"></a>getJSONObjectã€getJSONArray</h3><p>Fastjsonä¸­getJSONObject()ä¸getJSONArray()ï¼Œç”¨äºè·å–JSONObjecté‡Œçš„JSONObjectã€JSONArray()ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;    &quot;package&quot;: &#123;</span><br><span class="line">        &quot;List1&quot;: &#123;</span><br><span class="line">            &quot;errorCode&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;errorMsg&quot;: &quot;Success&quot;,</span><br><span class="line">            &quot;receiverTradeNum&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;List2&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;medicalNum&quot;: &quot;15XXXXXX&quot;,</span><br><span class="line">                &quot;queryDate&quot;: &quot;YYYYMMDD&quot;,</span><br><span class="line">                &quot;name&quot;: &quot;XXX&quot;,</span><br><span class="line">                &quot;authorizationNum&quot;: &quot;xxxxx&quot;,</span><br><span class="line">                &quot;pageNum&quot;: &quot;1&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">JSONObject jsonObj = JSON.parseObject(jsonStr);</span><br><span class="line">JSONObject package = jsonObj.getJSONObject(&quot;package&quot;);     // å®šä½åˆ°package jsonå¯¹è±¡</span><br><span class="line">JSONArray list = package.getJSONArray(&quot;List2&quot;);   //é‡‡ç”¨getJSONArrayæ–¹æ³•ï¼Œ å®šä½åˆ°jsoné›†åˆ</span><br></pre></td></tr></table></figure>


<h3 id="XStream"><a href="#XStream" class="headerlink" title="XStream"></a>XStream</h3><p>XStreamæ˜¯Javaç±»åº“ï¼Œç”¨æ¥å°†å¯¹è±¡åºåˆ—åŒ–æˆXMLï¼ˆJSONï¼‰æˆ–ååºåˆ—åŒ–ä¸ºå¯¹è±¡ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨XStreamï¼Œæˆ‘ä»¬å¯ä»¥æŠŠJavaå¯¹è±¡è½¬æ¢æˆXMLï¼Œä¹Ÿå¯ä»¥å°†XMLè½¬æ¢ä¸ºJavaå¯¹è±¡ã€‚</p>
<p>ä¾èµ–ï¼š<br>XStreamçš„å¿…å¯¼JARåŒ…ï¼š<br>æ ¸å¿ƒJARåŒ…ï¼šxstream-1.4.7.jarï¼›<br>å¿…é¡»ä¾èµ–åŒ…ï¼šxpp3_min-1.1.4c.jarï¼ˆXML Pull Parserï¼Œä¸€æ¬¾é€Ÿåº¦å¾ˆå¿«çš„XMLè§£æå™¨ï¼‰ã€‚</p>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">XStream xStream = new XStream();</span><br><span class="line">xStream.alias(&quot;china&quot;, List.class);   //æ ‡ç­¾ç±»æ¢æˆæŒ‡å®šå­—ç¬¦</span><br><span class="line">xStream.alias(&quot;province&quot;, Province.class);</span><br><span class="line">xStream.alias(&quot;city&quot;, City.class);</span><br><span class="line"></span><br><span class="line">xStream.useAttributeFor(Province.class, &quot;name&quot;); //å­å…ƒç´ ç¼–ç¨‹ç†Ÿæ‚‰</span><br><span class="line">xStream.addImplicitCollection(Province.class, &quot;cities&quot;);  //å»æ‰citiesæ ‡ç­¾</span><br><span class="line"></span><br><span class="line">String string = xStream.toXML(proList);</span><br><span class="line">System.out.println(string);</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u014565127/article/details/104419528">https://blog.csdn.net/u014565127/article/details/104419528</a></p>
<p><strong>é«˜å¹¶å‘æƒ…å†µä¸‹çš„æ€§èƒ½é—®é¢˜</strong></p>
<p>é¡¹ç›®ä¸­ä½¿ç”¨äº†XStreamè¿›è¡ŒXMLåºåˆ—åŒ–ã€ååºåˆ—åŒ–çš„æ–¹æ¡ˆï¼Œå®ŒæˆæœåŠ¡ä¹‹é—´çš„æ¥å£æŠ¥æ–‡Objectä¸Xmlgæ ¼å¼ä¹‹é—´çš„è½¬åŒ–ã€‚</p>
<p>å½“çº¿ä¸Šä¸šåŠ¡é‡å¹¶ä¸å¤§çš„æƒ…å†µä¸‹ï¼Œä¸€åˆ‡æ­£å¸¸ï¼›ä½†æ˜¯å‘ç°å½“ä¸šåŠ¡é‡çªç„¶åŠ å¤§çš„æƒ…å†µä¸‹ï¼Œçªç„¶å‘ç°ï¼Œçº¿ä¸ŠæœåŠ¡å™¨å‡ºç°CPUå±…é«˜ä¸ä¸‹ï¼ŒæœåŠ¡æ¥å£è°ƒç”¨é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œç ”ç©¶JVMæ—¥å¿—åˆ†æï¼Œå‘ç°å‡ºç°å¾ˆå¤šçš„RUNNABLEé—®é¢˜ã€‚</p>
<p>é—®é¢˜åŸå› ï¼šXStreamåœ¨newçš„æ—¶å€™ä¼šåˆ›å»ºCompositeClassLoaderï¼ˆåˆå§‹ç±»åŠ è½½å™¨ï¼‰ï¼Œå¹¶ä¸”ä¸æ–­newä¼šä¸æ–­åˆ›å»ºï¼Œå¯¼è‡´ygcéœ€è¦æ‰«æçš„å†…å®¹è¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆå¯¼è‡´æ¥å£è°ƒç”¨æ€§èƒ½ä¸‹é™ã€‚</p>
<p>XStreamæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸éœ€è¦é‡å¤åˆå§‹åŒ–xstreamå¯¹è±¡ï¼Œæ¯ä¸€ç§ç±»å‹å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡å³å¯ï¼Œè€Œæ­£æ˜¯ç”±äºå¼€å‘äººå‘˜é”™è¯¯åœ°åœ¨æ¯æ¬¡å¤„ç†æ—¶éƒ½å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„xstreamå¯¹è±¡ï¼Œæ‰å¯¼è‡´äº†è¯¥é—®é¢˜ã€‚</p>
<p>è§£å†³ï¼šå•åˆ—æ¨¡å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">åŸæ¥ï¼š</span><br><span class="line">XStream xstream = XStreamInitializer.getInstance();</span><br><span class="line">xstream.processAnnotations(this.getClass());</span><br><span class="line">xstream.aliasSystemAttribute(null, &quot;class&quot;);</span><br><span class="line">return xstream.toXML(this);</span><br><span class="line"></span><br><span class="line">ç°åœ¨ï¼š</span><br><span class="line">å®ç°å•åˆ—ï¼š</span><br><span class="line">public class XmlHandler&#123;</span><br><span class="line"></span><br><span class="line">    private static final ConcurrentHashMap xStream = new ConcurrentHashMap&lt;String, XStream&gt;();</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * åˆå§‹åŒ–</span><br><span class="line">     * @param objName</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    private static XStream getXStream(Class&lt;?&gt; objName) &#123;</span><br><span class="line">        String key = objName.getName();</span><br><span class="line">        if (xStream.get(key) == null)</span><br><span class="line">            xStream.put(key, new XStream());</span><br><span class="line">        return (XStream) xStream.get(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">åºåˆ—åŒ–ï¼š</span><br><span class="line">XStream xstream = XmlHandler.getXStream(Dog.class);</span><br><span class="line">xstream.processAnnotations(Dog.class);</span><br><span class="line">String xml = xstream.toXML(dog);</span><br><span class="line"></span><br><span class="line">ååºåˆ—åŒ–ï¼š</span><br><span class="line">XStream xStream = XmlHandler.getXStream(Dog.class);</span><br><span class="line">xStream.processAnnotations(Dog.class);</span><br><span class="line">Dog dog = (Dog) xStream.fromXML(xml);</span><br></pre></td></tr></table></figure>

<p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43767602/article/details/114824028">https://blog.csdn.net/weixin_43767602/article/details/114824028</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/29/myblog/JAVA/java%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/29/myblog/JAVA/java%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">javaå¸¸è§„æ³¨è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-29 22:56:27" itemprop="dateCreated datePublished" datetime="2022-04-29T22:56:27+08:00">2022-04-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-09-11 16:08:37" itemprop="dateModified" datetime="2022-09-11T16:08:37+08:00">2022-09-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ä»JDK5å¼€å§‹,Javaå¢åŠ å¯¹å…ƒæ•°æ®çš„æ”¯æŒï¼Œä¹Ÿå°±æ˜¯æ³¨è§£ï¼Œæ³¨è§£ä¸æ³¨é‡Šæ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„ï¼Œå¯ä»¥æŠŠæ³¨è§£ç†è§£ä¸ºä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°ï¼Œè¿™äº›æ ‡è®°å¯ä»¥åœ¨ç¼–è¯‘ï¼Œç±»åŠ è½½ï¼Œè¿è¡Œæ—¶è¢«è¯»å–ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å¤„ç†ã€‚é€šè¿‡æ³¨è§£å¼€å‘äººå‘˜å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç å’Œé€»è¾‘çš„æƒ…å†µä¸‹åœ¨æºä»£ç ä¸­åµŒå…¥è¡¥å……ä¿¡æ¯ã€‚</p>
<p>æ‰€æœ‰çš„æ³¨è§£æœ¬è´¨ä¸Šéƒ½æ˜¯ç»§æ‰¿è‡ª Annotation æ¥å£ã€‚ä½†æ˜¯ï¼Œæ‰‹åŠ¨å®šä¹‰ä¸€ä¸ªæ¥å£ç»§æ‰¿ Annotation æ¥å£æ— æ•ˆçš„ï¼Œéœ€è¦é€šè¿‡ @interface å£°æ˜æ³¨è§£ï¼ŒAnnotation æ¥å£æœ¬èº«ä¹Ÿä¸å®šä¹‰æ³¨è§£ç±»å‹ï¼Œåªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ¥å£ã€‚</p>
<h3 id="Pattern"><a href="#Pattern" class="headerlink" title="@Pattern"></a>@Pattern</h3><p>ç”¨æ¥é™å®šstringæ ¼å¼ï¼Œç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥é™å®šã€‚<br>éœ€è¦å¯¼å…¥validation-apiåŒ…ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Getter</span><br><span class="line">    @Setter</span><br><span class="line">    public static class StudentVO&#123;</span><br><span class="line">        @Pattern(regexp = &quot;^[A-Za-z]+$&quot;, message = &quot;åªèƒ½å­—æ¯&quot;)</span><br><span class="line">        private String name;</span><br><span class="line">        private Long age;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">1 åŒ¹é…é¦–å°¾ç©ºæ ¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š(^\s*)|(\s*$)</span><br><span class="line">  2 æ•´æ•°æˆ–è€…å°æ•°ï¼š^[0-9]+\.&#123;0,1&#125;[0-9]&#123;0,2&#125;$</span><br><span class="line">  3 åªèƒ½è¾“å…¥æ•°å­—ï¼š&quot;^[0-9]*$&quot;ã€‚</span><br><span class="line">  4 åªèƒ½è¾“å…¥nä½çš„æ•°å­—ï¼š&quot;^\d&#123;n&#125;$&quot;ã€‚</span><br><span class="line">  5 åªèƒ½è¾“å…¥è‡³å°‘nä½çš„æ•°å­—ï¼š&quot;^\d&#123;n,&#125;$&quot;ã€‚</span><br><span class="line">  6 åªèƒ½è¾“å…¥m~nä½çš„æ•°å­—ï¼šã€‚&quot;^\d&#123;m,n&#125;$&quot;</span><br><span class="line">  7 åªèƒ½è¾“å…¥é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—ï¼š&quot;^(0|[1-9][0-9]*)$&quot;ã€‚</span><br><span class="line">  8 åªèƒ½è¾“å…¥æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°ï¼š&quot;^[0-9]+(.[0-9]&#123;2&#125;)?$&quot;ã€‚</span><br><span class="line">  9 åªèƒ½è¾“å…¥æœ‰1~3ä½å°æ•°çš„æ­£å®æ•°ï¼š&quot;^[0-9]+(.[0-9]&#123;1,3&#125;)?$&quot;ã€‚</span><br><span class="line"> 10 åªèƒ½è¾“å…¥éé›¶çš„æ­£æ•´æ•°ï¼š&quot;^\+?[1-9][0-9]*$&quot;ã€‚</span><br><span class="line"> 11 åªèƒ½è¾“å…¥éé›¶çš„è´Ÿæ•´æ•°ï¼š&quot;^\-[1-9][]0-9&quot;*$ã€‚</span><br><span class="line"> 12 åªèƒ½è¾“å…¥é•¿åº¦ä¸º3çš„å­—ç¬¦ï¼š&quot;^.&#123;3&#125;$&quot;ã€‚</span><br><span class="line"> 13 åªèƒ½è¾“å…¥ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^[A-Za-z]+$&quot;ã€‚</span><br><span class="line"> 14 åªèƒ½è¾“å…¥ç”±26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^[A-Z]+$&quot;ã€‚</span><br><span class="line"> 15 åªèƒ½è¾“å…¥ç”±26ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^[a-z]+$&quot;ã€‚</span><br><span class="line"> 16 åªèƒ½è¾“å…¥ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^[A-Za-z0-9]+$&quot;ã€‚</span><br><span class="line"> 17 åªèƒ½è¾“å…¥ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^\w+$&quot;ã€‚</span><br><span class="line"> 18 éªŒè¯ç”¨æˆ·å¯†ç ï¼š&quot;^[a-zA-Z]\w&#123;5,17&#125;$&quot;æ­£ç¡®æ ¼å¼ä¸ºï¼šä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6~18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—ç¬¦ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚</span><br><span class="line"> 19 éªŒè¯æ˜¯å¦å«æœ‰^%&amp;&#x27;,;=?$\&quot;ç­‰å­—ç¬¦ï¼š&quot;[^%&amp;&#x27;,;=?$\x22]+&quot;ã€‚</span><br><span class="line"> 20 åªèƒ½è¾“å…¥æ±‰å­—ï¼š&quot;^[\u4e00-\u9fa5]&#123;0,&#125;$&quot;</span><br><span class="line"> 21 éªŒè¯Emailåœ°å€ï¼š&quot;^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$&quot;ã€‚</span><br><span class="line"> 22 éªŒè¯InternetURLï¼š&quot;^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$&quot;ã€‚</span><br><span class="line"> 23 éªŒè¯ç”µè¯å·ç ï¼š&quot;^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$&quot;æ­£ç¡®æ ¼å¼ä¸ºï¼š&quot;XXX-XXXXXXX&quot;ã€&quot;XXXX-XXXXXXXX&quot;ã€&quot;XXX-XXXXXXX&quot;ã€&quot;XXX-XXXXXXXX&quot;ã€&quot;XXXXXXX&quot;å’Œ&quot;XXXXXXXX&quot;ã€‚</span><br><span class="line"> 24 éªŒè¯èº«ä»½è¯å·ï¼ˆ15ä½æˆ–18ä½æ•°å­—ï¼‰ï¼š&quot;^\d&#123;15&#125;|\d&#123;18&#125;$&quot;ã€‚</span><br><span class="line"> 25 éªŒè¯ä¸€å¹´çš„12ä¸ªæœˆï¼š&quot;^(0?[1-9]|1[0-2])$&quot;æ­£ç¡®æ ¼å¼ä¸ºï¼š&quot;01&quot;ï½&quot;09&quot;å’Œ&quot;1&quot;ï½&quot;12&quot;ã€‚</span><br><span class="line"> 26 éªŒè¯ä¸€ä¸ªæœˆçš„31å¤©ï¼š&quot;^((0?[1-9])|((1|2)[0-9])|30|31)$&quot;æ­£ç¡®æ ¼å¼ä¸ºï¼›&quot;01&quot;ï½&quot;09&quot;å’Œ&quot;1&quot;ï½&quot;31&quot;ã€‚</span><br><span class="line"> 27 åŒ¹é…ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š [\u4e00-\u9fa5]</span><br><span class="line"> 28 åŒ¹é…åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…)ï¼š[^\x00-\xff]</span><br><span class="line"> 29 åº”ç”¨ï¼šè®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1ï¼‰</span><br><span class="line"> 30 String.prototype.len=function()&#123;return this.replace(/[^\x00-\xff]/g,&quot;aa&quot;).length;&#125;</span><br><span class="line"> 31 åŒ¹é…ç©ºè¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n[\s| ]*\r</span><br><span class="line"> 32 åŒ¹é…htmlæ ‡ç­¾çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š&lt;(.*)&gt;(.*)&lt;\/(.*)&gt;|&lt;(.*)\/&gt;</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/qq_36927265/article/details/87864026</span><br></pre></td></tr></table></figure>

<p>åœ¨controlå±‚ï¼Œå‰ç«¯è°ƒç”¨æ¥è¿›è¡Œæ•°æ®æ ¡éªŒã€‚</p>
<p>ä¸€ã€VOå¯¹è±¡å†…ç”¨@Patterné™å®šï¼Œcontrolæ–¹æ³•ä¸­ç”¨@Validæ£€æŸ¥ã€‚<br><a target="_blank" rel="noopener" href="http://www.wpf123.com/post/97.html">http://www.wpf123.com/post/97.html</a></p>
<p>äºŒã€controlç±»ç”¨@Validatedæ³¨è§£ï¼Œæ–¹æ³•å†…Stringå‚æ•°ç”¨@Pattern</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@Validated</span><br><span class="line">class Controller &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping</span><br><span class="line">public ResponseEntity&lt;List&lt;Permission&gt;&gt; query(</span><br><span class="line">    @RequestHeader(&quot;iv-user&quot;) String userId,</span><br><span class="line">        @Pattern(regexp = &quot;^accessor$&quot;, message = &quot;è¯·æ±‚å‚æ•°ä¸åˆæ³•&quot;)</span><br><span class="line">        @RequestParam(&quot;findBy&quot;) String accessor,</span><br><span class="line">        @RequestParam(&quot;accessorId&quot;) long accessorId)&#123;</span><br><span class="line">        //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="JSONField"><a href="#JSONField" class="headerlink" title="@JSONField"></a>@JSONField</h3><p>æ¥è‡ªfastjsonï¼Œfastjsonæ˜¯é˜¿é‡Œå·´å·´å‡ºå“çš„å¿«é€Ÿè§£æjsonçš„ä¸€ä¸ªå·¥å…·,</p>
<p>ä¸€ã€nameå±æ€§ï¼šç”¨æ¥æŒ‡å®šJSONä¸²ä¸­keyçš„åç§°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@JSONField(name = &quot;AGE&quot;)</span><br><span class="line">private String age;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½œç”¨åœ¨setterã€getteræ–¹æ³•ä¸Šã€‚</p>
<p>äºŒã€formatè§„å®šæ—¥æœŸæ ¼å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@JSONField(format=&quot;yyyy-MM-dd HH:mm:ss&quot;)</span><br><span class="line">private Date date;</span><br></pre></td></tr></table></figure>

<p>ä¸‰ã€ordinalï¼šè§„å®šå­—æ®µçš„é¡ºåº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@JSONField(ordinal = 3)</span><br><span class="line">private int f0;</span><br><span class="line"></span><br><span class="line">@JSONField(ordinal = 2)</span><br><span class="line">private int f1;</span><br><span class="line"></span><br><span class="line">@JSONField(ordinal = 1)</span><br><span class="line">private int f2;</span><br></pre></td></tr></table></figure>

<p>å››ã€serialize/deserializeæŒ‡å®šå­—æ®µä¸åºåˆ—åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@JSONField(serialize=false)</span><br><span class="line">public Date date;</span><br></pre></td></tr></table></figure>

<h3 id="ToString"><a href="#ToString" class="headerlink" title="@ToString"></a>@ToString</h3><p>LomBokä¸­çš„æ³¨è§£ï¼Œç”¨æ¥ç®€åŒ–ä»£ç ã€‚</p>
<p>1.é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†æ‰“å°æ‰€æœ‰éé™æ€å­—æ®µã€‚<br>2.å¦‚æœè¦è·³è¿‡æŸäº›å­—æ®µï¼Œå¯ä»¥ç”¨æ³¨é‡Šè¿™äº›å­—æ®µ@ToString.Excludeã€‚<br>3.å¯ä»¥ä½¿ç”¨ç²¾ç¡®æŒ‡å®šè¦è¢«toStringæ–¹æ³•åŒ…å«çš„å­—æ®µï¼Œå…ˆè®¾ç½®@ToString(onlyExplicitlyIncluded = true)ï¼Œç„¶åä½¿ç”¨@ToString.Includeæ ‡è®°æ¯ä¸ªè¦åŒ…å«çš„å­—æ®µã€‚<br>4.å¯ä»¥æ›´æ”¹ç”¨äºæ ‡è¯†æˆå‘˜çš„åç§°@ToString.Include(name = â€œsome other nameâ€)ï¼Œnameç›¸å½“äºç»™å­—æ®µèµ·åˆ«åã€‚<br>5.å¯ä»¥é€šè¿‡æ›´æ”¹æˆå‘˜çš„æ‰“å°é¡ºåº@ToString.Include(rank = 1)ã€‚rank è¡¨ç¤ºè¯¥å­—æ®µçš„ä¼˜å…ˆçº§ï¼Œå€¼è¶Šå¤§æ’åœ¨è¶Šå‰é¢ï¼Œé»˜è®¤ä¸º 0ï¼Œç­‰çº§ç›¸åŒçš„æˆå‘˜ä»¥å®ƒä»¬åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºæ‰“å°ã€‚</p>
<h3 id="CrossOrigin"><a href="#CrossOrigin" class="headerlink" title="@CrossOrigin"></a>@CrossOrigin</h3><p>å‡ºäºå®‰å…¨åŸå› ï¼Œæµè§ˆå™¨ç¦æ­¢Ajaxè°ƒç”¨é©»ç•™åœ¨å½“å‰åŸç‚¹ä¹‹å¤–çš„èµ„æºã€‚</p>
<p>è·¨æºèµ„æºå…±äº«ï¼ˆCORSï¼‰æ˜¯ç”±å¤§å¤šæ•°æµè§ˆå™¨å®ç°çš„W3Cè§„èŒƒï¼Œå…è®¸æ‚¨çµæ´»åœ°æŒ‡å®šä»€ä¹ˆæ ·çš„è·¨åŸŸè¯·æ±‚è¢«æˆæƒï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸€äº›ä¸å¤ªå®‰å…¨å’Œä¸å¤ªå¼ºå¤§çš„ç­–ç•¥ï¼Œå¦‚IFRAMEæˆ–JSONPã€‚</p>
<p>å‚æ•°ï¼š<br>originsï¼š å…è®¸å¯è®¿é—®çš„åŸŸåˆ—è¡¨<br>maxAge:å‡†å¤‡å“åº”å‰çš„ç¼“å­˜æŒç»­çš„æœ€å¤§æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</p>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@CrossOrigin(origins = &#123;&quot;http://domain2.com&quot;,&quot;ã€‚ã€‚ã€‚&quot;&#125;, maxAge = 3600)</span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/account&quot;)</span><br><span class="line">public class AccountController &#123;</span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;/&#123;id&#125;&quot;)</span><br><span class="line">    public Account retrieve(@PathVariable Long id) &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/188106">https://cloud.tencent.com/developer/article/188106</a></p>
<h3 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h3><p>å¼€å‘restful APIæ—¶ï¼Œä¼šç”¨åˆ°ï¼Œ@RestController æ˜¯@controllerå’Œ@ResponseBody çš„ç»“åˆã€‚</p>
<p>@Controller å°†å½“å‰ä¿®é¥°çš„ç±»æ³¨å…¥Spring IOCå®¹å™¨ï¼Œä½¿å¾—ä»è¯¥ç±»æ‰€åœ¨çš„é¡¹ç›®è·‘èµ·æ¥çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªç±»å°±è¢«å®ä¾‹åŒ–ã€‚</p>
<p>@ResponseBody å®ƒçš„ä½œç”¨æ˜¯æŒ‡è¯¥ç±»ä¸­æ‰€æœ‰çš„APIæ¥å£è¿”å›çš„æ•°æ®ï¼Œç”­ç®¡ä½ å¯¹åº”çš„æ–¹æ³•è¿”å›Mapæˆ–æ˜¯å…¶ä»–Objectï¼Œå®ƒä¼šä»¥Jsonå­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h3><p>@RequestMapping æ˜¯ Spring Web åº”ç”¨ç¨‹åºä¸­æœ€å¸¸è¢«ç”¨åˆ°çš„æ³¨è§£ä¹‹ä¸€ã€‚åœ¨Spring MVC ä¸­ä½¿ç”¨ @RequestMapping æ¥æ˜ å°„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å®ƒæ¥æŒ‡å®šæ§åˆ¶å™¨å¯ä»¥å¤„ç†å“ªäº›URLè¯·æ±‚ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@RestController  </span><br><span class="line">@RequestMapping(&quot;/home&quot;)  </span><br><span class="line">public class IndexController &#123;  </span><br><span class="line">    @RequestMapping(&quot;/&quot;)  </span><br><span class="line">    String get() &#123;  </span><br><span class="line">        //mapped to hostname:port/home/  </span><br><span class="line">        return &quot;go to home&quot;;  </span><br><span class="line">    &#125;  </span><br><span class="line">    @RequestMapping(&quot;/index&quot;)  </span><br><span class="line">    String index() &#123;  </span><br><span class="line">        //mapped to hostname:port/home/index/  </span><br><span class="line">        return &quot;go to index&quot;;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6f5aec232c97">https://www.jianshu.com/p/6f5aec232c97</a></p>
<p>âœ…RequestMappingå‚æ•°</p>
<p>1ï¼Œvalueï¼Œmethod<br>valueï¼šæŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Templateæ¨¡å¼ã€‚<br>methodï¼šæŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼ŒGETã€POSTã€PUTã€DELETEç­‰ã€‚</p>
<p>2ï¼Œconsumesï¼Œproduces<br>consumesï¼šæŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆcontent-typeï¼‰ï¼Œä¾‹å¦‚application/jsonï¼Œtext/htmlã€‚<br>producesï¼šæŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„ï¼ˆAcceptï¼‰ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ã€‚ä¸ä½†å¯ä»¥è®¾ç½®è¿”å›å€¼ç±»å‹è¿˜å¯ä»¥è®¾å®šè¿”å›å€¼çš„å­—ç¬¦ç¼–ç ã€‚</p>
<p>3ï¼Œparamsï¼Œheaders<br>paramsï¼šæŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ—¶ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚<br>headersï¼šæŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</p>
<p>å‰åç«¯æ•°æ®jsonæ•°æ®ç±»å‹</p>
<p>1ï¼Œjsonå¯¹è±¡ç±»å‹ï¼Œå³å‰ç«¯å®šä¹‰çš„Content typeä¸ºapplication/x-www-form-urlencodedç­‰ï¼Œåç«¯åº”ä½¿ç”¨@RequestParamæ³¨è§£æ¥æ”¶æ­¤ç±»å‹çš„jsonå‚æ•°ã€‚</p>
<p>2ï¼Œjsonå­—ç¬¦ä¸²ç±»å‹ï¼Œå³å‰ç«¯å®šä¹‰çš„Content typeä¸ºapplication/jsonï¼Œåç«¯åº”ä½¿ç”¨@RequestBodyæ³¨è§£æ¥æ”¶jsonå‚æ•°ã€‚</p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/FlyGoldfish/articles/15649305.html">https://www.cnblogs.com/FlyGoldfish/articles/15649305.html</a></p>
<p>åœ¨Spring MVC ä¸­ä½¿ç”¨ @RequestMapping æ¥æ˜ å°„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å®ƒæ¥æŒ‡å®šæ§åˆ¶å™¨å¯ä»¥å¤„ç†å“ªäº›URLè¯·æ±‚ï¼Œç›¸å½“äºServletä¸­åœ¨web.xmlä¸­é…ç½®</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/web&quot;)</span><br><span class="line">piblic class TestController &#123;</span><br><span class="line">    // æ–¹æ³•ä»…å¤„ç†è¯·æ±‚æ–¹å¼æ˜¯GETå’Œrequest Content-Typeä¸ºâ€œapplication/jsonâ€ç±»å‹çš„è¯·æ±‚</span><br><span class="line">    //æ™®é€šå‚æ•°ç”¨@RequestParam</span><br><span class="line">    @RequestMapping(value = &quot;/test1&quot;, method = &#123;RequestMethod.GET, RequestMethod.POST&#125;, consumes = &quot;application/json&quot;)</span><br><span class="line">    public String test2(@RequestParam(&quot;id&quot;) String id)&#123;</span><br><span class="line">        return &quot;test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //å¯¹è±¡ç±»å‹ç”¨@RequestBody</span><br><span class="line">    @RequestMapping(value = &quot;/test2&quot;, method = &#123;RequestMethod.GET, RequestMethod.POST&#125;, consumes = MediaType.APPLICATION_JSON_VALUE)</span><br><span class="line">    public String test2(@RequestBody VO vo)&#123;</span><br><span class="line">        return &quot;test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸ºjson</span><br><span class="line">    @RequestMapping(value = &quot;/list&quot; , method = RequestMethod.POST,produces=&quot;application/json&quot;)</span><br><span class="line">public JSONObject list(@PathVariable String communityId) &#123;</span><br><span class="line">   JSONObject object = new JSONObject();</span><br><span class="line">   object.put(&quot;communityId&quot;,communityId);</span><br><span class="line">   return object;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">    //@responseBodyå°±æ˜¯è¿”å›å€¼æ˜¯jsonæ•°æ®ï¼Œä½¿ç”¨@responseBodyï¼Œå°±å¯ä»¥çœç•¥produceså±æ€§</span><br><span class="line">    @RequestMapping(value = &quot;/list&quot; , method = RequestMethod.POST)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public JSONObject list(@PathVariable String communityId) &#123;</span><br><span class="line">    JSONObject object = new JSONObject();</span><br><span class="line">    object.put(&quot;communityId&quot;,communityId);</span><br><span class="line">    return object;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    //è¿”å›å€¼æ˜¯jsonæ•°æ®ï¼Œå­—ç¬¦ç¼–ç ä¸ºutf-8</span><br><span class="line">    @RequestMapping(value = &quot;/list&quot; , method = RequestMethod.POST,produces=&quot;application/json;charset=utf-8&quot;)</span><br><span class="line">    public JSONObject list(@PathVariable String communityId) &#123;</span><br><span class="line">    JSONObject object = new JSONObject();</span><br><span class="line">    object.put(&quot;communityId&quot;,communityId);</span><br><span class="line">    return object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46058921/article/details/122141863">https://blog.csdn.net/weixin_46058921/article/details/122141863</a></p>
<p>âœ…MediaType<br>consumeså‚æ•°ä¸­å¯ä»¥ç”¨çš„ã€‚</p>
<p>MediaTypeåª’ä½“ç±»å‹ï¼šå†³å®šæµè§ˆå™¨å°†ä»¥ä»€ä¹ˆå½¢å¼ã€ä»€ä¹ˆç¼–ç å¯¹èµ„æºè¿›è¡Œè§£æContent-Typeï¼šä¹Ÿå±äºMediaTypeåª’ä½“ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ¨è¯·æ±‚å¤´ä¸­æŒ‡å®šèµ„æºçš„MediaType</p>
<p><a target="_blank" rel="noopener" href="https://javajgs.com/archives/75280">https://javajgs.com/archives/75280</a></p>
<p>âœ…RequestMappingã€GetMappingã€PostMappingçš„åŒºåˆ«</p>
<p>@RequestMappingæ˜¯ä¸€ä¸ªæ— æ–¹æ³•çš„æ³¨è§£ã€‚@GetMappingå’Œ@PostMappingæ˜¯ç»„åˆæ³¨è§£ï¼Œåˆ†åˆ«æ˜¯@RequestMapping(method = RequestMethod.GET)å’Œ@RequestMapping(method = RequestMethod.POST)çš„ç¼©å†™ã€‚<br>GETã€POSTæ˜¯æ–¹æ³•çš„æ˜ å°„ï¼Œè¡¨ç¤ºä¸º<br>@RequestMapping(method = RequestMethod.${æ–¹æ³•})</p>
<p>åœ¨ä¸€å¼€å§‹çš„æ˜ å°„æ˜¯ä½¿ç”¨@RequestMapping(method = RequestMethod.${æ–¹æ³•})æ¥è¡¨ç¤ºã€‚åæ¥Spring4.3ä¸­å¼•è¿›äº†@GetMappingã€@PostMappingã€@PutMappingã€@DeleteMappingã€@PatchMappingæ³¨è§£æ¥å¸®åŠ©ç®€åŒ–å¸¸ç”¨çš„HTTPæ–¹æ³•çš„æ˜ å°„ã€‚</p>
<h3 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h3><p>@RequestParamï¼šå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°ä½ æ§åˆ¶å™¨çš„æ–¹æ³•å‚æ•°ä¸Šï¼ˆæ˜¯springmvcä¸­æ¥æ”¶æ™®é€šå‚æ•°çš„æ³¨è§£ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ï¼šf(@RequestParam(value=â€å‚æ•°åâ€,required=â€true/falseâ€,defaultValue=â€â€) String s</span><br><span class="line">       , å…¶ä»–å…¥å‚ï¼‰</span><br><span class="line"> </span><br><span class="line">valueï¼šå‚æ•°å</span><br><span class="line"> </span><br><span class="line">requiredï¼šæ˜¯å¦åŒ…å«è¯¥å‚æ•°ï¼Œé»˜è®¤ä¸ºtrueï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚è·¯å¾„ä¸­å¿…é¡»åŒ…å«è¯¥å‚æ•°ï¼Œå¦‚æœä¸åŒ…å«å°±æŠ¥é”™ã€‚</span><br><span class="line"> </span><br><span class="line">defaultValueï¼šé»˜è®¤å‚æ•°å€¼ï¼Œå¦‚æœè®¾ç½®äº†è¯¥å€¼ï¼Œrequired=trueå°†å¤±æ•ˆï¼Œè‡ªåŠ¨ä¸ºfalse,å¦‚æœæ²¡æœ‰ä¼ è¯¥å‚æ•°ï¼Œå°±ä½¿ç”¨é»˜è®¤å€¼</span><br></pre></td></tr></table></figure>

<h3 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h3><p>@RequestBodyä¸»è¦ç”¨æ¥æ¥æ”¶å‰ç«¯ä¼ é€’ç»™åç«¯çš„jsonå­—ç¬¦ä¸²ä¸­çš„æ•°æ®çš„(è¯·æ±‚ä½“ä¸­çš„æ•°æ®çš„)ï¼Œå› æ­¤@RequestBodyåªèƒ½ç”¨äºæ¥æ”¶POSTè¯·æ±‚çš„å‚æ•°<br>@RequestParamæ¥æ”¶çš„æ˜¯key-valueé‡Œé¢çš„å‚æ•°(URLä¸­çš„å‚æ•°)ï¼Œé€šå¸¸ç”¨äºæ¥æ”¶GETè¯·æ±‚çš„å‚æ•°ï¼ˆPOSTä¹Ÿèƒ½æ¥æ”¶åªæ¥æ”¶URLé‡Œçš„ï¼Œè¯·æ±‚ä½“çš„æ¥æ”¶ä¸åˆ°ï¼‰</p>
<p>å³ï¼š<br>å¦‚æœå‚æ•°æ˜¯æ”¾åœ¨è¯·æ±‚ä½“VOä¸­ï¼Œä¼ å…¥åå°çš„è¯ï¼Œé‚£ä¹ˆåå°è¦ç”¨@RequestBodyæ‰èƒ½æ¥æ”¶åˆ°ï¼›<br>å¦‚æœä¸æ˜¯æ”¾åœ¨è¯·æ±‚ä½“ä¸­çš„è¯ï¼Œé‚£ä¹ˆåå°æ¥æ”¶å‰å°ä¼ è¿‡æ¥çš„å‚æ•°æ—¶ï¼Œè¦ç”¨@RequestParamæ¥æ¥æ”¶ã€‚</p>
<p>æ€»ç»“ï¼š<br>@RequestParamå’Œ@RequestBodyéƒ½èƒ½æ¥æ”¶Postæ–¹å¼è¯·æ±‚ä¼ æ¥çš„æ•°æ®ï¼Œä½†æ˜¯@RequestParamä¸èƒ½æ¥æ”¶jsonå­—ç¬¦ä¸²ï¼Œè€Œ@RequestBodyèƒ½ï¼Œ@RequestBodyä¸èƒ½æ¥æ”¶form-dataç±»å‹çš„å†…å®¹ï¼Œ@RequestParamèƒ½ã€‚<br>ä¸€ä¸ªè¯·æ±‚ï¼Œåªæœ‰ä¸€ä¸ªRequestBodyï¼›ä¸€ä¸ªè¯·æ±‚ï¼Œå¯ä»¥æœ‰å¤šä¸ªRequestParamã€‚<br>@ReuestBodyæ¥å—å•ä¸ªå‚æ•°çš„æ—¶å€™åªèƒ½å…ˆä½¿ç”¨Map&lt;String,Object&gt; paramsæ¥æ”¶,ç„¶åå†ä½¿ç”¨params.get(â€œnameâ€)è·å–å‚æ•°çš„å€¼ã€‚</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/justry_deng/article/details/80972817">https://blog.csdn.net/justry_deng/article/details/80972817</a></p>
<p>âœ…postè¯·æ±‚ï¼Œä¼ å‚æ˜¯listçš„è¯ï¼Œç”¨@RequestParamçš„è¯åªèƒ½æ”¾åœ¨urlåé¢ï¼Œé•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ã€‚ç”¨@RequestBodyæ˜¯æ”¾åœ¨bodyé‡Œã€‚</p>
<h3 id="ResponseBody"><a href="#ResponseBody" class="headerlink" title="@ResponseBody"></a>@ResponseBody</h3><p>@ResponseBody æ³¨è§£çš„ä½œç”¨æ˜¯å°†Controllerçš„æ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œé€šè¿‡é€‚å½“çš„è½¬æ¢å™¨è½¬æ¢ä¸ºæŒ‡å®šçš„æ ¼å¼ä¹‹åï¼Œå†™å…¥åˆ°responseå¯¹è±¡çš„bodyåŒºï¼Œé€šå¸¸ç”¨æ¥è¿”å›JSONæ•°æ®æˆ–è€…æ˜¯XMLæ•°æ®ã€‚</p>
<p>@ResponseBodyçš„ä½œç”¨å…¶å®æ˜¯å°†javaå¯¹è±¡è½¬ä¸ºjsonæ ¼å¼çš„æ•°æ®ï¼Œç„¶åç›´æ¥å†™å…¥HTTP response çš„bodyä¸­ï¼›ä¸€èˆ¬åœ¨å¼‚æ­¥è·å–æ•°æ®æ—¶ä½¿ç”¨</p>
<p>@ResponseBody æ˜¯ä½œç”¨åœ¨æ–¹æ³•ä¸Šçš„</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_47609799/article/details/124843709">https://blog.csdn.net/weixin_47609799/article/details/124843709</a></p>
<h3 id="Builder"><a href="#Builder" class="headerlink" title="@Builder"></a>@Builder</h3><p>lombokä¸­çš„æ³¨è§£ã€‚<br>Builder ä½¿ç”¨åˆ›å»ºè€…æ¨¡å¼åˆå«å»ºé€ è€…æ¨¡å¼ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€æ­¥æ­¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯¹ç”¨æˆ·å±è”½äº†é‡Œé¢æ„å»ºçš„ç»†èŠ‚ï¼Œä½†å´å¯ä»¥ç²¾ç»†åœ°æ§åˆ¶å¯¹è±¡çš„æ„é€ è¿‡ç¨‹ã€‚</p>
<p>@Builderæ³¨è§£çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥ç”Ÿæˆå¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºå¯¹è±¡é“¾å¼èµ‹å€¼ã€‚æ”¾åœ¨å®ä½“ç±»ä¸Šã€‚<br>â€‹@Builderâ€‹â€‹æ³¨é‡Šä¸ºä½ çš„ç±»ç”Ÿæˆç›¸å¯¹ç•¥å¾®å¤æ‚çš„æ„å»ºå™¨APIã€‚</p>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student student = Student.builder()</span><br><span class="line">        .name( &quot;admin&quot; )</span><br><span class="line">        .age( 18 )</span><br><span class="line">        .build();</span><br></pre></td></tr></table></figure>

<p>ä¸@Singularç»“åˆä½¿ç”¨<br>ä½¿ç”¨@Singularæ³¨é‡Šæ³¨é‡Šä¸€ä¸ªé›†åˆå­—æ®µ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Singular</span><br><span class="line">private List&lt;String&gt; hobbies;</span><br><span class="line"></span><br><span class="line">.hobbies( &quot;110&quot; ).hobbies( &quot;112&quot; )</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/g56467467464/article/details/105407741">https://blog.csdn.net/g56467467464/article/details/105407741</a></p>
<h3 id="TableName"><a href="#TableName" class="headerlink" title="@TableName"></a>@TableName</h3><p>baomidou.mybatisplusçš„æ³¨è§£<br>@TableNameæ˜¯mybatis-plusä¸­çš„æ³¨è§£ï¼Œä¸»è¦æ˜¯å®ç°å®ä½“ç±»å‹å’Œæ•°æ®åº“ä¸­çš„è¡¨å®ç°æ˜ å°„ã€‚<br>æ”¾åœ¨å®ä½“ç±»DOä¸Šã€‚</p>
<p>è™½ç„¶åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ï¼Œ@TableNameæ˜¯mybatis-plusä¸­çš„æ³¨è§£ï¼Œ@Tableæ˜¯Hibernateä¸­çš„æ³¨è§£ã€‚</p>
<h3 id="Param"><a href="#Param" class="headerlink" title="@Param"></a>@Param</h3><p>1 ã€@Paramæ³¨è§£çš„ä½œç”¨æ˜¯ç»™å‚æ•°å‘½å,å‚æ•°å‘½ååå°±èƒ½æ ¹æ®åå­—å¾—åˆ°å‚æ•°å€¼,æ­£ç¡®çš„å°†å‚æ•°ä¼ å…¥sqlè¯­å¥ä¸­ï¼ˆä¸€èˆ¬é€šè¿‡#{}çš„æ–¹å¼ï¼Œ${}ä¼šæœ‰sqlæ³¨å…¥çš„é—®é¢˜ï¼‰ã€‚<br>2ã€ä¸€èˆ¬å†™åœ¨mappeæ¥å£ï¼ˆDAOæ¥å£ï¼‰çš„å…¥å‚ï¼Œå¯¹åº”xmlä¸­#{}ä¸­çš„å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨æ–¹æ³•ï¼š</span><br><span class="line">Mapperæ¥å£æ–¹æ³•ï¼š</span><br><span class="line">public int findById(@Param(&quot;userId&quot;) int userId);</span><br><span class="line">å¯¹åº”çš„xmlæ–‡ä»¶ï¼š</span><br><span class="line"> &lt;select id=&quot;findById&quot; resultMap=&quot;baseMap&quot;&gt;</span><br><span class="line">    select &lt;include redif=&quot;all_column_list&quot;&gt; from table_name</span><br><span class="line">    where user_id = #&#123;userId&#125;</span><br><span class="line"> &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸ä½¿ç”¨@Paramæ³¨è§£æ—¶ï¼Œå‚æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¹¶ä¸”æ˜¯Javabeanã€‚</p>
<p>ä½¿ç”¨äº†@Paramåï¼Œå¯ä»¥ä¸ç”¨parameterTypeï¼Ÿ å­˜ç–‘</p>
<h3 id="Mapper"><a href="#Mapper" class="headerlink" title="@Mapper"></a>@Mapper</h3><p>åœ¨ä½¿ç”¨MybatisæŒä¹…å±‚æ¡†æ¶æ¥æ“ä½œæ•°æ®åº“æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Mapperæ³¨è§£å’Œ@MapperScanæ³¨è§£æ¥å°†Mapperæ¥å£ç±»äº¤ç»™Sprinigè¿›è¡Œç®¡ç†ã€‚</p>
<p>ç›®çš„å°±æ˜¯ä¸ºäº†ä¸å†å†™mapperæ˜ å°„æ–‡ä»¶ï¼ˆxmlæ–‡ä»¶ï¼‰ã€‚</p>
<p>Spring Bootçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼šä¸å»ºè®®ä½¿ç”¨xmlæ–‡ä»¶é…ç½®ã€‚ä½†æ˜¯ï¼Œè¿™å¯¹MyBatisæ¥è¯´è¿›é€€ä¸¤éš¾ï¼Œå› ä¸ºMyBatisç¦»ä¸å¼€xmlï¼Œéœ€è¦xmlæ¥é…ç½®sqlè¯­å¥ã€‚ä¸ºäº†è¿åˆSpring Bootçš„å‘å±•ç†å¿µï¼ŒMyBatiså®˜æ–¹å¼€å‘äº†mybatis-spring-boot-starterï¼Œæˆ‘ä»¬è¦æƒ³æ›´å°‘çš„ä¾èµ–xmlï¼Œéœ€è¦æ·±å…¥çš„ç ”ç©¶mybatis-spring-boot-starterä¸­çš„ç”¨æ³•ï¼Œå°¤å…¶æ˜¯@MapperScanå’Œ@Mapperçš„ç”¨æ³•ã€‚</p>
<p>ä¸€ã€æ³¨è§£@Mapperï¼Œè¿™ç§æ–¹å¼è¦æ±‚æ¯ä¸€ä¸ªMapperç±»éƒ½éœ€è¦æ·»åŠ æ­¤æ³¨è§£<br>åœ¨æ¥å£ç±»ä¸Šæ·»åŠ äº†@Mapperï¼Œåœ¨ç¼–è¯‘ä¹‹åä¼šç”Ÿæˆç›¸åº”çš„æ¥å£å®ç°ç±»</p>
<p>äºŒã€@MapperScanæ³¨è§£ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸ç”¨ä¸ºæ¯ä¸ªMapperç±»éƒ½æ·»åŠ @Mapperæ³¨è§£ã€‚æŒ‡å®šè¦å˜æˆå®ç°ç±»çš„æ¥å£æ‰€åœ¨çš„åŒ…<br>æ·»åŠ ä½ç½®ï¼šæ˜¯åœ¨Springbootå¯åŠ¨ç±»ä¸Šé¢æ·»åŠ ï¼Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication  </span><br><span class="line">@MapperScan(&#123;&quot;cn.mybatis.mappers.class&quot;,&quot;cn.mybatis.mappers.student&quot;&#125;)  </span><br><span class="line">public class SpringbootMybatisDemoApplication&#123;  </span><br><span class="line">    public static void main(String[] args) &#123;  </span><br><span class="line">       SpringApplication.run(SpringbootMybatisDemoApplication.class, args);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆå®ç°ï¼šç›´æ¥åœ¨Mapperç±»ä¸­é‡‡ç”¨æ³¨è§£çš„å½¢å¼æ“ä½œæ•°æ®åº“ï¼Œé€šè¿‡@MapperScanæ‰«æåˆ¶å®šçš„æ˜ å°„å™¨å­˜æ”¾è·¯å¾„ï¼Œæœ€ç»ˆä¸éœ€è¦åŠ ä»»ä½•æ³¨è§£ï¼Œä¹Ÿä¸éœ€è¦å¯¹åº”çš„xmlæ–‡ä»¶æ¥é…ç½®sqlè¯­å¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//ä¸éœ€è¦åŠ ä»»ä½•æ³¨è§£ï¼Œä¹Ÿä¸éœ€è¦å¯¹åº”çš„xmlæ–‡ä»¶</span><br><span class="line">public interface UserMapper&#123;</span><br><span class="line">     @Select(&quot;select * from user&quot;)</span><br><span class="line">     List&lt;User&gt; getUserList(String userId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://www.mybatis.cn/archives/862.html">http://www.mybatis.cn/archives/862.html</a></p>
<h3 id="PostConstruct"><a href="#PostConstruct" class="headerlink" title="@PostConstruct"></a>@PostConstruct</h3><p>@PostContructæ˜¯Javaè‡ªå¸¦çš„æ³¨è§£ï¼Œåœ¨æ–¹æ³•ä¸ŠåŠ è¯¥æ³¨è§£ä¼šåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨springå®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œè¯¥æ–¹æ³•ã€‚å¯ä½œä¸ºä¸€äº›æ•°æ®çš„å¸¸è§„åŒ–åŠ è½½ï¼Œæ¯”å¦‚æ•°æ®å­—å…¸ä¹‹ç±»çš„ã€‚</p>
<p>ä»Java EE5è§„èŒƒå¼€å§‹ï¼ŒServletä¸­å¢åŠ äº†ä¸¤ä¸ªå½±å“Servletç”Ÿå‘½å‘¨æœŸçš„æ³¨è§£ï¼Œ@PostConstructå’Œ@PreDestroyï¼Œè¿™ä¸¤ä¸ªæ³¨è§£è¢«ç”¨æ¥ä¿®é¥°ä¸€ä¸ªéé™æ€çš„voidï¼ˆï¼‰æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@PostConstruct</span><br><span class="line">public void someMethod()&#123;&#125;</span><br><span class="line"></span><br><span class="line">public @PostConstruct void someMethod()&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œæ—¶æœºï¼šåœ¨ä¾èµ–æ³¨å…¥å®Œæˆåè¢«è‡ªåŠ¨è°ƒç”¨ã€‚åœ¨æœåŠ¡å™¨åŠ è½½Servletçš„æ—¶å€™è¿è¡Œï¼Œå¹¶ä¸”åªä¼šè¢«æœåŠ¡å™¨æ‰§è¡Œä¸€æ¬¡ã€‚PostConstructåœ¨æ„é€ å‡½æ•°ä¹‹åæ‰§è¡Œï¼Œinitï¼ˆï¼‰æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚<br>Constructor &gt;&gt; @Autowired &gt;&gt; @PostConstruct &gt;&gt; init &gt;&gt; service &gt;&gt; destroy &gt;&gt; PreDestroy</p>
<p>è¯¥æ³¨è§£ä¸BeanPostProcessoræ¥å£æœ‰å…³ï¼Œå®ƒæœ‰ä¸ªå®ç°ç±»CommonAnnotationBeanPostProcessorï¼Œå°±æ˜¯ä¸“é—¨å¤„ç†@PostConstruct  @PreDestroyæ³¨è§£ã€‚</p>
<hr>
<p>InitialzingBeanæ¥å£çš„afterPropertiesSetå’Œé…ç½®beanæ—¶çš„init-methodï¼Œä¹Ÿæœ‰ç±»ä¼¼åŠŸèƒ½ã€‚</p>
<p>initMethodå’ŒInitializingBeanæ˜¯springæä¾›çš„ä¸¤ç§å¯¹ç±»çš„å±æ€§è¿›è¡Œè£…é…çš„æ–¹å¼ã€‚initMethodå’ŒInitializingBeanæŒ‡å®šæ–¹æ³•çš„æ‰§è¡Œé¡ºåºåœ¨æ™®é€šå±æ€§è£…é…ä¹‹åï¼ŒinitMethodæŒ‡å®šçš„æ–¹æ³•åˆåœ¨InitializingBeanæŒ‡å®šçš„æ–¹æ³•ä¹‹åæ‰§è¡Œã€‚</p>
<p>ä¸‰è€…æ‰§è¡Œé¡ºåºï¼šConstruction &gt; å¯¹è±¡å±æ€§set() æ–¹æ³•-&gt; @PostConstruct -&gt; InitializingBean -&gt; initMethod</p>
<p>æ€»ç»“ï¼šå¯ä¸å¯ä»¥ç†è§£ä¸º@PostConstructåœ¨åˆå§‹åŒ–è‡ªå·±beanæ—¶ï¼Œä¾èµ–æ³¨å…¥å…¶ä»–å±æ€§beanåæ‰§è¡Œï¼Œè€ŒInitialzingBeanæ¥å£åˆæ˜¯åœ¨å®ƒåé¢ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/chinawangfei/article/details/122825129">https://blog.csdn.net/chinawangfei/article/details/122825129</a></p>
<h3 id="Deprecated"><a href="#Deprecated" class="headerlink" title="@Deprecated"></a>@Deprecated</h3><p>@Deprecatedæ˜¯javaå†…ç½®æ³¨è§£ï¼Œæ­¤æ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ï¼Œå±æ€§ï¼Œç±»ä¸Šï¼Œè¡¨ç¤ºå·²åºŸå¼ƒï¼Œä¸ç»´æŠ¤ï¼Œå¯èƒ½ä¼šåˆ é™¤ã€‚<br>è¡¨ç¤ºä¸æ¨èç¨‹åºå‘˜ä½¿ç”¨ï¼Œä½†æ˜¯è¿˜å¯ä»¥ä½¿ç”¨ã€‚</p>
<h3 id="Valid"><a href="#Valid" class="headerlink" title="@Valid"></a>@Valid</h3><p>ç”¨äºå¯¹è±¡å±æ€§å­—æ®µçš„è§„åˆ™æ£€æµ‹ï¼Œä¸ºäº†é¿å…ä½¿ç”¨å†—ä½™çš„ä»£ç è¿›è¡Œifåˆ¤æ–­ï¼Œä½¿ç”¨@Validæ³¨è§£å®ç°ã€‚</p>
<p>æ˜¯Springä¸­çš„æ³¨è§£ï¼Œéœ€è¦å¼•å…¥ä¾èµ–ï¼Œå¦‚æœæ˜¯ springboot é¡¹ç›®ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ç”¨å¼•å…¥äº†ï¼Œå·²ç»å¼•å…¥äº†ï¼Œå°±å­˜åœ¨äºæœ€æ ¸å¿ƒçš„ web å¼€å‘åŒ… spring-boot-starter-web é‡Œé¢ã€‚</p>
<p>å¦‚æœä¸æ˜¯ï¼Œéœ€è¦å¼•å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.validation&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.1.0.Final&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"> </span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.4.1.Final&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹æ³•ï¼šåœ¨è¢«æ£€éªŒçš„å®ä½“ç±»ä¸­ï¼Œä½¿ç”¨æ³¨è§£åŠ ä¸€äº›é™åˆ¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@NotBlank(message = &quot;è¯·è¾“å…¥åç§°&quot;)</span><br><span class="line">@Length(message = &quot;åç§°ä¸èƒ½è¶…è¿‡ä¸ª &#123;max&#125; å­—ç¬¦&quot;, max = 10)</span><br><span class="line">public String name;</span><br><span class="line"> </span><br><span class="line">@NotNull(message = &quot;è¯·è¾“å…¥å¹´é¾„&quot;)</span><br><span class="line">@Range(message = &quot;å¹´é¾„èŒƒå›´ä¸º &#123;min&#125; åˆ° &#123;max&#125; ä¹‹é—´&quot;, min = 1, max = 100)</span><br><span class="line">public Integer age;</span><br><span class="line"></span><br><span class="line">@Email(message = &quot;é‚®ç®±ä¸æ­£ç¡®&quot;)</span><br><span class="line">@Min(value = 1000000)</span><br><span class="line"></span><br><span class="line">@NotEmpty(message=&quot;ä¸èƒ½ä¸ºç©º&quot;)</span><br><span class="line">@Size(message=&quot;æœ€å¤š5ä¸ª&quot;, max=5)</span><br><span class="line">private List&lt;Intefer&gt; list;</span><br></pre></td></tr></table></figure>

<p>åœ¨Controllerçš„å¯¹åº”æ–¹æ³•ä¸­ï¼Œå¯¹ä¼ å…¥å‚æ•°åŠ @Validæ³¨è§£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;/action/register&quot;)</span><br><span class="line">public Result registerByForm(@Valid @RequestBody RegisterUser registerUser)&#123;</span><br><span class="line">    return userService.register(registerUser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43587472/article/details/110388778">https://blog.csdn.net/weixin_43587472/article/details/110388778</a></p>
<h3 id="Transactionalæ³¨è§£"><a href="#Transactionalæ³¨è§£" class="headerlink" title="@Transactionalæ³¨è§£"></a>@Transactionalæ³¨è§£</h3><p>å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œæ˜¯å»ºç«‹åœ¨AOPä¹‹ä¸Šï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œç„¶åå†ç›®æ ‡æ–¹æ³•å¼€å§‹ä¹‹å‰åˆ›å»ºæˆ–åŠ å…¥ä¸€ä¸ªä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•ä¹‹åï¼Œæ ¹æ®æ‰§è¡Œæƒ…å†µæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼š@Transactionalæ³¨è§£åœ¨ä»£ç æ‰§è¡Œå‡ºé”™æ—¶è¿›è¡Œäº‹åŠ¡çš„å›æ»šã€‚</p>
<p>javaå¼‚å¸¸æ¨¡å‹ï¼š<br>Throwableæ˜¯æœ€é¡¶å±‚çš„çˆ¶ç±»ï¼Œæœ‰Errorå’ŒExceptionä¸¤ä¸ªå­ç±»ã€‚<br>Errorè¡¨ç¤ºä¸¥é‡çš„é”™è¯¯ï¼ˆå¦‚OOMç­‰ï¼‰ï¼›<br>Exceptionå¯ä»¥åˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntimeExceptionåŠå…¶å­ç±»ï¼‰å’Œéè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆExceptionçš„å­ç±»ä¸­ï¼Œé™¤äº†RuntimeExceptionåŠå…¶å­ç±»ä¹‹å¤–çš„ç±»ï¼‰ã€‚</p>
<p>éè¿è¡Œæ—¶å¼‚å¸¸æ˜¯æ£€æŸ¥å¼‚å¸¸ï¼ˆchecked exceptionsï¼‰ï¼Œä¸€å®šè¦try catchï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸æ˜¯å¯é¢„æ–™çš„ï¼Œç¼–è¯‘é˜¶æ®µå°±æ£€æŸ¥çš„å‡ºæ¥ï¼›<br>Errorå’Œè¿è¡Œæ—¶å¼‚å¸¸æ˜¯éæ£€æŸ¥å¼‚å¸¸ï¼ˆunchecked exceptionsï¼‰ï¼Œä¸éœ€è¦try catchï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸æ˜¯ä¸å¯é¢„æ–™çš„ï¼Œç¼–è¾‘é˜¶æ®µä¸ä¼šæ£€æŸ¥ï¼Œæ²¡å¿…è¦æ£€æŸ¥ï¼Œä¹Ÿæ£€æŸ¥ä¸å‡ºæ¥ã€‚</p>
<p>springçš„@Transactionalæ³¨è§£å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¼€å¯äº‹åŠ¡ï¼Œä½†æ˜¯é»˜è®¤åªåœ¨é‡åˆ°è¿è¡Œæ—¶å¼‚å¸¸å’ŒErroræ—¶æ‰ä¼šå›æ»šï¼Œéè¿è¡Œæ—¶å¼‚å¸¸ä¸å›æ»šï¼Œå³Exceptionçš„å­ç±»ä¸­ï¼Œé™¤äº†RuntimeExceptionåŠå…¶å­ç±»ï¼Œå…¶ä»–çš„ç±»é»˜è®¤ä¸å›æ»šã€‚</p>
<p>è€ŒrollbackForå±æ€§å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒrollbackFor = Exception.classè¡¨ç¤ºExceptionåŠå…¶å­ç±»çš„å¼‚å¸¸éƒ½ä¼šè§¦å‘å›æ»šï¼ŒåŒæ—¶ä¸å½±å“Errorçš„å›æ»šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// è¿è¡Œæ—¶å¼‚å¸¸ï¼Œæ­£å¸¸å›æ»š</span><br><span class="line">@Transactional</span><br><span class="line">public void save()&#123;</span><br><span class="line">    StudentDO studentDO = new StudentDO();</span><br><span class="line">    studentDO.setName(&quot;ltm&quot;);</span><br><span class="line">    studentDO.setAge(22);</span><br><span class="line">    studentMapper.insert(studentDO);</span><br><span class="line">    throw new RuntimeException(&quot;æˆ‘æ˜¯å¼‚å¸¸&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// éè¿è¡Œæ—¶å¼‚å¸¸ï¼ŒåŠ rollbackForå±æ€§ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶å›æ»š</span><br><span class="line">@Transactional(rollbackFor = Exception.class)</span><br><span class="line">public void save() throws IOException&#123;</span><br><span class="line">    StudentDO studentDO = new StudentDO();</span><br><span class="line">    studentDO.setName(&quot;ltm&quot;);</span><br><span class="line">    studentDO.setAge(22);</span><br><span class="line">    studentMapper.insert(studentDO);</span><br><span class="line">    throw new IOException();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c5988db897fc">https://www.jianshu.com/p/c5988db897fc</a></p>
<p>ä½¿ç”¨æ–¹æ³•ï¼š<br>1.éœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableTransactionManagementæ³¨è§£ã€‚<br>2.å½“ä½œç”¨åœ¨ç±»ä¸Šï¼Œè¯¥ç±»æ‰€ä»¥publicæ–¹æ³•éƒ½å…·æœ‰è¯¥ç±»å‹çš„äº‹åŠ¡å±æ€§ã€‚ä¹Ÿå¯ä»¥åŠ åœ¨publicæ–¹æ³•ä¸Šã€‚</p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_9177933/2978291">https://blog.51cto.com/u_9177933/2978291</a></p>
<h3 id="SneakyThrows"><a href="#SneakyThrows" class="headerlink" title="@SneakyThrows"></a>@SneakyThrows</h3><p>âœ…javaçš„å¼‚å¸¸ä½“ç³»</p>
<p><img src="https://img-blog.csdnimg.cn/2019101117003396.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5MjI5NTY3,size_16,color_FFFFFF,t_70"></p>
<p>Erroræ˜¯ç¼–è¯‘æ—¶é”™è¯¯å’Œç³»ç»Ÿé”™è¯¯ï¼Œç³»ç»Ÿé”™è¯¯åœ¨é™¤ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œéƒ½ä¸éœ€è¦ä½ æ¥å…³å¿ƒï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°ã€‚è€Œç¼–è¯‘æ—¶é”™è¯¯ï¼Œå¦‚æœä½ ä½¿ç”¨äº†ç¼–è¯‘å™¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæç¤ºã€‚</p>
<p>Exceptionåˆ™æ˜¯å¯ä»¥è¢«æŠ›å‡ºçš„åŸºæœ¬ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸»è¦å…³å¿ƒçš„ä¹Ÿæ˜¯è¿™ä¸ªç±»ã€‚<br>Exceptionåˆåˆ†ä¸ºRunTimeExceptionå’Œå…¶ä»–Exceptionã€‚</p>
<p>RunTimeExceptionï¼šè¿è¡Œæ—¶å¼‚å¸¸ï¼Œåˆç§°ä¸å—æ£€æŸ¥å¼‚å¸¸ï¼Œä¸å—æ£€æŸ¥ï¼Œå› ä¸ºä¸å—æ£€æŸ¥ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­å¯èƒ½ä¼šæœ‰RunTimeExceptionæ—¶Javaç¼–è¯‘æ£€æŸ¥æ—¶ä¸ä¼šå‘Šè¯‰ä½ æœ‰è¿™ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯åœ¨å®é™…è¿è¡Œä»£ç æ—¶åˆ™ä¼šæš´éœ²å‡ºæ¥ï¼Œæ¯”å¦‚ç»å…¸çš„1/0ï¼Œç©ºæŒ‡é’ˆç­‰ã€‚å¦‚æœä¸å¤„ç†ä¹Ÿä¼šè¢«Javaè‡ªå·±å¤„ç†ã€‚</p>
<p>å…¶ä»–Exceptionï¼Œå—æ£€æŸ¥å¼‚å¸¸ã€‚å¯ä»¥ç†è§£ä¸ºé”™è¯¯ï¼Œå¿…é¡»è¦å¼€å‘è€…è§£å†³ä»¥åæ‰èƒ½ç¼–è¯‘é€šè¿‡ï¼Œè§£å†³çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œ<br>1ï¼šthrowåˆ°ä¸Šå±‚ï¼Œ<br>2ï¼Œtry-catchå¤„ç†ã€‚</p>
<p>âœ…@SneakyThrowsçš„ä½œç”¨ï¼š<br>æ™®é€šExceptionç±»,ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å—æ£€å¼‚å¸¸æˆ–è€…Checked Exceptionä¼šå¼ºåˆ¶è¦æ±‚æŠ›å‡ºå®ƒçš„æ–¹æ³•å£°æ˜throwsï¼Œè°ƒç”¨è€…å¿…é¡»æ˜¾ç¤ºçš„å»å¤„ç†è¿™ä¸ªå¼‚å¸¸ã€‚è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†æé†’å¼€å‘è€…å¤„ç†ä¸€äº›åœºæ™¯ä¸­å¿…ç„¶å¯èƒ½å­˜åœ¨çš„å¼‚å¸¸æƒ…å†µã€‚æ¯”å¦‚ç½‘ç»œå¼‚å¸¸é€ æˆIOExceptionã€‚</p>
<p>ä½†æ˜¯ç°å®å¤§éƒ¨åˆ†æƒ…å†µä¸‹çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä¸€è·¯å¾€å¤–æŠ›äº†äº‹ã€‚æ‰€ä»¥æ¸æ¸çš„javaç¨‹åºå‘˜å¤„ç†Exceptionçš„å¸¸è§æ‰‹æ®µå°±æ˜¯å¤–é¢åŒ…ä¸€å±‚RuntimeExceptionï¼Œæ¥ç€å¾€ä¸Šä¸¢.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">&#125;catch(Exception e)&#123;</span><br><span class="line">throw new RuntimeException(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€ŒLombokçš„@SneakyThrowså°±æ˜¯ä¸ºäº†æ¶ˆé™¤è¿™æ ·çš„æ¨¡æ¿ä»£ç ã€‚<br>ä½¿ç”¨æ³¨è§£åä¸éœ€è¦æ‹…å¿ƒExceptionçš„å¤„ç†.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> import lombok.SneakyThrows;</span><br><span class="line"></span><br><span class="line">public class SneakyThrowsExample implements Runnable &#123;</span><br><span class="line">  @SneakyThrows(UnsupportedEncodingException.class)</span><br><span class="line">  public String utf8ToString(byte[] bytes) &#123;</span><br><span class="line">    return new String(bytes, &quot;UTF-8&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @SneakyThrows</span><br><span class="line">  public void run() &#123;</span><br><span class="line">    throw new Throwable();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸç†ï¼šæœ€é‡è¦çš„æ˜¯throw (T)t, ä½¿ç”¨æ³›å‹,å°†ä¼ å…¥çš„Throwableå¼ºè½¬ä¸ºRuntimeExceptionå¼‚å¸¸.<br>è™½ç„¶, æˆ‘ä»¬æŠ›å‡ºçš„å¼‚å¸¸ä¸æ˜¯RuntimeException,ä½†æ˜¯å¯ä»¥éª—è¿‡javacç¼–è¯‘å™¨,æ³›å‹æœ€åå­˜å‚¨ä¸ºå­—èŠ‚ç æ–‡ä»¶æ—¶å¹¶æ²¡æœ‰æ³›å‹ä¿¡æ¯.</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22162093/article/details/115486647">https://blog.csdn.net/qq_22162093/article/details/115486647</a></p>
<h3 id="Data"><a href="#Data" class="headerlink" title="@Data"></a>@Data</h3><p>@Dataæ³¨è§£æ˜¯lombok.jaråŒ…ä¸‹çš„æ³¨è§£ï¼Œè¯¥æ³¨è§£é€šå¸¸ç”¨åœ¨å®ä½“beanä¸Šï¼Œä¸éœ€è¦å†™å‡ºsetå’Œgetæ–¹æ³•ï¼Œä½†æ˜¯å…·å¤‡å®ä½“beanæ‰€å…·å¤‡çš„æ–¹æ³•ï¼Œç®€åŒ–ç¼–ç¨‹æé«˜å˜æˆé€Ÿåº¦ã€‚</p>
<p>@Dataç›¸å½“äº@Getter @Setter @RequiredArgsConstructor @ToString @EqualsAndHashCodeè¿™5ä¸ªæ³¨è§£çš„åˆé›†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/26/myblog/spring/BeanFactory%E5%92%8CApplicationContext/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/26/myblog/spring/BeanFactory%E5%92%8CApplicationContext/" class="post-title-link" itemprop="url">BeanFactoryã€ApplicationContext</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-26 22:12:06" itemprop="dateCreated datePublished" datetime="2022-04-26T22:12:06+08:00">2022-04-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-20 19:10:40" itemprop="dateModified" datetime="2022-05-20T19:10:40+08:00">2022-05-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring%E7%90%86%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">springç†è§£</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="BeanFactoryä¸ApplicationContext"><a href="#BeanFactoryä¸ApplicationContext" class="headerlink" title="BeanFactoryä¸ApplicationContext"></a>BeanFactoryä¸ApplicationContext</h3><p>BeanFactoryä½¿ç®¡ç†ä¸åŒç±»å‹çš„javaå¯¹è±¡æˆä¸ºå¯èƒ½ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡ApplacationContextå»ºç«‹åœ¨BeanFactoråŸºç¡€ä¹‹ä¸Šï¼Œæä¾›äº†æ›´å¤šé¢å‘åº”ç”¨çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†å›½é™…åŒ–æ”¯æŒå’Œæ¡†æ¶äº‹ä»¶ä½“ç³»ï¼Œæ›´æ˜“äºåˆ›å»ºå®é™…åº”ç”¨ã€‚æˆ‘ä»¬ä¸€èˆ¬ç§°BeanFactoryä¸ºIOCå®¹å™¨ï¼Œè€Œç§°ApplicationContextä¸ºåº”ç”¨ä¸Šä¸‹æ–‡ã€‚ä½†æœ‰æ—¶ä¸ºäº†è¡Œæ–‡æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¹Ÿç§°ApplicationContextä¸ºSpringå®¹å™¨ã€‚</p>
<p>å¯¹äºäºŒè€…çš„ç”¨é€”ï¼Œå¯ä»¥è¿›è¡Œç®€å•çš„åˆ’åˆ†ï¼šBeanFactoræ˜¯Springæ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘Springæœ¬èº«ï¼›ApplicationContexté¢å‘ä½¿ç”¨Springæ¡†æ¶çš„å¼€å‘è€…ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨åœºåˆéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ApplicationContextè€Œéåº•å±‚çš„BeanFactoryã€‚</p>
<p>ï¼ˆ1ï¼‰BeanFactoryï¼šæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„æ´¾ç”Ÿï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼š<br>â‘ ç»§æ‰¿MessageSourceï¼Œå› æ­¤æ”¯æŒå›½é™…åŒ–ã€‚<br>â‘¡ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶è®¿é—®æ–¹å¼ã€‚<br>â‘¢æä¾›åœ¨ç›‘å¬å™¨ä¸­æ³¨å†Œbeançš„äº‹ä»¶ã€‚<br>â‘£åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚<br>â‘¤è½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ ï¼Œä½¿å¾—æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¯”å¦‚åº”ç”¨çš„webå±‚ã€‚</p>
<p>ï¼ˆ2ï¼‰BeanFactoryé€šå¸¸æ˜¯ä½¿ç”¨ç¼–ç¨‹æ–¹å¼è¢«åˆ›å»ºçš„ï¼Œè€ŒApplicationContextå¯ä»¥ç”¨å£°æ˜ï¼ˆå°±æ˜¯ç”¨é…ç½®çš„æ–¹å¼ï¼‰çš„æ–¹å¼åˆ›å»ºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ApplicationContextçš„å®ç°ç±»ä¹‹ä¸€ç”¨ç¼–ç æ–¹å¼æ¥åˆ›å»ºApplicationContextçš„å®ä¾‹.</p>
<p>ï¼ˆ3ï¼‰BeanFactoryé‡‡ç”¨çš„æ˜¯å»¶è¿ŸåŠ è½½å½¢å¼æ¥æ³¨å…¥beançš„ï¼Œåªæœ‰åœ¨ä½¿ç”¨åˆ°getBean() æ—¶ï¼Œæ‰å¯¹è¯¥beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›beançš„é…ç½®é—®é¢˜ã€‚è€ŒApplicationContextåˆ™ç›¸åï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰çš„beanï¼Œè¿™æ ·åœ¨å®¹å™¨å¯åŠ¨æ—¶å°±èƒ½å‘ç°spring ä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯ã€‚è¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanï¼Œé€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚ç›¸å¯¹äºåŸºæœ¬çš„BeanFactoryï¼ŒApplicationContext å”¯ä¸€çš„ä¸è¶³æ˜¯å ç”¨å†…å­˜ç©ºé—´ã€‚å½“åº”ç”¨ç¨‹åºé…ç½®Beanè¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚</p>
<p>ï¼ˆ4ï¼‰BeanFactoryå’ŒApplicationContextéƒ½æ”¯æŒBeanPostProcesserã€BeanFactoryPostProcessorçš„ä½¿ç”¨ï¼Œä½†ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼šBeanFactoryæ˜¯æ‰‹åŠ¨æ³¨å†Œçš„ï¼ŒApplicationContextæ˜¯è‡ªåŠ¨æ³¨å†Œçš„.</p>
<h3 id="ApplicationContextçš„åˆ›å»ºæ–¹å¼"><a href="#ApplicationContextçš„åˆ›å»ºæ–¹å¼" class="headerlink" title="ApplicationContextçš„åˆ›å»ºæ–¹å¼"></a>ApplicationContextçš„åˆ›å»ºæ–¹å¼</h3><h4 id="ä½¿ç”¨ä»£ç æ–¹å¼"><a href="#ä½¿ç”¨ä»£ç æ–¹å¼" class="headerlink" title="ä½¿ç”¨ä»£ç æ–¹å¼"></a>ä½¿ç”¨ä»£ç æ–¹å¼</h4><p>ApplicationContextæ¥å£å¸¸ç”¨å®ç°ç±»ï¼š</p>
<p>1.ClassPathXmlApplicationContext</p>
<p>a.åŠ è½½å•ä¸ªé…ç½®æ–‡ä»¶æ–¹å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext cxt = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br></pre></td></tr></table></figure>

<p>b.åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶æ–¹å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String[] configs = &#123;&quot;bean1.xml&quot;,&quot;bean2.xml&quot;,&quot;bean3.xml&quot;&#125;;</span><br><span class="line">ApplicationContext cxt = new ClassPathXmlApplicationContext(configs);</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨é…ç½®-å£°æ˜"><a href="#ä½¿ç”¨é…ç½®-å£°æ˜" class="headerlink" title="ä½¿ç”¨é…ç½®(å£°æ˜)"></a>ä½¿ç”¨é…ç½®(å£°æ˜)</h4><p>åœ¨javaeeåº”ç”¨ä¸­å‘Servletå®¹å™¨ä¸­æ³¨å…¥Springå®¹å™¨çš„æ–¹æ³•</p>
<p>ContextLoader æ¥å£ï¼Œå®ƒæœ‰ä¸¤ä¸ªå®ç° :ContextLoaderListener å’Œ ContextLoaderServlet. å…¶ä¸­å¸¸ç”¨çš„æ˜¯ ContextLoaderListener. ä» spring æ–‡æ¡£ä¸Šå¯ä»¥æŸ¥åˆ°ï¼Œä»–ä»¬äºŒè€…å®ç°çš„åŠŸèƒ½åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯ ContextLoaderListener ä¸èƒ½åœ¨ä¸ Servlet2.2 å…¼å®¹çš„ web å®¹å™¨ä¸­ä½¿ç”¨ã€‚å¦å¤–ï¼Œå› ä¸º ContextLoaderLitener æ˜¯ä¸€ä¸ª servlet Listener ï¼Œå› æ­¤ï¼Œå®ƒæ˜¯åœ¨ servlet context å»ºç«‹åç«‹å³æ‰§è¡Œï¼Œä¹Ÿå°±ä»¥ä¸ºè¿™ servlet å·²å»ºç«‹ï¼Œ spring çš„ ApplicationContext å°±å¾—åˆ°äº†åˆå§‹åŒ–ï¼Œå¹¶ä¸”èƒ½å¤Ÿç›¸åº”ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œæ‰€ä»¥é¦–é€‰ ContextLoaderListener.</p>
<p>åœ¨web.xmlä¸­æ·»åŠ å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;? xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; </span><br><span class="line"> &lt;! DOCTYPE web-app</span><br><span class="line">      PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span><br><span class="line">      &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt; </span><br><span class="line"> </span><br><span class="line"> &lt; web-app &gt; </span><br><span class="line">     &lt; display-name &gt; Baselib Application &lt;/ display-name &gt; </span><br><span class="line">    </span><br><span class="line">     &lt; context-param &gt; </span><br><span class="line">        &lt; param-name &gt; contextConfigLocation &lt;/ param-name &gt; </span><br><span class="line">        &lt; param-value &gt; </span><br><span class="line">        /WEB-INF/classes/spring-sup-middelbeans.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-action.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-beans.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-cm.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-hibernate.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-resource.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-sso.xml</span><br><span class="line">        /WEB-INF/classes/com/javaeye/jert/application_context.xml</span><br><span class="line">        &lt;/ param-value &gt; </span><br><span class="line">    &lt;/ context-param &gt; </span><br><span class="line"></span><br><span class="line">    &lt; listener &gt; </span><br><span class="line">        &lt; listener-class &gt; org.springframework.web.context.ContextLoaderListener &lt;/ listener-class &gt; </span><br><span class="line">    &lt;/ listener &gt; </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt; param-value &gt; /WEB-INF/classes/spring-*.xml &lt;/ context-param &gt; </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¸»è¦æ˜¯é…ç½®äº† spring çš„ç›‘å¬å™¨ ContextLoaderListener ï¼Œå®ƒæ£€æŸ¥ contextConfigLocation è¿™ä¸ªå‚æ•°ã€‚å¦‚æœå®ƒä¸å­˜åœ¨çš„è¯ï¼Œå®ƒå°†ç”¨ /WEB-INF/applicationContext.xml ä½œä¸ºé»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœ contextConfigLocation å­˜åœ¨çš„è¯ï¼Œå®ƒå°†æ ¹æ®è¯¥å‚æ•°çš„å€¼æŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œæ¥ä¸€ä¸€è¯»å– spring å‚æ•°ã€‚</p>
<p>contextConfigLocation æ˜¯è¢« spring å›ºå®šçš„ï¼Œä¸“é—¨ç”¨æ¥æŸ¥  æ‰¾é…ç½®æ–‡ä»¶ä½ç½®çš„.</p>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/sole_ghost/article/details/1389664">https://blog.csdn.net/sole_ghost/article/details/1389664</a></p>
<h3 id="ApplicationContext-getBean"><a href="#ApplicationContext-getBean" class="headerlink" title="ApplicationContext.getBean"></a>ApplicationContext.getBean</h3><p>ç›®çš„ï¼šè·å–Springå®¹å™¨ä¸­å·²åˆå§‹åŒ–çš„bean</p>
<p>ç¬¬ä¸€ç§ï¼šgetBean(String name)<br>å‚æ•°nameè¡¨ç¤ºIOCå®¹å™¨ä¸­å·²ç»å®ä¾‹åŒ–çš„beançš„idæˆ–è€…name,<br>åœ¨IOCå®¹å™¨ä¸­æ˜¯å”¯ä¸€çš„ä¸èƒ½é‡åã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">Person p = (Person) ctx.getBean(&quot;p&quot;);</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§ï¼šgetBean(Class<T> type)<br>typeè¡¨ç¤ºè¦åŠ è½½çš„Beançš„ç±»å‹ã€‚<br>å¦‚æœè¯¥ç±»å‹æ²¡æœ‰ç»§æ‰¿ä»»ä½•çˆ¶ç±»(Objectç±»é™¤å¤–)å’Œå®ç°æ¥å£çš„è¯ï¼Œé‚£ä¹ˆè¦æ±‚è¯¥ç±»å‹çš„beanåœ¨IOCå®¹å™¨ä¸­ä¹Ÿå¿…é¡»æ˜¯å”¯ä¸€çš„.(æ¯”å¦‚å®šä¹‰åŒä¸€ç±»çš„ä¸¤ä¸ªbeanï¼Œä½†æ˜¯propertyæ³¨å…¥çš„å±æ€§ä¸ä¸€æ ·)<br>ä¸éœ€è¦ç±»å‹è½¬æ¢ã€‚</T></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">Person p = ctx.getBean(Person.class);</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§ï¼šgetBean(String name,Class<T> type)<br>è¿™ç§æ–¹å¼æ¯”è¾ƒé€‚åˆæ¥å£/æŠ½è±¡ç±»ï¼Œæœ‰ä¸åŒå®ç°ç±»æˆ–å­ç±»æ—¶ï¼Œtypeå†™æ¥å£æˆ–çˆ¶ç±»ï¼Œnameå†™bean nameã€‚</T></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person p = ctx.getBean(&quot;person&quot;,BasePerson.class);</span><br></pre></td></tr></table></figure>

<p>ç¬¬å››ç§ï¼š getBean(String name,Object[] args)<br>ç¬¬äºŒä¸ªå‚æ•°Object[] argså¯ä»¥ç»™beançš„å±æ€§èµ‹å€¼ï¼Œèµ‹å€¼çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šæ„é€ æ–¹æ³•å’Œå·¥å‚æ–¹æ³•ã€‚ä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è·å–çš„beanå¿…é¡»æŠŠscopeå±æ€§è®¾ç½®ä¸ºprototypeï¼Œä¹Ÿå°±æ˜¯éå•ä¾‹æ¨¡å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1.æ„é€ æ–¹æ³•æ–¹å¼ï¼š</span><br><span class="line">&lt;bean name=&quot;p3&quot; class=&quot;com.bean.Person&quot; scope=&quot;prototype&quot;/&gt;</span><br><span class="line"></span><br><span class="line">Person p = (Person) ctx.getBean(&quot;p3&quot;,new Object[]&#123;&quot;ç‹äº”&quot;,35&#125;);</span><br><span class="line"></span><br><span class="line">2.å·¥å‚æ³¨å…¥æ–¹å¼ï¼š</span><br><span class="line">å·¥å‚ç±»ï¼š</span><br><span class="line">public class PersonFactory &#123;</span><br><span class="line">//é™æ€å·¥å‚æ³¨å…¥</span><br><span class="line">public static Person getPersonInstance(String name,int age)throws Exception</span><br><span class="line">&#123;</span><br><span class="line">  Person p = (Person)Class.forName(&quot;com.bean.Person&quot;).newInstance();</span><br><span class="line">   Method m = p.getClass().getMethod(&quot;setName&quot;, java.lang.String.class);</span><br><span class="line">   m.invoke(p, name);</span><br><span class="line">   m = p.getClass().getMethod(&quot;setAge&quot;, int.class);</span><br><span class="line">   m.invoke(p, age);</span><br><span class="line">   return p;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">é…ç½®beanï¼š</span><br><span class="line">&lt;bean name=&quot;p3&quot; class=&quot;com.factory.PersonFactory&quot; factory-method=&quot;getPersonInstance&quot; scope=&quot;prototype&quot;&gt;</span><br><span class="line">&lt;constructor-arg name=&quot;name&quot;&gt;</span><br><span class="line">&lt;null/&gt;</span><br><span class="line">&lt;/constructor-arg&gt;</span><br><span class="line">&lt;constructor-arg name=&quot;age&quot; value=&quot;0&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">Person p = (Person) ctx.getBean(&quot;p3&quot;,new Object[]&#123;&quot;ç‹äº”&quot;,35&#125;);</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_23927391/article/details/80625578">https://blog.csdn.net/qq_23927391/article/details/80625578</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/23/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/yarn%E5%92%8Cmapreduce/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/23/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/yarn%E5%92%8Cmapreduce/" class="post-title-link" itemprop="url">yarnå’Œmapreduceæ¨¡å‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-04-23 12:45:14 / Modified: 18:55:54" itemprop="dateCreated datePublished" datetime="2022-04-23T12:45:14+08:00">2022-04-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åç«¯å¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="mapreduce"><a href="#mapreduce" class="headerlink" title="mapreduce"></a>mapreduce</h3><p>è°·æ­Œä¸‰å‰‘å®¢ï¼šGFSï¼ˆé«˜å¯Œå¸…ï¼‰ã€bigtableã€mapreduceï¼ˆåäººï¼‰</p>
<p>å±‚æ¬¡ï¼šGFSæœ€åº•å±‚æ–‡ä»¶ç³»ç»Ÿã€åœ¨å¾€ä¸Šæ˜¯BigTableæ–‡ä»¶æ¨¡å‹ã€å†å¾€ä¸Šæ˜¯ç®—æ³•MapReduce</p>
<p>mapï¼šæ‹†è§£<br>reduceï¼šç»„åˆ</p>
<p>mapreduceç±»ä¼¼äºèµ›ç™¾å‘³ï¼šå¾—åˆ°æ•°æ®ï¼ˆinputï¼‰ã€åˆ‡åˆ†ï¼ˆsplitï¼‰ã€æŠŠæ•°æ®å½’ç±»ï¼ˆmapï¼‰ã€ç»„è£…ï¼ˆshuffleï¼‰ã€äº¤ä»˜ï¼ˆreduceï¼‰</p>
<p>ä¾‹å­ï¼šmapreduceåšå•è¯å‡ºç°æ•°çš„ç»Ÿè®¡ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æ˜¯å¹¶è¡Œçš„è¿‡ç¨‹ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/f7410910fe5e4976b6496ee312260cf4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFkZWxsbGx4eHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="tu"></p>
<p>ä¾‹å­ï¼šmapreduceå®ç°å€’æ’ç´¢å¼•ï¼Œè®°å½•æ¯ä¸ªå•è¯å‡ºç°çš„ä½ç½®<br><img src="https://img-blog.csdnimg.cn/55a12ac4d4a949d18ebc39338fdb0a39.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFkZWxsbGx4eHg=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>mapreduceæ¶æ„ï¼š<br>é¦–å…ˆæ˜¯ç”¨æˆ·è¿›ç¨‹ï¼ˆuser programï¼‰åè°ƒå’Œå®šä¹‰ç¨‹åºæ€ä¹ˆè¿è¡Œï¼Œè´Ÿè´£æ‹†è§£workerï¼Œå…¶ä¸­ä¸€ä¸ªmaster workerï¼ˆä½œä¸ºç”¨æˆ·çš„ä»£ç†æ¥åè°ƒæ•´ä¸ªè¿‡ç¨‹ï¼‰ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/6e02cd00a6b543d9bed5d582a23af7f3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFkZWxsbGx4eHg=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>mapreduceæœ¬è´¨å°±æ˜¯åˆ†æ”¯æ³•ã€‚</p>
<h3 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h3><p>å¦ä¸€ç§èµ„æºåè°ƒè€…ï¼Œhadoop1.xä¸­è´Ÿè´£èµ„æºç®¡ç†çš„æ˜¯ä¸€JobTrackerã€‚</p>
<p>yarnè´Ÿè´£å¤§æ•°æ®è®¡ç®—ä¸­çš„ï¼šèµ„æºç®¡ç†ã€ç¨‹åºè°ƒåº¦ã€‚</p>
<p>ä¸»è¦ç”±ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†æ„æˆï¼šResourceManagerï¼ˆç»Ÿæ½å…¨å±€ï¼‰ã€NodeManagerï¼ˆç®¡ç†æ¯ä¸ªè®¡ç®—æœºèŠ‚ç‚¹ä¸Šçš„èµ„æºè°ƒåº¦ï¼‰<br>ResourceManagerä¸­æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼šApplicationManagerã€ResourceScheduler</p>
<p>1.ä½œä¸šæäº¤é˜¶æ®µï¼šclientå‘æ•´ä¸ªé›†ç¾¤æäº¤jobï¼Œç”³è¯·job_idï¼ŒResourceManagerè¿”å›jobèµ„æºæäº¤è·¯å¾„å’Œjob_idï¼Œclientæ”¶åˆ°åå‘é€jaråŒ…åˆ°æŒ‡å®šè·¯å¾„HDFSã€‚clientæäº¤åå‘ResourceManageræäº¤æ‰§è¡Œè¯·æ±‚ï¼ŒResourceManageråˆ›å»ºä¸€ä¸ªApplicationManageræ¥ç®¡ç†è¿™ä¸ªjobã€‚</p>
<p>2.ä½œä¸šåˆå§‹åŒ–é˜¶æ®µï¼šApplicationManagerå°†jobæäº¤åˆ°ResourceSchedulerä¸­ï¼ŒResourceSchedulerç»´æŠ¤ä¸€ä¸ªjobé˜Ÿåˆ—ï¼Œç­‰å¾…æ‰§è¡Œã€‚å¯ä»¥æ‰§è¡Œæ—¶ï¼ŒResourceScheduleré€šçŸ¥ApplicationManageræœ‰ä¸€ä¸ªNodeManagerå¯ä»¥æ‰§è¡Œjobã€‚ApplicationManageråœ¨NodeManagerä¸­å¼€è¾Ÿå®¹å™¨Containerï¼ŒContainerä¸­å¯åŠ¨ApplicationMasterï¼ŒApplicationMasterè·å–HDFSä¸Šçš„æ–‡ä»¶ï¼Œç”ŸæˆTaskï¼ˆå¯ä»¥æ˜¯mapTaskï¼Œä¹Ÿå¯ä»¥æ˜¯reduceTaskï¼‰ã€‚</p>
<p>3.ä»»åŠ¡åˆ†é…é˜¶æ®µï¼šApplicationMasterå‘ResourceManagerç”³è¯·è¿è¡ŒTaskçš„ä»»åŠ¡èµ„æºï¼ŒResourceManagerå°†Taskä»»åŠ¡åˆ†é…ç»™ç©ºé—²çš„NodeManagerï¼ŒNodeManageråˆ›å»ºç”¨äºæ‰§è¡ŒTaskçš„å®¹å™¨Containerã€‚</p>
<p>4.ä»»åŠ¡è¿è¡Œé˜¶æ®µï¼šApplicationMasteré€šçŸ¥æ‰€æœ‰æ¥æ”¶åˆ°Taskè®¡ç®—ä»»åŠ¡çš„NodeManagerå¯åŠ¨è®¡ç®—ï¼ŒNodeManagerè¿›è¡Œè®¡ç®—ã€‚æ‰§è¡Œå®Œæˆåï¼Œå‘ResourceManagerç”³è¯·Containerè¿è¡Œæ–°çš„Taskã€‚æ‰€æœ‰çš„Taskæ‰§è¡Œå®Œæ¯•åï¼ŒApplicationMasterå‘ResourceManagerç”³è¯·æ³¨é”€è‡ªå·±ã€‚</p>
<p>5.ä½œä¸šå®Œæˆé˜¶æ®µï¼šæ¡†æ¶æ›´æ–°ä»»åŠ¡çš„è¿›åº¦å’ŒçŠ¶æ€ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/9d376a8d36394947951162090fcd08a2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFkZWxsbGx4eHg=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>è§†é¢‘åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Pa4y1t7nf?spm_id_from=333.1007.top_right_bar_window_history.content.click">https://www.bilibili.com/video/BV1Pa4y1t7nf?spm_id_from=333.1007.top_right_bar_window_history.content.click</a></p>
<h3 id="mapreduceä¸yarn"><a href="#mapreduceä¸yarn" class="headerlink" title="mapreduceä¸yarn"></a>mapreduceä¸yarn</h3><p>mapreduceçš„æµç¨‹ï¼š</p>
<p>1.é¦–å…ˆç”¨æˆ·ç¨‹åº (JobClient) æäº¤äº†ä¸€ä¸ª jobï¼Œjob çš„ä¿¡æ¯ä¼šå‘é€åˆ° Job Tracker ä¸­ï¼ŒJob Tracker æ˜¯ Map-reduce æ¡†æ¶çš„ä¸­å¿ƒï¼Œä»–éœ€è¦ä¸é›†ç¾¤ä¸­çš„æœºå™¨å®šæ—¶é€šä¿¡ (heartbeat), éœ€è¦ç®¡ç†å“ªäº›ç¨‹åºåº”è¯¥è·‘åœ¨å“ªäº›æœºå™¨ä¸Šï¼Œéœ€è¦ç®¡ç†æ‰€æœ‰ job å¤±è´¥ã€é‡å¯ç­‰æ“ä½œï¼Œéœ€è¦åˆ†é…åœ¨æ¯ä¸ª TaskTracker ä¸Šè¿è¡Œçš„ map å’Œ reduce ä»»åŠ¡ã€‚</p>
<p>2.TaskTracker æ˜¯ Map-reduce é›†ç¾¤ä¸­æ¯å°æœºå™¨éƒ½æœ‰çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œä»–åšçš„äº‹æƒ…ä¸»è¦æ˜¯ç›‘è§†è‡ªå·±æ‰€åœ¨æœºå™¨çš„èµ„æºæƒ…å†µã€‚ </p>
<p>3.TaskTracker åŒæ—¶ç›‘è§†å½“å‰æœºå™¨çš„ tasks è¿è¡ŒçŠ¶å†µã€‚TaskTracker éœ€è¦æŠŠè¿™äº›ä¿¡æ¯é€šè¿‡ heartbeat å‘é€ç»™ JobTrackerï¼ŒJobTracker ä¼šæœé›†è¿™äº›ä¿¡æ¯ä»¥ç»™æ–°æäº¤çš„ job åˆ†é…è¿è¡Œåœ¨å“ªäº›æœºå™¨ä¸Šã€‚ä¸Šå›¾è™šçº¿ç®­å¤´å°±æ˜¯è¡¨ç¤ºæ¶ˆæ¯çš„å‘é€ - æ¥æ”¶çš„è¿‡ç¨‹ã€‚</p>
<hr>
<p>MapReduceå­˜åœ¨çš„é—®é¢˜ï¼š</p>
<p>1.JobTracker æ˜¯ Map-reduce çš„é›†ä¸­å¤„ç†ç‚¹ï¼Œå­˜åœ¨å•ç‚¹æ•…éšœã€‚</p>
<p>2.JobTracker å®Œæˆäº†å¤ªå¤šçš„ä»»åŠ¡ï¼Œé€ æˆäº†è¿‡å¤šçš„èµ„æºæ¶ˆè€—ï¼Œå½“ map-reduce job éå¸¸å¤šçš„æ—¶å€™ï¼Œä¼šé€ æˆå¾ˆå¤§çš„å†…å­˜å¼€é”€ï¼Œæ½œåœ¨æ¥è¯´ï¼Œä¹Ÿå¢åŠ äº† JobTracker fail çš„é£é™©ï¼Œè¿™ä¹Ÿæ˜¯ä¸šç•Œæ™®éæ€»ç»“å‡ºè€ Hadoop çš„ Map-Reduce åªèƒ½æ”¯æŒ 4000 èŠ‚ç‚¹ä¸»æœºçš„ä¸Šé™ã€‚</p>
<p>3.åœ¨ TaskTracker ç«¯ï¼Œä»¥ map/reduce task çš„æ•°ç›®ä½œä¸ºèµ„æºçš„è¡¨ç¤ºè¿‡äºç®€å•ï¼Œæ²¡æœ‰è€ƒè™‘åˆ° cpu/ å†…å­˜çš„å ç”¨æƒ…å†µï¼Œå¦‚æœä¸¤ä¸ªå¤§å†…å­˜æ¶ˆè€—çš„ task è¢«è°ƒåº¦åˆ°äº†ä¸€å—ï¼Œå¾ˆå®¹æ˜“å‡ºç° OOM (å†…å­˜æº¢å‡ºï¼šéœ€è¦çš„å†…å­˜ç©ºé—´å¤§äºç³»ç»Ÿåˆ†é…çš„å†…å­˜ç©ºé—´)ã€‚</p>
<p>4.åœ¨ TaskTracker ç«¯ï¼ŒæŠŠèµ„æºå¼ºåˆ¶åˆ’åˆ†ä¸º map task slot å’Œ reduce task slot, å¦‚æœå½“ç³»ç»Ÿä¸­åªæœ‰ map task æˆ–è€…åªæœ‰ reduce task çš„æ—¶å€™ï¼Œä¼šé€ æˆèµ„æºçš„æµªè´¹ï¼Œä¹Ÿå°±æ˜¯å‰é¢æè¿‡çš„é›†ç¾¤èµ„æºåˆ©ç”¨çš„é—®é¢˜ã€‚</p>
<p>5.æºä»£ç å±‚é¢åˆ†æçš„æ—¶å€™ï¼Œä¼šå‘ç°ä»£ç éå¸¸çš„éš¾è¯»ï¼Œå¸¸å¸¸å› ä¸ºä¸€ä¸ª class åšäº†å¤ªå¤šçš„äº‹æƒ…ï¼Œä»£ç é‡è¾¾ 3000 å¤šè¡Œï¼Œï¼Œé€ æˆ class çš„ä»»åŠ¡ä¸æ¸…æ™°ï¼Œå¢åŠ  bug ä¿®å¤å’Œç‰ˆæœ¬ç»´æŠ¤çš„éš¾åº¦ã€‚</p>
<p>6.ä»æ“ä½œçš„è§’åº¦æ¥çœ‹ï¼Œç°åœ¨çš„ Hadoop MapReduce æ¡†æ¶åœ¨æœ‰ä»»ä½•é‡è¦çš„æˆ–è€…ä¸é‡è¦çš„å˜åŒ– ( ä¾‹å¦‚ bug ä¿®å¤ï¼Œæ€§èƒ½æå‡å’Œç‰¹æ€§åŒ– ) æ—¶ï¼Œéƒ½ä¼šå¼ºåˆ¶è¿›è¡Œç³»ç»Ÿçº§åˆ«çš„å‡çº§æ›´æ–°ã€‚æ›´ç³Ÿçš„æ˜¯ï¼Œå®ƒä¸ç®¡ç”¨æˆ·çš„å–œå¥½ï¼Œå¼ºåˆ¶è®©åˆ†å¸ƒå¼é›†ç¾¤ç³»ç»Ÿçš„æ¯ä¸€ä¸ªç”¨æˆ·ç«¯åŒæ—¶æ›´æ–°ã€‚è¿™äº›æ›´æ–°ä¼šè®©ç”¨æˆ·ä¸ºäº†éªŒè¯ä»–ä»¬ä¹‹å‰çš„åº”ç”¨ç¨‹åºæ˜¯ä¸æ˜¯é€‚ç”¨æ–°çš„ Hadoop ç‰ˆæœ¬è€Œæµªè´¹å¤§é‡æ—¶é—´ã€‚</p>
<p>æ€»ç»“ï¼šä»ä¸šç•Œä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„å˜åŒ–è¶‹åŠ¿å’Œ hadoop æ¡†æ¶çš„é•¿è¿œå‘å±•æ¥çœ‹ï¼ŒMapReduce çš„ JobTracker/TaskTracker æœºåˆ¶éœ€è¦å¤§è§„æ¨¡çš„è°ƒæ•´æ¥ä¿®å¤å®ƒåœ¨å¯æ‰©å±•æ€§ï¼Œå†…å­˜æ¶ˆè€—ï¼Œçº¿ç¨‹æ¨¡å‹ï¼Œå¯é æ€§å’Œæ€§èƒ½ä¸Šçš„ç¼ºé™·ã€‚</p>
<hr>
<p>yarnï¼š</p>
<p>ä» 0.23.0 ç‰ˆæœ¬å¼€å§‹ï¼ŒHadoop çš„ MapReduce æ¡†æ¶å®Œå…¨é‡æ„ï¼Œå‘ç”Ÿäº†æ ¹æœ¬çš„å˜åŒ–ã€‚æ–°çš„ Hadoop MapReduce æ¡†æ¶å‘½åä¸º MapReduceV2 æˆ–è€…å« Yarnã€‚</p>
<p>é‡æ„æ ¹æœ¬çš„æ€æƒ³æ˜¯å°† JobTracker ä¸¤ä¸ªä¸»è¦çš„åŠŸèƒ½åˆ†ç¦»æˆå•ç‹¬çš„ç»„ä»¶ï¼Œè¿™ä¸¤ä¸ªåŠŸèƒ½æ˜¯èµ„æºç®¡ç†å’Œä»»åŠ¡è°ƒåº¦ / ç›‘æ§ã€‚æ–°çš„ResourceManager èµ„æºç®¡ç†å™¨å…¨å±€ç®¡ç†æ‰€æœ‰åº”ç”¨ç¨‹åºè®¡ç®—èµ„æºçš„åˆ†é…ï¼Œæ¯ä¸€ä¸ªåº”ç”¨çš„ ApplicationMaster è´Ÿè´£ç›¸åº”çš„è°ƒåº¦å’Œåè°ƒã€‚ä¸€ä¸ªåº”ç”¨ç¨‹åºæ— éæ˜¯ä¸€ä¸ªå•ç‹¬çš„ä¼ ç»Ÿçš„ MapReduce ä»»åŠ¡æˆ–è€…æ˜¯ä¸€ä¸ª DAG( æœ‰å‘æ— ç¯å›¾ ) ä»»åŠ¡ã€‚ResourceManager å’Œæ¯ä¸€å°æœºå™¨çš„èŠ‚ç‚¹ç®¡ç†æœåŠ¡å™¨èƒ½å¤Ÿç®¡ç†ç”¨æˆ·åœ¨é‚£å°æœºå™¨ä¸Šçš„è¿›ç¨‹å¹¶èƒ½å¯¹è®¡ç®—è¿›è¡Œç»„ç»‡ã€‚</p>
<p>è€çš„MapReduceä¸»è¦åŒ…æ‹¬Job Trackerå’ŒTask Trackerï¼ŒYARNä¸­ä¸»è¦æ˜¯ä¸‰ä¸ªç»„ä»¶ï¼šResource Managerã€Node Managerå’ŒApplication Masterã€‚Resource Managerè´Ÿè´£å…¨å±€èµ„æºåˆ†é…ï¼ŒApplication Masteræ¯ä¸ªèŠ‚ç‚¹ï¼ˆjobï¼Ÿï¼‰ä¸€ä¸ªï¼Œè´Ÿè´£å½“å‰èŠ‚ç‚¹çš„è°ƒåº¦å’Œåè°ƒã€‚Node Manageræ˜¯æ¯å°æœºå™¨çš„ä»£ç†ï¼Œç›‘æ§åº”ç”¨ç¨‹åºçš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œå¹¶æ±‡æŠ¥ç»™Resource Managerã€‚å› æ­¤ä¸è€çš„MapReduceç›¸æ¯”ï¼ŒYARNæŠŠèµ„æºç®¡ç†ä¸ä»»åŠ¡è°ƒåº¦çš„å·¥ä½œåˆ†ç¦»å¼€æ¥ï¼Œå‡å°‘äº†MapReduceä¸­Job Trackerçš„å‹åŠ›ã€‚</p>
<p>ResourceManagerï¼šæ˜¯ä¸€ä¸ªä¸­å¿ƒçš„æœåŠ¡ï¼Œå®ƒåšçš„äº‹æƒ…æ˜¯è°ƒåº¦ã€å¯åŠ¨æ¯ä¸€ä¸ª Job æ‰€å±çš„ ApplicationMasterã€å¦å¤–ç›‘æ§ ApplicationMaster çš„å­˜åœ¨æƒ…å†µã€‚ResourceManager è´Ÿè´£ä½œä¸šä¸èµ„æºçš„è°ƒåº¦ã€‚æ¥æ”¶ JobSubmitter æäº¤çš„ä½œä¸šï¼ŒæŒ‰ç…§ä½œä¸šçš„ä¸Šä¸‹æ–‡ (Context) ä¿¡æ¯ï¼Œä»¥åŠä» NodeManager æ”¶é›†æ¥çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¯åŠ¨è°ƒåº¦è¿‡ç¨‹ï¼Œåˆ†é…ä¸€ä¸ª Container ä½œä¸º App Mstr.</p>
<p>NodeManagerï¼šåŠŸèƒ½æ¯”è¾ƒä¸“ä¸€ï¼Œå°±æ˜¯è´Ÿè´£ Container çŠ¶æ€çš„ç»´æŠ¤ï¼Œå¹¶å‘ RM ä¿æŒå¿ƒè·³ã€‚</p>
<p>ApplicationMasterï¼šè´Ÿè´£ä¸€ä¸ª Job ç”Ÿå‘½å‘¨æœŸå†…çš„æ‰€æœ‰å·¥ä½œï¼Œç±»ä¼¼è€çš„æ¡†æ¶ä¸­ JobTrackerã€‚ä½†æ³¨æ„æ¯ä¸€ä¸ª Jobï¼ˆä¸æ˜¯æ¯ä¸€ç§ï¼‰éƒ½æœ‰ä¸€ä¸ª ApplicationMasterï¼Œå®ƒå¯ä»¥è¿è¡Œåœ¨ ResourceManager ä»¥å¤–çš„æœºå™¨ä¸Šã€‚</p>
<hr>
<p>yarnçš„ä¼˜åŠ¿ï¼š</p>
<p>1 YARNå¤§å¤§å‡å°‘äº†Job Trackerçš„èµ„æºæ¶ˆè€—ï¼Œå¹¶ä¸”è®©ç›‘æµ‹æ¯ä¸ªJobå­ä»»åŠ¡çŠ¶æ€çš„ç¨‹åºåˆ†å¸ƒå¼åŒ–äº†ã€‚<br>2 YARNä¸­Application Masteræ˜¯ä¸€ä¸ªå¯å˜æ›´éƒ¨åˆ†ï¼Œç”¨æˆ·å¯ä»¥å¯¹ä¸åŒç¼–ç¨‹æ¨¡å‹ç¼–å†™è‡ªå·±çš„AppMstï¼Œè®©æ›´å¤šç±»å‹çš„ç¼–ç¨‹æ¨¡å‹èƒ½è·‘åœ¨Hadoopé›†ç¾¤ä¸­ã€‚<br>3 è€çš„æ¡†æ¶ä¸­ï¼ŒJob Trackerä¸€ä¸ªå¾ˆå¤§çš„è´Ÿæ‹…å°±æ˜¯ç›‘æ§Jobä¸‹ä»»åŠ¡çš„è¿è¡ŒçŠ¶å†µï¼Œç°åœ¨ç”±Application Masterå»åšï¼Œè€ŒResource Manageræ˜¯ç›‘æµ‹Application Masterçš„è¿è¡ŒçŠ¶å†µï¼Œå¦‚æœå‡ºé—®é¢˜ï¼Œä¼šå°†å…¶åœ¨å…¶ä»–æœºå™¨ä¸Šé‡å¯ã€‚</p>
<p>å‡ºå¤„ï¼š<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9523999e13cf">https://www.jianshu.com/p/9523999e13cf</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/hahachenchen789/article/details/80527706">https://blog.csdn.net/hahachenchen789/article/details/80527706</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/22/myblog/spring/spring%E6%A1%86%E6%9E%B6%E4%B9%8Bbean%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/22/myblog/spring/spring%E6%A1%86%E6%9E%B6%E4%B9%8Bbean%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">springæ¡†æ¶@Beanæ³¨è§£ã€æ‹¦æˆªå™¨ã€ç›‘å¬å™¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-22 22:14:57" itemprop="dateCreated datePublished" datetime="2022-04-22T22:14:57+08:00">2022-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-20 23:23:55" itemprop="dateModified" datetime="2022-05-20T23:23:55+08:00">2022-05-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring%E7%90%86%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">springç†è§£</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Beanæ³¨è§£"><a href="#Beanæ³¨è§£" class="headerlink" title="@Beanæ³¨è§£"></a>@Beanæ³¨è§£</h3><p>ä½œç”¨åœ¨æ–¹æ³•ä¸Šçš„æ³¨è§£ï¼ŒSpringçš„@Beanæ³¨è§£ç”¨äºå‘Šè¯‰æ–¹æ³•ï¼Œäº§ç”Ÿä¸€ä¸ªBeanå¯¹è±¡ï¼Œç„¶åè¿™ä¸ªBeanå¯¹è±¡äº¤ç»™Springç®¡ç†ã€‚äº§ç”Ÿè¿™ä¸ªBeanå¯¹è±¡çš„æ–¹æ³•Springåªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œéšåè¿™ä¸ªSpringå°†ä¼šå°†è¿™ä¸ªBeanå¯¹è±¡æ”¾åœ¨è‡ªå·±çš„IOCå®¹å™¨ä¸­ã€‚(å’Œxmlé…ç½®ä¸­çš„beanæ ‡ç­¾çš„ä½œç”¨æ˜¯ä¸€æ ·çš„)</p>
<p>@Beanä¸»è¦ç”¨åœ¨@Configurationæ³¨è§£çš„ç±»ä¸­ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨@Componentæ³¨è§£çš„ç±»ä¸­ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class AppConfig &#123;</span><br><span class="line"> </span><br><span class="line">    // ä½¿ç”¨@Bean æ³¨è§£è¡¨æ˜myBeanéœ€è¦äº¤ç»™Springè¿›è¡Œç®¡ç†</span><br><span class="line">    // æœªæŒ‡å®šbean çš„åç§°ï¼Œé»˜è®¤é‡‡ç”¨çš„æ˜¯æ–¹æ³•åçš„é…ç½®æ–¹å¼</span><br><span class="line">    @Bean</span><br><span class="line">    public MyBean buildMyBean()&#123;</span><br><span class="line">        return new MyBean();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class MyBean &#123;</span><br><span class="line"> </span><br><span class="line">    public MyBean()&#123;</span><br><span class="line">        System.out.println(&quot;MyBean Initializing&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»SpringBeanApplicationTestsï¼Œæµ‹è¯•ä¸Šè¿°ä»£ç çš„æ­£ç¡®æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class SpringBeanApplicationTests &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">        context.getBean(&quot;buildMyBean&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Beançš„å±æ€§ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">valueï¼šbeanåˆ«åå’Œnameæ˜¯ç›¸äº’ä¾èµ–å…³è”çš„ï¼Œvalue,nameå¦‚æœéƒ½ä½¿ç”¨çš„è¯å€¼å¿…é¡»è¦ä¸€è‡´ï¼›</span><br><span class="line"></span><br><span class="line">nameï¼šbeanåç§°ï¼Œå¦‚æœä¸å†™ä¼šé»˜è®¤ä¸ºæ³¨è§£çš„æ–¹æ³•åç§°ï¼›</span><br><span class="line"></span><br><span class="line">autowireï¼šè‡ªå®šè£…é…é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œå»ºè®®å°½é‡ä¸è¦å¼€å¯ï¼Œå› ä¸ºè‡ªåŠ¨è£…é…ä¸èƒ½è£…é…åŸºæœ¬æ•°æ®ç±»å‹ã€å­—ç¬¦ä¸²ã€æ•°ç»„ç­‰ï¼Œè¿™æ˜¯è‡ªåŠ¨è£…é…è®¾è®¡çš„å±€é™æ€§ï¼Œå¹¶ä¸”è‡ªåŠ¨è£…é…ä¸å¦‚ä¾èµ–æ³¨å…¥ç²¾ç¡®ï¼›</span><br><span class="line"></span><br><span class="line">initMethodï¼šbeançš„åˆå§‹åŒ–ä¹‹å‰çš„æ‰§è¡Œæ–¹æ³•ï¼Œè¯¥å‚æ•°ä¸€èˆ¬ä¸æ€ä¹ˆç”¨ï¼Œå› ä¸ºå®Œå…¨å¯ä»¥åœ¨ä»£ç ä¸­å®ç°ï¼›</span><br><span class="line"></span><br><span class="line">destroyMethodï¼šé»˜è®¤ä½¿ç”¨javaConfigé…ç½®çš„beanï¼Œå¦‚æœå­˜åœ¨closeæˆ–è€…shutdownæ–¹æ³•ï¼Œåˆ™åœ¨beané”€æ¯æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œå¦‚æœä½ ä¸æƒ³æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œåˆ™æ·»åŠ @Bean(destroyMethod=&quot;&quot;)æ¥é˜²æ­¢å‡ºå‘é”€æ¯æ–¹æ³•ï¼›</span><br></pre></td></tr></table></figure>

<p>Springä¸­çš„@Beanæ³¨è§£ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_36380516/article/details/119194065">https://blog.csdn.net/weixin_36380516/article/details/119194065</a></p>
<h3 id="Beanå’Œ-Component"><a href="#Beanå’Œ-Component" class="headerlink" title="@Beanå’Œ@Component"></a>@Beanå’Œ@Component</h3><ul>
<li>@Componentæ³¨è§£è¡¨æ˜ä¸€ä¸ªç±»ä¼šä½œä¸ºç»„ä»¶ç±»ï¼Œå¹¶å‘ŠçŸ¥Springè¦ä¸ºè¿™ä¸ªç±»åˆ›å»ºbeanã€‚</li>
<li>@Beanæ³¨è§£å‘Šè¯‰Springè¿™ä¸ªæ–¹æ³•å°†ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è¦æ³¨å†Œä¸ºSpringåº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„beanã€‚é€šå¸¸æ–¹æ³•ä½“ä¸­åŒ…å«äº†æœ€ç»ˆäº§ç”Ÿbeanå®ä¾‹çš„é€»è¾‘ã€‚</li>
</ul>
<p>ç›¸åŒç‚¹ï¼šä¸¤è€…çš„ç»“æœéƒ½æ˜¯ä¸ºspringå®¹å™¨æ³¨å†ŒBean.<br>ä¸åŒç‚¹ï¼š@Component é€šå¸¸æ˜¯é€šè¿‡ç±»è·¯å¾„æ‰«ææ¥è‡ªåŠ¨ä¾¦æµ‹ä»¥åŠè‡ªåŠ¨è£…é…åˆ°Springå®¹å™¨ä¸­ã€‚<br>ã€€ã€€ã€€ã€€@Bean æ³¨è§£é€šå¸¸æ˜¯æˆ‘ä»¬åœ¨æ ‡æœ‰è¯¥æ³¨è§£çš„æ–¹æ³•ä¸­å®šä¹‰äº§ç”Ÿè¿™ä¸ªbeançš„é€»è¾‘ã€‚</p>
<blockquote>
<p>@Component ï¼ˆ@Controller @Service @Respositoryï¼‰ä½œç”¨äºç±»ä¸Šï¼Œåªæœ‰åœ¨æˆ‘ä»¬çš„SpringBootåº”ç”¨ç¨‹åºå¯ç”¨äº†ç»„ä»¶æ‰«æå¹¶ä¸”åŒ…å«äº†è¢«æ³¨è§£çš„ç±»æ—¶æ‰æœ‰æ•ˆã€‚é€šè¿‡ç»„ä»¶æ‰«æï¼ŒSpringå°†æ‰«ææ•´ä¸ªç±»è·¯å¾„ï¼Œå¹¶å°†æ‰€æœ‰@Componentæ³¨é‡Šç±»æ·»åŠ åˆ°Spring Contextï¼Œè¿™é‡Œæœ‰çš„ä¸è¶³å°±æ˜¯ä¼šæŠŠæ•´ä¸ªç±»å½“æˆbeanæ³¨å†Œåˆ°spring å®¹å™¨ä¸Šï¼Œå¦‚æœè¿™ä¸ªç±»ä¸­å¹¶ä¸æ˜¯æ‰€æœ‰æ–¹æ³•éƒ½éœ€è¦æ³¨å†Œä¸ºbeançš„è¯ï¼Œä¼šå‡ºç°ä¸éœ€è¦çš„æ–¹æ³•éƒ½æ³¨å†Œæˆä¸ºbeanï¼Œè¿™æ—¶å€™å¿…é¡»ç¡®ä¿è¿™äº›ä¸éœ€è¦çš„æ–¹æ³•ä¹Ÿèƒ½æ³¨å†Œä¸ºbeanæˆ–è€…åœ¨æ‰«æä¸­åŠ filter è¿‡æ»¤è¿™äº›ä¸éœ€è¦çš„bean,å¦è€…springå°†æ— æ³•æˆåŠŸå¯åŠ¨ã€‚</p>
</blockquote>
<blockquote>
<p>@Beanç›¸å¯¹æ¥è¯´å°±æ›´åŠ çµæ´»äº†ï¼Œå®ƒå¯ä»¥ç‹¬ç«‹åŠ åœ¨æ–¹æ³•ä¸Šï¼ŒæŒ‰éœ€æ³¨å†Œåˆ°springå®¹å™¨ï¼Œè€Œä¸”å¦‚æœä½ è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹ç±»åº“é‡Œé¢æŸä¸ªæ–¹æ³•çš„æ—¶å€™ï¼ˆæˆ–è€…ç±»ï¼Ÿï¼‰ï¼Œä½ å°±åªèƒ½ç”¨@BeanæŠŠè¿™ä¸ªæ–¹æ³•æ³¨å†Œåˆ°springå®¹å™¨ï¼Œå› ä¸ºç”¨@Componentä½ éœ€è¦é…ç½®ç»„ä»¶æ‰«æåˆ°è¿™ä¸ªç¬¬ä¸‰æ–¹ç±»è·¯å¾„è€Œä¸”è¿˜è¦åœ¨åˆ«äººæºä»£ç åŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼Œå¾ˆæ˜æ˜¾æ˜¯ä¸ç°å®çš„ã€‚</p>
</blockquote>
<p>â¤ï¸å½“æˆ‘ä»¬å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ä¸­çš„ç±»éœ€è¦è£…é…åˆ°Springå®¹å™¨æ—¶ï¼Œåˆ™åªèƒ½é€šè¿‡@Beanæ¥å®ç°<br>æ€»ç»“ï¼š@Componentå’Œ@Beanéƒ½æ˜¯ç”¨æ¥æ³¨å†ŒBeanå¹¶è£…é…åˆ°Springå®¹å™¨ä¸­ï¼Œä½†æ˜¯Beanæ¯”Componentçš„è‡ªå®šä¹‰æ€§æ›´å¼ºã€‚å¯ä»¥å®ç°ä¸€äº›Componentå®ç°ä¸äº†çš„è‡ªå®šä¹‰åŠ è½½ç±»ã€‚ç‰¹åˆ«æ˜¯äºŒæ–¹åº“æˆ–ä¸‰æ–¹åº“çš„ç±»è£…é…ä¸ºbeanï¼Œåªèƒ½ç”¨@Beanã€‚</p>
<h3 id="å®ç°FactoryBeanæ¥å£"><a href="#å®ç°FactoryBeanæ¥å£" class="headerlink" title="å®ç°FactoryBeanæ¥å£"></a>å®ç°FactoryBeanæ¥å£</h3><p>org.springframework.beans.factoryä¸­</p>
<p>FactoryBeanæ˜¯ä¸€ä¸ªå·¥å‚Beanï¼Œå¯ä»¥ç”ŸæˆæŸä¸€ä¸ªç±»å‹Beanå®ä¾‹ï¼Œå®ƒæœ€å¤§çš„ä¸€ä¸ªä½œç”¨æ˜¯ï¼šå¯ä»¥è®©æˆ‘ä»¬è‡ªå®šä¹‰Beançš„åˆ›å»ºè¿‡ç¨‹ã€‚BeanFactoryæ˜¯Springå®¹å™¨ä¸­çš„ä¸€ä¸ªåŸºæœ¬ç±»ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªç±»ï¼Œåœ¨BeanFactoryä¸­å¯ä»¥åˆ›å»ºå’Œç®¡ç†Springå®¹å™¨ä¸­çš„Beanï¼Œå®ƒå¯¹äºBeançš„åˆ›å»ºæœ‰ä¸€ä¸ªç»Ÿä¸€çš„æµç¨‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public interface FactoryBean&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    //è¿”å›çš„å¯¹è±¡å®ä¾‹</span><br><span class="line">    T getObject() throws Exception;</span><br><span class="line">    //Beançš„ç±»å‹</span><br><span class="line">    Class&lt;?&gt; getObjectType();</span><br><span class="line">    //trueæ˜¯å•ä¾‹ï¼Œfalseæ˜¯éå•ä¾‹  åœ¨Spring5.0ä¸­æ­¤æ–¹æ³•åˆ©ç”¨äº†JDK1.8çš„æ–°ç‰¹æ€§å˜æˆäº†defaultæ–¹æ³•ï¼Œè¿”å›true</span><br><span class="line">    boolean isSingleton();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>FactoryBeanä¸­å®šä¹‰äº†ä¸€ä¸ªSpring Beançš„å¾ˆé‡è¦çš„ä¸‰ä¸ªç‰¹æ€§ï¼šæ˜¯å¦å•ä¾‹ã€Beanç±»å‹ã€Beanå®ä¾‹ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">//FactoryBeanæ¥å£çš„å®ç°ç±»</span><br><span class="line">@Component</span><br><span class="line">public class FactoryBeanLearn implements FactoryBean &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object getObject() throws Exception &#123;</span><br><span class="line">        //è¿™ä¸ªBeanæ˜¯æˆ‘ä»¬è‡ªå·±newçš„ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æ§åˆ¶Beançš„åˆ›å»ºè¿‡ç¨‹äº†</span><br><span class="line">        return new FactoryBeanServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        return FactoryBeanService.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean isSingleton() &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//æ¥å£</span><br><span class="line">public interface FactoryBeanService &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æµ‹è¯•FactoryBean</span><br><span class="line">     */</span><br><span class="line">    void testFactoryBean();</span><br><span class="line">&#125;</span><br><span class="line">//å®ç°ç±»</span><br><span class="line">public class FactoryBeanServiceImpl implements FactoryBeanService &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æµ‹è¯•FactoryBean</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void testFactoryBean() &#123;</span><br><span class="line">        System.out.println(&quot;æˆ‘æ˜¯FactoryBeançš„ä¸€ä¸ªæµ‹è¯•ç±»ã€‚ã€‚ã€‚ã€‚&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//å•æµ‹</span><br><span class="line">@Test</span><br><span class="line">public void test() &#123;</span><br><span class="line">        ClassPathXmlApplicationContext cac = new ClassPathXmlApplicationContext(&quot;classpath:com/zkn/spring/learn/base/applicationContext.xml&quot;);</span><br><span class="line">        FactoryBeanService beanService = cac.getBean(FactoryBeanService.class);</span><br><span class="line">        beanService.testFactoryBean();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>â¤ï¸FactoryBeanæ˜¯è‡ªå®šä¹‰äº†ä¸€ç§æ³¨å…¥Beançš„æ–¹æ³•ï¼Œåœ¨ç±»ä¸­æ²¡æœ‰åŠ æ³¨è§£ï¼Œä¹Ÿæ²¡æœ‰xmlä¸­é…ç½®ï¼Œä½†æ˜¯å®ç°FactoryBeanæ¥å£ï¼Œé‡å†™getObjectæ–¹æ³•æ¥è¿”å›å¯¹è±¡ï¼Œè¡¨ç¤ºæ³¨å…¥äº†beanï¼Œé‡å†™getObjectTypeè¡¨ç¤ºè·å–beanæ—¶beançš„ç±»å‹ã€‚ç„¶åå°±å¯ä»¥é€šè¿‡getBean(ç±»å‹.class)è·å–beanå®ä¾‹äº†ã€‚<br>è‡³äºï¼Œå¦‚ä½•é€šè¿‡ApplicationContext.getBean()ï¼Œè§ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zknxx/article/details/79572387">https://blog.csdn.net/zknxx/article/details/79572387</a></p>
<h3 id="ApplicationContextAwareæ¥å£"><a href="#ApplicationContextAwareæ¥å£" class="headerlink" title="ApplicationContextAwareæ¥å£"></a>ApplicationContextAwareæ¥å£</h3><p>org.springframework.contextä¸­</p>
<p>å½“ä¸€ä¸ªç±»å®ç°äº†è¿™ä¸ªæ¥å£ä¹‹åï¼Œè¿™ä¸ªç±»å°±å¯ä»¥æ–¹ä¾¿çš„è·å¾—ApplicationContextå¯¹è±¡ï¼ˆspringä¸Šä¸‹æ–‡ï¼‰ï¼ŒSpringå‘ç°æŸä¸ªBeanå®ç°äº†ApplicationContextAwareæ¥å£ï¼ŒSpringå®¹å™¨ä¼šåœ¨åˆ›å»ºè¯¥Beanä¹‹åï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥Beançš„setApplicationContextï¼ˆå‚æ•°ï¼‰æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä¼šå°†å®¹å™¨æœ¬èº«ApplicationContextå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³•ã€‚</p>
<p>â¤ï¸ä¹‹å‰è·å–ApplicationContextéœ€è¦åŠ è½½é…ç½®æ–‡ä»¶ä»è€Œåˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œspringè‡ªåŠ¨å°†å®¹å™¨æœ¬èº«ApplicationContextå¯¹è±¡ä¼ é€’ç»™å…¶ä¸­çš„æ–¹æ³•setApplicationContextã€‚å®ç°å®ƒçš„ç±»ï¼Œå¯ä»¥åœ¨ç±»ä¸­åˆ›å»ºç§æœ‰çš„ApplicationContextå˜é‡ï¼Œåœ¨setApplicationContextä¸­this. = è¿›è¡Œä¼ é€’ã€‚</p>
<h3 id="InitialzingBeanæ¥å£"><a href="#InitialzingBeanæ¥å£" class="headerlink" title="InitialzingBeanæ¥å£"></a>InitialzingBeanæ¥å£</h3><p>å½“ä¸€ä¸ªç±»å®ç°è¿™ä¸ªæ¥å£ä¹‹åï¼ŒSpringå¯åŠ¨åï¼Œåˆå§‹åŒ–Beanæ—¶ï¼Œè‹¥è¯¥Beanå®ç°InitialzingBeanæ¥å£ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨afterPropertiesSet()æ–¹æ³•ï¼Œå®Œæˆä¸€äº›ç”¨æˆ·è‡ªå®šä¹‰çš„åˆå§‹åŒ–æ“ä½œã€‚</p>
<p>åŒæ ·é…ç½®Beançš„æ—¶å€™ä½¿ç”¨init-methodä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„æ“ä½œã€‚ï¼ˆä¸éœ€è¦å®ç°InitialzingBeanæ¥å£ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void afterPropertiesSet() throws Exception &#123;&#125;</span><br><span class="line"></span><br><span class="line">&lt;bean id = &quot;springBeanInit02&quot; class = &quot;com.lyj.studySpringBoot.init.SpringBeanInit&quot; init-method=&quot;testInit&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;id&quot; value=&quot;#&#123;1111111&#125;&quot; /&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot; value=&quot;$&#123;test.springEL&#125;&quot; /&gt;</span><br><span class="line">	&lt;property name=&quot;age&quot; value=&quot;#&#123;10+8&#125;&quot; /&gt; // SpringELè¡¨è¾¾å¼</span><br><span class="line">	&lt;property name=&quot;sex&quot; value=&quot;false&quot; /&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">ç³»ç»Ÿæ˜¯å…ˆè°ƒç”¨afterPropertiesSetæ–¹æ³•ï¼Œç„¶ååœ¨è°ƒç”¨init-methodä¸­æŒ‡å®šçš„æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure>

<p>Springæ˜¯é€šè¿‡åå°„æ¥è°ƒç”¨init-methodæŒ‡å®šæ–¹æ³•ï¼Œè€Œå®ç°InitializingBeanæ¥å£æ˜¯ç›´æ¥è°ƒç”¨afterPropertiesSetæ–¹æ³•ï¼Œæ‰€ä»¥åè€…æ•ˆç‡é«˜ï¼Œä½†ä½¿ç”¨init-methodæ–¹å¼å‡å°‘äº†å¯¹Springçš„ä¾èµ–ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40093255/article/details/117318760">https://blog.csdn.net/qq_40093255/article/details/117318760</a></p>
<h3 id="MethodInterceptoræ¥å£-æ‹¦æˆªå™¨"><a href="#MethodInterceptoræ¥å£-æ‹¦æˆªå™¨" class="headerlink" title="MethodInterceptoræ¥å£-æ‹¦æˆªå™¨"></a>MethodInterceptoræ¥å£-æ‹¦æˆªå™¨</h3><p>org.aopalliance.interceptä¸­<br>MethodInterceptoræ¥å£ç»§æ‰¿äº†Interceptoræ¥å£ï¼ŒInterceptoæ¥å£åˆç»§æ‰¿äº†Adviceæ¥å£ï¼Œå› æ­¤æˆ‘ä¸ªå°†è¿™æ‹¦æˆªå™¨ç§°ä¸ºä¸€ä¸ªé€šçŸ¥ã€‚</p>
<p>å®ç°MethodInterceptor æ¥å£ï¼Œåœ¨è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œå°±å¯ä»¥å®ç°åœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰ã€è°ƒç”¨æ–¹æ³•è¿‡ç¨‹ä¸­ã€è°ƒç”¨æ–¹æ³•ä¹‹åå¯¹å…¶è¿›è¡Œæ§åˆ¶ã€‚</p>
<p>æ‹¦æˆªå™¨å°±åƒæ˜¯å»ºç«‹äº†ä¸€ä¸ªé€šçŸ¥ã€‚ç”¨åˆ‡é¢åšå¢å¼ºä¸€æ ·ã€‚</p>
<p>ç®€å•çš„ä¾‹å­ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012834750/article/details/71773887">https://blog.csdn.net/u012834750/article/details/71773887</a><br>1.å®ç°æ¥å£é‡å†™invokeæ–¹æ³•ï¼Œåšå¢å¼º<br>2.å†™ä¸€ä¸ªç®€å•æ–¹æ³•<br>3.æµ‹è¯•ä¸­ï¼Œç”¨ä»£ç†å·¥å‚è®¾ç½®ä»£ç†å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">public class TestMethodInterceptor  &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // åˆå§‹åŒ–ä¸€ä¸ªä»£ç†å·¥å‚</span><br><span class="line">        ProxyFactory proxyFactory=new ProxyFactory();</span><br><span class="line"></span><br><span class="line">        // è®¾ç½®ç›®æ ‡ç±»ï¼Œä»¥ä¾¿äºCglibå·¥å…·åŒ…åŠ¨æ€ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œå³æˆ‘ä»¬æ‰€éœ€çš„ä»£ç†ç±»</span><br><span class="line">        // æœ€å¥½æŠŠå®ç°ç±»å•ç‹¬å†™ï¼Œè¿™é‡Œè®¾ç½®çš„æ˜¯å®ç°ç±»ï¼ˆä¸šåŠ¡ï¼‰</span><br><span class="line">        proxyFactory.setTarget(new TestMethodInterceptor());</span><br><span class="line"></span><br><span class="line">        // è®¾ç½®æ‹¦æˆªå™¨ï¼Œè€Œæ‹¦æˆªå™¨çš„&quot;public Object invoke(MethodInvocation mi)&quot;å®šä¹‰äº†ä»£ç†ç±»ï¼ˆå®é™…æ˜¯UserDaoImplçš„å­ç±»ï¼‰çš„æ–¹æ³•ç”Ÿæˆç­–ç•¥ã€‚</span><br><span class="line">        proxyFactory.addAdvice(new adviseMethodInterceptor());</span><br><span class="line"></span><br><span class="line">        // è·å–ä»£ç†ç±»</span><br><span class="line">        Object proxy = proxyFactory.getProxy();</span><br><span class="line">         // å‘ä¸Šè½¬å‹ï¼Œè½¬å‹ä¸ºçˆ¶ç±»ç±»å‹</span><br><span class="line">        TestMethodInterceptor methodInterceptor = (TestMethodInterceptor) proxy;</span><br><span class="line"></span><br><span class="line">        methodInterceptor.doSomeThing(&quot;é€šè¿‡ä»£ç†å·¥å‚è®¾ç½®ä»£ç†å¯¹è±¡ï¼Œæ‹¦æˆªä»£ç†æ–¹æ³•&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class adviseMethodInterceptor implements MethodInterceptor&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public Object invoke(MethodInvocation methodInvocation) throws Throwable &#123;</span><br><span class="line"></span><br><span class="line">            Object result=null;</span><br><span class="line">            try&#123;</span><br><span class="line">                System.out.println(&quot;æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼š&quot;+methodInvocation.getMethod().toString());</span><br><span class="line"></span><br><span class="line">                result= methodInvocation.proceed();</span><br><span class="line"></span><br><span class="line">                System.out.println(&quot;æ–¹æ³•æ‰§è¡Œä¹‹åï¼š&quot;+methodInvocation.getMethod().toString());</span><br><span class="line">                System.out.println(&quot;æ–¹æ³•æ­£å¸¸è¿è¡Œç»“æœï¼š&quot;+result);</span><br><span class="line"></span><br><span class="line">                return result;</span><br><span class="line"></span><br><span class="line">            &#125;catch (Exception e)&#123;</span><br><span class="line">                System.out.println(&quot;æ–¹æ³•å‡ºç°å¼‚å¸¸:&quot;+e.toString());</span><br><span class="line">                System.out.println(&quot;æ–¹æ³•è¿è¡ŒExceptionç»“æœï¼š&quot;+result);</span><br><span class="line">                return result;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String doSomeThing(String someThing)&#123;</span><br><span class="line"></span><br><span class="line">        //int i=5/0;</span><br><span class="line">        return &quot;æ‰§è¡Œè¢«æ‹¦æˆªçš„æ–¹æ³•ï¼š&quot;+someThing;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>AOPéƒ½æ˜¯åŸºäºï¼ˆCglibï¼‰ä»£ç†æ¨¡å¼å®ç°çš„ï¼Œå…¶ä¸­çš„å…³é”®ç‚¹åœ¨äºå®ç°MethodInterceptoræ¥å£ï¼Œåœ¨å…¶â€œpublic Object invoke(MethodInvocation mi)â€æ–¹æ³•ä¸­åˆ¶å®šä»£ç†æ–¹æ³•çš„ç”Ÿæˆç­–ç•¥ï¼Œè€Œä»æ­¤æ–¹æ³•çš„MethodInvocationç±»å‹å‚æ•°miä¸­å¯ä»¥è·å¾—ç›®æ ‡å¯¹è±¡ã€ç›®æ ‡æ–¹æ³•ã€æ–¹æ³•çš„å‚æ•°ç­‰ä¿¡æ¯ï¼Œæ ¹æ®è¿™äº›ä¿¡æ¯å¯ä»¥ç²¾ç¡®åœ°æ§åˆ¶å¢å¼ºæ•ˆæœã€‚</p>
<p>invokeæ–¹æ³•çš„ä¼ å‚æ˜¯MethodInvocationï¼Œè¡¨ç¤ºæ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// è·å–æ–¹æ³•å</span><br><span class="line">String methodName = mi.getMethod().getName();</span><br><span class="line">if (methodName.startsWith(&quot;add&quot;))</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br><span class="line">result= methodInvocation.proceed();</span><br><span class="line"></span><br><span class="line">// è·å–æ–¹æ³•å‚æ•°</span><br><span class="line">Object[] args = methodInvocation.getArguments();</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„ä¾‹å­ï¼š<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gocode/p/aop-in-spring.html">https://www.cnblogs.com/gocode/p/aop-in-spring.html</a></p>
<p>â¤ï¸æ€»ç»“ï¼šæ‹¦æˆªå™¨ï¼Œå¯ä»¥ä»¥åŠ¨æ€ä»£ç†çš„æ–¹å¼æ‰§è¡Œæ–¹æ³•ï¼Œå¦ä¸€ä¸ªä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªåˆ‡é¢ï¼Œå…·ä½“çš„é€šçŸ¥åœ¨invokeä¸­åŠ ï¼Œä¼ å…¥å‚æ•°å¯ä»¥è·å–ç›®æ ‡å¯¹è±¡ã€æ–¹æ³•ã€æ–¹æ³•å‚æ•°ï¼Œä»è€Œé€‰æ‹©å¯¹ä¸åŒåˆ‡å…¥ç‚¹è¿›è¡Œä¸åŒçš„é€šçŸ¥/å¢å¼ºã€‚ä¹Ÿå¯ä»¥ä¸åŠ é€šçŸ¥ï¼Œåªæ˜¯proceedæ‰§è¡Œæœ¬æ–¹æ³•ã€‚</p>
<h3 id="ApplicationListeneræ¥å£-ç›‘å¬å™¨"><a href="#ApplicationListeneræ¥å£-ç›‘å¬å™¨" class="headerlink" title="ApplicationListeneræ¥å£-ç›‘å¬å™¨"></a>ApplicationListeneræ¥å£-ç›‘å¬å™¨</h3><p>ApplicationContextäº‹ä»¶æœºåˆ¶æ˜¯è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼çš„å®ç°ï¼Œé€šè¿‡ApplicationEventç±»å’ŒApplicationListeneræ¥å£ï¼Œå¯ä»¥å®ç°ApplicationContextäº‹ä»¶å¤„ç†ã€‚</p>
<p>å¦‚æœå®¹å™¨ä¸­æœ‰ä¸€ä¸ªApplicationListener Beanï¼Œæ¯å½“ApplicationContextå‘å¸ƒApplicationEventæ—¶ï¼ŒApplicationListener Beanå°†è‡ªåŠ¨è¢«è§¦å‘ã€‚è¿™ç§äº‹ä»¶æœºåˆ¶éƒ½å¿…é¡»éœ€è¦ç¨‹åºæ˜¾ç¤ºpublishçš„è§¦å‘ã€‚</p>
<p>äº‹ä»¶å¯ä»¥è‡ªå®šä¹‰ã€ç›‘å¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œå®Œå…¨æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘æ¥å¤„ç†ã€‚</p>
<p>1.å®šä¹‰äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class EmailEvent extends ApplicationEvent&#123;</span><br><span class="line">ã€€ã€€ private String address;</span><br><span class="line">ã€€ã€€ private String text;</span><br><span class="line">ã€€ã€€ public EmailEvent(Object source, String address, String text)&#123;</span><br><span class="line">ã€€ã€€ super(source);</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ this.address = address;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ this.text = text;</span><br><span class="line">ã€€ã€€ &#125;</span><br><span class="line">ã€€ã€€ public EmailEvent(Object source) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€super(source);</span><br><span class="line">ã€€ã€€ &#125;</span><br><span class="line">ã€€ã€€ //......addresså’Œtextçš„setterã€getter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.ç›‘å¬äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class EmailNotifier implements ApplicationListener&#123;</span><br><span class="line">    // ç›‘å¬åäº‹ä»¶å¤„ç†çš„æ–¹æ³•ï¼Œå¯ä»¥å¯¹äº‹ä»¶åšä¸€äº›åˆ¤æ–­</span><br><span class="line">ã€€ã€€ public void onApplicationEvent(ApplicationEvent event) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€if (event instanceof EmailEvent) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ EmailEvent emailEvent = (EmailEvent)event;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ System.out.println(&quot;é‚®ä»¶åœ°å€ï¼š&quot; + emailEvent.getAddress());</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ System.our.println(&quot;é‚®ä»¶å†…å®¹ï¼š&quot; + emailEvent.getText());</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€&#125; else &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ System.our.println(&quot;å®¹å™¨æœ¬èº«äº‹ä»¶ï¼š&quot; + event);</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€ &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.è§¦å‘äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class SpringTest &#123;</span><br><span class="line">ã€€ã€€ public static void main(String args[])&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€//åˆ›å»ºä¸€ä¸ªApplicationEventå¯¹è±¡</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€EmailEvent event = new EmailEvent(&quot;hello&quot;,&quot;abc@163.com&quot;,&quot;This is a test&quot;);</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€//ä¸»åŠ¨è§¦å‘è¯¥äº‹ä»¶</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€context.publishEvent(event);</span><br><span class="line">ã€€ã€€ &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åœ¨æ‹¦æˆªå™¨ä¸­åšå¢å¼ºè§¦å‘ã€‚</p>
<p>ä¸ç®¡æ˜¯å†…ç½®ç›‘å¬è¿˜æ˜¯å¤–éƒ¨è‡ªå®šä¹‰ç›‘å¬ä¸€å®šè¦æŠŠå®ç°ApplicationListenerçš„ç±»å®šä¹‰æˆä¸€ä¸ªbeanæ‰è¡Œï¼Œå¯ä»¥æ˜¯é€šè¿‡æ³¨è§£@Componentç­‰ä¹Ÿå¯ä»¥é€šè¿‡xmlçš„æ–¹å¼å»æ‰§è¡Œã€‚</p>
<p>ç›‘å¬å™¨å®ç°ç±»å®ç°çš„ApplicationListeneræ¥å£ä¸­ï¼Œå¯ä»¥åŠ èŒƒå‹ï¼Œäº‹ä»¶ç±»å‹ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/14/myblog/JAVA/java%20junit%E4%B8%8Emock%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/14/myblog/JAVA/java%20junit%E4%B8%8Emock%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">javaçš„junitä¸mockæµ‹è¯•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-14 22:22:37" itemprop="dateCreated datePublished" datetime="2022-04-14T22:22:37+08:00">2022-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-05 23:18:39" itemprop="dateModified" datetime="2022-05-05T23:18:39+08:00">2022-05-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åç«¯å¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å•å…ƒæµ‹è¯•(Unit test)ï¼š<br>å•å…ƒæµ‹è¯•å…³æ³¨å•ä¸€çš„ç±». å®ƒä»¬å­˜åœ¨çš„ç›®çš„æ˜¯æ£€æŸ¥è¿™ä¸ªç±»ä¸­çš„ä»£ç æ˜¯å¦æŒ‰ç…§æœŸæœ›æ­£ç¡®è¿è¡Œ.</p>
<p>é›†æˆæµ‹è¯•(Integration test)<br>é¡¾åæ€ä¹‰, é›†æˆæµ‹è¯•æ˜¯æ£€æŸ¥å¼€å‘çš„æ¨¡å—å’Œå…¶ä»–æ¨¡å—æ•´åˆæ—¶æ˜¯å¦æ­£å¸¸å·¥ä½œ.<br>è™½ç„¶é›†æˆæµ‹è¯•çš„ä»£ç å½±å“èŒƒå›´æ¯”å•å…ƒæµ‹è¯•è¦å¹¿, ä½†æ˜¯é›†æˆæµ‹è¯•å’Œå•å…ƒæµ‹è¯•ä¸€æ ·, ä¹Ÿæ˜¯é’ˆå¯¹äºå¼€å‘è€…è€Œè¨€çš„.</p>
<p>ç«¯åˆ°ç«¯æµ‹è¯•(End-to-End test)<br>ç«¯åˆ°ç«¯æµ‹è¯•æ˜¯å°†æ•´ä¸ªç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“, ç„¶åä»ç”¨æˆ·çš„è§’åº¦è¿›è¡Œæµ‹è¯•çš„.<br>ç«¯åˆ°ç«¯æµ‹è¯•çš„ç›®çš„æ˜¯æµ‹è¯•ç³»ç»Ÿåœ¨å®é™…ä½¿ç”¨çš„æ˜¯å¦æ­£å¸¸çš„, å› æ­¤é€šå¸¸æ¥è¯´æ˜¯ä¸éœ€è¦æµ‹è¯•æ›¿èº«çš„(Test Double)</p>
<h2 id="1-Junitå•å…ƒæµ‹è¯•"><a href="#1-Junitå•å…ƒæµ‹è¯•" class="headerlink" title="1.Junitå•å…ƒæµ‹è¯•"></a>1.Junitå•å…ƒæµ‹è¯•</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å•å…ƒæµ‹è¯•çš„ç›®çš„: æµ‹è¯•å½“å‰æ‰€å†™çš„ä»£ç æ˜¯å¦æ˜¯æ­£ç¡®çš„, ä¾‹å¦‚è¾“å…¥ä¸€ç»„æ•°æ®, ä¼šè¾“å‡ºæœŸæœ›çš„æ•°æ®; è¾“å…¥é”™è¯¯æ•°æ®, ä¼šäº§ç”Ÿé”™è¯¯å¼‚å¸¸ç­‰.</p>
<p>åœ¨å•å…ƒæµ‹è¯•ä¸­, æˆ‘ä»¬éœ€è¦ä¿è¯è¢«æµ‹ç³»ç»Ÿæ˜¯ç‹¬ç«‹çš„(SUT æ²¡æœ‰ä»»ä½•çš„ DOC), å³å½“è¢«æµ‹ç³»ç»Ÿé€šè¿‡æµ‹è¯•æ—¶, é‚£ä¹ˆå®ƒåœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½æ˜¯èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„. ç¼–å†™å•å…ƒæµ‹è¯•æ—¶, ä»…ä»…éœ€è¦å…³æ³¨å•ä¸ªç±»å°±å¯ä»¥äº†. è€Œä¸éœ€è¦å…³æ³¨ä¾‹å¦‚æ•°æ®åº“æœåŠ¡, Web æœåŠ¡ç­‰ç»„ä»¶.</p>
<p>ã€SUTã€‘è¢«æµ‹ç³»ç»Ÿ(System under test, SUT) è¢«æµ‹ç³»ç»Ÿã€‚æ ¹æ®æµ‹è¯•ç±»å‹çš„ä¸åŒ, SUT æŒ‡ä»£çš„å†…å®¹ä¹Ÿä¸åŒ, ä¾‹å¦‚ SUT å¯ä»¥æ˜¯ä¸€ä¸ªç±»ç”šè‡³æ˜¯ä¸€æ•´ä¸ªç³»ç»Ÿ.</p>
<p>ã€DOCã€‘è¢«æµ‹ç³»ç»Ÿæ‰€ä¾èµ–çš„ç»„ä»¶, ä¾‹å¦‚è¿›ç¨‹ UserService çš„å•å…ƒæµ‹è¯•æ—¶, UserService ä¼šä¾èµ– UserDao, å› æ­¤ UserDao å°±æ˜¯ DOC</p>
<p>ã€Test Doubleã€‘æµ‹è¯•æ›¿èº«<br>ä¸€ä¸ªå®é™…çš„ç³»ç»Ÿä¼šä¾èµ–å¤šä¸ªå¤–éƒ¨å¯¹è±¡, ä½†æ˜¯åœ¨è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶, æˆ‘ä»¬ä¼šç”¨ä¸€äº›åŠŸèƒ½è¾ƒä¸ºç®€å•çš„å¹¶ä¸”å…¶è¡Œä¸ºå’Œå®é™…å¯¹è±¡ç±»ä¼¼çš„å‡å¯¹è±¡æ¥ä½œä¸º SUT çš„ä¾èµ–å¯¹è±¡, ä»¥æ­¤æ¥é™ä½å•å…ƒæµ‹è¯•çš„å¤æ‚æ€§å’Œå¯å®ç°æ€§. åœ¨è¿™é‡Œ, è¿™äº›å‡å¯¹è±¡å°±è¢«ç§°ä¸º æµ‹è¯•æ›¿èº«(Test Double).</p>
<p>æµ‹è¯•æ›¿èº«æœ‰ä»¥ä¸‹äº”ç§ï¼š</p>
<p>1.Test stub, ä¸º SUT æä¾›æ•°æ®çš„å‡å¯¹è±¡ã€‚stub ç±»æœ‰æ—¶å€™è¿˜ä¼šè®°å½•è°ƒç”¨çš„ä¸€äº›ä¿¡æ¯ã€‚</p>
<p>2.Fake objectï¼Œå®ç°äº†ç®€å•åŠŸèƒ½çš„ä¸€ä¸ªå‡å¯¹è±¡. Fake object å’Œ Test stub çš„ä¸»è¦åŒºåˆ«å°±æ˜¯ Test stub ä¾§é‡äºç”¨äºæä¾›æ•°æ®çš„å‡å¯¹è±¡, è€Œ Fake object æ²¡æœ‰è¿™å±‚å«ä¹‰ï¼Œä½¿ç”¨ Fake object çš„æœ€ä¸»è¦çš„åŸå› å°±æ˜¯åœ¨æµ‹è¯•æ—¶æŸäº›ç»„ä»¶ä¸å¯ç”¨æˆ–è¿è¡Œé€Ÿåº¦å¤ªæ…¢, å› è€Œä½¿ç”¨ Fake object æ¥ä»£æ›¿å®ƒä»¬.<br>è­¬å¦‚è¯´ï¼Œå®ƒå­˜åœ¨å†…å­˜ä¸­è€Œä¸æ˜¯çœŸæ­£çš„æ•°æ®åº“ä¸­ã€‚</p>
<p>3.Mock object<br>æ˜¯æŒ‡ç±»æˆ–è€…æ¥å£çš„æ¨¡æ‹Ÿå®ç°ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå¯¹è±¡ä¸­æŸä¸ªæ–¹æ³•çš„è¾“å‡ºç»“æœã€‚<br>å®é™…ä¸Š, Mock object æ˜¯ Test stub æˆ– Fake object ä¸€ç§, ä½†æ˜¯ Mock object æœ‰ Test stub/Fake object æ²¡æœ‰çš„ç‰¹æ€§, Mock object å¯ä»¥å¾ˆçµæ´»åœ°é…ç½®æ‰€è°ƒç”¨çš„æ–¹æ³•æ‰€äº§ç”Ÿçš„è¡Œä¸º, å¹¶ä¸”å®ƒå¯ä»¥è¿½è¸ªæ–¹æ³•è°ƒç”¨, ä¾‹å¦‚ä¸€ä¸ª Mock Object æ–¹æ³•è°ƒç”¨æ—¶ä¼ é€’äº†å“ªäº›å‚æ•°, æ–¹æ³•è°ƒç”¨äº†å‡ æ¬¡ç­‰.</p>
<p>4.Dummy object: åœ¨æµ‹è¯•ä¸­å¹¶ä¸ä½¿ç”¨çš„, ä½†æ˜¯ä¸ºäº†æµ‹è¯•ä»£ç èƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘/è¿è¡Œè€Œæ·»åŠ çš„å¯¹è±¡. ä¾‹å¦‚æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ª Test Double å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•, è¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ é€’å‡ ä¸ªå‚æ•°, ä½†æ˜¯å…¶ä¸­æŸä¸ªå‚æ•°æ— è®ºæ˜¯ä»€ä¹ˆå€¼éƒ½ä¸ä¼šå½±å“æµ‹è¯•çš„ç»“æœ, é‚£ä¹ˆè¿™ä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ª Dummy object.<br>Dummy object å¯ä»¥æ˜¯ä¸€ä¸ªç©ºå¼•ç”¨, ä¸€ä¸ªç©ºå¯¹è±¡æˆ–è€…æ˜¯ä¸€ä¸ªå¸¸é‡ç­‰.<br>ç®€å•çš„è¯´, Dummy object å°±æ˜¯é‚£äº›æ²¡æœ‰ä½¿ç”¨åˆ°çš„, ä»…ä»…æ˜¯ä¸ºäº†å¡«å……å‚æ•°åˆ—è¡¨çš„å¯¹è±¡.</p>
<p>5.Test Spy<br>å¯ä»¥åŒ…è£…ä¸€ä¸ªçœŸå®çš„ Java å¯¹è±¡, å¹¶è¿”å›ä¸€ä¸ªåŒ…è£…åçš„æ–°å¯¹è±¡. è‹¥æ²¡æœ‰ç‰¹åˆ«é…ç½®çš„è¯, å¯¹è¿™ä¸ªæ–°å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•è°ƒç”¨, éƒ½ä¼šå§”æ´¾ç»™å®é™…çš„ Java å¯¹è±¡.</p>
<p>mock å’Œ spy çš„åŒºåˆ«æ˜¯: mock æ˜¯æ— ä¸­ç”Ÿæœ‰åœ°ç”Ÿå‡ºä¸€ä¸ª<strong>å®Œå…¨è™šæ‹Ÿçš„å¯¹è±¡</strong>, å®ƒçš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯è™šæ‹Ÿçš„; è€Œ spy æ˜¯åœ¨ç°æœ‰ç±»çš„åŸºç¡€ä¸ŠåŒ…è£…äº†ä¸€ä¸ªå¯¹è±¡, å³å¦‚æœæˆ‘ä»¬æ²¡æœ‰é‡å†™ spy çš„æ–¹æ³•, é‚£ä¹ˆè¿™äº›æ–¹æ³•çš„å®ç°å…¶å®éƒ½æ˜¯è°ƒç”¨çš„è¢«åŒ…è£…çš„å¯¹è±¡çš„æ–¹æ³•.</p>
<p>ã€test fixtureã€‘æµ‹è¯•çš„å…ˆå†³æ¡ä»¶ï¼Œ<br>@Before åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿è¡Œå‰éƒ½ä¼šè¢«è°ƒç”¨, @After åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿è¡Œåéƒ½ä¼šè¢«è°ƒç”¨.<br>å› ä¸º @Before å’Œ @After ä¼šåœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•å‰åéƒ½ä¼šè¢«è°ƒç”¨, è€Œæœ‰æ—¶æˆ‘ä»¬ä»…ä»…éœ€è¦åœ¨æµ‹è¯•å‰è¿›è¡Œä¸€æ¬¡åˆå§‹åŒ–, è¿™æ ·çš„æƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨@BeforeClass å’Œ@AfterClass æ³¨è§£.</p>
<p>ã€test caseã€‘æµ‹è¯•ç”¨ä¾‹<br>åœ¨ JUnit 3ä¸­, æµ‹è¯•æ–¹æ³•éƒ½å¿…é¡»ä»¥ test ä¸ºå‰ç¼€, ä¸”å¿…é¡»æ˜¯ public void çš„, JUnit 4ä¹‹å, å°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶äº†, åªè¦åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ ‡æ³¨ @Test æ³¨è§£, æ–¹æ³•ç­¾åå¯ä»¥æ˜¯ä»»æ„çš„.</p>
<p>ã€æµ‹è¯•å¥—ä»¶ã€‘é€šè¿‡ TestSuit å¯¹è±¡å°†å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ç»„è£…æˆä¸€ä¸ªæµ‹è¯•å¥—ä»¶, æµ‹è¯•å¥—ä»¶æ‰¹é‡è¿è¡Œ.<br>é€šè¿‡@RunWith å’Œ@SuteClass ä¸¤ä¸ªæ³¨è§£, æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•å¥—ä»¶. é€šè¿‡@RunWith æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„è¿è¡Œå™¨, å¹¶é€šè¿‡@SuiteClasses æ³¨è§£, å°†éœ€è¦è¿›è¡Œæµ‹è¯•çš„ç±»åˆ—è¡¨ä½œä¸ºå‚æ•°ä¼ å…¥.</p>
<h3 id="Junit4æ³¨è§£"><a href="#Junit4æ³¨è§£" class="headerlink" title="Junit4æ³¨è§£"></a>Junit4æ³¨è§£</h3><p>@Test (expected = Exception.class) è¡¨ç¤ºé¢„æœŸä¼šæŠ›å‡ºException.class çš„å¼‚å¸¸</p>
<p>@Ignore å«ä¹‰æ˜¯â€œæŸäº›æ–¹æ³•å°šæœªå®Œæˆï¼Œæš‚ä¸å‚ä¸æ­¤æ¬¡æµ‹è¯•â€ã€‚è¿™æ ·çš„è¯æµ‹è¯•ç»“æœå°±ä¼šæç¤ºä½ æœ‰å‡ ä¸ªæµ‹è¯•è¢«å¿½ç•¥ï¼Œè€Œä¸æ˜¯å¤±è´¥ã€‚ä¸€æ—¦ä½ å®Œæˆäº†ç›¸åº”å‡½æ•°ï¼Œåªéœ€è¦æŠŠ@Ignoreæ³¨è§£åˆ å»ï¼Œå°±å¯ä»¥è¿›è¡Œæ­£å¸¸çš„æµ‹è¯•ã€‚</p>
<p>@Test(timeout=100) è¡¨ç¤ºé¢„æœŸæ–¹æ³•æ‰§è¡Œä¸ä¼šè¶…è¿‡ 100 æ¯«ç§’ï¼Œæ§åˆ¶æ­»å¾ªç¯</p>
<p>@Before è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ä¹‹ç±»çš„æ“ä½œ</p>
<p>@After è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œé‡Šæ”¾èµ„æºï¼Œå›æ”¶å†…å­˜ä¹‹ç±»çš„æ“</p>
<p>@BeforeClass è¡¨ç¤ºè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œæ•°æ®åº“è¿æ¥æ“ä½œï¼Œæ³¨æ„è¯¥æ³¨è§£è¿ç”¨åœ¨é™æ€æ–¹æ³•ã€‚</p>
<p>@AfterClass è¡¨ç¤ºè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ–¹æ³•ä¹‹åæ‰§è¡Œã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œæ•°æ®åº“è¿æ¥å…³é—­æ“ä½œï¼Œæ³¨æ„è¯¥æ³¨è§£è¿ç”¨åœ¨é™æ€æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import org.junit.runner.RunWith;  </span><br><span class="line">import org.junit.runners.Suite;  </span><br><span class="line">import org.junit.runners.Suite.SuiteClasses;  </span><br><span class="line">  </span><br><span class="line">@RunWith( Suite.class )  </span><br><span class="line">@SuiteClasses( &#123; JUnitTest1.class, JUnitTest2.class &#125; )  </span><br><span class="line">public class AllTests &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœ‰å¤šä¸ªæµ‹è¯•ç±», å¯ä»¥åˆå¹¶æˆä¸€ä¸ªæµ‹è¯•å¥—ä»¶è¿›è¡Œæµ‹è¯•, è¿è¡Œä¸€ä¸ª Test Suite, é‚£ä¹ˆå°±ä¼šè¿è¡Œåœ¨è¿™ä¸ª Test Suite ä¸­çš„æ‰€ç”¨çš„æµ‹è¯•.<br>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Test Suite, è¿™ä¸ª Test Suite åŒ…å«äº†ä¸¤ä¸ªæµ‹è¯•ç±»: JUnitTest1 å’Œ JUnitTest2, å› æ­¤è¿è¡Œ è¿™ä¸ª Test Suite æ—¶, å°±ä¼šè‡ªåŠ¨è¿è¡Œè¿™ä¸¤ä¸ªæµ‹è¯•ç±»äº†.</p>
<p>*åœ¨ç±»åä¸ŠæŒ‰ä¸‹command+shift+tï¼Œå°±å¯ä»¥ç”Ÿæˆå¯¹åº”æµ‹è¯•ç±»ã€‚</p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000006731125">https://segmentfault.com/a/1190000006731125</a></p>
<h2 id="2-Mockitoä¸­-Mockä¸-InjectMock"><a href="#2-Mockitoä¸­-Mockä¸-InjectMock" class="headerlink" title="2.Mockitoä¸­@Mockä¸@InjectMock"></a>2.Mockitoä¸­@Mockä¸@InjectMock</h2><p>Mockito æ˜¯ä¸€ä¸ªæµè¡Œ mock æ¡†æ¶ï¼Œå¯ä»¥å’ŒJUnitç»“åˆèµ·æ¥ä½¿ç”¨ã€‚Mockito å…è®¸ä½ åˆ›å»ºå’Œé…ç½® mock å¯¹è±¡ã€‚<br>Mockitoæ˜¯javaå•å…ƒæµ‹è¯•ä¸­ï¼Œæœ€å¸¸ç”¨çš„mckå·¥å…·ä¹‹ä¸€ï¼Œæä¾›äº†è¯¸å¤šæ‰“æ¡©æ–¹æ³•å’Œæ³¨è§£ã€‚å…¶ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ³¨è§£ï¼Œ@Mockå’Œ@InjectMockï¼Œåå­—å’Œåœ¨ä»£ç ä¸­ä½¿ç”¨ çš„ä½ç½®éƒ½å¾ˆåƒã€‚ä½†æ˜¯æ˜¯åœ¨åŠŸèƒ½ä¸Šæ— ä»»ä½•å¯ç±»æ¯”æ€§çš„å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚<br>ç¨‹åºå‘˜é€šå¸¸åˆ›é€ æ¨¡æ‹Ÿå¯¹è±¡æ¥æµ‹è¯•å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºï¼Œå¾ˆç±»ä¼¼æ±½è½¦è®¾è®¡è€…ä½¿ç”¨ç¢°æ’æµ‹è¯•å‡äººæ¥æ¨¡æ‹Ÿè½¦è¾†ç¢°æ’ä¸­äººçš„åŠ¨æ€è¡Œä¸ºã€‚</p>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨mockï¼Ÿ<br>åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæ¨¡æ‹Ÿå¯¹è±¡å¯ä»¥æ¨¡æ‹Ÿå¤æ‚çš„ã€çœŸå®çš„ï¼ˆéæ¨¡æ‹Ÿï¼‰å¯¹è±¡çš„è¡Œä¸ºï¼Œ å¦‚æœçœŸå®çš„å¯¹è±¡æ— æ³•æ”¾å…¥å•å…ƒæµ‹è¯•ä¸­ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡å°±å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å•å…ƒæµ‹è¯•çš„æ€è·¯æ˜¯åœ¨ä¸æ¶‰åŠä¾èµ–å…³ç³»çš„æƒ…å†µä¸‹æµ‹è¯•ä»£ç ï¼ˆéš”ç¦»æ€§ï¼‰ï¼Œæ‰€ä»¥æµ‹è¯•ä»£ç ä¸å…¶ä»–ç±»æˆ–è€…ç³»ç»Ÿçš„å…³ç³»åº”è¯¥å°½é‡è¢«æ¶ˆé™¤ã€‚ä¸€ä¸ªå¯è¡Œçš„æ¶ˆé™¤æ–¹æ³•æ˜¯æ›¿æ¢æ‰ä¾èµ–ç±»ï¼ˆæµ‹è¯•æ›¿æ¢ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›¿èº«æ¥æ›¿æ¢æ‰çœŸæ­£çš„ä¾èµ–å¯¹è±¡ã€‚</p>
<h3 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h3><p>@Mockï¼š<br>åœ¨Mockitoä¸­ç”¨äºåˆ›å»ºmockå¯¹è±¡ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><code>@Mock</code><br><code>private ClassName mockedObjectï¼›</code></p>
<p>ä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸ºmockedObjectï¼Œç±»å‹ä¸ºClassNameçš„mockå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰€æœ‰çš„æ–¹æ³•è¢«ç½®ç©ºï¼Œæ ¹æ®æµ‹è¯•ä»£ç é€»è¾‘çš„éœ€è¦ä½¿ç”¨.</p>
<hr>
<p>@InjectMockï¼š<br>åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œç®€å•çš„è¯´æ˜¯è¿™ä¸ªMockå¯ä»¥è°ƒç”¨çœŸå®ä»£ç çš„æ–¹æ³•ï¼Œå…¶ä½™ç”¨@Mockï¼ˆæˆ–@Spyï¼‰æ³¨è§£åˆ›å»ºçš„mockå°†è¢«æ³¨å…¥åˆ°ç”¨è¯¥å®ä¾‹ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(MockitoJUnitRunner.class)  </span><br><span class="line">public class Test &#123;  </span><br><span class="line">  </span><br><span class="line">    @InjectMocks  </span><br><span class="line">    private SomeHandler someHandler;  </span><br><span class="line">  </span><br><span class="line">    @Mock  </span><br><span class="line">    private OneDependency oneDependency; // æ­¤mockå°†è¢«æ³¨å…¥åˆ°someHandler  </span><br><span class="line"></span><br><span class="line">    // ...   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¸­ï¼Œ@InjectMockä¸‹é¢å£°æ˜äº†ä¸€ä¸ªå¾…æµ‹è¯•çš„å¯¹è±¡ï¼Œ@Mockå®šä¹‰çš„mockå¯¹è±¡å°†ä¼šè¢«æ³¨å…¥åˆ°è¿™ä¸ªå¾…æµ‹è¯•çš„å¯¹è±¡ä¸­ã€‚</p>
<hr>
<p>ğŸ¤” @Mockåˆ›å»ºåˆ›å»ºmockå¯¹è±¡ä¹‹åï¼Œåœ¨å¯¹å…·ä½“çš„æ–¹æ³•æ‰“æ¡©ä¹‹å‰ï¼Œmockå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•å…¨è¢«ç½®ç©ºï¼ˆ0æˆ–è€…nullï¼‰ï¼Œæ‰€ä»¥ï¼Œå¯¹åº”çš„æ–¹æ³•æ˜¯ä¸è¿è¡Œçš„ã€‚<br>*mockå¯¹è±¡åˆ›å»ºä¹‹åï¼Œè¢«æµ‹è¯•ç±»ä¸­çš„è¯¥å¯¹è±¡çš„æ–¹æ³•å°±éƒ½ä¸æ‰§è¡Œäº†ã€‚</p>
<p>ğŸ¤” @Spyå¯ä»¥åˆ›å»ºçš„å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•éƒ½ä¼šæŒ‰ç…§åŸæ–¹æ³•çš„é€»è¾‘æ‰§è¡Œï¼Œç›´åˆ°è¢«æ‰“æ¡©è¿”å›æŸä¸ªå…·ä½“çš„å€¼ã€‚</p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/langren1992/p/9681600.html">https://www.cnblogs.com/langren1992/p/9681600.html</a></p>
<h3 id="mockä½¿ç”¨"><a href="#mockä½¿ç”¨" class="headerlink" title="mockä½¿ç”¨"></a>mockä½¿ç”¨</h3><p>mavenæ³¨å…¥ä¾èµ–ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨æ³¨è§£ï¼Œé‚£ä¹ˆå¿…é¡»è¦å®ä¾‹åŒ– mock å¯¹è±¡ã€‚Mockito åœ¨é‡åˆ°ä½¿ç”¨æ³¨è§£çš„å­—æ®µçš„æ—¶å€™å¿…é¡»ä½¿ç”¨@RunWith(MockitoJUnitRunner.class) æˆ– MockitoAnnotations.initMocks(this)è¿›è¡Œmocksçš„åˆå§‹åŒ–å’Œæ³¨å…¥ã€‚<br>(å¯ä»¥å†™ä¸€ä¸ªinitå‡½æ•°ï¼ŒåŠ @Beforeæ³¨è§£)</p>
<h4 id="é…ç½®mock"><a href="#é…ç½®mock" class="headerlink" title="é…ç½®mock"></a>é…ç½®mock</h4><p>when(â€¦â€‹.).thenReturn(â€¦â€‹.)å¯ä»¥è¢«ç”¨æ¥å®šä¹‰å½“æ¡ä»¶æ»¡è¶³æ—¶å‡½æ•°çš„è¿”å›å€¼ï¼Œå½“å¤šæ¬¡è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼ŒMockito ä¼šæ ¹æ®ä½ å®šä¹‰çš„å…ˆåé¡ºåºæ¥è¿”å›è¿”å›å€¼ï¼ˆå¤šæ¬¡è°ƒç”¨ï¼‰ã€‚Mocks è¿˜å¯ä»¥æ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒæ¥å®šä¹‰ä¸åŒçš„è¿”å›å€¼ã€‚è­¬å¦‚è¯´ä½ çš„å‡½æ•°å¯ä»¥å°†anyString æˆ–è€… anyIntä½œä¸ºè¾“å…¥å‚æ•°ï¼Œç„¶åå®šä¹‰å…¶ç‰¹å®šçš„æ”¾å›å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void test1()  &#123;</span><br><span class="line">        //  åˆ›å»º mock</span><br><span class="line">        MyClass test = Mockito.mock(MyClass.class);</span><br><span class="line"></span><br><span class="line">        // è‡ªå®šä¹‰ getUniqueId() çš„è¿”å›å€¼</span><br><span class="line">        when(test.getUniqueId()).thenReturn(43);</span><br><span class="line"></span><br><span class="line">        // åœ¨æµ‹è¯•ä¸­ä½¿ç”¨mockå¯¹è±¡</span><br><span class="line">        assertEquals(test.getUniqueId(), 43);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è¿”å›å¤šä¸ªå€¼</span><br><span class="line">@Test</span><br><span class="line">public void testMoreThanOneReturnValue()  &#123;</span><br><span class="line">        Iterator i= mock(Iterator.class);</span><br><span class="line">        when(i.next()).thenReturn(&quot;Mockito&quot;).thenReturn(&quot;rocks&quot;);</span><br><span class="line">        String result=i.next()+&quot; &quot;+i.next();</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(&quot;Mockito rocks&quot;, result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¦‚ä½•æ ¹æ®è¾“å…¥æ¥è¿”å›å€¼</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(&quot;Mockito&quot;)).thenReturn(1);</span><br><span class="line">        when(c.compareTo(&quot;Eclipse&quot;)).thenReturn(2);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(1,c.compareTo(&quot;Mockito&quot;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¦‚ä½•è®©è¿”å›å€¼ä¸ä¾èµ–äºè¾“å…¥</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueInDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(anyInt())).thenReturn(-1);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(-1 ,c.compareTo(9));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®å‚æ•°ç±»å‹æ¥è¿”å›å€¼</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueInDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(isA(Todo.class))).thenReturn(0);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        Todo todo = new Todo(5);</span><br><span class="line">        assertEquals(todo ,c.compareTo(new Todo(1)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="æ— è¿”å›å€¼çš„æ–¹æ³•"><a href="#æ— è¿”å›å€¼çš„æ–¹æ³•" class="headerlink" title="æ— è¿”å›å€¼çš„æ–¹æ³•"></a>æ— è¿”å›å€¼çš„æ–¹æ³•</h4><p>mokitoä¸­ï¼Œå¯¹æ— è¿”å›çš„å‡½æ•°ä»€ä¹ˆéƒ½ä¸åš<br>Mokito.doNothing().when(å¯¹è±¡).å‡½æ•°();</p>
<p>å¯¹äºæ— è¿”å›å€¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨doReturn(â€¦â€‹).when(â€¦â€‹).methodCallæ¥è·å¾—ç±»ä¼¼çš„æ•ˆæœã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³åœ¨è°ƒç”¨æŸäº›æ— è¿”å›å€¼å‡½æ•°çš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨doThrow æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢æµ‹è¯•ç”¨ä¾‹æè¿°äº†å¦‚ä½•ä½¿ç”¨doThrow()æ–¹æ³•</span><br><span class="line"></span><br><span class="line">@Test(expected=IOException.class)</span><br><span class="line">public void testForIOException() &#123;</span><br><span class="line">        // åˆ›å»ºå¹¶é…ç½® mock å¯¹è±¡</span><br><span class="line">        OutputStream mockStream = mock(OutputStream.class);</span><br><span class="line">        doThrow(new IOException()).when(mockStream).close();</span><br><span class="line"></span><br><span class="line">        // ä½¿ç”¨ mock</span><br><span class="line">        OutputStreamWriter streamWriter= new OutputStreamWriter(mockStream);</span><br><span class="line">        streamWriter.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="éªŒè¯æ˜¯å¦è°ƒç”¨"><a href="#éªŒè¯æ˜¯å¦è°ƒç”¨" class="headerlink" title="éªŒè¯æ˜¯å¦è°ƒç”¨"></a>éªŒè¯æ˜¯å¦è°ƒç”¨</h4><p>éªŒè¯ query æ–¹æ³•æ˜¯å¦è¢« MyDatabase çš„ mock å¯¹è±¡è°ƒç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">public class MockitoTest  &#123;</span><br><span class="line"></span><br><span class="line">        @Mock</span><br><span class="line">        MyDatabase databaseMock; (1)</span><br><span class="line"></span><br><span class="line">        @Rule public MockitoRule mockitoRule = MockitoJUnit.rule(); (2)</span><br><span class="line"></span><br><span class="line">        @Test</span><br><span class="line">        public void testQuery()  &#123;</span><br><span class="line">                ClassToTest t  = new ClassToTest(databaseMock); (3)</span><br><span class="line">                boolean check = t.query(&quot;* from t&quot;); (4)</span><br><span class="line">                assertTrue(check); (5)</span><br><span class="line">                verify(databaseMock).query(&quot;* from t&quot;); (6)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mockito ä¼šè·Ÿè¸ª mock å¯¹è±¡é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•å’Œå˜é‡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ¥éªŒè¯å‡½æ•°åœ¨ä¼ å…¥ç‰¹å®šå‚æ•°çš„æ—¶å€™æ˜¯å¦è¢«è°ƒç”¨ã€‚è¿™ç§æ–¹å¼çš„æµ‹è¯•ç§°è¡Œä¸ºæµ‹è¯•ï¼Œè¡Œä¸ºæµ‹è¯•å¹¶ä¸ä¼šæ£€æŸ¥å‡½æ•°çš„è¿”å›å€¼ï¼Œè€Œæ˜¯æ£€æŸ¥åœ¨ä¼ å…¥æ­£ç¡®å‚æ•°æ—¶å€™å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void testVerify()  &#123;</span><br><span class="line">        // åˆ›å»ºå¹¶é…ç½® mock å¯¹è±¡</span><br><span class="line">        MyClass test = Mockito.mock(MyClass.class);</span><br><span class="line">        when(test.getUniqueId()).thenReturn(43);</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨mockå¯¹è±¡é‡Œé¢çš„æ–¹æ³•å¹¶ä¼ å…¥å‚æ•°ä¸º12</span><br><span class="line">        test.testing(12);</span><br><span class="line">        test.getUniqueId();</span><br><span class="line">        test.getUniqueId();</span><br><span class="line"></span><br><span class="line">        // æŸ¥çœ‹åœ¨ä¼ å…¥å‚æ•°ä¸º12çš„æ—¶å€™æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨</span><br><span class="line">        verify(test).testing(Matchers.eq(12));</span><br><span class="line"></span><br><span class="line">        // æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨ä¸¤æ¬¡</span><br><span class="line">        verify(test, times(2)).getUniqueId();</span><br><span class="line"></span><br><span class="line">        // å…¶ä»–ç”¨æ¥éªŒè¯å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨çš„æ–¹æ³•</span><br><span class="line">        verify(mock, never()).someMethod(&quot;never called&quot;);</span><br><span class="line">        verify(mock, atLeastOnce()).someMethod(&quot;called at least once&quot;);</span><br><span class="line">        verify(mock, atLeast(2)).someMethod(&quot;called at least twice&quot;);</span><br><span class="line">        verify(mock, times(5)).someMethod(&quot;called five times&quot;);</span><br><span class="line">        verify(mock, atMost(3)).someMethod(&quot;called at most 3 times&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="spyä½¿ç”¨"><a href="#spyä½¿ç”¨" class="headerlink" title="spyä½¿ç”¨"></a>spyä½¿ç”¨</h3><p>@Spyæˆ–è€…spy()æ–¹æ³•å¯ä»¥è¢«ç”¨æ¥å°è£… java å¯¹è±¡ã€‚è¢«å°è£…åï¼Œé™¤éç‰¹æ®Šå£°æ˜ï¼ˆæ‰“æ¡© stubï¼‰ï¼Œå¦åˆ™éƒ½ä¼šçœŸæ­£çš„è°ƒç”¨å¯¹è±¡é‡Œé¢çš„æ¯ä¸€ä¸ªæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">// Lets mock a LinkedList</span><br><span class="line">List list = new LinkedList();</span><br><span class="line">List spy = spy(list);</span><br><span class="line"></span><br><span class="line">// å¯ç”¨ doReturn() æ¥æ‰“æ¡©</span><br><span class="line">doReturn(&quot;foo&quot;).when(spy).get(0);</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢ä»£ç ä¸ç”Ÿæ•ˆ</span><br><span class="line">// çœŸæ­£çš„æ–¹æ³•ä¼šè¢«è°ƒç”¨</span><br><span class="line">// å°†ä¼šæŠ›å‡º IndexOutOfBoundsException çš„å¼‚å¸¸ï¼Œå› ä¸º List ä¸ºç©º</span><br><span class="line">when(spy.get(0)).thenReturn(&quot;foo&quot;);</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f6e3ab9719b9">https://www.jianshu.com/p/f6e3ab9719b9</a><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7b67806b74f6">https://www.jianshu.com/p/7b67806b74f6</a></p>
<h2 id="PowerMockRunner-å’Œ-MockitoJUnitRunner"><a href="#PowerMockRunner-å’Œ-MockitoJUnitRunner" class="headerlink" title="PowerMockRunner å’Œ MockitoJUnitRunner"></a>PowerMockRunner å’Œ MockitoJUnitRunner</h2><p>å…³äºæ‰“æ¡©ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/moshowgame/article/details/100983711">https://blog.csdn.net/moshowgame/article/details/100983711</a></p>
<h2 id="when-thenReturn-å’Œ-doReturn-when-åŒºåˆ«"><a href="#when-thenReturn-å’Œ-doReturn-when-åŒºåˆ«" class="headerlink" title="when().thenReturn() å’Œ doReturn().when() åŒºåˆ«"></a>when().thenReturn() å’Œ doReturn().when() åŒºåˆ«</h2><p>ä½¿ç”¨@Mockæ—¶å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä½†æ˜¯@Spyæ—¶ï¼Œå®ƒä»¬çš„è°ƒç”¨ç»“æœä¸åŒã€‚<br>1.when().thenReturn() ä¼šè°ƒç”¨çœŸå®çš„æ–¹æ³•ï¼Œå®¹æ˜“æŠ›å‡ºå¼‚å¸¸<br>2.doReturn().when() ä¸ä¼šè°ƒç”¨çœŸå®æ–¹æ³•</p>
<h2 id="PowerMockito"><a href="#PowerMockito" class="headerlink" title="PowerMockito"></a>PowerMockito</h2><p>PowerMockæ‰©å±•äº†EasyMockå’ŒMockitoæ¡†æ¶ï¼Œå¢åŠ äº†å¯¹staticå’Œfinalæ–¹æ³•mockæ”¯æŒç­‰åŠŸèƒ½.<br>PowerMockæœ‰ä¸¤ä¸ªé‡è¦çš„æ³¨è§£ï¼š<br> @RunWith(PowerMockRunner.class)<br> @prepareForTest({MyObject.class})<br> @PrepareForTestæ³¨è§£å’Œ@RunWithæ³¨è§£æ˜¯ç»“åˆä½¿ç”¨çš„ï¼Œä¸è¦å•ç‹¬ä½¿ç”¨@PrepareForTestï¼Œå¦åˆ™ä¸èµ·ä½œç”¨ã€‚å½“ä½¿ç”¨PowerMockå»mocké™æ€ï¼Œfinalæˆ–è€…ç§æœ‰æ–¹æ³•æ—¶ï¼Œéœ€è¦åŠ ä¸Šè¿™ä¸¤ä¸ªæ³¨è§£ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/KeeYang108/article/details/79891588">https://blog.csdn.net/KeeYang108/article/details/79891588</a></p>
<h2 id="Mockæµ‹è¯•è¸©å‘"><a href="#Mockæµ‹è¯•è¸©å‘" class="headerlink" title="Mockæµ‹è¯•è¸©å‘"></a>Mockæµ‹è¯•è¸©å‘</h2><p>ä»Šå¤©å†™äº†ä¸€ä¸ªcontrolå±‚çš„mockå•å…ƒæµ‹è¯•ï¼Œå› ä¸ºè¦è°ƒserviceå±‚ï¼ˆå®ç°ç±»ï¼‰çš„æ–¹æ³•ï¼Œå°±æŠŠserviceæ¥å£åšäº†ä¸€ä¸ªmockï¼Œæµ‹è¯•æ—¶å€™ä¸€ç›´åŒ…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚<br>mock serviceå®ç°ç±»ä¹‹åï¼Œæ­£å¸¸ã€‚</p>
<p>æ›´æ–°ï¼šä»Šå¤©@Mockçš„æ¥å£ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¥‡æ€ªäº†ï¼š<br>mockæ¥å£å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸çš„caseï¼šæ˜¯serviceï¼ˆ.ä¹‹å‰çš„ï¼‰æ˜¯å®ç°ç±»ï¼Œ@Autowiredçš„ä¹Ÿæ˜¯å®ç°ç±»ï¼Œæ‰€ä»¥mockæ¥å£æ²¡ç”¨ï¼Ÿ<br>è€Œä»Šå¤©mockæ¥å£ï¼Œè¢«æµ‹è¯•ç±»ä¸­.ä¹‹å‰çš„æ˜¯æ¥å£ï¼Œ@Autowiredçš„ä¹Ÿæ˜¯æ¥å£ï¼Œæ‰€ä»¥æ²¡æ¯›ç—…ã€‚</p>
<p>åŠ @RunWith(PowerMockRunner.class)<br>è¦æµ‹è¯•çš„ç±»åŠ @InjectMocks</p>
<p>1.serviceå®ç°ç±»ä¸åŠ mockï¼Œåˆ°æŒ‡å®šæ–¹æ³•ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œserviceå¯¹è±¡ä¸ºç©º<br>2.å¦‚æœserviceæ–¹æ³•æ— è¿”å›ï¼Œå¯ä»¥ä¸æ‰“æ¡©ï¼Œå¦‚æœæœ‰è¿”å›ï¼Œæœ€å¥½æ‰“ä¸ªæ¡©ã€‚<br>3.æœ‰è¿”å›çš„æ‰“äº†æ¡©ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„è¾“å…¥ï¼Œè¿”å›ä¸åŒçš„ç»“æœã€‚æœ‰è¿”å›å¦‚æœä¸æ‰“æ¡©ï¼Œç›¸å½“äºè¿”å›çš„æ˜¯nullï¼Œè¿”å›å¦‚æœè¢«åé¢ç”¨åˆ°ï¼Œå®¹æ˜“æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h2 id="Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸"><a href="#Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸" class="headerlink" title="Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸"></a>Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸</h2><p>mockæµ‹è¯•çš„è¢«æµ‹è¯•ç±»ï¼ˆ@InjectMockï¼‰ä¸­çš„å±æ€§ä¸€èˆ¬ä¸ºnullï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸åŠ å°±åœ¨è¢«æµ‹è¯•ç±»ä¸­è°ƒç”¨å±æ€§å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼ŒæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºå±æ€§å¯¹è±¡æ˜¯nullã€‚<br>å°†å±æ€§å¯¹è±¡åœ¨Testä¸­æ·»åŠ @Mockä¸ºmockå¯¹è±¡ï¼Œç›´æ¥å¿½ç•¥å±æ€§å¯¹è±¡æ–¹æ³•ï¼Œä¸è¿›å…¥æ‰§è¡Œã€‚<br>å°†å±æ€§å¯¹è±¡åœ¨Testä¸­æ·»åŠ @Spyä¸ºspyå¯¹è±¡ï¼Œä¼šè¿›å…¥è¯¥æ–¹æ³•ä¸­ï¼Œä½†æ˜¯åªé™äºä¸€å±‚ï¼Œå†è¿›å…¥å°±ä¸è¡Œäº†ï¼Œè¿˜æ˜¯ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/13/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/13/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/redis/" class="post-title-link" itemprop="url">redis</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-13 21:58:17" itemprop="dateCreated datePublished" datetime="2022-04-13T21:58:17+08:00">2022-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-09 22:32:51" itemprop="dateModified" datetime="2022-07-09T22:32:51+08:00">2022-07-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åç«¯å¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h4><p>redisï¼šå†…å­˜å­˜å‚¨ï¼ˆé€Ÿåº¦å¿«ï¼‰ã€è¿œç¨‹æ“ä½œï¼ˆå¯ä»¥ä¸å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼‰ã€æŒä¹…åŒ–ï¼ˆæœåŠ¡å™¨é‡å¯å¯ä¿æŒé‡å¯å‰çš„æ•°æ®ï¼‰ã€å¯æ‰©å±•ï¼ˆä¸»ä»å¤åˆ¶ã€åˆ†ç‰‡ï¼‰</p>
<h4 id="macå®‰è£…redis"><a href="#macå®‰è£…redis" class="headerlink" title="macå®‰è£…redis"></a>macå®‰è£…redis</h4><p>âœ…brew install redis å®‰è£…<br>âœ…brew info redis æŸ¥çœ‹å®‰è£…è·¯å¾„<br>âœ…å¯åŠ¨redisï¼š<br>æ–¹å¼ä¸€ï¼šä½¿ç”¨brewå¯åŠ¨ brew services start redis<br>æ–¹å¼äºŒï¼šè¿›å…¥redisçš„binç›®å½•ï¼Œè¾“å…¥redis-server<br>âœ…å…³é—­redisæœåŠ¡<br>æ–¹å¼ä¸€ï¼šredis-cli SHUTDOWN<br>æ–¹å¼äºŒï¼šredis-cliè¿›å…¥å†è¾“å…¥SHUTDOWN<br>âœ…æŸ¥çœ‹redisæ˜¯å¦åœ¨è¿è¡Œï¼šps axu|grep redis<br>âœ…å®¢æˆ·ç«¯è¿æ¥redisï¼šredis-cli -h 127.0.0.1 -p 6379<br>è¿æ¥åæ‰§è¡Œpingå‘½ä»¤ï¼Œæ£€æµ‹redisæœåŠ¡æ˜¯å¦å¯åŠ¨<br>âœ…redis.confé…ç½®æ–‡ä»¶è¯´æ˜ï¼š<br>redisé»˜è®¤æ˜¯å‰å°å¯åŠ¨ï¼Œå¦‚æœç›¸ä»¥å®ˆæŠ¤è¿›ç¨‹ï¼ˆåå°æ–¹å¼ï¼‰è¿è¡Œï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å°†daemonize noä¿®æ”¹ä¸ºyesã€‚</p>
<blockquote>
<p>å®ˆæŠ¤è¿›ç¨‹ï¼ˆåå°è¿›ç¨‹ï¼‰ä¸å‰å°è¿›ç¨‹ï¼š<br>å‰å°è¿›ç¨‹æ˜¯åœ¨ç»ˆç«¯ä¸­è¿è¡Œçš„ï¼Œç»ˆç«¯å…³é—­è¿›ç¨‹ä¹Ÿå°±æ¶ˆå¤±ã€‚<br>å®ˆæŠ¤è¿›ç¨‹æ˜¯è¿è¡Œåœ¨åå°çš„ä¸€ç§ç‰¹æ®Šè¿›ç¨‹ï¼Œä¸å—ç»ˆç«¯æ§åˆ¶ï¼Œä¹Ÿä¸éœ€è¦ç»ˆç«¯çš„äº¤äº’ã€‚<br>Linuxä¸­å¤§å¤šæ•°æœåŠ¡å™¨æ˜¯ç”¨å®ˆæŠ¤è¿›ç¨‹å®ç°çš„ï¼Œæ¯”å¦‚webæœåŠ¡å™¨httpç­‰ã€‚</p>
</blockquote>
<h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><p>keys * æŸ¥çœ‹æ‰€æœ‰keyçš„å†…å®¹<br>exits key  æŸ¥çœ‹keyæ˜¯å¦å­˜åœ¨<br>set key value  è®¾ç½®keyçš„å†…å®¹<br>get key  è·å–keyçš„å†…å®¹<br>flushdb  åˆ é™¤å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰key<br>flushall  åˆ é™¤æ‰€æœ‰æ•°æ®åº“ä¸­key</p>
<p>æœåŠ¡å™¨ç›¸å…³å‘½ä»¤ï¼š<br>ping  æµ‹è¯•è¿æ¥æ˜¯å¦å­˜æ´»ï¼Œè¿”å›pongä»£è¡¨æœ‰å“åº”<br>echo  è¾“å‡ºä¿¡æ¯<br>select num  é€‰æ‹©æ•°æ®åº“ï¼Œ0-15<br>quit  é€€å‡ºè¿æ¥<br>dbsize  è¿”å›å½“å‰æ•°æ®åº“ä¸­keyçš„æ•°é‡<br>info  è·å–æœåŠ¡çš„ç›¸å…³ä¿¡æ¯</p>
<p>è®¾ç½®é”®å‘½ä»¤ï¼š<br>setex key seconds value è®¾ç½®å€¼å¹¶è®¾ç½®æœ‰æ•ˆæœŸï¼Œå·²å­˜åœ¨ä¼šè¦†ç›–<br>pexpire key millisecond è®¾ç½®æœ‰æ•ˆæ—¶é—´ï¼Œæ¯«ç§’ä¸ºå•ä½ï¼Œå¿…é¡»æ˜¯å·²ç»å­˜åœ¨çš„key<br>setnx key value ä¸å­˜åœ¨æ—¶æ”¾å…¥<br>exists key æ˜¯å¦å­˜åœ¨è¯¥key<br>ttl key ä»¥ç§’ä¸ºå•ä½æ˜¾ç¤ºè¿‡æœŸæ—¶é—´<br>pttl key ä»¥æ¯«ç§’ä¸ºå•ä½æ˜¾ç¤ºè¿‡æœŸæ—¶é—´</p>
<h4 id="redisæ•°æ®ç»“æ„"><a href="#redisæ•°æ®ç»“æ„" class="headerlink" title="redisæ•°æ®ç»“æ„"></a>redisæ•°æ®ç»“æ„</h4><p>stringï¼šå¯å­˜å‚¨å­—ç¬¦ä¸²ã€æ•´æ•°ã€æµ®ç‚¹æ•°<br>listï¼šä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²<br>setï¼šåŒ…å«å­—ç¬¦ä¸²çš„æ— åºæ”¶é›†å®¹å™¨<br>hashï¼šåŒ…å«é”®å€¼çš„æ— åºæ•£åˆ—è¡¨<br>zsetï¼šæœ‰åºé›†åˆï¼Œå…ƒç´ æ’åˆ—é¡ºåºç”±åˆ†å€¼å¤§å°å†³å®š</p>
<h4 id="redis-hset"><a href="#redis-hset" class="headerlink" title="redis hset"></a>redis hset</h4><p>Redis Hset å‘½ä»¤ç”¨äºä¸ºå“ˆå¸Œè¡¨ä¸­çš„å­—æ®µèµ‹å€¼ ã€‚<br>å¦‚æœå“ˆå¸Œè¡¨ä¸å­˜åœ¨ï¼Œä¸€ä¸ªæ–°çš„å“ˆå¸Œè¡¨è¢«åˆ›å»ºå¹¶è¿›è¡Œ HSET æ“ä½œã€‚<br>å¦‚æœå­—æ®µå·²ç»å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ï¼Œæ—§å€¼å°†è¢«è¦†ç›–ã€‚<br>hset myhashset key value</p>
<h4 id="redis-listç›¸å…³"><a href="#redis-listç›¸å…³" class="headerlink" title="redis listç›¸å…³"></a>redis listç›¸å…³</h4><p>å¾€listçš„å³è¾¹åŠ ä¸€ä¸ªå€¼<br>rpush mylist value<br>å¦‚æœåˆ—è¡¨ä¸å­˜åœ¨åˆ™æ–°å»ºï¼Œå¦‚æœkeyä¸æ˜¯åˆ—è¡¨ç±»å‹ï¼Œè¿”å›é”™è¯¯ã€‚<br>lrange mylist  ä»å·¦è¾¹ä¸€ä¸ªä¸€ä¸ªéå†å±•ç¤º<br>llen mylist è¿”å›é•¿åº¦</p>
<h4 id="noauth-authentication-required"><a href="#noauth-authentication-required" class="headerlink" title="noauth authentication required"></a>noauth authentication required</h4><p>è®¤è¯é—®é¢˜ï¼Œéœ€è¦è¾“å…¥å¯†ç <br>auth â€œpasswordâ€œ</p>
<h4 id="keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢"><a href="#keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢"></a>keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢</h4><p><code>*é€šé…ç¬¦ï¼škeys *hh*</code><br><code>?å•ä¸ªé€šé…ç¬¦ï¼škeys helï¼Ÿï¼Ÿ</code>  å¿˜äº†æœ€åä¸¤ä¸ªå­—æ¯<br><code>[]é€šé…ç¬¦ï¼škeys hell[opt]</code>  æœ€åä¸€ä¸ªå­—æ¯å¯èƒ½æ˜¯o p tä¸­çš„ä¸€ä¸ª</p>
<h4 id="redis-setexå‘½ä»¤"><a href="#redis-setexå‘½ä»¤" class="headerlink" title="redis setexå‘½ä»¤"></a>redis setexå‘½ä»¤</h4><p>ä¸ºæŒ‡å®šçš„keyè®¾ç½®å€¼åŠå…¶è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœå·²å­˜åœ¨ï¼Œåˆ™æ›¿æ¢<br>setex key 10 value   //10såè¿‡æœŸ<br>ttl key  //è¿˜æœ‰å¤šå°‘æ—¶é—´è¿‡æœŸ</p>
<h4 id="misconf-redis-is-configured-to-save-RDB"><a href="#misconf-redis-is-configured-to-save-RDB" class="headerlink" title="misconf redis is configured to save RDB"></a>misconf redis is configured to save RDB</h4><p>erroråŸå› ï¼šå¼ºåˆ¶å…³é—­rediså¿«ç…§å¯¼è‡´ä¸èƒ½æŒä¹…åŒ–<br>è§£å†³ï¼šconfig set stop-writes-on-bgsave-error no</p>
<h4 id="Jediså’ŒredisTemplate"><a href="#Jediså’ŒredisTemplate" class="headerlink" title="Jediså’ŒredisTemplate"></a>Jediså’ŒredisTemplate</h4><p>Jedisæ˜¯Rediså®˜æ–¹æ¨èçš„é¢å‘Javaçš„æ“ä½œRedisçš„å®¢æˆ·ç«¯ï¼Œè€ŒRedisTemplateæ˜¯SpringDataRedisä¸­å¯¹JedisApiçš„é«˜åº¦å°è£…ã€‚</p>
<p>SpringDataRedisç›¸å¯¹äºJedisæ¥è¯´å¯ä»¥æ–¹ä¾¿åœ°æ›´æ¢Redisçš„Javaå®¢æˆ·ç«¯ï¼Œæ¯”Jediså¤šäº†è‡ªåŠ¨ç®¡ç†è¿æ¥æ± çš„ç‰¹æ€§ï¼Œæ–¹ä¾¿ä¸å…¶ä»–Springæ¡†æ¶è¿›è¡Œæ­é…ä½¿ç”¨å¦‚ï¼šSpringCache</p>
<p>jedisè¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡</span><br><span class="line">        Jedis jedis = new Jedis(&quot;localhost&quot;);</span><br><span class="line">        System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;);</span><br><span class="line">        //æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ</span><br><span class="line">        System.out.println(&quot;æœåŠ¡æ­£åœ¨è¿è¡Œ: &quot;+jedis.ping());</span><br><span class="line">        long time=0;</span><br><span class="line">        long TestNum=100;</span><br><span class="line">        for(int i=0;i&lt;TestNum;i++)&#123;</span><br><span class="line">            long timeS=System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">            jedis.set(&quot;jedis-s&quot;+i,&quot;jedis&quot;+i);</span><br><span class="line">            long timeE=System.currentTimeMillis();</span><br><span class="line">            time+=timeE-timeS;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.print(&quot;æ€»æ—¶é—´ï¼š&quot;+time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>redisTemplateè¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@SpringBootTest(classes = ServiceApplication.class)</span><br><span class="line">public class RedisTemplateTest &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private RedisUtils redisUtils;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void T()&#123;</span><br><span class="line">        long time=0;</span><br><span class="line">        long TestNum=100;</span><br><span class="line">        for(int i=0;i&lt;TestNum;i++)&#123;</span><br><span class="line">            long timeS=System.currentTimeMillis();</span><br><span class="line">            redisUtils.set(&quot;RedisTemplateTest&quot;,&quot;redi&quot;+i);</span><br><span class="line">            long timeE=System.currentTimeMillis();</span><br><span class="line">            time+=timeE-timeS;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;æ€»æ—¶é—´ï¼š&quot;+time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37208934/article/details/95201211">https://blog.csdn.net/qq_37208934/article/details/95201211</a></p>
<h4 id="redisTemplate-opsForHash"><a href="#redisTemplate-opsForHash" class="headerlink" title="redisTemplate.opsForHash()"></a>redisTemplate.opsForHash()</h4><p>Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚<br>Redis ä¸­æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 2^32 - 1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰ã€‚</p>
<p>å­˜å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Mapä»¥mapé›†åˆçš„å½¢å¼æ·»åŠ é”®å€¼å¯¹</span><br><span class="line">&lt;String, String&gt; maps = new HashMap();</span><br><span class="line">maps.put(&quot;1&quot;,&quot;æ˜ŸæœŸä¸€&quot;);</span><br><span class="line">maps.put(&quot;2&quot;,&quot;æ˜ŸæœŸäºŒ&quot;);</span><br><span class="line">maps.put(&quot;3&quot;,&quot;æ˜ŸæœŸä¸‰&quot;);</span><br><span class="line">maps.put(&quot;4&quot;,&quot;æ˜ŸæœŸå››&quot;);</span><br><span class="line">redisTemplate.opsForHash().putAll(&quot;day:week&quot;, maps);</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥å•ä¸ªå­˜å…¥ï¼š</span><br><span class="line">.put(H key, HK hashKey, HV value)</span><br></pre></td></tr></table></figure>

<p>è·å–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Object, Object&gt; entries = redisTemplate.opsForHash().entries(&quot;day:week&quot;);</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43167662/article/details/123232840">https://blog.csdn.net/weixin_43167662/article/details/123232840</a></p>
<h4 id="redisTemplate-opsForGeo"><a href="#redisTemplate-opsForGeo" class="headerlink" title="redisTemplate.opsForGeo()"></a>redisTemplate.opsForGeo()</h4><p>rediså…³äºgeoä½ç½®è®¡ç®—çš„apiã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">private RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">redisTemplate.opsForGeo().add(key, new Point(x,y), msg);</span><br><span class="line">// keyå’Œmsgä¸ºå­—ç¬¦ä¸²ï¼ŒPointæ˜¯springframework.data.geoä¸‹çš„</span><br></pre></td></tr></table></figure>

<p>redisçš„geoå®æˆ˜ï¼š<a target="_blank" rel="noopener" href="http://itpcb.com/a/536152">http://itpcb.com/a/536152</a></p>
<h4 id="å¯è§†åŒ–å·¥å…·another-redis"><a href="#å¯è§†åŒ–å·¥å…·another-redis" class="headerlink" title="å¯è§†åŒ–å·¥å…·another redis"></a>å¯è§†åŒ–å·¥å…·another redis</h4><p>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/qishibo/AnotherRedisDesktopManager/releases">https://github.com/qishibo/AnotherRedisDesktopManager/releases</a></p>
<p>è¿æ¥ï¼šè¾“å…¥ åœ°å€host , ç«¯å£ï¼Œå¯†é’¥</p>
<p>å¯è§†åŒ–ï¼škeyï¼ŒæœåŠ¡å™¨ç‰ˆæœ¬ï¼Œä½¿ç”¨å†…å­˜ï¼Œè¿è¡ŒçŠ¶æ€ï¼Œä½¿ç”¨åˆ°çš„åº“ç­‰ä¿¡æ¯</p>
<p>æ”¯æŒä¸‰ç§æ–‡æœ¬æ ¼å¼ï¼Œåˆ†åˆ«æ˜¯ text,json , unserialize</p>
<p>ç”¨æ³•å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/220209936">https://zhuanlan.zhihu.com/p/220209936</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jade liu"
      src="/images/head.gif">
  <p class="site-author-name" itemprop="name">Jade liu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">85</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jadeliuliu" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;jadeliuliu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jadeliu1998@163.com" title="E-Mail â†’ mailto:jadeliu1998@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/jadeliu1998" title="CSDN â†’ https:&#x2F;&#x2F;blog.csdn.net&#x2F;jadeliu1998" rel="noopener" target="_blank"><i class="fab fa-google fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5823044646" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5823044646" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jade liu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>





        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
