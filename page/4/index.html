<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Jadeliu&#39;s blog">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="Jadeliu&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jade liu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Jadeliu's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jadeliu's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/30/myblog/JAVA/java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/30/myblog/JAVA/java/" class="post-title-link" itemprop="url">javaå¸¸è§„</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-30 12:00:26" itemprop="dateCreated datePublished" datetime="2022-04-30T12:00:26+08:00">2022-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-22 21:39:15" itemprop="dateModified" datetime="2023-08-22T21:39:15+08:00">2023-08-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h3><p>1ã€sqlï¼ˆdaoå±‚ï¼‰è¿”å›çš„ï¼Œå°½é‡ä¸è¦ç”¨VOï¼Œè€Œä½¿ç”¨DOã€‚é™¤éè”è¡¨æŸ¥è¯¢ï¼Ÿdaoå±‚æŸ¥å‡ºæ¥çš„doéœ€è¦åŠ å…¶ä»–è¡¨çš„ä¸€ä¸¤ä¸ªå­—æ®µï¼Œå¯ä»¥åœ¨åŸè¡¨doçš„åŸºç¡€ä¸Šç»§æ‰¿å°è£…ä¸€ä¸‹ï¼Œå¦‚æœè¦ä¼ å…¥ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥å­ç±»ï¼Œdaoå±‚å¤„ç†æ—¶ä¼šè‡ªåŠ¨è§£æä¸ºçˆ¶ç±»ã€‚</p>
<p>2ã€serviceé‡Œé¢ä¸è¦è°ƒä¸æƒ³å¹²çš„daoå±‚æ–¹æ³•ï¼Œè€Œæ˜¯è°ƒdaoæ‰€åœ¨serviceçš„æ–¹æ³•ã€‚</p>
<p>3ã€ç»§æ‰¿è‡ªåŒä¸€æŠ½è±¡ç±»çš„ç±»æ–¹æ³•ï¼Œéœ€è¦å¯¹åŒä¸€è¿”å›å¤„ç†ï¼Œå¹¶ä¸”æ˜¯ä¸²è¡Œçš„ï¼Œå¯ä»¥è¾“å…¥ä¸­ç”¨contextã€‚</p>
<p>4ã€mainæ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼ŒåŒä¸€ä¸ªç±»å†…çš„æ–¹æ³•å¾—åŠ staticï¼Œä¸ç„¶å°±æ˜¯æˆå‘˜æ–¹æ³•ï¼Œæˆå‘˜æ–¹æ³•æ— æ³•åœ¨é™æ€æ–¹æ³•ä¸­è°ƒç”¨ã€‚</p>
<p>5ã€è¿è¡Œæ—¶å¼‚å¸¸æ¯”å¦‚NPEï¼Œåœ¨æ–¹æ³•é‡Œthrowï¼Œä¸éœ€è¦åœ¨æ–¹æ³•ä¸Šthrowäº†ï¼Œå¹¶ä¸”é‡Œé¢æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¯ä»¥åœ¨å¤–é¢æ–¹æ³•å¯ä»¥catchåˆ°ã€‚</p>
<p>6ã€å†™serviceä»€ä¹ˆæ—¶å€™å†™æˆç±»ï¼Œä»€ä¹ˆæ—¶å€™å†™æˆæ¥å£ï¼Ÿ å¦‚æœå¯¹å¤–çš„è¯å°±å†™æ¥å£ï¼Œå¦‚æœå†…éƒ¨ä»£ç ç”¨ï¼Œå°±serviceç±»å°±è¡Œã€‚</p>
<p>7ã€nullä¸èƒ½ç”¨æ¥åšæ¯”è¾ƒï¼Œä¼šæŠ¥NPEï¼Œä¾‹å¦‚ï¼š1 == nullï¼Œä¸è¡Œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Integer s1 = null;</span><br><span class="line">if(s1 == 1) System.out.println(&quot;ä¸å¯¹&quot;);  //æŠ¥NPE</span><br><span class="line">Integer s1 = 3;</span><br><span class="line">if(null == s1) System.out.println(&quot;å¯¹&quot;); //å¯¹çš„</span><br><span class="line">String s1 = null;</span><br><span class="line">if(s1 == &quot;a&quot;) System.out.println(&quot;å¯¹&quot;); //Stringä¸ä¼šNPE</span><br></pre></td></tr></table></figure>

<p>8ã€å¦‚æœç±»æŠ¥çº¢ï¼Œæ²¡æœ‰å¼•ç”¨åˆ°ï¼Œå°è¯•æ›´æ–°ä¸‹ä»“åº“ï¼šç‚¹ideaå³è¾¹mavenï¼Œç‚¹å·¦ä¸Šè§’æ›´æ–°åœˆï¼Œæ›´æ–°ä¸€ä¸‹ã€‚å¦‚æœè¿˜ä¸è¡Œï¼Œçœ‹ä¸€ä¸‹mavençš„settingæ–‡ä»¶å¯¹ä¸å¯¹ã€‚</p>
<p>9ã€ifã€whileã€forå…³é”®è¯çš„åé¢å’Œæ‹¬å·ä¹‹é—´è¦æœ‰ç©ºæ ¼ï¼ŒHashMap&lt;Integer, Integer&gt;å’Œå˜é‡åä¹‹é—´è¦æœ‰ç©ºæ ¼ã€‚<br>æ–¹æ³•ååé¢åˆ°å…¥å‚çš„æ‹¬å·ä¸éœ€è¦ç©ºæ ¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (int i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public voif func(Integer i) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>10ã€ä¸è¦åœ¨ä»£ç ä¸­ï¼Œç‰¹åˆ«æ˜¯ä¸»çº¿ç¨‹ä¸­éšä¾¿Thread.sleepï¼Œè¿™æ ·ä¼šé˜»å¡ä½çº¿ç¨‹ã€‚</p>
<p>11ã€æ–¹æ³•è¿”å›å¦‚æœæ˜¯åŒ…è£…ç±»å‹Doubleç­‰ï¼Œå¦‚æœç”¨doubleæ¥ï¼Œæ˜¯æ¥ä¸ä½nullçš„ï¼Œä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<p>12ã€booleanè¿™ç§ç±»å‹ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡çš„å‚æ•°ï¼Œåˆå§‹åŒ–å¯¹è±¡æ—¶ï¼Œä¼šç»™ä¸€ä¸ªé»˜è®¤å€¼falseï¼Œä½†æ˜¯å•ç‹¬åˆå§‹åŒ–booleanç±»å‹ï¼Œéœ€è¦ç»™å€¼ï¼Œä¸èƒ½boolean b;</p>
<p>13ã€é…ç½®å¯ä»¥å†™åœ¨ä¸€ä¸ªæ¥å£é‡Œ XXXInstanceï¼Œå¯ä»¥è¿™ä¹ˆå–åï¼Œç›´æ¥åŠ ç±»å‹å°±è¡Œï¼Œä¸ç”¨public staticã€‚è°ƒç”¨çš„æ—¶å€™å°± XXXInstance.SSSã€‚</p>
<h3 id="è®¿é—®æƒé™"><a href="#è®¿é—®æƒé™" class="headerlink" title="è®¿é—®æƒé™"></a>è®¿é—®æƒé™</h3><p>privateï¼šä»…é™ç±»æœ¬èº«å¯è§<br>defaultï¼šç±»å†…éƒ¨ã€åŒ…è®¿é—®æƒé™<br>protectedï¼šç±»å†…éƒ¨ã€åŒä¸€ä¸ªåŒ…ã€å­ç±»ä¸­è®¿é—®<br>publicï¼šç±»å†…éƒ¨ã€åŒä¸€ä¸ªåŒ…ã€å­ç±»ã€ä»»æ„ä½ç½®éƒ½èƒ½è®¿é—®</p>
<h3 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h3><p>âœ…java: Compilation failed:</p>
<p>æŠ¥é”™åŸå› ï¼š<br>é¡¹ç›®ä¸­Javaç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯ä»¥æŸ¥çœ‹é¡¹ç›®ä¸­çš„jdké…ç½®.<br>1ã€æŸ¥çœ‹é¡¹ç›®çš„jdk<br>File -&gt;Project Structure-&gt;Project Settings -&gt;Project </p>
<p>2ã€æŸ¥çœ‹å·¥ç¨‹çš„jdk<br>File -&gt;Project Structure-&gt;Project Settings -&gt; Modules -&gt; ï¼ˆéœ€è¦ä¿®æ”¹çš„å·¥ç¨‹åç§°ï¼‰ -&gt; Sources -&gt;</p>
<p>3ã€æŸ¥çœ‹ideaä¸­Javaé…ç½®<br>compile çš„ java compileä¸­ã€‚</p>
<p>âœ…ç©ºæŒ‡é’ˆNPE</p>
<p>ç©ºæŒ‡é’ˆ(Null Pointer Exceptionï¼ŒNPE)<br>ç©ºæŒ‡é’ˆå¼‚å¸¸å±äºè¿è¡Œæ—¶çš„å¼‚å¸¸ã€‚å½“Javaå°è¯•å»è°ƒç”¨çœŸå®å¯¹è±¡ä¸Šçš„ä»»ä½•æ–¹æ³•æ—¶ï¼Œå¦‚æœåœ¨è¿è¡Œæ—¶ä¸­ï¼Œè¯¥å¯¹è±¡è°ƒç”¨çš„æ˜¯ç©ºå¼•ç”¨(Null Reference)ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>ç”±äºç§ç§åŸå› ï¼Œå¼€å‘äººå‘˜æ—¶å¸¸ä¼šå¿˜è®°åˆå§‹åŒ–å¯¹è±¡å’ŒéªŒè¯å¯¹è±¡ã€‚è¿™å¾€å¾€æ˜¯å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸çš„æ ¹æºã€‚<br>ä¾‹å¦‚ï¼šå¯¹ä¸€ä¸ªä¸ºnullçš„å¯¹è±¡è°ƒç”¨get/setæ–¹æ³•ï¼Œå°±ä¼šNPEã€‚</p>
<p>ğŸ¤”Optionalé¿å…ç©ºæŒ‡é’ˆ<br>java.util.Optional æ˜¯java8ä¸­å¼•è¿›çš„ä¸€ä¸ªæ–°çš„ç±»ï¼Œå®ƒå¯ä»¥å¯¹å¯èƒ½ç¼ºå¤±çš„å€¼è¿›è¡Œå»ºæ¨¡ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†nullèµ‹å€¼ç»™å˜é‡ã€‚</p>
<p>javaå¼•å…¥ç©ºæŒ‡é’ˆçš„å±å®³ï¼š<br>1ã€å®ƒæ˜¯å¾ˆå¤šé—®é¢˜çš„é”™è¯¯ä¹‹æºï¼Œå®ƒæ˜¯ç›®å‰å¼€å‘ä¸­æœ€å…¸å‹çš„å¼‚å¸¸ã€‚<br>2ã€å®ƒä¼šä½¿ä»£ç è†¨èƒ€ï¼Œå®ƒä¼šä½¿æˆ‘ä»¬çš„ä»£ç å……æ»¡äº†æ·±åº¦åµŒå¥—çš„nullæ£€æŸ¥ï¼Œä»£ç çš„å¯è¯»æ€§ä¸‹é™ã€‚<br>3ã€å®ƒè‡ªèº«æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œnullè‡ªèº«æ²¡æœ‰ä»»ä½•çš„è¯­ä¹‰ï¼Œå®ƒè¡¨ç¤ºä»¥ä¸€ç§é”™è¯¯çš„æ–¹å¼å¯¹ç¼ºå¤±å˜é‡çš„å€¼å»ºæ¨¡ã€‚<br>4ã€å®ƒç ´åäº†javaçš„å“²å­¦ï¼Œjavaä¸€ç›´é¿å…å¼•å…¥æŒ‡é’ˆçš„å­˜åœ¨ï¼Œè€Œå”¯ä¸€çš„ä¾‹å¤–å°±æ˜¯nullæŒ‡é’ˆã€‚<br>5ã€å®ƒç ´åäº†javaçš„ç±»å‹ï¼Œnullä¸å±äºä»»ä½•ç±»å‹ï¼Œè¿™ä¹Ÿæ„å‘³ç€å®ƒå¯ä»¥è¢«èµ‹å€¼ç»™ä»»æ„å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œæˆ‘ä»¬å°†æ— æ³•è·å–è¿™ä¸ªnullå€¼æœ€åˆçš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚<br>è€ŒOptionalçš„å‡ºç°å¯ä»¥è®©æˆ‘ä»¬æœ€å¤§ç¨‹åº¦ä¸Šè§„é¿ä¸Šè¿°é—®é¢˜ã€‚</p>
<p>Optionalçš„ä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/aaaPostcard/article/details/123596787">https://blog.csdn.net/aaaPostcard/article/details/123596787</a><br>ï¼ˆæ„Ÿè§‰åªèƒ½é¿å…å¯¹è‡ªå·±å®šä¹‰çš„domainäº§ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œæ— æ³•é¿å…ä»æ•°æ®åº“ä¸­è·å–åˆ°nullï¼Œç„¶åæ“ä½œé€ æˆNPEã€‚ï¼‰</p>
<p>âœ… IllegalStateException:Failed to load ApplicationContext</p>
<p>åŠ è½½ç±»å‡ºé—®é¢˜ï¼Œå¾€ä¸‹çœ‹æ˜¯å“ªä¸ªç±»æ²¡åŠ è½½ï¼Œè·å–beanå‡ºç°é—®é¢˜ï¼Œçœ‹æ˜¯ä¸æ˜¯å½“ä½œå¯¹è±¡è°ƒç”¨äº†ï¼Œä½†æ˜¯æ²¡åŠ @Serviceã€‚</p>
<p>âœ… forå¾ªç¯å†…é€šè¿‡newæ¥ä¿®æ”¹å¼•ç”¨å˜é‡å¯¼è‡´çš„é—®é¢˜</p>
<p>forå¾ªç¯ä¸­å£°æ˜çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡ï¼ŒListä¸­å­˜ç€å¯¹è±¡çš„å¼•ç”¨å˜é‡ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡åœ¨å †ä¸­çš„åœ°å€ã€‚forå¾ªç¯ä¸­é€šè¿‡setæ–¹æ³•æ¥æ”¹å˜å †ä¸­çš„å˜é‡ï¼Œæ²¡é—®é¢˜ï¼Œå¼•ç”¨å˜é‡å¹¶ä¸ä¼šæ”¹å˜ã€‚</p>
<p>ä½†æ˜¯ï¼Œforå¾ªç¯ä¸­é€šè¿‡newä¸€ä¸ªæ–°å¯¹è±¡æ¥èµ‹å€¼ç»™å±€éƒ¨å˜é‡ï¼Œæ–°å¯¹è±¡æ˜¯åœ¨å †ä¸­åˆ›å»ºäº†ï¼Œå¯¹è±¡åœ°å€èµ‹ç»™å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯Listä¸­çš„å€¼å¹¶æ²¡æœ‰æ”¹å˜ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test10() &#123;</span><br><span class="line">    A a = new A(&quot;lll&quot;);</span><br><span class="line">    List&lt;A&gt; list1 = Lists.newArrayList(a);</span><br><span class="line">    List&lt;A&gt; list2 = Lists.newArrayList();</span><br><span class="line">    list2.addAll(list1);</span><br><span class="line">    System.out.println(list2); //[A(name=lll)]</span><br><span class="line">    a.setName(&quot;www&quot;);</span><br><span class="line">    System.out.println(list1); //[A(name=www)]</span><br><span class="line">    System.out.println(list2); //[A(name=www)]</span><br><span class="line"></span><br><span class="line">    for (A u : list2) &#123;</span><br><span class="line">        u.setName(&quot;bbb&quot;);</span><br><span class="line">        System.out.println(u.hashCode()); //1642360923</span><br><span class="line">        A u1 = new A(&quot;aaa&quot;);</span><br><span class="line">        u = u1;</span><br><span class="line">        u.setName(&quot;aaa&quot;);</span><br><span class="line">        System.out.println(u.hashCode()); //1343441044</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(list2); //[A(name=bbb)]</span><br><span class="line">    System.out.println(list2.get(0).hashCode()); //1642360923</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Getter</span><br><span class="line">@Setter</span><br><span class="line">@ToString</span><br><span class="line">class A &#123;</span><br><span class="line">    A(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    private String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Void-ä¸-void-ä¸-null"><a href="#Void-ä¸-void-ä¸-null" class="headerlink" title="Void ä¸ void ä¸ null"></a>Void ä¸ void ä¸ null</h3><p>void æ˜¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ã€‚è€Œ Void æ˜¯ void å°è£…ç±»å‹ã€‚<br>Void ä¹‹äº void ç±»ä¼¼äº Integer ä¹‹äº intã€‚ä½†å¹¶éå¦‚æ­¤ï¼ŒVoid æ¯”è¾ƒç‰¹åˆ«ï¼š<br>å®ƒä¸å¯å®ä¾‹åŒ–<br>å®ƒæ²¡æœ‰å†…ç½®çš„ç±»å‹å®ä¾‹ï¼Œä¹Ÿæ²¡æœ‰å¯ç”¨çš„å­—é¢å€¼ã€‚</p>
<p>å£°æ˜ä¸€ä¸ª Void å˜é‡é€šå¸¸æ˜¯æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰çš„ï¼Œå› ä¸ºæ²¡æœ‰å¯ä¸ºå…¶èµ‹å€¼çš„å®ä¾‹ã€‚Void å˜é‡å”¯ä¸€èƒ½æŒæœ‰çš„æ˜¯ nullã€‚Void ä¸€ä¸ªå¯ç”¨çš„åœ°æ–¹æ˜¯åå°„åˆ¤æ–­æ–¹æ³•çš„è¿”å›å€¼æ—¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(m.getReturnType().equals(Void.TYPE)) &#123;</span><br><span class="line">	// å¤„ç†è¿”å›å€¼ä¸º void çš„æ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†ä¹Ÿä¸æ˜¯å¿…éœ€ä½¿ç”¨Void.TYPEï¼Œä¹Ÿå¯ä»¥ç”¨void.classã€‚<br>æ€»ç»“æ¥è¯´ï¼Œå‡ ä¹å¾ˆå°‘ä¼šç”¨åˆ° Void ã€‚</p>
<p>nullæ˜¯æ‰€æœ‰å¼•ç”¨ç±»å‹çš„é»˜è®¤å€¼ï¼Œä½†æ˜¯è¦æ¾„æ¸…ä¸€äº›è¯¯è§£ï¼Œnullæ—¢ä¸æ˜¯å¯¹è±¡ä¹Ÿä¸æ˜¯ä¸€ç§ç±»å‹ï¼Œå®ƒä»…æ˜¯ä¸€ç§ç‰¹æ®Šçš„å€¼ï¼Œä½ å¯ä»¥å°†å…¶èµ‹äºˆä»»ä½•å¼•ç”¨ç±»å‹ï¼Œä½ ä¹Ÿå¯ä»¥å°†nullè½¬åŒ–æˆä»»ä½•ç±»å‹ã€‚</p>
<p>è®¿é—®ä¸€ä¸ªç±»é‡Œçš„æ–¹æ³•ï¼Œå¦‚æœç”¨nullèµ‹äºˆçš„å¯¹è±¡è®¿é—®æ™®é€šæ–¹æ³•ï¼Œä¼šNullPointerExceptionï¼Œè€Œè®¿é—®staticæ–¹æ³•ï¼Œæ²¡äº‹ï¼Œå› ä¸ºè®¿é—®é™æ€æ–¹æ³•ä¸éœ€è¦å®ä¾‹å¯¹è±¡ã€‚å› æ­¤ï¼Œé™æ€æ–¹æ³•çš„è®¿é—®ï¼Œä¸å»ºè®®ç”¨å®ä¾‹è°ƒç”¨ï¼Œç”¨ç±»è°ƒç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Main m = (Main) null;</span><br><span class="line">System.out.println(m instanceof Main); //è¿”å›false</span><br><span class="line">System.out.println(m.getClass()); //ç©ºæŒ‡é’ˆ</span><br></pre></td></tr></table></figure>

<p>voidä¸æ˜¯å‡½æ•°ï¼Œæ˜¯æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼Œvoidçš„æ„æ€æ˜¯è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œæ„æ€å°±æ˜¯æ–¹æ³•åªä¼šè¿è¡Œæ–¹æ³•ä¸­çš„è¯­å¥ï¼Œä½†æ˜¯ä¸è¿”å›ä»»ä½•ä¸œè¥¿ã€‚ java.lang.Voidæ˜¯ä¸€ç§ç±»å‹ã€‚ä¾‹å¦‚ç»™Voidå¼•ç”¨èµ‹å€¼nullã€‚é€šè¿‡Voidç±»çš„æºä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒVoidç±»å‹ä¸å¯ä»¥ç»§æ‰¿ä¸å®ä¾‹åŒ–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public final class Main &#123;</span><br><span class="line"></span><br><span class="line">    public void do1() &#123;</span><br><span class="line">        return; //è¿”å›voidï¼Œreturnå¯å†™å¯ä¸å†™</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Void do2() &#123;</span><br><span class="line">        return null; //æ­¤å¤„å¿…é¡»è¿”å›null è¿”å›å…¶ä½™ç±»å‹éƒ½ä¸å¥½ä½¿</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public final class Main &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(Void.class); //class java.lang.Void</span><br><span class="line">        System.out.println(void.class); //void</span><br><span class="line">        //ç±»ä¼¼äºä¸‹é¢çš„</span><br><span class="line">        System.out.println(Integer.class); //class java.lang.Integer</span><br><span class="line">        System.out.println(int.class); //int</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Voidæˆ‘ä»¬åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®åœ¨æ³›å‹å‡ºç°ä¹‹å‰ï¼ŒVoidä¸€èˆ¬ç”¨äºåå°„ä¹‹ä¸­ã€‚åˆ¤æ–­æ–¹æ³•è¿”å›æ˜¯å¦ä¸ºvoidã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">  public void print(String v) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  public static void main(String args[])&#123;</span><br><span class="line">    for(Method method : Test.class.getMethods()) &#123;</span><br><span class="line">      //åˆ¤æ–­è¿”å›å€¼ç±»å‹ ç”¨åˆ°äº†Voidç±»</span><br><span class="line">      if(method.getReturnType().equals(Void.TYPE)) &#123;</span><br><span class="line">        System.out.println(method.getName());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰æœ‰çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦è¿”å›å€¼çš„æŠ½åƒæ€§è®¾è®¡ï¼Œæ¯”å¦‚ä¸‹é¢è®¾è®¡çš„åˆ†å¸ƒå¼é”ï¼šRedisLock.</p>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/f641385712/article/details/80409211?utm_source=blogxgwz0">https://blog.csdn.net/f641385712/article/details/80409211?utm_source=blogxgwz0</a></p>
<h3 id="Javaä¸­åŒ…è£…ç±»å‹å’ŒåŸºæœ¬ç±»å‹çš„ä½¿ç”¨åœºæ™¯"><a href="#Javaä¸­åŒ…è£…ç±»å‹å’ŒåŸºæœ¬ç±»å‹çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="Javaä¸­åŒ…è£…ç±»å‹å’ŒåŸºæœ¬ç±»å‹çš„ä½¿ç”¨åœºæ™¯"></a>Javaä¸­åŒ…è£…ç±»å‹å’ŒåŸºæœ¬ç±»å‹çš„ä½¿ç”¨åœºæ™¯</h3><p>æœ€ç®€å•çš„ç†è§£ï¼ŒåŸºæœ¬ç±»å‹æœ‰é»˜è®¤å€¼ï¼Œè€ŒåŒ…è£…ç±»å‹åˆå§‹ä¸ºnullã€‚ç„¶åå†æ ¹æ®è¿™ä¸¤ä¸ªç‰¹æ€§è¿›è¡Œåˆ†ä¸šåŠ¡ä½¿ç”¨ï¼Œåœ¨é˜¿é‡Œå·´å·´çš„è§„èŒƒé‡Œæ‰€æœ‰çš„POJOç±»å¿…é¡»ä½¿ç”¨åŒ…è£…ç±»å‹ï¼Œè€Œåœ¨æœ¬åœ°å˜é‡æ¨èä½¿ç”¨åŸºæœ¬ç±»å‹ã€‚å®šä¹‰æ–¹æ³•çš„è¾“å…¥è¾“å‡ºå‚æ•°ç”¨åŒ…è£…ç±»å‹ã€‚Listé‡Œç”¨åŒ…è£…ç±»å‹(,å› ä¸ºListä¸­çš„æ³›å‹å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ã€‚)ï¼Œforå¾ªç¯é‡Œç”¨åŒ…è£…ç±»å‹ã€‚</p>
<p>Javaè¯­è¨€æä¾›äº†å…«ç§åŸºæœ¬ç±»å‹ã€‚å…­ç§æ•°å­—ç±»å‹ï¼ˆå››ä¸ªæ•´æ•°å‹ï¼Œä¸¤ä¸ªæµ®ç‚¹å‹ï¼‰ï¼Œä¸€ç§å­—ç¬¦ç±»å‹ï¼Œè¿˜æœ‰ä¸€ç§å¸ƒå°”å‹ã€‚<br>1ã€æ•´æ•°ï¼šåŒ…æ‹¬intã€shortã€byteã€longåˆå§‹å€¼ä¸º0ã€‚<br>2ã€æµ®ç‚¹å‹ï¼šfloatã€doubleåˆå§‹å€¼ä¸º0.0<br>3ã€å­—ç¬¦ï¼šcharåˆå§‹å€¼ä¸ºç©ºæ ¼ï¼Œå³â€™â€™ â€œï¼Œå¦‚æœè¾“å‡ºï¼Œåœ¨Consoleä¸Šæ˜¯çœ‹ä¸åˆ°æ•ˆæœçš„ã€‚<br>4ã€å¸ƒå°”ï¼šbooleanåˆå§‹å€¼ä¸ºfalse </p>
<p>åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»<br>Integer ã€Longã€Shortã€Byteã€Characterã€Doubleã€Floatã€Booleanã€BigIntegerã€BigDecimal<br>å…¶ä¸­BigIntegerã€BigDecimalæ²¡æœ‰ç›¸å¯¹åº”çš„åŸºæœ¬ç±»å‹ï¼Œä¸»è¦åº”ç”¨äºé«˜ç²¾åº¦çš„è¿ç®—ï¼ŒBigInteger æ”¯æŒä»»æ„ç²¾åº¦çš„æ•´æ•°ï¼Œ<br>BigDecimalæ”¯æŒä»»æ„ç²¾åº¦å¸¦å°æ•°ç‚¹çš„è¿ç®—ã€‚</p>
<p>åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»å‹çš„å¼‚åŒï¼š<br>1ã€åœ¨Javaä¸­ï¼Œä¸€åˆ‡çš†å¯¹è±¡ï¼Œä½†å…«å¤§åŸºæœ¬ç±»å‹å´ä¸æ˜¯å¯¹è±¡ã€‚<br>2ã€å£°æ˜æ–¹å¼çš„ä¸åŒï¼ŒåŸºæœ¬ç±»å‹æ— éœ€é€šè¿‡newå…³é”®å­—æ¥åˆ›å»ºï¼Œè€Œå°è£…ç±»å‹åˆ™éœ€newå…³é”®å­—ã€‚<br>3ã€å­˜å‚¨æ–¹å¼åŠä½ç½®çš„ä¸åŒï¼ŒåŸºæœ¬ç±»å‹æ˜¯ç›´æ¥å­˜å‚¨å˜é‡çš„å€¼ï¼Œä¿å­˜åœ¨å †æ ˆä¸­èƒ½é«˜æ•ˆçš„å­˜å–ï¼›å°è£…ç±»å‹éœ€è¦é€šè¿‡å¼•ç”¨æŒ‡å‘å®ä¾‹ï¼Œå…·ä½“çš„å®ä¾‹ä¿å­˜åœ¨å †ä¸­ï¼›<br>4ã€åˆå§‹å€¼çš„ä¸åŒï¼Œå°è£…ç±»å‹çš„åˆå§‹å€¼ä¸ºnullï¼ŒåŸºæœ¬ç±»å‹çš„çš„åˆå§‹å€¼è§†å…·ä½“çš„ç±»å‹è€Œå®šï¼Œæ¯”å¦‚intç±»å‹çš„åˆå§‹å€¼ä¸º0ï¼Œbooleanç±»å‹ä¸ºfalseï¼›<br>5ã€ä½¿ç”¨æ–¹å¼çš„ä¸åŒï¼Œæ¯”å¦‚ä¸é›†åˆç±»åˆä½œä½¿ç”¨æ—¶åªèƒ½ä½¿ç”¨åŒ…è£…ç±»å‹ã€‚<br>6ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨åŒ…è£…ç±»ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨åŸºæœ¬ç±»å‹ï¼Œçœ‹åŸºæœ¬çš„ä¸šåŠ¡æ¥å®šï¼šè¿™ä¸ªå­—æ®µå…ä¸å…è®¸nullå€¼ï¼Œå¦‚æœå…è®¸ï¼Œåˆ™å¿…ç„¶è¦ç”¨å°è£…ç±»ï¼›å¦åˆ™ï¼ŒåŸºæœ¬ç±»å‹å°±å¯ä»¥äº†ã€‚å¦‚æœç”¨åˆ°æ¯”å¦‚æ³›å‹å’Œåå°„è°ƒç”¨å‡½æ•°ï¼Œå°±éœ€è¦ç”¨åŒ…è£…ç±»ï¼ </p>
<p>è½¬è‡ª <a target="_blank" rel="noopener" href="http://t.zoukankan.com/east7-p-9887722.html">http://t.zoukankan.com/east7-p-9887722.html</a></p>
<h4 id="parseDouble-å’ŒvalueOf-æ–¹æ³•ï¼Œç±»å‹è½¬æ¢"><a href="#parseDouble-å’ŒvalueOf-æ–¹æ³•ï¼Œç±»å‹è½¬æ¢" class="headerlink" title="parseDouble()å’ŒvalueOf()æ–¹æ³•ï¼Œç±»å‹è½¬æ¢"></a>parseDouble()å’ŒvalueOf()æ–¹æ³•ï¼Œç±»å‹è½¬æ¢</h4><p>âœ…Doubleç±»parseDouble()å’ŒvalueOf()æ–¹æ³•çš„åŒºåˆ«ï¼ˆStringè½¬Doubleï¼‰</p>
<p>1ã€Double.parseDouble(java.lang.String)çš„å‚æ•°åªèƒ½æ˜¯Stringã€‚Double.valueOf()çš„å‚æ•°ç±»å‹å¯ä»¥æ˜¯æµ®ç‚¹å‹æˆ–è€…æ˜¯å­—ç¬¦ä¸²å‡å¯ã€‚</p>
<p>2ã€Double.parseDouble(java.lang.String)æŠŠæ•°å­—ç±»å‹çš„å­—ç¬¦ä¸²è½¬æ¢æˆdoubleç±»å‹ï¼Œè¿”å›æ˜¯doubleç±»å‹ã€‚å…¥å‚æ˜¯Stringã€‚<br>Double.valueOf()æ–¹æŠŠæ•°å­—ç±»å‹çš„å­—ç¬¦ä¸²è½¬æ¢æˆDoubleç±»å‹ï¼Œè¿”å›æ˜¯Doubleç±»å‹ã€‚å…¥å‚æ˜¯Stringæˆ–doubleã€‚</p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•é‡Œé¢éƒ½ä¸èƒ½æ˜¯Objectç±»å‹ï¼Œå¾—å…ˆo.toStringè½¬ä¸ºStringï¼Œå†å˜Doubleã€‚æ³¨æ„ç©ºæŒ‡é’ˆã€‚</p>
<p>âœ…Doubleè½¬String</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String s = Double.toString(1.1);  //é‡Œé¢å¯ä»¥æ˜¯doubleä¹Ÿå¯ä»¥æ˜¯Double,ä¸ºnullä¼šNPE</span><br><span class="line"></span><br><span class="line">Double d = 1.1;</span><br><span class="line">String s1 = d.toString();  //Objectçš„toStringæ–¹æ³•doubleç±»å‹ä¸èƒ½ç”¨,dä¸ºnullä¼šNPE</span><br><span class="line"></span><br><span class="line">double d1 = 1.2;</span><br><span class="line">String s1 = String.valueOf(d);  //é‡Œé¢å¯ä»¥æ˜¯doubleä¹Ÿå¯ä»¥æ˜¯Double,å¯ä»¥æ˜¯nullï¼Œnulçš„è¯è¾“å‡ºâ€œnullâ€</span><br></pre></td></tr></table></figure>

<p>âœ…å¼ºåˆ¶ç±»å‹è½¬æ¢<br>é¦–å…ˆï¼Œæ¯ä¸ªåŒ…è£…ç±»å‹éƒ½æœ‰ä¸€ä¸ªvalueOfæ–¹æ³•ï¼Œç”¨æ¥æŠŠå…¶ä»–ç±»å‹è½¬æ¢ä¸ºè‡ªå·±ç±»å‹ã€‚ä¾‹å¦‚ï¼šDouble d = Double.valueOf(â€œ1â€);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1() &#123;</span><br><span class="line">    System.out.println((double) 1 / 1000); //è¾“å‡º0.001</span><br><span class="line">    System.out.println((double) (1 / 1000)); //è¾“å‡º0.0</span><br><span class="line">    Integer integer = 1;</span><br><span class="line">    System.out.println((double) integer / 1000); //è¾“å‡º0.001</span><br><span class="line"></span><br><span class="line">    //å‘ä¸Šå–æ•´</span><br><span class="line">    double d = Math.ceil(2.3);</span><br><span class="line">    Integer i = (int) d;</span><br><span class="line">    System.out.println(i); //è¾“å‡º3</span><br><span class="line"></span><br><span class="line">    int x = 1, y = 2;</span><br><span class="line">    double z = x / y; //waring:&#x27;x / y&#x27;: integer division in floating-point context ï¼ˆæ„æ€æ˜¯è¯´è¿™æ˜¯æµ®ç‚¹æ•°çš„é™¤æ³•ï¼‰</span><br><span class="line">    System.out.println(z);  //0.0</span><br><span class="line">    double w = 1.0 * x / y;</span><br><span class="line">    System.out.println(w);  //0.5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="String-valueOf-1L-å’Œ-l-toString"><a href="#String-valueOf-1L-å’Œ-l-toString" class="headerlink" title="String.valueOf(1L)å’Œ l.toString"></a>String.valueOf(1L)å’Œ l.toString</h4><p>String.valueOf å…¥å‚æ˜¯Objectã€‚<br>String.valueOf å¦‚æœä¼ å…¥nullï¼Œè¿”å›æ˜¯â€œnullâ€å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ç©ºnullã€‚<br>null.toString() ä¼šæŠ¥ç©ºæŒ‡é’ˆã€‚<br>ä¸æ˜¯åŒ…è£…ç±»å‹çš„intï¼Œ.toString()ä¹Ÿä¸è¡Œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Long l = new Long(1L);</span><br><span class="line">String s1 = String.valueOf(l);</span><br><span class="line">System.out.println(s1);</span><br><span class="line">String s2 = l.toString();</span><br><span class="line">System.out.println(s2);</span><br><span class="line"></span><br><span class="line">l = null;</span><br><span class="line">String s3 = String.valueOf(l);</span><br><span class="line">System.out.println(s3);  //null</span><br><span class="line">String s4 = l.toString(); //NullPointerException</span><br><span class="line">System.out.println(s4);</span><br></pre></td></tr></table></figure>

<h4 id="åˆ¤æ–­å°æ•°ç²¾ç¡®åº¦"><a href="#åˆ¤æ–­å°æ•°ç²¾ç¡®åº¦" class="headerlink" title="åˆ¤æ–­å°æ•°ç²¾ç¡®åº¦"></a>åˆ¤æ–­å°æ•°ç²¾ç¡®åº¦</h4><p>å®ç°æ€è·¯ï¼šç”¨Stringçš„splitæ–¹æ³•ï¼Œå¾—åˆ°å°æ•°ç‚¹åçš„Stringï¼Œå†çœ‹å¤§å°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (&quot;1231312.12&quot;.split(&quot;\\.&quot;)[1].length()==2) &#123;</span><br><span class="line">    System.out.println(&quot;æ˜¯ä¸¤ä½å°æ•°&quot;);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ¯”è¾ƒä¸¤ä¸ªdoubleçš„å¤§å°"><a href="#æ¯”è¾ƒä¸¤ä¸ªdoubleçš„å¤§å°" class="headerlink" title="æ¯”è¾ƒä¸¤ä¸ªdoubleçš„å¤§å°"></a>æ¯”è¾ƒä¸¤ä¸ªdoubleçš„å¤§å°</h4><p>1.ç”¨bigdecimalï¼Œä¼ å…¥stringç±»å‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal bdL = new BigDecimal(&quot;1.22&quot;);</span><br><span class="line">BigDecimal bdR = new BigDecimal(&quot;1.22&quot;);</span><br><span class="line">if (bdL.compareTo(bdR) &lt; 0)</span><br><span class="line">    System.out.println(&quot;num1 &lt; num2&quot;);</span><br><span class="line">else if (bdL.compareTo(bdR) == 0)</span><br><span class="line">    System.out.println(&quot;num1 == num2&quot;);</span><br><span class="line">else</span><br><span class="line">    System.out.println(&quot;num1 &gt; num2&quot;);</span><br></pre></td></tr></table></figure>

<p>2.ä½¿ç”¨Double</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Double dL = 1.33;</span><br><span class="line">Double dR = 1.33;</span><br><span class="line">if (dL.compareTo(dR) &lt; 0)</span><br><span class="line">    System.out.println(&quot;num1 &lt; num2&quot;);</span><br><span class="line">else if (dL.compareTo(dR) == 0)</span><br><span class="line">    System.out.println(&quot;num1 == num2&quot;);</span><br><span class="line">else</span><br><span class="line">    System.out.println(&quot;num1 &gt; num2&quot;);</span><br></pre></td></tr></table></figure>

<p>3.åœ¨è¯¯å·®èŒƒå›´å†…å…è®¸ç›¸ç­‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// ä¸¤å®æ•°çš„å·®åœ¨å…è®¸çš„èŒƒå›´å†…è®¤ä¸ºç›¸ç­‰æ—¢å¯è®¤ä¸ºæ˜¯ç›¸ç­‰çš„</span><br><span class="line">Double num1 = 1.222;</span><br><span class="line">Double num2 = 1.222;</span><br><span class="line">if (num1 - num2 &gt; 0.000001)</span><br><span class="line">    System.out.println(&quot;num1 &gt; num2&quot;);</span><br><span class="line">else if (num1 - num2 &lt; -0.0000001)</span><br><span class="line">    System.out.println(&quot;num1 &lt; num2&quot;);</span><br><span class="line">else</span><br><span class="line">    System.out.println(&quot;num1 == num2&quot;);</span><br></pre></td></tr></table></figure>

<p>4.è½¬æ¢æˆå­—ç¬¦ä¸²</p>
<p>å¯ä»¥å°†doubleæ•°æ®è½¬æ¢æˆstringç„¶åå€ŸåŠ©stringçš„compareToæ–¹æ³•æ¥é—´æ¥å®ç°æ¯”è¾ƒä¸¤ä¸ªdoubleæ•°æ®æ˜¯å¦ç›¸ç­‰ã€‚æ³¨æ„è¿™ç§æ–¹æ³•åªé€‚ç”¨äºæ¯”è¾ƒç²¾åº¦ç›¸åŒçš„æ•°æ®ï¼Œå¹¶ä¸”æ˜¯åªèƒ½ç”¨äºæ¯”è¾ƒæ­£æ•°çš„å¤§å°ï¼Œè´Ÿæ•°æ¯”è¾ƒç»“æœå¼‚å¸¸ï¼Œä¸è¿‡å¯ä»¥ç”¨äºæ¯”è¾ƒä¸¤æ•°æ˜¯å¦ç›¸ç­‰ï¼Œæ­¤æ—¶æ­£è´Ÿæ•°å¯¹ç»“æœæ²¡æœ‰å½±å“ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String strL = String.valueOf(num1);</span><br><span class="line">String strR = String.valueOf(num2);</span><br><span class="line">if (strL.compareTo(strR) &lt; 0)</span><br><span class="line">    System.out.println(&quot;num1 &lt; num2&quot;);</span><br><span class="line">else if (strL.compareTo(strR) == 0)</span><br><span class="line">    System.out.println(&quot;num1 == num2&quot;);</span><br><span class="line">else</span><br><span class="line">    System.out.println(&quot;num1 &gt; num2&quot;);</span><br></pre></td></tr></table></figure>

<p>5.ä½¿ç”¨doubleToLongBits()æ–¹æ³•</p>
<p>ä½¿ç”¨sunæä¾›çš„Double.doubleToLongBits()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥å°†doubleè½¬æ¢æˆlongå‹æ•°æ®ï¼Œä»è€Œå¯ä»¥ä½¿doubleæŒ‰ç…§longçš„æ–¹æ³•ï¼ˆ&lt;, &gt;, ==ï¼‰åˆ¤æ–­æ˜¯å¦å¤§å°å’Œæ˜¯å¦ç›¸ç­‰ï¼Œä½†æ˜¯ï¼Œè¿™ç§åŠæ³•è¿˜æ˜¯åªèƒ½ç”¨äºæ¯”è¾ƒæ­£æ•°ï¼Œè´Ÿæ•°ç»“æœå¼‚å¸¸ï¼Œæ¯”è¾ƒä¸¤æ•°ç›¸ç­‰ä¸å¦æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// ä½¿ç”¨ä½¿ç”¨sunæä¾›çš„Double.doubleToLongBits()æ–¹æ³•</span><br><span class="line">long lL = Double.doubleToRawLongBits(num1);</span><br><span class="line">long lR = Double.doubleToRawLongBits(num2);</span><br><span class="line">System.out.println(lL + &quot;:&quot; + lR);</span><br><span class="line">if (lL &lt; lR)</span><br><span class="line">    System.out.println(&quot;num1 &lt; num2&quot;);</span><br><span class="line">else if (lL == lR)</span><br><span class="line">    System.out.println(&quot;num1 == num2&quot;);</span><br><span class="line">else</span><br><span class="line">    System.out.println(&quot;num1 &gt; num2&quot;);</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_49217297/article/details/124969742">https://blog.csdn.net/qq_49217297/article/details/124969742</a></p>
<h4 id="ä¿ç•™ä¸¤ä½å°æ•°"><a href="#ä¿ç•™ä¸¤ä½å°æ•°" class="headerlink" title="ä¿ç•™ä¸¤ä½å°æ•°"></a>ä¿ç•™ä¸¤ä½å°æ•°</h4><p>1ã€ä½¿ç”¨java.math.BigDecimalï¼Œå››èˆäº”å…¥çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Double value = 1.2355;</span><br><span class="line">BigDecimal bd = new BigDecimal(value);</span><br><span class="line">bd = bd.setScale(2, RoundingMode.HALF_UP);</span><br><span class="line">System.out.println(bd.toString());</span><br><span class="line">System.out.println(bd.doubleValue());</span><br></pre></td></tr></table></figure>

<p>2ã€ä½¿ç”¨DecimalFormat,ä¿ç•™å°æ•°ç‚¹åä¸¤ä½ï¼Œå››èˆäº”å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DecimalFormat df = new DecimalFormat(&quot;0.00&quot;);</span><br><span class="line">df.setRoundingMode(RoundingMode.HALF_UP);</span><br><span class="line">System.out.println(df.format(value));</span><br></pre></td></tr></table></figure>

<p>3ã€ä½¿ç”¨NumberFormat,ä¿ç•™å°æ•°ç‚¹åä¸¤ä½ï¼Œå››èˆäº”å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NumberFormat nf = NumberFormat.getNumberInstance();</span><br><span class="line">//å¦‚æœä¸è¿™ä¹ˆåšï¼Œé‚£ä¹ˆå½“valueçš„å€¼æ˜¯100.00çš„æ—¶å€™è¿”å›100</span><br><span class="line">nf.setMaximumFractionDigits(2);</span><br><span class="line">nf.setMinimumFractionDigits(2);</span><br><span class="line">nf.setRoundingMode(RoundingMode.HALF_UP);</span><br><span class="line">//å¦‚æœæƒ³è¾“å‡ºçš„æ ¼å¼ç”¨é€—å·éš”å¼€ï¼Œå¯ä»¥è®¾ç½®æˆtrue</span><br><span class="line">nf.setGroupingUsed(false);</span><br><span class="line">System.out.println(nf.format(value));</span><br></pre></td></tr></table></figure>

<p>4ã€ä½¿ç”¨java.util.Formatter,ä¿ç•™å°æ•°ç‚¹åä¸¤ä½ï¼Œå››èˆäº”å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String s = new Formatter().format(&quot;%.2f&quot;, value).toString();</span><br><span class="line">System.out.println(s);</span><br></pre></td></tr></table></figure>

<p>5ã€ä½¿ç”¨String.formatæ¥å®ç°ï¼Œå››èˆäº”å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(String.format(&quot;%.2f&quot;, value));</span><br></pre></td></tr></table></figure>

<p>å…­ã€é€šè¿‡è¿ç®—ï¼Œä¸æ˜¯å››èˆäº”å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">long l =(long)(value*100) ;</span><br><span class="line">double d = l/100D;</span><br><span class="line">System.out.println(d);</span><br></pre></td></tr></table></figure>

<p>Javaä¿ç•™ä¸¤ä½å°æ•°çš„å‡ ç§å†™æ³•æ€»ç»“ï¼š<br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2155412">https://cloud.tencent.com/developer/article/2155412</a></p>
<h4 id="intçš„æœ€å¤§æœ€å°å€¼"><a href="#intçš„æœ€å¤§æœ€å°å€¼" class="headerlink" title="intçš„æœ€å¤§æœ€å°å€¼"></a>intçš„æœ€å¤§æœ€å°å€¼</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(Integer.MIN_VALUE); //-2147483648</span><br><span class="line">System.out.println(Integer.MAX_VALUE); //2147483647</span><br><span class="line">System.out.println(-Integer.MIN_VALUE); //-2147483648  Numeric overflow in expression</span><br></pre></td></tr></table></figure>

<p>32 ä½çš„æœ‰ç¬¦å·æ•´æ•°çš„èŒƒå›´ [âˆ’2^31,  2^31 âˆ’ 1]</p>
<p>é—®é¢˜ï¼šä¸ºä»€ä¹ˆ-Integer.MIN_VALUEçš„ç»“æœä¼šæ˜¯-2147483648<br>å› ä¸ºå‡ºç°äº†æº¢å‡ºçš„é—®é¢˜ï¼Œæ•´æ•°ç”¨äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºï¼Œæœ€é«˜ä½æ˜¯ç¬¦å·ä¸ºï¼Œ0æ­£æ•°ï¼Œ1è´Ÿæ•°ã€‚<br>MIN_VALUEçš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š100000â€¦.<br>è´Ÿæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºè¿›è¡Œå–åå†åŠ 1ï¼Œå°±å¾—åˆ°ç»å¯¹å€¼ã€‚<br>ä»ç»å¯¹å€¼åˆ°è´Ÿæ•°äºŒè¿›åˆ¶ï¼šç»å¯¹å€¼äºŒè¿›åˆ¶ï¼Œå–åï¼Œå†åŠ 1å¾—åˆ°ã€‚</p>
<p>äºŒè¿›åˆ¶è¡¥ç çš„å‡ºç°æ˜¯ä¸ºäº†æ–¹ä¾¿è´Ÿæ•°çš„åŠ å‡è¿ç®—ã€‚å‡æ³•å¯ä»¥é€šè¿‡åŠ ä¸Šå¯¹åº”æ­£æ•°çš„è¡¥ç æ¥å®ç°ã€‚</p>
<p>Integer.MIN_VALUEå–è´Ÿçš„è¿‡ç¨‹ï¼š<br>1.MIN_VALUEçš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š100000â€¦.æ¯ä¸€ä½å–åï¼Œå¾—åˆ°01111â€¦<br>2.ç„¶åå°†ä¸Šè¿°ç»“æœ+1ï¼Œçš„åˆ°100000â€¦ è¿˜æ˜¯è‡ªå·±</p>
<p>æ­£æ•°çš„è¡¥ç ç­‰äºå®ƒçš„åŸç ï¼›è´Ÿæ•°çš„è¡¥ç ç­‰äºåç +1ã€‚</p>
<h3 id="BigDecimal"><a href="#BigDecimal" class="headerlink" title="BigDecimal"></a>BigDecimal</h3><p>ä½¿ç”¨åœºæ™¯ï¼šæ¯”è¾ƒç²¾ç¡®çš„æ•°å­—çš„åŠ å‡æ³•ã€å°æ•°çš„å››èˆäº”å…¥</p>
<p>é¦–å…ˆï¼Œæµ®ç‚¹æ•°ä¸ºä»€ä¹ˆä¸å‡†ç¡®ï¼Ÿ<br>ç å†œåœ¨ç¨‹åºé‡Œå†™çš„10è¿›åˆ¶å°æ•°ï¼Œè®¡ç®—æœºå†…éƒ¨æ— æ³•ç”¨äºŒè¿›åˆ¶çš„å°æ•°æ¥ç²¾ç¡®çš„è¡¨è¾¾ã€‚<br>å¯¹äºäºŒè¿›åˆ¶å°æ•°ï¼Œå°æ•°ç‚¹å³è¾¹èƒ½è¡¨è¾¾çš„å€¼æ˜¯ 1/2, 1/4, 1/8, 1/16, 1/32, 1/64, 1/128 â€¦ 1/(2^nï¼‰</p>
<p>è¯•ä¸€è¯•å¦‚ä½•è¡¨è¾¾åè¿›åˆ¶çš„ 0.2 å§ã€‚</p>
<p>0.01 = 1/4 = 0.25 ,å¤ªå¤§</p>
<p>0.001 =1/8 = 0.125 , åˆå¤ªå°</p>
<p>0.0011 = 1/8 + 1/16 = 0.1875 , é€¼è¿‘0.2äº†</p>
<p>0.00111 = 1/8 + 1/16 + 1/32 = 0.21875 , åˆå¤§äº†</p>
<p>0.001101 = 1/8+ 1/16 + 1/64 = 0.203125 è¿˜æ˜¯å¤§</p>
<p>0.0011001 = 1/8 + 1/16 + 1/128 = 0.1953125 è¿™ç»“æœä¸é”™</p>
<p>0.00110011 = 1/8+1/16+1/128+1/256 = 0.19921875<br>å·²ç»å¾ˆé€¼è¿‘äº†ï¼Œ å°±è¿™æ ·å§ã€‚</p>
<p>è¿™å°±æ˜¯ç”¨äºŒè¿›åˆ¶å°æ•°æ²¡æ³•ç²¾ç¡®è¡¨è¾¾10è¿›åˆ¶å°æ•°çš„å«ä¹‰ã€‚<br>æ ¹æœ¬åŸå› æ˜¯:åè¿›åˆ¶å€¼é€šå¸¸æ²¡æœ‰å®Œå…¨ç›¸åŒçš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼;åè¿›åˆ¶æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼å¯èƒ½ä¸ç²¾ç¡®ã€‚åªèƒ½æ— é™æ¥è¿‘äºé‚£ä¸ªå€¼</p>
<p>ã€ŠEffective Javaã€‹åœ¨ç¬¬48æ¡æ¨èâ€œä½¿ç”¨BigDecimalæ¥åšç²¾ç¡®è¿ç®—â€ã€‚</p>
<hr>
<p>floatå’Œdoubleç±»å‹çš„ä¸»è¦è®¾è®¡ç›®æ ‡æ˜¯ä¸ºäº†ç§‘å­¦è®¡ç®—å’Œå·¥ç¨‹è®¡ç®—ã€‚ä»–ä»¬æ‰§è¡ŒäºŒè¿›åˆ¶æµ®ç‚¹è¿ç®—ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨å¹¿åŸŸæ•°å€¼èŒƒå›´ä¸Šæä¾›è¾ƒä¸ºç²¾ç¡®çš„å¿«é€Ÿè¿‘ä¼¼è®¡ç®—è€Œç²¾å¿ƒè®¾è®¡çš„ã€‚ç„¶è€Œï¼Œå®ƒä»¬æ²¡æœ‰æä¾›å®Œå…¨ç²¾ç¡®çš„ç»“æœï¼Œæ‰€ä»¥ä¸åº”è¯¥è¢«ç”¨äºè¦æ±‚ç²¾ç¡®ç»“æœçš„åœºåˆã€‚ä½†æ˜¯ï¼Œå•†ä¸šè®¡ç®—å¾€å¾€è¦æ±‚ç»“æœç²¾ç¡®ï¼Œè¿™æ—¶å€™BigDecimalå°±æ´¾ä¸Šå¤§ç”¨åœºå•¦ã€‚</p>
<p>Javaåœ¨java.mathåŒ…ä¸­æä¾›çš„APIç±»BigDecimalï¼Œç”¨æ¥å¯¹è¶…è¿‡16ä½æœ‰æ•ˆä½çš„æ•°è¿›è¡Œç²¾ç¡®çš„è¿ç®—ã€‚åŒç²¾åº¦æµ®ç‚¹å‹å˜é‡doubleå¯ä»¥å¤„ç†16ä½æœ‰æ•ˆæ•°ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦å¯¹æ›´å¤§æˆ–è€…æ›´å°çš„æ•°è¿›è¡Œè¿ç®—å’Œå¤„ç†ã€‚floatå’Œdoubleåªèƒ½ç”¨æ¥åšç§‘å­¦è®¡ç®—æˆ–è€…æ˜¯å·¥ç¨‹è®¡ç®—ï¼Œåœ¨å•†ä¸šè®¡ç®—ä¸­è¦ç”¨java.math.BigDecimalã€‚BigDecimalæ‰€åˆ›å»ºçš„æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ä¼ ç»Ÿçš„+ã€-ã€*ã€/ç­‰ç®—æœ¯è¿ç®—ç¬¦ç›´æ¥å¯¹å…¶å¯¹è±¡è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œè€Œå¿…é¡»è°ƒç”¨å…¶ç›¸å¯¹åº”çš„æ–¹æ³•ã€‚</p>
<hr>
<h4 id="âœ…BigDecimalæ„é€ æ–¹æ³•ï¼š"><a href="#âœ…BigDecimalæ„é€ æ–¹æ³•ï¼š" class="headerlink" title="âœ…BigDecimalæ„é€ æ–¹æ³•ï¼š"></a>âœ…BigDecimalæ„é€ æ–¹æ³•ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public BigDecimal(double val)    å°†doubleè¡¨ç¤ºå½¢å¼è½¬æ¢ä¸ºBigDecimal *ä¸å»ºè®®ä½¿ç”¨</span><br><span class="line">public BigDecimal(int val)ã€€ã€€å°†intè¡¨ç¤ºå½¢å¼è½¬æ¢æˆBigDecimal</span><br><span class="line">public BigDecimal(long)    åˆ›å»ºä¸€ä¸ªå…·æœ‰å‚æ•°æ‰€æŒ‡å®šé•¿æ•´æ•°å€¼çš„å¯¹è±¡ã€‚ </span><br><span class="line">public BigDecimal(String val)ã€€ã€€å°†Stringè¡¨ç¤ºå½¢å¼è½¬æ¢æˆBigDecimal *æ¨èä½¿ç”¨</span><br></pre></td></tr></table></figure>
<p>âš ï¸BigDecimal ä¸åƒDoubleä¸€æ ·å¯ä»¥ç›´æ¥=1.1ã€‚ BigDecimaléœ€è¦newä¸ªå¯¹è±¡ï¼Œæˆ–è€…ï¼šBigDecimal.ZERO è¡¨ç¤º0.0ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨Doubleå…¥å‚ï¼Ÿ<br>BigDecimal bDouble = new BigDecimal(2.3);<br>æœ€ç»ˆè¾“å‡ºçš„æ•°æ˜¯ï¼š2.29999999â€¦.</p>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</p>
<p>JDKçš„æè¿°ï¼š<br>1ã€å‚æ•°ç±»å‹ä¸ºdoubleçš„æ„é€ æ–¹æ³•çš„ç»“æœæœ‰ä¸€å®šçš„ä¸å¯é¢„çŸ¥æ€§ã€‚æœ‰äººå¯èƒ½è®¤ä¸ºåœ¨Javaä¸­å†™å…¥newBigDecimal(0.1)æ‰€åˆ›å»ºçš„BigDecimalæ­£å¥½ç­‰äº 0.1ï¼ˆéæ ‡åº¦å€¼ 1ï¼Œå…¶æ ‡åº¦ä¸º 1ï¼‰ï¼Œä½†æ˜¯å®ƒå®é™…ä¸Šç­‰äº0.1000000000000000055511151231257827021181583404541015625ã€‚è¿™æ˜¯å› ä¸º0.1æ— æ³•å‡†ç¡®åœ°è¡¨ç¤ºä¸º doubleï¼ˆæˆ–è€…è¯´å¯¹äºè¯¥æƒ…å†µï¼Œä¸èƒ½è¡¨ç¤ºä¸ºä»»ä½•æœ‰é™é•¿åº¦çš„äºŒè¿›åˆ¶å°æ•°ï¼‰ã€‚è¿™æ ·ï¼Œä¼ å…¥åˆ°æ„é€ æ–¹æ³•çš„å€¼ä¸ä¼šæ­£å¥½ç­‰äº 0.1ï¼ˆè™½ç„¶è¡¨é¢ä¸Šç­‰äºè¯¥å€¼ï¼‰ã€‚</p>
<p>2ã€å¦ä¸€æ–¹é¢ï¼ŒString æ„é€ æ–¹æ³•æ˜¯å®Œå…¨å¯é¢„çŸ¥çš„ï¼šå†™å…¥ newBigDecimal(â€œ0.1â€) å°†åˆ›å»ºä¸€ä¸ª BigDecimalï¼Œå®ƒæ­£å¥½ç­‰äºé¢„æœŸçš„ 0.1ã€‚å› æ­¤ï¼Œæ¯”è¾ƒè€Œè¨€ï¼Œé€šå¸¸å»ºè®®ä¼˜å…ˆä½¿ç”¨Stringæ„é€ æ–¹æ³•ã€‚</p>
<p>å½“doubleå¿…é¡»ç”¨ä½œBigDecimalçš„æºæ—¶ï¼Œè¯·ä½¿ç”¨Double.toString(double)è½¬æˆStringï¼Œç„¶åä½¿ç”¨Stringæ„é€ æ–¹æ³•ï¼Œæˆ–ä½¿ç”¨BigDecimalçš„é™æ€æ–¹æ³•valueOf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal bDouble1 = BigDecimal.valueOf(2.3); //æ–¹æ³•ä¸èƒ½ä¼ null</span><br><span class="line">BigDecimal bDouble2 = new BigDecimal(Double.toString(2.3));</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="âœ…BigDecimalç”¨æ³•ï¼š"><a href="#âœ…BigDecimalç”¨æ³•ï¼š" class="headerlink" title="âœ…BigDecimalç”¨æ³•ï¼š"></a>âœ…BigDecimalç”¨æ³•ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        BigDecimal a = new BigDecimal(&quot;4.5&quot;);</span><br><span class="line">        BigDecimal b = new BigDecimal(&quot;1.5&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;a + b =&quot; + a.add(b));</span><br><span class="line">        System.out.println(&quot;a - b =&quot; + a.subtract(b));</span><br><span class="line">        System.out.println(&quot;a * b =&quot; + a.multiply(b));</span><br><span class="line">        System.out.println(&quot;a / b =&quot; + a.divide(b));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‹BigDecimalé™¤æ³•å¯èƒ½å‡ºç°ä¸èƒ½æ•´é™¤çš„æƒ…å†µï¼Œæ¯”å¦‚ 4.5/1.3ï¼Œè¿™æ—¶ä¼šæŠ¥é”™java.lang.ArithmeticException: Non-terminating decimal expansion; no exact representable decimal result.</p>
<p>å…¶å®divideæ–¹æ³•æœ‰å¯ä»¥ä¼ ä¸‰ä¸ªå‚æ•°</p>
<p><code>public BigDecimal divide(BigDecimal divisor, int scale, int roundingMode) </code><br>ç¬¬ä¸€å‚æ•°è¡¨ç¤ºé™¤æ•°ï¼Œ ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå°æ•°ç‚¹åä¿ç•™ä½æ•°ï¼Œ<br>ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºèˆå…¥æ¨¡å¼ï¼Œåªæœ‰åœ¨ä½œé™¤æ³•è¿ç®—æˆ–å››èˆäº”å…¥æ—¶æ‰ç”¨åˆ°èˆå…¥æ¨¡å¼ï¼Œæœ‰ä¸‹é¢è¿™å‡ ç§:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ROUND_CEILING    //å‘æ­£æ— ç©·æ–¹å‘èˆå…¥</span><br><span class="line">ROUND_DOWN    //å‘é›¶æ–¹å‘èˆå…¥</span><br><span class="line">ROUND_FLOOR    //å‘è´Ÿæ— ç©·æ–¹å‘èˆå…¥</span><br><span class="line">ROUND_HALF_DOWN    //å‘ï¼ˆè·ç¦»ï¼‰æœ€è¿‘çš„ä¸€è¾¹èˆå…¥ï¼Œé™¤éä¸¤è¾¹ï¼ˆçš„è·ç¦»ï¼‰æ˜¯ç›¸ç­‰,å¦‚æœæ˜¯è¿™æ ·ï¼Œå‘ä¸‹èˆå…¥, ä¾‹å¦‚1.55 ä¿ç•™ä¸€ä½å°æ•°ç»“æœä¸º1.5</span><br><span class="line">ROUND_HALF_EVEN    //å‘ï¼ˆè·ç¦»ï¼‰æœ€è¿‘çš„ä¸€è¾¹èˆå…¥ï¼Œé™¤éä¸¤è¾¹ï¼ˆçš„è·ç¦»ï¼‰æ˜¯ç›¸ç­‰,å¦‚æœæ˜¯è¿™æ ·ï¼Œå¦‚æœä¿ç•™ä½æ•°æ˜¯å¥‡æ•°ï¼Œä½¿ç”¨ROUND_HALF_UPï¼Œå¦‚æœæ˜¯å¶æ•°ï¼Œä½¿ç”¨ROUND_HALF_DOWN</span><br><span class="line">ROUND_HALF_UP    //å‘ï¼ˆè·ç¦»ï¼‰æœ€è¿‘çš„ä¸€è¾¹èˆå…¥ï¼Œé™¤éä¸¤è¾¹ï¼ˆçš„è·ç¦»ï¼‰æ˜¯ç›¸ç­‰,å¦‚æœæ˜¯è¿™æ ·ï¼Œå‘ä¸Šèˆå…¥, 1.55ä¿ç•™ä¸€ä½å°æ•°ç»“æœä¸º1.6</span><br><span class="line">ROUND_UNNECESSARY    //è®¡ç®—ç»“æœæ˜¯ç²¾ç¡®çš„ï¼Œä¸éœ€è¦èˆå…¥æ¨¡å¼</span><br><span class="line">ROUND_UP    //å‘è¿œç¦»0çš„æ–¹å‘èˆå…¥</span><br><span class="line"></span><br><span class="line">å››èˆäº”å…¥é‡‡ç”¨ ROUND_HALF_UP</span><br></pre></td></tr></table></figure>

<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal b1 = new BigDecimal(&quot;1000&quot;);  </span><br><span class="line">BigDecimal b2 = new BigDecimal(&quot;100&quot;);  </span><br><span class="line">System.out.println(b1.divide(b2, 2, BigDecimal.ROUND_HALF_UP).toString());</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">10.00,ç»“æœè¿”å›ä¸€ä¸ªBigDecimal</span><br></pre></td></tr></table></figure>


<p>å¯¹BigDecimalè¿›è¡Œæˆªæ–­å’Œå››èˆäº”å…¥å¯ç”¨setScaleæ–¹æ³•:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        BigDecimal a = new BigDecimal(&quot;4.5635&quot;);</span><br><span class="line"></span><br><span class="line">        a = a.setScale(3, RoundingMode.HALF_UP);    //ä¿ç•™3ä½å°æ•°ï¼Œä¸”å››èˆäº”å…¥</span><br><span class="line">        a = a.setScale(3, BigDecimal.ROUND_HALF_UP);    //è¿™ä¸ªä¹Ÿè¡Œ</span><br><span class="line">        System.out.println(a);</span><br><span class="line"></span><br><span class="line">        Double d = a.doubleValue();  //è½¬ä¸ºdouble/Doubleç±»å‹</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>BigDecimaléƒ½æ˜¯ä¸ä¸»åŠ¨å˜çš„ï¼ˆimmutableï¼‰çš„ï¼Œåœ¨è¿›è¡Œæ¯ä¸€æ­¥è¿ç®—æ—¶ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨åšåŠ å‡ä¹˜é™¤è¿ç®—æ—¶åƒä¸‡è¦ä¿å­˜æ“ä½œåçš„å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        BigDecimal a = new BigDecimal(&quot;4.5&quot;);</span><br><span class="line">        BigDecimal b = new BigDecimal(&quot;1.5&quot;);</span><br><span class="line">        a.add(b);</span><br><span class="line"></span><br><span class="line">        System.out.println(a);  //è¾“å‡º4.5. åŠ å‡ä¹˜é™¤æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„BigDecimalå¯¹è±¡ï¼ŒåŸæ¥çš„aä¸å˜</span><br><span class="line">        a = a.add(b);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/YangJavaer/p/6056394.html">https://www.cnblogs.com/YangJavaer/p/6056394.html</a></p>
<hr>
<h4 id="âœ…BigDecimalæ¯”è¾ƒ"><a href="#âœ…BigDecimalæ¯”è¾ƒ" class="headerlink" title="âœ…BigDecimalæ¯”è¾ƒ"></a>âœ…BigDecimalæ¯”è¾ƒ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int flag = bigdemical.compareTo(bigdemical1)ã€‚</span><br><span class="line"></span><br><span class="line">flag = -1ï¼Œè¡¨ç¤ºbigdemicalå°äºbigdemical1ã€‚</span><br><span class="line"></span><br><span class="line">flag =0ï¼Œè¡¨ç¤ºbigdemicalç­‰äºbigdemical1ã€‚</span><br><span class="line"></span><br><span class="line">flag =1ï¼Œè¡¨ç¤ºbigdemicalå¤§äºbigdemical1ã€‚</span><br><span class="line"></span><br><span class="line">å®é™…ä¸­ç›´æ¥è·Ÿ0æ¯”è¾ƒå°±å¯ä»¥äº†ï¼Œåˆ«è·Ÿ-1æˆ–è€…1æ¯”è¾ƒã€‚</span><br></pre></td></tr></table></figure>

<p>BigDecimalçš„equalsæ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal a=BigDecimal.valueOf(1.0);</span><br><span class="line">BigDecimal b=BigDecimal.valueOf(1.000);</span><br><span class="line">System.out.println(a.equals(b));  //true</span><br><span class="line"></span><br><span class="line">BigDecimal c = new BigDecimal(&quot;10.00&quot;);</span><br><span class="line">BigDecimal d = new BigDecimal(&quot;10&quot;);</span><br><span class="line">BigDecimal e = new BigDecimal(10.00);</span><br><span class="line">System.out.println(c.equals(d));  //false</span><br><span class="line">System.out.println(c.equals(e));  //false</span><br><span class="line">// equalsæ˜¯æ¯”è¾ƒå†…å®¹ï¼Œâ€œ1.0â€å’Œâ€œ1.000â€ä¸ä¸€æ ·.</span><br><span class="line"></span><br><span class="line">//toPlainStringå†equals</span><br><span class="line">System.out.println(c.toPlainString().equals(d.toPlainString())); //false</span><br><span class="line">System.out.println(c.toPlainString().equals(e.toPlainString())); //false</span><br><span class="line"></span><br><span class="line">//longValueæ–¹å¼</span><br><span class="line">System.out.println(c.longValue() == d.longValue()); //true</span><br><span class="line">System.out.println(c.longValue() == e.longValue()); //true</span><br><span class="line"></span><br><span class="line">//compareTo</span><br><span class="line">System.out.println(c.compareTo(d) == 0); //true</span><br><span class="line">System.out.println(c.compareTo(e) == 0); //true</span><br><span class="line"></span><br><span class="line">BigDecimal f = new BigDecimal(&quot;10.100001&quot;);</span><br><span class="line">BigDecimal g = new BigDecimal(10.100001);</span><br><span class="line">System.out.println(f.compareTo(g) == 0); //false</span><br><span class="line">// è¿™æ˜¯å› ä¸ºæœ¬èº«Doubleä¼ å‚çš„æ„é€ å°±ä¸å‡†ï¼Œçœ‹ä¸Šé¢</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.iteye.com/blog/bijian1013-2366549">https://www.iteye.com/blog/bijian1013-2366549</a></p>
<hr>
<h4 id="âœ…mysqlçš„decimal"><a href="#âœ…mysqlçš„decimal" class="headerlink" title="âœ…mysqlçš„decimal"></a>âœ…mysqlçš„decimal</h4><p>decimal:æ•°å­—å‹ï¼Œä¸å­˜åœ¨ç²¾åº¦æŸå¤±ï¼Œå¸¸ç”¨äºé“¶è¡Œå¸ç›®è®¡ç®—</p>
<p><code>distance decimal(10,1) not null default 0.0 comment &#39;è·ç¦»&#39;</code></p>
<p>decimal(P,m)<br>Pçš„å–å€¼èŒƒå›´æ˜¯1â€“65ï¼Œè¡¨ç¤ºæ•´æ•°ä½æ•°<br>Mçš„å–å€¼æ˜¯0â€“30.è¡¨ç¤ºå°æ•°ä½<br>ç²¾åº¦Mæœ€å¤§ä¸º30ï¼Œè¡¨ç¤ºæœ‰30ä½å°æ•°ã€‚<br>decimalæ•´æ•°å’Œå°æ•°ä½å‡ä¸å†™ é»˜è®¤ä¸ºdecimal(10,0)<br>è‹¥å°æ•°ä½ä¸å†™é»˜è®¤çš„å°æ•°ä½ä¸º0ã€‚</p>
<p>decimal(22,6ï¼‰è¡¨ç¤ºæ•´æ•°ä½16ä¸ªå°æ•°ä½6ä¸ªã€‚</p>
<p>decimal è¿˜å¯ä»¥å­˜å‚¨è¶…è¿‡bigintçš„æ•´æ•°ä½ï¼Œæœ€å¤§å­˜å‚¨65ä½çš„æ•´æ•°ç±»å‹ã€‚<br>è¿˜å¯ä»¥å­˜å‚¨å¯¹åº”ä½æ•°çš„è´Ÿæ•°</p>
<p>ä¾‹ï¼šdecimal(2,1)ï¼Œæ­¤æ—¶ï¼Œæ’å…¥æ•°æ®â€œ12.3â€ã€â€œ12â€ç­‰ä¼šå‡ºç°â€œæ•°æ®æº¢å‡ºé”™è¯¯â€çš„å¼‚å¸¸ï¼›æ’å…¥â€œ1.23â€æˆ–â€œ1.2345â€¦â€ä¼šè‡ªåŠ¨å››èˆäº”å…¥æˆâ€œ1.2â€ï¼›æ’å…¥â€œ2â€ä¼šè‡ªåŠ¨è¡¥æˆâ€œ2.0â€ï¼Œä»¥ç¡®ä¿2ä½çš„æœ‰æ•ˆé•¿åº¦ï¼Œå…¶ä¸­åŒ…å«1ä½å°æ•°ã€‚<br>å½“ç”¨ intç±»å‹ä¼šæœ‰æº¢å‡ºæ—¶ï¼Œå¯ä»¥ç”¨ decimal ç±»å‹è¿›è¡Œå¤„ç†ï¼ŒæŠŠç»“æœå¯ä»¥ç”¨ convert æˆ–æ˜¯ cast è¿›è¡Œè½¬æ¢ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/chenpp666/article/details/124372731">https://blog.csdn.net/chenpp666/article/details/124372731</a></p>
<h3 id="javaä½è¿ç®—"><a href="#javaä½è¿ç®—" class="headerlink" title="javaä½è¿ç®—"></a>javaä½è¿ç®—</h3><p>1ã€å·¦ç§»( &lt;&lt; )  å‘å·¦ç§»åŠ¨ï¼Œä½ä½è¡¥0<br>2ã€å³ç§»( &gt;&gt; )  å‘å³ç§»åŠ¨ï¼Œé«˜ä½è¡¥0<br>3ã€æ— ç¬¦å·å³ç§»( &gt;&gt;&gt; )   æ­£æ•°å³ç§»ï¼Œé«˜ä½è¡¥0ï¼Œè´Ÿæ•°å³ç§»ï¼Œé«˜ä½è¡¥1ï¼Œå½“è´Ÿæ•°ä½¿ç”¨æ— ç¬¦å·å³ç§»æ—¶ï¼Œç”¨0è¿›è¡Œè¡¥ä½(è‡ªç„¶è€Œç„¶çš„ï¼Œå°±ç”±è´Ÿæ•°å˜æˆäº†æ­£æ•°äº†)<br>4ã€ä¸( &amp; )  éƒ½ä¸º1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0<br>5ã€æˆ–( | )  ä¸€ä¸ªæ˜¯1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0<br>6ã€å¼‚æˆ–( ^ )  ä¸¤ä¸ªç›¸åï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0<br>7ã€é( ~ ) ä¸€å…ƒæ“ä½œç¬¦   å–ç›¸åã€‚</p>
<h3 id="Autowiredæ¥å£è¿˜æ˜¯ç°å®ç±»ï¼Ÿ"><a href="#Autowiredæ¥å£è¿˜æ˜¯ç°å®ç±»ï¼Ÿ" class="headerlink" title="Autowiredæ¥å£è¿˜æ˜¯ç°å®ç±»ï¼Ÿ"></a>Autowiredæ¥å£è¿˜æ˜¯ç°å®ç±»ï¼Ÿ</h3><p>ç­”æ¡ˆï¼šæ¥å£å¥½</p>
<p>å½“å®ç°ç±»å”¯ä¸€æ—¶ï¼Œè¡¨é¢ä¸Šæ³¨å…¥æ¥å£ï¼Œå…¶å®æ³¨å…¥å®ç°ç±»<br>å½“å®ç°ç±»å¤šä¸ªæ—¶ï¼Œé€šè¿‡@Service(â€œmenuService1â€)æŒ‡å®šå®ç°ç±»</p>
<p>è§£æï¼š<br>è¿™ä¸ªå…¶å®æ˜¯åˆ›å»ºäº†å®ç°ç±»çš„å¯¹è±¡ä½†å¼•ç”¨äº†æ¥å£ç±»å‹ï¼Œ<br>å³ â€œInjectionDao injectionDao = new InjectionDaoImpl ()â€, æ˜¯ Java å¤šæ€æ€§ï¼ˆå‘ä¸Šè½¬å‹ï¼‰çš„ä¸€ç§åº”ç”¨ã€‚<br>åœ¨å®ç°ç±»å¤„åŠ  @Repository æ³¨è§£ï¼Œæ„æ€å°±æ˜¯ new InjectionDaoImpl (),</p>
<p>è€Œåœ¨ InjectionServiceImpl ä¸­å®šä¹‰å±æ€§ InjectionDAO injectionDAO å°±æ˜¯å°† new å‡ºæ¥çš„è¿™ä¸ª InjectionDaoImpl å¯¹è±¡å‘ä¸Šè½¬å‹ä¸º InjectionDao ç±»å‹ã€‚</p>
<p>æ³¨æ„ï¼š<br>è‹¥ä¸€ä¸ªæ¥å£è¢«å¤šä¸ªå®ç°ç±»ï¼Œå®ç°çš„æ—¶å€™ï¼Œ@Autowiredï¼ŒSpring ä¼šæŒ‰ byType çš„æ–¹å¼å¯»æ‰¾æ¥å£çš„å®ç°ç±»ï¼Œå°†å…¶æ³¨å…¥ã€‚å­˜åœ¨å¤šä¸ªå®ç°ç±»ï¼Œåº”è¯¥æŒ‡å®šåå­—ï¼Œå¯ä»¥é€šè¿‡ byName æ³¨å…¥çš„æ–¹å¼ã€‚å¯ä»¥ä½¿ç”¨ @Resource æˆ– @Qualifier æ³¨è§£ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//å®ç°ç±»1</span><br><span class="line">@Service(&quot;menuService1&quot;)</span><br><span class="line">public class MenuServiceImpl implements IMenuService</span><br><span class="line"> </span><br><span class="line">//å®ç°ç±»2</span><br><span class="line">@Service(&quot;menuService2&quot;)</span><br><span class="line">public class MenuServiceImpl implements IMenuService</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//æ³¨å…¥æ¥å£ï¼Œç›¸å½“äºnewä¸€ä¸ªå®ç°ç±»ï¼ŒæŒ‡å®šåç§°menuService1å®ç°ç±»</span><br><span class="line">@Autowired</span><br><span class="line">@Qualifier(&quot;menuService1&quot;)</span><br><span class="line">private IMenuService menuService;</span><br><span class="line"></span><br><span class="line">//æ³¨å…¥æ¥å£ï¼Œç›¸å½“äºnewä¸€ä¸ªå®ç°ç±»ï¼ŒæŒ‡å®šåç§°menuService2å®ç°ç±»  </span><br><span class="line">@Autowired</span><br><span class="line">@Qualifier(&quot;menuService2&quot;)</span><br><span class="line">private IMenuService menuService;</span><br></pre></td></tr></table></figure>

<p>é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/huangkechen/article/details/122475824">https://blog.csdn.net/huangkechen/article/details/122475824</a></p>
<p>æ€»ç»“ï¼šå°±æ˜¯Java å¤šæ€æ€§ï¼ˆå‘ä¸Šè½¬å‹ï¼‰çš„ä¸€ç§åº”ç”¨ï¼Œä½†æ˜¯è¿™æ ·åšçš„å¥½å¤„å¹¶æ²¡æœ‰è¯´ã€‚<br>è§„çŸ©ï¼šæ³¨å…¥å®ç°ç±»æ—¶ç”¨@Resourceï¼ˆ@Autowiredåº”è¯¥ä¹Ÿå¯ä»¥ï¼‰ï¼Œæ¥å£å•ä¸ªå®ç°ç±»ç”¨@Autowiredï¼ˆ@Resourceåº”è¯¥ä¹Ÿå¯ä»¥ï¼‰ï¼Œæ¥å£å¤šä¸ªå®ç°ç±»ç”¨@Autowired + @Qualifier(value=â€â€) æˆ– @Resource(name=â€â€)ã€‚</p>
<h3 id="Collectionã€Collectionsã€CollectionUtils"><a href="#Collectionã€Collectionsã€CollectionUtils" class="headerlink" title="Collectionã€Collectionsã€CollectionUtils"></a>Collectionã€Collectionsã€CollectionUtils</h3><p>Collection æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ã€‚å®ƒæä¾›äº†å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚Collectionæ¥å£åœ¨Java ç±»åº“ä¸­æœ‰å¾ˆå¤šå…·ä½“çš„å®ç°ã€‚Collectionæ¥å£çš„æ„ä¹‰æ˜¯ä¸ºå„ç§å…·ä½“çš„é›†åˆæä¾›äº†æœ€å¤§åŒ–çš„ç»Ÿä¸€æ“ä½œæ–¹å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Collectionï¼ˆå•ä¾‹é›†åˆ  ï¼‰ </span><br><span class="line">â”œ-Listï¼ˆæœ‰åºï¼Œå¯é‡å¤ ï¼‰  </span><br><span class="line">â”‚  â”œ-LinkedListï¼ˆæŸ¥è¯¢é€Ÿåº¦æ…¢ï¼Œå¢åˆ å¿«ï¼‰   </span><br><span class="line">â”‚  â”œ-ArrayListï¼ˆæŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œå¢åˆ æ…¢ï¼‰  </span><br><span class="line">â”‚  â””-Vectorï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼Œæ“ä½œæ•ˆç‡ä½ ï¼‰  </span><br><span class="line">â”‚ã€€    â””-Stack   </span><br><span class="line">â””-Setï¼ˆæ— åºï¼Œä¸å¯é‡å¤ï¼‰ </span><br><span class="line">      â”œ-HashSetï¼ˆä½¿ç”¨äº†å“ˆå¸Œè¡¨å­˜å–ï¼‰</span><br><span class="line">      â”‚    â””-LinkedHashSet</span><br><span class="line">      â””-SortedSet</span><br><span class="line">               â””-TreeSetï¼ˆæœ‰åºï¼‰</span><br><span class="line">Mapï¼ˆé”®å€¼å¯¹ï¼‰  </span><br><span class="line">â”œ-Hashtable   </span><br><span class="line">â”œ-HashMap   </span><br><span class="line">â””-WeakHashMap</span><br></pre></td></tr></table></figure>
<p>setæ˜¯åœ¨HashMapçš„åŸºç¡€ä¸Šå®ç°çš„ï¼ŒHashSetçš„å­˜å‚¨æ–¹å¼æ˜¯æŠŠHashMapä¸­çš„Keyä½œä¸ºSetçš„å¯¹åº”å­˜å‚¨é¡¹ã€‚HashMapæ˜¯éåŒæ­¥çš„ï¼Œçº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒHashtableè™½ç„¶æ˜¯åŒæ­¥çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å·²ç»è¿‡æœŸäº†ã€‚ ç°åœ¨ä½¿ç”¨ConcurrentHashMapï¼Œè¿™ä¸ªæ˜¯çº¿ç¨‹å®‰å…¨åŒæ­¥çš„ã€‚</p>
<p>Collections æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ã€‚å®ƒåŒ…å«æœ‰å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€å¤šæ€æ–¹æ³•ã€‚æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äºJavaçš„Collectionæ¡†æ¶ã€‚</p>
<p>ä¾‹å¦‚ï¼šæ’åº(Sort)ã€å€’åº(reverse)ã€æœ€å¤§(max)ã€æœ€å°(min)ã€æ›¿æ¢(fill)</p>
<p>ä½¿ç”¨sortæ–¹æ³•å¯ä»¥æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®šåˆ—è¡¨æŒ‰å‡åºè¿›è¡Œæ’åˆ—ã€‚åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ éƒ½å¿…é¡»å®ç°Comparableæ¥å£ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Collections.sort(list);//æ’åº</span><br><span class="line">System.out.println(list);</span><br><span class="line">Collections.reverse(list);//å€’åº</span><br><span class="line">System.out.println(list);</span><br><span class="line">int max = Collections.max(list);//æœ€å¤§</span><br><span class="line">System.out.println(max);</span><br><span class="line">int min = Collections.min(list);//æœ€å°</span><br><span class="line"></span><br><span class="line">Collections.emptyList()  //ç©ºlist</span><br></pre></td></tr></table></figure>

<p>CollectionUtilsæ˜¯å¯¹Collectioné›†åˆæ“ä½œçš„ç±»æ–¹æ³•ï¼Œè¿™ä¸ªç±»ä¸æ˜¯javaè‡ªå¸¦çš„ç±»æ–¹æ³•ï¼Œéœ€è¦å¦å¤–å¯¼å…¥ä¸€ä¸ªcommons-collections.jaråŒ…æ‰å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»ä¸­æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼šCollectionUtils.isEmpty(list)<br>å®ƒå¯ä»¥å¤„ç†nullï¼Œä½†æ˜¯list.isEmptyé‡Œé¢ä¸ºnullï¼Œä¼šNPEã€‚</p>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/chaoge321/article/details/83788667">https://blog.csdn.net/chaoge321/article/details/83788667</a></p>
<h3 id="listçš„ä¸€äº›æ“ä½œ"><a href="#listçš„ä¸€äº›æ“ä½œ" class="headerlink" title="listçš„ä¸€äº›æ“ä½œ"></a>listçš„ä¸€äº›æ“ä½œ</h3><h4 id="ä¸€ã€Lists-newArrayList-å’Œ-new-ArrayList-ï¼š"><a href="#ä¸€ã€Lists-newArrayList-å’Œ-new-ArrayList-ï¼š" class="headerlink" title="ä¸€ã€Lists.newArrayList() å’Œ new ArrayList() ï¼š"></a>ä¸€ã€Lists.newArrayList() å’Œ new ArrayList() ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();</span><br><span class="line">List&lt;Integer&gt; list = Lists.newArrayList();</span><br><span class="line"></span><br><span class="line">Listså’ŒMapsæ˜¯è°·æ­Œçš„ä¸¤ä¸ªå·¥å…·ç±»,</span><br><span class="line"></span><br><span class="line">Lists.newArrayList()å…¶å®å’Œnew ArrayList()å‡ ä¹ä¸€æ¨¡ä¸€æ ·,</span><br><span class="line"></span><br><span class="line">å”¯ä¸€å®ƒå¸®ä½ åšçš„(å…¶å®æ˜¯javacå¸®ä½ åšçš„),å°±æ˜¯è‡ªåŠ¨æ¨å¯¼å°–æ‹¬å·é‡Œçš„æ•°æ®ç±»å‹.</span><br><span class="line"></span><br><span class="line">åœ¨ Java 7 ä¹‹åï¼Œéƒ½å…è®¸ç±»å‹æ¨æ–­ - åœ¨è¿è¡Œæ—¶æ²¡æœ‰åŒºåˆ«ã€‚</span><br><span class="line"></span><br><span class="line">java8 çš„new ArrayList&lt;&gt;()çš„&lt;&gt;é‡Œé¢å¯ä»¥ä¸å†™ç±»å‹ï¼Œjavaå›å¸®ä½ è‡ªåŠ¨æ¨å¯¼ç±»å‹</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>

<p>åŒæ ·ï¼Œè¿˜æœ‰Setsï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; sets = Sets.newHashSet(&quot;ww&quot;); //å¯ç›´æ¥å®šä¹‰</span><br><span class="line">Set&lt;String&gt; sets = new HashSet&lt;&gt;(Lists.newArrayList(&quot;11&quot;,&quot;22&quot;));</span><br><span class="line">//è¿˜å¾—ç”¨listè½¬æ¢</span><br><span class="line"></span><br><span class="line">setæ²¡æœ‰get(i)æ–¹æ³•ï¼Œéå†å¾—ç”¨è¿­ä»£å™¨ã€‚è¦ä¹ˆå…ˆè½¬æ¢æˆlistã€‚</span><br><span class="line">setè½¬æ¢ä¸ºlistï¼š</span><br><span class="line">ArrayList&lt;Long&gt; list = new ArrayList(set);</span><br></pre></td></tr></table></figure>

<p>æ–°å»ºListï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//List&lt;String&gt; list1 = new ArrayList&lt;String&gt;(&quot;1&quot;, &quot;2&quot;); ä¸è¡Œ</span><br><span class="line">List&lt;String&gt; list2 = Lists.newArrayList(&quot;1&quot;, &quot;2&quot;);</span><br><span class="line">list2.add(&quot;3&quot;);  //å’©é—®é¢˜</span><br><span class="line">System.out.println(list2);</span><br><span class="line">List&lt;String&gt; list3 = Arrays.asList(&quot;1&quot;, &quot;2&quot;);</span><br><span class="line">list3.set(1, &quot;3&quot;); //è®¾ç½®é™¤äº†0ã€1ä¼šæŠ¥é”™</span><br><span class="line">System.out.println(list3);</span><br><span class="line">list3.add(&quot;3&quot;);  //æŠ¥é”™ï¼šjava.lang.UnsupportedOperationException</span><br><span class="line">System.out.println(list3);</span><br><span class="line">List&lt;String&gt; list4 = Collections.singletonList(&quot;1&quot;);</span><br><span class="line">list4.add(&quot;2&quot;); //æŠ¥é”™ï¼šjava.lang.UnsupportedOperationException</span><br><span class="line"></span><br><span class="line">String a[] = new String[] &#123; &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot; &#125;;</span><br><span class="line">List&lt;String&gt; list5 = Arrays.asList(a);</span><br></pre></td></tr></table></figure>

<p>âœ…Array.asListåˆ›å»ºæ–¹å¼ï¼š<br>java.util.Arrays ç±»çš„ asList() æ–¹æ³•ç”¨äºè¿”å›ä¸€ä¸ªç”±æŒ‡å®šæ•°ç»„æ”¯æŒçš„å›ºå®šå¤§å°çš„åˆ—è¡¨ã€‚<br>Arrays.asList æœ€å¤§ç‰¹ç‚¹æ˜¯æ•´ä¸ªé›†åˆå…è®¸æœ‰å¤šä¸ªå…ƒç´ å­˜å…¥æ•°ç»„ï¼Œä¸€æ—¦åˆå§‹åŒ–åï¼Œè¿™ä¸ªæ•°ç»„çš„é•¿åº¦å°±æ˜¯å›ºå®šçš„ï¼Œä½†æ•°ç»„çš„å…ƒç´ å¯ä»¥ä¿®æ”¹ï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ add å’Œ remove æ–¹æ³•æŠ¥é”™çš„åŸå› ã€‚å¦‚æœåœ¨å¼€å‘ä¸­ç¢°åˆ°é•¿åº¦å¯ä»¥ç¡®å®šçš„é›†åˆï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–æ—¶å·²ç»ç¡®å®šäº†å‚¨å­˜å…ƒç´ çš„æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ã€‚<br>Arrays.asList ä¸­ä¼ å…¥çš„æ•°ç»„å‚æ•°ä¸­å…è®¸å­˜åœ¨ nullï¼Œä½†ä¸å…è®¸åªæœ‰ä¸€ä¸ª null</p>
<p>âœ…Collections.singletonList()åˆ›å»ºæ–¹å¼ï¼š<br>Collection.singletonList é•¿åº¦ä¸º 1ï¼Œåˆå§‹å®Œåä¸å¯ä¿®æ”¹ã€‚æ ¹æ®è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨å¼€å‘çš„æ—¶å€™é‡åˆ°åªè¦å‚¨å­˜ä¸€ä¸ªå…ƒç´ çš„é›†åˆï¼Œå¹¶ä¸”æ•´ä¸ªè¿‡ç¨‹å­˜å‚¨æˆ–è€…ä¼ é€’ä¸ºä¸»ï¼Œä¸ä¼šè¿›è¡Œä¿®æ”¹æˆ–è°ƒæ•´çš„æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ã€‚<br>Collections.singletonList ä¸­ä¿å­˜å…ƒç´ çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</p>
<p>âœ…Arrays.asList() å’Œ Collections.singletonList()åŒºåˆ« ï¼š<br>1ã€Arrays.asList()å¾—åˆ°çš„Listä¸­å…ƒç´ æ˜¯å¯å˜çš„ï¼Œå¤§å°ä¸å¯å˜ã€‚<br>è€ŒCollections.singletonListæ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦ä¿®æ”¹å°±ä¼šå¯¼è‡´UnsupportedOperationExceptionå¼‚å¸¸æŠ›å‡º<br>2ã€Collections.singletonList()å¾—åˆ°çš„Listå…ƒç´ åªèƒ½æœ‰1ä¸ª<br>3ã€Arrays.asList(strArray)ä¸å…·æœ‰addæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡setæ–¹æ³•è¿›è¡Œæ”¹å˜å€¼ã€‚Collections.singletonList()è¿”å›çš„æ˜¯ä¸å¯å˜çš„é›†åˆï¼Œä½†æ˜¯è¿™ä¸ªé•¿åº¦çš„é›†åˆåªæœ‰1ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41606477/article/details/108449415">https://blog.csdn.net/weixin_41606477/article/details/108449415</a></p>
<p>æ–°å»ºSetï¼Œé™¤äº†ä¸Šé¢çš„ï¼Œè¿˜æœ‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; list4 = Collections.singleton(&quot;1&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="äºŒã€å¯¹listæ’åºï¼šComparator-javaå·¥å…·ç±»"><a href="#äºŒã€å¯¹listæ’åºï¼šComparator-javaå·¥å…·ç±»" class="headerlink" title="äºŒã€å¯¹listæ’åºï¼šComparator-javaå·¥å…·ç±»"></a>äºŒã€å¯¹listæ’åºï¼šComparator-javaå·¥å…·ç±»</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">list.sort(Comparator.comparing(A::getB));</span><br><span class="line"></span><br><span class="line">List&lt;ç±»&gt; list; ä»£è¡¨æŸé›†åˆ</span><br><span class="line"> </span><br><span class="line">//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€å‡åºæ’åº</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€));</span><br><span class="line"> </span><br><span class="line">//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€é™åºæ’åº æ³¨æ„ä¸¤ç§å†™æ³•</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).reversed());//å…ˆä»¥å±æ€§ä¸€å‡åº,ç»“æœè¿›è¡Œå±æ€§ä¸€é™åº</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€,Comparator.reverseOrder()));//ä»¥å±æ€§ä¸€é™åº</span><br><span class="line"> </span><br><span class="line">//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€å‡åº å±æ€§äºŒå‡åº</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).thenComparing(ç±»::å±æ€§äºŒ));</span><br><span class="line"> </span><br><span class="line">//è¿”å› å¯¹è±¡é›†åˆä»¥ç±»å±æ€§ä¸€é™åº å±æ€§äºŒå‡åº æ³¨æ„ä¸¤ç§å†™æ³•</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€).reversed().thenComparing(ç±»::å±æ€§äºŒ));//å…ˆä»¥å±æ€§ä¸€å‡åº,å‡åºç»“æœè¿›è¡Œå±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒå‡åº</span><br><span class="line">list.stream().sorted(Comparator.comparing(ç±»::å±æ€§ä¸€,Comparator.reverseOrder()).thenComparing(ç±»::å±æ€§äºŒ));//å…ˆä»¥å±æ€§ä¸€é™åº,å†è¿›è¡Œå±æ€§äºŒå‡åº</span><br><span class="line"></span><br><span class="line">//å«Nullæ•°æ®æ’åº,nullsLastç©ºçš„æ”¾åé¢ï¼Œè·ç¦»Dateç±»å‹å±æ€§</span><br><span class="line">list.stream().sorted(Comparator.comparing(item -&gt; item.å±æ€§, Comparator.nullsLast(Date::compareTo))).collect(Collectors.toList());</span><br><span class="line">// nullLastæˆ–nullFirsté‡Œé¢å¸¦ç±»å‹ï¼Œå¯ä»¥ç”¨Comparator.nullsLast(Comparator.naturalOrder()))</span><br><span class="line"></span><br><span class="line">//ç©º/Nullæ•°æ®åˆ†ç»„</span><br><span class="line">Map&lt;String, List&lt;ç±»&gt;&gt; map = list.stream().collect(Collectors.groupingBy(item -&gt; &#123;</span><br><span class="line">  if (item.å±æ€§ä¸€ == null || item.å±æ€§ä¸€.equals(&quot;&quot;)) &#123;</span><br><span class="line">  ã€€ã€€return &quot;&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  return DateFormat.getDateInstance().format(item.å±æ€§ä¸€);</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>
<p>listå¯ä»¥ç›´æ¥ä½¿ç”¨sortã€‚<br>ç”¨sortedå°±éœ€è¦å…ˆ.stream()ï¼Œå†.collect(Collectors.toList())<br>::éƒ½å¾—æ˜¯getå±æ€§</p>
<p>è‡ªå®šä¹‰æ’åºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Collections.sort(list, new Comparator&lt;listä¸­å…ƒç´ &gt;()&#123;</span><br><span class="line">  @Override</span><br><span class="line">  public int compare(å…ƒç´  o1, å…ƒç´  o2) &#123;</span><br><span class="line">    if(..)  return 1;  //è¡¨ç¤ºo1åœ¨å‰</span><br><span class="line">    if(..)  return 0;  //è¡¨ç¤ºä¸€æ ·</span><br><span class="line">    return -1ï¼›  //è¡¨ç¤ºo2åœ¨å‰</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="ä¸‰ã€listç§»é™¤ï¼š-removeIf"><a href="#ä¸‰ã€listç§»é™¤ï¼š-removeIf" class="headerlink" title="ä¸‰ã€listç§»é™¤ï¼š removeIf"></a>ä¸‰ã€listç§»é™¤ï¼š removeIf</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">removeIf() æ–¹æ³•ç”¨äºåˆ é™¤æ‰€æœ‰æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ•°ç»„å…ƒç´ ã€‚</span><br><span class="line">ArrayList&lt;String&gt; sites = new ArrayList&lt;&gt;();</span><br><span class="line">sites.add(&quot;Taobao&quot;);</span><br><span class="line">sites.removeIf(e -&gt; e.contains(&quot;Tao&quot;));</span><br><span class="line">ç”¨äº†Stringçš„containsæ–¹æ³•</span><br></pre></td></tr></table></figure>
<p>listå…ƒç´ å¯ä»¥å…ˆè®¾ç½®ï¼Œå†æ›´æ”¹ã€‚</p>
<p>ä¸èƒ½åœ¨å¾ªç¯ä¸­ç”¨æ­£åºç´¢å¼•è¿›è¡Œç§»é™¤ï¼Œå› ä¸ºç§»é™¤çš„è¿‡ç¨‹ä¸­ç´¢å¼•ä¼šå˜ã€‚<br>å¯ä»¥ç”¨å€’åºç´¢å¼•ã€‚<br>å¦‚æœéå¾—ç”¨å¾ªç¯ç§»é™¤ï¼Œç”¨è¿­ä»£å™¨ã€‚</p>
<p>forçš„ä¸‹æ ‡å€’åºéå†:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (int i = list.size() - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">    if (&quot;b&quot;.equals(list.get(i))) &#123;</span><br><span class="line">        list.remove(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨list.stream().filter().collect()ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; newList = list.stream()</span><br><span class="line">        .filter(e -&gt; !&quot;b&quot;.equals(e))</span><br><span class="line">        .collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<p>ç”¨è¿­ä»£å™¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line">while (it.hasNext()) &#123;</span><br><span class="line">    String s = it.next();</span><br><span class="line">    if (&quot;b&quot;.equals(s)) &#123;</span><br><span class="line">        it.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ¤”æ€»ç»“ä¸€ä¸‹listç§»é™¤æ–¹æ³•ï¼š<br>1ã€removeIf<br>2ã€å€’å™forå¾ªç¯<br>3ã€stream filter<br>4ã€è¿­ä»£å™¨</p>
<p>âš ï¸è¿­ä»£å™¨ä¸­ï¼Œåˆç§»é™¤ï¼Œåˆå¯¹listå¢åŠ å…ƒç´ æ˜¯ä¸è¡Œçš„ï¼Œä¼šå¼•å‘å¹¶å‘é”™è¯¯ã€‚<br>mapä¹Ÿæ˜¯ä¸€æ ·ï¼Œç”¨Entryéå†æ—¶ï¼Œä¸èƒ½åˆremoveåˆputï¼Œè€Œä¸”å†å¾ªç¯é‡Œä¸èƒ½putæ–°çš„ï¼Œåªèƒ½putå·²æœ‰çš„ï¼Œä¸ç„¶ä¼šå¹¶å‘é”™è¯¯ã€‚ä¹Ÿä¸èƒ½removeã€‚ç”¨è¿­ä»£å™¨ç§»é™¤å…ƒç´ ã€‚</p>
<p>æ‰€ä»¥ï¼Œæ›¿æ¢Listä¸­çš„å…ƒç´ ï¼Œç”¨setæ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Long&gt; list = Lists.newArrayList(1L, 2L, 3L);</span><br><span class="line">list.set(1, 4L);  //[1, 4, 3]</span><br></pre></td></tr></table></figure>

<p>ã€JAVAã€‘Listå¸¸ç”¨ç§»é™¤ã€è¿‡æ»¤ã€å»é‡ã€flatMapã€peekç­‰æ“ä½œï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38397501/article/details/116494227">https://blog.csdn.net/qq_38397501/article/details/116494227</a></p>
<h4 id="å››ã€åˆ¤æ–­listä¸ºç©º"><a href="#å››ã€åˆ¤æ–­listä¸ºç©º" class="headerlink" title="å››ã€åˆ¤æ–­listä¸ºç©º"></a>å››ã€åˆ¤æ–­listä¸ºç©º</h4><p>if(CollectionUtils.isEmpty(list)){}</p>
<h4 id="äº”ã€indexOfæ–¹æ³•"><a href="#äº”ã€indexOfæ–¹æ³•" class="headerlink" title="äº”ã€indexOfæ–¹æ³•"></a>äº”ã€indexOfæ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">indexOf() æ–¹æ³•è¿”å›åŠ¨æ€æ•°ç»„ä¸­å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</span><br><span class="line">int i = arraylist.indexOf(Object obj)</span><br></pre></td></tr></table></figure>

<h4 id="å…­ã€listã€setã€Stringè½¬æ¢"><a href="#å…­ã€listã€setã€Stringè½¬æ¢" class="headerlink" title="å…­ã€listã€setã€Stringè½¬æ¢"></a>å…­ã€listã€setã€Stringè½¬æ¢</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//listç›´æ¥å˜setï¼š</span><br><span class="line">Set&lt;Long&gt; set2 = new HashSet&lt;&gt;(list);</span><br><span class="line">Set&lt;Long&gt; set1 = Sets.newHashSet(list);</span><br><span class="line">//setå˜listï¼š</span><br><span class="line">List&lt;Long&gt; list2 = new ArrayList&lt;&gt;(set1);</span><br><span class="line">List&lt;Long&gt; list3 = Lists.newArrayList(set1);</span><br></pre></td></tr></table></figure>

<p>,åˆ†å‰²çš„Stringè½¬æ¢ä¸ºListï¼Œçœ‹ä¸‹é¢Splitterã€‚</p>
<p>Listè½¬æ¢ä¸º,åˆ†å‰²å­—ç¬¦ä¸²ï¼Œçœ‹ä¸‹é¢Joinerè¿æ¥å­—ç¬¦ä¸²ã€‚</p>
<h4 id="ä¸ƒã€foreach"><a href="#ä¸ƒã€foreach" class="headerlink" title="ä¸ƒã€foreach"></a>ä¸ƒã€foreach</h4><p>forEach() æ–¹æ³•ç”¨äºéå†åŠ¨æ€æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ å¹¶æ‰§è¡Œç‰¹å®šæ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testArray()&#123;</span><br><span class="line">    ArrayList&lt;Integer&gt; numbers = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    // å¾€æ•°ç»„ä¸­æ·»åŠ å…ƒç´ </span><br><span class="line">    numbers.add(1);</span><br><span class="line">    numbers.add(2);</span><br><span class="line">    numbers.add(3);</span><br><span class="line">    numbers.add(4);</span><br><span class="line">    System.out.println(&quot;ArrayList: &quot; + numbers);</span><br><span class="line"></span><br><span class="line">    // å°† lambda è¡¨è¾¾å¼ä¼ é€’ç»™ forEach</span><br><span class="line">    numbers.forEach((e) -&gt; &#123;</span><br><span class="line">        System.out.print(e + &quot; &quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>forEach å¢å¼ºforå¾ªç¯ï¼Œç”¨äºéå†åŠ¨æ€æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ å¹¶æ‰§è¡Œç‰¹å®šæ“ä½œã€‚</p>
<p>Listçš„forEachæ˜¯åœ¨Iterableç±»ä¸­ï¼Œ<code>Collection&lt;E&gt; extends Iterable&lt;E&gt;</code>ï¼Œstreamçš„forEachåœ¨Streamä¸­ã€‚</p>
<p>Iterableä¸­çš„æ–¹æ³•åŸå‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">default void forEach(Consumer&lt;? super T&gt; action) &#123;</span><br><span class="line">    Objects.requireNonNull(action);</span><br><span class="line">    for (T t : this) &#123;</span><br><span class="line">        action.accept(t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âš ï¸ä½¿ç”¨ä¸­å‡ºç°ï¼šæç¤ºVariable used in lambda expression should be final or effectively final</p>
<p>è¿™å¥è¯çš„æ„æ€æ˜¯ï¼šlambdaè¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å˜é‡åº”è¯¥æ˜¯finalæˆ–è€…æœ‰æ•ˆçš„finalã€‚</p>
<p>å…¶å®åœ¨ Java 8 ä¹‹å‰ï¼š<br>åŒ¿åç±»ä¸­å¦‚æœè¦è®¿é—®å±€éƒ¨å˜é‡çš„è¯ï¼Œé‚£ä¸ªå±€éƒ¨å˜é‡å¿…é¡»æ˜¾å¼çš„å£°æ˜ä¸ºfinalã€‚<br>lambdaè¡¨è¾¾å¼æ˜¯ç”±åŒ¿åå†…éƒ¨ç±»æ¼”å˜è¿‡æ¥çš„ï¼Œä»–ä»¬çš„ä½œç”¨éƒ½æ˜¯å®ç°æ¥å£æ–¹æ³•ï¼Œäºæ˜¯ç±»æ¯”åŒ¿åå†…éƒ¨ç±»ï¼Œlambdaè¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å˜é‡ä¹Ÿéœ€è¦æ˜¯finalç±»å‹ã€‚</p>
<p>æ‰€ä»¥ï¼šéœ€è¦èµ‹å€¼åˆ°å¦ä¸€ä¸ªå˜é‡ä¸­ä½¿ç”¨ã€‚å¹¶ä¸”ä¸ºfinalç±»å‹ï¼Œä¸æ˜¯finalç±»å‹ä¹Ÿå¯ä»¥ï¼Œå˜é‡åä¸­åŠ finalã€‚<br>å› ä¸ºï¼šJava 8 ä¹‹åï¼Œåœ¨åŒ¿åç±»æˆ– Lambda è¡¨è¾¾å¼ä¸­è®¿é—®çš„å±€éƒ¨å˜é‡ï¼Œå¦‚æœä¸æ˜¯ final ç±»å‹çš„è¯ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨åŠ ä¸Š final ä¿®é¥°ç¬¦ã€‚</p>
<p>ä¸ºä»€ä¹ˆ lambda è¡¨è¾¾å¼æˆ–è€…åŒ¿åå†…éƒ¨ç±»ä¸èƒ½è®¿é—®é final çš„å±€éƒ¨å˜é‡ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å…¶å®è¿™å°±è¦è¯´åˆ°Jvmå†…å­˜æ¨¡å‹å’Œçº¿ç¨‹äº†ï¼Œå› ä¸ºå®ä¾‹å˜é‡å­˜åœ¨å †ä¸­ï¼Œè€Œå±€éƒ¨å˜é‡æ˜¯åœ¨æ ˆä¸Šåˆ†é…ï¼Œ<strong>lambda è¡¨è¾¾(åŒ¿åå†…éƒ¨ç±») ä¼šåœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œ</strong>ã€‚å¦‚æœåœ¨çº¿ç¨‹ä¸­è¦ç›´æ¥è®¿é—®ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå¯èƒ½çº¿ç¨‹æ‰§è¡Œæ—¶è¯¥å±€éƒ¨å˜é‡å·²ç»è¢«é”€æ¯äº†ï¼Œè€Œ final ç±»å‹çš„å±€éƒ¨å˜é‡åœ¨ Lambda è¡¨è¾¾å¼(åŒ¿åç±») ä¸­å…¶å®æ˜¯å±€éƒ¨å˜é‡çš„ä¸€ä¸ªæ‹·è´ã€‚</p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.liangzl.com/get-article-detail-213550.html">https://www.liangzl.com/get-article-detail-213550.html</a></p>
<p>æ‰€ä»¥è¿™ä¸ªé—®é¢˜çš„åŸå› ä¸åœ¨forEachï¼Œè€Œæ˜¯åœ¨lambdaè¡¨è¾¾å¼ã€‚<br>javaçš„lambdaè¡¨è¾¾å¼é‡Œä¸èƒ½å‡ºç°å˜é‡ï¼Œå¿…é¡»æ˜¯finalä¿®é¥°çš„ï¼Œä½†æ˜¯å¯ä»¥è®©å˜é‡åœ¨å®šä¹‰æ—¶å€™å°±å†™å…¥ï¼Œè¿™æ ·å°±ä¸ç®—å˜é‡äº†ã€‚å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œä¸å†æŠ¥é”™ã€‚ï¼ˆåªå®šä¹‰ä¸€æ¬¡ä¸å†æ”¹ï¼Œå¦‚æœæ˜¯éœ€è¦å¤šæ­¥æ‰èƒ½å®šä¹‰å‡ºå˜é‡ï¼Œé‚£å°±å†™ä¸ªæ–¹æ³•å‡ºç»“æœä¹Ÿå¯ä»¥ï¼‰</p>
<p>ä¸è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">boolean ebola = false;</span><br><span class="line">ebola = list.size()&gt;10;//èµ‹å€¼</span><br><span class="line">taskExecutor.execute(() -&gt; &#123;</span><br><span class="line">  if(ebola)&#123;</span><br><span class="line">       //ä¸šåŠ¡ä»£ç </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">boolean ebola = checkEbola(list);//ç›¸å½“äºå®šä¹‰æ—¶ç›´æ¥èµ‹å€¼</span><br><span class="line">taskExecutor.execute(() -&gt; &#123;</span><br><span class="line">  if(ebola)&#123;</span><br><span class="line">       //ä¸šåŠ¡ä»£ç </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">private boolean checkEbola(ArrayList&lt;Object&gt; list)&#123;</span><br><span class="line">  return list.size()&gt;10;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="å…«ã€Listæˆªå–"><a href="#å…«ã€Listæˆªå–" class="headerlink" title="å…«ã€Listæˆªå–"></a>å…«ã€Listæˆªå–</h4><p>Listè‡ªå·±çš„suubListæ–¹æ³•ï¼Œä¼ å‚æ•°èµ·å§‹ç´¢å¼•å’Œç»ˆç‚¹ç´¢å¼•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2() &#123;</span><br><span class="line">    List&lt;Long&gt; list = Lists.newArrayList(1L, 2L, 3L);</span><br><span class="line">    System.out.println(list.subList(1, list.size()));</span><br><span class="line">    // 2,3</span><br><span class="line"></span><br><span class="line">    // æ–°å»ºå›ºå®šå¤§å°çš„List</span><br><span class="line">    List&lt;Long&gt; list1 = Lists.newArrayListWithExpectedSize(3);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ã€æ•°ç»„è½¬æ¢ä¸ºList"><a href="#ä¹ã€æ•°ç»„è½¬æ¢ä¸ºList" class="headerlink" title="ä¹ã€æ•°ç»„è½¬æ¢ä¸ºList"></a>ä¹ã€æ•°ç»„è½¬æ¢ä¸ºList</h4><p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://www.jb51.net/article/221887.htm">https://www.jb51.net/article/221887.htm</a></p>
<p>1ã€ä½¿ç”¨ArrayList.asList(strArray)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String[] str = &#123;&quot;fgx&quot;, &quot;lzy&quot;&#125;;</span><br><span class="line">//æ³¨æ„è¿™ä¸ªListä¸æ˜¯CollectionsåŒ…å†…çš„List,è€Œæ˜¯utilåŒ…é‡Œé¢çš„Listæ¥å£</span><br><span class="line">List&lt;String&gt; ints = Arrays.asList(str);</span><br><span class="line">//è¿™é‡Œä¼šæŠ¥é”™</span><br><span class="line">ints.add(&quot;laopo&quot;);</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨Arrayså·¥å…·ç±»Arrays.asList(strArray)æ–¹å¼,è½¬æ¢å®Œæˆå,åªèƒ½å¯¹Listæ•°ç»„è¿›è¡ŒæŸ¥æ”¹,ä¸èƒ½å¢åˆ ,å¢åˆ å°±ä¼šæŠ›å‡ºUnsupportedOperationException å¼‚å¸¸ã€‚<br>æŠ¥é”™åŸå› :Arrays.asList(str)è¿”å›å€¼æ˜¯java.util.Arraysç±»ä¸­ä¸€ä¸ªç§æœ‰é™æ€å†…éƒ¨ç±» java.utiil.Arrays.Arraylist,å¹¶ä¸æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨çš„java.util.ArrayList();</p>
<p>âš ï¸ï¼šä½¿ç”¨çš„asList()æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªfinalçš„,å›ºå®šé•¿åº¦çš„ArrayListç±»ï¼Œå¹¶ä¸æ˜¯java.util.ArrayListï¼Œç›´æ¥è¿™æ ·åˆ©ç”¨å®ƒè¿›è¡Œadd()æˆ–remove()æ˜¯æ— æ•ˆçš„ã€‚</p>
<p>2ã€ä½¿ç”¨new ArrayList(Arrays.asList(strArray))</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//æ³¨æ„è¿™ä¸ªListä¸æ˜¯CollectionsåŒ…å†…çš„List,è€Œæ˜¯utilåŒ…é‡Œé¢çš„Listæ¥å£</span><br><span class="line">java.util.ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;(Arrays.asList(str));</span><br><span class="line">strings.add(&quot;aop&quot;);</span><br><span class="line">strings.stream().forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ArrayListçš„æ„é€ å™¨,å°†Arrays.asList(strArray)çš„è¿”å›å€¼ç”±java.utilArrays.ArrayListè½¬ä¸ºjava.util.ArrayList.</p>
<p>3ã€é›†åˆå·¥å…·ç±»Collections.addAll()æ–¹æ³•ï¼ˆç”¨è¿™ä¸ªï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] str = &#123;&quot;fgx&quot;, &quot;lzy&quot;&#125;;</span><br><span class="line">java.util.ArrayList&lt;String&gt; stringList = new ArrayList&lt;&gt;(str.length);</span><br><span class="line">Collections.addAll(stringList,str);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡Collections.addAll(arrayList, strArray)æ–¹å¼è½¬æ¢ï¼Œæ ¹æ®æ•°ç»„çš„é•¿åº¦åˆ›å»ºä¸€ä¸ªé•¿åº¦ç›¸åŒçš„Listï¼Œç„¶åé€šè¿‡Collections.addAll()æ–¹æ³•ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ è½¬ä¸ºäºŒè¿›åˆ¶ï¼Œç„¶åæ·»åŠ åˆ°Listä¸­ï¼Œè¿™æ˜¯æœ€é«˜æ•ˆçš„æ–¹æ³•ã€‚</p>
<p>4ã€JDK8çš„Streamæµå°†3æ€»åŸºæœ¬ç±»å‹æ•°ç»„è½¬ä¸ºList</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">long[] longs = &#123;1, 2, 3&#125;;</span><br><span class="line">double[] doubles = &#123;1, 2, 3&#125;;</span><br><span class="line">Arrays.stream(ints).boxed().collect(Collectors.toList());</span><br><span class="line">Arrays.stream(longs).boxed().collect(Collectors.toList());</span><br><span class="line">Arrays.stream(doubles).boxed().collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<p>å¦‚æœJDKç‰ˆæœ¬åœ¨1.8ä»¥ä¸Š,ä½¿ç”¨æµstreamæ¥å°†ä¸‹åˆ—3ç§æ•°ç»„å¿«é€Ÿè½¬ä¸ºList,åˆ†åˆ«æ˜¯int[],long[],double[],ä¸æ”¯æŒshort[ ],byte[ ],char[]åœ¨JDK1.8ä¸­æš‚ä¸æ”¯æŒ.</p>
<p>âš ï¸ ä¸èƒ½æŠŠåŸºæœ¬æ•°æ®ç±»å‹è½¬åŒ–ä¸ºåˆ—è¡¨<br>asListæ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªæ³›å‹çš„å˜é•¿å‚æ•°ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹æ˜¯æ— æ³•æ³›å‹åŒ–çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int [] intarray = &#123; 1 ,  2 ,  3 ,  4 ,  5 &#125;;</span><br><span class="line">//List&lt;Integer&gt; list = Arrays.asList(intarray); ç¼–è¯‘é€šä¸è¿‡</span><br><span class="line">List&lt; int []&gt; list = Arrays.asList(intarray);  //è¾“å‡ºä¸€ä¸ªint[]å…ƒç´ çš„list</span><br></pre></td></tr></table></figure>

<p>è¦æƒ³æŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„è½¬åŒ–ä¸ºå…¶åŒ…è£…ç±»å‹çš„listï¼Œå¯ä»¥ä½¿ç”¨guavaç±»åº“çš„å·¥å…·æ–¹æ³•â€œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int [] intArray = &#123; 1 ,  2 ,  3 ,  4 &#125;;</span><br><span class="line">List&lt;Integer&gt; list = Ints.asList(intArray);</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆint[]ä¸èƒ½ç›´æ¥è½¬ä¸ºList,è€ŒInteger[]å¯ä»¥è½¬ä¸ºList,è€ŒInteger[]å°±å¯ä»¥è½¬ä¸ºListäº†,å› ä¸ºListä¸­çš„æ³›å‹å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ã€‚ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>âš ï¸asListæ–¹æ³•è¿”å›çš„æ˜¯æ•°ç»„çš„ä¸€ä¸ªè§†å›¾</p>
<p>è§†å›¾æ„å‘³ç€ï¼Œå¯¹è¿™ä¸ªlistçš„æ“ä½œéƒ½ä¼šåæ˜ åœ¨åŸæ•°ç»„ä¸Šï¼Œè€Œä¸”è¿™ä¸ªlistæ˜¯å®šé•¿çš„ï¼Œä¸æ”¯æŒaddã€removeç­‰æ”¹å˜é•¿åº¦çš„æ–¹æ³•ã€‚</p>
<h4 id="åã€Listè½¬ä¸ºæ•°ç»„"><a href="#åã€Listè½¬ä¸ºæ•°ç»„" class="headerlink" title="åã€Listè½¬ä¸ºæ•°ç»„"></a>åã€Listè½¬ä¸ºæ•°ç»„</h4><p>ä¸€èˆ¬æ•°ç»„æ˜¯ä¸èƒ½æ·»åŠ å…ƒç´ çš„ï¼Œå› ä¸ºä»–ä»¬åœ¨åˆå§‹åŒ–æ—¶å°±å·²å®šå¥½é•¿åº¦äº†ï¼Œä¸èƒ½æ”¹å˜é•¿åº¦ã€‚</p>
<p>1ã€ list.toArray();</p>
<p>ç›´æ¥å°† list è½¬æ¢æˆ Object[] ç±»å‹çš„ æ•°ç»„ï¼›<br>Object ï¼š å¯¹è±¡ç±»ï¼Œæ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»</p>
<p><code>Object[]  ans1 = list.toArray();</code></p>
<p>2ã€list.toArray(T[] a);</p>
<p>è¾“å‡ºæŒ‡å®šç±»å‹çš„æ•°ç»„ï¼Œè¾“å‡ºçš„æ•°ç»„ç±»å‹ä¸æ‹¬å·ä¸­å‚æ•°ç±»å‹ä¸€è‡´ï¼›<br>å¿…é¡»æ˜¯åŒ…è£…ç±»ï¼ˆStringã€Integerã€Characterç­‰ï¼‰ï¼Œä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹äº†ï¼ˆstringã€intã€charï¼‰ï¼›<br>// åˆ›å»ºæ•°ç»„æ—¶ï¼š int [ ] arr = new int [ ] {}; ä½¿ç”¨çš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹</p>
<p><code>Integer[] ans2 = list.toArray(new Integer[list.size()]);</code><br>æ³¨æ„ï¼šideaæç¤ºç”¨ç©ºçš„ï¼š<br><code>Integer[] ans2 = list.toArray(new Integer[0]);</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ªlistï¼Œå¹¶ä¸”å¯¹listèµ‹å€¼        </span><br><span class="line">List&lt;Integer&gt;  list = new ArrayList&lt;&gt;();       </span><br><span class="line">for (int i = 1; i &lt; 11; i++) &#123;</span><br><span class="line">        list.add(i);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">//æ–¹æ³•ä¸€ï¼š</span><br><span class="line">Object[]  ans1 = list.toArray();</span><br><span class="line">System.out.println(&quot;1:&quot; + Arrays.toString(ans1));</span><br><span class="line"> </span><br><span class="line">// æ–¹æ³•äºŒï¼š</span><br><span class="line">Integer[] ans2 = list.toArray(new Integer[list.size()]);</span><br><span class="line">System.out.println(&quot;2:&quot; + Arrays.toString(ans2));</span><br><span class="line"> </span><br><span class="line">1:[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span><br><span class="line">2:[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span><br></pre></td></tr></table></figure>


<p>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/Gc_680/article/details/122568085">https://blog.csdn.net/Gc_680/article/details/122568085</a></p>
<h4 id="åã€åˆ†å‰²list"><a href="#åã€åˆ†å‰²list" class="headerlink" title="åã€åˆ†å‰²list"></a>åã€åˆ†å‰²list</h4><p>Listsçš„æ–¹æ³•ï¼Œcom.google.guavaä¸­ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼šlisté›†åˆä¸­æ•°æ®é‡è¿‡å¤§ï¼Œå¯æ ¹æ®éœ€è¦è¿›è¡Œæ‹†åˆ†ï¼Œè¿›è€Œé€šè¿‡å¾ªç¯æˆ–è€…å¤šçº¿ç¨‹æ¥å¤„ç†æ•°æ®ã€‚<br>æˆ–è€…æ˜¯listæ‹†åˆ†åï¼Œåˆ†æ‰¹æ’å…¥æ•°æ®åº“ã€‚<br>Lists.partitionæ–¹æ³•ï¼Œæ ¹æ®ä¼ å…¥çš„sizeï¼Œå¯¹listè¿›è¡Œæ‹†åˆ†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å°†é›†åˆlistæŒ‰ç…§ 2 ä¸ªå…ƒç´ ä¸€ä»½è¿›è¡Œåˆ’åˆ†</span><br><span class="line">List&lt;List&lt;String&gt;&gt; partition = Lists.partition(list, 2);</span><br></pre></td></tr></table></figure>

<h4 id="åä¸€ã€listæ ¹æ®å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡"><a href="#åä¸€ã€listæ ¹æ®å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡" class="headerlink" title="åä¸€ã€listæ ¹æ®å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡"></a>åä¸€ã€listæ ¹æ®å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">package org.example.javaer;</span><br><span class="line"></span><br><span class="line">import lombok.Getter;</span><br><span class="line">import lombok.RequiredArgsConstructor;</span><br><span class="line">import lombok.Setter;</span><br><span class="line">import lombok.ToString;</span><br><span class="line"></span><br><span class="line">import java.util.*;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author: liuxuan</span><br><span class="line"> * @date: 2022-09-11 22:25</span><br><span class="line"> **/</span><br><span class="line">public class TestRemoveDup &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *     TreeSetçš„æœ¬è´¨æ˜¯ä¸€ä¸ª&quot;æœ‰åºçš„ï¼Œå¹¶ä¸”æ²¡æœ‰é‡å¤å…ƒç´ &quot;çš„é›†åˆï¼Œå®ƒæ˜¯é€šè¿‡TreeMapå®ç°çš„ã€‚</span><br><span class="line">     *     TreeSetæ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line">     *     å¦‚æœå‘TreeSeté›†åˆä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå…ƒç´ æœ¬èº«æ²¡æœ‰å…·å¤‡è‡ªç„¶é¡ºåºçš„ç‰¹æ€§ï¼Œå¹¶ä¸”å…ƒç´ æ‰€å±çš„ç±»ä¹Ÿæ²¡æœ‰</span><br><span class="line">     *     å®ç°Comparableæ¥å£ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨åˆ›å»ºTreeSetå¯¹è±¡çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼›</span><br><span class="line">     */</span><br><span class="line">    //æ ¹æ®åå­—è¿›è¡Œæ¯”è¾ƒï¼Œç›¸ç­‰æ—¶TreeSetä¼šå°†è¯¥å…ƒç´ è§†ä¸ºé‡å¤å…ƒç´ ï¼Œä¸å…è®¸æ·»åŠ ï¼›</span><br><span class="line">    private List&lt;Person&gt; removeDupByName(List&lt;Person&gt; people) &#123;</span><br><span class="line">        Set&lt;Person&gt; personSet = new TreeSet&lt;&gt;(Comparator.comparing(Person::getName));</span><br><span class="line">        personSet.addAll(people);</span><br><span class="line">        return new ArrayList&lt;&gt;(personSet);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private List&lt;Person&gt; removeDupByName2(List&lt;Person&gt; people) &#123;</span><br><span class="line">        List&lt;Person&gt; unique = people.stream().collect(</span><br><span class="line">                Collectors.collectingAndThen(</span><br><span class="line">                        Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;(Comparator.comparing(Person::getName))), ArrayList::new)</span><br><span class="line">        );</span><br><span class="line">        return unique;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //filterçš„ä½¿ç”¨æ–¹å¼ä¸ºï¼š filter(item -&gt; itemçš„é€»è¾‘åˆ¤æ–­ ) ï¼Œå…¶ä¸­filterä¼šä¿ç•™åˆ¤æ–­æ¡ä»¶ä¸ºtrueçš„è®°å½•</span><br><span class="line">    private List&lt;Person&gt; removeDupByName3(List&lt;Person&gt; people) &#123;</span><br><span class="line">        //ç”¨ä¸€ä¸ªnameçš„listå»é‡ï¼Œæ²¡ç”¨TreeSet</span><br><span class="line">        List&lt;String&gt; names = new ArrayList&lt;&gt;();//ç”¨æ¥ä¸´æ—¶å­˜å‚¨personçš„id</span><br><span class="line"></span><br><span class="line">        List&lt;Person&gt; personList = people.stream().filter(// è¿‡æ»¤å»é‡</span><br><span class="line">                v -&gt; &#123;</span><br><span class="line">                    boolean flag = !names.contains(v.getName());</span><br><span class="line">                    names.add(v.getName());</span><br><span class="line">                    return flag;</span><br><span class="line">                &#125;</span><br><span class="line">        ).collect(Collectors.toList());</span><br><span class="line">        return personList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Person&gt; people = new ArrayList&lt;&gt;();</span><br><span class="line">        Person p1 = new Person(&quot;Liu&quot;,30);</span><br><span class="line">        people.add(p1);</span><br><span class="line">        Person p2 = new Person(&quot;Mi&quot;,36);</span><br><span class="line">        people.add(p2);</span><br><span class="line">        Person p3 = new Person(&quot;Liu&quot;,31);</span><br><span class="line">        people.add(p3);</span><br><span class="line">        TestRemoveDup testRemoveDup = new TestRemoveDup();</span><br><span class="line"></span><br><span class="line">        List&lt;Person&gt; people1 = testRemoveDup.removeDupByName(people);</span><br><span class="line">        List&lt;Person&gt; people2 = testRemoveDup.removeDupByName2(people);</span><br><span class="line">        List&lt;Person&gt; people3 = testRemoveDup.removeDupByName3(people);</span><br><span class="line">        System.out.println(people1);</span><br><span class="line">        System.out.println(people2);</span><br><span class="line">        System.out.println(people3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Getter</span><br><span class="line">    @Setter</span><br><span class="line">    @ToString</span><br><span class="line">    @RequiredArgsConstructor</span><br><span class="line">    static class Person &#123;</span><br><span class="line">        private final String name;</span><br><span class="line">        private final Integer age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ç¬¬ä¸‰ç§ï¼Œç”¨filteræ–¹æ³•ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œä¼˜é›…ä¸€ç‚¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">unique = books.stream().filter(distinctByKey(o -&gt; o.getId())).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">private static &lt;T&gt; Predicate&lt;T&gt; distinctByKey(Function&lt;? super T, ?&gt; keyExtractor) &#123;</span><br><span class="line">    Map&lt;Object, Boolean&gt; seen = new ConcurrentHashMap&lt;&gt;();</span><br><span class="line">    return t -&gt; seen.putIfAbsent(keyExtractor.apply(t), Boolean.TRUE) == null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">filteræ ¹æ®Predicateè¿”å›çš„å¸ƒå°”å€¼æ¥åˆ¤æ–­æ˜¯å¦è¦è¿‡æ»¤æ‰ï¼Œ</span><br><span class="line">ä¼šè¿‡æ»¤æ‰è¿”å›å€¼ä¸ºfalseçš„æ•°æ®ã€‚</span><br><span class="line">è€Œæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„distinctByKeyè¿”å›å€¼å°±æ˜¯Predicateï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥filterã€‚</span><br><span class="line"></span><br><span class="line">distinctByKeyä¹Ÿéœ€è¦ä¸€ä¸ªFunctionçš„å‚æ•°ã€‚</span><br><span class="line">distinctByKeyå…ˆæ˜¯å®šä¹‰äº†ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Map(ç›¸æ¯”äºHashtableä»¥åŠCollections.synchronizedMap()ï¼Œ</span><br><span class="line">ConcurrentHashMapåœ¨çº¿ç¨‹å®‰å…¨çš„åŸºç¡€ä¸Šæä¾›äº†æ›´å¥½çš„å†™å¹¶å‘èƒ½åŠ›ï¼Œ</span><br><span class="line">ä½†åŒæ—¶é™ä½äº†å¯¹è¯»ä¸€è‡´æ€§çš„è¦æ±‚)ï¼Œå› ä¸ºåœ¨æµè®¡ç®—ä¸­æ˜¯å¤šçº¿ç¨‹å¤„ç†çš„ï¼Œéœ€è¦çº¿ç¨‹å®‰å…¨ã€‚</span><br><span class="line"></span><br><span class="line">ç„¶åå°†å€¼ä½œä¸ºkey,TRUEä½œä¸ºvalue putåˆ°mapä¸­ã€‚</span><br><span class="line">è¿™é‡Œçš„putæ–¹æ³•ä½¿ç”¨çš„æ˜¯putIfAbsent()ã€‚</span><br><span class="line">putIfAbsent()æ–¹æ³•æ˜¯å¦‚æœkeyä¸å­˜åœ¨åˆ™putå¦‚mapä¸­ï¼Œå¹¶è¿”å›nullã€‚è‹¥keyå­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›keyæ‰€å¯¹åº”çš„valueå€¼ã€‚</span><br><span class="line"></span><br><span class="line">https://www.cnblogs.com/zwh0910/p/15877284.html</span><br></pre></td></tr></table></figure>


<h4 id="åäºŒã€list-addå’ŒaddAllçš„ä¸€ä¸ªNPEé—®é¢˜"><a href="#åäºŒã€list-addå’ŒaddAllçš„ä¸€ä¸ªNPEé—®é¢˜" class="headerlink" title="åäºŒã€list.addå’ŒaddAllçš„ä¸€ä¸ªNPEé—®é¢˜"></a>åäºŒã€list.addå’ŒaddAllçš„ä¸€ä¸ªNPEé—®é¢˜</h4><p>èƒŒæ™¯ï¼šaddAllé‡åˆ°çš„ä¸€ä¸ªç©ºæŒ‡é’ˆé—®é¢˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test7() &#123;</span><br><span class="line">    Map&lt;Long, Long&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">    map.put(1L, 1L);</span><br><span class="line">    List&lt;Long&gt; list = Lists.newArrayList();</span><br><span class="line">    System.out.println(map.get(2L)); //null</span><br><span class="line">    list.add(null); //æ²¡é—®é¢˜</span><br><span class="line">    //list.addAll(null); //ä¼šæŠ¥ç©ºæŒ‡é’ˆ</span><br><span class="line">    //list.addAll(1L);  //addAllåªèƒ½ä¼ Collection</span><br><span class="line"></span><br><span class="line">    list.add(1L);</span><br><span class="line">    list.add(3L);</span><br><span class="line">    list.add(1, 2L);</span><br><span class="line">    System.out.println(list);  //[null, 2, 1, 3]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>addæ–¹æ³•æ˜¯å°†å…ƒç´ å¯ä»¥æ’åœ¨æŒ‡å®šçš„ä½ç½®ï¼Œå¦‚æœå‚æ•°åªæœ‰ä¸€ä¸ªçš„è¯å°±é»˜è®¤æ’åœ¨é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œè€Œå¯¹äºaddAllæ–¹æ³•ï¼Œå¯ä»¥çœ‹å…¶å®ä½œç”¨å·®ä¸å¤šï¼Œä½†æ˜¯å‚æ•°å¿…é¡»ä¸ºCollection é›†åˆã€‚</p>
<p>addæ–¹æ³•å‚æ•°ä¸ºæ³›å‹Eï¼Œæ‰€ä»¥ä»–æ˜¯æ”¯æŒä»»æ„ç±»å‹çš„ï¼Œä½†æ˜¯è¿™é‡Œè¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœä½ ä½¿ç”¨addæ–¹æ³•å¹¶ä¸”ä¼ çš„å‚æ•°ä¸ºé›†åˆï¼Œé‚£ä¹ˆå…¶å® listé›†åˆä¼šæŠŠè¿™ä¸ªå‚æ•°ä¸­çš„é›†åˆå½“åšä¸€ä¸ªæ•´ä½“ï¼Œæ·»åŠ åˆ°åŸæœ¬çš„é›†åˆä¸­ã€‚<br>è€ŒaddAllæ–¹æ³•ï¼Œåˆ™ä¼šæŠŠå‚æ•°é‡Œé¢çš„é›†åˆç»™åˆ†åˆ«æ”¾è¿›åŸæœ¬çš„é›†åˆä¸­ã€‚<br>(é€šè¿‡ä¸€ä¸ªforEach å¾ªç¯éå†åå¾—åˆ°å‚æ•°é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œåœ¨å¾ªç¯é‡Œé¢å†åˆ†åˆ«è°ƒç”¨addæ–¹æ³•æ¥å®ç°è¿™ä¸ªåŠŸèƒ½)</p>
<p>âš ï¸addAllä¹‹åä¿®æ”¹ä¹‹å‰çš„listçš„å…ƒç´ ï¼š<br>ä¿®æ”¹æ˜¯å¯¹æ–°çš„listæœ‰æ•ˆçš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">A a = new A();</span><br><span class="line">a.setName(&quot;lll&quot;);</span><br><span class="line">List&lt;A&gt; list1 = Lists.newArrayList(a);</span><br><span class="line">List&lt;A&gt; list2 = Lists.newArrayList();</span><br><span class="line">list2.addAll(list1);</span><br><span class="line">System.out.println(list2); //[A(name=lll)]</span><br><span class="line">a.setName(&quot;www&quot;);</span><br><span class="line">System.out.println(list1); //[A(name=www)]</span><br><span class="line">System.out.println(list2); //[A(name=www)]</span><br></pre></td></tr></table></figure>

<h4 id="åä¸‰ã€liståè½¬"><a href="#åä¸‰ã€liståè½¬" class="headerlink" title="åä¸‰ã€liståè½¬"></a>åä¸‰ã€liståè½¬</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨streamçš„sorted (è¿™ç§æ–¹æ³•åªèƒ½ç”¨äºæ™®é€šç±»å‹)</span><br><span class="line">List&lt;Long&gt; li = Lists.newArrayList(1L, 2L);</span><br><span class="line">li = li.stream().sorted(Comparator.reverseOrder()).collect(Collectors.toList());</span><br><span class="line">System.out.println(li);</span><br><span class="line"></span><br><span class="line">2.ä½¿ç”¨Collections.reverseæ–¹æ³•</span><br><span class="line">A a1 = new A(&quot;lll&quot;);</span><br><span class="line">A a2 = new A(&quot;hhh&quot;);</span><br><span class="line">List&lt;A&gt; list = Lists.newArrayList(a1, a2);</span><br><span class="line">Collections.reverse(list);</span><br><span class="line">System.out.println(list);</span><br><span class="line"></span><br><span class="line">3.ä¿ç•™åŸListè¿›è¡Œåè½¬</span><br><span class="line">List&lt;Integer&gt; listData = new ArrayList&lt;&gt;();</span><br><span class="line">listData.add(1);</span><br><span class="line">listData.add(2);</span><br><span class="line">List&lt;Integer&gt; tempData = Arrays.asList(new Integer[listData.size()]);</span><br><span class="line">Collections.copy(tempData, listData);</span><br><span class="line">Collections.reverse(listData);</span><br><span class="line">System.out.println(&quot;åè½¬ååŸæ¥:&quot; + tempData);</span><br><span class="line">System.out.println(&quot;åè½¬åç°åœ¨:&quot; + listData);</span><br></pre></td></tr></table></figure>

<h4 id="åå››ã€listå¤åˆ¶"><a href="#åå››ã€listå¤åˆ¶" class="headerlink" title="åå››ã€listå¤åˆ¶"></a>åå››ã€listå¤åˆ¶</h4><p>é¦–å…ˆçœ‹ä¸€ä¸‹åˆå§‹åŒ–æŒ‡å®šé•¿åº¦Listçš„æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = Arrays.asList(new Integer[10]);</span><br><span class="line">System.out.println(list.size());  //10</span><br><span class="line">System.out.println(list);  //éƒ½æ˜¯null</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; list1 = new ArrayList&lt;&gt;(10);</span><br><span class="line">System.out.println(list1.size());  //0</span><br><span class="line">System.out.println(list1);  //ç©º[]</span><br></pre></td></tr></table></figure>

<p>listå¤åˆ¶çš„å‡ ä¸ªæ–¹æ³•ï¼š</p>
<p>1ã€copyä¸€ä¸ªListæœ€ç®€å•æ–¹å¼å°±æ˜¯ä½¿ç”¨æ„é€ å™¨ï¼Œè¿™ä¸ªæ„é€ å™¨èƒ½æ¥æ”¶ä¸€ä¸ªé›†åˆå‚æ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = Lists.newArrayList(1, 2, 3);</span><br><span class="line">List&lt;Integer&gt; copy = new ArrayList&lt;&gt;(list);</span><br><span class="line">System.out.println(copy);  //1 2 3</span><br><span class="line">list.add(4);</span><br><span class="line">System.out.println(copy);  //1 2 3</span><br><span class="line">list.set(0, 5);</span><br><span class="line">System.out.println(copy);  //1 2 3</span><br></pre></td></tr></table></figure>
<p>å¯¹åŸæ¥çš„listè¿›è¡Œaddï¼Œæˆ–è€…setä¿®æ”¹æŸå…ƒç´ ï¼Œä¸ä¼šå½±å“åˆ°å¤åˆ¶çš„ã€‚</p>
<p>ä½†æ˜¯ç”±äºä½¿ç”¨è¿™ç§æ–¹å¼çš„å†…éƒ¨æœºåˆ¶æ˜¯ï¼šå¤åˆ¶å¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯cloneå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å¯¹è±¡çš„æ¯ä¸€ä¸ªä¿®æ”¹éƒ½å°†åŒæ—¶å½±å“ä¸¤ä¸ªlistã€‚</p>
<p>æ­£å¼ç”±äºä¸Šè¿°çš„åŸå› ï¼Œä½¿ç”¨æ„é€ å™¨è¿™ç§æ–¹æ³•æ¯”è¾ƒé€‚ç”¨äºé‚£äº›ä¸å¯æ”¹å˜å¯¹è±¡åœ¨listé—´çš„å¤åˆ¶ã€‚æ¯”å¦‚Integerã€Stringâ€¦</p>
<p>2ã€addAllæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; copy = new ArrayList&lt;&gt;();</span><br><span class="line">copy.addAll(list);</span><br></pre></td></tr></table></figure>
<p>å’Œä½¿ç”¨æ„é€ å™¨ä¸€æ ·ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œä¸¤ä¸ªlistä¸­çš„å†…å®¹éƒ½å°†å¼•ç”¨çš„æ˜¯ç›¸åŒå¯¹è±¡ã€‚</p>
<p>3ã€Collections.copy</p>
<p>Collectionsç±»æä¾›äº†ä¸€äº›ä¸“é—¨ç”¨äºæ“ä½œé›†åˆçš„é™æ€æ–¹æ³•ã€‚å…¶ä¸­ä¸€ä¸ªå°±æ˜¯copyã€‚Collections.copy(dest,source),è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯source list å’Œä¸€ä¸ªdest listï¼ˆdest listçš„é•¿åº¦åº”å¤§äºsource listï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼šIndexOutOfBoundsExceptionï¼‰ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•çš„ç‰¹ç‚¹æ˜¯ï¼š å®ƒå°†ä¿æŒæ¯ä¸€ä¸ªè¢«copyå…ƒç´ åœ¨ç›®æ ‡é›†åˆä¸­çš„ä¸‹æ ‡å’Œå®ƒä»¬åœ¨æºé›†åˆä¸­çš„ä¸‹æ ‡ä¸€æ ·ã€‚  å³ï¼š æºé›†åˆä¸­ä¸‹æ ‡ä¸º1çš„å…ƒç´ ä¼šè¢«å¤åˆ¶åˆ°ç›®æ ‡é›†åˆçš„ä¸‹æ ‡ä¸º1çš„ä½ç½®ä¸Šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; source = Arrays.asList(1,2,3);</span><br><span class="line">List&lt;Integer&gt; dest = Arrays.asList(4,5,6);</span><br><span class="line">Collections.copy(dest, source);</span><br><span class="line">System.out.println(dest);  //1 2 3</span><br><span class="line"></span><br><span class="line">A a1 = new A(&quot;111&quot;);</span><br><span class="line">A a2 = new A(&quot;222&quot;);</span><br><span class="line">List&lt;A&gt; list2 = Lists.newArrayList(a1, a2);</span><br><span class="line">// List&lt;A&gt; list3 = new ArrayList&lt;&gt;(2); //è¿™ç§åˆå§‹åŒ–å¤§å°ä¸è¡Œ</span><br><span class="line">List&lt;A&gt; list3 = Lists.newArrayList(new A[2]);</span><br><span class="line">System.out.println(list3);  //[null, null]</span><br><span class="line">Collections.copy(list3, list2);</span><br><span class="line">System.out.println(list3);  //[ListTest.A(name=111), ListTest.A(name=222)]</span><br><span class="line">list2.get(0).setName(&quot;333&quot;);</span><br><span class="line">System.out.println(list3);  //ä¼šåŒæ—¶æ”¹å˜å¤åˆ¶çš„List</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šè¿™ç§å¤åˆ¶æ–¹æ³•ä¹Ÿæ˜¯ç›´æ¥å¤åˆ¶å¼•ç”¨ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´å¯¹è±¡ï¼Œæ”¹å˜åŸæ¥Listçš„å¯¹è±¡ä¼šå½±å“å¤åˆ¶çš„Listã€‚</p>
<p>4ã€ä½¿ç”¨Java8 stream</p>
<p>åœ¨Java8ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨streamæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;A&gt; list4 = list2.stream().collect(Collectors.toList());</span><br><span class="line">list2.get(0).setName(&quot;444&quot;);</span><br><span class="line">System.out.println(list4);  //ä¼šåŒæ—¶æ”¹å˜å¤åˆ¶çš„List</span><br></pre></td></tr></table></figure>

<p>å¥½å¤„æ˜¯å¯ä»¥ç”¨streamè¿›è¡Œå…¶ä»–æ“ä½œï¼Œä½†æ˜¯è¿˜æ˜¯æµ…æ‹·è´ã€‚</p>
<p>5ã€å¯¹è±¡æ·±æ‹·è´</p>
<p>é¦–å…ˆï¼Œçœ‹ä¸‹å¯¹è±¡æ€ä¹ˆæ·±æ‹·è´ï¼Œé‡å†™Objectçš„cloneæ–¹æ³•ï¼Œå¹¶ä¸”éœ€è¦å®ç°Cloneableæ¥å£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Getter</span><br><span class="line">@Setter</span><br><span class="line">@ToString</span><br><span class="line">static</span><br><span class="line">class A implements Cloneable &#123;</span><br><span class="line">    A(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected A clone() throws CloneNotSupportedException &#123;</span><br><span class="line">        return (A)super.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸æƒ³è¦å¼‚å¸¸ï¼Œå°±åœ¨cloneæ–¹æ³•é‡Œè‡ªå·±å†™setæ–¹æ³•ï¼Œæ–°å»ºå¯¹è±¡è¿”å›ã€‚</p>
<p>å¯¹è±¡çš„æ‹·è´ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A a1 = new A(&quot;11&quot;);</span><br><span class="line">A a2 = a1;  //æµ…æ‹·è´</span><br><span class="line">System.out.println(a2);</span><br><span class="line">System.out.println(a1 == a2);  //true</span><br><span class="line">A a3 = a1.clone();</span><br><span class="line">System.out.println(a1 == a3);  //false</span><br></pre></td></tr></table></figure>

<hr>
<p>Apache Commons Langåºåˆ—åŒ– å®ç°å¯¹è±¡æ·±æ‹·è´</p>
<p>ç¬¬ä¸€æ­¥ã€å¯¼å…¥commons-lang3åŒ…</p>
<p>ç¬¬äºŒæ­¥ã€å®ä½“ç±»å®ç°Serializableæ¥å£</p>
<p>ç¬¬ä¸‰æ­¥ã€è°ƒç”¨SerializationUtilså·¥å…·ç±»ï¼Œå®ç°æ·±æ‹·è´ï¼ˆæ³¨æ„ï¼šSerializationUtilsä¸èƒ½ç›´æ¥æ‹·è´Listç±»å‹ï¼‰<br><code>User user2 = SerializationUtils.clone(user1);</code></p>
<p>å¦‚æœæƒ³æ‹·è´Listï¼Œéœ€è¦æ–°å»ºä¸€ä¸ªå®ä½“ç±»implements Serializableï¼Œç„¶åå°†listå˜ä¸ºå…¶ä¸­å±æ€§ï¼Œå†ç”¨ä¸Šé¢çš„æ“ä½œæ·±æ‹·è´æ–°å»ºå¯¹è±¡ï¼Œå†å–å…¶ä¸­çš„listã€‚</p>
<p>æˆ–è€…ç”¨å¾ªç¯addæ·±æ‹·è´åçš„å¯¹è±¡çš„æ–¹å¼å®ç°listçš„æ·±æ‹·è´ã€‚</p>
<p>Javaå¯¹è±¡æ·±æ‹·è´è¯¦è§£ï¼ˆListæ·±æ‹·è´ï¼‰:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42675423/article/details/128260074">https://blog.csdn.net/weixin_42675423/article/details/128260074</a></p>
<hr>
<p>6ã€jsonåºåˆ—åŒ–å®ç°listæ·±æ‹·è´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A a4 = new A(&quot;111&quot;);</span><br><span class="line">A a5 = new A(&quot;222&quot;);</span><br><span class="line">List&lt;A&gt; list1 = Lists.newArrayList(a4, a5);</span><br><span class="line">List&lt;A&gt; list2 = JSONObject.parseArray(JSONObject.toJSONString(list1), A.class); //æ·±æ‹·è´</span><br><span class="line">System.out.println(list2);</span><br></pre></td></tr></table></figure>

<h4 id="åäº”ã€listäº¤é›†å¹¶é›†"><a href="#åäº”ã€listäº¤é›†å¹¶é›†" class="headerlink" title="åäº”ã€listäº¤é›†å¹¶é›†"></a>åäº”ã€listäº¤é›†å¹¶é›†</h4><p>æ±‚ä¸¤ä¸ªlistçš„äº¤é›†</p>
<p>éœ€è¦å¯¼å…¥apacheçš„åŒ…ï¼šcommons-collections</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list1 = Lists.newArrayList(&quot;11&quot;, &quot;22&quot;, &quot;33&quot;);</span><br><span class="line">List&lt;String&gt; list2 = Lists.newArrayList(&quot;44&quot;, &quot;22&quot;, &quot;33&quot;);</span><br><span class="line">Collection&lt;String&gt; list3 = CollectionUtils.intersection(list1, list2);</span><br></pre></td></tr></table></figure>

<hr>
<p>ä»list1ä¸­ç§»é™¤å­˜åœ¨list2ä¸­çš„å…ƒç´ ï¼ˆå·®é›†ï¼‰ï¼š<code>list1.removeAll(list2)</code></p>
<p>è°ƒç”¨æµç¨‹ï¼šremoveAll-&gt;contains-&gt;equalsæ–¹æ³•ï¼Œå¯¹äºå¼•ç”¨ç±»å‹ï¼Œè¦ä½¿ç”¨removeAllï¼Œéœ€è¦é‡å†™equalsæ–¹æ³•ã€‚<br>containsæ–¹æ³•ä¸­ï¼Œå½“å¯¹è±¡oä¸ä¸ºç©ºæ—¶ï¼Œè¿­ä»£åˆ¤æ–­ç”¨åˆ°äº†Objectçš„equalsæ–¹æ³•ï¼Œè€ŒObjectçš„equalsæ–¹æ³•æŒ‡çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼Œè¿™é‡Œå°±éœ€è¦é‡å†™equalsæ–¹æ³•ã€‚</p>
<p>ä¸¤ä¸ªlistçš„å¹¶é›†ï¼š<code>a.addAll(b);</code></p>
<p>ä¸¤ä¸ªlistçš„äº¤é›†ï¼š<code>a.retainAll(b);</code></p>
<p>è¦å»é‡çš„ï¼š<code>List newList = b.stream().distinct().collect(Collectors.toList());</code></p>
<hr>
<p>lambdaè¡¨è¾¾å¼å–äº¤é›†ã€å¹¶é›†ã€å·®é›†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    List&lt;String&gt; list1 = new ArrayList&lt;String&gt;();</span><br><span class="line">    list1.add(&quot;1&quot;);</span><br><span class="line">    list1.add(&quot;2&quot;);</span><br><span class="line">    list1.add(&quot;3&quot;);</span><br><span class="line">    list1.add(&quot;5&quot;);</span><br><span class="line">    list1.add(&quot;6&quot;);</span><br><span class="line"> </span><br><span class="line">    List&lt;String&gt; list2 = new ArrayList&lt;String&gt;();</span><br><span class="line">    list2.add(&quot;2&quot;);</span><br><span class="line">    list2.add(&quot;3&quot;);</span><br><span class="line">    list2.add(&quot;7&quot;);</span><br><span class="line">    list2.add(&quot;8&quot;);</span><br><span class="line"> </span><br><span class="line">    // äº¤é›†</span><br><span class="line">    List&lt;String&gt; intersection = list1.stream().filter(item -&gt; list2.contains(item)).collect(toList());</span><br><span class="line">    System.out.println(&quot;---äº¤é›† intersection---&quot;);</span><br><span class="line">    intersection.parallelStream().forEach(System.out :: println);</span><br><span class="line"> </span><br><span class="line">    // å·®é›† (list1 - list2)</span><br><span class="line">    List&lt;String&gt; reduce1 = list1.stream().filter(item -&gt; !list2.contains(item)).collect(toList());</span><br><span class="line">    System.out.println(&quot;---å·®é›† reduce1 (list1 - list2)---&quot;);</span><br><span class="line">    reduce1.parallelStream().forEach(System.out :: println);</span><br><span class="line"></span><br><span class="line">    // å¹¶é›†</span><br><span class="line">    List&lt;String&gt; listAll = list1.parallelStream().collect(toList());</span><br><span class="line">    List&lt;String&gt; listAll2 = list2.parallelStream().collect(toList());</span><br><span class="line">    listAll.addAll(listAll2);</span><br><span class="line">    System.out.println(&quot;---å¹¶é›† listAll---&quot;);</span><br><span class="line">    listAll.parallelStream().forEachOrdered(System.out :: println);</span><br><span class="line"> </span><br><span class="line">    // å»é‡å¹¶é›†</span><br><span class="line">    List&lt;String&gt; listAllDistinct = listAll.stream().distinct().collect(toList());</span><br><span class="line">    System.out.println(&quot;---å¾—åˆ°å»é‡å¹¶é›† listAllDistinct---&quot;);</span><br><span class="line">    listAllDistinct.parallelStream().forEachOrdered(System.out :: println);</span><br><span class="line"> </span><br><span class="line">    System.out.println(&quot;---åŸæ¥çš„List1---&quot;);</span><br><span class="line">    list1.parallelStream().forEachOrdered(System.out :: println);</span><br><span class="line">    System.out.println(&quot;---åŸæ¥çš„List2---&quot;);</span><br><span class="line">    list2.parallelStream().forEachOrdered(System.out :: println);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åå…­ã€è·å–List-lt-DO-gt-ä¸­æœ€å°çš„begin"><a href="#åå…­ã€è·å–List-lt-DO-gt-ä¸­æœ€å°çš„begin" class="headerlink" title="åå…­ã€è·å–List&lt;DO&gt;ä¸­æœ€å°çš„begin"></a>åå…­ã€è·å–<code>List&lt;DO&gt;</code>ä¸­æœ€å°çš„begin</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DO do = list.stream().min(Comparator.comparing(DO::getBegin)).orElse(null);</span><br><span class="line">if (do != null) &#123;</span><br><span class="line">    Date min = do.getBegin();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢Streamé‡Œçš„minï¼Œç»“åˆOptionalã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Long&gt; minBegin = list.stream()</span><br><span class="line">    .map(DO::getBegin)</span><br><span class="line">    .min(Long::compareTo);</span><br><span class="line">if(minBegin.isPresent())&#123;</span><br><span class="line">    minBegin.get();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><p>LinkedListæ˜¯ä¸€ç§å¯ä»¥åœ¨ä»»ä½•ä½ç½®è¿›è¡Œé«˜æ•ˆåœ°æ’å…¥å’Œç§»é™¤æ“ä½œçš„æœ‰åºåºåˆ—ï¼Œå®ƒæ˜¯åŸºäºåŒå‘é“¾è¡¨å®ç°çš„ï¼Œæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå…è®¸å…ƒç´ ä¸ºnullçš„åŒå‘é“¾è¡¨ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/162980143">https://zhuanlan.zhihu.com/p/162980143</a></p>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><h4 id="âœ…ç§»é™¤"><a href="#âœ…ç§»é™¤" class="headerlink" title="âœ…ç§»é™¤"></a>âœ…ç§»é™¤</h4><p>ç§»é™¤Seté›†åˆä¸­çš„æŒ‡å®šå¯¹è±¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; set = Sets.newHashSet();</span><br><span class="line">set.add(&quot;111&quot;);</span><br><span class="line">set.add(&quot;222&quot;);</span><br><span class="line">set.remove(&quot;111&quot;);</span><br><span class="line">System.out.println(set);</span><br></pre></td></tr></table></figure>

<h4 id="è·å–ä¸Šä¸€ä¸ªä¸‹ä¸€ä¸ªå…ƒç´ "><a href="#è·å–ä¸Šä¸€ä¸ªä¸‹ä¸€ä¸ªå…ƒç´ " class="headerlink" title="è·å–ä¸Šä¸€ä¸ªä¸‹ä¸€ä¸ªå…ƒç´ "></a>è·å–ä¸Šä¸€ä¸ªä¸‹ä¸€ä¸ªå…ƒç´ </h4><p>ç”¨è¿­ä»£å™¨çš„<code>previous()</code>æ–¹æ³•å’Œ<code>next()</code>æ–¹æ³•</p>
<h3 id="Comparableã€Comparator"><a href="#Comparableã€Comparator" class="headerlink" title="Comparableã€Comparator"></a>Comparableã€Comparator</h3><p>è¦è®²è¿™ä¸ªï¼Œå°±è¦è®²listçš„æ’åºï¼Œçœ‹ä¸Šé¢ï¼Œæœ‰å‡ ç§åŠæ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.list.sort(Comparator.comparing(A::getB))</span><br><span class="line">2.list.stream.sorted(Comparator.comparing(A::getB)).collect(Collectors.toList())</span><br><span class="line">3.list.stream.sorted((a1,a2)-&gt;a1.compareTo(a2))</span><br><span class="line">4.ç›´æ¥Collections.sort(list)  </span><br><span class="line">//è¿™ä¸ªéœ€è¦listçš„å…ƒç´ å®ç°Comparableæ¥å£ï¼Œé‡å†™compareToæ–¹æ³•ï¼Œæ¯”å¦‚Stringå°±å®ç°äº†</span><br><span class="line">5.Collections.sort(list, new Comparator&lt;A&gt;()&#123;</span><br><span class="line">  @Oerride</span><br><span class="line">  public int compare(A a1, A a2)&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä»–ä»¬éƒ½æ˜¯javaçš„æ¥å£, å¹¶ä¸”æ˜¯ç”¨æ¥å¯¹è‡ªå®šä¹‰çš„å®ä½“ç±»æ¯”è¾ƒå¤§å°çš„.</p>
<p>Comparableæ¥å£éœ€è¦è¿›è¡Œæ¯”è¾ƒçš„å®ä½“ç±»åœ¨å®šä¹‰æ—¶å®ç°å®ƒï¼Œé‡å†™compareToæ–¹æ³•ã€‚<br>Comparatoræ¥å£æ˜¯åœ¨é›†åˆå¤–éƒ¨å®ç°çš„æ’åºï¼Œé‡å†™compareæ–¹æ³•ã€‚Comparatoræ¥å£æ¯”Comparableæ¥å£è¦çµæ´»ã€‚</p>
<p>âœ… compareTo()æ–¹æ³•<br>Javaæä¾›äº†ä¸€ä¸ªComparableæ¥å£ï¼Œè¯¥æ¥å£é‡Œå®šä¹‰äº†ä¸€ä¸ªcompareTo(Object obj)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œå®ç°è¯¥æ¥å£çš„ç±»å¿…é¡»å®ç°è¯¥æ–¹æ³•ï¼Œå®ç°äº†è¯¥æ¥å£çš„ç±»çš„å¯¹è±¡å°±å¯ä»¥æ¯”è¾ƒå¤§å°ã€‚å½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä¸å¦ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œä¾‹å¦‚obj1.compareTo(obj2)ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å›0ï¼Œåˆ™è¡¨ç¤ºä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ­£æ•´æ•°ï¼Œåˆ™è¡¨æ˜obj1å¤§äºobj2ï¼›å¦‚æœè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨æ˜obj1å°äºobj2ã€‚</p>
<p>ä¸€äº›å·²ç»å®ç°äº†Comparableæ¥å£çš„å¸¸ç”¨ç±»ï¼š<br>Characterï¼šæŒ‰ç…§å­—ç¬¦çš„UNICODEå€¼è¿›è¡Œæ¯”è¾ƒ<br>Stringï¼šæŒ‰ç…§å­—ç¬¦çš„UNICODEå€¼è¿›è¡Œæ¯”è¾ƒ<br>Date\Timeï¼šå¤–é¢æ¯”é‡Œé¢æ–°ï¼Œè¿”å›1<br>Longï¼ša.compareTo(b)ï¼Œaæ¯”bå¤§è¿”å›1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ä»¥ç‰¹å®šæ ¼å¼è¿”å›æ—¥æœŸæ ¼å¼åŒ–ç¨‹åº</span><br><span class="line">DateFormat dateFormat = DateFormat.getDateInstance();</span><br><span class="line">Date oldTime = dateFormat.parse(&quot;2019-04-07 19:50:11&quot;);</span><br><span class="line">Date newTime = new Date();</span><br><span class="line">int result = oldTime.compareTo(newTime);</span><br><span class="line">System.out.println(result);</span><br><span class="line"></span><br><span class="line">// æ—¥æœŸå˜ä¸ºå­—ç¬¦ä¸²</span><br><span class="line">String str = dateFormat.format(new Date());</span><br></pre></td></tr></table></figure>

<h3 id="streamæµ-parallelStreamæµ"><a href="#streamæµ-parallelStreamæµ" class="headerlink" title="streamæµ parallelStreamæµ"></a>streamæµ parallelStreamæµ</h3><p>stream(): æ˜¯ä¸²è¡Œæ‰§è¡Œï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œ</p>
<p>parallelStream()ï¼šæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œå¼‚æ­¥æ‰§è¡Œï¼Œå¤šçº¿ç¨‹ï¼Œå¹¶ä¸”ä½¿ç”¨çš„çº¿ç¨‹æ± æ˜¯ForkJoinPool.commonï¼Œå¯èƒ½å­˜åœ¨å…±äº«èµ„æºã€çº¿ç¨‹å®‰å…¨ç­‰é—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">è¿‡æ»¤ï¼š</span><br><span class="line">List&lt;Integer&gt; integerList = Arrays.asList(1, 2, 3, 4, 5, 6);</span><br><span class="line">Stream&lt;Integer&gt; stream = integerList.stream().filter(i -&gt; i &gt; 3);   //filteré‡Œé¢çš„æ¡ä»¶æ˜¯ç•™ä¸‹æ¥çš„æ¡ä»¶</span><br><span class="line">integerList = stream.collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">æ’åºï¼š</span><br><span class="line">.stream().sorted((e1,e2)-&gt;e1.compareTo(e2)).</span><br><span class="line"></span><br><span class="line">å»é‡ï¼š</span><br><span class="line">.stream().distinct().</span><br><span class="line"></span><br><span class="line">æŒ‰ç…§å¯¹è±¡ä¸­æŸä¸€å…ƒç´ å»é‡ï¼š[tolook]</span><br><span class="line">.stream().filter(...)</span><br><span class="line"></span><br><span class="line">è¿”å›æŒ‡å®šæµä¸ªæ•°ï¼š</span><br><span class="line">.limit(5)</span><br><span class="line"></span><br><span class="line">è·³è¿‡æµä¸­å…ƒç´ ï¼š</span><br><span class="line">.skip(2)</span><br><span class="line"></span><br><span class="line">mapæµæ˜ å°„ï¼šå°†æ¥æ”¶çš„å…ƒç´ æ˜ å°„æˆå¦å¤–ä¸€ä¸ªå…ƒç´ ï¼š</span><br><span class="line">.map(ç±»::getå±æ€§).collect...</span><br><span class="line">.map(å¯¹è±¡-&gt;&#123;</span><br><span class="line">  æ„é€ å¦ä¸€ç§å¯¹è±¡;</span><br><span class="line">  return å¦ä¸€å¯¹è±¡;</span><br><span class="line">&#125;).</span><br><span class="line">.map(string-&gt;Long.valueOf(string)).  //Stringå˜ä¸ºLong</span><br><span class="line"></span><br><span class="line">å¯¹è±¡listæ ¹æ®æŸä¸€ä¸ªå…ƒç´ å˜ä¸ºmapï¼š(å˜æˆ å…ƒç´ -å¯¹è±¡listçš„map)</span><br><span class="line">list.stream().collect(Collectors.groupingBy(ç±»::getå±æ€§))</span><br><span class="line"></span><br><span class="line">//æµçš„è¿‡ç¨‹ä¸­å¯¹å…ƒç´ è¿›è¡Œæ“ä½œ</span><br><span class="line">List&lt;Long&gt; list = Lists.newArrayList();</span><br><span class="line">list2.stream().forEach(s -&gt; list.add(Long.valueOf(s)));</span><br><span class="line"></span><br><span class="line">anyMatchåˆ¤æ–­</span><br><span class="line">æƒ³æ¯”è¾ƒlist1ä¸­æ˜¯å¦å­˜åœ¨list2ä¸­çš„ä»»ä½•å¯¹è±¡</span><br><span class="line">å¯ä»¥éå†ä¸¤ä¸ªåˆ—è¡¨å¹¶ä½¿ç”¨.contains()æ¯”è¾ƒæ‰€æœ‰å…ƒç´ </span><br><span class="line">ä½†æ˜¯æ›´é«˜æ•ˆçš„æ–¹æ³•æ˜¯anyMatchï¼š</span><br><span class="line">List&lt;Item&gt; list1;</span><br><span class="line">List&lt;Item&gt; list2;</span><br><span class="line">boolean anyMatch = list1.stream().anyMatch(x -&gt; x.equals(list2.stream()));</span><br><span class="line">System.out.println(anyMatch);</span><br><span class="line">å¾ˆå®¹æ˜“ç†è§£ï¼Œå³æ˜¯æœ‰ä¸€ä¸ªæˆ–ä¸€ä¸ªä»¥ä¸Šçš„å…ƒç´ æ»¡è¶³å‡½æ•°å‚æ•°è®¡ç®—ç»“æœä¸ºtrueé‚£æ•´ä¸ªæ–¹æ³•è¿”å›å€¼ä¸ºtrueã€‚</span><br></pre></td></tr></table></figure>

<h4 id="âœ…list-stream-mapToDouble"><a href="#âœ…list-stream-mapToDouble" class="headerlink" title="âœ…list.stream().mapToDouble"></a>âœ…list.stream().mapToDouble</h4><p>æ±‚æœ€å¤§æœ€å°ï¼Œæ±‚å’Œæ±‚å¹³å‡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list.stream().mapToDouble(User::getAge).sum()//å’Œ</span><br><span class="line">list.stream().mapToDouble(User::getAge).max()//æœ€å¤§</span><br><span class="line">list.stream().mapToDouble(User::getAge).min()//æœ€å°</span><br><span class="line">list.stream().mapToDouble(User::getAge).average()//å¹³å‡å€¼</span><br><span class="line"></span><br><span class="line">double sum = list.stream().mapToDouble(Integer::doubleValue).sum();</span><br></pre></td></tr></table></figure>

<h4 id="âœ…listå˜map"><a href="#âœ…listå˜map" class="headerlink" title="âœ…listå˜map"></a>âœ…listå˜map</h4><p>ç¬¬ä¸€ç§ï¼šä¼šå‡ºç°é”®é‡å¤å¼‚å¸¸</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//ä»¥idä¸ºä¸»é”®è½¬ä¸ºmap</span><br><span class="line">Map&lt;Long, User&gt; map = list.stream().collect(Collectors.toMap(User::getId,Function.identity()));</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§ï¼šä¸ä¼šå‡ºç°é‡å¤é”®å¼‚å¸¸</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//ç»™å‡ºkeyé‡å¤æ—¶ï¼Œä½¿ç”¨å“ªä¸ªkeyä½œä¸ºä¸»é”®ï¼Œä»¥ä¸‹ä»£ç ä¸­çš„(key1, key2) -&gt; key2)ä»£è¡¨key1å’Œkey2é”®é‡å¤æ—¶è¿”å›key2åšä¸»é”®</span><br><span class="line">Map&lt;Long, User&gt; map = list.stream().collect(Collectors.toMap(User::getId, Function.identity(), (key1, key2) -&gt; key2));</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§ï¼šå¯¹è±¡å˜ä¸ºå±æ€§-å±æ€§map</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// ä¸æƒ³è¿”å›å¯¹è±¡ï¼Œåªè¿”å›å¯¹è±¡é‡ŒæŸä¸ªå±æ€§æ—¶ é‡‡ç”¨è¿™ç§æ–¹å¼</span><br><span class="line">Map&lt;Long, String&gt; map = list.stream().collect(Collectors.toMap(User::getId, User::getAge, (key1, key2) -&gt; key2));</span><br></pre></td></tr></table></figure>

<p>ç¬¬å››ç§ï¼šä»¥æŸä¸€å±æ€§åˆ†ç»„ï¼Œå˜ä¸ºå±æ€§-å¯¹è±¡list map</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Integer, List&gt; map = list.stream().collect(Collectors.groupingBy(User::getId));</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/lizaiismy/article/details/121352640">https://blog.csdn.net/lizaiismy/article/details/121352640</a></p>
<p>psï¼š<code>Function.identity()</code><br>Functionæ˜¯ä¸€ä¸ªæ¥å£ï¼ŒJava 8å…è®¸åœ¨æ¥å£ä¸­åŠ å…¥å…·ä½“æ–¹æ³•ã€‚æ¥å£ä¸­çš„å…·ä½“æ–¹æ³•æœ‰ä¸¤ç§ï¼Œdefaultæ–¹æ³•å’Œstaticæ–¹æ³•ï¼Œidentity()å°±æ˜¯Functionæ¥å£çš„ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚<br><code>Function.identity()</code>è¿”å›ä¸€ä¸ªè¾“å‡ºè·Ÿè¾“å…¥ä¸€æ ·çš„Lambdaè¡¨è¾¾å¼å¯¹è±¡ï¼Œç­‰ä»·äºå½¢å¦‚t -&gt; tå½¢å¼çš„Lambdaè¡¨è¾¾å¼ã€‚</p>
<p>æºç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static  Function identity() &#123;</span><br><span class="line">    return t -&gt; t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ï¼Œ<code>Function.identity()</code>æ˜¯ä¸€ä¸ªç”¨æ¥è¿”å›è‡ªå·±çš„lambdaè¡¨è¾¾å¼</p>
<h4 id="âœ…streamæµçš„max-minæ–¹æ³•"><a href="#âœ…streamæµçš„max-minæ–¹æ³•" class="headerlink" title="âœ…streamæµçš„max,minæ–¹æ³•"></a>âœ…streamæµçš„max,minæ–¹æ³•</h4><p>max : è·å–æœ€å¤§å€¼<br>min : è·å–æœ€å°å€¼</p>
<p><code>Optional&lt;T&gt; max(Comparator&lt;? super T&gt; comparator)</code></p>
<p>maxã€min æ–¹æ³•å‚æ•°ç±»å‹ä¸º Comparator æ¥å£,åˆ©ç”¨æ¯”è¾ƒå™¨è‡ªå®šä¹‰æ’åºã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class StreamDemo &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Person&gt; personList = Arrays.asList(</span><br><span class="line">                new Person(1, &quot;å¤§æ¯›&quot;, 30, 175),</span><br><span class="line">                new Person(2, &quot;äºŒæ¯›&quot;, 35, 170),</span><br><span class="line">                new Person(3, &quot;ä¸‰æ¯›&quot;, 26, 173),</span><br><span class="line">                new Person(4, &quot;å°æ¯›&quot;, 30, 175));</span><br><span class="line"> </span><br><span class="line">        // è·å– person ç±»å‹æµ</span><br><span class="line">        Stream&lt;Person&gt; personStream = personList.stream();</span><br><span class="line">        // æŒ‰ç…§å¹´é¾„å‡åºæ’åº,ç„¶åè·å–æ’åºåçš„æœ€å¤§å€¼ o1-o2 ä»£è¡¨å‡åºæ’åº;o2-o1 ä»£è¡¨é™åºæ’åº</span><br><span class="line">        Optional&lt;Person&gt; max = personStream.max(((o1, o2) -&gt; o1.getAge() - o2.getAge()));</span><br><span class="line">        System.out.println(max.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…æœ‰ä¸€ä¸ªList-lt-Map-gt-æƒ³æ ¹æ®å­—æ®µç»Ÿè®¡æ•°é‡"><a href="#âœ…æœ‰ä¸€ä¸ªList-lt-Map-gt-æƒ³æ ¹æ®å­—æ®µç»Ÿè®¡æ•°é‡" class="headerlink" title="âœ…æœ‰ä¸€ä¸ªList&lt;Map&gt;æƒ³æ ¹æ®å­—æ®µç»Ÿè®¡æ•°é‡"></a>âœ…æœ‰ä¸€ä¸ª<code>List&lt;Map&gt;</code>æƒ³æ ¹æ®å­—æ®µç»Ÿè®¡æ•°é‡</h4><p>ä½¿ç”¨Collectors.groupingBy</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Map&lt;String, Object&gt;&gt;list = </span><br><span class="line">Map&lt;String, Long&gt; res = list.stream()</span><br><span class="line">    .collect(Collectors.groupingBy(map -&gt; (String)map.get(&quot;city&quot;), Collectors.counting()));</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³ç»Ÿè®¡å»é‡åçš„æ•°é‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Map&lt;String, Object&gt;&gt;list = </span><br><span class="line">Map&lt;String, Long&gt; res = list.stream()</span><br><span class="line">    .collect(Collectors.groupingBy(map -&gt; (String)map.get(&quot;city&quot;), </span><br><span class="line">    Collectors.maping(map -&gt; map.get(&quot;task_id&quot;), Collectors.toSet())))</span><br><span class="line">    .entrySet()</span><br><span class="line">    .stream()</span><br><span class="line">    .collect(Collectors.toMap(Map.Entry :: getKey, e -&gt; (long)e.getValue().size())));</span><br></pre></td></tr></table></figure>


<h3 id="Dateç›¸å…³"><a href="#Dateç›¸å…³" class="headerlink" title="Dateç›¸å…³"></a>Dateç›¸å…³</h3><h4 id="âœ…now-after"><a href="#âœ…now-after" class="headerlink" title="âœ…now.after()"></a>âœ…now.after()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DateFormat dateformat = DateFormat.getDateInstance();</span><br><span class="line">Date old = dateformat.parse(&quot;2022-04-07 19:50:11&quot;);</span><br><span class="line">Date now = new Date();</span><br><span class="line">if(now.after(oldTime))&#123;</span><br><span class="line">    System.out.println(&quot;nowæ¯”afteræ–°&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…DateFormatç±»"><a href="#âœ…DateFormatç±»" class="headerlink" title="âœ…DateFormatç±»"></a>âœ…DateFormatç±»</h4><p>DateFormat æ˜¯æ—¥æœŸ/æ—¶é—´æ ¼å¼åŒ–å­ç±»çš„æŠ½è±¡ç±»ï¼Œå®ƒä»¥ä¸è¯­è¨€æ— å…³çš„æ–¹å¼æ ¼å¼åŒ–å¹¶è§£ææ—¥æœŸæˆ–æ—¶é—´ã€‚æ—¥æœŸ/æ—¶é—´æ ¼å¼åŒ–å­ç±»ï¼ˆå¦‚ SimpleDateFormatï¼‰å…è®¸è¿›è¡Œæ ¼å¼åŒ–ï¼ˆä¹Ÿå°±æ˜¯æ—¥æœŸâ†’æ–‡æœ¬ï¼‰ã€è§£æï¼ˆæ–‡æœ¬â†’æ—¥æœŸï¼‰å’Œæ ‡å‡†åŒ–æ—¥æœŸã€‚</p>
<p>åœ¨åˆ›å»º DateFormat å¯¹è±¡æ—¶ä¸èƒ½ä½¿ç”¨ new å…³é”®å­—ï¼Œè€Œåº”è¯¥ä½¿ç”¨ DateFormat ç±»ä¸­çš„é™æ€æ–¹æ³• getDateInstance()ï¼š<br><code>DateFormat df = DateFormat.getDatelnstance();</code><br>åœ¨åˆ›å»ºäº†ä¸€ä¸ª DateFormat å¯¹è±¡åï¼Œå¯ä»¥è°ƒç”¨è¯¥å¯¹è±¡ä¸­çš„æ–¹æ³•æ¥å¯¹æ—¥æœŸ/æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰å¯¹è±¡ï¼Œæ—¥æœŸã€æ—¶é—´ï¼Œä¹Ÿæœ‰getDateTimeInstance</span><br><span class="line">SHORTï¼š18-10-15 ä¸Šåˆ9:30</span><br><span class="line">FULLï¼š2018å¹´10æœˆ15æ—¥ æ˜ŸæœŸä¸€ ä¸Šåˆ09æ—¶30åˆ†43ç§’ CST</span><br><span class="line">MEDIUMï¼š2018-10-15 9:30:43</span><br><span class="line">LONGï¼š2018å¹´10æœˆ15æ—¥ ä¸Šåˆ09æ—¶30åˆ†43ç§’</span><br><span class="line"></span><br><span class="line">DateFormat df1 = DateFormat.getDateInstance(DateFormat.SHORT, Locale.CHINA);</span><br><span class="line">DateFormat df5 = DateFormat.getTimeInstance(DateFormat.SHORT, Locale.CHINA);</span><br><span class="line"></span><br><span class="line">//å­—ç¬¦ä¸²åˆ°Date</span><br><span class="line">Date old = dateformat.parse(&quot;2022-04-07 19:50:11&quot;);</span><br><span class="line"></span><br><span class="line">//Dateåˆ°å­—ç¬¦ä¸²</span><br><span class="line">String str = dateFormat.format(new Date());</span><br><span class="line"></span><br><span class="line">Date newTime = new Date();</span><br><span class="line">int result = oldTime.compareTo(newTime);</span><br><span class="line">System.out.println(result);</span><br><span class="line"></span><br><span class="line">DateFormat dateformat = DateFormat.getDateInstance();</span><br><span class="line">Date old = dateformat.parse(&quot;2022-04-07 19:50:11&quot;);</span><br><span class="line">Date now = new Date();</span><br><span class="line">if(now.after(old))&#123;</span><br><span class="line">    System.out.println(&quot;nowæ¯”oldæ–°&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…SimpleDateFormat"><a href="#âœ…SimpleDateFormat" class="headerlink" title="âœ…SimpleDateFormat"></a>âœ…SimpleDateFormat</h4><p>DateFormatå¯ä»¥è¿›è¡Œæ—¥æœŸå’Œå­—ç¬¦ä¸²çš„æ ¼å¼åŒ–å’Œè§£æï¼Œä½†æ˜¯ç”±äºæ˜¯æŠ½è±¡ç±»ï¼Œæ‰€ä»¥ä½¿ç”¨å…·ä½“å­ç±»SimpleDateFormat</p>
<p>SimpleDateFormat ä½¿å¾—å¯ä»¥é€‰æ‹©ä»»ä½•ç”¨æˆ·å®šä¹‰çš„æ—¥æœŸ/æ—¶é—´æ ¼å¼çš„æ¨¡å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Date now = new Date(); // åˆ›å»ºä¸€ä¸ªDateå¯¹è±¡ï¼Œè·å–å½“å‰æ—¶é—´</span><br><span class="line">// æŒ‡å®šæ ¼å¼åŒ–æ ¼å¼</span><br><span class="line">SimpleDateFormat f = new SimpleDateFormat(&quot;ä»Šå¤©æ˜¯ &quot; + &quot;yyyy å¹´ MM æœˆ dd æ—¥ E HH ç‚¹ mm åˆ† ss ç§’&quot;);</span><br><span class="line">// Dateè½¬ä¸ºString</span><br><span class="line">System.out.println(f.format(now)); // å°†å½“å‰æ—¶é—´è¢¼å¼åŒ–ä¸ºæŒ‡å®šçš„æ ¼å¼</span><br><span class="line">// Stringè½¬ä¸ºDate</span><br><span class="line">String str=&quot;2008-08-08 12:12:12&quot;;</span><br><span class="line">SimpleDateFormat sdf2=new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span><br><span class="line">Date dd=sdf2.parse(str);</span><br><span class="line">System.out.println(dd);</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://c.biancheng.net/view/878.html">http://c.biancheng.net/view/878.html</a></p>
<h4 id="âœ…FastDataFormat"><a href="#âœ…FastDataFormat" class="headerlink" title="âœ…FastDataFormat"></a>âœ…FastDataFormat</h4><p>Apache commons-langä¸­çš„FastDateFormatã€‚ä¹Ÿå¯ä»¥åšæ—¶é—´çš„æ ¼å¼åŒ–ã€‚<br>FastDateFormatæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸å¿…è€ƒè™‘å¤šçº¿ç¨‹çš„æƒ…å†µ<br>JDKé‡Œè‡ªå¸¦çš„SimpleDateFormatå­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ã€‚<br>SimpleDateFormatåœ¨å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–çš„æ–¹æ³•formatä¸­ï¼Œä¼šå…ˆå¯¹calendarå¯¹è±¡è¿›è¡ŒsetTimeçš„èµ‹å€¼ï¼Œè‹¥æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªSimpleDateFormatå®ä¾‹çš„è¯ï¼Œå°±ä¼šå¯¹calendarçš„èµ‹å€¼è¿›è¡Œè¦†ç›–ï¼Œè¿›è€Œäº§ç”Ÿé—®é¢˜ã€‚</p>
<p>FastDateFormatç”¨æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FastDateFormat f = FastDateFormat.getInstance(&quot;yyyy-MM-dd HH:mm:ss&quot;);  </span><br><span class="line">String s = f.format(new Date());</span><br><span class="line">System.out.println(s);</span><br><span class="line"></span><br><span class="line">Date dd=f.parse(s);</span><br></pre></td></tr></table></figure>


<h4 id="âœ…å½“å‰æ—¶é—´çš„åå‡ ç§’ï¼š"><a href="#âœ…å½“å‰æ—¶é—´çš„åå‡ ç§’ï¼š" class="headerlink" title="âœ…å½“å‰æ—¶é—´çš„åå‡ ç§’ï¼š"></a>âœ…å½“å‰æ—¶é—´çš„åå‡ ç§’ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å½“å‰æ—¶é—´çš„åå‡ ç§’</span><br><span class="line">Date data = new Date(System.currentTimeMillis() + 10 * 1000);</span><br><span class="line">System.out.println(data);</span><br><span class="line">åŠ çš„æ˜¯æ¯«ç§’</span><br></pre></td></tr></table></figure>

<p>è·å–å½“å‰æ—¶é—´çš„æœˆä»½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int mon = LocalDate.now().getMonthValue();</span><br></pre></td></tr></table></figure>

<h4 id="âœ…LocalDateã€LocalTimeã€LocalDateTimeã€java8æ–°æä¾›çš„ç±»ã€‘"><a href="#âœ…LocalDateã€LocalTimeã€LocalDateTimeã€java8æ–°æä¾›çš„ç±»ã€‘" class="headerlink" title="âœ…LocalDateã€LocalTimeã€LocalDateTimeã€java8æ–°æä¾›çš„ç±»ã€‘"></a>âœ…LocalDateã€LocalTimeã€LocalDateTimeã€java8æ–°æä¾›çš„ç±»ã€‘</h4><p>ä¸ºä»€ä¹ˆéœ€è¦LocalDateã€LocalTimeã€LocalDateTime</p>
<p>1.Dateå¦‚æœä¸æ ¼å¼åŒ–ï¼Œæ‰“å°å‡ºçš„æ—¥æœŸå¯è¯»æ€§å·®<br>Tue Sep 10 09:34:04 CST 2019<br>Dateå¯¹æ—¶é—´å¤„ç†æ¯”è¾ƒéº»çƒ¦ã€‚<br>getYearã€getMonthè¿™äº›æ–¹æ³•å—ï¼Œè·å–å¹´æœˆæ—¥å¾ˆEasyï¼Œä½†éƒ½è¢«å¼ƒç”¨äº†ã€‚</p>
<p>2.ä½¿ç”¨SimpleDateFormatå¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–ï¼Œä½†SimpleDateFormatæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚SimpleDateFormatçš„formatæ–¹æ³•ä¸­çš„calendaræ˜¯å…±äº«å˜é‡ï¼Œå¹¶ä¸”è¿™ä¸ªå…±äº«å˜é‡æ²¡æœ‰åšçº¿ç¨‹å®‰å…¨æ§åˆ¶ã€‚å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨ç›¸åŒçš„SimpleDateFormatå¯¹è±¡ã€å¦‚ç”¨staticä¿®é¥°çš„SimpleDateFormatã€‘è°ƒç”¨formatæ–¹æ³•æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹ä¼šåŒæ—¶è°ƒç”¨calendar.setTimeæ–¹æ³•ï¼Œå¯èƒ½ä¸€ä¸ªçº¿ç¨‹åˆšè®¾ç½®å¥½timeå€¼ã€‚å¦å¤–çš„ä¸€ä¸ªçº¿ç¨‹é©¬ä¸ŠæŠŠè®¾ç½®çš„timeå€¼ç»™ä¿®æ”¹äº†å¯¼è‡´è¿”å›çš„æ ¼å¼åŒ–æ—¶é—´å¯èƒ½æ˜¯é”™è¯¯çš„ã€‚åœ¨å¤šå¹¶å‘æƒ…å†µä¸‹ä½¿ç”¨SimpleDateFormatéœ€æ ¼å¤–æ³¨æ„ SimpleDateFormaté™¤äº†formatæ˜¯çº¿ç¨‹ä¸å®‰å…¨ä»¥å¤–ï¼Œparseæ–¹æ³•ä¹Ÿæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p>
<p>å¤šçº¿ç¨‹å¹¶å‘å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ - é¿å…çº¿ç¨‹ä¹‹é—´å…±äº«ä¸€ä¸ªSimpleDateFormatå¯¹è±¡ï¼Œæ¯ä¸ªçº¿ç¨‹ä½¿ç”¨æ—¶éƒ½åˆ›å»ºä¸€æ¬¡SimpleDateFormatå¯¹è±¡ =&gt; åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„å¼€é”€å¤§ - å¯¹ä½¿ç”¨formatå’Œparseæ–¹æ³•çš„åœ°æ–¹è¿›è¡ŒåŠ é” =&gt; çº¿ç¨‹é˜»å¡æ€§èƒ½å·® - ä½¿ç”¨ThreadLocalä¿è¯æ¯ä¸ªçº¿ç¨‹æœ€å¤šåªåˆ›å»ºä¸€æ¬¡SimpleDateFormatå¯¹è±¡ =&gt; è¾ƒå¥½çš„æ–¹æ³•ã€‚</p>
<p>LocalDateç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">åªä¼šè·å–å¹´æœˆæ—¥</span><br><span class="line">//è·å–å½“å‰å¹´æœˆæ—¥</span><br><span class="line">LocalDate localDate = LocalDate.now();</span><br><span class="line"></span><br><span class="line">//æ„é€ æŒ‡å®šçš„å¹´æœˆæ—¥</span><br><span class="line">LocalDate localDate1 = LocalDate.of(2019, 9, 10);</span><br><span class="line"></span><br><span class="line">è·å–å¹´ã€æœˆã€æ—¥ã€æ˜ŸæœŸå‡ </span><br><span class="line">int year = localDate.getYear();  //2022</span><br><span class="line">int year1 = localDate.get(ChronoField.YEAR); //2022</span><br><span class="line">Month month = localDate.getMonth();  //JUNE</span><br><span class="line">int month1 = localDate.get(ChronoField.MONTH_OF_YEAR);  //6</span><br><span class="line"></span><br><span class="line">//è·å–å½“å‰æ—¥æœŸæ˜¯æ‰€åœ¨å¹´çš„ç¬¬å‡ å¤©ã€æœˆçš„ç¬¬å‡ å¤©ã€å½“å‰æ˜ŸæœŸ</span><br><span class="line">int day = localDate.getDayOfMonth();  //26</span><br><span class="line">int day1 = localDate.get(ChronoField.DAY_OF_MONTH);  //26</span><br><span class="line">DayOfWeek dayOfWeek = localDate.getDayOfWeek(); //SUNDAY</span><br><span class="line">int dayOfWeek1 = localDate.get(ChronoField.DAY_OF_WEEK); //7</span><br><span class="line">LocalDate now = LocalDate.now();</span><br><span class="line">int year = now.getDayOfYear();  //ä¸€å¹´çš„ç¬¬å‡ å¤©</span><br><span class="line">int month = now.getDayOfMonth();  //æœˆçš„ç¬¬å‡ å¤©</span><br><span class="line"></span><br><span class="line">System.out.println(LocalDate.MAX);  //+999999999-12-31</span><br><span class="line">System.out.println(LocalDate.MIN);  //-999999999-01-01</span><br><span class="line"></span><br><span class="line">//è·å–å½“å‰æœˆï¼Œå½“å‰æœˆå¤©æ•°</span><br><span class="line">Month month = now.getMonth();  //JANUARY</span><br><span class="line">int monthValue = now.getMonthValue();</span><br><span class="line">int i = now.lengthOfMonth();</span><br><span class="line"></span><br><span class="line">//withæŒ‡å®šå¹´æœˆæ—¥</span><br><span class="line">LocalDate localDate = now.withDayOfMonth(1);  //å½“æœˆçš„æŒ‡å®šæ—¥</span><br><span class="line">LocalDate localDate1 = now.withDayOfYear(21);  //è·å–ä»Šå¹´ç¬¬ç¬¬å‡ å¤©</span><br><span class="line">LocalDate localDate2 = now.withMonth(3);  //ä»Šå¹´æŒ‡å®šæœˆä»½ï¼Œæ—¥ä¸ºå½“å¤©çš„æ—¥æœŸ</span><br><span class="line">LocalDate localDate3 = now.withYear(2004);  //æŒ‡å®šå¹´ä»½çš„ä»Šå¤©</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>LocalTimeç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">åªä¼šè·å–å‡ ç‚¹å‡ åˆ†å‡ ç§’</span><br><span class="line">åˆ›å»ºLocalTime</span><br><span class="line">LocalTime localTime = LocalTime.of(13, 51, 10);</span><br><span class="line">LocalTime localTime1 = LocalTime.now();</span><br><span class="line">è·å–æ—¶åˆ†ç§’</span><br><span class="line">//è·å–å°æ—¶</span><br><span class="line">int hour = localTime.getHour();</span><br><span class="line">int hour1 = localTime.get(ChronoField.HOUR_OF_DAY);</span><br><span class="line">//è·å–åˆ†</span><br><span class="line">int minute = localTime.getMinute();</span><br><span class="line">int minute1 = localTime.get(ChronoField.MINUTE_OF_HOUR);</span><br><span class="line">//è·å–ç§’</span><br><span class="line">int second = localTime.getSecond();</span><br><span class="line">int second1 = localTime.get(ChronoField.SECOND_OF_MINUTE);</span><br></pre></td></tr></table></figure>

<p>LocalDateTime:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">è·å–å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œç­‰äºLocalDate+LocalTime</span><br><span class="line">åˆ›å»ºLocalDateTime</span><br><span class="line">LocalDateTime localDateTime = LocalDateTime.now();</span><br><span class="line">LocalDateTime localDateTime1 = LocalDateTime.of(2019, Month.SEPTEMBER, 10, 14, 46, 56);</span><br><span class="line">LocalDateTime localDateTime1 = LocalDateTime.of(2019, 6, 26, 10, 14, 46, 56);</span><br><span class="line">LocalDateTime localDateTime2 = LocalDateTime.of(localDate, localTime);</span><br><span class="line">LocalDateTime localDateTime3 = localDate.atTime(localTime);</span><br><span class="line">LocalDateTime localDateTime4 = localTime.atDate(localDate);</span><br><span class="line">è·å–LocalDate</span><br><span class="line">LocalDate localDate2 = localDateTime.toLocalDate();</span><br><span class="line">è·å–LocalTime</span><br><span class="line">LocalTime localTime2 = localDateTime.toLocalTime();</span><br></pre></td></tr></table></figure>

<p>Instant: å¯ä»¥ç²¾ç¡®åˆ°çº³ç§’çš„æ—¶é—´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">è·å–ç§’æ•°</span><br><span class="line">åˆ›å»ºInstantå¯¹è±¡</span><br><span class="line">Instant instant = Instant.now();  //æå‰åŒ—äº¬æ—¶é—´8å°æ—¶</span><br><span class="line"></span><br><span class="line">//æ ¹æ®æ—¶æœŸæ·»åŠ åç§»é‡</span><br><span class="line">OffsetDateTime offsetDateTime1 = instance.atOffset(ZoneOffset.ofHours(8));</span><br><span class="line">System.out.println(&quot;å¤„ç†åæ—¶é—´ä¸ºï¼š&quot;+offsetDateTime1);</span><br><span class="line"></span><br><span class="line">è·å–ç§’æ•°</span><br><span class="line">long currentSecond = instant.getEpochSecond();</span><br><span class="line">è·å–æ¯«ç§’æ•°</span><br><span class="line">long currentMilli = instant.toEpochMilli();</span><br><span class="line">å¦‚æœåªæ˜¯ä¸ºäº†è·å–ç§’æ•°æˆ–è€…æ¯«ç§’æ•°ï¼Œä½¿ç”¨System.currentTimeMillis()æ¥å¾—æ›´ä¸ºæ–¹ä¾¿</span><br></pre></td></tr></table></figure>

<p>æ—¶é—´å˜åŒ–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">LocalDateã€LocalTimeã€LocalDateTimeã€Instantä¸ºä¸å¯å˜å¯¹è±¡ï¼Œä¿®æ”¹è¿™äº›å¯¹è±¡å¯¹è±¡ä¼šè¿”å›ä¸€ä¸ªå‰¯æœ¬</span><br><span class="line">å¢åŠ ã€å‡å°‘å¹´æ•°ã€æœˆæ•°ã€å¤©æ•°ç­‰ ä»¥LocalDateTimeä¸ºä¾‹</span><br><span class="line">LocalDateTime localDateTime = LocalDateTime.of(2019, Month.SEPTEMBER, 10,</span><br><span class="line">14, 46, 56);</span><br><span class="line">//å¢åŠ ä¸€å¹´</span><br><span class="line">localDateTime = localDateTime.plusYears(1);</span><br><span class="line">localDateTime = localDateTime.plus(1, ChronoUnit.YEARS);</span><br><span class="line">//å‡å°‘ä¸€ä¸ªæœˆ</span><br><span class="line">localDateTime = localDateTime.minusMonths(1);</span><br><span class="line">localDateTime = localDateTime.minus(1, ChronoUnit.MONTHS);</span><br><span class="line">é€šè¿‡withä¿®æ”¹æŸäº›å€¼</span><br><span class="line">//ä¿®æ”¹å¹´ä¸º2019</span><br><span class="line">localDateTime = localDateTime.withYear(2020);</span><br><span class="line">//ä¿®æ”¹ä¸º2022</span><br><span class="line">localDateTime = localDateTime.with(ChronoField.YEAR, 2022);</span><br><span class="line">è¿˜å¯ä»¥ä¿®æ”¹æœˆã€æ—¥</span><br></pre></td></tr></table></figure>

<p>æ—¶é—´è®¡ç®—:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚æœ‰äº›æ—¶å€™æƒ³çŸ¥é“è¿™ä¸ªæœˆçš„æœ€åä¸€å¤©æ˜¯å‡ å·ã€ä¸‹ä¸ªå‘¨æœ«æ˜¯å‡ å·ï¼Œé€šè¿‡æä¾›çš„æ—¶é—´å’Œæ—¥æœŸAPIå¯ä»¥å¾ˆå¿«å¾—åˆ°ç­”æ¡ˆ</span><br><span class="line">LocalDate localDate = LocalDate.now();</span><br><span class="line">//å¾—åˆ°ä»Šå¹´ç¬¬ä¸€å¤©</span><br><span class="line">LocalDate localDate1 = localDate.with(firstDayOfYear());</span><br><span class="line">æ¯”å¦‚é€šè¿‡firstDayOfYear()è¿”å›äº†å½“å‰æ—¥æœŸçš„ç¬¬ä¸€å¤©æ—¥æœŸï¼Œè¿˜æœ‰å¾ˆå¤šæ–¹æ³•è¿™é‡Œä¸åœ¨ä¸¾ä¾‹è¯´æ˜</span><br></pre></td></tr></table></figure>

<p>æ ¼å¼åŒ–æ—¶é—´:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">LocalDate localDate = LocalDate.of(2019, 9, 10);</span><br><span class="line">String s1 = localDate.format(DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">String s2 = localDate.format(DateTimeFormatter.ISO_LOCAL_DATE);</span><br><span class="line">//è‡ªå®šä¹‰æ ¼å¼åŒ–</span><br><span class="line">DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;);</span><br><span class="line">String s3 = localDate.format(dateTimeFormatter);</span><br><span class="line">DateTimeFormatteré»˜è®¤æä¾›äº†å¤šç§æ ¼å¼åŒ–æ–¹å¼ï¼Œå¦‚æœé»˜è®¤æä¾›çš„ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œå¯ä»¥é€šè¿‡DateTimeFormatterçš„ofPatternæ–¹æ³•åˆ›å»ºè‡ªå®šä¹‰æ ¼å¼åŒ–æ–¹å¼</span><br><span class="line"></span><br><span class="line">//å˜ä¸ºå­—ç¬¦ä¸²ï¼š</span><br><span class="line">String currentTime = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;).format(LocalDateTime.now());</span><br><span class="line">System.out.println(currentTime);</span><br><span class="line">String currentTime1 = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;));</span><br><span class="line">System.out.println(currentTime1</span><br></pre></td></tr></table></figure>

<p>è§£ææ—¶é—´ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LocalDate localDate1 = LocalDate.parse(&quot;20190910&quot;, DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">LocalDate localDate2 = LocalDate.parse(&quot;2019-09-10&quot;, DateTimeFormatter.ISO_LOCAL_DATE);</span><br><span class="line">å’ŒSimpleDateFormatç›¸æ¯”ï¼ŒDateTimeFormatteræ˜¯çº¿ç¨‹å®‰å…¨çš„</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1685414035437236647&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1685414035437236647&amp;wfr=spider&amp;for=pc</a></p>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/158786867">https://zhuanlan.zhihu.com/p/158786867</a></p>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class DateUtilsTest &#123;</span><br><span class="line">    public static final String DATE_PATTERN = &quot;yyyy-MM-dd HH:mm:ss&quot;;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test1() &#123;</span><br><span class="line">        // è·å–æŒ‡å®šæ ¼å¼æ—¶é—´å­—ç¬¦ä¸²</span><br><span class="line">        String date = LocalDateTime.now().format(DateTimeFormatter.ofPattern(DATE_PATTERN));</span><br><span class="line">        System.out.println(date);</span><br><span class="line">        // è·å–å½“å‰æœˆä»½</span><br><span class="line">        Integer month = LocalDateTime.now().getMonth().getValue();</span><br><span class="line">        System.out.println(month);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test2() &#123;</span><br><span class="line">        // æ—¶é—´æˆ³</span><br><span class="line">        long timeStamp = System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;æ—¶é—´æˆ³ï¼š&quot; + timeStamp);</span><br><span class="line">        // æ—¶é—´æˆ³å­—ç¬¦ä¸²åˆ°æ—¶é—´æˆ³åˆ°LocalDateTime</span><br><span class="line">        LocalDateTime time = new Timestamp(timeStamp).toLocalDateTime();</span><br><span class="line">        System.out.println(&quot;LocatDateTimeï¼š&quot; + time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ï¼šè·å–æŒ‡å®šå¤©åçš„æ—¥æœŸå­—ç¬¦ä¸²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime.now().plusDays(1).format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;))</span><br></pre></td></tr></table></figure>

<h4 id="âœ…Calendarã€Dateã€LocalDate-LocalTimeå…³ç³»"><a href="#âœ…Calendarã€Dateã€LocalDate-LocalTimeå…³ç³»" class="headerlink" title="âœ…Calendarã€Dateã€LocalDate/LocalTimeå…³ç³»"></a>âœ…Calendarã€Dateã€LocalDate/LocalTimeå…³ç³»</h4><p>1ã€Date ç±»å¦‚ä»Šå¾ˆå¤šæ–¹æ³•å·²ç»æ²¡æœ‰ä»€ä¹ˆç”¨å¤„äº†ï¼Œå¦‚ä»Šæ—¶é—´çš„å¤„ç†å¹¶ä¸ç›´æ¥åœ¨Date ç±»ä¸­è¿›è¡Œï¼Œè€Œæ˜¯é€šè¿‡Calendarï¼Œæˆ–è€…LocalDate æ¥è¿›è¡Œï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œæ›´å¤šçš„æ˜¯è¦æ¥åšä¸€ä¸ªè®°å½•æ—¥æœŸçš„å®ä¾‹ã€‚</p>
<p>2ã€Dateç”¨äºè®°å½•æŸä¸€ä¸ªå«æ—¥æœŸçš„ã€ç²¾ç¡®åˆ°æ¯«ç§’çš„æ—¶é—´ã€‚é‡ç‚¹åœ¨ä»£è¡¨ä¸€åˆ¹é‚£çš„æ—¶é—´æœ¬èº«ã€‚Calendarç”¨äºå°†æŸä¸€æ—¥æœŸæ”¾åˆ°å†æ³•ä¸­çš„äº’åŠ¨â€”â€”æ—¶é—´å’Œå¹´ã€æœˆã€æ—¥ã€æ˜ŸæœŸã€ä¸Šåˆã€ä¸‹åˆã€å¤ä»¤æ—¶ç­‰è¿™äº›å†æ³•è§„å®šäº’ç›¸ä½œç”¨å…³ç³»å’Œäº’åŠ¨ã€‚Calendaræœ¬èº«ä»£è¡¨å…¬å†çš„ä¸€ä¸ªç®€åŒ–ç¼©æ°´ç‰ˆï¼Œå§‘ä¸”å«â€œè®¡ç®—æœºå†â€ã€‚</p>
<p>3ã€Java 8æ–°å¢äº†LocalDateå’ŒLocalTimeæ¥å£ï¼Œä¸ºä»€ä¹ˆè¦æä¸€å¥—å…¨æ–°çš„å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„APIï¼Ÿå› ä¸ºæ—§çš„java.util.Dateå®åœ¨æ˜¯å¤ªéš¾ç”¨äº†ã€‚<br>java.util.Dateæœˆä»½ä»0å¼€å§‹ï¼Œä¸€æœˆæ˜¯0ï¼ŒåäºŒæœˆæ˜¯11ï¼Œå˜æ€å§ï¼java.time.LocalDateæœˆä»½å’Œæ˜ŸæœŸéƒ½æ”¹æˆäº†enumï¼Œå°±ä¸å¯èƒ½å†ç”¨é”™äº†ã€‚<br>java.util.Dateå’ŒSimpleDateFormatteréƒ½ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€ŒLocalDateå’ŒLocalTimeå’Œæœ€åŸºæœ¬çš„Stringä¸€æ ·ï¼Œæ˜¯ä¸å˜ç±»å‹ï¼Œä¸ä½†çº¿ç¨‹å®‰å…¨ï¼Œè€Œä¸”ä¸èƒ½ä¿®æ”¹ã€‚</p>
<p>æ¥è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/jaycekon/p/6179700.html">https://www.cnblogs.com/jaycekon/p/6179700.html</a></p>
<h4 id="âœ…Calender"><a href="#âœ…Calender" class="headerlink" title="âœ…Calender"></a>âœ…Calender</h4><p>Calendar æ˜¯ä¸€ä¸ªæŠ½è±¡ç±», æ— æ³•é€šè¿‡ç›´æ¥å®ä¾‹åŒ–å¾—åˆ°å¯¹è±¡. å› æ­¤, Calendar æä¾›äº†ä¸€ä¸ªæ–¹æ³• getInstanceï¼ˆå·¥å‚æ–¹æ³•ï¼‰,æ¥è·å¾—ä¸€ä¸ªCalendarçš„å­ç±»å¯¹è±¡, å¾—åˆ°çš„ Calendar ç”±å½“å‰æ—¶é—´åˆå§‹åŒ–.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class CalenderTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Calendar cal = Calendar.getInstance();</span><br><span class="line">        cal.set (2013, 5, 4, 13, 44, 51);//å¹´æœˆæ—¥æ—¶åˆ†ç§’ (æœˆä»½0ä»£è¡¨1æœˆ)</span><br><span class="line">        cal.set (Calendar.YEAR, 2014); //å¹´</span><br><span class="line">        cal.set (Calendar.MONTH, 7); //æœˆ (æœˆä»½0ä»£è¡¨1æœˆ)</span><br><span class="line">        cal.set (Calendar.DATE, 11); //æ—¥</span><br><span class="line">        cal.set (Calendar.HOUR_OF_DAY, 15); //æ—¶</span><br><span class="line">        cal.set (Calendar.MINUTE, 33); //åˆ†</span><br><span class="line">        cal.set (Calendar.SECOND, 32); //ç§’</span><br><span class="line"></span><br><span class="line">        //åŒæ—¶è¿˜æœ‰getã€addæ–¹æ³•ï¼Œä½¿ç”¨ç±»ä¼¼</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Calendaræ˜¯çˆ¶ç±»ï¼ŒGregorianCalendaræ˜¯å­ç±»ã€‚<br>GregorianCalendarï¼ˆå…¬å†ï¼‰æ˜¯Calendarçš„ä¸€ä¸ªå…·ä½“å­ç±»ï¼Œæä¾›äº†ä¸–ç•Œä¸Šå¤§å¤šæ•°å›½å®¶/åœ°åŒºä½¿ç”¨çš„æ ‡å‡†æ—¥å†ç³»ç»Ÿã€‚å¯ä»¥ä½¿ç”¨newå…³é”®å­—åˆ›å»ºå®ä¾‹ã€‚</p>
<p>ä¾‹å­ï¼šè¿”å›å½“å‰æ—¶é—´åŠ 10åˆ†é’Ÿåçš„æ—¥æœŸæ—¶é—´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Calendar calendar = new GregorianCalendar();</span><br><span class="line">Date date = new Date();</span><br><span class="line">calendar.setTime(date);</span><br><span class="line">calendar.add(GregorianCalendar.MINUTE, 10);</span><br><span class="line">Date after = calendar.getTime();</span><br><span class="line">System.out.println(after);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//1.åˆ›å»ºCalendarå¯¹è±¡</span><br><span class="line">Calendar calendar =Calendar.getInstance();</span><br><span class="line">System.out.println(calendar.getTime());//Calenderå˜Date</span><br><span class="line">System.out.println(calendar.getTimeInMillis());//Calenderå˜æ—¶é—´æˆ³</span><br><span class="line">Calendar calendar1 = new GregorianCalendar();</span><br><span class="line">System.out.println(calendar1.getTime()); //è¾“å‡ºä¸€æ ·</span><br><span class="line"></span><br><span class="line">//2.è·å–æ—¶é—´ä¿¡æ¯</span><br><span class="line">//è·å–å¹´</span><br><span class="line">int year = calendar.get(Calendar.YEAR);</span><br><span class="line">//æœˆ</span><br><span class="line">int month = calendar.get(Calendar.MONTH);</span><br><span class="line">//æ—¥</span><br><span class="line">int day = calendar.get(Calendar.DAY_OF_MONTH);//DATE</span><br><span class="line">//å°æ—¶</span><br><span class="line">int hour = calendar.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">//åˆ†é’Ÿ</span><br><span class="line">int minute = calendar.get(Calendar.MINUTE);</span><br><span class="line">//ç§’</span><br><span class="line">int second = calendar.get(Calendar.SECOND);</span><br><span class="line">System.out.println(year+&quot;å¹´&quot;+month+&quot;æœˆ&quot;+day+&quot;æ—¥&quot;+&quot;  &quot;+hour+&quot;æ—¶&quot;+minute+&quot;åˆ†&quot;+second+&quot;ç§’&quot;);</span><br><span class="line"></span><br><span class="line">//ä¿®æ”¹æ—¶é—´</span><br><span class="line">Calendar calendar2 =Calendar.getInstance();</span><br><span class="line">calendar2.set(Calendar.DAY_OF_MONTH,5);</span><br><span class="line">System.out.println(calendar2.getTime().toLocaleString());</span><br><span class="line"></span><br><span class="line">//addæ–¹æ³•ä¿®æ”¹æ—¶é—´</span><br><span class="line">calendar2.add(Calendar.HOUR,-1);</span><br><span class="line">System.out.println(calendar2.getTime().toLocaleString());</span><br><span class="line"></span><br><span class="line">//è·å–å½“æœˆå¤šå°‘å¤©</span><br><span class="line">int max = calendar2.getActualMaximum(Calendar.DAY_OF_MONTH); //30</span><br><span class="line">int min = calendar2.getActualMinimum(Calendar.DAY_OF_MONTH); //1</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/a1439775520/article/details/98442556">https://blog.csdn.net/a1439775520/article/details/98442556</a> </p>
<p>ğŸç”¨Calenderè®¡ç®—é‡æ—¥æœŸç›¸å·®å¤©æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">private static int differentDays(Date date1,Date date2) &#123;</span><br><span class="line">    Calendar cal1 = Calendar.getInstance();</span><br><span class="line">    cal1.setTime(date1);</span><br><span class="line"></span><br><span class="line">    Calendar cal2 = Calendar.getInstance();</span><br><span class="line">    cal2.setTime(date2);</span><br><span class="line">    int day1= cal1.get(Calendar.DAY_OF_YEAR);</span><br><span class="line">    int day2 = cal2.get(Calendar.DAY_OF_YEAR);</span><br><span class="line"></span><br><span class="line">    int year1 = cal1.get(Calendar.YEAR);</span><br><span class="line">    int year2 = cal2.get(Calendar.YEAR);</span><br><span class="line">    if(year1 != year2) &#123;//ä¸åŒå¹´</span><br><span class="line">        int timeDistance = 0 ;</span><br><span class="line">        for(int i = year1 ; i &lt; year2 ; i ++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(i%4==0 &amp;&amp; i%100!=0 || i%400==0)    //é—°å¹´</span><br><span class="line">            &#123;</span><br><span class="line">                timeDistance += 366;</span><br><span class="line">            &#125;</span><br><span class="line">            else    //ä¸æ˜¯é—°å¹´</span><br><span class="line">            &#123;</span><br><span class="line">                timeDistance += 365;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return timeDistance + (day2-day1) ;</span><br><span class="line">    &#125; else &#123;// åŒå¹´</span><br><span class="line">        System.out.println(&quot;åˆ¤æ–­day2 - day1 : &quot; + (day2-day1));</span><br><span class="line">        return day2-day1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public static int differentDaysByMillisecond(Date date1,Date date2)&#123;</span><br><span class="line">    int days = (int) ((date2.getTime() - date1.getTime()) / (1000*3600*24));</span><br><span class="line">    return days;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…æ—¶é—´æˆ³"><a href="#âœ…æ—¶é—´æˆ³" class="headerlink" title="âœ…æ—¶é—´æˆ³"></a>âœ…æ—¶é—´æˆ³</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void timeStampTest() &#123;</span><br><span class="line">  // å½“å‰æ—¶é—´æ—¶é—´æˆ³</span><br><span class="line">  long nowStamp = System.currentTimeMillis();</span><br><span class="line">  System.out.println(&quot;æ¯«ç§’æ—¶é—´æˆ³ï¼š&quot; + nowStamp);</span><br><span class="line">  long nowhaomiao = System.currentTimeMillis() * 1000;</span><br><span class="line">  System.out.println(&quot;å¾®å¦™æ—¶é—´æˆ³&quot; + nowhaomiao);</span><br><span class="line">  long nowhaomiao1 = System.nanoTime() / 1000;</span><br><span class="line">  System.out.println(&quot;å¾®å¦™æ—¶é—´æˆ³1&quot; + nowhaomiao1); //ä¸è¡Œ</span><br><span class="line"></span><br><span class="line">  // æ˜¨å¤©è¿™ä¸ªæ—¶é—´æ—¶é—´æˆ³</span><br><span class="line">  Calendar calendar = Calendar.getInstance();</span><br><span class="line">  calendar.add(Calendar.DAY_OF_YEAR, -1);</span><br><span class="line">  //calender.getTimeå˜Dateï¼Œå†getTimeå˜æ—¶é—´æˆ³ï¼ˆlongå‹çš„ï¼‰</span><br><span class="line">  System.out.println(&quot;æ˜¨å¤©æ­¤æ—¶ï¼š&quot; + calendar.getTime().getTime());</span><br><span class="line"></span><br><span class="line">  // æ˜¨å¤©æŸæ—¶é—´çš„æ—¶é—´æˆ³</span><br><span class="line">  Calendar calendar1 = Calendar.getInstance();</span><br><span class="line">  calendar.set(calendar1.get(Calendar.YEAR), calendar1.get(Calendar.MONTH), calendar1.get(Calendar.DAY_OF_MONTH) - 1, 23, 59, 59);</span><br><span class="line">  System.out.println(calendar.getTime().getTime());</span><br><span class="line"></span><br><span class="line">  // æ—¶é—´æˆ³è½¬æ¢ä¸ºDate</span><br><span class="line">  Date now = new Date(nowStamp);  //longå‹</span><br><span class="line">  //å¦‚æœæ˜¯æ—¶é—´æˆ³å­—ç¬¦ä¸²ï¼Œç”¨ä¸‹é¢</span><br><span class="line">  //Date now1 = new Date(Long.parseLong(nowStamp));</span><br><span class="line">  System.out.println(&quot;now: &quot; + now);</span><br><span class="line">  // å†è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><br><span class="line">  String format = &quot;yyyy-MM-dd HH:mm:ss&quot;;</span><br><span class="line">  SimpleDateFormat sdf = new SimpleDateFormat(format);</span><br><span class="line">  System.out.println(&quot;now: &quot; + sdf.format(now));</span><br><span class="line"></span><br><span class="line">  // æ—¥æœŸæ ¼å¼å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´æˆ³</span><br><span class="line">  String s = &quot;2022-06-25 12:12:12&quot;;</span><br><span class="line">  try &#123;</span><br><span class="line">      // String-Date-longå‹æ—¶é—´æˆ³</span><br><span class="line">      System.out.println(&quot;æ—¶é—´æˆ³ï¼š&quot; + String.valueOf(sdf.parse(s).getTime()));</span><br><span class="line">  &#125; catch (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…DateUtilså·¥å…·ç±»"><a href="#âœ…DateUtilså·¥å…·ç±»" class="headerlink" title="âœ…DateUtilså·¥å…·ç±»"></a>âœ…DateUtilså·¥å…·ç±»</h4><p>apache.commons.lang3åŒ…ä¸‹çš„å·¥å…·ç±»</p>
<p>1ã€è·å–æŒ‡å®šæ—¥æœŸçš„å¼€å§‹æ—¶é—´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testDateUtils() throws ParseException &#123;</span><br><span class="line">    // è·å–æŒ‡å®šæ—¥æœŸçš„å¼€å§‹æ—¶é—´</span><br><span class="line">    DateFormat df = DateFormat.getDateInstance();</span><br><span class="line">    Date date = df.parse(&quot;2022-06-24 14:01:01&quot;);</span><br><span class="line">    Date begin = org.apache.commons.lang3.time.DateUtils.truncate(date, Calendar.DATE);</span><br><span class="line">    System.out.println(&quot;åˆå§‹æ—¶é—´ï¼š&quot; + begin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…è®¡ç®—ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´çš„æ‰€æœ‰å¤©"><a href="#âœ…è®¡ç®—ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´çš„æ‰€æœ‰å¤©" class="headerlink" title="âœ…è®¡ç®—ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´çš„æ‰€æœ‰å¤©"></a>âœ…è®¡ç®—ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´çš„æ‰€æœ‰å¤©</h4><p>è¾“å…¥ï¼šbegin:â€˜2022-08-01â€™ end:â€˜2022-08-05â€™<br>è¾“å‡ºï¼šâ€2021-08-01â€,â€2021-08-02â€,â€2021-08-03â€,â€2021-08-04â€,â€2021-08-05â€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public static List&lt;String&gt; findDates(String beginTime, String endTime)</span><br><span class="line">        throws ParseException &#123;</span><br><span class="line">    List&lt;String&gt; allDate = new ArrayList();</span><br><span class="line">    SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line"></span><br><span class="line">    Date dBegin = sdf.parse(beginTime);</span><br><span class="line">    Date dEnd = sdf.parse(endTime);</span><br><span class="line">    allDate.add(sdf.format(dBegin));</span><br><span class="line">    Calendar calBegin = Calendar.getInstance();</span><br><span class="line">    // ä½¿ç”¨ç»™å®šçš„ Date è®¾ç½®æ­¤ Calendar çš„æ—¶é—´</span><br><span class="line">    calBegin.setTime(dBegin);</span><br><span class="line">    Calendar calEnd = Calendar.getInstance();</span><br><span class="line">    // ä½¿ç”¨ç»™å®šçš„ Date è®¾ç½®æ­¤ Calendar çš„æ—¶é—´</span><br><span class="line">    calEnd.setTime(dEnd);</span><br><span class="line">    // æµ‹è¯•æ­¤æ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šæ—¥æœŸä¹‹å</span><br><span class="line">    while (dEnd.after(calBegin.getTime())) &#123;</span><br><span class="line">        // æ ¹æ®æ—¥å†çš„è§„åˆ™ï¼Œä¸ºç»™å®šçš„æ—¥å†å­—æ®µæ·»åŠ æˆ–å‡å»æŒ‡å®šçš„æ—¶é—´é‡</span><br><span class="line">        calBegin.add(Calendar.DAY_OF_MONTH, 1);</span><br><span class="line">        allDate.add(sdf.format(calBegin.getTime()));</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(&quot;æ—¶é—´==&quot; + allDate);</span><br><span class="line">    return allDate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…åˆ¤æ–­æ˜¯å¦åŒä¸€å¤©"><a href="#âœ…åˆ¤æ–­æ˜¯å¦åŒä¸€å¤©" class="headerlink" title="âœ…åˆ¤æ–­æ˜¯å¦åŒä¸€å¤©"></a>âœ…åˆ¤æ–­æ˜¯å¦åŒä¸€å¤©</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public static boolean isSameDay(Date date1, Date date2) &#123;</span><br><span class="line">    LocalDate localDate1 = date1.toInstant()</span><br><span class="line">            .atZone(ZoneId.systemDefault())</span><br><span class="line">            .toLocalDate();</span><br><span class="line">    LocalDate localDate2 = date2.toInstant()</span><br><span class="line">            .atZone(ZoneId.systemDefault())</span><br><span class="line">            .toLocalDate();</span><br><span class="line">    return localDate1.isEqual(localDate2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static boolean isSameDay(Date date1, Date date2) &#123;</span><br><span class="line">    SimpleDateFormat fmt = new SimpleDateFormat(&quot;yyyyMMdd&quot;);</span><br><span class="line">    return fmt.format(date1).equals(fmt.format(date2));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/nandao158/article/details/121905050">https://blog.csdn.net/nandao158/article/details/121905050</a></p>
<h4 id="âœ…è·å–ä»Šå¤©æ˜ŸæœŸå‡ "><a href="#âœ…è·å–ä»Šå¤©æ˜ŸæœŸå‡ " class="headerlink" title="âœ…è·å–ä»Šå¤©æ˜ŸæœŸå‡ "></a>âœ…è·å–ä»Šå¤©æ˜ŸæœŸå‡ </h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Calendar calendar = Calendar.getInstance();</span><br><span class="line">Date date = new Date();</span><br><span class="line">calendar.setTime(date);</span><br><span class="line">System.out.println(calendar.get(Calendar.DAY_OF_WEEK));</span><br></pre></td></tr></table></figure>

<p>è·å–åˆ°çš„æ•°å­—ï¼Œæ˜ŸæœŸä¸€åˆ°æ˜ŸæœŸä¸ƒå¯¹åº”æ•°å­—{2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6, 7ï¼Œ0}ï¼Œæ‰€ä»¥éœ€è¦å‡ä¸€ï¼Œå‡ä¸€ä¹‹ååˆ¤æ–­æ˜¯ä¸æ˜¯ç­‰äº0ï¼Œç­‰äº0å°±å˜æˆ7.</p>
<h3 id="Stringç›¸å…³"><a href="#Stringç›¸å…³" class="headerlink" title="Stringç›¸å…³"></a>Stringç›¸å…³</h3><h4 id="intå˜String-Stringå˜int"><a href="#intå˜String-Stringå˜int" class="headerlink" title="intå˜String,Stringå˜int"></a>intå˜String,Stringå˜int</h4><p>ç¬¬ä¸€ç§æ–¹å¼ï¼šä½¿ç”¨intçš„å°è£…ç±»Integerï¼Œåœ¨Integeré‡Œé¢ç”¨ä»–çš„toStringæ–¹æ³•ã€‚ï¼ˆæ€§èƒ½æœ€å¥½ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int i=3ï¼›</span><br><span class="line">String s=Integer.toString(i);</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§æ–¹å¼ï¼šStringçš„valueOfæ–¹æ³•ï¼Œä¼ å‚æ˜¯Objectï¼ˆæ€§èƒ½ç¬¬äºŒï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int i=1;</span><br><span class="line">String s=String.valueOf(i);</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§æ–¹å¼ï¼Œç›´æ¥åœ¨intåé¢åŠ ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºåœ¨javaé‡Œé¢ï¼Œé»˜è®¤ä»»åŠ¡intç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹ç›¸åŠ ï¼Œä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚ï¼ˆæ€§èƒ½æœ€å·®ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int i=2ï¼›</span><br><span class="line">String s=i+&quot;&quot;;</span><br></pre></td></tr></table></figure>

<p>stringå˜int/Longï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Integer i1 = Integer.parseInt(s);</span><br><span class="line">Integer i = Integer.valueOf(s);</span><br><span class="line">Long l = Long.valueOf(s);</span><br><span class="line">Long l1 = Long.parseLong(s);</span><br></pre></td></tr></table></figure>

<p><code>Integer.parseInt</code> æ–¹æ³•ï¼š<br>parseInt(String s, int radix)ï¼š sè¡¨ç¤ºå­—ç¬¦ä¸²  radixè¡¨ç¤ºå­—ç¬¦ä¸²æ•°å€¼çš„è¿›åˆ¶ï¼Œä¾‹å¦‚ï¼šparseInt(â€œ100â€, 16) = 256<br>parseInt(String s)ï¼šç›¸å½“äºé»˜è®¤æ˜¯10è¿›åˆ¶</p>
<h4 id="String-format"><a href="#String-format" class="headerlink" title="String.format"></a>String.format</h4><p>String.format(String format, Objectâ€¦ args)<br>å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹æ³•ï¼Œsoutä¹Ÿè¿™ä¹ˆç”¨ã€‚</p>
<p><code>String str=String.format(&quot;Hi,%s %s %s&quot;, &quot;å°è¶…&quot;,&quot;æ˜¯ä¸ª&quot;,&quot;å¤§å¸…å“¥&quot;);  </code></p>
<p>%s    å­—ç¬¦ä¸²ç±»å‹    â€œhelloâ€<br>%c    å­—ç¬¦ç±»å‹    â€˜mâ€™<br>%b    å¸ƒå°”ç±»å‹    true<br>%d    æ•´æ•°ç±»å‹ï¼ˆåè¿›åˆ¶ï¼‰    88<br>%x    æ•´æ•°ç±»å‹ï¼ˆåå…­è¿›åˆ¶ï¼‰    FF<br>%o    æ•´æ•°ç±»å‹ï¼ˆå…«è¿›åˆ¶ï¼‰    77<br>%f    æµ®ç‚¹ç±»å‹    8.888<br>%a    åå…­è¿›åˆ¶æµ®ç‚¹ç±»å‹    FF.35AE<br>%e    æŒ‡æ•°ç±»å‹    9.38e+5<br>%g    é€šç”¨æµ®ç‚¹ç±»å‹ï¼ˆfå’Œeç±»å‹ä¸­è¾ƒçŸ­çš„ï¼‰    ä¸ä¸¾ä¾‹(åŸºæœ¬ç”¨ä¸åˆ°)<br>%h    æ•£åˆ—ç     ä¸ä¸¾ä¾‹(åŸºæœ¬ç”¨ä¸åˆ°)<br>%%    ç™¾åˆ†æ¯”ç±»å‹    ï¼…(%ç‰¹æ®Šå­—ç¬¦%%æ‰èƒ½æ˜¾ç¤º%)<br>%n    æ¢è¡Œç¬¦    ä¸ä¸¾ä¾‹(åŸºæœ¬ç”¨ä¸åˆ°)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">    String str=null;  </span><br><span class="line">    str=String.format(&quot;Hi,%s&quot;, &quot;å°è¶…&quot;);  </span><br><span class="line">    System.out.println(str);  </span><br><span class="line">    str=String.format(&quot;Hi,%s %s %s&quot;, &quot;å°è¶…&quot;,&quot;æ˜¯ä¸ª&quot;,&quot;å¤§å¸…å“¥&quot;);            </span><br><span class="line">    System.out.println(str);                           </span><br><span class="line">    System.out.printf(&quot;å­—æ¯cçš„å¤§å†™æ˜¯ï¼š%c %n&quot;, &#x27;C&#x27;);  </span><br><span class="line">    System.out.printf(&quot;å¸ƒå°”ç»“æœæ˜¯ï¼š%b %n&quot;, &quot;å°è¶…&quot;.equal(&quot;å¸…å“¥&quot;));  </span><br><span class="line">    System.out.printf(&quot;100çš„ä¸€åŠæ˜¯ï¼š%d %n&quot;, 100/2);  </span><br><span class="line">    System.out.printf(&quot;100çš„16è¿›åˆ¶æ•°æ˜¯ï¼š%x %n&quot;, 100);  </span><br><span class="line">    System.out.printf(&quot;100çš„8è¿›åˆ¶æ•°æ˜¯ï¼š%o %n&quot;, 100);  </span><br><span class="line">    System.out.printf(&quot;50å…ƒçš„ä¹¦æ‰“8.5æŠ˜æ‰£æ˜¯ï¼š%f å…ƒ%n&quot;, 50*0.85);  </span><br><span class="line">    System.out.printf(&quot;ä¸Šé¢ä»·æ ¼çš„16è¿›åˆ¶æ•°æ˜¯ï¼š%a %n&quot;, 50*0.85);  </span><br><span class="line">    System.out.printf(&quot;ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°è¡¨ç¤ºï¼š%e %n&quot;, 50*0.85);  </span><br><span class="line">    System.out.printf(&quot;ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°å’Œæµ®ç‚¹æ•°ç»“æœçš„é•¿åº¦è¾ƒçŸ­çš„æ˜¯ï¼š%g %n&quot;, 50*0.85);  </span><br><span class="line">    System.out.printf(&quot;ä¸Šé¢çš„æŠ˜æ‰£æ˜¯%d%% %n&quot;, 85);  </span><br><span class="line">    System.out.printf(&quot;å­—æ¯Açš„æ•£åˆ—ç æ˜¯ï¼š%h %n&quot;, &#x27;A&#x27;);  </span><br><span class="line"></span><br><span class="line">æ—¥æœŸæ ¼å¼ï¼š%tx xä»£è¡¨æ—¥æœŸè½¬æ¢ç¬¦</span><br><span class="line">c	åŒ…æ‹¬å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯	æ˜ŸæœŸå…­ åæœˆ 27 14:21:20 CST 2007</span><br><span class="line">F	â€œå¹´-æœˆ-æ—¥â€æ ¼å¼	2007-10-27</span><br><span class="line">D	â€œæœˆ/æ—¥/å¹´â€æ ¼å¼	10/27/07</span><br><span class="line">r	â€œHH:MM:SS PMâ€æ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰	02:25:51 ä¸‹åˆ</span><br><span class="line">T	â€œHH:MM:SSâ€æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰	14:28:16</span><br><span class="line">R	â€œHH:MMâ€æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰	14:28</span><br><span class="line"></span><br><span class="line">Date date=new Date();                                  </span><br><span class="line">//cçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼š%tc%n&quot;,date);          </span><br><span class="line">//fçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;å¹´-æœˆ-æ—¥æ ¼å¼ï¼š%tF%n&quot;,date);  </span><br><span class="line">//dçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;æœˆ/æ—¥/å¹´æ ¼å¼ï¼š%tD%n&quot;,date);  </span><br><span class="line">//rçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;HH:MM:SS PMæ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰ï¼š%tr%n&quot;,date);  </span><br><span class="line">//tçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;HH:MM:SSæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š%tT%n&quot;,date);  </span><br><span class="line">//Rçš„ä½¿ç”¨  </span><br><span class="line">System.out.printf(&quot;HH:MMæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š%tR&quot;,date);  </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">System.out.printf(&quot;%f&quot;, d);// &quot;f&quot;è¡¨ç¤ºæ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%9.2f&quot;, d);// &quot;9.2&quot;ä¸­çš„9è¡¨ç¤ºè¾“å‡ºçš„é•¿åº¦ï¼Œ2è¡¨ç¤ºå°æ•°ç‚¹åçš„ä½æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%+9.2f&quot;, d);// &quot;+&quot;è¡¨ç¤ºè¾“å‡ºçš„æ•°å¸¦æ­£è´Ÿå·ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%-9.4f&quot;, d);// &quot;-&quot;è¡¨ç¤ºè¾“å‡ºçš„æ•°å·¦å¯¹é½ï¼ˆé»˜è®¤ä¸ºå³å¯¹é½ï¼‰ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%+-9.3f&quot;, d);// &quot;+-&quot;è¡¨ç¤ºè¾“å‡ºçš„æ•°å¸¦æ­£è´Ÿå·ä¸”å·¦å¯¹é½ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%d&quot;, i);// &quot;d&quot;è¡¨ç¤ºè¾“å‡ºåè¿›åˆ¶æ•´æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%o&quot;, i);// &quot;o&quot;è¡¨ç¤ºè¾“å‡ºå…«è¿›åˆ¶æ•´æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%x&quot;, i);// &quot;d&quot;è¡¨ç¤ºè¾“å‡ºåå…­è¿›åˆ¶æ•´æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%#x&quot;, i);// &quot;d&quot;è¡¨ç¤ºè¾“å‡ºå¸¦æœ‰åå…­è¿›åˆ¶æ ‡å¿—çš„æ•´æ•°ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;%s&quot;, s);// &quot;d&quot;è¡¨ç¤ºè¾“å‡ºå­—ç¬¦ä¸²ã€‚  </span><br><span class="line">System.out.println();  </span><br><span class="line">System.out.printf(&quot;è¾“å‡ºä¸€ä¸ªæµ®ç‚¹æ•°ï¼š%fï¼Œä¸€ä¸ªæ•´æ•°ï¼š%dï¼Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼š%s&quot;, d, i, s);  </span><br><span class="line">// å¯ä»¥è¾“å‡ºå¤šä¸ªå˜é‡ï¼Œæ³¨æ„é¡ºåºã€‚  </span><br><span class="line">System.out.println();  </span><br></pre></td></tr></table></figure>

<h4 id="Strings-nullToEmpty"><a href="#Strings-nullToEmpty" class="headerlink" title="Strings.nullToEmpty"></a>Strings.nullToEmpty</h4><p>Stringsã€Listsã€Maps éƒ½æ˜¯googleæä¾›çš„å·¥å…·ç±»ã€‚<br>ä½¿ç”¨ä¹‹å‰å¯¼å…¥åŒ…guavaã€‚</p>
<p>vo.setS(String.nullToEmpty(s));  ä¸€èˆ¬ç”¨äºç»™å¯¹è±¡å±æ€§èµ‹å€¼ï¼Œå¦‚æœä¸ºnullï¼Œå°±è®¾ç©ºã€‚</p>
<p>å…¶ä»–guavaå·¥å…·ç±»ä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://www.w3cschool.cn/article/17770773.html">https://www.w3cschool.cn/article/17770773.html</a></p>
<h4 id="StringUtilså·¥å…·ç±»"><a href="#StringUtilså·¥å…·ç±»" class="headerlink" title="StringUtilså·¥å…·ç±»"></a>StringUtilså·¥å…·ç±»</h4><p>StringUtilså·¥å…·ç±»æ˜¯org.apache.commons.lang3åŒ…ä¸‹çš„å·¥å…·ç±»ï¼Œå¯¹Stringç±»å‹çš„æ“ä½œä½œäº†å°è£…ï¼Œæ˜¯å¯¹Javaè‡ªå¸¦çš„APIçš„æœ‰æ•ˆè¡¥å……ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´é«˜æ•ˆå¿«é€Ÿåœ°å¤„ç†å­—ç¬¦ä¸²ã€‚</p>
<p>å¯¼å…¥commons-lang3åŒ…ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String substringAfter(String str,String separator)ï¼š</span><br><span class="line">åœ¨ç¬¬ä¸€æ¬¡å‡ºç°åˆ†éš”ç¬¦åè·å–å­å­—ç¬¦ä¸²ã€‚</span><br><span class="line"></span><br><span class="line">String substringAfterLast(String str,String separator)ï¼š</span><br><span class="line">åœ¨æœ€åä¸€æ¬¡å‡ºç°åˆ†éš”ç¬¦ä¹‹åè·å–å­å­—ç¬¦ä¸²ã€‚</span><br><span class="line"></span><br><span class="line">String substringBefore(String str,String separator)ï¼š</span><br><span class="line">ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ä¹‹å‰çš„</span><br><span class="line">StringUtils.substringBefore(&quot;www.baidu.com&quot;, &quot;.)  www</span><br></pre></td></tr></table></figure>

<p>å·¥å…·ç±»ï¼šä¸€èˆ¬æ˜¯ç›´æ¥ç”¨å®ƒçš„é™æ€æ–¹æ³•ï¼Œç›´æ¥ç”¨ç±»æ¥è°ƒç”¨ï¼Œä¾‹å¦‚ï¼šCollectionsã€Arraysç­‰jaaè‡ªå¸¦çš„å·¥å…·ç±»ï¼›Listsã€Mapsç­‰googleå·¥å…·ç±»ï¼›CollectionUtilsã€StringUtilsç­‰apacheå·¥å…·ç±»ã€‚</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1662921">https://cloud.tencent.com/developer/article/1662921</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">StringUtils.EMPTY = &quot;&quot;</span><br><span class="line"></span><br><span class="line">// åªæ›¿æ¢ä¸€æ¬¡--&gt;ç»“æœæ˜¯ï¼šphhhss</span><br><span class="line">StringUtils.replaceOnce(&quot;sshhhss&quot;, &quot;ss&quot;, &quot;p&quot;);</span><br><span class="line">// å…¨éƒ¨æ›¿æ¢</span><br><span class="line">StringUtils.replace(&quot;sshhhs&quot;, &quot;ss&quot;, &quot;p&quot;);</span><br><span class="line">// å®šä¹‰æ›¿æ¢æ¬¡æ•°</span><br><span class="line">StringUtils.replace(&quot;sshhhsshss&quot;, &quot;ss&quot;, &quot;7777&quot;,2);</span><br><span class="line">// æ£€éªŒå­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºnullä¸”ä¸ä¸ºâ€œâ€</span><br><span class="line">if(!StringUtils.isEmpty(s))</span><br><span class="line"></span><br><span class="line">//å¿½ç•¥å¤§å°å†™çš„æ¯”è¾ƒï¼š</span><br><span class="line">System.out.println(StringUtils.equalsIgnoreCase(&quot;abc&quot;, &quot;aBC&quot;));</span><br></pre></td></tr></table></figure>

<p><code>ObjectUtils.allNotNull(o1, o2)</code> æ˜¯commons-lang3åŒ…ä¸‹çš„ï¼Œè¿”å›booleanï¼Œè¡¨ç¤ºæ˜¯å¦æ‰€æœ‰çš„å¯¹è±¡éƒ½ä¸ä¸ºnullï¼Œfalseè¡¨ç¤ºæœ‰nullã€‚</p>
<h4 id="stringè‡ªå·±çš„æ–¹æ³•"><a href="#stringè‡ªå·±çš„æ–¹æ³•" class="headerlink" title="stringè‡ªå·±çš„æ–¹æ³•"></a>stringè‡ªå·±çš„æ–¹æ³•</h4><p>âœ…str.trim()  ç”¨äºåˆ é™¤å­—ç¬¦ä¸²çš„å¤´å°¾ç©ºç™½ç¬¦ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str = new String(&quot;   hello   &quot;);</span><br><span class="line">System.out.println( str.trim() );</span><br></pre></td></tr></table></figure>

<p>âœ…str.replaceAll(æ­£åˆ™è¡¨è¾¾å¼, æ›¿æ¢å­—ç¬¦ä¸²)<br>ä½¿ç”¨ç»™å®šçš„å‚æ•° replacement æ›¿æ¢å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String Str = new String(&quot;www.hello.com&quot;);</span><br><span class="line">System.out.println(Str.replaceAll(&quot;(.*)hello(.*)&quot;, &quot;hi&quot; ));</span><br></pre></td></tr></table></figure>

<p>âœ…str.replace(åŸå­—ç¬¦/å­—ç¬¦ä¸², æ›¿æ¢æˆçš„æ–°å­—ç¬¦/å­—ç¬¦ä¸²)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">String replace(char oldChar, char newChar)</span><br><span class="line">ç”¨æ–°å­—ç¬¦newChar æ›¿æ¢æ‰€æœ‰çš„ æ—§å­—ç¬¦oldChar ã€‚</span><br><span class="line"></span><br><span class="line">String replace(CharSequence target, CharSequence replacement)</span><br><span class="line">ç”¨æ–°å­—ç¬¦ä¸²replacementæ›¿æ¢æ‰€æœ‰çš„ æ—§å­—ç¬¦ä¸²targetã€‚</span><br><span class="line"></span><br><span class="line">String replaceAll(String regex, String replacement)</span><br><span class="line">ç”¨æ–°å­—ç¬¦ä¸²replacement æ›¿æ¢æ‰€æœ‰çš„ æ­£åˆ™æ¨¡å¼åŒ¹é…çš„ä¸²ã€‚â€”â€”ï¼ˆæ›¿æ¢çš„æ˜¯æ¨¡ç³Šå­—ä¸²ï¼‰</span><br><span class="line"></span><br><span class="line">String replaceFirst(String regex, String replacement)</span><br><span class="line">ç”¨æ–°å­—ç¬¦ä¸²replacement æ›¿æ¢ç¬¬ä¸€ä¸ª æ­£åˆ™æ¨¡å¼åŒ¹é…çš„ä¸²ã€‚â€”â€”ï¼ˆæ›¿æ¢çš„æ˜¯æ¨¡ç³Šå­—ä¸²ï¼‰</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">å¦å¤–ï¼ŒStringBuilderä¸­ä¹Ÿæœ‰è¯¥æ–¹æ³•ï¼š</span><br><span class="line">replace(int startï¼Œint endï¼ŒString str)</span><br><span class="line">ç”¨str æ›¿æ¢ startâ€“endçš„å­ä¸²ã€‚//ä¸åŒ…æ‹¬end</span><br></pre></td></tr></table></figure>

<p>âœ…str.indexof() ç”¨äºè¿”å›å­—ç¬¦ä¸²ä¸­æŸéƒ¨åˆ†çš„ç´¢å¼•<br>1ã€ indexOf(String str): è¿”å›æŒ‡å®šå­—ç¬¦stråœ¨å­—ç¬¦ä¸²ä¸­ï¼ˆæ–¹æ³•è°ƒç”¨è€…ï¼‰ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„èµ·å§‹ç´¢å¼•ï¼Œå¦‚æœæ­¤å­—ç¬¦ä¸²ä¸­æ²¡æœ‰è¿™æ ·çš„å­—ç¬¦ï¼Œåˆ™è¿”å› -1ã€‚<br>2ã€indexOf(String str, int index): è¿”å›ä» index ä½ç½®å¼€å§‹æŸ¥æ‰¾æŒ‡å®šå­—ç¬¦stråœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„èµ·å§‹ç´¢å¼•ï¼Œå¦‚æœæ­¤å­—ç¬¦ä¸²ä¸­æ²¡æœ‰è¿™æ ·çš„å­—ç¬¦ï¼Œåˆ™è¿”å› -1ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str = &quot;01234567890123456789&quot;;</span><br><span class="line">System.out.println(str.indexOf(&quot;123&quot;));  //return 1</span><br><span class="line">System.out.println(str.indexOf(&quot;123&quot;,5));  //return 11</span><br></pre></td></tr></table></figure>

<p>str.lastIndexOf(â€œ//â€œ)  è¿”å›æœ€åä¸€æ¬¡å‡ºç°å­—ç¬¦/å­—ç¬¦ä¸²çš„ä½ç½®ã€‚</p>
<p>âœ…String.join()é™æ€æ–¹æ³•<br>ç”¨äºå°†list/setå˜ä¸ºString</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Long&gt; list = Lists.newArrayList(1L, 2L, 2L);</span><br><span class="line">// å…ƒç´ ä¸­ç±»å‹å˜æ¢</span><br><span class="line">List&lt;String&gt; ls = list.stream().distinct().map(String::valueOf).collect(Collectors.toList());</span><br><span class="line">// é‡Œé¢çš„lsä¸èƒ½ä¸ºç©ºï¼Œå¿…é¡»æ˜¯Stringå…ƒç´ ç±»å‹</span><br><span class="line">String s = String.join(&quot;,&quot;, ls);</span><br><span class="line">System.out.println(s);</span><br><span class="line"></span><br><span class="line">//ç”¨setä¹Ÿå¯ä»¥</span><br><span class="line">Set&lt;Long&gt; set = Sets.newHashSet(1L, 2L);</span><br><span class="line">Set&lt;String&gt; ss = set.stream().map(i-&gt;String.valueOf(i)).collect(Collectors.toSet());</span><br><span class="line">s = String.join(&quot;,&quot;, ss);</span><br><span class="line">System.out.println(s);</span><br></pre></td></tr></table></figure>

<p>âœ…è·å–æŸä¸ªä½ç½®çš„å­—ç¬¦<br><code>char c = s.charAt(index);</code></p>
<h4 id="Splitterå·¥å…·ç±»ï¼ˆStringæ‹†åˆ†æˆlistï¼‰"><a href="#Splitterå·¥å…·ç±»ï¼ˆStringæ‹†åˆ†æˆlistï¼‰" class="headerlink" title="Splitterå·¥å…·ç±»ï¼ˆStringæ‹†åˆ†æˆlistï¼‰"></a>Splitterå·¥å…·ç±»ï¼ˆStringæ‹†åˆ†æˆlistï¼‰</h4><p>æ˜¯googleå‡ºå“çš„ï¼ŒguavaåŒ…ä¸‹çš„å·¥å…·ç±»ï¼Œç”¨äºå¯¹å­—ç¬¦ä¸²åˆ†å‰²å¤„ç†ã€‚</p>
<p>é¦–å…ˆï¼Œå·²æœ‰çš„å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²çš„æ–¹æ³•ï¼š</p>
<p>1.Stringè‡ªå¸¦çš„split()æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;1,2,3&quot;;</span><br><span class="line">String[] split = s.split(&quot;,&quot;);</span><br></pre></td></tr></table></figure>
<p>ä¸è¶³ä¹‹å¤„ï¼šå¦‚æœ,åæœ‰ç©ºæ ¼çš„è¯ï¼Œè¿˜éœ€è¦åšè¿›ä¸€æ­¥å¤„ç†ï¼Œ<br>å¹¶ä¸”åˆ†å‰²åä»¥æ•°ç»„æ¥æ”¶ï¼Œå¦‚æœæ•°æ®è¿‡å¤šï¼Œè¿˜éœ€è¦å†è½¬ä¸ºé›†åˆã€‚</p>
<p>2.ä½¿ç”¨Patterç±»çš„splité™æ€æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String input = &quot;This!!unusual use!!hh!!points&quot;;</span><br><span class="line">System.out.println(Arrays.toString(Pattern.compile(&quot;!!&quot;).split(input)));</span><br></pre></td></tr></table></figure>

<p>3.Splitteræ¥åˆ†å‰²å­—ç¬¦ä¸²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class SplitterTest &#123;</span><br><span class="line"></span><br><span class="line">    //å®šä¹‰ä¸€ä¸ªæ‹†åˆ†å™¨ï¼Œâ€œ,â€åˆ†éš”ï¼Œå»ç©ºæ ¼</span><br><span class="line">    private static final Splitter splitter = Splitter.on(&quot;,&quot;).trimResults().omitEmptyStrings();</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        String s = &quot;1,2, 3&quot;;</span><br><span class="line">        List&lt;String&gt; list = splitter.splitToList(s);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        List&lt;Long&gt; list1 = list.stream().map(Long::valueOf).collect(Collectors.toList());</span><br><span class="line">        System.out.println(list1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Joinerè¿æ¥å­—ç¬¦ä¸²"><a href="#Joinerè¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="Joinerè¿æ¥å­—ç¬¦ä¸²"></a>Joinerè¿æ¥å­—ç¬¦ä¸²</h4><p>google guavaæä¾›çš„ç”¨æ¥è¿æ¥å­—ç¬¦ä¸²çš„ç±»ã€‚éœ€è¦å¯¼åŒ…ï¼šguavaã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// è¿æ¥å­—ç¬¦ä¸²list</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(&quot;AA&quot;, &quot;BB&quot;, &quot;CC&quot;);</span><br><span class="line">String str = Joiner.on(&quot;:&quot;).join(list);</span><br><span class="line">System.out.println(str);</span><br><span class="line">// è¾“å‡ºï¼šAA:BB:CC</span><br><span class="line"></span><br><span class="line">//è¿‡æ»¤å…¶ä¸­çš„null</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(&quot;AA&quot;, &quot;BB&quot;, null);</span><br><span class="line">String str = Joiner.on(&quot;:&quot;).skipNulls().join(list);</span><br><span class="line">System.out.println(str);</span><br><span class="line">// è¾“å‡ºï¼šAA:BB</span><br><span class="line"></span><br><span class="line">// å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªJoinå¯¹è±¡</span><br><span class="line">private static Joiner MY_JOINER = Joiner.on(&quot;/&quot;).skipNulls();</span><br><span class="line">String s = MY_JOINER.join(..);  é‡Œé¢çš„å‚æ•°æ˜¯Objectç±»å‹ï¼Œå¯ä»¥å¤šä¸ªã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44143796/article/details/122998799">https://blog.csdn.net/qq_44143796/article/details/122998799</a></p>
<h4 id="Stringæ“ä½œ"><a href="#Stringæ“ä½œ" class="headerlink" title="Stringæ“ä½œ"></a>Stringæ“ä½œ</h4><p>âœ…æˆªå–å­—ç¬¦ä¸²</p>
<p>1ã€stringè‡ªå·±çš„substringæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;hello&quot;;</span><br><span class="line">System.out.println(s.substring(2)); //llo</span><br><span class="line">System.out.println(s.substring(2, 4)); //ll å·¦é—­å³å¼€</span><br></pre></td></tr></table></figure>

<p>2ã€StringUtilsæä¾›çš„æ–¹æ³•ï¼ˆapacheï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">StringUtils.substring(&quot;hello world&quot;, 4);   // è¿”å›å€¼ï¼Œä»ç¬¬4ä½æˆªå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ : o wrold</span><br><span class="line">StringUtils.substring(&quot;hello world&quot;, 4, 10); // è¿”å›å€¼ï¼Œä»ç¬¬4ä½æˆªå–åˆ°ç¬¬9ä½ :   o wrol</span><br><span class="line"></span><br><span class="line">//æˆªå–æŸä¸ªå­—ç¬¦ä¸²ä¹‹å‰çš„å­—ç¬¦</span><br><span class="line">StringUtils.substringBefore(&quot;hello world&quot;, &quot;l&quot;); </span><br><span class="line">//ç»“æœæ˜¯ï¼šhe          è¿™é‡Œæ˜¯ä»¥ç¬¬ä¸€ä¸ªâ€lâ€ï¼Œä¸ºæ ‡å‡†ã€‚</span><br><span class="line">StringUtils.substringBeforeLast(&quot;hello world&quot;, &quot;l&quot;);</span><br><span class="line">//ç»“æœä¸ºï¼šhello wor   è¿™é‡Œä»¥æœ€åä¸€ä¸ªâ€œlâ€ä¸ºå‡†ã€‚</span><br><span class="line"></span><br><span class="line">//æˆªå–æŸä¸ªå­—ç¬¦ä¸²ä¹‹åçš„å­—ç¬¦</span><br><span class="line">StringUtils.substringAfter(&quot;hello world&quot;, &quot;l&quot;);</span><br><span class="line">//ç»“æœæ˜¯ï¼šlo world   è¿™é‡Œæ˜¯ä»¥ç¬¬ä¸€ä¸ªâ€lâ€ï¼Œä¸ºæ ‡å‡†ã€‚</span><br><span class="line">StringUtils.substringAfterLast(&quot;hello world&quot;, &quot;l&quot;);</span><br><span class="line">//ç»“æœä¸ºï¼šd          è¿™é‡Œä»¥æœ€åä¸€ä¸ªâ€œlâ€ä¸ºå‡†ã€‚</span><br><span class="line"></span><br><span class="line">//æˆªå–ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´éš”çš„å­—ç¬¦</span><br><span class="line">StringUtils.substringBetween(&quot;hello world&quot;, &quot;o&quot;);    </span><br><span class="line">//ç»“æœæ˜¯ï¼š w   ä¸¤ä¸ªoä¹‹é—´çš„å­—ç¬¦ä¸²ã€‚   </span><br><span class="line">StringUtils.substringBetween(&quot;hello world&quot;, &quot;l&quot;, &quot;r&quot;); </span><br><span class="line">//ç»“æœæ˜¯ï¼š lo wo   ç¬¬ä¸€ä¸ªå­—ç¬¦â€œlâ€ä¸ç¬¬ä¸€ä¸ªå­—ç¬¦â€œrâ€ä¹‹é—´çš„å­—ç¬¦ä¸²   </span><br><span class="line">StringUtils.substringsBetween(&quot;hello world&quot;, &quot;l&quot;, &quot;r&quot;);</span><br><span class="line">//ç»“æœæ˜¯ï¼šæ•°ç»„ [lo wo]   ç¬¬ä¸€ä¸ªå­—ç¬¦â€œlâ€ä¸ç¬¬ä¸€ä¸ªå­—ç¬¦â€œrâ€ä¹‹é—´çš„å­—ç¬¦ä¸²ï¼Œä»¥æ•°ç»„å½¢å¼è¿”å›ã€‚   </span><br></pre></td></tr></table></figure>

<p>3ã€stringè‡ªå·±çš„splitæ–¹æ³•<br>å°†å­—ç¬¦ä¸²æŒ‰ç…§åˆ†å‰²ç¬¦æˆªå–ï¼Œä»¥æ•°ç»„å½¢å¼è¿”å›</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String str = &quot;hello, world, ni,  hao&quot;;</span><br><span class="line">String[]  strs=str.split(&quot;,&quot;);</span><br><span class="line">for(int i=0,len=strs.length;i&lt;len;i++)&#123;</span><br><span class="line">    System.out.println(strs[i]);</span><br><span class="line">&#125;</span><br><span class="line">//ç©ºæ ¼ä¹Ÿç®—äº†</span><br><span class="line">hello</span><br><span class="line"> world</span><br><span class="line"> ni</span><br><span class="line">  hao</span><br></pre></td></tr></table></figure>

<p><code>split(String regex)</code> å‚æ•°regexç§°ä¸ºåˆ†å‰²ç¬¦,å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¡¨ç¤ºã€‚<br>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">String str= &quot;a33b444c555d&quot;;</span><br><span class="line">//æ­£åˆ™è¡¨è¾¾å¼ä¸­\d+è¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—,javaä¸­\\è¡¨ç¤ºä¸€ä¸ªæ™®é€š\</span><br><span class="line">//String[] split = str.split(Pattern.compile(&quot;\\d+&quot;).toString());</span><br><span class="line">//ä¸¤ç§å†™æ³•éƒ½æ˜¯ä¸€æ ·çš„,ä¸‹é¢å†™æ³•ç®€æ´</span><br><span class="line">String[] split = str.split(&quot;\\d+&quot;);</span><br><span class="line"></span><br><span class="line">String str= &quot;aaa|bbb|ccc&quot;;</span><br><span class="line">//ä½¿ç”¨|ä½œä¸ºåˆ†éš”ç¬¦,å…¶ä½™ç‰¹æ®Šå­—ç¬¦åŒç†</span><br><span class="line">//ä¸¤ä¸ª\è¡¨ç¤ºä¸€ä¸ª\,åŠ äº†\åè¡¨ç¤ºä»…åŒ¹é…å­—ç¬¦æœ¬èº«</span><br><span class="line">String[] split = str.split(&quot;\\|&quot;);</span><br><span class="line"></span><br><span class="line">String str= &quot;aaa,bbb#ccc&quot;;</span><br><span class="line">//ä½¿ç”¨,æˆ–#åˆ†å‰²å­—ç¬¦ä¸²</span><br><span class="line">String[] split = str.split(&quot;,|#&quot;);</span><br></pre></td></tr></table></figure>

<p><code>split(String regex,int limit)</code> limitæ§åˆ¶åˆ†å‰²çš„æ¬¡æ•°ï¼Œåªå¡«ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„è¯,limité»˜è®¤æ˜¯0ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰limit &gt; 0,(ä»å·¦åˆ°å³)æœ€å¤šåˆ†å‰² n - 1 æ¬¡,æ•°ç»„çš„é•¿åº¦å°†ä¸ä¼šå¤§äº n,ç»“å°¾çš„ç©ºå­—ç¬¦ä¸²ä¸ä¼šä¸¢å¼ƒ</span><br><span class="line">//limit=3,åˆ‡å‰²2æ¬¡,æœ«å°¾ä¼šåˆ†å‰²å‡ºä¸€ä¸ª&quot;&quot;ç©ºå­—ç¬¦ä¸²</span><br><span class="line">String[] split = &quot;abcb&quot;.split(&quot;b&quot;,3);</span><br><span class="line">//split:&#123;&quot;a&quot;,&quot;c&quot;,&quot;&quot;&#125;</span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰limit &lt; 0,åŒ¹é…åˆ°å¤šå°‘æ¬¡å°±åˆ†å‰²å¤šå°‘æ¬¡,è€Œä¸”æ•°ç»„å¯ä»¥æ˜¯ä»»ä½•é•¿åº¦ã€‚ç»“å°¾çš„ç©ºå­—ç¬¦ä¸²ä¸ä¼šä¸¢å¼ƒ</span><br><span class="line"></span><br><span class="line">ï¼ˆ3ï¼‰limit=0ä¸é™åˆ¶åˆ†å‰²æ¬¡æ•°ï¼Œè¦æ³¨æ„ç»“å°¾çš„ç©ºå­—ç¬¦ä¸²å°†ä¼šä¸¢å¼ƒ</span><br></pre></td></tr></table></figure>

<p>splitæ–¹æ³•å®Œæ•´ç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41740883/article/details/111696866">https://blog.csdn.net/qq_41740883/article/details/111696866</a></p>
<p>âœ…å­—ç¬¦ä¸²æ‹¼æ¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3() &#123;</span><br><span class="line">    // 1.ç›´æ¥ç”¨+ï¼Œå†…éƒ¨ä¼šæ›¿æ¢æˆStringBuilderçš„appendæ–¹æ³•</span><br><span class="line">    // ä¸å»ºè®®åœ¨ for å¾ªç¯ä¸­ä½¿ç”¨ â€œ+â€ è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¼šåˆ›å»ºå¤šä¸ªStringBuilder å¯¹è±¡</span><br><span class="line">    String s1 = &quot;hel&quot;;</span><br><span class="line">    String s2 = null;</span><br><span class="line">    System.out.println(s1 + s2); //helnull  å¦‚æœæ˜¯nullï¼Œå½“ä½œå­—ç¬¦ä¸²nullæ¥å¤„ç†</span><br><span class="line">    </span><br><span class="line">    // 2.StringBuilderçš„appendæ–¹æ³• ï¼ˆéçº¿ç¨‹å®‰å…¨ï¼‰</span><br><span class="line">    StringBuilder s3 = new StringBuilder(&quot;hel&quot;);</span><br><span class="line">    System.out.println(s3.append(&quot;lo&quot;));</span><br><span class="line">    </span><br><span class="line">    // 3.StringBufferçš„appendæ–¹æ³• ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</span><br><span class="line">    StringBuffer s4 = new StringBuffer(&quot;hel&quot;);</span><br><span class="line">    System.out.println(s4.append(&quot;lo&quot;));</span><br><span class="line">    </span><br><span class="line">    // 4.Stringç±»çš„concatæ–¹æ³•</span><br><span class="line">    System.out.println(s1.concat(&quot;lo&quot;));</span><br><span class="line">    //System.out.println(s1.concat(null)); //NPE</span><br><span class="line">    </span><br><span class="line">    // 5.Stringç±»çš„é™æ€joinæ–¹æ³• JDK 1.8 æä¾›ï¼Œå¯ä»¥åˆ†éš”ç¬¦ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªå­—ç¬¦ä¸²(çœ‹ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥æ˜¯list/set)</span><br><span class="line">    System.out.println(String.join(&quot;&quot;, &quot;hel&quot;, &quot;lo&quot;)); //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå­—ç¬¦ä¸²è¿æ¥ç¬¦ï¼Œåé¢å¯ä»¥æ˜¯å¾ˆå¤šä¸ªå­—ç¬¦ä¸²è¿æ¥</span><br><span class="line">    </span><br><span class="line">    // 6.org.apache.commons.lang3.StringUtilçš„joinæ–¹æ³•ï¼ˆä¸ºä»€ä¹ˆä½¿ç”¨è¿™ä¸ªä¼šæ…¢ï¼Ÿï¼Ÿï¼Ÿï¼‰</span><br><span class="line">    // ä¸ç”¨æ‹…å¿ƒ NullPointerException,å†…éƒ¨ä½¿ç”¨çš„ä»ç„¶æ˜¯ StringBuilder</span><br><span class="line">    System.out.println(StringUtils.join(&quot;hel&quot;, &quot;lo&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/ChineseSoftware/article/details/122956817">https://blog.csdn.net/ChineseSoftware/article/details/122956817</a></p>
<p>concatä¸+çš„åŒºåˆ«ï¼š<br>â‘ å¦‚æœæ‹¼æ¥çš„å­—ç¬¦ä¸²æ˜¯ nullï¼Œconcat æ—¶å€™å°±ä¼šæŠ›å‡º NullPointerExceptionï¼Œâ€œ+â€ æ“ä½œç¬¦ä¼šå½“åšæ˜¯ â€œnullâ€ å­—ç¬¦ä¸²æ¥å¤„ç†ã€‚<br>â‘¡å¦‚æœæ‹¼æ¥çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²(â€œâ€)ï¼Œé‚£ä¹ˆ concat çš„æ•ˆç‡è¦æ›´é«˜ä¸€ç‚¹ã€‚æ¯•ç«Ÿä¸éœ€è¦ new StringBuilder å¯¹è±¡ã€‚<br>â‘¢å¦‚æœæ‹¼æ¥çš„å­—ç¬¦ä¸²éå¸¸å¤šï¼Œconcat çš„æ•ˆç‡å°±ä¼šä¸‹é™ï¼Œå› ä¸ºç”¨åˆ°å­—ç¬¦æ•°ç»„ï¼Œå¼€é”€å°±å¤§ã€‚</p>
<p>âœ…å­—ç¬¦ä¸²ç¿»è½¬</p>
<p>1ã€ç”¨stringBufferæˆ–è€…stringBuilderè‡ªå¸¦çš„reverseæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String newS = new StringBuilder(old).reverse().toString();</span><br></pre></td></tr></table></figure>

<p>2ã€å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºcharæ•°ç»„ï¼Œç„¶åäº¤æ¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">char[] charArray = s.toCharArray();</span><br><span class="line">int start = 0, end = charArray.length - 1;</span><br><span class="line">for (; start &lt; end; start++, end--) &#123;</span><br><span class="line">    charArray[start] ^= charArray[end];//é‡‡ç”¨å¼‚æˆ–</span><br><span class="line">    charArray[end] ^= charArray[start];</span><br><span class="line">    charArray[start] ^= charArray[end];</span><br><span class="line">&#125;</span><br><span class="line">String newS = new String(charArray);</span><br><span class="line"></span><br><span class="line">æˆ–è€…ï¼š</span><br><span class="line">while (start &lt; end) &#123;</span><br><span class="line">    //äº¤æ¢é¦–å°¾charå€¼</span><br><span class="line">    char c = charArray[end];</span><br><span class="line">    charArray[end] = charArray[start];</span><br><span class="line">    charArray[start] = c;</span><br><span class="line">    start++;</span><br><span class="line">    end--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€stringBufferå€’åºæ‹¼æ¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer sb = new StringBuffer();</span><br><span class="line">for (int i = s.length() - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">    sb.append(s.charAt(i));</span><br><span class="line">&#125;</span><br><span class="line">String newS = sb.toString();</span><br></pre></td></tr></table></figure>

<p>4ã€åˆ©ç”¨æ ˆçš„å…ˆè¿›åå‡º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer sb = new StringBuffer();</span><br><span class="line">Stack stack = new Stack();</span><br><span class="line">for (int i = 0; i &lt; s.length(); i++) &#123;</span><br><span class="line">    stack.push(s.charAt(i));</span><br><span class="line">&#125;</span><br><span class="line">while (!stack.isEmpty()) &#123;</span><br><span class="line">    //stackä¼šè¿”å›æ ˆé¡¶å€¼ï¼Œå¹¶ä¸”ä¼šæŠŠè¯¥å€¼åˆ é™¤</span><br><span class="line">    sb.append(stack.pop());</span><br><span class="line">&#125;</span><br><span class="line">String newS = sb.toString();</span><br></pre></td></tr></table></figure>

<p>5ã€åˆ‡å‰²é€’å½’åè½¬</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static String reverse(String s) &#123;</span><br><span class="line">    if (s.length() &lt;= 1) &#123;</span><br><span class="line">        return s;</span><br><span class="line">    &#125;</span><br><span class="line">    //æ¯æ¬¡æŠŠç¬¬ä¸€ä¸ªæ”¾åœ¨åé¢</span><br><span class="line">    return reverse(s.substring(1)) + s.substring(0, 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6ã€äºŒåˆ†é€’å½’åè½¬</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static String reverse(String s) &#123;</span><br><span class="line">    int length = s.length();</span><br><span class="line">    if (length &lt;= 1) return s;</span><br><span class="line">    String left = s.substring(0, length / 2);</span><br><span class="line">    String right = s.substring(length / 2, length);</span><br><span class="line">    return reverse(right) + reverse(left);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.jb51.net/article/237801.htm">https://www.jb51.net/article/237801.htm</a></p>
<p>âœ…åˆ é™¤å­—ç¬¦ä¸²æœ€åä¸€ä¸ªå­—ç¬¦</p>
<p>1ã€Stringçš„substringæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;abcd&quot;;</span><br><span class="line">System.out.println(s.substring(0, s.length() - 1));</span><br></pre></td></tr></table></figure>

<p>2ã€replaceFirstæ–¹æ³• æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String str = &quot;abcd&quot;;</span><br><span class="line">str = str.replaceFirst(&quot;.$&quot;, &quot;&quot;);</span><br><span class="line">//åŒ¹é…é™¤â€œ\nâ€å’Œ&quot;\r&quot;ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦</span><br><span class="line">//åŒ¹é…è¾“å…¥è¡Œå°¾ã€‚</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35764295/article/details/126106534">https://blog.csdn.net/qq_35764295/article/details/126106534</a></p>
<h4 id="StringBuilderæ“ä½œ"><a href="#StringBuilderæ“ä½œ" class="headerlink" title="StringBuilderæ“ä½œ"></a>StringBuilderæ“ä½œ</h4><p>âœ…åˆ é™¤æœ€åä¸€ä¸ªå­—ç¬¦</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">StringBuilder sb = new StringBuilder();</span><br><span class="line">sb.append(&#x27;a&#x27;).append(&#x27;b&#x27;).append(&#x27;c&#x27;);</span><br><span class="line">sb.deleteCharAt(sb.length()-1);</span><br><span class="line">System.out.println(sb); //ab</span><br><span class="line"></span><br><span class="line">æˆ–è€…ï¼š</span><br><span class="line">sb.delete(sb.length()-1, sb.length());</span><br></pre></td></tr></table></figure>

<h3 id="mapç›¸å…³"><a href="#mapç›¸å…³" class="headerlink" title="mapç›¸å…³"></a>mapç›¸å…³</h3><h4 id="mapå‡ ç§éå†æ–¹å¼"><a href="#mapå‡ ç§éå†æ–¹å¼" class="headerlink" title="mapå‡ ç§éå†æ–¹å¼"></a>mapå‡ ç§éå†æ–¹å¼</h4><p>ä¸€ã€Map.Entryéå†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) &#123;  </span><br><span class="line">  System.out.println(&quot;key= &quot; + entry.getKey());</span><br><span class="line">  System.out.println(&quot;value= &quot; + entry.getValue());</span><br><span class="line"> &#125;  </span><br></pre></td></tr></table></figure>
<p>äºŒã€é€šè¿‡Iteratorè¿­ä»£å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**é€šè¿‡entrySet()æ–¹æ³•å°†keyå’Œvalueå­˜æ”¾åˆ°Seté›†åˆä¸­ï¼ŒSeté›†åˆä¸­æœ‰è¿­ä»£å™¨**/</span><br><span class="line">Set&lt;Entry&lt;String,String&gt;&gt; entry = map.entrySet();</span><br><span class="line">Iterator&lt;Entry&lt;String,String&gt;&gt; iterators = entry.iterator();</span><br><span class="line">while(iterators.hasNext())&#123;</span><br><span class="line">  Entry&lt;String,String&gt; entrys  = iterators.next();</span><br><span class="line">  System.out.println(&quot;key=&quot;+entrys.getKey()+&quot;&amp;&amp;value=&quot;+entrys.getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‰ã€é€šè¿‡keySet()éå†<br>keySet()ï¼šå°†Mapä¸­æ‰€æœ‰çš„keyå­˜æ”¾åˆ°Seté›†åˆä¸­ã€‚å› ä¸ºSeté›†åˆæœ‰è¿­ä»£å™¨ï¼Œå¯ä»¥é€šè¿‡è¿­ä»£å™¨å¾ªç¯keyï¼Œå†é€šè¿‡get()æ–¹æ³•ï¼Œå¾—åˆ°æ¯ä¸ªkeyæ‰€å¯¹åº”çš„valueï¼›</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**é€šè¿‡keySet()æ–¹æ³•å°†æ‰€æœ‰çš„keyå€¼å­˜æ”¾åˆ°Seté›†åˆä¸­,Seté›†åˆä¸­æœ‰è¿­ä»£å™¨**/</span><br><span class="line">Iterator&lt;String&gt; iterator = map.keySet().iterator();</span><br><span class="line">while(iterator.hasNext())&#123;</span><br><span class="line">  String key = iterator.next();</span><br><span class="line">  System.out.println(&quot;key=&quot;+key+&quot;  &quot;+map.get(key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å¯ä»¥ä¸ç”¨è¿­ä»£å™¨ï¼Œç›´æ¥forå¾ªç¯</span><br><span class="line">for (String key: map.keySet()) &#123;</span><br><span class="line">  System.out.println(&quot;key:&quot; + map.get(key));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å››ã€values()éå†<br>values()è·å–é›†åˆä¸­çš„æ‰€æœ‰çš„valueå€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;String&gt; collection = map.values();</span><br><span class="line">å†foréå†å¾—åˆ°valueï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç”¨è¿­ä»£å™¨</span><br><span class="line">Iterator var3 = values.iterator();</span><br><span class="line">while(var3.hasNext()) &#123;</span><br><span class="line">  String value = (String)var3.next();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>äº”ã€ç›´æ¥foreach map</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map.forEach((key, value) -&gt; &#123;</span><br><span class="line">  System.out.println(&quot;ç¬¬äº”ç§:&quot; + key + &quot; ï¼š&quot; + value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="MapUtilså·¥å…·ç±»"><a href="#MapUtilså·¥å…·ç±»" class="headerlink" title="MapUtilså·¥å…·ç±»"></a>MapUtilså·¥å…·ç±»</h4><p>MapUtilsæ˜¯ org.apache.commons.collections å·¥å…·åŒ…ä¸­å¸¸ç”¨çš„å·¥å…·ç±»<br>éœ€è¦å¯¼å…¥åŒ…ï¼šcommons-collections4</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int value = MapUtils.getInteger(map, key, 0)</span><br><span class="line">//å°†ç»“æœè½¬æ¢ä¸ºIntegerï¼Œå¦‚æœè½¬æ¢å¤±è´¥åˆ™ä½¿ç”¨é»˜è®¤å€¼</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012894692/article/details/82557843">https://blog.csdn.net/u012894692/article/details/82557843</a></p>
<h4 id="mapçš„ä¸€äº›æ“ä½œ"><a href="#mapçš„ä¸€äº›æ“ä½œ" class="headerlink" title="mapçš„ä¸€äº›æ“ä½œ"></a>mapçš„ä¸€äº›æ“ä½œ</h4><p>âœ…mapçš„size</p>
<p>map.size() è¿”å› hashMap ä¸­é”®/å€¼å¯¹çš„æ•°é‡ã€‚</p>
<p>âœ…mapçš„putå’ŒputIfAbsent<br>1.ä½¿ç”¨ put æ–¹æ³•æ·»åŠ é”®å€¼å¯¹ï¼Œå¦‚æœ map é›†åˆä¸­æ²¡æœ‰è¯¥ key å¯¹åº”çš„å€¼ï¼Œåˆ™ç›´æ¥æ·»åŠ ï¼Œå¹¶è¿”å› nullï¼›å¦‚æœå·²ç»å­˜åœ¨å¯¹åº”çš„å€¼ï¼Œåˆ™ä¼š<strong>è¦†ç›–æ—§å€¼</strong>ï¼Œvalue ä¸ºæ–°çš„å€¼ï¼Œè¿”å›å€¼ä¸ºæ—§çš„valueã€‚<br><code>map.put(key, value)</code></p>
<p>2.ä½¿ç”¨ putIfAbsent æ–¹æ³•æ·»åŠ é”®å€¼å¯¹ï¼Œä¸å­˜åœ¨æ‰åŠ å…¥ï¼Œå¦‚æœ map é›†åˆä¸­æ²¡æœ‰è¯¥ key å¯¹åº”çš„å€¼ï¼Œåˆ™ç›´æ¥æ·»åŠ ï¼Œå¹¶è¿”å› nullï¼Œå¦‚æœå·²ç»å­˜åœ¨å¯¹åº”çš„å€¼ï¼Œåˆ™ä¾æ—§ä¸ºåŸæ¥çš„å€¼ï¼Œè¿”å›å€¼ä¸º valueï¼ˆæ—§çš„å€¼ï¼‰ã€‚<br><code>map.putIfAbsent(key, value)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1() &#123;</span><br><span class="line">    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">    map.put(&quot;11&quot;, &quot;11&quot;);</span><br><span class="line">    System.out.println(map.put(&quot;11&quot;, &quot;22&quot;));  //è¾“å‡º11</span><br><span class="line">    System.out.println(map.put(&quot;22&quot;, &quot;22&quot;));  //è¾“å‡ºnull</span><br><span class="line">    System.out.println(map.putIfAbsent(&quot;11&quot;, &quot;33&quot;));  //è¾“å‡º22</span><br><span class="line">    System.out.println(map.putIfAbsent(&quot;33&quot;, &quot;44&quot;));  //è¾“å‡º33</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>âœ…map.getOrDefault(key, defaultvalue)<br>ç”¨äºmapè·å–valueï¼Œä¸.get(key)ä¸åŒçš„æ˜¯ï¼Œå¦‚æœå¾—åˆ°çš„valueæ˜¯nullçš„è¯ï¼Œå¯ä»¥ç»™ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;StudentGrade&gt; gradeList = Lists.newArrayList();</span><br><span class="line">//æŠŠå­¦ç”Ÿæˆç»©listå˜ä¸ºmapï¼šå­¦ç”Ÿ-æˆç»©list</span><br><span class="line">Map&lt;String, List&lt;String&gt;&gt; gradeMap = Maps.newHashMap();</span><br><span class="line">for(StudentGrade studentGrade : gradeList) &#123;</span><br><span class="line">  List&lt;String&gt; grades = gradeMap.getOrDefault(studentGrade.getName(), Lists.newArrayList());</span><br><span class="line">  grades.add(studentGrade.getGrade());</span><br><span class="line">  gradeMap.put(studentGrade.getName(), grades); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…å¯¹mapçš„æŸä¸ªvalueåŠ ä¸€</p>
<p>ç”¨<code>map.get(i)++;</code> ä¸è¡Œã€‚å¾—å…ˆï¼š<code>int v = map.get(i) + 1;</code> ç„¶åï¼š<code>map.put(i, v);</code></p>
<p>âœ…æŸkeyæ˜¯å¦å­˜åœ¨<br><code>map.containsKey(key)</code></p>
<p>âœ…jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºmap</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Long, String&gt; map = JSON.parseObject(jsonString, Map.class);</span><br></pre></td></tr></table></figure>

<p>âœ…ceilingEntry()</p>
<p>java.util.TreeMap.ceilingEntry() è¿”å›å…·æœ‰æœ€å°é”®å€¼ï¼ˆå¤§äºæˆ–ç­‰äºæŒ‡å®šé”®ï¼‰çš„é”®å€¼å¯¹ï¼Œå¦‚æœæ²¡æœ‰è¿™æ ·çš„é”®ï¼Œåˆ™è¿”å›nullã€‚(å–æ¯”è¾“å…¥å€¼å¤§çš„)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TreeMap&lt;Integer, String&gt; map = new TreeMap&lt;&gt;();</span><br><span class="line">map.put(1, &quot;1&quot;);</span><br><span class="line">map.put(3, &quot;3&quot;);</span><br><span class="line">Map.Entry&lt;Integer, String&gt; entry = map.ceilingEntry(2);</span><br><span class="line">System.out.println(entry.getValue()); //3</span><br></pre></td></tr></table></figure>

<h3 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h3><p>å®šä¹‰æšä¸¾ç±»ï¼Œå®šä¹‰åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œå’Œimplã€serviceã€voåŒ…å¹³çº§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public enum SexEnum:int &#123;</span><br><span class="line">    male,female;</span><br><span class="line">&#125;</span><br><span class="line">å¤šä¸ªæšä¸¾æˆå‘˜ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ï¼Œ</span><br><span class="line">å¦‚æœæ²¡æœ‰æ˜¾å¼åœ°å£°æ˜åŸºç¡€ç±»å‹çš„æšä¸¾ï¼Œé‚£ä¹ˆæ„å‘³ç€å®ƒæ‰€å¯¹åº”çš„åŸºç¡€ç±»å‹æ˜¯ intã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@Getter</span><br><span class="line">public enum DemoEnum &#123;</span><br><span class="line">  LIU(&quot;liu&quot;, 1),</span><br><span class="line">  WANG(&quot;wang&quot;, 2);</span><br><span class="line">  UN_KNOW(&quot;unknow&quot;, 99)</span><br><span class="line"></span><br><span class="line">  private final String name;</span><br><span class="line">  private final int age;</span><br><span class="line"></span><br><span class="line">  //æ„é€ å‡½æ•°</span><br><span class="line">  private DemoEnum(String name, int age)&#123; </span><br><span class="line">    this.name = name;</span><br><span class="line">    this.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //å¯ä»¥å­˜ä¸€ä¸ªmapä¾›å¤–éƒ¨ä½¿ç”¨ï¼Œé‡Œé¢æ˜¯ç›´æ¥çš„enumç±»</span><br><span class="line">  static Map&lt;String, DemoEnum&gt; map = new TreeMap&lt;&gt;();</span><br><span class="line">  static &#123;</span><br><span class="line">    for (DemoEnum enum : DemoEnum.values()) &#123;</span><br><span class="line">      map.put(enum.getName(), enum)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public static DemoEnum getEnumByName(String name) &#123;</span><br><span class="line">    return map.get(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //æ ¹æ®å±æ€§è·å¾—enumï¼Œå†è·å¾—å¦ä¸€å±æ€§</span><br><span class="line">  //å¯ä»¥ä½¿ç”¨ä¸Šé¢æ„é€ ä¸ªmapï¼Œå†ä»mapè·å–çš„æ–¹æ³•</span><br><span class="line">  //ä¹Ÿå¯ä»¥åŠ ä¸ªæ–¹æ³•ï¼Œéå†è·å–ï¼Œæ ¹æ®å±æ€§è·å–enum</span><br><span class="line">  public static DemoEnum nameOf(String name) &#123;</span><br><span class="line">    for (DemoEnum e : DemoEnum.values()) &#123;</span><br><span class="line">      if (e.name = name) &#123;</span><br><span class="line">        return e;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return UN_KNOW;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æšä¸¾ç±»çš„values()æ–¹æ³•ï¼Œè·å–å®šä¹‰çš„æˆå‘˜æ•°ç»„ï¼š<br><code>DemoEnum[] values = DemoEnum.values();</code></p>
<p>Enum valueOfæ–¹æ³•ï¼š<br>é€šè¿‡å­—ç¬¦ä¸²æ¥è·å–æšä¸¾enumï¼š<br><code>DemoEnum e = DemoEnum.valueOf(&quot;LIU&quot;)</code></p>
<h3 id="Fileç›¸å…³"><a href="#Fileç›¸å…³" class="headerlink" title="Fileç›¸å…³"></a>Fileç›¸å…³</h3><h4 id="File"><a href="#File" class="headerlink" title="File"></a>File</h4><p>Javaæ–‡ä»¶ç±»ä»¥æŠ½è±¡çš„æ–¹å¼ä»£è¡¨æ–‡ä»¶åå’Œç›®å½•è·¯å¾„åã€‚è¯¥ç±»ä¸»è¦ç”¨äºæ–‡ä»¶å’Œç›®å½•çš„åˆ›å»ºã€æ–‡ä»¶çš„æŸ¥æ‰¾å’Œæ–‡ä»¶çš„åˆ é™¤ç­‰ã€‚<br>Fileå¯¹è±¡ä»£è¡¨ç£ç›˜ä¸­å®é™…å­˜åœ¨çš„æ–‡ä»¶å’Œç›®å½•ã€‚<br>è‡ªæˆ‘ç†è§£ï¼šFileå¯¹è±¡å°±æ˜¯æ–‡ä»¶è·¯å¾„åœ¨javaé‡Œçš„ä¸€ä¸ªæŠ½è±¡ï¼Œå¹¶ä¸ä»£è¡¨çœŸå®æ–‡ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">æ–°å»ºæ–‡ä»¶ï¼š</span><br><span class="line">String dirname = &quot;/java&quot;;</span><br><span class="line">File f1 = new File(dirname);</span><br><span class="line"></span><br><span class="line">// åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½•</span><br><span class="line">if (f1.isDirectory()) &#123; &#125;</span><br><span class="line">f1.isFile() æ˜¯å¦æ˜¯æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">// è¿”å›ç”±æ­¤æŠ½è±¡è·¯å¾„åæ‰€è¡¨ç¤ºçš„ç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„åç§°æ‰€ç»„æˆå­—ç¬¦ä¸²æ•°ç»„ã€‚</span><br><span class="line">String s[] = f1.list();</span><br><span class="line">for (int i = 0; i &lt; s.length; i++) &#123;</span><br><span class="line">  File f = new File(dirname + &quot;/&quot; + s[i]);</span><br><span class="line">  if (f.isDirectory()) &#123;</span><br><span class="line">    System.out.println(s[i] + &quot; is a directory&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    System.out.println(s[i] + &quot; is a file&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public String getName()  è¿”å›æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„åç§°ã€‚ï¼ˆæ–‡ä»¶åï¼‰</span><br><span class="line"></span><br><span class="line">public String getPath()  å°†æ­¤æŠ½è±¡è·¯å¾„åè½¬æ¢ä¸ºä¸€ä¸ªè·¯å¾„åå­—ç¬¦ä¸²ã€‚ï¼ˆè·¯å¾„åï¼‰</span><br><span class="line"></span><br><span class="line">public String getParent()  è¿”å›æ­¤æŠ½è±¡è·¯å¾„åçš„çˆ¶è·¯å¾„åçš„è·¯å¾„åå­—ç¬¦ä¸²ï¼ˆè·¯å¾„åï¼‰</span><br><span class="line"></span><br><span class="line">public File getParentFile()  è¿”å›çˆ¶æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">public boolean exists()  æµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼š</span><br><span class="line">File file = new File(&quot;/Users/liuxuan/MyProject/hi.md&quot;);</span><br><span class="line">File dirFile = file.getParentFile();</span><br><span class="line">if(dirFile != null &amp;&amp; !dirFile.exists())&#123;</span><br><span class="line">  dirFile.mkdirs();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://www.runoob.com/java/java-file.html">https://www.runoob.com/java/java-file.html</a></p>
<p>âœ…æ–‡ä»¶è¯»å†™çš„æ“ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1() throws IOException &#123;</span><br><span class="line">    // 1. æ–°å»ºæ–‡ä»¶å¤¹</span><br><span class="line">    String filePath = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    File file1 = new File(filePath);</span><br><span class="line">    boolean isSame = file.equals(file1);  //true é‡å†™äº†ï¼Œå˜å€¼æ¯”è¾ƒ</span><br><span class="line">    boolean isSame1 = file == file1;  //false åœ°å€æ¯”è¾ƒ</span><br><span class="line">    System.out.println(isSame);  //true</span><br><span class="line">    if(!file.getParentFile().exists()) &#123;</span><br><span class="line">        File dirFile = file.getParentFile();</span><br><span class="line">        dirFile.mkdirs();  //å»ºç«‹çˆ¶æ–‡ä»¶å¤¹</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 2.å­—èŠ‚æ•°ç»„ç›´æ¥å†™æ–‡ä»¶ï¼Œä¸‹é¢æœ‰åŠ ä¸€æ­¥è¾“å‡ºæµçš„æ–¹å¼</span><br><span class="line">    String filePath1 = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hi.java&quot;;</span><br><span class="line">    File file2 = new File(filePath1);</span><br><span class="line">    if(file2.exists()) &#123;</span><br><span class="line">        boolean res = file2.delete();</span><br><span class="line">        System.out.println(&quot;delete:&quot; + res);</span><br><span class="line">    &#125;</span><br><span class="line">    byte[] data = &quot;hi&quot;.getBytes();</span><br><span class="line">    byte[] data1 = &quot;System.out.println(\&quot;hi\&quot;)&quot;.getBytes();  //Stringå˜å­—èŠ‚æ•°ç»„</span><br><span class="line">    try &#123;</span><br><span class="line">        FileUtils.writeByteArrayToFile(file2, data);</span><br><span class="line">        FileUtils.writeByteArrayToFile(file2, data1);  //è¦†å†™çš„æ–¹å¼</span><br><span class="line">    &#125; catch(Exception e) &#123;</span><br><span class="line">        System.out.println(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 3.è¯»å–æ–‡ä»¶ï¼šç”¨è¾“å…¥æµ æ–‡ä»¶-&gt;è¾“å…¥æµ-&gt;å­—èŠ‚æ•°ç»„</span><br><span class="line">    FileInputStream in = new FileInputStream(file2);  //ä¹Ÿæœ‰ä¼ å…¥è·¯å¾„å­—ç¬¦ä¸²çš„æ„é€ å‡½æ•°</span><br><span class="line">    // è¾“å…¥æµå˜å­—èŠ‚æ•°ç»„</span><br><span class="line">    byte[] data2 = IOUtils.toByteArray(in);</span><br><span class="line">    //String content = data2.toString();  //å­—èŠ‚æ•°ç»„å˜Stringï¼Œç”¨è¿™ä¸ªä¸å¯¹</span><br><span class="line">    String content = new String(data2);  //å¾—ç”¨å®ƒ</span><br><span class="line">    System.out.println(&quot;è¾“å…¥æµå†…å®¹ï¼š&quot; + content);</span><br><span class="line">    String content4 = Arrays.toString(data2);</span><br><span class="line">    System.out.println(&quot;è¾“å…¥æµå†…å®¹ï¼š&quot; + content4); //è¿™æ ·è¾“å‡ºçš„æ˜¯æ•°å­—</span><br><span class="line"></span><br><span class="line">    // 3.è¯»å–æ–‡ä»¶ï¼šç”¨è¾“å…¥æµ æ–‡ä»¶-&gt;è¾“å…¥æµ-&gt;å­—èŠ‚æ•°ç»„ï¼Œå¦ç§æ–¹æ³•</span><br><span class="line">    FileInputStream in1 = new FileInputStream(file2);</span><br><span class="line">    byte[] data3 = new byte[20];</span><br><span class="line">    String content3 = CharStreams.toString(new InputStreamReader(in1, Charsets.UTF_8)); //è¿™é‡Œä¹Ÿæ¶ˆè€—è¾“å…¥æµ</span><br><span class="line">    System.out.println(&quot;å‰é¢è·å–è¾“å…¥æµå†…å®¹ï¼š&quot; + content3);</span><br><span class="line">    int num = in1.read(data3);  //è¾“å…¥æµæ¶ˆè€—20ä¸ªå­—èŠ‚</span><br><span class="line">    System.out.println(&quot;å‡ ä¸ªå­—èŠ‚ï¼š&quot; + num);</span><br><span class="line">    String content1 = IOUtils.toString(in1, String.valueOf(StandardCharsets.UTF_8));</span><br><span class="line">    System.out.println(&quot;è¾“å…¥æµå†…å®¹ï¼š&quot; + content1);   //è¿™é‡Œåªå‰©å‡ ä¸ªå¯ä»¥å±•ç¤º</span><br><span class="line">    String content2 = IOUtils.toString(in1, String.valueOf(StandardCharsets.UTF_8));</span><br><span class="line">    System.out.println(&quot;è¾“å…¥æµå†…å®¹2ï¼š&quot; + content2);  //è¿™é‡Œå·²ç»æ²¡æœ‰äº†</span><br><span class="line"></span><br><span class="line">    // 4.å†™æ–‡ä»¶ï¼šç”¨è¾“å‡ºæµ å­—èŠ‚æ•°ç»„-&gt;è¾“å‡ºæµ-&gt;æ–‡ä»¶</span><br><span class="line">    String filePath2 = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hi2.java&quot;;  //è¦å†™çš„æ–‡ä»¶ï¼Œå¯ä»¥æ²¡å»ºç«‹</span><br><span class="line">    File file3 = new File(filePath2);</span><br><span class="line">    FileOutputStream out = new FileOutputStream(filePath2);</span><br><span class="line">    byte[] data4 = &quot;System.out.println(\&quot;hi2\&quot;)&quot;.getBytes();</span><br><span class="line">    out.write(data4);  //å¦‚æœæ–‡ä»¶å­˜åœ¨å†…å®¹ï¼Œåˆ™æ˜¯è¦†ç›–çš„æ–¹å¼</span><br><span class="line">    if(file3.exists()) System.out.println(&quot;å†™å…¥æˆåŠŸ&quot;);</span><br><span class="line">    //å…³é—­æµ</span><br><span class="line">    IOUtils.closeQuietly(in);</span><br><span class="line">    IOUtils.closeQuietly(out);</span><br><span class="line"></span><br><span class="line">    // 5.copyæ–‡ä»¶ï¼šæ–‡ä»¶-è¾“å…¥æµ-å­—èŠ‚æ•°ç»„-è¾“å‡ºæµ-æ–‡ä»¶ï¼Œç”¨IOUtils.copy()ä¸€æ­¥åˆ°ä½</span><br><span class="line">    String filePath3 = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hi3.java&quot;;  //è¦å†™çš„æ–‡ä»¶ï¼Œå¯ä»¥æ²¡å»ºç«‹</span><br><span class="line">    File file4 = new File(filePath3);</span><br><span class="line">    FileInputStream in3 = new FileInputStream(file3);</span><br><span class="line">    FileOutputStream out2 = new FileOutputStream(file4);</span><br><span class="line">    IOUtils.copy(in3, out2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…è·å–æ–‡ä»¶å¤§å°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2() throws IOException &#123;</span><br><span class="line">    // 1.æ–¹æ³•ä¸€ï¼šä½¿ç”¨java io</span><br><span class="line">    String filePath = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    long size = file.length();</span><br><span class="line">    System.out.println(&quot;æ–‡ä»¶å¤§å°ï¼š&quot; + size + &quot;B&quot;);</span><br><span class="line"></span><br><span class="line">    // 2.æ–¹æ³•äºŒï¼šä½¿ç”¨java nio</span><br><span class="line">    Path filePath1 = Paths.get(&quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;);  //ç»å¯¹è·¯å¾„</span><br><span class="line">    FileChannel fileChannel = FileChannel.open(filePath1);</span><br><span class="line">    long size1 = fileChannel.size();</span><br><span class="line">    System.out.println(&quot;æ–‡ä»¶å¤§å°ï¼š&quot; + size1 + &quot;B&quot;);</span><br><span class="line">    Path filePath2 = Paths.get(&quot;src/test/resources/hi.md&quot;);  //é¡¹ç›®ä¸‹è·¯å¾„</span><br><span class="line">    FileChannel fileChannel2 = FileChannel.open(filePath2);</span><br><span class="line">    long size2 = fileChannel2.size();</span><br><span class="line">    System.out.println(&quot;æ–‡ä»¶å¤§å°ï¼š&quot; + size2 + &quot;B&quot;);</span><br><span class="line"></span><br><span class="line">    // 3.æ–¹æ³•ä¸‰ï¼šä½¿ç”¨  apache commons io (åªèƒ½è¯»æ–‡ä»¶å¤¹çš„å¤§å°)</span><br><span class="line">    String dir = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile&quot;;</span><br><span class="line">    File file1 = new File(dir);</span><br><span class="line">    long size3 = FileUtils.sizeOfDirectory(file1);</span><br><span class="line">    System.out.println(&quot;æ–‡ä»¶å¤¹å¤§å°ï¼š&quot; + size3 + &quot;B&quot;);</span><br><span class="line"></span><br><span class="line">    // ç”¨æˆ·å¯è¯»è§†è§’ï¼Ÿ</span><br><span class="line">    String display = FileUtils.byteCountToDisplaySize(size);</span><br><span class="line">    System.out.println(display);  //117 bytes</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Fileæµ"><a href="#Fileæµ" class="headerlink" title="Fileæµ"></a>Fileæµ</h4><p>JAVAä¸­é’ˆå¯¹æ–‡ä»¶çš„è¯»å†™æ“ä½œè®¾ç½®äº†ä¸€ç³»åˆ—çš„æµï¼Œå…¶ä¸­ä¸»è¦æœ‰FileInputStream,FileOutputStream,FileReader,FileWriterå››ç§æœ€ä¸ºå¸¸ç”¨çš„æµ</p>
<p>ä¸€ã€FileInputStreamæµ</p>
<p>è¢«ç§°ä¸ºæ–‡ä»¶å­—èŠ‚è¾“å…¥æµï¼Œæ„æ€æŒ‡å¯¹æ–‡ä»¶æ•°æ®ä»¥å­—èŠ‚çš„å½¢å¼è¿›è¡Œè¯»å–æ“ä½œå¦‚è¯»å–å›¾ç‰‡è§†é¢‘ç­‰</p>
<p>è‹¥Fileç±»å¯¹è±¡çš„æ‰€ä»£è¡¨çš„æ–‡ä»¶ä¸å­˜åœ¨;ä¸æ˜¯æ–‡ä»¶æ˜¯ç›®å½•;æˆ–è€…å…¶ä»–åŸå› ä¸èƒ½æ‰“å¼€çš„è¯ï¼Œåˆ™ä¼šæŠ›å‡ºFileNotFoundExceptionã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public static void main(String[] args)&#123;</span><br><span class="line">  File file=new File(&quot;xxxxxxxx&quot;); </span><br><span class="line">  //æ ¹æ®è·¯å¾„åˆ›å»ºFileç±»å¯¹è±¡--è¿™é‡Œè·¯å¾„å³ä½¿é”™è¯¯ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºåªæ˜¯äº§ç”ŸFileå¯¹è±¡ï¼Œè¿˜å¹¶æœªä¸è®¡ç®—æœºæ–‡ä»¶è¯»å†™æœ‰å…³è”</span><br><span class="line">        </span><br><span class="line">  try&#123;</span><br><span class="line">    FileInputStream fileInputStream=new FileInputStream(file);</span><br><span class="line">    //ä¸æ ¹æ®Fileç±»å¯¹è±¡çš„æ‰€ä»£è¡¨çš„å®é™…æ–‡ä»¶å»ºç«‹é“¾æ¥åˆ›å»ºfileInputStreamå¯¹è±¡</span><br><span class="line">      &#125;catch (FileNotFoundException e)&#123;</span><br><span class="line">          System.out.println(&quot;æ–‡ä»¶ä¸å­˜åœ¨æˆ–è€…æ–‡ä»¶ä¸å¯è¯»æˆ–è€…æ–‡ä»¶æ˜¯ç›®å½•&quot;);</span><br><span class="line">      &#125; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">// ä¹Ÿå¯ä»¥æ ¹æ®æ–‡ä»¶è·¯å¾„åå­—ç¬¦ä¸²è¿›è¡Œå»ºç«‹</span><br><span class="line">FileInputStream fileInputStream=new FileInputStream(filepath);</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/ai_bao_zi/article/details/81097898">https://blog.csdn.net/ai_bao_zi/article/details/81097898</a></p>
<p>IOæµçš„å…³ç³»ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lianshan/p/11911773.html">https://www.cnblogs.com/lianshan/p/11911773.html</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/q306507291/article/details/118825930">https://blog.csdn.net/q306507291/article/details/118825930</a></p>
<h4 id="FileUtils-å·¥å…·ç±»"><a href="#FileUtils-å·¥å…·ç±»" class="headerlink" title="FileUtils å·¥å…·ç±»"></a>FileUtils å·¥å…·ç±»</h4><p>apache çš„commons-ioåŒ…ä¸‹çš„FileUtilsï¼Œå¯¼åŒ…ï¼šcommons-io</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">File file = new File(&quot;E:\\java\\file04\\abcé›ª.jpg&quot;);</span><br><span class="line">//åˆ é™¤æŒ‡å®šæ–‡ä»¶ï¼Œä»ä¸å¼•å‘å¼‚å¸¸ã€‚</span><br><span class="line">FileUtils.deleteQuietly(file);</span><br><span class="line"></span><br><span class="line">//å°†byteæ•°ç»„å†™ä¸ºFile</span><br><span class="line">byte[] bytes = IOUtils.toByteArray(inputStream);</span><br><span class="line">FileUtils.writeByteArrayToFile(new File(path), bytes)</span><br><span class="line"></span><br><span class="line">//åˆ é™¤æ‰æŒ‡å®šç›®å½•çš„æ–‡ä»¶</span><br><span class="line">FileUtils.deleteExistFile(new File(localpath));</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42402854/article/details/83374559">https://blog.csdn.net/qq_42402854/article/details/83374559</a></p>
<h4 id="IOUtilså·¥å…·ç±»"><a href="#IOUtilså·¥å…·ç±»" class="headerlink" title="IOUtilså·¥å…·ç±»"></a>IOUtilså·¥å…·ç±»</h4><p>å®ƒæ˜¯ Apache Commons IO çš„ä¸€éƒ¨åˆ† ã€‚è¯¥ç±»çš„æ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½è¢«ç”¨æ¥å¤„ç†è¾“å…¥ - è¾“å‡ºæµã€‚è¿™äº›æ–¹æ³•åŸºäº InputStream,  OutputStream,  Reader å’Œ Writerå·¥ä½œã€‚</p>
<p>æ‰€æœ‰æˆå‘˜å­—æ®µå’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼Œä¸éœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥ç”¨ç±»åè°ƒç”¨ã€‚</p>
<p>âœ…è¾“å…¥æµè½¬ä¸ºå­—èŠ‚æ•°ç»„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°†è¾“å…¥æµè½¬æ¢æˆå­—ç¬¦æ•°ç»„:</span><br><span class="line">byte[] bytes = IOUtils.toByteArray(inputStream);</span><br></pre></td></tr></table></figure>

<p>âœ…å…³é—­æµ<br>ä¹‹å‰å…³é—­æµï¼Œå¾€å¾€åœ¨finallyä¸­ï¼Œå› ä¸ºä¼šæŠ›å‡ºIOExceptionï¼Œæ‰€ä»¥finallyä¸­éœ€è¦try catchï¼Œå¹¶ä¸”closeä¹‹å‰éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºnullã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">finally &#123;</span><br><span class="line">  if (in != null) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      in.close();</span><br><span class="line">      &#125; catch (IOException e) &#123;</span><br><span class="line">          LOGGER.warn(&quot;Fail to close stream : &quot;, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ IOUtils.closeQuietly æ¥ç²¾ç®€ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">byte[] data = new byte[1024];</span><br><span class="line">InputStream in = null;</span><br><span class="line">OutputStream out = null;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">      in = new FileInputStream(&quot;foo.txt&quot;);</span><br><span class="line">      in.read(data);</span><br><span class="line"></span><br><span class="line">      out = new FileOutputStream(&quot;foo.txt&quot;);</span><br><span class="line">      data = &quot;Hello, World&quot;.getBytes();</span><br><span class="line">      out.write(data);</span><br><span class="line"></span><br><span class="line">      IOUtils.copy(in, out);</span><br><span class="line"></span><br><span class="line">      in.close(); //close errors are handled</span><br><span class="line">      out.close();</span><br><span class="line">&#125; catch (IOException e) &#123; </span><br><span class="line">      // error handling</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">      IOUtils.closeQuietly(in);</span><br><span class="line">      IOUtils.closeQuietly(out);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/sulia1234567890/article/details/120569718">https://blog.csdn.net/sulia1234567890/article/details/120569718</a></p>
<p>âœ…å†™æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() throws IOException &#123;</span><br><span class="line">    String filePath = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    OutputStream out = new FileOutputStream(file, true);</span><br><span class="line">    IOUtils.write(&quot;hello&quot;, out);</span><br><span class="line">    IOUtils.write(&quot;\n&quot;, out);</span><br><span class="line">    IOUtils.write(&quot;hi&quot;, out);</span><br><span class="line">    //ä¹Ÿå¯ä»¥ä¼ å­—èŠ‚æ•°ç»„ã€å­—ç¬¦æ•°ç»„</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âš ï¸new FileOutputStream(â€œb.txtâ€,true);</p>
<p>é»˜è®¤ç¬¬äºŒä¸ªå‚æ•°æ˜¯falseï¼Œè¡¨ç¤ºä¸è¿½åŠ ï¼Œæ¯æ¬¡newå¯¹è±¡éƒ½ä¼šæ¸…ç©ºä¹‹å‰çš„å†…å®¹åˆ›å»ºæ–°çš„å†…å®¹ï¼Œtureè¡¨ç¤ºåœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šè¿½åŠ å†…å®¹</p>
<p>âœ…å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºString</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">byte[] data = &quot;hello world&quot;.getBytes();</span><br><span class="line">//apacheé‡Œioçš„IOUtilséœ€è¦commons-ioåŒ…</span><br><span class="line">String s1 = IOUtils.toString(data, &quot;utf-8&quot;);</span><br><span class="line">String s2 = new String(data);</span><br><span class="line">System.out.println(s1);</span><br><span class="line">System.out.println(s2);</span><br></pre></td></tr></table></figure>

<h4 id="MultipartFile"><a href="#MultipartFile" class="headerlink" title="MultipartFile"></a>MultipartFile</h4><p>éœ€è¦ä¾èµ–ï¼šspring-web</p>
<p>é¦–å…ˆï¼Œâ€œæµâ€æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¾“å…¥è¾“å‡ºè®¾å¤‡çš„ä¸€ç§æŠ½è±¡ç†è§£ï¼Œåœ¨javaä¸­ï¼Œå¯¹æ•°æ®çš„è¾“å…¥è¾“å‡ºæ“ä½œéƒ½æ˜¯ä»¥â€œæµâ€çš„æ–¹å¼è¿›è¡Œçš„ã€‚â€œæµâ€å…·æœ‰æ–¹å‘æ€§ï¼Œè¾“å…¥æµã€è¾“å‡ºæµæ˜¯ç›¸å¯¹çš„ã€‚å½“ç¨‹åºéœ€è¦ä»æ•°æ®æºä¸­è¯»å…¥æ•°æ®çš„æ—¶å€™å°±ä¼šå¼€å¯ä¸€ä¸ªè¾“å…¥æµï¼Œç›¸åï¼Œå†™å‡ºæ•°æ®åˆ°æŸä¸ªæ•°æ®æºç›®çš„åœ°çš„æ—¶å€™ä¹Ÿä¼šå¼€å¯ä¸€ä¸ªè¾“å‡ºæµã€‚</p>
<p>MultipartFileæ˜¯SpringMVCæä¾›ç®€åŒ–ä¸Šä¼ æ“ä½œçš„å·¥å…·ç±»ã€‚å®ç°æ–‡ä»¶çš„å¿«é€Ÿä¸Šä¼ ï¼Œä¸éœ€è¦å…ˆå°†Fileè½¬æ¢æˆoutputæµ å†ä¼ è¾“è¿‡å» æ¥æ”¶ç«¯æ¥æ”¶æµå†ç”Ÿæˆæ–‡ä»¶ã€‚</p>
<p>åœ¨ä¸ä½¿ç”¨æ¡†æ¶ä¹‹å‰ï¼Œéƒ½æ˜¯ä½¿ç”¨åŸç”Ÿçš„HttpServletRequestæ¥æ¥æ”¶ä¸Šä¼ çš„æ•°æ®ï¼Œæ–‡ä»¶æ˜¯ä»¥äºŒè¿›åˆ¶æµä¼ é€’åˆ°åç«¯çš„ï¼Œç„¶åéœ€è¦æˆ‘ä»¬è‡ªå·±è½¬æ¢ä¸ºFileç±»ã€‚ä½¿ç”¨äº†MultipartFileå·¥å…·ç±»ä¹‹åï¼Œæˆ‘ä»¬å¯¹æ–‡ä»¶ä¸Šä¼ çš„æ“ä½œå°±ç®€ä¾¿è®¸å¤šäº†ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45393094/article/details/112056436">https://blog.csdn.net/weixin_45393094/article/details/112056436</a></p>
<p>âœ…å†…éƒ¨æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public interface MultipartFile extends InputStreamSource &#123;</span><br><span class="line">    //getName() è¿”å›å‚æ•°çš„åç§°</span><br><span class="line">    String getName();</span><br><span class="line">    //è·å–æºæ–‡ä»¶çš„æ˜µç§°</span><br><span class="line">    @Nullable</span><br><span class="line">    String getOriginalFilename();</span><br><span class="line">    //getContentType() è¿”å›æ–‡ä»¶çš„å†…å®¹ç±»å‹</span><br><span class="line">    @Nullable</span><br><span class="line">    String getContentType();</span><br><span class="line">    //isEmpty() åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œæˆ–è€…ä¸Šä¼ çš„æ–‡ä»¶æ˜¯å¦æœ‰å†…å®¹</span><br><span class="line">    boolean isEmpty();</span><br><span class="line">    //getSize() è¿”å›æ–‡ä»¶å¤§å° ä»¥å­—èŠ‚ä¸ºå•ä½</span><br><span class="line">    long getSize();</span><br><span class="line">    //getBytes() å°†æ–‡ä»¶å†…å®¹è½¬åŒ–æˆä¸€ä¸ªbyte[] è¿”å›</span><br><span class="line">    byte[] getBytes() throws IOException;</span><br><span class="line">    //getInputStream() è¿”å›InputStreamè¯»å–æ–‡ä»¶çš„å†…å®¹</span><br><span class="line">    InputStream getInputStream() throws IOException;</span><br><span class="line"></span><br><span class="line">    default Resource getResource() &#123;</span><br><span class="line">        return new MultipartFileResource(this);</span><br><span class="line">    &#125;</span><br><span class="line">    //transferTo(File dest) ç”¨æ¥æŠŠ MultipartFile è½¬æ¢æ¢æˆ File</span><br><span class="line">    void transferTo(File var1) throws IOException, IllegalStateException;</span><br><span class="line"></span><br><span class="line">    default void transferTo(Path dest) throws IOException, IllegalStateException &#123;</span><br><span class="line">        FileCopyUtils.copy(this.getInputStream(), Files.newOutputStream(dest));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…MockMultipartFile</p>
<p>å¯ä»¥ç”¨MockMultipartFileåˆ›å»ºMultipartFileã€‚éœ€è¦å¯¼å…¥spring-test.jar</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MockMultipartFile(String name, @Nullable String originalFilename, @Nullable String contentType, InputStream contentStream)</span><br><span class="line">ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¼ è¾“åçš„æ–‡ä»¶å </span><br><span class="line">ç¬¬äºŒä¸ªï¼šæ—§æ–‡ä»¶åå­—ï¼ˆå¯ä¸ºç©ºï¼‰ </span><br><span class="line">ç¬¬ä¸‰ï¼šç±»å‹</span><br><span class="line">ç¬¬å››ï¼šè¾“å…¥æµ</span><br></pre></td></tr></table></figure>

<p>âœ…MultipartFileä¸Fileçš„ç›¸äº’è½¬æ¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3() throws IOException &#123;</span><br><span class="line">    // 1.Fileè½¬ä¸ºMultipartFileï¼šfile-InputStream-MultipartFile</span><br><span class="line">    String filePath = &quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/hello.java&quot;;</span><br><span class="line">    File file = new File(filePath);</span><br><span class="line">    System.out.println(file.getName());  //hello.java</span><br><span class="line">    System.out.println(FilenameUtils.getExtension(file.getName()));  //åç¼€java</span><br><span class="line">    FileInputStream in = new FileInputStream(file);</span><br><span class="line">    MultipartFile mf = new MockMultipartFile(file.getName(), file.getName(), &quot;text/plain&quot;, in);</span><br><span class="line">    System.out.println(mf.getName()); //hello.java</span><br><span class="line">    System.out.println(mf.getOriginalFilename());  //hello.java</span><br><span class="line"></span><br><span class="line">    // 2.MultipartFileè½¬ä¸ºFile</span><br><span class="line">    try &#123;</span><br><span class="line">        String uuid = UUID.randomUUID().toString();</span><br><span class="line">        //å¾—åˆ°æ–‡ä»¶åç¼€</span><br><span class="line">        String originalName = mf.getOriginalFilename();</span><br><span class="line">        String ext = &quot;.&quot; + FilenameUtils.getExtension(originalName);</span><br><span class="line">        String fileName = uuid + ext;</span><br><span class="line">        File targetFile = new File(&quot;/Users/liuxuan/MyProject/JavaProject/SingleFile/&quot;, fileName);</span><br><span class="line">        //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–‡ä»¶å¤¹  ç¬¬äºŒä¸ªå‚æ•°ï¼šæ–‡ä»¶å</span><br><span class="line">        // æ–¹æ³•ä¸€ï¼šMultipartFile - å­—èŠ‚æ•°ç»„ - Fileæœ¬åœ°</span><br><span class="line">        FileUtils.writeByteArrayToFile(targetFile, mf.getBytes());</span><br><span class="line">        // æ–¹æ³•äºŒï¼šMultipartFile - å­—èŠ‚æ•°ç»„ - è¾“å‡ºæµ - Fileæœ¬åœ°</span><br><span class="line">        byte[] data = mf.getBytes();</span><br><span class="line">        FileOutputStream out = new FileOutputStream(targetFile);</span><br><span class="line">        out.write(data);</span><br><span class="line">        IOUtils.closeQuietly(out);</span><br><span class="line">        // æ–¹æ³•ä¸‰ï¼šç›´æ¥ç”¨MultipartFileå†…éƒ¨æ–¹æ³•</span><br><span class="line">        mf.transferTo(targetFile);</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        System.out.println(&quot;å¤±è´¥&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…ä½¿ç”¨MultipartFileå®ç°æ–‡ä»¶ä¸Šä¼ çš„ä¸€ä¸ªcase</p>
<p>èƒŒæ™¯ï¼šæ–‡ä»¶ä¸Šä¼ å¤‡ä»½å¸Œæœ›å®ƒæ˜¯å’Œä¸»ä¸šåŠ¡çº¿ç¨‹å¤„äºå¼‚æ­¥æƒ…å†µä¸‹çš„ï¼Œè¿™æ ·å¯ä»¥æ›´å¿«çš„å“åº”ç»™ç”¨æˆ·åé¦ˆï¼Œå‡å°‘ç­‰å¾…æ—¶é—´ã€‚<br>MultipartFileå¼‚æ­¥ä¿å­˜æ–‡ä»¶transferto æŠ¥é”™java.io.FileNotFoundException: XXX.tmp (No such file or directory)</p>
<p>åŸå› ï¼šç”±äºSpringBootä¸Šä¼ æ–‡ä»¶åä¼šå½¢æˆMultiPartFileçš„å®ä¾‹ï¼Œåœ¨ä¸´æ—¶æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶ä¸”æ­¤å®ä¾‹æ‰§è¡Œæ­¤ä¸´æ—¶æ–‡ä»¶ã€‚å½“ä¸»çº¿ç¨‹æ‰§è¡Œç»“æŸåï¼Œ<br>SpringMVCä¼šæ¸…é™¤æ‰æ­¤ä¸´æ—¶æ–‡ä»¶ï¼Œå¯¼è‡´å­çº¿ç¨‹åœ¨å¤„ç†æ­¤å®ä¾‹çš„æ—¶å€™æ‰¾ä¸åˆ°æ­¤å®ä¾‹æŒ‡å‘çš„ä¸´æ—¶æ–‡ä»¶ï¼ŒMultipartFileå¯¹è±¡å°±å˜æˆäº†null,ä»è€ŒæŠ¥FileNotFoundExceptionï¼</p>
<p>è§£å†³ï¼šå…ˆè·å–ä¼ InputStremï¼Œä¼ ä¼ InputStremã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42408648/article/details/126272849">https://blog.csdn.net/weixin_42408648/article/details/126272849</a></p>
<p>âœ…MultipartFile å¯¹ä¸Šä¼ çš„æ–‡ä»¶å¤§å°è¿›è¡Œé™åˆ¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">@Slf4j</span><br><span class="line">@Component</span><br><span class="line">public class MultipartFileUtil &#123;</span><br><span class="line"></span><br><span class="line">private final static Integer FILE_SIZE = 5;//æ–‡ä»¶ä¸Šä¼ é™åˆ¶å¤§å°</span><br><span class="line">private final static String FILE_UNIT = &quot;M&quot;;//æ–‡ä»¶ä¸Šä¼ é™åˆ¶å•ä½ï¼ˆB,K,M,Gï¼‰</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param len  æ–‡ä»¶é•¿åº¦</span><br><span class="line">     * @param size é™åˆ¶å¤§å°</span><br><span class="line">     * @param unit é™åˆ¶å•ä½ï¼ˆB,K,M,Gï¼‰</span><br><span class="line">     * @æè¿° åˆ¤æ–­æ–‡ä»¶å¤§å°</span><br><span class="line">     */</span><br><span class="line">    public static boolean checkFileSize(Long len, int size, String unit) &#123;</span><br><span class="line">        double fileSize = 0;</span><br><span class="line">        if (&quot;B&quot;.equalsIgnoreCase(unit)) &#123;</span><br><span class="line">            fileSize = (double) len;</span><br><span class="line">        &#125; else if (&quot;K&quot;.equalsIgnoreCase(unit)) &#123;</span><br><span class="line">            fileSize = (double) len / 1024;</span><br><span class="line">        &#125; else if (&quot;M&quot;.equalsIgnoreCase(unit)) &#123;</span><br><span class="line">            fileSize = (double) len / 1048576;</span><br><span class="line">        &#125; else if (&quot;G&quot;.equalsIgnoreCase(unit)) &#123;</span><br><span class="line">            fileSize = (double) len / 1073741824;</span><br><span class="line">        &#125;</span><br><span class="line">        return !(fileSize &gt; size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //æ–‡ä»¶ä¸Šä¼ è°ƒç”¨</span><br><span class="line">    public static String upload(MultipartFile file) &#123;</span><br><span class="line">        boolean flag = checkFileSize(file.getSize(), FILE_SIZE, FILE_UNIT);</span><br><span class="line">        if (!flag) &#123;</span><br><span class="line">            throw new RuntimeException(&quot;ä¸Šä¼ æ–‡ä»¶å¤§å°è¶…å‡ºé™åˆ¶&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/w_shimmer/article/details/124341265">https://blog.csdn.net/w_shimmer/article/details/124341265</a></p>
<h4 id="java-nio-file-æ–‡ä»¶æ“ä½œ"><a href="#java-nio-file-æ–‡ä»¶æ“ä½œ" class="headerlink" title="java.nio.file æ–‡ä»¶æ“ä½œ"></a>java.nio.file æ–‡ä»¶æ“ä½œ</h4><p>è‡ª Java7 å¼€å§‹ï¼ŒJava ç»ˆäºç®€åŒ–äº†æ–‡ä»¶è¯»å†™çš„åŸºæœ¬æ“ä½œï¼Œæ–°å¢äº† java.nio.file åº“ï¼Œé€šè¿‡ä¸ Java8 æ–°å¢çš„ stream ç»“åˆå¯ä»¥ä½¿å¾—æ–‡ä»¶æ“ä½œå˜å¾—æ›´åŠ ä¼˜é›…ã€‚</p>
<p>1ï¸âƒ£æ–‡ä»¶å’Œç›®å½•è·¯å¾„Path</p>
<p>java.nio.file.Paths ç±»åŒ…å«ä¸€ä¸ªé™æ€æ–¹æ³• <code>static.get()</code>ï¼Œå¯ä»¥æ¥å—ä¸€ç³»åˆ— String å­—ç¬¦ä¸²æˆ–ä¸€ä¸ªç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ URI ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”è½¬æ¢è¿”å›ä¸€ä¸ª <code>Path</code> å¯¹è±¡ã€‚</p>
<p>ä¸€ä¸ª Path å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•çš„è·¯å¾„ï¼Œæ˜¯ä¸€ä¸ªè·¨æ“ä½œç³»ç»Ÿå’Œæ–‡ä»¶ç³»ç»Ÿçš„æŠ½è±¡ï¼Œç›®çš„æ˜¯åœ¨æ„é€ è·¯å¾„æ—¶å¯ä»¥ä¸å¿…å…³æ³¨åº•å±‚æ“ä½œç³»ç»Ÿã€‚å¦‚æœ Path ä»…ç”±ä¸€ä¸ªç©ºçš„åç§°å…ƒç´ ç»„æˆï¼Œåˆ™è®¤ä¸ºæ˜¯ç©ºçš„è·¯å¾„ã€‚ä½¿ç”¨ç©ºè·¯å¾„è®¿é—®æ–‡ä»¶ç­‰åŒäºè®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„é»˜è®¤ç›®å½•ã€‚Path æ¥å£çš„å®ç°æ˜¯ä¸å¯å˜ä¸”å®‰å…¨çš„ï¼Œå¯ä¾›å¤šä¸ªå¹¶è¡Œçº¿ç¨‹ä½¿ç”¨.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Path path1 = Paths.get(&quot;C:&quot;, &quot;path&quot;, &quot;to&quot;, &quot;nowhere&quot;, &quot;NoFile.txt&quot;);</span><br><span class="line">System.out.println(path1); //C:/path/to/nowhere/NoFile.txt</span><br><span class="line">Path path2 = Paths.get(&quot;C:/path/to/nowhere/NoFile.txt&quot;);</span><br><span class="line">System.out.println(path2); //C:/path/to/nowhere/NoFile.txt</span><br><span class="line">URI uri = path2.toUri();  //è½¬æ¢ä¸ºURIå¯¹è±¡ï¼Œå¯ä»¥ç”¨äºæ„å»ºwebèµ„æºçš„ç»å¯¹uri</span><br><span class="line">System.out.println(uri); //file:///Users/liuxuan/MyProject/mypro/spring-boot-demo/spring-boot-study/C:/path/to/nowhere/NoFile.txt</span><br><span class="line">Path path3 = Paths.get(uri);</span><br><span class="line">System.out.println(path3);</span><br><span class="line"></span><br><span class="line">// è¿”å›è¡¨ç¤ºæ­¤è·¯å¾„çš„ç»å¯¹è·¯å¾„çš„Pathå¯¹è±¡</span><br><span class="line">Path p = Paths.get(&quot;FileTest.java&quot;).toAbsolutePath();  //ç›¸å¯¹äºå½“å‰é¡¹ç›®ç›®å½•</span><br><span class="line">System.out.println(p); ///Users/liuxuan/MyProject/mypro/spring-boot-demo/spring-boot-study/FileTest.java</span><br><span class="line">// è¿”å›è¡¨ç¤ºæ­¤è·¯å¾„çš„çœŸå®è·¯å¾„çš„Pathå¯¹è±¡ï¼Œä¹Ÿå³æ˜¯å¸¦ä¸Šç›˜ç¬¦ï¼ˆæ ¹è·¯å¾„ï¼‰</span><br><span class="line">Path p2 = Paths.get(&quot;/Users/liuxuan/Downloads/test&quot;).toRealPath();</span><br><span class="line">// getNameCount() è¿”å›è·¯å¾„ä¸­çš„åç§°å…ƒç´ çš„æ•°é‡</span><br><span class="line">for(int i = 0; i &lt; p.getNameCount(); i++) &#123;</span><br><span class="line">    // è¿”å›æ­¤è·¯å¾„çš„åç§°å…ƒç´ ä½œä¸º Pathå¯¹è±¡</span><br><span class="line">    System.out.println(p.getName(i));</span><br><span class="line">&#125;</span><br><span class="line">// æµ‹è¯•è·¯å¾„æ˜¯å¦ä»¥ç»™å®šçš„è·¯å¾„ç»“æŸï¼Œè¿™é‡Œä¼šè¾“å‡º end with &#x27;.java&#x27;:false</span><br><span class="line">System.out.println(&quot;ends with &#x27;.java&#x27;: &quot; + p.endsWith(&quot;.java&quot;));</span><br><span class="line">// Path ä¹Ÿå®ç°äº† iterable æ¥å£ï¼Œä¼šå¯¹è·¯å¾„ä¸­çš„åç§°å…ƒç´ è¿›è¡Œéå†</span><br><span class="line">for(Path pp : p) &#123;</span><br><span class="line">    System.out.println(pp);</span><br><span class="line">&#125;</span><br><span class="line">// getRoot() è¿”å›æ­¤è·¯å¾„çš„æ ¹è·¯å¾„ä½œä¸ºPathå¯¹è±¡ï¼Œä¸ºnullåˆ™è¯¥è·¯å¾„ä¸å…·æœ‰æ ¹</span><br><span class="line">// startsWith() æ•ˆæœå’Œ endsWith() ç›¸ä¼¼</span><br><span class="line">// è¿™é‡Œä¼šè¾“å‡º Starts with C:\ true</span><br><span class="line">System.out.println(&quot;Starts with &quot; + p.getRoot() + &quot; &quot; + p.startsWith(p.getRoot()));</span><br></pre></td></tr></table></figure>

<p>æœ‰æ—¶æˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡å¯¹ Path å¯¹è±¡å¢åŠ æˆ–ä¿®æ”¹ä¸€éƒ¨åˆ†æ¥æ„é€ ä¸€ä¸ªæ–°çš„ path å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ relativize() ç§»é™¤ Path çš„æ ¹è·¯å¾„ï¼Œæˆ–è€…ä½¿ç”¨ resolve() æ·»åŠ  Path çš„å°¾è·¯å¾„ï¼Œæ³¨æ„æ·»åŠ çš„è·¯å¾„å¯ä»¥ä¸æ˜¯çœŸå®å­˜åœ¨çš„.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// ä½¿ç”¨..å¯ä»¥è·³è½¬åˆ°ä¸Šä¸€çº§è·¯å¾„ï¼Œä½†å¿…é¡»ä½¿ç”¨normalize()æ–¹æ³•</span><br><span class="line">// å‡è®¾å½“å‰è·¯å¾„ä¸º/Users/liuxuan/MyProject/mypro/spring-boot-demo/spring-boot-study/FileTest.java</span><br><span class="line">Path base = Paths.get(&quot;..&quot;, &quot;..&quot;, &quot;..&quot;).toAbsolutePath().normalize();</span><br><span class="line">System.out.println(base); ///Users/liuxuan/MyProject</span><br><span class="line">// æ„é€ æ­¤è·¯å¾„å’Œç»™å®šè·¯å¾„ä¹‹é—´çš„ç›¸å¯¹è·¯å¾„</span><br><span class="line">Path p4 = base.relativize(p);</span><br><span class="line">System.out.println(p4);</span><br><span class="line">// ä½¿ç”¨resolveæ„é€ è·¯å¾„</span><br><span class="line">// æ­¤æ—¶è·¯å¾„ä¸ºC:\Users\Bruce\Documents\GitHub\string</span><br><span class="line">Path convoluted = p.getParent().resolve(&quot;string&quot;);</span><br><span class="line">System.out.println(convoluted);</span><br></pre></td></tr></table></figure>

<p>2ï¸âƒ£Fileså·¥å…·ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è·å–æ–‡ä»¶çš„å­—èŠ‚æ•°ç»„ï¼š</span><br><span class="line">byte[] fileBytes = Files.readAllBytes(Paths.get(&quot;/Users/liuxuan/Downloads/test/cal.sh&quot;));</span><br><span class="line">System.out.println(new String(fileBytes));</span><br></pre></td></tr></table></figure>

<p>è·å–æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å¤¹æ•°é‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">String path = &quot;/Users/liuxuan/Downloads/&quot;;</span><br><span class="line">File fileDir = new File(path);</span><br><span class="line">if (!fileDir.exists() || !fileDir.isDirectory()) &#123;</span><br><span class="line">    throw new RuntimeException(&quot;ä¸æ˜¯æ–‡ä»¶å¤¹&quot;);</span><br><span class="line">&#125;</span><br><span class="line">String[] fileList = fileDir.list();</span><br><span class="line">int count = 0;</span><br><span class="line">for (String file : fileList) &#123;</span><br><span class="line">    if (new File(path + file).isDirectory()) &#123;</span><br><span class="line">        count ++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(count);</span><br><span class="line">File[] files = fileDir.listFiles();</span><br><span class="line">for (File file : files) &#123;</span><br><span class="line">    System.out.println(file.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨Fileså®ç°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Path path1 = Paths.get(&quot;/Users/liuxuan/Downloads/&quot;);</span><br><span class="line">if (!Files.exists(path1) || !Files.isDirectory(path1)) &#123;</span><br><span class="line">    throw new RuntimeException(&quot;ä¸æ˜¯æ–‡ä»¶å¤¹&quot;);</span><br><span class="line">&#125;</span><br><span class="line">long dirCount = Files.list(path1).filter(Files :: isDirectory).count();</span><br><span class="line">System.out.println(dirCount);</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>Files.list(path)</code>éœ€è¦æ³¨æ„ï¼Œå®ƒè¿”å›çš„æ˜¯<code>Stream&lt;Path&gt;</code>ï¼Œå¦‚æœæ²¡æœ‰å…³é—­ï¼Œå¹¶ä¸”ä»£ç é¢‘ç¹ä½¿ç”¨ï¼Œå°†å¯¼è‡´æ‰“å¼€çš„æ–‡ä»¶è¿‡å¤šè€ŒæŠ¥é”™ï¼ˆæ¯ä¸ªè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æ–‡ä»¶æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jps -mlVv | grep javaTest</span><br><span class="line">lsof -p è¿›ç¨‹id | wc -l</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥è¦å…³é—­æµï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.æ‰‹åŠ¨å…³é—­</span><br><span class="line">Stream&lt;Path&gt; paths = Files.list(path);</span><br><span class="line">paths.close();</span><br><span class="line"></span><br><span class="line">2.try resourceè‡ªåŠ¨å…³é—­æµ</span><br><span class="line">try(Stream&lt;Path&gt; paths = Files.list(path)) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šè¯¥åŒ…ä¸‹çš„ç”¨æ³•ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/CSDN_handsome/article/details/109743637">https://blog.csdn.net/CSDN_handsome/article/details/109743637</a></p>
<h3 id="lambdaè¡¨è¾¾å¼"><a href="#lambdaè¡¨è¾¾å¼" class="headerlink" title="lambdaè¡¨è¾¾å¼"></a>lambdaè¡¨è¾¾å¼</h3><p>çœ‹ã€ŠjavaåŸºç¡€ã€‹<br>é’ˆå¯¹æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£å®ç°ï¼Œä»¥ç®€æ´çš„è¡¨è¾¾å¼å½¢å¼å®ç°æ¥å£åŠŸèƒ½æ¥ä½œä¸ºæ–¹æ³•å‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">set.stream().map(i-&gt;String.valueOf(i)).</span><br><span class="line">æ‹¬å·å†…çš„iï¼Œè¡¨ç¤ºæµå¤„ç†ä¸­çš„å…ƒç´ ï¼Œä¹Ÿæ˜¯lambdaè¡¨è¾¾å¼çš„è¾“å…¥</span><br><span class="line">åªæœ‰ä¸€å¥è¯­å¥ï¼Œçœå»äº†&#123;&#125;ï¼Œçœå»äº†return</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨ç°æœ‰çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä¸Šé¢çš„ï¼Œå¯ä»¥å˜æˆlambdaè¡¨è¾¾å¼çš„å¼•ç”¨å½¢å¼::</span><br><span class="line">.map(String::valueOf).</span><br><span class="line"></span><br><span class="line">ä¸Šé¢çš„æ–¹æ³•ä¾‹å¦‚map()ï¼Œå†…éƒ¨çš„ä¼ å‚æ˜¯åªæœ‰ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œ</span><br><span class="line">æœ‰çš„æ–¹æ³•ç©¿å‚ï¼Œé™¤äº†ä¸€ä¸ªå‡½æ•°å¼æ¥å£è¿˜æœ‰å…¶ä»–ï¼Œæ‰€ä»¥ä¼šæœ‰å…¶ä»–å‚æ•°ã€‚</span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">æ–¹æ³•ï¼šshowSum(int x, int y, Calculate cu)</span><br><span class="line">ä½¿ç”¨ï¼šshowSum(10, 20, (x,y)-&gt;x+y);</span><br></pre></td></tr></table></figure>



<h3 id="spring-expression-Spelè¡¨è¾¾å¼-javaè¯­è¨€è§£æ"><a href="#spring-expression-Spelè¡¨è¾¾å¼-javaè¯­è¨€è§£æ" class="headerlink" title="spring-expression Spelè¡¨è¾¾å¼ javaè¯­è¨€è§£æ"></a>spring-expression Spelè¡¨è¾¾å¼ javaè¯­è¨€è§£æ</h3><p>ExpressionParseæ¥å£æ˜¯springframeworkåŒ…ä¸‹çš„ã€‚<br>å¯¹è¡¨è¾¾å¼è¿›è¡Œè§£æï¼Œé€šè¿‡å­—ç¬¦ä¸²ä¼ å…¥è§£æå™¨ï¼Œè¿›è¡Œè§£æã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    //å°†ä¸€æ•´ä¸ªè¯­å¥ç›´æ¥å®šä¹‰äº†å­—ç¬¦ä¸² ,å…¶ä¸­å¯¹å­—ç¬¦ä¸²çš„å¼€å§‹ç´¢å¼•ä¸ç»“æŸç´¢å¼•ä½¿ç”¨æ›¿ä»£å˜é‡</span><br><span class="line">    //å˜é‡å‰éœ€è¦åŠ #</span><br><span class="line">    String str = &quot;#var + 2&quot;;</span><br><span class="line">    //1å®šä¹‰ä¸€ä¸ªä¸“å±çš„è¡¨è¾¾å¼è§£æå·¥å…·</span><br><span class="line">    ExpressionParser parser = new SpelExpressionParser() ;</span><br><span class="line">    //2å®šä¹‰ä¸€ä¸ªè¡¨è¾¾å¼å¤„ç†ç±»</span><br><span class="line">    Expression exp = parser.parseExpression(str);</span><br><span class="line">    //3è¿›è¡Œæœ€ç»ˆçš„è¡¨è¾¾å¼è®¡ç®—ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡ç”¨æ¥ä¼ å‚</span><br><span class="line">    EvaluationContext context = new StandardEvaluationContext() ;</span><br><span class="line">    context.setVariable(&quot;var&quot;, 5);</span><br><span class="line">    //4é€šè¿‡è¡¨è¾¾å¼è¿›è¡Œç»“æœè®¡ç®—</span><br><span class="line">    System.out.println(exp.getValue(context, Integer.class));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="AtomicInteger"><a href="#AtomicInteger" class="headerlink" title="AtomicInteger"></a>AtomicInteger</h3><p>AtomicIntegerç±»æ˜¯ç³»ç»Ÿåº•å±‚ä¿æŠ¤çš„intç±»å‹ï¼Œé€šè¿‡æä¾›æ‰§è¡Œæ–¹æ³•çš„æ§åˆ¶è¿›è¡Œå€¼çš„åŸå­æ“ä½œã€‚AtomicIntegerå®ƒä¸èƒ½å½“ä½œIntegeræ¥ä½¿ç”¨ã€‚</p>
<p>ä»JAVA 1.5å¼€å§‹ï¼ŒAtomicInteger å±äºjava.util.concurrent.atomic åŒ…ä¸‹çš„ä¸€ä¸ªç±»ã€‚</p>
<p>AtomicIntegeré€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°å¯ä»¥ç›´æ¥åˆ›å»ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//åˆå§‹å€¼æ˜¯ 0</span><br><span class="line">AtomicInteger atomicInteger = new AtomicInteger(); </span><br><span class="line"> </span><br><span class="line">//åˆå§‹å€¼æ˜¯ 100</span><br><span class="line">AtomicInteger atomicInteger = new AtomicInteger(100);</span><br><span class="line"> </span><br><span class="line">int currentValue = atomicInteger.get();         //100</span><br><span class="line"> </span><br><span class="line">atomicInteger.set(1234);                        //å½“å‰å€¼1234</span><br></pre></td></tr></table></figure>

<p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ<br>1ã€ä½œä¸ºå¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨çš„åŸå­è®¡æ•°å™¨ã€‚<br>2ã€åœ¨æ¯”è¾ƒå’Œäº¤æ¢æ“ä½œä¸­å®ç°éé˜»å¡ç®—æ³•ã€‚</p>
<p>åŸå­è®¡æ•°å™¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ä¸€äº›ä»¥åŸå­æ–¹å¼æ‰§è¡ŒåŠ æ³•å’Œå‡æ³•æ“ä½œçš„æ–¹æ³•:</span><br><span class="line">addAndGet()- ä»¥åŸå­æ–¹å¼å°†ç»™å®šå€¼æ·»åŠ åˆ°å½“å‰å€¼ï¼Œå¹¶åœ¨æ·»åŠ åè¿”å›æ–°å€¼ã€‚</span><br><span class="line">getAndAdd() - ä»¥åŸå­æ–¹å¼å°†ç»™å®šå€¼æ·»åŠ åˆ°å½“å‰å€¼å¹¶è¿”å›æ—§å€¼ã€‚</span><br><span class="line">incrementAndGet()- ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼é€’å¢1å¹¶åœ¨é€’å¢åè¿”å›æ–°å€¼ã€‚å®ƒç›¸å½“äºi ++æ“ä½œã€‚</span><br><span class="line">getAndIncrement() - ä»¥åŸå­æ–¹å¼é€’å¢å½“å‰å€¼å¹¶è¿”å›æ—§å€¼ã€‚å®ƒç›¸å½“äº++ iæ“ä½œã€‚</span><br><span class="line">decrementAndGet()- åŸå­åœ°å°†å½“å‰å€¼å‡1å¹¶åœ¨å‡é‡åè¿”å›æ–°å€¼ã€‚å®ƒç­‰åŒäºi-æ“ä½œã€‚</span><br><span class="line">getAndDecrement() - ä»¥åŸå­æ–¹å¼é€’å‡å½“å‰å€¼å¹¶è¿”å›æ—§å€¼ã€‚å®ƒç›¸å½“äº-iæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">public class Main&#123;</span><br><span class="line">    public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        AtomicInteger atomicInteger = new AtomicInteger(100);</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.addAndGet(2));         //102</span><br><span class="line">        System.out.println(atomicInteger);                      //102</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.getAndAdd(2));         //102</span><br><span class="line">        System.out.println(atomicInteger);                      //104</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.incrementAndGet());    //105  </span><br><span class="line">        System.out.println(atomicInteger);                      //105  </span><br><span class="line">                 </span><br><span class="line">        System.out.println(atomicInteger.getAndIncrement());    //105</span><br><span class="line">        System.out.println(atomicInteger);                      //106</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.decrementAndGet());    //105</span><br><span class="line">        System.out.println(atomicInteger);                      //105</span><br><span class="line">         </span><br><span class="line">        System.out.println(atomicInteger.getAndDecrement());    //105</span><br><span class="line">        System.out.println(atomicInteger);                      //104</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”è¾ƒå’Œäº¤æ¢ï¼š<br>1ã€æ¯”è¾ƒå’Œäº¤æ¢æ“ä½œå°†å†…å­˜ä½ç½®çš„å†…å®¹ä¸ç»™å®šå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ä¸”åªæœ‰å®ƒä»¬ç›¸åŒæ—¶ï¼Œæ‰å°†è¯¥å†…å­˜ä½ç½®çš„å†…å®¹ä¿®æ”¹ä¸ºç»™å®šçš„æ–°å€¼ã€‚è¿™æ˜¯ä½œä¸ºå•ä¸ªåŸå­æ“ä½œå®Œæˆçš„ã€‚<br>2ã€åŸå­æ€§ä¿è¯äº†æ–°å€¼æ˜¯æ ¹æ®æœ€æ–°ä¿¡æ¯è®¡ç®—å‡ºæ¥çš„; å¦‚æœåœ¨æ­¤æœŸé—´è¯¥å€¼å·²è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ›´æ–°ï¼Œåˆ™å†™å…¥å°†å¤±è´¥ã€‚<br><code>boolean compareAndSet(int expect, int update)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)&#123;</span><br><span class="line">        //1ã€é»˜è®¤åˆå§‹å€¼</span><br><span class="line">        AtomicInteger atomicInteger = new AtomicInteger(100);</span><br><span class="line">        //2ã€é»˜è®¤åˆå§‹å€¼å’Œç»™å®šå€¼ï¼Œéƒ½æ˜¯100ï¼Œæ‰€ä»¥ä¼šæ›´æ”¹æˆåŠŸ</span><br><span class="line">        boolean isSuccess = atomicInteger.compareAndSet(100,110);   //current value 100</span><br><span class="line">        //3ã€è¿”å›true</span><br><span class="line">        System.out.println(isSuccess);      //true</span><br><span class="line">        System.out.println(atomicInteger);  //110</span><br><span class="line">        //4ã€é»˜è®¤åˆå§‹å€¼æ˜¯110,ç»™å®šå€¼æ˜¯100ï¼Œæ‰€ä»¥ä¼šæ›´æ”¹å¤±è´¥</span><br><span class="line">        isSuccess = atomicInteger.compareAndSet(100,120);       //current value 110</span><br><span class="line">        //5ã€è¿”å›false</span><br><span class="line">        System.out.println(isSuccess);      //false</span><br><span class="line">        System.out.println(atomicInteger);  //110</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/073096a729f6">https://www.jianshu.com/p/073096a729f6</a></p>
<h3 id="getClass"><a href="#getClass" class="headerlink" title="getClass()"></a>getClass()</h3><p>è¿”å›Classç±»å‹çš„å¯¹è±¡ã€‚åªæ˜¯getClass()ï¼Œè¿”å›å½“å‰è¿è¡Œæ—¶ç±»ã€‚object.getClass()å‰é¢å¸¦å¯¹è±¡.getClass()è¿”å›å¯¹è±¡çš„ç±»ã€‚</p>
<p>Classå¸¸ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1() throws IllegalAccessException, InstantiationException, IOException &#123;</span><br><span class="line">  Class cl = getClass();</span><br><span class="line">  System.out.println(cl); //class org.example.javaer.ClassTest</span><br><span class="line">  String name = cl.getName(); // org.example.javaer.ClassTest</span><br><span class="line">  System.out.println(name);</span><br><span class="line">  Object classTest = cl.newInstance(); //åˆ›å»ºå®ä¾‹</span><br><span class="line">  String packName = cl.getPackage().getName();</span><br><span class="line">  System.out.println(packName); //org.example.javaer</span><br><span class="line">  ClassLoader classLoader = cl.getClassLoader(); //è·å–ç±»åŠ è½½å™¨</span><br><span class="line">  System.out.println(classLoader);</span><br><span class="line"></span><br><span class="line">  //getResourceAsStreamä»é¡¹ç›®ä¸‹æ–‡ä»¶ä¸­è·å–è¾“å…¥æµ</span><br><span class="line">  //è¯»å–æ–‡ä»¶å†…å®¹ä¸ºString</span><br><span class="line">  InputStream in = cl.getResourceAsStream(&quot;/hi.md&quot;); //åŠ &quot;/&quot;ï¼Œ/è¡¨ç¤ºsrc/test/resourcesä¸‹ï¼ˆClassPathæ ¹ç›®å½•ï¼‰</span><br><span class="line">  System.out.println(IOUtils.toString(in, String.valueOf(StandardCharsets.UTF_8)));</span><br><span class="line"></span><br><span class="line">  //è¯»å–ä¸ºå­—èŠ‚æ•°ç»„</span><br><span class="line">  byte[] bytes = IOUtils.toByteArray(in);</span><br><span class="line">  System.out.println(bytes);</span><br><span class="line"></span><br><span class="line">  InputStream in1 = cl.getResourceAsStream(&quot;src/test/resources/hi.md&quot;); //ä¸è¡Œï¼ŒNPE</span><br><span class="line">  System.out.println(IOUtils.toString(in1, String.valueOf(StandardCharsets.UTF_8)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…è·å–å„ç§è·¯å¾„"><a href="#âœ…è·å–å„ç§è·¯å¾„" class="headerlink" title="âœ…è·å–å„ç§è·¯å¾„"></a>âœ…è·å–å„ç§è·¯å¾„</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2() throws IOException &#123;</span><br><span class="line">    // 1.è·å–ClassPathæ ¹è·¯å¾„ï¼ˆç±»åŠ è½½æ ¹è·¯å¾„ï¼‰ï¼Œåˆ°src/test/resourcesï¼Œä¸¤ç§æ–¹æ³•</span><br><span class="line">    String path1 = getClass().getResource(&quot;/&quot;).toString(); //file:/Users/liuxuan/MyProject/JavaProject/java/web/target/test-classes/</span><br><span class="line">    System.out.println(&quot;ClassPathæ ¹è·¯å¾„ï¼š&quot; + path1);</span><br><span class="line">    System.out.println(&quot;é¡¹ç›®è·¯å¾„ï¼š&quot; + getClass().getClassLoader().getResource(&quot;&quot;)); //å’Œä¸Šé¢ä¸€æ ·</span><br><span class="line"></span><br><span class="line">    // 2.è·å–ç»å¯¹è·¯å¾„</span><br><span class="line">    String path2 = getClass().getResource(&quot;&quot;).toString(); //file:/Users/liuxuan/MyProject/JavaProject/java/web/target/classes/org/example/javaer/</span><br><span class="line">    System.out.println(&quot;ç»å¯¹è·¯å¾„ï¼š&quot; + path2);</span><br><span class="line"></span><br><span class="line">    // 3.è·å–é¡¹ç›®è·¯å¾„ ä¸¤ç§æ–¹æ³•</span><br><span class="line">    File dir = new File(&quot;&quot;); //å‚æ•°ä¸ºç©º</span><br><span class="line">    String path3 = dir.getCanonicalPath(); ///Users/liuxuan/MyProject/JavaProject/java/web</span><br><span class="line">    System.out.println(&quot;é¡¹ç›®è·¯å¾„ï¼š&quot; + path3);</span><br><span class="line">    String path4 = System.getProperty(&quot;user.dir&quot;); ///Users/liuxuan/MyProject/JavaProject/java/web</span><br><span class="line">    System.out.println(&quot;é¡¹ç›®è·¯å¾„ï¼š&quot; + path4);</span><br><span class="line">    String allPath = System.getProperty(&quot;java.class.path&quot;); //æ‰€æœ‰jaråŒ…çš„è·¯å¾„</span><br><span class="line">    System.out.println(&quot;javaç±»è·¯å¾„ï¼š&quot; + allPath);</span><br><span class="line"></span><br><span class="line">    // å†çœ‹çœ‹</span><br><span class="line">    String path5 = getClass().getResource(&quot;/&quot;).getPath(); //è¿™æ ·è·å¾—çš„å‰é¢æ²¡æœ‰file</span><br><span class="line">    System.out.println(&quot;ClassPathæ ¹è·¯å¾„ï¼š&quot; + path5);</span><br><span class="line">    URL url = getClass().getClassLoader().getResource(&quot;&quot;); //file:/Users/liuxuan/MyProject/JavaProject/java/web/target/test-classes/</span><br><span class="line">    System.out.println(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15057811/4080631">https://blog.51cto.com/u_15057811/4080631</a></p>
<h4 id="âœ…System-getProperty-æ–¹æ³•"><a href="#âœ…System-getProperty-æ–¹æ³•" class="headerlink" title="âœ…System.getProperty()æ–¹æ³•"></a>âœ…System.getProperty()æ–¹æ³•</h4><p>è·å–å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬ç­‰ä¸€äº›ä¿¡æ¯ã€‚<br>å†…éƒ¨keyï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">String path4 = System.getProperty(&quot;user.dir&quot;); ///Users/liuxuan/MyProject/JavaProject/java/web</span><br><span class="line">System.out.println(&quot;é¡¹ç›®è·¯å¾„ï¼š&quot; + path4);</span><br><span class="line">String allPath = System.getProperty(&quot;java.class.path&quot;);</span><br><span class="line">System.out.println(&quot;javaç±»è·¯å¾„ï¼š&quot; + allPath);</span><br><span class="line"></span><br><span class="line">Java.version</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒç‰ˆæœ¬</span><br><span class="line">java.vendor</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒä¾›åº”å•†</span><br><span class="line">java.vendor.url</span><br><span class="line">Java ä¾›åº”å•†çš„ URL</span><br><span class="line">java.home</span><br><span class="line">Java å®‰è£…ç›®å½•</span><br><span class="line">java.vm.specification.version</span><br><span class="line">Java è™šæ‹Ÿæœºè§„èŒƒç‰ˆæœ¬</span><br><span class="line">java.vm.specification.vendor</span><br><span class="line">Java è™šæ‹Ÿæœºè§„èŒƒä¾›åº”å•†</span><br><span class="line">java.vm.specification.name</span><br><span class="line">Java è™šæ‹Ÿæœºè§„èŒƒåç§°</span><br><span class="line">java.vm.version</span><br><span class="line">Java è™šæ‹Ÿæœºå®ç°ç‰ˆæœ¬</span><br><span class="line">java.vm.vendor</span><br><span class="line">Java è™šæ‹Ÿæœºå®ç°ä¾›åº”å•†</span><br><span class="line">java.vm.name</span><br><span class="line">Java è™šæ‹Ÿæœºå®ç°åç§°</span><br><span class="line">java.specification.version</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒç‰ˆæœ¬</span><br><span class="line">java.specification.vendor</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒä¾›åº”å•†</span><br><span class="line">java.specification.name</span><br><span class="line">Java è¿è¡Œæ—¶ç¯å¢ƒè§„èŒƒåç§°</span><br><span class="line">java.class.version</span><br><span class="line">Java ç±»æ ¼å¼ç‰ˆæœ¬å·</span><br><span class="line">java.class.path</span><br><span class="line">Java ç±»è·¯å¾„</span><br><span class="line">java.library.path</span><br><span class="line">åŠ è½½åº“æ—¶æœç´¢çš„è·¯å¾„åˆ—è¡¨</span><br><span class="line">java.io.tmpdir</span><br><span class="line">é»˜è®¤çš„ä¸´æ—¶æ–‡ä»¶è·¯å¾„</span><br><span class="line">java.compiler</span><br><span class="line">è¦ä½¿ç”¨çš„ JIT ç¼–è¯‘å™¨çš„åç§°</span><br><span class="line">java.ext.dirs</span><br><span class="line">ä¸€ä¸ªæˆ–å¤šä¸ªæ‰©å±•ç›®å½•çš„è·¯å¾„</span><br><span class="line">os.name</span><br><span class="line">æ“ä½œç³»ç»Ÿçš„åç§°</span><br><span class="line">os.arch</span><br><span class="line">æ“ä½œç³»ç»Ÿçš„æ¶æ„</span><br><span class="line">os.version</span><br><span class="line">æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬</span><br><span class="line">file.separator</span><br><span class="line">æ–‡ä»¶åˆ†éš”ç¬¦ï¼ˆåœ¨ UNIX ç³»ç»Ÿä¸­æ˜¯â€œ/â€ï¼‰</span><br><span class="line">path.separator</span><br><span class="line">è·¯å¾„åˆ†éš”ç¬¦ï¼ˆåœ¨ UNIX ç³»ç»Ÿä¸­æ˜¯â€œ:â€ï¼‰</span><br><span class="line">line.separator</span><br><span class="line">è¡Œåˆ†éš”ç¬¦ï¼ˆåœ¨ UNIX ç³»ç»Ÿä¸­æ˜¯â€œ/nâ€ï¼‰</span><br><span class="line">user.name</span><br><span class="line">ç”¨æˆ·çš„è´¦æˆ·åç§°</span><br><span class="line">user.home</span><br><span class="line">ç”¨æˆ·çš„ä¸»ç›®å½•</span><br><span class="line">user.dir</span><br><span class="line">ç”¨æˆ·çš„å½“å‰å·¥ä½œç›®å½•</span><br></pre></td></tr></table></figure>

<h4 id="âœ…ç±»åŠ è½½å™¨"><a href="#âœ…ç±»åŠ è½½å™¨" class="headerlink" title="âœ…ç±»åŠ è½½å™¨"></a>âœ…ç±»åŠ è½½å™¨</h4><p>ç”¨æ¥æŠŠç±»è£…è½½è¿›å†…å­˜çš„ã€‚</p>
<p>éå¸¸ä¸é”™çš„è¯¦è§£ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_68064743/article/details/123957150">https://blog.csdn.net/m0_68064743/article/details/123957150</a></p>
<h4 id="âœ…getSimpleName"><a href="#âœ…getSimpleName" class="headerlink" title="âœ…getSimpleName"></a>âœ…getSimpleName</h4><p>Class.getSimpleName()æ–¹æ³•è¿”å›æ­¤Classå¯¹è±¡è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„ç®€å•åç§°ï¼Œä½œä¸ºå­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String className1 = SomeTest.class.getName();</span><br><span class="line">System.out.println(className1); //com.liuxuan.study.SomeTest</span><br><span class="line">String className2 = SomeTest.class.getSimpleName();</span><br><span class="line">System.out.println(className2); //SomeTest</span><br></pre></td></tr></table></figure>

<h3 id="Class-forNameæ–¹æ³•"><a href="#Class-forNameæ–¹æ³•" class="headerlink" title="Class.forNameæ–¹æ³•"></a>Class.forNameæ–¹æ³•</h3><p>Classç±»çš„é™æ€æ–¹æ³•forName()<br>å’Œä¸Šé¢çš„ä¸€æ ·ï¼Œéƒ½æ˜¯è¿”å›Classç±»å‹çš„å¯¹è±¡ï¼ŒåŒºåˆ«åœ¨äºobject.getClass()ç”¨äºæ ¹æ®å¯¹è±¡è·å–Classå¯¹è±¡ï¼›Class.forName(className)ç”¨äºæ ¹æ®ç±»åè·å–Classå¯¹è±¡ã€‚</p>
<h4 id="âœ…-é¦–å…ˆè®²è¿°Classæ˜¯ä¸ªä»€ä¹ˆæ ·çš„å¯¹è±¡"><a href="#âœ…-é¦–å…ˆè®²è¿°Classæ˜¯ä¸ªä»€ä¹ˆæ ·çš„å¯¹è±¡" class="headerlink" title="âœ… é¦–å…ˆè®²è¿°Classæ˜¯ä¸ªä»€ä¹ˆæ ·çš„å¯¹è±¡"></a>âœ… é¦–å…ˆè®²è¿°Classæ˜¯ä¸ªä»€ä¹ˆæ ·çš„å¯¹è±¡</h4><p>1ã€ Classç±»å°è£…äº†ç±»æˆ–æ¥å£çš„è¿è¡Œæ—¶çŠ¶æ€</p>
<p>Javaç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¸€ç›´å¯¹æ‰€æœ‰çš„å¯¹è±¡è¿›è¡Œæ‰€è°“çš„è¿è¡Œæ—¶ç±»å‹æ ‡è¯†ï¼Œè¿™äº›æ ‡ç¤ºçºªå½•äº†æ¯ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚<br>è™šæ‹Ÿæœºé€šå¸¸ä½¿ç”¨è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯é€‰æ‹©æ­£ç¡®æ–¹æ³•å»æ‰§è¡Œï¼Œç”¨æ¥ä¿å­˜è¿™äº›ç±»å‹ä¿¡æ¯çš„ç±»æ˜¯Classç±»ã€‚</p>
<p>2ã€Classç±»å‹çš„å¯¹è±¡ï¼Œæ˜¯åŠ è½½ç±»æ—¶è‡ªåŠ¨åˆ›å»ºçš„</p>
<p>Class æ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚Class å¯¹è±¡æ˜¯åœ¨åŠ è½½ç±»æ—¶ï¼Œç”±Java è™šæ‹Ÿæœºä»¥åŠé€šè¿‡è°ƒç”¨ç±»åŠ è½½å™¨ä¸­çš„ defineClass æ–¹æ³•è‡ªåŠ¨æ„é€ çš„ï¼Œå› æ­¤ä¸èƒ½æ˜¾å¼åœ°å£°æ˜ä¸€ä¸ªClasså¯¹è±¡ã€‚</p>
<p>3ã€è™šæ‹Ÿæœºä¸ºæ¯ç§ç±»å‹ç®¡ç†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„Classå¯¹è±¡</p>
<p>æ¯ä¸ªç±»ï¼ˆå‹ï¼‰éƒ½æœ‰ä¸€ä¸ªClasså¯¹è±¡ã€‚<br>è¿è¡Œç¨‹åºæ—¶ï¼ŒJavaè™šæ‹Ÿæœº(JVM)é¦–å…ˆæ£€æŸ¥æ‰€è¦åŠ è½½çš„ç±»å¯¹åº”çš„Classå¯¹è±¡æ˜¯å¦å·²ç»åŠ è½½ã€‚å¦‚æœæ²¡æœ‰åŠ è½½ï¼ŒJVMå°±ä¼šæ ¹æ®ç±»åæŸ¥æ‰¾.classæ–‡ä»¶ï¼Œå¹¶å°†å…¶Classå¯¹è±¡è½½å…¥ã€‚</p>
<p>4ã€åŸºæœ¬çš„ Java ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€longã€float å’Œ doubleï¼‰å’Œå…³é”®å­— void ä¹Ÿéƒ½å¯¹åº”ä¸€ä¸ª Class å¯¹è±¡ã€‚</p>
<p>5ã€æ¯ä¸ªæ•°ç»„å±äºè¢«æ˜ å°„ä¸º Class å¯¹è±¡çš„ä¸€ä¸ªç±»ï¼Œæ‰€æœ‰å…·æœ‰ç›¸åŒå…ƒç´ ç±»å‹å’Œç»´æ•°çš„æ•°ç»„éƒ½å…±äº«è¯¥ Class å¯¹è±¡ã€‚</p>
<p>6ã€ä¸€èˆ¬æŸä¸ªç±»çš„Classå¯¹è±¡è¢«è½½å…¥å†…å­˜ï¼Œå®ƒå°±ç”¨æ¥åˆ›å»ºè¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚</p>
<h4 id="âœ…-ç»“åˆåå°„ä½¿ç”¨ä¸¾ä¾‹"><a href="#âœ…-ç»“åˆåå°„ä½¿ç”¨ä¸¾ä¾‹" class="headerlink" title="âœ… ç»“åˆåå°„ä½¿ç”¨ä¸¾ä¾‹"></a>âœ… ç»“åˆåå°„ä½¿ç”¨ä¸¾ä¾‹</h4><p>å¯¹äºä»»ä½•ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½çŸ¥é“è¿™ä¸ªç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»ä½•ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„æ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p>
<p>getMethod()è¿”å›æŸä¸ªç±»çš„æ‰€æœ‰å…¬ç”¨ï¼ˆpublicï¼‰æ–¹æ³•åŒ…æ‹¬å…¶ç»§æ‰¿ç±»çš„å…¬ç”¨æ–¹æ³•ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬å®ƒæ‰€å®ç°æ¥å£çš„æ–¹æ³•ã€‚</p>
<p>getDeclaredMethod()å¯¹è±¡è¡¨ç¤ºçš„ç±»æˆ–æ¥å£å£°æ˜çš„æ‰€æœ‰æ–¹æ³•,åŒ…æ‹¬å…¬å…±ã€ä¿æŠ¤ã€é»˜è®¤ï¼ˆåŒ…ï¼‰è®¿é—®å’Œç§æœ‰æ–¹æ³•ï¼Œä½†ä¸åŒ…æ‹¬ç»§æ‰¿çš„æ–¹æ³•ã€‚å½“ç„¶ä¹ŸåŒ…æ‹¬å®ƒæ‰€å®ç°æ¥å£çš„æ–¹æ³•ã€‚</p>
<p>ä¸€ä¸ªå®ä½“ç±»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.junit.demo;</span><br><span class="line"></span><br><span class="line">public class Book &#123;</span><br><span class="line">    private static final String defName = &quot;ã€Šç¨‹åºçŒ¿æ¤å‘ã€‹&quot;;</span><br><span class="line"></span><br><span class="line">    static &#123;</span><br><span class="line">        System.out.println(&quot;æˆ‘æ˜¯é™æ€ä»£ç å—ï¼Œè¾“å‡º: &quot; + defName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //æ‰“å°ç”Ÿäº§æ—¥æœŸï¼š</span><br><span class="line">    public static String printProduceDate(String name) &#123;</span><br><span class="line">        return &quot;æˆ‘æ˜¯é™æ€æ–¹æ³•printProduceDateï¼Œè¾“å‡º: &quot; + name + &quot;, produce is:&quot; + System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public Book() &#123;</span><br><span class="line">        System.out.println(&quot;æˆ‘æ˜¯Bookå£°æ˜çš„æ„é€ æ–¹æ³•ï¼&quot;);</span><br><span class="line">        name = defName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String toString(String msg) &#123;</span><br><span class="line">        return name + msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œæ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException, InstantiationException &#123;</span><br><span class="line"></span><br><span class="line">    //1-å°†æŒ‡å®šç±»åŠ è½½åˆ°JVMä¸­ï¼ˆClassNotFoundExceptionï¼‰</span><br><span class="line">    Class aClass = Class.forName(&quot;com.junit.demo.Book&quot;); //åŠ è½½è¿‡ç¨‹ä¼šæ‰§è¡Œstaticé™æ€ä»£ç å— outï¼šæˆ‘æ˜¯é™æ€ä»£ç å—ï¼Œè¾“å‡º: ã€Šç¨‹åºçŒ¿æ¤å‘ã€‹</span><br><span class="line">    System.out.println(aClass);  //out:class com.junit.demo.Book</span><br><span class="line"></span><br><span class="line">    //2.1-è®¿é—®é™æ€æ–¹æ³•ï¼šNoSuchMethodExceptionï¼ŒInvocationTargetException</span><br><span class="line">    Method method = aClass.getMethod(&quot;printProduceDate&quot;, String.class);</span><br><span class="line">    String result = (String) method.invoke(aClass, &quot;ã€Šç¨‹åºçŒ¿çš„é¢ˆæ¤è‡ªä¼ ã€‹&quot;);  </span><br><span class="line">    //åå°„é™æ€æ–¹æ³• ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Classå¯¹è±¡(ä¹Ÿå¯ä»¥ä¼ å…¥nullï¼Ÿ) ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥</span><br><span class="line">    System.out.println(result); //outï¼šæˆ‘æ˜¯é™æ€æ–¹æ³•printProduceDateï¼Œè¾“å‡º: ã€Šç¨‹åºçŒ¿çš„é¢ˆæ¤è‡ªä¼ ã€‹, produce is:1626682894095</span><br><span class="line">    System.out.println(&quot;---------------------------\n&quot;);</span><br><span class="line"></span><br><span class="line">    //2.2-åˆå§‹åŒ–å¯¹è±¡ï¼š</span><br><span class="line">    Book obj = (Book) aClass.newInstance();  //out:æˆ‘æ˜¯Bookå£°æ˜çš„æ„é€ æ–¹æ³•ï¼</span><br><span class="line">    System.out.println(&quot;å¾—åˆ°å¯¹è±¡åè®¿é—®getæ–¹æ³•ï¼š&quot; + obj.toString(&quot;&quot;));  //out:å¾—åˆ°å¯¹è±¡åè®¿é—®getæ–¹æ³•ï¼šã€Šç¨‹åºçŒ¿æ¤å‘ã€‹</span><br><span class="line">    System.out.println(&quot;---------------------------\n&quot;);</span><br><span class="line"></span><br><span class="line">    //2.3-åˆå§‹åŒ–å¯¹è±¡åè®¿é—®æ–¹æ³•ï¼š</span><br><span class="line">    Method method3 = aClass.getMethod(&quot;toString&quot;, String.class);</span><br><span class="line">    String result3 = (String) method3.invoke(aClass.newInstance()/*obj*/, &quot;è¿™æœ¬ä¹¦æ˜¯æˆ‘çš„ä¼™ä¼´ï¼&quot;); </span><br><span class="line">    //åå°„éé™æ€æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯è¾“å…¥ã€‚</span><br><span class="line">    System.out.println(result3); //outï¼šã€Šç¨‹åºçŒ¿æ¤å‘ã€‹è¿™æœ¬ä¹¦æ˜¯æˆ‘çš„ä¼™ä¼´ï¼</span><br><span class="line">    System.out.println(&quot;---------------------------\n&quot;);</span><br><span class="line"></span><br><span class="line">    System.out.println(Book.class.getName()); //com.junit.demo.Book</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â˜ï¸é€šè¿‡åå°„æ–¹å¼è®¿é—®é™æ€æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// ç”±Classè·å–æ–¹æ³•ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–¹æ³•åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚</span><br><span class="line">Method method = aClass.getMethod(&quot;printProduceDate&quot;, String.class);</span><br><span class="line">// å¼•ç”¨æ–¹æ³•ï¼š(å¼•ç”¨å®ä¾‹/è°ƒç”¨é™æ€æ–¹æ³•å¯ä¸ºnullï¼Œå‚æ•°å€¼/æœ‰å¤šä¸ªç”¨é€—å·éš”å¼€)ï¼Œå‚æ•°å€¼è¦å’Œå‚æ•°ç±»å‹çš„æ•°é‡åŒ¹é…ï¼</span><br><span class="line">String result = (String) method.invoke(aClass, &quot;ã€Šç¨‹åºçŒ¿çš„é¢ˆæ¤è‡ªä¼ ã€‹&quot;);</span><br><span class="line"></span><br><span class="line">ç®€å†™ï¼š</span><br><span class="line">aClass.getMethod(&quot;printProduceDate&quot;, String.class).invoke(null, &quot;ã€Šç¨‹åºçŒ¿çš„é¢ˆæ¤è‡ªä¼ ã€‹&quot;);</span><br></pre></td></tr></table></figure>

<p>âœŒï¸é€šè¿‡åå°„æ–¹å¼è®¿é—®å®ä¾‹æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹æ³•ä¸€ï¼šç›´æ¥è½¬åŒ–å®ä¾‹åŒ–åçš„å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨æ–¹æ³•</span><br><span class="line">Book book= (Book) aClass.newInstance();</span><br><span class="line">// book.setName(&#x27;xxx&#x27;); or book.getName(); or more...</span><br><span class="line"></span><br><span class="line">//æ–¹æ³•äºŒï¼šä½¿ç”¨invokeè°ƒç”¨æŒ‡å®šå®ä¾‹açš„æŒ‡å®šæ–¹æ³•b</span><br><span class="line">Method method3 = aClass.getMethod(&quot;toString&quot;, String.class);</span><br><span class="line">//è¿™é‡Œçš„bookå¯ä»¥æ˜¯å·²å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œæˆ–è€…ä½¿ç”¨ aClass.newInstance() ä¼ å…¥ï¼Œè¯¦è§ç®€å†™ï¼š</span><br><span class="line">String result3 = (String) method3.invoke(book, &quot;è¿™æœ¬ä¹¦æ˜¯æˆ‘çš„ä¼™ä¼´ï¼&quot;);</span><br><span class="line"></span><br><span class="line">ç®€å†™ï¼š</span><br><span class="line">aClass.getMethod(&quot;toString&quot;, String.class).invoke(aClass.newInstance(), &quot;xxx&quot;);</span><br></pre></td></tr></table></figure>

<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ˜¯ç±»ä¼¼äºå·¥å…·ç±»å¯ç”¨äºå…¨éƒ¨ç±»è®¿é—®çš„ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½newInstanceã€‚</p>
<p>å¦å¤–ï¼Œæ–¹æ³•ä¸€é€‚ç”¨äºéœ€è¦æ˜ å°„çš„ç±»æ˜¯å·²çŸ¥æˆ–å°‘æ•°æ—¶ï¼Œåä¹‹éœ€è¦ç»Ÿä¸€æŒ‰æŒ‡å®šå­—ç¬¦ä¸²åå°„è°ƒç”¨æ–¹æ³•çš„è¯ï¼Œéœ€ä½¿ç”¨æ–¹æ³•äºŒã€‚</p>
<p>â˜ï¸é€šè¿‡åå°„æ–¹å¼è®¿é—®ç§æœ‰æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package com.junit.demo;</span><br><span class="line"></span><br><span class="line">public class Netbar &#123;</span><br><span class="line">    private Double random = Math.random();</span><br><span class="line"></span><br><span class="line">    public Double getRandom() &#123;</span><br><span class="line">        return random;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private Netbar createNew() &#123;</span><br><span class="line">        return new Netbar();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static Netbar getInstance() &#123;</span><br><span class="line">        return new Netbar();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Netbar netbar = new Netbar();</span><br><span class="line">        System.out.println(&quot;Random:: &quot; + netbar.getRandom());</span><br><span class="line">        Netbar netbar2 = netbar.createNew();</span><br><span class="line">        System.out.println(&quot;Random2:: &quot; + netbar2.getRandom());</span><br><span class="line">        Netbar netbar3 = Netbar.getInstance();</span><br><span class="line">        System.out.println(&quot;Random3:: &quot; + netbar3.getRandom());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åå°„æ–¹å¼è®¿é—®ç§æœ‰éé™æ€æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws Exception &#123;</span><br><span class="line">    Class aClass = Class.forName(&quot;com.junit.demo.Netbar&quot;);</span><br><span class="line">    Method method = aClass.getDeclaredMethod(&quot;createNew&quot;);//è¿™é‡Œå¯ä»¥å¸¦å‚æ•°</span><br><span class="line">    method.setAccessible(true);//å¯¹æ‰€æœ‰å±æ€§è®¾ç½®è®¿é—®æƒé™  å½“ç±»ä¸­çš„æˆå‘˜å˜é‡ä¸ºprivateæ—¶ å¿…é¡»è®¾ç½®æ­¤é¡¹</span><br><span class="line">    Netbar netbar = (Netbar) method.invoke(aClass.newInstance()); //ä¼ å…¥å¯¹è±¡</span><br><span class="line">    System.out.println(&quot;Random2:: &quot; + netbar.getRandom());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åå°„æ–¹å¼è®¿é—®ç§æœ‰é™æ€æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws Exception &#123;</span><br><span class="line">    Class aClass = Class.forName(&quot;com.junit.demo.Netbar&quot;);</span><br><span class="line">    Method method = aClass.getDeclaredMethod(&quot;getInstance&quot;);//è¿™é‡Œå¯ä»¥å¸¦å‚æ•°</span><br><span class="line">    method.setAccessible(true);//å¯¹æ‰€æœ‰å±æ€§è®¾ç½®è®¿é—®æƒé™  å½“ç±»ä¸­çš„æˆå‘˜å˜é‡ä¸ºprivateæ—¶ å¿…é¡»è®¾ç½®æ­¤é¡¹</span><br><span class="line">    Netbar netbar = (Netbar) method.invoke(null);  //é™æ€æ–¹æ³•å¯ä»¥ä¼ å…¥null</span><br><span class="line">    System.out.println(&quot;Random2:: &quot; + netbar.getRandom());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼šJavaä¹‹Class.forNameæ–¹æ³•è¯¦è§£ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_26599807/article/details/118900090">https://blog.csdn.net/qq_26599807/article/details/118900090</a></p>
<h3 id="å¯¹è±¡æ‹·è´"><a href="#å¯¹è±¡æ‹·è´" class="headerlink" title="å¯¹è±¡æ‹·è´"></a>å¯¹è±¡æ‹·è´</h3><p>é¦–å…ˆï¼Œæµ…æ‹·è´å’Œæ·±æ‹·è´éƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ªå·²æœ‰å¯¹è±¡çš„æ“ä½œã€‚</p>
<p>åœ¨ Java ä¸­ï¼Œé™¤äº†åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå…ƒç±»å‹ï¼‰ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ ç±»çš„å®ä¾‹å¯¹è±¡ï¼ˆå¼•ç”¨æ•°æ®ç±»å‹ï¼‰ã€‚è€Œä¸€èˆ¬ä½¿ç”¨ ã€ = ã€å·åšèµ‹å€¼æ“ä½œçš„æ—¶å€™ã€‚å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®é™…ä¸Šæ˜¯æ‹·è´çš„å®ƒçš„å€¼ï¼Œä½†æ˜¯å¯¹äºå¯¹è±¡è€Œè¨€ï¼Œå…¶å®èµ‹å€¼çš„åªæ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå°†åŸå¯¹è±¡çš„å¼•ç”¨ä¼ é€’è¿‡å»ï¼Œä»–ä»¬å®é™…ä¸Šè¿˜æ˜¯æŒ‡å‘çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3() &#123;</span><br><span class="line">    // 1.ç›´æ¥</span><br><span class="line">    Student stu1 = new Student();</span><br><span class="line">    stu1.setNumber(12345);</span><br><span class="line">    Student stu2 = stu1;</span><br><span class="line">    stu2.setNumber(54321);</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ1:&quot; + stu1.getNumber());</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ2:&quot; + stu2.getNumber());  //æ”¹2ï¼Œ1è·Ÿç€ä¹Ÿæ”¹äº†</span><br><span class="line">    //åŸå› å‡ºåœ¨(stu2 = stu1) è¿™ä¸€å¥ã€‚</span><br><span class="line">    //è¯¥è¯­å¥çš„ä½œç”¨æ˜¯å°†stu1çš„å¼•ç”¨èµ‹å€¼ç»™stu2ã€‚å…¶å®ï¼Œstu1å’Œstu2åœ¨å †å†…å­˜ä¸­æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span><br><span class="line"></span><br><span class="line">    // 2.æ–°å»ºä¸€ä¸ªï¼Œå†set</span><br><span class="line">    Student stu3 = new Student();</span><br><span class="line">    stu3.setNumber(stu1.getNumber());</span><br><span class="line">    stu3.setNumber(111);</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ1:&quot; + stu1.getNumber());</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ3:&quot; + stu3.getNumber());  //æ”¹2ï¼Œ1ä¸ä¼šè·Ÿç€ä¹Ÿæ”¹äº†</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œæµ…æ‹·è´å’Œæ·±æ‹·è´å°±æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¹‹ä¸Šåšçš„åŒºåˆ†ï¼Œå¦‚æœåœ¨æ‹·è´è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œåªå¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œäº†æ‹·è´ï¼Œè€Œå¯¹å¼•ç”¨æ•°æ®ç±»å‹åªæ˜¯è¿›è¡Œäº†å¼•ç”¨çš„ä¼ é€’ï¼Œè€Œæ²¡æœ‰çœŸå®çš„åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œåˆ™è®¤ä¸ºæ˜¯æµ…æ‹·è´ã€‚åä¹‹ï¼Œåœ¨å¯¹å¼•ç”¨æ•°æ®ç±»å‹è¿›è¡Œæ‹·è´çš„æ—¶å€™ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶ä¸”å¤åˆ¶å…¶å†…çš„æˆå‘˜å˜é‡ï¼Œåˆ™è®¤ä¸ºæ˜¯æ·±æ‹·è´ã€‚</p>
<p>æ‰€è°“çš„æµ…æ‹·è´å’Œæ·±æ‹·è´ï¼Œåªæ˜¯åœ¨æ‹·è´å¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹ ç±»çš„å®ä¾‹å¯¹è±¡ è¿™ç§å¼•ç”¨æ•°æ®ç±»å‹çš„ä¸åŒæ“ä½œè€Œå·²ã€‚</p>
<p>æ€»ç»“æ¥è¯´ï¼š</p>
<p>1ã€æµ…æ‹·è´ï¼šå¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå€¼ä¼ é€’ï¼Œå¯¹å¼•ç”¨æ•°æ®ç±»å‹è¿›è¡Œå¼•ç”¨ä¼ é€’èˆ¬çš„æ‹·è´ï¼Œæ­¤ä¸ºæµ…æ‹·è´ã€‚</p>
<p>2ã€æ·±æ‹·è´ï¼šå¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå€¼ä¼ é€’ï¼Œå¯¹å¼•ç”¨æ•°æ®ç±»å‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶å¤åˆ¶å…¶å†…å®¹ï¼Œæ­¤ä¸ºæ·±æ‹·è´ã€‚</p>
<p>Object ä¸Šçš„ clone() æ–¹æ³•<br>åœ¨ Java ä¸­ï¼Œæ‰€æœ‰çš„ Class éƒ½ç»§æ‰¿è‡ª Object ï¼Œè€Œåœ¨ Object ä¸Šï¼Œå­˜åœ¨ä¸€ä¸ª clone() æ–¹æ³•ï¼Œå®ƒè¢«å£°æ˜ä¸ºäº† protected ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…¶å­ç±»ä¸­ï¼Œä½¿ç”¨å®ƒã€‚<br>è€Œæ— è®ºæ˜¯æµ…æ‹·è´è¿˜æ˜¯æ·±æ‹·è´ï¼Œéƒ½éœ€è¦å®ç° clone() æ–¹æ³•ï¼Œæ¥å®Œæˆæ“ä½œã€‚</p>
<p>è¢«å¤åˆ¶çš„ç±»éœ€è¦å®ç°Clonenableæ¥å£ï¼ˆä¸å®ç°çš„è¯åœ¨è°ƒç”¨cloneæ–¹æ³•ä¼šæŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸) è¯¥æ¥å£ä¸ºæ ‡è®°æ¥å£(ä¸å«ä»»ä½•æ–¹æ³•)<br>è¦†ç›–clone()æ–¹æ³•ï¼Œè®¿é—®ä¿®é¥°ç¬¦è®¾ä¸ºpublicã€‚æ–¹æ³•ä¸­è°ƒç”¨super.clone()æ–¹æ³•å¾—åˆ°éœ€è¦çš„å¤åˆ¶å¯¹è±¡ï¼ˆnativeä¸ºæœ¬åœ°æ–¹æ³•)</p>
<hr>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/hongshi/p/16189920.html">https://www.cnblogs.com/hongshi/p/16189920.html</a></p>
<h4 id="âœ…æµ…æ‹·è´"><a href="#âœ…æµ…æ‹·è´" class="headerlink" title="âœ…æµ…æ‹·è´"></a>âœ…æµ…æ‹·è´</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() &#123;</span><br><span class="line">    // 1.æµ…æ‹·è´</span><br><span class="line">    Student stu1 = new Student();</span><br><span class="line">    stu1.setNumber(1);</span><br><span class="line">    stu1.setName(&quot;ll&quot;);</span><br><span class="line">    stu1.setTeacher(new Teacher(23));</span><br><span class="line">    Student stu2 = (Student)stu1.clone();</span><br><span class="line">    stu2.setNumber(2);</span><br><span class="line">    stu2.setName(&quot;oo&quot;);</span><br><span class="line">    //stu2.setTeacher(new Teacher(24)); //æ–°å»ºä¸å¯¹</span><br><span class="line">    stu2.getTeacher().setAge(24);</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ1:&quot; + stu1 + &quot; hashCode:&quot; + stu1.hashCode());</span><br><span class="line">    //ClassTest.Student(number=1, name=ll, teacher=ClassTest.Teacher(age=24)) hashCode:1407343478</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ2:&quot; + stu2 + &quot; hashCode:&quot; + stu2.hashCode());</span><br><span class="line">    //ClassTest.Student(number=2, name=oo, teacher=ClassTest.Teacher(age=24)) hashCode:1940447180</span><br><span class="line">    System.out.println(&quot;teacherçš„hashCodeï¼š&quot; + stu1.getTeacher().hashCode() + &quot; &quot; + stu2.getTeacher().hashCode());</span><br><span class="line">    //teacherçš„hashCodeï¼š83 83</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@ToString</span><br><span class="line">static class Student implements Cloneable &#123;</span><br><span class="line">    private int number;</span><br><span class="line">    private String name;</span><br><span class="line">    private Teacher teacher;</span><br><span class="line">    public int getNumber() &#123;</span><br><span class="line">        return number;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setNumber(int number) &#123;</span><br><span class="line">        this.number = number;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setTeacher(Teacher teacher) &#123;</span><br><span class="line">        this.teacher = teacher;</span><br><span class="line">    &#125;</span><br><span class="line">    public Teacher getTeacher() &#123;return teacher;&#125;</span><br><span class="line">    //æµ…æ‹·è´</span><br><span class="line">    @Override</span><br><span class="line">    public Object clone() &#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            return super.clone();</span><br><span class="line">        &#125;catch(CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">class Teacher &#123;</span><br><span class="line">    private Integer age;</span><br><span class="line">    Teacher(Integer age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°é‡Œé¢çš„Teacherå¯¹è±¡ï¼Œå®é™…ä¸Šè¿˜æ˜¯æŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªå¯¹å¯¹å®ƒçš„å¼•ç”¨è¿›è¡Œäº†ä¼ é€’ã€‚</p>
<p>æ³¨æ„âš ï¸ï¼šStringä½œä¸ºä¸å¯æ›´æ”¹çš„ç±»ï¼ˆimmutable classï¼‰ï¼Œåœ¨newèµ‹å€¼çš„æ—¶å€™ï¼Œå°±å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›è¡¨ç°å‡ºæ¥çš„æ˜¯æ·±æ‹·è´ï¼ˆå’ŒåŸºæœ¬æ•°æ®ç±»å‹ä¸€æ ·ï¼‰ã€‚</p>
<h4 id="âœ…æ·±æ‹·è´"><a href="#âœ…æ·±æ‹·è´" class="headerlink" title="âœ…æ·±æ‹·è´"></a>âœ…æ·±æ‹·è´</h4><p>ä¸¤ç§æ–¹æ³•ï¼š<br>1ã€åºåˆ—åŒ–ï¼ˆserializationï¼‰è¿™ä¸ªå¯¹è±¡ï¼Œå†ååºåˆ—åŒ–å›æ¥ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ— éå°±æ˜¯åºåˆ—åŒ–çš„è§„åˆ™éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥å†™ã€‚<br>2ã€ç»§ç»­åˆ©ç”¨ clone() æ–¹æ³•ï¼Œæ—¢ç„¶ clone() æ–¹æ³•ï¼Œæ˜¯æˆ‘ä»¬æ¥é‡å†™çš„ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¯ä»¥å¯¹å…¶å†…çš„å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œå†è¿›è¡Œä¸€æ¬¡ clone()ã€‚ä¹Ÿå°±æ˜¯è®©Teacherç±»ä¹Ÿå®ç°Cloneableæ¥å£ï¼Œé‡å†™cloneæ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() &#123;</span><br><span class="line">    // 1.æµ…æ‹·è´</span><br><span class="line">    Student stu1 = new Student();</span><br><span class="line">    stu1.setNumber(1);</span><br><span class="line">    stu1.setName(&quot;ll&quot;);</span><br><span class="line">    stu1.setTeacher(new Teacher(23));</span><br><span class="line">    Student stu2 = (Student)stu1.clone();</span><br><span class="line">    stu2.setNumber(2);</span><br><span class="line">    stu2.setName(&quot;oo&quot;);</span><br><span class="line">    //stu2.setTeacher(new Teacher(24)); //æ–°å»ºä¸å¯¹</span><br><span class="line">    stu2.getTeacher().setAge(24);</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ1:&quot; + stu1 + &quot; hashCode:&quot; + stu1.hashCode());</span><br><span class="line">    System.out.println(&quot;å­¦ç”Ÿ2:&quot; + stu2 + &quot; hashCode:&quot; + stu2.hashCode());</span><br><span class="line">    System.out.println(&quot;teacherçš„hashCodeï¼š&quot; + stu1.getTeacher().hashCode() + &quot; &quot; + stu2.getTeacher().hashCode());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@ToString</span><br><span class="line">static class Student implements Cloneable &#123;</span><br><span class="line">    private int number;</span><br><span class="line">    private String name;</span><br><span class="line">    private Teacher teacher;</span><br><span class="line">    public int getNumber() &#123;</span><br><span class="line">        return number;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setNumber(int number) &#123;</span><br><span class="line">        this.number = number;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setTeacher(Teacher teacher) &#123;</span><br><span class="line">        this.teacher = teacher;</span><br><span class="line">    &#125;</span><br><span class="line">    public Teacher getTeacher() &#123;return teacher;&#125;</span><br><span class="line">//        //æµ…æ‹·è´</span><br><span class="line">//        @Override</span><br><span class="line">//        public Object clone() &#123;</span><br><span class="line">//            try&#123;</span><br><span class="line">//                return super.clone();</span><br><span class="line">//            &#125;catch(CloneNotSupportedException e) &#123;</span><br><span class="line">//                e.printStackTrace();</span><br><span class="line">//            &#125;</span><br><span class="line">//            return null;</span><br><span class="line">//        &#125;</span><br><span class="line">    //æ·±æ‹·è´</span><br><span class="line">    @Override</span><br><span class="line">    public Object clone() &#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            Student stu = (Student)super.clone();</span><br><span class="line">            stu.setTeacher((Teacher)this.teacher.clone());</span><br><span class="line">            return stu;</span><br><span class="line"></span><br><span class="line">        &#125; catch (CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">class Teacher implements Cloneable&#123;</span><br><span class="line">    private Integer age;</span><br><span class="line">    Teacher(Integer age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public Object clone() &#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            return super.clone();</span><br><span class="line">        &#125;catch(CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="BeanUtils-copyProperties"><a href="#BeanUtils-copyProperties" class="headerlink" title="BeanUtils.copyProperties"></a>BeanUtils.copyProperties</h4><p><code>BeanUtils.copyPropertiesï¼ˆsource,targetï¼‰</code>æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç”¨äºå°†äº‹ä»¶æºçš„æ•°æ®æ‹·è´åˆ°ç›®æ ‡æºä¸­ã€‚BeanUtilsæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯springçš„ï¼Œä¸€ä¸ªæ˜¯apacheçš„commonsä¸‹çš„ã€‚ç”¨æ³•ä¸€æ ·ï¼Œä½†æ˜¯ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼šä¸€ä¸ªæ˜¯å°†å‰è€…æ‹·è´ç»™åè€…ï¼Œå¦ä¸€ä¸ªæ˜¯å°†åè€…æ‹·è´ç»™å‰é¢çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Student studentOne  = new StudentOne(&quot;å¼ ä¸‰&quot;);</span><br><span class="line">Student studentTwo  = new StudentOne();  //å…ˆæ–°å»ºä¸€ä¸ªè¦æ‹·è´å‡ºæ¥çš„å¯¹è±¡</span><br><span class="line">//BeanUtils.copyPropertiesæ˜¯å°†studentOneçš„æ•°æ®æ‹·è´ç»™studentTwo</span><br><span class="line">BeanUtils.copyProperties(studentOne, studentTwo);</span><br><span class="line">//springçš„ç¬¬ä¸€ä¸ªæ˜¯è¾“å…¥ï¼Œç¬¬äºŒä¸ªè°è¾“å‡º</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸¤ä¸ªç±»ä¸ä¸€æ ·æ—¶ï¼Œåªä¼šæ‹·è´å±æ€§ä¸€æ ·çš„å†…å®¹ã€‚<br>ä½¿ç”¨åœºæ™¯ï¼šå¼€å‘ä¸­ç»å¸¸é‡åˆ°ï¼ŒæŠŠçˆ¶ç±»çš„å±æ€§æ‹·è´åˆ°å­ç±»ä¸­ã€‚<br>BeanUtilsæ˜¯æµ…æ‹·è´ã€‚æµ…æ‹·è´ï¼šå¼•ç”¨çš„ä¸€ä¸ªå†…å­˜åœ°å€)ã€‚</p>
<p>é€šå¸¸ç”¨äºè½¬æ¢å™¨Convertorï¼Œç”¨æ¥è½¬æ¢ä¸€ä¸ªç±»çš„å¯¹è±¡ä¸ºå¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œé‡å†™é‡Œé¢çš„convertæ–¹æ³•æ¥ç”¨ã€‚</p>
<h3 id="hashcode"><a href="#hashcode" class="headerlink" title="hashcode"></a>hashcode</h3><h4 id="hashcode-1"><a href="#hashcode-1" class="headerlink" title="hashcode"></a>hashcode</h4><p>1ã€hashå’Œhashè¡¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>hashæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸­çš„å®ç°å°±æ˜¯ä¸€ç§ç®—æ³•ï¼Œå°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„ç®—æ³•æ¥å¾—åˆ°ä¸€ä¸ªhashå€¼ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦çŸ¥é“å¦ä¸€ä¸ªä¸œè¥¿ï¼Œhashè¡¨ï¼Œé€šè¿‡hashç®—æ³•å¾—åˆ°çš„hashå€¼å°±åœ¨è¿™å¼ hashè¡¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œhashè¡¨å°±æ˜¯æ‰€æœ‰çš„hashå€¼ç»„æˆçš„ï¼Œæœ‰å¾ˆå¤šç§hashå‡½æ•°ï¼Œä¹Ÿå°±ä»£è¡¨ç€æœ‰å¾ˆå¤šç§ç®—æ³•å¾—åˆ°hashå€¼ã€‚</p>
</blockquote>
<p>2ã€hashcodeã€€</p>
<blockquote>
<p>hashcodeå°±æ˜¯é€šè¿‡hashå‡½æ•°å¾—æ¥çš„ï¼Œé€šä¿—çš„è¯´ï¼Œå°±æ˜¯é€šè¿‡æŸä¸€ç§ç®—æ³•å¾—åˆ°çš„ï¼Œhashcodeå°±æ˜¯åœ¨hashè¡¨ä¸­æœ‰å¯¹åº”çš„ä½ç½®ã€‚<br>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰hashcodeï¼Œå¯¹è±¡çš„hashcodeæ€ä¹ˆå¾—æ¥çš„å‘¢ï¼Ÿ<br>é¦–å…ˆä¸€ä¸ªå¯¹è±¡è‚¯å®šæœ‰ç‰©ç†åœ°å€ï¼Œåœ¨åˆ«çš„åšæ–‡ä¸­ä¼šhashcodeè¯´æˆæ˜¯ä»£è¡¨å¯¹è±¡çš„åœ°å€ï¼Œè¿™é‡Œè‚¯å®šä¼šè®©è¯»è€…å½¢æˆè¯¯åŒºï¼Œå¯¹è±¡çš„ç‰©ç†åœ°å€è·Ÿè¿™ä¸ªhashcodeåœ°å€ä¸ä¸€æ ·ï¼Œhashcodeä»£è¡¨å¯¹è±¡çš„åœ°å€è¯´çš„æ˜¯å¯¹è±¡åœ¨hashè¡¨ä¸­çš„ä½ç½®ï¼Œç‰©ç†åœ°å€è¯´çš„å¯¹è±¡å­˜æ”¾åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œé‚£ä¹ˆå¯¹è±¡å¦‚ä½•å¾—åˆ°hashcodeå‘¢ï¼Ÿ<br>é€šè¿‡å¯¹è±¡çš„å†…éƒ¨åœ°å€(ä¹Ÿå°±æ˜¯ç‰©ç†åœ°å€)è½¬æ¢æˆä¸€ä¸ªæ•´æ•°ï¼Œç„¶åè¯¥æ•´æ•°é€šè¿‡hashå‡½æ•°çš„ç®—æ³•å°±å¾—åˆ°äº†hashcodeã€‚æ‰€ä»¥ï¼Œhashcodeæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯åœ¨hashè¡¨ä¸­å¯¹åº”çš„ä½ç½®ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™é‡Œå¦‚æœè¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šçš„è¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œhashè¡¨ä¸­æœ‰ hashcodeä¸º1ã€hashcodeä¸º2ã€(â€¦)3ã€4ã€5ã€6ã€7ã€8è¿™æ ·å…«ä¸ªä½ç½®ï¼Œæœ‰ä¸€ä¸ªå¯¹è±¡Aï¼ŒAçš„ç‰©ç†åœ°å€è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°17(è¿™æ˜¯å‡å¦‚)ï¼Œå°±é€šè¿‡ç›´æ¥å–ä½™ç®—æ³•ï¼Œ17%8=1ï¼Œé‚£ä¹ˆAçš„hashcodeå°±ä¸º1ï¼Œä¸”Aå°±åœ¨hashè¡¨ä¸­1çš„ä½ç½®ã€‚</p>
</blockquote>
<p>3ã€hashcodeæœ‰ä»€ä¹ˆä½œç”¨</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆhashcodeä¸ç›´æ¥å†™ç‰©ç†åœ°å€å‘¢ï¼Œè¿˜è¦å¦å¤–ç”¨ä¸€å¼ hashè¡¨æ¥ä»£è¡¨å¯¹è±¡çš„åœ°å€ï¼Ÿ<br>HashCodeçš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†æŸ¥æ‰¾çš„å¿«æ·æ€§ï¼ŒHashCodeæ˜¯ç”¨æ¥åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ç¡®å®šå¯¹è±¡çš„å­˜å‚¨åœ°å€çš„(ååŠå¥è¯´çš„ç”¨hashcodeæ¥ä»£è¡¨å¯¹è±¡å°±æ˜¯åœ¨hashè¡¨ä¸­çš„ä½ç½®)<br>ä¸ºä»€ä¹ˆhashcodeå°±æŸ¥æ‰¾çš„æ›´å¿«ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªèƒ½å­˜æ”¾1000ä¸ªæ•°è¿™æ ·å¤§çš„å†…å­˜ä¸­ï¼Œåœ¨å…¶ä¸­è¦å­˜æ”¾1000ä¸ªä¸ä¸€æ ·çš„æ•°å­—ï¼Œç”¨æœ€ç¬¨çš„æ–¹æ³•ï¼Œå°±æ˜¯å­˜ä¸€ä¸ªæ•°å­—ï¼Œå°±éå†ä¸€éï¼Œçœ‹æœ‰æ²¡æœ‰ç›¸åŒå¾—æ•°ï¼Œå½“å­˜äº†900ä¸ªæ•°å­—ï¼Œå¼€å§‹å­˜901ä¸ªæ•°å­—çš„æ—¶å€™ï¼Œå°±éœ€è¦è·Ÿ900ä¸ªæ•°å­—è¿›è¡Œå¯¹æ¯”ï¼Œè¿™æ ·å°±å¾ˆéº»çƒ¦ï¼Œå¾ˆæ˜¯æ¶ˆè€—æ—¶é—´ï¼Œç”¨hashcodeæ¥è®°å½•å¯¹è±¡çš„ä½ç½®ï¼Œæ¥çœ‹ä¸€ä¸‹ã€‚<br>hashè¡¨ä¸­æœ‰1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ä¸ªä½ç½®ï¼Œå­˜ç¬¬ä¸€ä¸ªæ•°ï¼Œhashcodeä¸º1ï¼Œè¯¥æ•°å°±æ”¾åœ¨hashè¡¨ä¸­1çš„ä½ç½®ï¼Œå­˜åˆ°100ä¸ªæ•°å­—ï¼Œhashè¡¨ä¸­8ä¸ªä½ç½®ä¼šæœ‰å¾ˆå¤šæ•°å­—äº†ï¼Œ1ä¸­å¯èƒ½æœ‰20ä¸ªæ•°å­—ï¼Œå­˜101ä¸ªæ•°å­—æ—¶ï¼Œä»–å…ˆæŸ¥hashcodeå€¼å¯¹åº”çš„ä½ç½®ï¼Œå‡è®¾ä¸º1ï¼Œé‚£ä¹ˆå°±æœ‰20ä¸ªæ•°å­—å’Œä»–çš„hashcodeç›¸åŒï¼Œä»–åªéœ€è¦è·Ÿè¿™20ä¸ªæ•°å­—ç›¸æ¯”è¾ƒ(equals)ï¼Œå¦‚æœæ²¡ä¸€ä¸ªç›¸åŒï¼Œé‚£ä¹ˆå°±æ”¾åœ¨1è¿™ä¸ªä½ç½®ï¼Œè¿™æ ·æ¯”è¾ƒçš„æ¬¡æ•°å°±å°‘äº†å¾ˆå¤šï¼Œå®é™…ä¸Šhashè¡¨ä¸­æœ‰å¾ˆå¤šä½ç½®ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¾‹åªæœ‰8ä¸ªï¼Œæ‰€ä»¥æ¯”è¾ƒçš„æ¬¡æ•°ä¼šè®©ä½ è§‰å¾—ä¹ŸæŒºå¤šçš„ï¼Œå®é™…ä¸Šï¼Œå¦‚æœhashè¡¨å¾ˆå¤§ï¼Œé‚£ä¹ˆæ¯”è¾ƒçš„æ¬¡æ•°å°±å¾ˆå°‘å¾ˆå°‘äº†ã€‚<br>é€šè¿‡å¯¹åŸå§‹æ–¹æ³•å’Œä½¿ç”¨hashcodeæ–¹æ³•è¿›è¡Œå¯¹æ¯”ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†hashcodeçš„ä½œç”¨ï¼Œå¹¶ä¸”ä¸ºä»€ä¹ˆè¦ä½¿ç”¨hashcodeäº†</p>
</blockquote>
<p>4ã€equalsæ–¹æ³•å’Œhashcodeçš„å…³ç³»</p>
<blockquote>
<p>é€šè¿‡å‰é¢è¿™ä¸ªä¾‹å­ï¼Œå¤§æ¦‚å¯ä»¥çŸ¥é“ï¼Œå…ˆé€šè¿‡hashcodeæ¥æ¯”è¾ƒï¼Œå¦‚æœhashcodeç›¸ç­‰ï¼Œé‚£ä¹ˆå°±ç”¨equalsæ–¹æ³•æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚</p>
</blockquote>
<blockquote>
<p>ç”¨ä¸ªä¾‹å­è¯´æ˜ï¼šä¸Šé¢è¯´çš„hashè¡¨ä¸­çš„8ä¸ªä½ç½®ï¼Œå°±å¥½æ¯”8ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶é‡Œèƒ½è£…å¾ˆå¤šçš„å¯¹è±¡ï¼Œå¯¹è±¡Aé€šè¿‡hashå‡½æ•°ç®—æ³•å¾—åˆ°å°†å®ƒæ”¾åˆ°1å·æ¡¶ä¸­ï¼Œå½“ç„¶è‚¯å®šæœ‰åˆ«çš„å¯¹è±¡ä¹Ÿä¼šæ”¾åˆ°1å·æ¡¶ä¸­ï¼Œå¦‚æœå¯¹è±¡Bä¹Ÿé€šè¿‡ç®—æ³•åˆ†åˆ°äº†1å·æ¡¶ï¼Œé‚£ä¹ˆå®ƒå¦‚ä½•è¯†åˆ«æ¡¶ä¸­å…¶ä»–å¯¹è±¡æ˜¯å¦å’Œå®ƒä¸€æ ·å‘¢ï¼Œè¿™æ—¶å€™å°±éœ€è¦equalsæ–¹æ³•æ¥è¿›è¡Œç­›é€‰äº†ã€‚</p>
</blockquote>
<blockquote>
<p>1ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡çš„HashCodeä¸€å®šä¹Ÿç›¸åŒ<br>2ã€å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„HashCodeç›¸åŒï¼Œä¸ä»£è¡¨ä¸¤ä¸ªå¯¹è±¡å°±ç›¸åŒï¼Œåªèƒ½è¯´æ˜è¿™ä¸¤ä¸ªå¯¹è±¡åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ï¼Œå­˜æ”¾äºåŒä¸€ä¸ªä½ç½®</p>
</blockquote>
<p>5ã€ä¸ºä»€ä¹ˆequalsæ–¹æ³•é‡å†™çš„è¯ï¼Œå»ºè®®ä¹Ÿä¸€èµ·é‡å†™hashcodeæ–¹æ³•</p>
<blockquote>
<p>æ¯”å¦‚ï¼šæœ‰ä¸ªAç±»é‡å†™äº†equalsæ–¹æ³•ï¼Œä½†æ˜¯æ²¡æœ‰é‡å†™hashCodeæ–¹æ³•ï¼Œçœ‹è¾“å‡ºç»“æœï¼Œå¯¹è±¡a1å’Œå¯¹è±¡a2ä½¿ç”¨equalsæ–¹æ³•ç›¸ç­‰ï¼ŒæŒ‰ç…§ä¸Šé¢çš„hashcodeçš„ç”¨æ³•ï¼Œé‚£ä¹ˆä»–ä»¬ä¸¤ä¸ªçš„hashcodeè‚¯å®šç›¸ç­‰ï¼Œä½†æ˜¯è¿™é‡Œç”±äºæ²¡é‡å†™hashcodeæ–¹æ³•ï¼Œä»–ä»¬ä¸¤ä¸ªhashcodeå¹¶ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨é‡å†™äº†equalsæ–¹æ³•åï¼Œå°½é‡ä¹Ÿé‡å†™äº†hashcodeæ–¹æ³•ï¼Œé€šè¿‡ä¸€å®šçš„ç®—æ³•ï¼Œä½¿ä»–ä»¬åœ¨equalsç›¸ç­‰æ—¶ï¼Œä¹Ÿä¼šæœ‰ç›¸åŒçš„hashcodeå€¼ã€‚</p>
</blockquote>
<p>Integerçš„é‡å†™æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public boolean equals(Object obj) &#123;</span><br><span class="line">    if (obj instanceof Integer) &#123;</span><br><span class="line">        return value == ((Integer)obj).intValue();</span><br><span class="line">    &#125;  // å˜æˆæ¯”è¾ƒIntegerå†…éƒ¨çš„final intå¸¸é‡çš„å€¼æ˜¯å¦ç›¸ç­‰</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//hashCodeæ–¹æ³•ä¹Ÿæ˜¯ç”¨çš„å€¼</span><br><span class="line">@Override</span><br><span class="line">public int hashCode() &#123;</span><br><span class="line">    return Integer.hashCode(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static int hashCode(int value) &#123;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>hashCodeæ˜¯ç”¨äºæŸ¥æ‰¾ä½¿ç”¨çš„ï¼Œè€Œ equalsæ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ˜¯å¦ç›¸ç­‰çš„ã€‚hashCodeçš„å­˜åœ¨ä¸»è¦æ˜¯ç”¨äºæŸ¥æ‰¾çš„å¿«æ·æ€§ï¼Œå¦‚Hashtableï¼ŒHashMapç­‰ï¼ŒhashCodeæ˜¯ç”¨æ¥åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ç¡®å®šå¯¹è±¡çš„å­˜å‚¨åœ°å€çš„.</p>
<p>å¦‚æœå¯¹è±¡çš„equalsæ–¹æ³•è¢«é‡å†™ï¼Œé‚£ä¹ˆå¯¹è±¡çš„hashCodeä¹Ÿå°½é‡é‡å†™ï¼Œå¹¶ä¸”äº§ç”ŸhashCodeä½¿ç”¨çš„å¯¹è±¡ï¼Œä¸€å®šè¦å’Œequalsæ–¹æ³•ä¸­ä½¿ç”¨çš„ä¸€è‡´.</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44364444/article/details/120054230">https://blog.csdn.net/weixin_44364444/article/details/120054230</a></p>
<h4 id="javaå˜é‡åœ°å€"><a href="#javaå˜é‡åœ°å€" class="headerlink" title="javaå˜é‡åœ°å€"></a>javaå˜é‡åœ°å€</h4><p>javaçš„å˜é‡ä¸èƒ½ç›´æ¥è·å–çœŸå®çš„åœ°å€ï¼Œåªèƒ½ä½¿ç”¨<code>System.out.println(obj.hashcode())</code>è¾“å‡ºçš„æ—¶å¯¹è±¡çš„å“ˆå¸Œç ï¼Œè€Œéå†…å­˜åœ°å€ã€‚</p>
<p>åœ¨Javaä¸­æ˜¯ä¸å¯èƒ½å¾—åˆ°å¯¹è±¡çœŸæ­£çš„å†…å­˜åœ°å€çš„ï¼Œå› ä¸ºJavaä¸­å †æ˜¯ç”±JVMç®¡ç†çš„ä¸èƒ½ç›´æ¥æ“ä½œã€‚åªèƒ½è¯´æ­¤æ—¶æ‰“å°å‡ºçš„Hashç è¡¨ç¤ºäº†è¯¥å¯¹è±¡åœ¨JAVAè™šæ‹Ÿæœºä¸­çš„å†…å­˜ä½ç½®ï¼ŒJavaè™šæ‹Ÿæœºä¼šæ ¹æ®è¯¥hashç æœ€ç»ˆåœ¨çœŸæ­£çš„çš„å †ç©ºé—´ä¸­ç»™è¯¥å¯¹è±¡åˆ†é…ä¸€ä¸ªåœ°å€.</p>
<p>è¦æƒ³å¾—åˆ°å˜é‡åœ¨ç‰©ç†å†…å­˜ä¸­çš„çœŸå®åœ°å­˜ï¼Œé‚£åªæœ‰ç”¨JNIæŠ€æœ¯è°ƒç”¨c/c++å»å®ç°ï¼Œå¦åˆ™æ— èƒ½ä¸ºåŠ›ï¼Œå› ä¸ºjavaè¶…ä¸å‡ºJVMï¼Œè€ŒJVMå¯¹ç‰©ç†å†…å­˜åœ°å€æ˜¯â€œä¸å¯è§â€çš„ï¼Œå¦åˆ™javaä¸­ä¸å°±æœ‰äº†æŒ‡é’ˆï¼Œè€Œå»ç›´æ¥æ“ä½œå†…å­˜äº†ï¼Œå½“ç„¶è¿™æ˜¯ä¸javaè¯­è¨€ç›¸è¿èƒŒçš„ã€‚</p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/feng3702592/article/details/126722686">https://blog.csdn.net/feng3702592/article/details/126722686</a></p>
<h4 id="ã€equalsã€hashCode"><a href="#ã€equalsã€hashCode" class="headerlink" title="==ã€equalsã€hashCode"></a>==ã€equalsã€hashCode</h4><p>1ã€==å¯¹äºæ™®é€šå˜é‡æ˜¯å€¼æ¯”è¾ƒï¼Œå¯¹äºåŒ…è£…ç±»å‹å˜é‡ï¼Œæ˜¯å†…å­˜åœ°å€æ¯”è¾ƒï¼Œä¹Ÿå°±æ˜¯æ¯”è¾ƒæ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>2ã€åŒ…è£…ç±»å‹é‡å†™äº†equalsæ–¹æ³•ï¼Œå˜æˆäº†å€¼æ¯”è¾ƒã€‚</p>
<p>3ã€hashCodeè¡¨ç¤ºåœ¨hashè¡¨ä¸­çš„ä½ç½®ã€‚equalsä¸€æ ·ï¼Œé‚£ä¹ˆhashCodeä¸€å®šä¸€æ ·ã€‚ï¼ˆåªè¦å€¼æ˜¯ä¸€æ ·çš„ï¼ŒhashCodeå°±ä¼šæ˜¯ç›¸åŒçš„ã€‚ï¼‰<br>åŸå› ï¼šå°½ç®¡ä¸åŒçš„æ•°å€¼ç±»å‹çš„åŒ…è£…ç±»ï¼Œè®¡ç®—hashCodeçš„ç®—æ³•ä¸ä¸€æ ·ï¼Œä½†æ˜¯åº•å±‚éƒ½æ˜¯æ‹¿å¯¹åº”çš„åŸå§‹æ•°æ®ç±»å‹çš„å€¼å»è¿›è¡ŒhashCodeè®¡ç®—ã€‚<br>åè¿‡æ¥ï¼š</p>
<p>4ã€åŒä¸€ä¸ªå¯¹è±¡çš„ï¼ŒhashCodeå€¼ä¸€å®šç›¸åŒï¼Œä½†æ˜¯ hashCodeç›¸åŒï¼Œä¸ä¸€å®šæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿä¸ä¸€å®šequalsä¸ºtrueã€‚</p>
<p>å…³ç³»ï¼šåŒä¸€ä¸ªå¯¹è±¡ï¼ˆ==ï¼‰æœ€å°çš„åœˆï¼Œequalsä¸ºtrueä¸­é—´åœˆï¼ŒhashCodeä¸€æ ·æœ€å¤§åœˆã€‚<code>ï¼ˆequalsè¦çœ‹é‡å†™äº†æ²¡æœ‰ï¼Œä¸é‡å†™å°±æ˜¯==ï¼‰</code></p>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">package org.example.javaer;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author: liuxuan</span><br><span class="line"> * @date: 2022-11-24 00:45</span><br><span class="line"> **/</span><br><span class="line">/**</span><br><span class="line"> *hashCodeç›¸åŒï¼Œä¸ä¸€å®šæ˜¯åŒä¸€ä¸ªå¯¹è±¡</span><br><span class="line"> *åŒä¸€ä¸ªå¯¹è±¡çš„ï¼ŒhashCodeå€¼ä¸€å®šç›¸åŒ</span><br><span class="line"> *</span><br><span class="line"> *-------------------------------------------------------------------------------</span><br><span class="line"> *æ™®é€šå¯¹è±¡çš„HashCodeå€¼æºç è§£é‡Šï¼š</span><br><span class="line"> * equalsç›¸åŒåˆ™hashCodeä¸€å®šä¸€æ ·</span><br><span class="line"> *If two objects are equal according to the equals(Object) method, then calling</span><br><span class="line"> *the hashCode method on each of the two objects must produce the same integer result.</span><br><span class="line"> *-------------------------------------------------------------------------------</span><br><span class="line"> *equalsä¸ä¸€æ ·ï¼ŒhashCodeä¸ä¸€å®šä¸ä¸€æ ·</span><br><span class="line"> * It is not required that if two objects are unequal according to the</span><br><span class="line"> *java.lang.Object.equals(java.lang.Object) method, then calling the hashCode</span><br><span class="line"> *method on each of the two objects must produce distinct integer results.</span><br><span class="line"> *-------------------------------------------------------------------------------</span><br><span class="line"> *However, the programmer should be aware that producing distinct integer results</span><br><span class="line"> *for unequal objects may improve the performance of hash tables.</span><br><span class="line"> *-------------------------------------------------------------------------------</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class HashCodeTest &#123;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public HashCodeTest() &#123;</span><br><span class="line">        super();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public HashCodeTest(String name) &#123;</span><br><span class="line">        super();</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(&quot;--------------------æ™®é€šå¯¹è±¡-----------------------&quot;);</span><br><span class="line">        HashCodeTest test3=new HashCodeTest();</span><br><span class="line">        HashCodeTest test4=new HashCodeTest();</span><br><span class="line">        System.out.println(test3.equals(test4));//false(å› ä¸ºæ²¡é‡å†™è¿˜æ˜¯==)</span><br><span class="line">        System.out.println(test3.hashCode() == test4.hashCode());//false</span><br><span class="line"></span><br><span class="line">        HashCodeTest test1=new HashCodeTest(&quot;æˆ‘&quot;);</span><br><span class="line">        HashCodeTest test2=new HashCodeTest(&quot;æˆ‘&quot;);</span><br><span class="line">        System.out.println(test1.equals(test2));//false(å› ä¸ºæ²¡é‡å†™è¿˜æ˜¯==)</span><br><span class="line">        System.out.println(test1.hashCode() == test2.hashCode());//false</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;--------------------String-----------------------&quot;);</span><br><span class="line">        String s1=&quot;abc&quot;;</span><br><span class="line">        String s2=&quot;abc&quot;;</span><br><span class="line">        System.out.println(s1.equals(s2));//true(å› ä¸ºé‡å†™å˜å€¼æ¯”è¾ƒ)</span><br><span class="line">        System.out.println(s1.hashCode() == s2.hashCode());//true</span><br><span class="line">        System.out.println(s1==s2); //true(æ˜¯ä¸€ä¸ªå¯¹è±¡)</span><br><span class="line"></span><br><span class="line">        String s5=new String(&quot;abc&quot;);</span><br><span class="line">        String s6=new String(&quot;abc&quot;);</span><br><span class="line">        System.out.println(s5.equals(s6));//true(å› ä¸ºé‡å†™å˜å€¼æ¯”è¾ƒ)</span><br><span class="line">        System.out.println(s5.hashCode() == s6.hashCode());//true</span><br><span class="line">        System.out.println(s5==s6); //false(ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String s3=new String();</span><br><span class="line">        String s4=new String();</span><br><span class="line">        System.out.println(s3.hashCode());//0</span><br><span class="line">        System.out.println(s4.hashCode());//0</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * æ•°å€¼å‹åŸå§‹ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»(Byte,Short,Integer,Float,Double)ï¼ŒhashCodeç®—æ³•éƒ½æ˜¯åŸºäº</span><br><span class="line">         * å¯¹åº”çš„åŸå§‹æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥åªè¦åŒ…è£…ç±»çš„æ•°å€¼ç›¸åŒï¼Œé‚£ä¹ˆhashCodeå¿…ç„¶ç›¸åŒ</span><br><span class="line">         *</span><br><span class="line">         * Doubleç±»å…³äºhashCodeæºç è¯´æ˜ï¼š</span><br><span class="line">         * Doubleç±»çš„hashCodeæ˜¯æ ¹æ®å¯¹åº”çš„doubleå€¼è®¡ç®—è·å¾—çš„ã€‚</span><br><span class="line">         *</span><br><span class="line">         * Returns a hash code for a &#123;@code double&#125; value; compatible with</span><br><span class="line">         * &#123;@code Double.hashCode()&#125;.</span><br><span class="line">         *</span><br><span class="line">         * @param value the value to hash</span><br><span class="line">         * @return a hash code value for a &#123;@code double&#125; value.</span><br><span class="line">         * @since 1.8</span><br><span class="line">         */</span><br><span class="line">        /*Doubleç±»å…³äºhashCodeæºç ï¼š</span><br><span class="line">         * public static int hashCode(double value) &#123;</span><br><span class="line">            long bits = doubleToLongBits(value);</span><br><span class="line">            return (int)(bits ^ (bits &gt;&gt;&gt; 32));</span><br><span class="line">        &#125;*/</span><br><span class="line">        System.out.println(&quot;--------------------åŸå§‹ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»-----------------------&quot;);</span><br><span class="line">        Double d1=5.0;</span><br><span class="line">        Double d2=5.0;</span><br><span class="line">        System.out.println(d1.equals(d2));//true(å› ä¸ºé‡å†™å˜å€¼æ¯”è¾ƒ)</span><br><span class="line">        System.out.println(d1.hashCode() == d2.hashCode());//true</span><br><span class="line">        System.out.println(d1==d2);//false (ï¼Ÿï¼Ÿï¼Ÿä¸ºå•¥æ˜¯falseï¼Œå’ŒStringä¸ä¸€æ ·)</span><br><span class="line"></span><br><span class="line">        Double d3=new Double(5.0);</span><br><span class="line">        Double d4=new Double(5.0);</span><br><span class="line">        System.out.println(d3.equals(d4));//true(å› ä¸ºé‡å†™å˜å€¼æ¯”è¾ƒ)</span><br><span class="line">        System.out.println(d3.hashCode() == d4.hashCode());//true</span><br><span class="line">        System.out.println(d3==d4);//false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœªè§£ï¼š<code>Double d1=5.0; Double d2=5.0</code> ä¸æ˜¯å…±ç”¨ä¸€ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯<code>String s1=&quot;1&quot;; String s2=&quot;1&quot;</code>æ˜¯å…±ç”¨ã€‚</p>
<h3 id="javaå¼‚å¸¸"><a href="#javaå¼‚å¸¸" class="headerlink" title="javaå¼‚å¸¸"></a>javaå¼‚å¸¸</h3><p>èƒŒæ™¯ï¼šä»£ç ä¸­éœ€è¦æ•è·åˆ°ä¸“é—¨çš„å¼‚å¸¸è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¸å½±å“ä¸»æµç¨‹ï¼Œè¯¥ç”¨tryâ€¦catchï¼Œæ˜¯åœ¨è°ƒç”¨çš„æ—¶å€™catchï¼Œè¿˜æ˜¯åœ¨è°ƒç”¨æ–¹æ³•é‡Œcatchï¼Ÿ<br>ğŸ¤”å¦‚æœæ˜¯åªæƒ³åœ¨è¿™æ¬¡è°ƒç”¨æ—¶è¡¥è´§å¼‚å¸¸å°±åœ¨è°ƒç”¨å¤„ä½¿ç”¨ï¼Œå¦‚æœæ˜¯æƒ³æŠŠæ–¹æ³•åŒ…è£…å¥½éšæ„è°ƒç”¨ä¸å‘ç”Ÿå¼‚å¸¸å°±åœ¨æ–¹æ³•é‡Œæ•è·ã€‚ä½œç”¨æ˜¯ï¼šå‘ç”Ÿå¼‚å¸¸äº†ä¸ä¸­æ–­æµç¨‹ï¼Œåªæ˜¯æ‰“ä¸ªerror logä¹‹ç±»çš„ã€‚å¦‚æœä¸åŠ ï¼Œå°±æ˜¯è‡ªåŠ¨æŠ›å‡ºthrowså¼‚å¸¸äº†ã€‚</p>
<p>èƒŒæ™¯ï¼šé‡Œé¢æ–¹æ³•çš„å¼‚å¸¸ï¼Œå¤–é¢æ–¹æ³•èƒ½ä¸èƒ½catchåˆ°ï¼Ÿé‡Œé¢æ–¹æ³•ä¹Ÿcatchäº†ï¼Œå¤–é¢æ–¹æ³•è¿˜èƒ½ä¸èƒ½catchåˆ°ï¼Ÿ<br>ğŸ¤”é‡Œé¢æ–¹æ³•æ²¡æœ‰catchå¼‚å¸¸çš„è¯ï¼Œå¤–é¢æ–¹æ³•æ˜¯èƒ½æ•è·åˆ°çš„ï¼Œå¹¶ä¸”è¿è¡Œæ—¶å¼‚å¸¸ä¸ç”¨åœ¨é‡Œé¢çš„æ–¹æ³•ä¸ŠåŠ throwsï¼Œå¤–é¢æ–¹æ³•å°±èƒ½æ•è·åˆ°ã€‚ç¼–è¯‘æ—¶å¼‚å¸¸å¿…é¡»åšï¼šcatchä½å¤„ç†æˆ–è€…throw + throwsï¼Œæˆ–è€…ç›´æ¥throwså‡ºå»ï¼Œè¿™æ ·æ‰èƒ½åœ¨å¤–é¢æ–¹æ³•æ•è·åˆ°ã€‚å¦‚æœé‡Œé¢æ–¹æ³•æ•è·äº†å¼‚å¸¸ï¼Œä½†æ˜¯æ²¡throwå‡ºå»ï¼ˆè¿è¡Œæ—¶å¼‚å¸¸throwäº†ä¸éœ€è¦throwsï¼Œç¼–è¯‘æ—¶å¼‚å¸¸throwäº†è¿˜éœ€è¦throwsï¼‰ï¼Œå¤–é¢æ–¹æ³•å°±æ•è·ä¸åˆ°è¿™ä¸ªå¼‚å¸¸ã€‚</p>
<p>èƒŒæ™¯ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦åœ¨æ–¹æ³•ä¸Šthrowså¼‚å¸¸ï¼Œä¸€å®šè¦throwså—ï¼Ÿ<br>ğŸ¤”è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¯ä»¥ä¸åœ¨æ–¹æ³•ä¸Šthrowsï¼Œè™šæ‹Ÿæœºä¼šè‡ªåŠ¨æ•è·æŠ›å‡ºå»ã€‚ç¼–è¯‘æ—¶å¼‚å¸¸é€šå¸¸åœ¨ç¼–è¯‘æ—¶å°±è¦æ±‚throwså‡ºå»å¼‚å¸¸ï¼Œæˆ–è€…ç”¨tryâ€¦catchè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼ˆæ‰“logä¹‹ç±»ï¼‰ã€‚</p>
<p>èƒŒæ™¯ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦try..catch..throw..throws<br>ğŸ¤”é¦–å…ˆè¿è¡Œæ—¶å¼‚å¸¸å¯ä»¥ä¸throwsï¼Œå¦‚æœæ²¡æœ‰try..catchï¼Œä¼šè‡ªåŠ¨throwså‡ºå»ï¼Œæ‰€ä»¥å¦‚æœä¸æ˜¯try..catch..å¯¹ç‰¹æ®Šå¼‚å¸¸æ•è·ï¼Œæ²¡å¿…è¦try..catch..throwsã€‚ç¼–è¯‘å‹å¼‚å¸¸å¦‚æœæ˜¯try..catch..æ‰“logäº†ï¼Œå°±ä¸ç”¨throwsäº†ã€‚å¦‚æœæƒ³æŠ›å‡ºå»ï¼Œå°±ç›´æ¥throwså°±è¡Œã€‚æ‰€ä»¥ä¸éœ€è¦try..catch..throw..throwsã€‚å¦‚æœå³æƒ³ç”¨try..catch..finally..è¿˜æƒ³throwså‡ºå»ï¼Œå°±ç”¨ã€‚</p>
<h4 id="âœ…javaçš„å¼‚å¸¸ä½“ç³»"><a href="#âœ…javaçš„å¼‚å¸¸ä½“ç³»" class="headerlink" title="âœ…javaçš„å¼‚å¸¸ä½“ç³»"></a>âœ…javaçš„å¼‚å¸¸ä½“ç³»</h4><p>é¦–å…ˆExceptionå’ŒErroréƒ½æ˜¯ç»§æ‰¿äºThrowable ç±»ï¼Œåœ¨ Java ä¸­åªæœ‰ Throwable ç±»å‹çš„å®ä¾‹æ‰å¯ä»¥è¢«æŠ›å‡ºï¼ˆthrowï¼‰æˆ–è€…æ•è·ï¼ˆcatchï¼‰ï¼Œå®ƒæ˜¯å¼‚å¸¸å¤„ç†æœºåˆ¶çš„åŸºæœ¬ç»„æˆç±»å‹ã€‚</p>
<p><img src="/images/java%E5%BC%82%E5%B8%B8.png"></p>
<p>Erroræ˜¯ç¼–è¯‘æ—¶é”™è¯¯å’Œç³»ç»Ÿé”™è¯¯ï¼Œç³»ç»Ÿé”™è¯¯åœ¨é™¤ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œéƒ½ä¸éœ€è¦ä½ æ¥å…³å¿ƒï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°ã€‚è€Œç¼–è¯‘æ—¶é”™è¯¯ï¼Œå¦‚æœä½ ä½¿ç”¨äº†ç¼–è¯‘å™¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæç¤ºã€‚</p>
<p>Exceptionåˆ™æ˜¯å¯ä»¥è¢«æŠ›å‡ºçš„åŸºæœ¬ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸»è¦å…³å¿ƒçš„ä¹Ÿæ˜¯è¿™ä¸ªç±»ã€‚<br>Exceptionåˆåˆ†ä¸ºRunTimeExceptionå’Œå…¶ä»–Exceptionã€‚</p>
<p>RunTimeExceptionï¼šè¿è¡Œæ—¶å¼‚å¸¸ï¼Œåˆç§°ä¸å—æ£€æŸ¥å¼‚å¸¸ï¼Œä¸å—æ£€æŸ¥ï¼Œå› ä¸ºä¸å—æ£€æŸ¥ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­å¯èƒ½ä¼šæœ‰RunTimeExceptionæ—¶Javaç¼–è¯‘æ£€æŸ¥æ—¶ä¸ä¼šå‘Šè¯‰ä½ æœ‰è¿™ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯åœ¨å®é™…è¿è¡Œä»£ç æ—¶åˆ™ä¼šæš´éœ²å‡ºæ¥ï¼Œæ¯”å¦‚ç»å…¸çš„1/0ï¼Œç©ºæŒ‡é’ˆç­‰ã€‚å¦‚æœä¸å¤„ç†ä¹Ÿä¼šè¢«Javaè‡ªå·±å¤„ç†ã€‚</p>
<p>å…¶ä»–Exceptionï¼Œå—æ£€æŸ¥å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶å¼‚å¸¸ã€‚å¯ä»¥ç†è§£ä¸ºé”™è¯¯ï¼Œå¿…é¡»è¦å¼€å‘è€…è§£å†³ä»¥åæ‰èƒ½ç¼–è¯‘é€šè¿‡ï¼Œè§£å†³çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œ<br>1ï¼šthrowåˆ°ä¸Šå±‚ï¼Œ<br>2ï¼Œtry-catchå¤„ç†ã€‚</p>
<hr>
<p>Erroræ˜¯javaç¨‹åºè¿è¡Œä¸­ä¸å¯é¢„æ–™çš„å¼‚å¸¸æƒ…å†µï¼ˆæ­£å¸¸æƒ…å†µä¸‹ä¸å¤§å¯èƒ½å‡ºç°çš„æƒ…å†µï¼‰ï¼Œè¿™ç§å¼‚å¸¸å‘ç”Ÿä»¥åï¼Œä¼šç›´æ¥å¯¼è‡´JVMä¸å¯å¤„ç†æˆ–è€…ä¸å¯æ¢å¤çš„æƒ…å†µã€‚æ‰€ä»¥è¿™ç§å¼‚å¸¸ä¸å¯èƒ½æŠ“å–åˆ°ï¼Œæ¯”å¦‚OutOfMemoryErrorã€NoClassDefFoundErrorç­‰ã€‚ã€è¡¨ç¤ºç”±JVMæ‰€ä¾¦æµ‹åˆ°çš„æ— æ³•é¢„æœŸçš„é”™è¯¯ï¼Œç”±äºè¿™æ˜¯å±äºJVMå±‚æ¬¡çš„ä¸¥é‡é”™è¯¯ ï¼Œå¯¼è‡´JVMæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤ï¼Œè¿™æ˜¯ä¸å¯æ•æ‰åˆ°çš„ï¼Œæ— æ³•é‡‡å–ä»»ä½•æ¢å¤çš„æ“ä½œï¼Œé¡¶å¤šåªèƒ½æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚ Errorç±»ä½“ç³»æè¿°äº†Javaè¿è¡Œç³»ç»Ÿä¸­çš„å†…éƒ¨é”™è¯¯ä»¥åŠèµ„æºè€—å°½çš„æƒ…å½¢.åº”ç”¨ç¨‹åºä¸åº”è¯¥æŠ›å‡ºè¿™ç§ç±»å‹çš„å¯¹è±¡(ä¸€èˆ¬æ˜¯ç”±è™šæ‹ŸæœºæŠ›å‡º).å‡å¦‚å‡ºç°è¿™ç§é”™è¯¯,é™¤äº†å°½åŠ›ä½¿ç¨‹åºå®‰å…¨é€€å‡ºå¤–,åœ¨å…¶ä»–æ–¹é¢æ˜¯æ— èƒ½ä¸ºåŠ›çš„ã€‚ã€‘</p>
<p>Exceptionï¼š<br>1ï¼å¯ä»¥æ˜¯å¯è¢«æ§åˆ¶(checked) æˆ–ä¸å¯æ§åˆ¶çš„(unchecked)ã€‚<br>2ï¼è¡¨ç¤ºä¸€ä¸ªç”±ç¨‹åºå‘˜å¯¼è‡´çš„é”™è¯¯ã€‚<br>3ï¼åº”è¯¥åœ¨åº”ç”¨ç¨‹åºçº§è¢«å¤„ç†ã€‚<br>Errorï¼š<br>1ï¼æ€»æ˜¯ä¸å¯æ§åˆ¶çš„(unchecked)ã€‚<br>2ï¼ç»å¸¸ç”¨æ¥ç”¨äºè¡¨ç¤ºç³»ç»Ÿé”™è¯¯æˆ–ä½å±‚èµ„æºçš„é”™è¯¯ã€‚<br>3ï¼å¦‚ä½•å¯èƒ½çš„è¯ï¼Œåº”è¯¥åœ¨ç³»ç»Ÿçº§è¢«æ•æ‰ã€‚</p>
<hr>
<h4 id="âœ…å¸¸è§çš„-Error-å’Œ-Exceptionï¼š"><a href="#âœ…å¸¸è§çš„-Error-å’Œ-Exceptionï¼š" class="headerlink" title="âœ…å¸¸è§çš„ Error å’Œ Exceptionï¼š"></a>âœ…å¸¸è§çš„ Error å’Œ Exceptionï¼š</h4><p>1ï¼‰è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntimeExceptionï¼‰ä¹Ÿç§° ã€éæ£€æŸ¥å‹å¼‚å¸¸ UncheckedExceptionã€‘ï¼š</p>
<p>Nullpointer Exceptionï¼šç©ºæŒ‡é’ˆå¼‚å¸¸ï¼›<br>ClassCastExceptionï¼šç±»å‹å¼ºåˆ¶è½¬æ¢å¼‚å¸¸<br>IllegalArgumentExceptionï¼šä¼ é€’éæ³•å‚æ•°å¼‚å¸¸<br>IndexOutOfBoundsExceptionï¼šä¸‹æ ‡è¶Šç•Œå¼‚å¸¸<br>NumberFormatExceptionï¼šæ•°å­—æ ¼å¼å¼‚å¸¸<br>ArrayIndexOutOfBoundsException: æ•°ç»„è¶Šç•Œå¼‚å¸¸<br>ArrayStoreException: æ•°æ®å­˜å‚¨å¼‚å¸¸ï¼Œæ“ä½œæ•°ç»„æ—¶ç±»å‹ä¸ä¸€è‡´<br>ArithmeticExceptionï¼š (ç®—æœ¯å¼‚å¸¸)<br>BufferOverflowExceptionï¼š (ç¼“å†²åŒºæº¢å‡ºå¼‚å¸¸)</p>
<p>2ï¼‰éè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆCheckedExceptionï¼‰ä¹Ÿç§° ã€æ£€æŸ¥å‹å¼‚å¸¸ã€‘ï¼š</p>
<p>ClassNotFoundExceptionï¼šæ‰¾ä¸åˆ°æŒ‡å®š class çš„å¼‚å¸¸<br>IOExceptionï¼šIO æ“ä½œå¼‚å¸¸<br>FileNotFoundExceptionï¼šæ–‡ä»¶ä¸å­˜åœ¨å¼‚å¸¸<br>SQLExceptionï¼šSQLè¯­å¥å¼‚å¸¸<br>InterruptedExceptionï¼š (ä¸­æ–­å¼‚å¸¸-è°ƒç”¨çº¿ç¨‹ç¡çœ æ—¶å€™)</p>
<p>3ï¼‰é”™è¯¯ï¼ˆErrorï¼‰ï¼š</p>
<p>NoClassDefFoundErrorï¼šæ‰¾ä¸åˆ° class å®šä¹‰å¼‚å¸¸<br>StackOverflowErrorï¼šæ·±é€’å½’å¯¼è‡´æ ˆè¢«è€—å°½è€ŒæŠ›å‡ºçš„å¼‚å¸¸<br>OutOfMemoryErrorï¼šå†…å­˜æº¢å‡ºå¼‚å¸¸</p>
<h4 id="âœ…é‡åˆ°çš„å¼‚å¸¸è®°å½•"><a href="#âœ…é‡åˆ°çš„å¼‚å¸¸è®°å½•" class="headerlink" title="âœ…é‡åˆ°çš„å¼‚å¸¸è®°å½•"></a>âœ…é‡åˆ°çš„å¼‚å¸¸è®°å½•</h4><h4 id="ExecutionException"><a href="#ExecutionException" class="headerlink" title="ExecutionException"></a>ExecutionException</h4><p>future.get()æŠ›å‡ºçš„ï¼ŒExecutionExceptionåŒ…è£…æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æŠ›å‡ºçš„ä»»ä½•å¼‚å¸¸ã€‚æ²¡æ˜ç™½ï¼Œåº”è¯¥æ˜¯ä¸ªæ£€æŸ¥å‹å¼‚å¸¸ã€‚æ˜¯å¿…é¡»è¦ç¨‹åºå‘˜å¤„ç†çš„ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://www.orcode.com/question/618888_kb0916.html">https://www.orcode.com/question/618888_kb0916.html</a><br><a target="_blank" rel="noopener" href="https://www.mianshigee.com/question/91669mas/">https://www.mianshigee.com/question/91669mas/</a></p>
<h4 id="InterruptException"><a href="#InterruptException" class="headerlink" title="InterruptException"></a>InterruptException</h4><p>future.get()ä¼šæŠ›å‡ºï¼ŒThread.sleepä¹Ÿä¼šæŠ›å‡ºã€‚<br>å½“çº¿ç¨‹æ­£åœ¨ç­‰å¾…ã€ä¼‘çœ æˆ–ä»¥å…¶ä»–æ–¹å¼è¢«å ç”¨ï¼Œå¹¶ä¸”çº¿ç¨‹åœ¨æ´»åŠ¨ä¹‹å‰æˆ–æ´»åŠ¨æœŸé—´è¢«ä¸­æ–­æ—¶æŠ›å‡ºã€‚ æœ‰æ—¶ï¼Œæ–¹æ³•å¯èƒ½å¸Œæœ›æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç«‹å³æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚<br>æ´»åŠ¨çº¿ç¨‹çš„æ‰§è¡Œä¸­æ–­è¡Œä¸ºï¼Œå¯ä»¥æŠ›å‡ºè¿™æ ·çš„å¼‚å¸¸ã€‚<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/kevinmeanscool/article/details/123566970">https://blog.csdn.net/kevinmeanscool/article/details/123566970</a></p>
<h4 id="java-lang-NoClassDefFoundError"><a href="#java-lang-NoClassDefFoundError" class="headerlink" title="java.lang.NoClassDefFoundError"></a>java.lang.NoClassDefFoundError</h4><p>NoClassDefFoundErrorå¯èƒ½å‡ºç°çš„æƒ…å†µ<br>ç›®å‰æœ‰å‘ç°å‡ ç§æƒ…å†µ<br>1.ä¸€ç§æƒ…å†µå°±æ˜¯å› ä¸ºé™æ€å˜é‡åŠ è½½ä¸åˆ°åŸå› <br>2.å·¥ç¨‹é‡Œæ²¡æœ‰å°†jaræ·»åŠ åˆ°classpathï¼Œmavené¡¹ç›®çš„ï¼Œéœ€è¦æ ¹æ®é¡¹ç›®æƒ…å†µæ’æŸ¥</p>
<p>å®é™…åŸå› ï¼šåœ¨æŠ¥é”™çš„testç±»æ‰€åœ¨çš„åŒ…é‡Œï¼Œæ²¡æœ‰å¼•æŸä¸ªåŒ…ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°æŸç±»ã€‚<br>é¦–å…ˆç”¨ï¼š<code>mvn dependency:tree</code>ï¼ŒæŸ¥çœ‹ä¾èµ–jarçš„å…³ç³»ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªç±»çš„åŒ…æ˜¯å“ªä¸ªï¼Œå¼•ç”¨äº†æ²¡ã€‚<br>å‘ç°åœ¨çˆ¶pomé‡Œæœ‰è¿™ä¸ªåŒ…ï¼Œä½†æ˜¯åœ¨æŠ¥é”™çš„åŒ…é‡Œæ²¡æœ‰ç”¨çˆ¶pomï¼Œä¹Ÿæ²¡å¼•é‚£ä¸ªåŒ…ã€‚<br>æ‰€ä»¥ï¼Œåœ¨æŠ¥é”™çš„åŒ…çš„pomé‡Œï¼Œå¼•ç”¨é‚£ä¸ªåŒ…å°±è§£å†³ã€‚</p>
<h4 id="NoUniqueBeanDefinitionException"><a href="#NoUniqueBeanDefinitionException" class="headerlink" title="NoUniqueBeanDefinitionException"></a>NoUniqueBeanDefinitionException</h4><p>ä¸å”¯ä¸€çš„beanå®šä¹‰å¼‚å¸¸<br>æ²¡æœ‰ä¸€ä¸ªåˆé€‚çš„beanç±»å‹ï¼ˆcn.cy.bean.Toolï¼‰å¯ç”¨ï¼Œé¢„æœŸæœ‰ä¸€ä¸ªå•ç‹¬çš„åŒ¹é…çš„beanï¼Œä½†æ˜¯æ‰¾åˆ°äº†å¤šä¸ªã€‚</p>
<p>çœ‹çœ‹æ˜¯ä¸æ˜¯ä¸€ä¸ªæ¥å£æœ‰å¤šä¸ªå®ç°ç±»ï¼Œç„¶ååœ¨æŸç±»ä¸­æ³¨å…¥è¯¥æ¥å£ä¸­æ²¡æœ‰æŒ‡å®šæ³¨å…¥å“ªä¸ªã€‚</p>
<blockquote>
<p>é€šå¸¸å¦‚æœä¸€ä¸ªæ¥å£å¤šä¸ªå®ç°ç±»ï¼Œä¼šæ ¹æ®æ¡ä»¶Enumé€‰æ‹©å“ªä¸ªç±»æ‰§è¡Œçš„è¯ï¼ŒåŠ ä¸€ä¸ªServiceFacadeç±»æ¥æ ¹æ®æ¡ä»¶é€‰æ‹©ï¼Œè¿™ä¸ªç±»å®ç°Serviceæ¥å£å’ŒInitializingBeanæ¥å£ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªmap&lt;Enum, æ¥å£Service&gt;ï¼Œåœ¨ä½¿ç”¨åˆ°å®ç°ç±»çš„æ–¹æ³•ä¸­ï¼Œæ³¨å…¥ServiceFacadeå°±è¡Œã€‚</p>
</blockquote>
<p>è§£å†³æ–¹æ³•ï¼š<br>1ã€æ³¨å…¥æ¥å£çš„åœ°æ–¹ <code>@Autowired + @Qualifer(&quot;whichImpl&quot;)</code><br>2ã€æ³¨å…¥æ¥å£çš„åœ°æ–¹ <code>@Resource(name=&quot;whichImpl&quot;)</code></p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46030002/article/details/125661107">https://blog.csdn.net/weixin_46030002/article/details/125661107</a></p>
<h4 id="BeanCreationException"><a href="#BeanCreationException" class="headerlink" title="BeanCreationException"></a>BeanCreationException</h4><p>Beanåˆ›å»ºè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ã€‚å…·ä½“æœ‰ä»¥ä¸‹å‡ ç§å¸¸è§å¼‚å¸¸ï¼ŒåŒ…æ‹¬ä¸Šé¢çš„NoUniqueBeanDefinitionException ä¹Ÿæ˜¯ä¸€ç§ã€‚</p>
<p>1.org.springframework.beans.factory.NoSuchBeanDefinitionException</p>
<p>ä¸Šä¸‹æ–‡ä¸­ä¸å­˜åœ¨æ­¤Beanï¼Œä¸€èˆ¬åŸå› åœ¨æ²¡æœ‰å£°æ˜Beanï¼ŒBeanAå°è¯•æ³¨å…¥BeanBï¼Œä½†æ˜¯springä¸Šä¸‹æ–‡ä¸­ä¸å­˜åœ¨BeanBã€‚æ£€æŸ¥æ˜¯å¦ç”¨@Component @Service @Controller @Repository æ³¨å…¥äº†beanã€‚</p>
<p>2.org.springframework.beans.factory.NoUniqueBeanDefinitionException</p>
<p>å½“ä¸€ä¸ªBeanæœ‰å¤šä¸ªå®ç°ï¼Œä¾‹å¦‚BeanB1 å’ŒBeanB2éƒ½å®ç°äº†åŒä¸€ä¸ªæ¥å£ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class BeanB1 implements IBeanB &#123; ... &#125;</span><br><span class="line">@Component</span><br><span class="line">public class BeanB2 implements IBeanB &#123; ... &#125;</span><br><span class="line"> </span><br><span class="line">@Component</span><br><span class="line">public class BeanA &#123;</span><br><span class="line"> </span><br><span class="line">    @Autowired</span><br><span class="line">    private IBeanB dependency;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.org.springframework.beans.BeanInstantiationException</p>
<p>Bean å®ä¾‹åŒ–è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œå…·ä½“åŸå› éœ€è¦æŸ¥çœ‹nested exceptionåé¢æŠ¥é”™</p>
<p>3.1 Custom Exception<br>ä¸šåŠ¡è‡ªå®šä¹‰æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚ä¸‹æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸</p>
<p>3.2 java.lang.InstantiationException<br>åœ¨xmlé…ç½®ä¸­ä½¿ç”¨æŠ½è±¡ç±»å®šä¹‰bean</p>
<p>3.3 java.lang.NoSuchMethodException<br>å¦‚æœä¸€ä¸ªbeanç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼Œspringåœ¨åˆ›å»ºbeanå®ä¾‹æ—¶.</p>
<p>4.org.springframework.beans.factory.CannotLoadBeanClassException</p>
<p>å½“springåŠ è½½ä¸åˆ°beanå¯¹åº”çš„ç±»æ–‡ä»¶æ—¶ï¼Œè¿™ç§å¼‚å¸¸å°†ä¼šè¢«æŠ›å‡ºã€‚è¿™ç§æƒ…å†µå¾ˆæœ‰å¯èƒ½å‘ç”Ÿåœ¨å½“é…ç½®æ–‡ä»¶ä¸­çš„ç±»è·¯å¾„å…¨ç§°æ‰¾ä¸åˆ°å¯¹åº”æ–‡ä»¶æ—¶ã€‚</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_37578675/article/details/117075030">https://blog.csdn.net/m0_37578675/article/details/117075030</a></p>
<hr>
<h4 id="âœ…NoClassDefFoundError-å’Œ-ClassNotFoundException-çš„åŒºåˆ«ï¼š"><a href="#âœ…NoClassDefFoundError-å’Œ-ClassNotFoundException-çš„åŒºåˆ«ï¼š" class="headerlink" title="âœ…NoClassDefFoundError å’Œ ClassNotFoundException çš„åŒºåˆ«ï¼š"></a>âœ…NoClassDefFoundError å’Œ ClassNotFoundException çš„åŒºåˆ«ï¼š</h4><p>åŒºåˆ«ä¸€ï¼š<br>NoClassDefFoundErrorå®ƒæ˜¯Errorï¼Œ<br>ClassNotFoundExceptionæ˜¯Exceptionã€‚</p>
<p>åŒºåˆ«äºŒï¼š<br>NoClassDefFoundErroræ˜¯JVMè¿è¡Œæ—¶é€šè¿‡classpathåŠ è½½ç±»æ—¶ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„ç±»è€ŒæŠ›å‡ºçš„é”™è¯¯ã€‚<br>ClassNotFoundExceptionæ˜¯ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¿…é¡»å°†ClassNotFoundExceptionå¼‚å¸¸æŠ›å‡ºï¼</p>
<p>NoClassDefFoundErrorå‘ç”Ÿåœºæ™¯å¦‚ä¸‹ï¼š<br>1ã€ç±»ä¾èµ–çš„classæˆ–è€…jarä¸å­˜åœ¨ ï¼ˆç®€å•è¯´å°±æ˜¯mavenç”Ÿæˆè¿è¡ŒåŒ…åè¢«ç¯¡æ”¹ï¼‰<br>2ã€ç±»æ–‡ä»¶å­˜åœ¨ï¼Œä½†æ˜¯å­˜åœ¨ä¸åŒçš„åŸŸä¸­ ï¼ˆç®€å•è¯´å°±æ˜¯å¼•å…¥çš„ç±»ä¸åœ¨å¯¹åº”çš„åŒ…ä¸‹)<br>3ã€å¤§å°å†™é—®é¢˜ï¼Œjavacç¼–è¯‘çš„æ—¶å€™æ˜¯æ— è§†å¤§å°çš„ï¼Œå¾ˆæœ‰å¯èƒ½ä½ ç¼–è¯‘å‡ºæ¥çš„classæ–‡ä»¶å°±ä¸æƒ³è¦çš„ä¸ä¸€æ ·ï¼è¿™ä¸ªæ²¡æœ‰åšéªŒè¯ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>ClassNotFoundExceptionå‘ç”Ÿåœºæ™¯å¦‚ä¸‹ï¼š<br>1ã€è°ƒç”¨classçš„forNameæ–¹æ³•æ—¶ï¼Œæ‰¾ä¸åˆ°æŒ‡å®šçš„ç±»<br>2ã€ClassLoader ä¸­çš„ findSystemClass() æ–¹æ³•æ—¶ï¼Œæ‰¾ä¸åˆ°æŒ‡å®šçš„ç±»<br>ä¸¾ä¾‹è¯´æ˜å¦‚ä¸‹:<br>Class.forName(â€œabcâ€); æ¯”å¦‚abcè¿™ä¸ªç±»ä¸å­˜é¡¹ç›®ä¸­ï¼Œä»£ç ç¼–å†™æ—¶ï¼Œå°±ä¼šæç¤ºæ­¤å¼‚å¸¸æ˜¯æ£€æŸ¥æ€§å¼‚å¸¸ï¼Œæ¯”å¦‚å°†æ­¤å¼‚å¸¸æŠ›å‡ºã€‚</p>
<hr>
<h4 id="âœ…è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntime-exception-ä¸æ£€æŸ¥å‹å¼‚å¸¸ï¼ˆchecked-exceptionï¼‰çš„åŒºåˆ«ï¼š"><a href="#âœ…è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntime-exception-ä¸æ£€æŸ¥å‹å¼‚å¸¸ï¼ˆchecked-exceptionï¼‰çš„åŒºåˆ«ï¼š" class="headerlink" title="âœ…è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntime exception)ä¸æ£€æŸ¥å‹å¼‚å¸¸ï¼ˆchecked exceptionï¼‰çš„åŒºåˆ«ï¼š"></a>âœ…è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntime exception)ä¸æ£€æŸ¥å‹å¼‚å¸¸ï¼ˆchecked exceptionï¼‰çš„åŒºåˆ«ï¼š</h4><p>1:checked ï¼ˆæ£€æŸ¥å‹å¼‚å¸¸ï¼‰ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸é‡åˆ°çš„IOå¼‚å¸¸ï¼Œä»¥åŠSQLå¼‚å¸¸éƒ½æ˜¯è¿™ç§å¼‚å¸¸ã€‚ç¼–è¯‘å™¨è¦æ£€æŸ¥è¿™ç±»å¼‚å¸¸ï¼Œæ£€æŸ¥çš„ç›®çš„ä¸€æ–¹é¢æ˜¯å› ä¸ºè¯¥ç±»å¼‚å¸¸çš„å‘ç”Ÿéš¾ä»¥é¿å…ï¼Œ<br>å¦ä¸€æ–¹é¢å°±æ˜¯è®©å¼€å‘è€…å»è§£å†³æ‰è¿™ç±»å¼‚å¸¸ï¼Œæ‰€ä»¥ç§°ä¸ºå¿…é¡»å¤„ç†ï¼ˆtry â€¦catchï¼‰çš„å¼‚å¸¸ã€‚å¦‚æœä¸å¤„ç†è¿™ç±»å¼‚å¸¸ï¼Œé›†æˆå¼€å‘ç¯å¢ƒä¸­çš„ç¼–è¯‘å™¨ä¸€èˆ¬ä¼šç»™å‡ºé”™è¯¯æç¤ºã€‚</p>
<p>å¦‚æœä¸€ä¸ªæ–¹æ³•æ²¡æœ‰æ•è·ä¸€ä¸ªæ£€æŸ¥æ€§å¼‚å¸¸ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å¿…é¡»ä½¿ç”¨ throws å…³é”®å­—æ¥å£°æ˜ã€‚throws å…³é”®å­—æ”¾åœ¨æ–¹æ³•åçš„åè¾¹ï¼Œeg:  æ–¹æ³•åï¼ˆï¼‰ throws  IOExecptionã€‚</p>
<p>ç†è§£ï¼šæ£€æŸ¥å‹å¼‚å¸¸ï¼Œè¦ä¹ˆï¼štryâ€¦ catch.. æ‰“logï¼Œè¦ä¹ˆï¼štry..catch..throw..throwsï¼ˆå¤šæ­¤ä¸€ä¸¾ï¼Œæ²¡å¿…è¦ï¼‰ï¼Œè¦ä¹ˆåªæ˜¯throwsã€‚</p>
<p>2:runtime exceptionï¼ˆè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ï¼Œç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿™ç±»å¼‚å¸¸ï¼Œä¸æ£€æŸ¥çš„åˆ™å¼€å‘è€…åœ¨ä»£ç çš„ç¼–è¾‘ç¼–è¯‘é˜¶æ®µå°±ä¸æ˜¯å¿…é¡»å¤„ç†ï¼Œè¿™ç±»å¼‚å¸¸ä¸€èˆ¬å¯ä»¥é¿å…ï¼Œå› æ­¤æ— éœ€å¤„ç†ï¼ˆtry â€¦catchï¼‰,ä¼šç›´æ¥throwså‡ºå»ï¼Œå¦‚æœä¸æƒ³throwså‡ºå»ï¼Œå°±try catch æ‰“logã€‚<br>å¦‚æœä¸å¤„ç†è¿™ç±»å¼‚å¸¸ï¼Œé›†æˆå¼€å‘ç¯å¢ƒä¸­çš„ç¼–è¯‘å™¨ä¹Ÿä¸ä¼šç»™å‡ºé”™è¯¯æç¤ºã€‚  å½“å‡ºç°è¿™æ ·çš„å¼‚å¸¸æ—¶ï¼Œæ€»æ˜¯ç”±è™šæ‹Ÿæœºæ¥ç®¡ã€‚</p>
<p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/liangbaolong/p/12884224.html">https://www.cnblogs.com/liangbaolong/p/12884224.html</a></p>
<hr>
<h4 id="âœ…å¤šå¼‚å¸¸æ•è·ï¼š"><a href="#âœ…å¤šå¼‚å¸¸æ•è·ï¼š" class="headerlink" title="âœ…å¤šå¼‚å¸¸æ•è·ï¼š"></a>âœ…å¤šå¼‚å¸¸æ•è·ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line"></span><br><span class="line">&#125; catch(NullPointerException | IOException e) &#123;</span><br><span class="line">    //log.error(e);</span><br><span class="line"></span><br><span class="line">&#125; catch(Exception e) &#123;</span><br><span class="line">    //log.error(e);</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">    //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>| ç¬¦åˆ å¯ä»¥ å†™å¤šä¸ªï¼Œç¬¦åˆå…¶ä¸­ä¹‹ä¸€ã€‚<br>æ³¨æ„è¦æŠŠå¼‚å¸¸èŒƒå›´å°çš„æ”¾åœ¨å‰é¢ï¼ŒèŒƒå›´å¤§çš„æ”¾åœ¨åé¢ã€‚<br>âš ï¸æ³¨æ„åœ¨tryå†…returnæˆ–è€…breakäº†ï¼Œfinallyä¹Ÿä¼šæ‰§è¡Œçš„ã€‚</p>
<h4 id="catch-Exeception-e-å’Œcatch-Throwable-e"><a href="#catch-Exeception-e-å’Œcatch-Throwable-e" class="headerlink" title="catch(Exeception e)å’Œcatch(Throwable e)"></a>catch(Exeception e)å’Œcatch(Throwable e)</h4><p>Throwableå¯ä»¥æ•è·Errorå’ŒExceptionä¸¤å¤§ç±»çš„å¼‚å¸¸ï¼Œå…¶ä¸­Erroræ˜¯æ¯”è¾ƒä¸¥é‡ä¸å¯æ§çš„å¼‚å¸¸ã€‚è€ŒExceptionæ˜¯å¯ä»¥è¢«ç¼–ç¨‹å¤„ç†çš„å¼‚å¸¸ã€‚<br>Exceptionåªèƒ½æ•è·RuntimeExceptionå’ŒIOExceptionã€‚</p>
<p>å›é¡¾ä¸€ä¸‹javaçš„å¼‚å¸¸ä½“ç³»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Throwable: Javaä¸­æ‰€æœ‰å¼‚å¸¸å’Œé”™è¯¯ç±»çš„çˆ¶ç±»ã€‚åªæœ‰è¿™ä¸ªç±»çš„å®ä¾‹ï¼ˆæˆ–è€…å­ç±»çš„å®ä¾‹ï¼‰å¯ä»¥è¢«è™šæ‹ŸæœºæŠ›å‡ºæˆ–è€…è¢«javaçš„throwå…³é”®å­—æŠ›å‡ºã€‚åŒæ ·ï¼Œåªæœ‰å…¶æˆ–å…¶å­ç±»å¯ä»¥å‡ºç°åœ¨catchå­å¥é‡Œé¢ã€‚</span><br><span class="line">Error: Throwableçš„å­ç±»ï¼Œè¡¨ç¤ºä¸¥é‡çš„é—®é¢˜å‘ç”Ÿäº†ï¼Œè€Œä¸”è¿™ç§é”™è¯¯æ˜¯ä¸å¯æ¢å¤çš„ã€‚</span><br><span class="line">Exception: Throwableçš„å­ç±»ï¼Œåº”ç”¨ç¨‹åºåº”è¯¥è¦æ•è·å…¶æˆ–å…¶å­ç±»ï¼ˆRuntimeExceptionä¾‹å¤–ï¼‰ï¼Œç§°ä¸ºchecked exceptionã€‚æ¯”å¦‚ï¼šIOException, NoSuchMethodException...</span><br><span class="line">RuntimeException: Exceptionçš„å­ç±»ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¨‹åºå¯ä»¥ä¸æ•è·ï¼Œç§°ä¸ºunchecked exceptionã€‚æ¯”å¦‚ï¼šNullPointException.</span><br></pre></td></tr></table></figure>

<p>â“åº”è¯¥catch (Throwable th) è¿˜æ˜¯ catch (Exception)?</p>
<p>è¿™ä¸¤ç§å¤„ç†çš„åŒºåˆ«åœ¨äºï¼Œcatch throwableä¼šæŠŠErrorå’Œå…¶ä»–ç»§æ‰¿Throwableçš„ç±»æ•æ‰åˆ°ã€‚è€Œcatch Exceptionåªä¼šæ•æ‰Exceptionæå…¶å­ç±»ï¼Œæ•æ‰çš„èŒƒå›´æ›´å°ã€‚ç¬¬ä¸€ç§catchç›¸å½“äºæ¯”ç¬¬äºŒç§catchå¤šæ•æ‰äº†æŠŠErrorå’Œå…¶å­ç±»ã€‚</p>
<p>â“Erroræ˜¯å¦éœ€è¦æ•æ‰?</p>
<p>JDKä¸­Errorç±»çš„çš„æ³¨é‡Šé‡Œæåˆ°è¿‡ï¼ŒErroræ˜¯ä¸€ç§ä¸¥é‡çš„é—®é¢˜ï¼Œåº”ç”¨ç¨‹åºä¸åº”è¯¥æ•æ‰å®ƒã€‚<br>Errorç»§æ‰¿è‡ªThrowableè€Œä¸æ˜¯ç»§æ‰¿è‡ªExceptionï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿ç¨‹åºå¯ä»¥ä½¿ç”¨ â€œcatch (Exception)â€æ¥æ•æ‰å¼‚å¸¸è€Œä¸ä¼šæŠŠErrorä¹Ÿæ•æ‰åœ¨å†…ï¼Œå› ä¸ºExceptionå‘ç”Ÿåå¯ä»¥è¿›è¡Œä¸€äº›æ¢å¤å·¥ä½œçš„ï¼Œä½†æ˜¯Errorå‘ç”Ÿåä¸€èˆ¬æ˜¯ä¸å¯æ¢å¤çš„ã€‚</p>
<p>â“Errorå¯ä»¥catchå—ï¼Ÿ å¯ä»¥catchäº†ååšäº›å…¶ä»–å¤„ç†å—ï¼Ÿ</p>
<p>Erroræ˜¯å¯ä»¥catchçš„ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥å‘å¸¸è§„Exceptionä¸€æ ·è¢«å¤„ç†ï¼Œè€Œä¸”å°±ç®—ä¸æ•æ‰çš„è¯ä¹Ÿåªæ˜¯å¯¼è‡´å½“å‰çº¿ç¨‹æŒ‚æ‰ï¼Œå…¶ä»–çº¿ç¨‹è¿˜æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯æ•æ‰Errorä¹‹åä¹Ÿå¯ä»¥åšäº›å…¶ä»–å¤„ç†ã€‚ä½†æ˜¯Erroræ˜¯ä¸€ç§ç³»ç»Ÿå†…éƒ¨çš„é”™è¯¯ï¼Œè¿™ç§é”™è¯¯ä¸åƒExceptionä¸€æ ·æ˜¯å¯èƒ½æ˜¯ç¨‹åºå’Œä¸šåŠ¡ä¸Šçš„é”™è¯¯æ˜¯å¯ä»¥æ¢å¤çš„ã€‚</p>
<p>å‡è®¾è¿›è¡Œç½‘ç»œè¿æ¥æ“ä½œçš„æ—¶å€™ï¼ŒIOException å‘ç”Ÿäº†ï¼Œå¯èƒ½æ˜¯ç½‘ç»œä¸­æ–­ï¼Œæˆ‘å¯ä»¥å†å°è¯•å‡ æ¬¡ã€‚</p>
<p>å‡è®¾OutOfMemoryErrorå‘ç”Ÿäº†ï¼Œå°±ç®—è¢«æ•æ‰äº†ï¼Œå¯ä»¥æœ‰ä»€ä¹ˆæ‰‹æ®µè®©ç¨‹åºæ­£å¸¸è¿è¡Œä¸‹å»å—ï¼Ÿ å‡è®¾ExceptionInInitializerErrorå‘ç”Ÿäº†ï¼Œç±»æ— æ³•è¢«æ­£å¸¸åˆå§‹åŒ–ï¼Œè¿™ä¸ªæ˜¯å¯ä»¥é€šè¿‡æ•æ‰æ¥æ¢å¤çš„å—ï¼Ÿ</p>
<p>ğŸ‘Œç»“è®ºï¼šJavaæœ¬èº«è®¾è®¡æ€è·¯å°±æ˜¯å¸Œæœ›å¤§å®¶catch Exceptionå°±è¶³å¤Ÿäº†ï¼Œå¦‚æœæœ‰Errorå‘ç”Ÿï¼Œcatchäº†ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆä½œç”¨</p>
<p>è½¬è‡ªï¼šå¦‚ä½•å¤„ç†å¼‚å¸¸? catch Exception OR catch Throwable<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/smile361/p/5521278.html">https://www.cnblogs.com/smile361/p/5521278.html</a></p>
<p>ä¸¾ä¸€ä¸ªç”¨<code>catch (Throwable e)</code>çš„ä¾‹å­ï¼š<br>ç›®çš„æ˜¯ç¡®ä¿å¼‚å¸¸è¢«æ‰“å°ï¼Œä¸€ä¸ªæ— çº¿é€’å½’ï¼Œå¯¼è‡´çš„StackOverflowError</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">public class Throwable_demo &#123;</span><br><span class="line">    static void generate_throwable() &#123;</span><br><span class="line">        generate_throwable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //æ­¤ç§æƒ…å½¢ä¸‹æˆ‘ä»¬è¦catch Throwable, ä»¥ç¡®ä¿å¼‚å¸¸è¢«æ‰“å°...</span><br><span class="line">        try &#123;</span><br><span class="line">            final int[] times = &#123; 0 &#125;;</span><br><span class="line">            Thread thread1 = new Thread(new Runnable() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void run() &#123;</span><br><span class="line">                    while (true) &#123;</span><br><span class="line">                        ++times[0];</span><br><span class="line">                        System.out.println(times[0]);</span><br><span class="line">                        try &#123;</span><br><span class="line">                            Thread.sleep(10);</span><br><span class="line">                        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            thread1.start();</span><br><span class="line">            generate_throwable();</span><br><span class="line">        &#125; catch (Throwable e) &#123;</span><br><span class="line">            //è‹¥catchçš„æ˜¯Exceptionï¼š</span><br><span class="line">            //å› finallyä¸­çš„exitæŒ‡ä»¤ï¼Œåœ¨æ‰“å°å¼‚å¸¸å‰ç¨‹åºå°±ä¼šç»ˆæ­¢ã€‚</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            System.out.println(&quot;end.&quot;);</span><br><span class="line">            //å¦‚æœä¸exit: å›  thread1 æœªåœæ­¢ï¼Œç¨‹åºä¸ä¼šç»ˆæ­¢ã€‚</span><br><span class="line">            System.exit(0);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…é¡¹ç›®ä¸­çš„è‡ªå®šä¹‰å¼‚å¸¸"><a href="#âœ…é¡¹ç›®ä¸­çš„è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="âœ…é¡¹ç›®ä¸­çš„è‡ªå®šä¹‰å¼‚å¸¸"></a>âœ…é¡¹ç›®ä¸­çš„è‡ªå®šä¹‰å¼‚å¸¸</h4><p>ç»§æ‰¿RuntimeExceptionæ‰©å±•ä¸€ä¸ªæ–°çš„å¼‚å¸¸ä½œä¸ºæ•´ä¸ªç±»åº“çš„å¼‚å¸¸åŸºç±»ã€‚<br>é‡Œé¢å®šä¹‰å¼‚å¸¸ç¼–ç å•¥çš„ã€‚</p>
<p>å¦‚æœéœ€è¦æ ¹æ®å¼‚å¸¸è¿›è¡Œä¸åŒçš„å¤„ç†ï¼Œå»ºè®®ç»™è‡ªå®šä¹‰å¼‚å¸¸å¢åŠ ä¸€ä¸ªERROR_CODEå­—æ®µï¼Œè¿™æ ·æ— è®ºåœ¨æœåŠ¡å™¨è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½å¯ä»¥æ ¹æ®ä¸åŒçš„ERROR_CODEè¿›è¡Œå¯¹åº”çš„å¤„ç†ã€‚ä½†æ˜¯å‡ºç°è¿™ç§æƒ…å†µçš„æ—¶å€™ï¼Œåº”è¯¥éœ€è¦è€ƒè™‘ä¸€ä¸‹è®¾è®¡æ€è·¯äº†ï¼Œä¸€èˆ¬æ¥è®²æ ¹æ®å¼‚å¸¸æ¥å†³å®šä¸šåŠ¡æµç¨‹ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡æ–¹æ¡ˆã€‚</p>
<h4 id="âœ…e-getMeasage-å’Œe-toString"><a href="#âœ…e-getMeasage-å’Œe-toString" class="headerlink" title="âœ…e.getMeasage()å’Œe.toString()"></a>âœ…e.getMeasage()å’Œe.toString()</h4><p>e.getMeasage()è¿”å›å¼‚å¸¸çš„ç®€çŸ­æè¿°ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚<br>e.toString()è¿”å›å¼‚å¸¸çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¼‚å¸¸ç±»å‹å’Œå¼‚å¸¸æ¶ˆæ¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç©ºæŒ‡é’ˆï¼š</span><br><span class="line">message:null</span><br><span class="line">toString:java.lang.NullPointerException</span><br></pre></td></tr></table></figure>

<h3 id="ArrayListçº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#ArrayListçº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="ArrayListçº¿ç¨‹å®‰å…¨é—®é¢˜"></a>ArrayListçº¿ç¨‹å®‰å…¨é—®é¢˜</h3><p>ArrayList æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„é›†åˆç±»ï¼Œå½“å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¹¶å‘å¯¹åŒä¸€ä¸ªArrayListæ‰§è¡Œaddï¼Œå¯èƒ½ä¼šä¸¢æ•°æ®ã€‚å¦‚æœå¤šçº¿ç¨‹åˆæ˜¯addï¼Œåˆæ˜¯è¾“å‡ºlistï¼Œä¼šå‘ç”Ÿå¹¶å‘é”™è¯¯ã€‚</p>
<p>âš ï¸ä¸ºä»€ä¹ˆè¯´å¯èƒ½å‘¢ï¼Œå› ä¸ºæœ‰æ—¶å€™addå¾—å¤ªå¿«ï¼Œå°±æ²¡å‡ºé—®é¢˜ã€‚</p>
<blockquote>
<p>ConcurrentModificationException: å¹¶å‘ä¿®æ”¹å¼‚å¸¸<br>    ä½¿ç”¨è¿­ä»£å™¨å¾ªç¯ï¼Œåœ¨å¾ªç¯ä¸­ç”¨ArrayListçš„add/removeæ–¹æ³•ä¼šå‡ºç°è¯¥å¼‚å¸¸ã€‚åŸå› åŠè§£å†³æ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013168615/article/details/116570591">https://blog.csdn.net/u013168615/article/details/116570591</a></p>
</blockquote>
<hr>
<p>å¤šçº¿ç¨‹å¯¹Listè¿›è¡Œaddåˆéå†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test4() throws InterruptedException &#123;</span><br><span class="line">    List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">    for (int i = 1; i &lt;= 30; i++)&#123;</span><br><span class="line">        new Thread(() -&gt; &#123;</span><br><span class="line">            list.add(UUID.randomUUID().toString().substring(0, 8));</span><br><span class="line">            System.out.println(list);</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;;</span><br><span class="line">    Thread.sleep(60 * 1000);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼‚å¸¸ï¼šException in thread â€œThread-0â€ java.util.ConcurrentModificationException</p>
<h4 id="âœ…ArrayListä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨"><a href="#âœ…ArrayListä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨" class="headerlink" title="âœ…ArrayListä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨"></a>âœ…ArrayListä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨</h4><p>å¤šçº¿ç¨‹å¯¹ArrayListè¿›è¡Œaddæœ‰å¯èƒ½ä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚ä¹Ÿæœ‰å¯èƒ½ä¼šé€ æˆæ•°ç»„è¶Šç•Œã€‚</p>
<blockquote>
<p>çº¿ç¨‹å®‰å…¨ï¼šæŒ‡å½“å¤šçº¿ç¨‹è®¿é—®æ—¶ï¼Œé‡‡ç”¨äº†åŠ é”çš„æœºåˆ¶ï¼›å³å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥ç±»çš„æŸä¸ªæ•°æ®æ—¶ï¼Œä¼šå¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œä¿æŠ¤ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¯¹å…¶è®¿é—®ï¼Œç›´åˆ°è¯¥çº¿ç¨‹è¯»å–å®Œä¹‹åï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥ä½¿ç”¨ã€‚é˜²æ­¢å‡ºç°æ•°æ®ä¸ä¸€è‡´æˆ–è€…æ•°æ®è¢«æ±¡æŸ“ç­‰æ„å¤–æƒ…å†µã€‚</p>
<p>çº¿ç¨‹ä¸å®‰å…¨ï¼šå°±æ˜¯ä¸æä¾›æ•°æ®è®¿é—®æ—¶çš„æ•°æ®ä¿æŠ¤ï¼Œå¤šä¸ªçº¿ç¨‹èƒ½å¤ŸåŒæ—¶æ“ä½œæŸä¸ªæ•°æ®ï¼Œä»è€Œå‡ºç°æ•°æ®ä¸ä¸€è‡´æˆ–è€…æ•°æ®æ±¡æŸ“ç­‰æ„å¤–æƒ…å†µã€‚</p>
</blockquote>
<p>æºç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span><br><span class="line"> implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable &#123;</span><br><span class="line">    /**</span><br><span class="line">    * åˆ—è¡¨å…ƒç´ é›†åˆæ•°ç»„å¦‚æœæ–°å»ºArrayListå¯¹è±¡æ—¶æ²¡æœ‰æŒ‡å®šå¤§å°ï¼Œé‚£ä¹ˆä¼šå°† </span><br><span class="line">    * EMPTY_ELEMENTDATAèµ‹å€¼ç»™elementDataï¼Œ</span><br><span class="line">    * å¹¶åœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ æ—¶ï¼Œå°†åˆ—è¡¨å®¹é‡è®¾ç½®ä¸ºDEFAULT_CAPACITY </span><br><span class="line">    */</span><br><span class="line">    transient Object[] elementData; </span><br><span class="line">    // åˆ—è¡¨å¤§å°ï¼ŒelementDataä¸­å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°</span><br><span class="line">    private int size;</span><br><span class="line"></span><br><span class="line">    public boolean add(E e) &#123;</span><br><span class="line">    ensureCapacityInternal(size + 1); // Increments modCount!!</span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ArrayList çš„å®ç°ä¸»è¦å°±æ˜¯ï¼š<br>1ï¸âƒ£ç”¨äº†ä¸€ä¸ª Object çš„æ•°ç»„ï¼Œç”¨æ¥ä¿å­˜æ‰€æœ‰çš„å…ƒç´ ï¼›<br>2ï¸âƒ£ä¸€ä¸ª size å˜é‡ç”¨æ¥ä¿å­˜å½“å‰æ•°ç»„ä¸­å·²ç»æ·»åŠ äº†å¤šå°‘å…ƒç´ ã€‚</p>
<p>ensureCapacityInternal() çš„ä½œç”¨å°±æ˜¯å¦‚æœå°†å½“å‰çš„æ–°å…ƒç´ åŠ åˆ°åˆ—è¡¨åé¢ï¼Œåˆ¤æ–­åˆ—è¡¨çš„ elementData æ•°ç»„çš„å¤§å°æ˜¯å¦æ»¡è¶³ã€‚å¦‚æœ size + 1 çš„è¿™ä¸ªéœ€æ±‚é•¿åº¦å¤§äº elementData è¿™ä¸ªæ•°ç»„çš„é•¿åº¦ï¼Œé‚£ä¹ˆå°±è¦å¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œæ‰©å®¹ã€‚ç”±æ­¤çœ‹åˆ° add å…ƒç´ æ—¶ï¼Œå®é™…æœ‰ä¸¤ä¸ªå¤§çš„æ­¥éª¤ï¼š<br>1ï¸âƒ£åˆ¤æ–­ elementData æ•°ç»„ capacity å®¹é‡æ˜¯å¦æ»¡è¶³éœ€æ±‚ï¼Œæ˜¯å¦éœ€è¦æ‰©å®¹ã€‚<br>2ï¸âƒ£åœ¨ elementData å¯¹åº”ä½ç½®ä¸Šè®¾ç½®å€¼ã€‚<br><code>è¿™æ ·å°±å‡ºç°äº†ç¬¬ä¸€ä¸ªå¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨çš„éšæ‚£ï¼Œåœ¨å¤šä¸ªçº¿ç¨‹è¿›è¡Œ add æ“ä½œæ—¶å¯èƒ½ä¼šå¯¼è‡´ elementData æ•°ç»„è¶Šç•Œã€‚</code></p>
<hr>
<p>ä¸ºä»€ä¹ˆä¼šæ•°ç»„è¶Šç•ŒArrayIndexOutOfBoundsExceptionï¼Ÿ</p>
<p>ArrayList é»˜è®¤æ•°ç»„å¤§å°ä¸º 10ã€‚å‡è®¾ç°åœ¨å·²ç»æ·»åŠ è¿›å» 9 ä¸ªå…ƒç´ äº†ï¼Œsize = 9ã€‚</p>
<p>1ã€çº¿ç¨‹ A æ‰§è¡Œå®Œ add æ–¹æ³•ä¸­çš„ ensureCapacityInternal(size+1) æŒ‚èµ·äº†ã€‚<br>2ã€çº¿ç¨‹ B å¼€å§‹æ‰§è¡Œï¼Œæ ¡éªŒæ•°ç»„å®¹é‡å‘ç°ä¸éœ€è¦æ‰©å®¹ã€‚äºæ˜¯æŠŠ â€œbâ€ æ”¾åœ¨äº†ä¸‹æ ‡ä¸º 9 çš„ä½ç½®ï¼Œä¸” size è‡ªå¢ 1ã€‚æ­¤æ—¶ size = 10ã€‚<br>3ã€çº¿ç¨‹ A æ¥ç€æ‰§è¡Œï¼Œå°è¯•æŠŠ â€œaâ€ æ”¾åœ¨ä¸‹æ ‡ä¸º 10 çš„ä½ç½®ï¼Œå› ä¸º size = 10ã€‚ä½†å› ä¸ºæ•°ç»„è¿˜æ²¡æœ‰æ‰©å®¹ï¼Œæœ€å¤§çš„ä¸‹æ ‡æ‰ä¸º 9ï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºæ•°ç»„è¶Šç•Œå¼‚å¸¸ArrayIndexOutOfBoundsExceptionã€‚</p>
<hr>
<p>ä¸ºä»€ä¹ˆä¼šæ•°æ®ä¸¢å¤±ï¼Ÿ</p>
<p>ArrayListçº¿ç¨‹ä¸å®‰å…¨ï¼Œå½“ä¸€æ¡çº¿ç¨‹æ‰§è¡Œlist.add()çš„æ—¶å€™ä¼šå‡ºç°è¢«å¦ä¸€æ¡çº¿ç¨‹çš„å€¼è¦†ç›–ï¼Œæ¯”å¦‚çº¿ç¨‹Aå¯¹listè¿›è¡Œaddï¼Œæºå¸¦çš„sizeæ˜¯nï¼ŒåŒæ—¶çº¿ç¨‹Bä¹Ÿè¿›è¡Œaddæ“ä½œï¼Œæºå¸¦çš„sizeä¹Ÿæ˜¯nï¼Œæ‰€ä»¥ArrayListæ²¡æœ‰è¾¾åˆ°æ‰©å®¹çš„æ¡ä»¶ï¼ŒAçš„å€¼åº”è¯¥æ”¾åœ¨ArrayListçš„ç¬¬nä½ï¼Œä½†æ˜¯Bçš„å€¼ä¹Ÿå°†æ”¾åœ¨ç¬¬nä½ï¼Œè¦†ç›–äº†Açš„å€¼ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p>
<p>æºç ï¼š<br>ç¬¬äºŒæ­¥ elementData[size++] = e è®¾ç½®å€¼çš„æ“ä½œåŒæ ·ä¼šå¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨ã€‚ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œè¿™æ­¥æ“ä½œä¹Ÿä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œå®ƒç”±å¦‚ä¸‹ä¸¤æ­¥æ“ä½œæ„æˆï¼š<br>elementData[size] = e;<br>size = size + 1;</p>
<p>ArrayList ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/ChineseSoftware/article/details/117047757">https://blog.csdn.net/ChineseSoftware/article/details/117047757</a></p>
<hr>
<p>ArrayListçš„æ‰€æœ‰æ–¹æ³•éƒ½æ²¡æœ‰åŠ Lockï¼Œä¹Ÿæ²¡æœ‰åŠ synchronizedï¼Œå› æ­¤åœ¨å¹¶å‘æ“ä½œä¸‹ï¼Œæ‰©å®¹å‡½æ•°grow()ä¼šå­˜åœ¨é—®é¢˜ã€‚</p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š<br>elementDataæ•°ç»„åˆšåˆšæ·»åŠ äº†æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åˆšå¥½æ»¡å‘˜äº†<br>è¿™æ—¶2ä¸ªçº¿ç¨‹åŒæ—¶åˆè°ƒç”¨äº†addï¼Œé‚£ä¹ˆå°±å¿…é¡»è¦æ‰§è¡Œgrowè¿›è¡Œæ‰©å®¹<br>ç¬¬1ä¸ªçº¿ç¨‹è°ƒç”¨å®Œgrow()ï¼Œç„¶åä¹Ÿè°ƒç”¨äº†elementData[size++] = eï¼ŒæŠŠæ–°å…ƒç´ æ·»åŠ ä¸Šå»<br>ç¬¬2ä¸ªçº¿ç¨‹åˆè°ƒç”¨ä¸€æ¬¡grow()ï¼Œæ•´ä¸ªelementDataæ•°ç»„å°±ä¹±æ‰äº†ã€‚</p>
<h4 id="âœ…å¤šçº¿ç¨‹æƒ…å†µä¸‹è¯¥ç”¨ä»€ä¹ˆï¼š"><a href="#âœ…å¤šçº¿ç¨‹æƒ…å†µä¸‹è¯¥ç”¨ä»€ä¹ˆï¼š" class="headerlink" title="âœ…å¤šçº¿ç¨‹æƒ…å†µä¸‹è¯¥ç”¨ä»€ä¹ˆï¼š"></a>âœ…å¤šçº¿ç¨‹æƒ…å†µä¸‹è¯¥ç”¨ä»€ä¹ˆï¼š</h4><p>1ã€ä½¿ç”¨ Vector åˆå§‹åŒ– list å¯¹è±¡ï¼Œæ•ˆç‡ä½<br><code>List&lt;String&gt; list = new Vector&lt;&gt;();</code><br>Vector.addä½¿ç”¨äº†synchronizedåŠ é”<br>è½¬æ¢æˆArrayListï¼š<br><code>List&lt;String&gt; newList = new ArrayList&lt;String&gt;(vector);</code></p>
<p>2ã€ä½¿ç”¨ Collections.synchronizedList<br><code>List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;());</code><br><code>List&lt;String&gt; list = Collections.synchronizedList(Lists.newArrayList());</code><br>addæ–¹æ³•åŒæ ·åŠ äº† synchronized é”ã€‚</p>
<p>3ã€ä½¿ç”¨ CopyOnWriteArrayList<br><code>List&lt;String&gt; list = new CopyOnWriteArrayList&lt;&gt;();</code></p>
<p>å†™æ—¶å¤åˆ¶ï¼Œå³å‘ä¸€ä¸ªå®¹å™¨æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç›´æ¥å‘å½“å‰å®¹å™¨æ·»åŠ ï¼Œè€Œæ˜¯å°†å½“å‰å®¹å™¨è¿›è¡Œå¤åˆ¶ï¼Œç„¶åå‘æ–°å®¹å™¨è¿›è¡Œæ·»åŠ æ“ä½œï¼Œæœ€åå°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°çš„å®¹å™¨ã€‚</p>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯å…è®¸å¹¶å‘çš„è¯»è€Œä¸éœ€è¦åŠ é”ï¼ˆå› ä¸ºå®¹å™¨å†…å…ƒç´ æœªå‘ç”Ÿå˜åŒ–ï¼‰ï¼Œæå‡æ•ˆç‡ï¼Œä»…å†™æ—¶ä¸Šé”ï¼Œè¯»å’Œå†™å†ä¸åŒçš„å®¹å™¨ä¸­ï¼Œä½“ç°äº†è¯»å†™åˆ†ç¦»çš„æ€æƒ³ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public boolean add(E e) &#123;</span><br><span class="line">    final ReentrantLock lock = this.lock;</span><br><span class="line">    lock.lock();</span><br><span class="line">    try &#123;</span><br><span class="line">        Object[] elements = getArray();</span><br><span class="line">        int len = elements.length;</span><br><span class="line">        Object[] newElements = Arrays.copyOf(elements, len + 1);</span><br><span class="line">        newElements[len] = e;</span><br><span class="line">        setArray(newElements);</span><br><span class="line">        return true;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/fhblikesky/p/13692641.html">https://www.cnblogs.com/fhblikesky/p/13692641.html</a></p>
<h4 id="âœ…listçš„ConcurrentModificationExceptioné—®é¢˜"><a href="#âœ…listçš„ConcurrentModificationExceptioné—®é¢˜" class="headerlink" title="âœ…listçš„ConcurrentModificationExceptioné—®é¢˜"></a>âœ…listçš„ConcurrentModificationExceptioné—®é¢˜</h4><p>é™¤äº†å¤šçº¿ç¨‹ä¿®æ”¹ArrayListçš„æ“ä½œä¼šé€ æˆè¯¥é—®é¢˜ä¹‹å¤–ï¼Œåœ¨è¿­ä»£å™¨ä¸­ç”¨list.addæˆ–list.removeå»æ·»åŠ åˆ é™¤listå…ƒç´ ï¼Œä¹Ÿä¼šé€ æˆã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Iterator it = myList.iterator();</span><br><span class="line">while (it.hasNext()) &#123;</span><br><span class="line">    String value = it.next();</span><br><span class="line">        if (value.equals( &quot;3&quot;)) &#123;</span><br><span class="line">            myList.remove(value);  // error</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for (Iterator it = myList.iterator(); it.hasNext();) &#123;</span><br><span class="line">    String value = it.next();</span><br><span class="line">        if (value.equals( &quot;3&quot;)) &#123;</span><br><span class="line">            myList.remove(value);  // error</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for (String value : myList) &#123;</span><br><span class="line">    System. out.println( &quot;List Value:&quot; + value);</span><br><span class="line">        if (value.equals( &quot;3&quot;)) &#123;</span><br><span class="line">            myList.remove(value);  // error</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<p>åŸå› çœ‹æºç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">private class Itr implements Iterator&lt;E&gt; &#123;</span><br><span class="line">    int cursor;       // index of next element to return</span><br><span class="line">    int lastRet = -1; // index of last element returned; -1 if no such</span><br><span class="line">    int expectedModCount = modCount;</span><br><span class="line">    </span><br><span class="line">    public boolean hasNext() &#123;</span><br><span class="line">        return cursor != size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">    public E next() &#123;</span><br><span class="line">        checkForComodification();</span><br><span class="line">        int i = cursor;</span><br><span class="line">        if (i &gt;= size)</span><br><span class="line">            throw new NoSuchElementException();</span><br><span class="line">        Object[] elementData = ArrayList.this.elementData;</span><br><span class="line">        if (i &gt;= elementData.length)</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">        cursor = i + 1;</span><br><span class="line">        return (E) elementData[lastRet = i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void remove() &#123;</span><br><span class="line">        if (lastRet &lt; 0)</span><br><span class="line">            throw new IllegalStateException();</span><br><span class="line">        checkForComodification();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            ArrayList.this.remove(lastRet);</span><br><span class="line">            cursor = lastRet;</span><br><span class="line">            lastRet = -1;</span><br><span class="line">            expectedModCount = modCount;</span><br><span class="line">        &#125; catch (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    final void checkForComodification() &#123;</span><br><span class="line">        if (modCount != expectedModCount)</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>cursorï¼šè¡¨ç¤ºä¸‹ä¸€ä¸ªè¦è®¿é—®çš„å…ƒç´ çš„ç´¢å¼•ï¼Œä»next()æ–¹æ³•çš„å…·ä½“å®ç°å°±å¯çœ‹å‡º</li>
<li>lastRetï¼šè¡¨ç¤ºä¸Šä¸€ä¸ªè®¿é—®çš„å…ƒç´ çš„ç´¢å¼•</li>
<li>expectedModCountï¼šè¡¨ç¤ºå¯¹ArrayListä¿®æ”¹æ¬¡æ•°çš„æœŸæœ›å€¼ï¼Œå®ƒçš„åˆå§‹å€¼ä¸ºmodCountã€‚</li>
<li>modCount: æ˜¯åœ¨ ArrayList ä¸­èµ‹å€¼çš„ï¼Œå¹¶ä¸”åˆå§‹å€¼ä¸º 0ï¼Œåœ¨ add å’Œ remove çš„æ—¶å€™ï¼ˆä¿®æ”¹å…ƒç´ çš„æ—¶å€™ï¼‰ä¼šå¢åŠ  1.</li>
</ul>
<p>hasNextæ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public boolean hasNext() &#123;</span><br><span class="line">    return cursor != size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>hasNext æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­çš„ size æ˜¯ ArrayList ä¸­çš„å˜é‡ï¼Œè¿™ä¸ª ConcurrentModificationException å¼‚å¸¸å­˜åœ¨çš„åŸå› ä¹‹ä¸€å°±åœ¨è¿™ä¸ªæ–¹æ³•ä½“ç°å‡ºæ¥äº†ï¼Œåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä½¿ç”¨è¿­ä»£å™¨éå†æ—¶ï¼ŒArrayListæ•°ç»„å…ƒç´ å˜å°‘å¯¼è‡´ cursor &gt; sizeï¼Œç„¶åæ•°ç»„è¶Šç•Œã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹å½“ cursor == sizeä»£è¡¨å·²ç»åˆ°æ•°ç»„å°½å¤´äº†.</p>
<p>next æ–¹æ³•:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public E next() &#123;</span><br><span class="line">    checkForComodification();</span><br><span class="line">    int i = cursor;</span><br><span class="line">    if (i &gt;= size)</span><br><span class="line">        throw new NoSuchElementException();</span><br><span class="line">    Object[] elementData = ArrayList.this.elementData;</span><br><span class="line">    if (i &gt;= elementData.length)</span><br><span class="line">        throw new ConcurrentModificationException();</span><br><span class="line">    cursor = i + 1;</span><br><span class="line">    return (E) elementData[lastRet = i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>next æ–¹æ³•ä¸­å…ˆæ˜¯åˆ¤æ–­äº† modCount æ˜¯å¦ç­‰äº expectedModCountï¼Œä¸ç›¸ç­‰åˆ™æŠ›å‡º å¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼Œå¦åˆ™å–åˆ°æ¸¸æ ‡ï¼Œç„¶ååˆ¤æ–­æ¸¸æ ‡æ˜¯å¦å¤§äºæ•°ç»„é•¿åº¦æˆ–è€…å…ƒç´ ä¸ªæ•°ã€‚æœ€åæ¸¸æ ‡åŠ ä¸€ï¼Œç„¶åè¿”å›æ•°çš„åŒæ—¶ä½¿ lastRet ç­‰äº iã€‚</p>
<p>removeæ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public void remove() &#123;</span><br><span class="line">    if (lastRet &lt; 0)</span><br><span class="line">        throw new IllegalStateException();</span><br><span class="line">    checkForComodification();</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">        ArrayList.this.remove(lastRet);</span><br><span class="line">        cursor = lastRet;</span><br><span class="line">        lastRet = -1;</span><br><span class="line">        expectedModCount = modCount;</span><br><span class="line">    &#125; catch (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">        throw new ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ remove æ‰å…ƒç´ çš„æ—¶å€™æ›´æ–°ä¸‹è‡ªå·±çš„ expectedModCountã€‚æ³¨æ„çš„æ˜¯removeå lastRet ä¼šå˜æˆ -1ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è¿ç»­ remove ä¸¤æ¬¡ï¼Œå› ä¸ºåœ¨ next ä¸­æ£€æŸ¥äº† lastRet çš„å€¼ä¸èƒ½å°äº 0ã€‚</p>
<hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">final void checkForComodification() &#123;</span><br><span class="line">if (modCount != expectedModCount)</span><br><span class="line">throw new ConcurrentModificationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“modCount != expectedModCountæ—¶ï¼Œæ‰§è¡Œnext()å°±ä¼šæŠ›å‡ºConcurrentModificationException<br>è€Œä»€ä¹ˆæ—¶å€™ä¼šé€ æˆmodCount != expectedModCountå‘¢ï¼Ÿ<br>ArrayList.add()å’Œremove()æ–¹æ³•ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡éƒ½ä¼šmodCount++ï¼Œä½†ä¸æ”¹å˜expectedModCountçš„å€¼ã€‚expectedModCountçš„å€¼æ˜¯åœ¨æ„å»ºè¿­ä»£çš„æ—¶å€™åˆå§‹ä¸ºexpectedModCount=modCountçš„ã€‚<br>åœ¨æ„å»ºè¿­ä»£å™¨ä¹‹åï¼Œå†ä½¿ç”¨ArrayList.add()æ–¹æ³•å°±é€ æˆäº†modCount != expectedModCount<br>æ„å»ºè¿­ä»£å™¨åï¼Œç”¨è¿­ä»£å™¨æ¥addå’Œremoveå°±æ²¡æœ‰é—®é¢˜ã€‚å› ä¸ºå®ƒä¼šåœ¨æ”¹å˜modCountçš„å€¼ä¹‹åï¼ŒåˆæŠŠå€¼èµ‹ç»™äº†expectedModCountï¼Œä»è€Œä¿è¯modCount=expectedModCount</p>
<hr>
<p>è§£å†³æ–¹æ³•ï¼šç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•<br>å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œiteratoræ˜¯çº¿ç¨‹ç§æœ‰ï¼Œä¹Ÿå³æ˜¯è¯´expectedModCountæ˜¯æ¯ä¸ªçº¿ç¨‹ç§æœ‰ã€‚ä½¿ç”¨Vectorä¹Ÿä¸è¡Œã€‚<br>æ‰€ä»¥ï¼š<br>åœ¨ä½¿ç”¨iteratorè¿­ä»£çš„æ—¶å€™ä½¿ç”¨synchronizedæˆ–è€…Lockè¿›è¡ŒåŒæ­¥ã€‚ä¸æ¨èï¼Œå› ä¸ºå¢åˆ é€ æˆçš„åŒæ­¥é”å¯èƒ½ä¼šé˜»å¡éå†æ“ä½œã€‚<br>ä½¿ç”¨å¹¶å‘å®¹å™¨CopyOnWriteArrayListæˆ–è€…ConcurrentHashMapä»£æ›¿ArrayListå’ŒVectorã€‚CopyOnWriteArrayListä¸èƒ½ä½¿ç”¨Iterator.remove()è¿›è¡Œåˆ </p>
<p>ConcurrentModificationExceptionå¼‚å¸¸åŸå› å’Œè§£å†³æ–¹æ³•ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44613591/article/details/114108920">https://blog.csdn.net/qq_44613591/article/details/114108920</a></p>
<p>Java éå†List ConcurrentModificationException å¼‚å¸¸è§£æï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_30051139/article/details/54019515">https://blog.csdn.net/qq_30051139/article/details/54019515</a></p>
<h4 id="æ€»ç»“å¤šçº¿ç¨‹ä¸‹ArrayListçš„å‡ ä¸ªé—®é¢˜"><a href="#æ€»ç»“å¤šçº¿ç¨‹ä¸‹ArrayListçš„å‡ ä¸ªé—®é¢˜" class="headerlink" title="æ€»ç»“å¤šçº¿ç¨‹ä¸‹ArrayListçš„å‡ ä¸ªé—®é¢˜"></a>æ€»ç»“å¤šçº¿ç¨‹ä¸‹ArrayListçš„å‡ ä¸ªé—®é¢˜</h4><p>1.å¤šçº¿ç¨‹addå¯èƒ½ä¼šä¸¢æ•°æ®ï¼Œä¹Ÿå¯èƒ½æ•°ç»„è¶Šç•Œï¼Œä½†ä¸ä¼šå¹¶å‘é”™è¯¯<br>2.å¤šçº¿ç¨‹addåˆæ‰“å°ArrayListï¼Œä¼šå¹¶å‘é”™è¯¯ï¼Œåº”ä¸ºSystem.outæ–¹æ³•é‡Œç”¨äº†è¿­ä»£å™¨ã€‚<br>3.ç”¨è¿­ä»£å™¨éå†ä¸­åˆç”¨ArrayListçš„addå’Œremoveæ–¹æ³•ï¼Œä¼šå¹¶å‘é”™è¯¯ã€‚</p>
<p>å®éªŒï¼šå¯¹partitionåçš„æŸä¸ªsubListè¿›è¡Œaddçš„è¯ï¼Œä¼šç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œå› ä¸ºæ¯ä¸ªsubListæ˜¯å¤šå¤§å·²ç»è§„å®šå¥½ï¼Œå¯¹å‰é¢çš„subListè¿›è¡Œaddï¼Œaddçš„å…ƒç´ ä¼šè·‘åˆ°ä¸‹ä¸€ä¸ªsubListï¼Œä»¥æ­¤ç±»æ¨ã€‚åŸæ¥çš„listä¹Ÿä¼šæ”¹å˜ã€‚</p>
<p>å®éªŒï¼šå¯¹ArrayListåˆ†partitionï¼š<code>List&lt;List&lt;A&gt;&gt; partion = Lists.partition(list, 2);</code>ï¼Œå¾ªç¯å°†å„ä¸ªsubListä¼ å…¥ä¸åŒçš„çº¿ç¨‹ï¼Œå¹¶ä¸”åœ¨çº¿ç¨‹ä¸­å¯¹subListè¿›è¡Œaddï¼Œä¼šå¹¶å‘é”™è¯¯ã€‚<br>ğŸ¤”ä¸ºä»€ä¹ˆå•çº¯ArrayListå¤šçº¿ç¨‹addä¸ä¼šå¹¶å‘é”™è¯¯ï¼Œè¿™é‡Œå°±ä¼šã€‚<br>è¿™é‡Œä½¿ç”¨çš„æ˜¯AbstractListçš„addæ–¹æ³•ï¼Œå…¶ä¸­ç”¨åˆ°ArrayListçš„sizeæ–¹æ³•ä¼šæ£€æŸ¥modCountã€‚ä½†æ˜¯ArrayListçš„addæ–¹æ³•ç”¨çš„æ˜¯ArrayListçš„addæ–¹æ³•ã€‚</p>
<p>å®éªŒï¼šå¯¹ArrayListåˆ†partitionï¼š<code>List&lt;List&lt;A&gt;&gt; partion = Lists.partition(list, 2);</code>ï¼Œå¾ªç¯å°†å„ä¸ªsubListä¼ å…¥ä¸åŒçš„çº¿ç¨‹ï¼Œå¹¶ä¸”åœ¨çº¿ç¨‹ä¸­å¯¹subListåªæ˜¯æ‰“å°ï¼Œåœ¨ä¸»çº¿ç¨‹é‡Œå†addï¼Œä¼šå¹¶å‘é”™è¯¯ã€‚åŸå› ï¼šæ‰“å°Listä¹Ÿä¼šç”¨åˆ°è¿­ä»£å™¨ã€‚<br>å¦‚æœæ˜¯åœ¨çº¿ç¨‹é‡Œå¾ªç¯éå†æ‰“å°å•ä¸ªå…ƒç´ ï¼Œä¸ä¼šæœ‰é”™è¯¯ã€‚å¹¶ä¸”ä¼šå®æ—¶åæ˜ å¢åŠ çš„å…ƒç´ ã€‚</p>
<h3 id="javaæ³›å‹"><a href="#javaæ³›å‹" class="headerlink" title="javaæ³›å‹"></a>javaæ³›å‹</h3><p>1ã€æ³›å‹ä¸Objectçš„åŒºåˆ«</p>
<p>æ–¹æ³•çš„å£°æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public Object doSomething(Object obj) &#123;....&#125;</span><br><span class="line">â€‹</span><br><span class="line">public &lt;T&gt; T doSomething(T t) &#123;....&#125;</span><br></pre></td></tr></table></figure>

<p>æ— è®ºæ˜¯Tè¿˜æ˜¯ objï¼Œä½ éƒ½åªèƒ½è°ƒç”¨Objectç±»å‹çš„å‚æ•°å’Œè¿”å›å€¼ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯ä½¿ç”¨äº†æ³›å‹çš„ç±»ï¼Œå’Œæ™®é€šçš„è°ƒç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MyClass&lt;Foo&gt; my = new MyClass&lt;Foo&gt;();</span><br><span class="line">Foo foo = new Foo();</span><br><span class="line"></span><br><span class="line">æ³›å‹ï¼š</span><br><span class="line">Foo newFoo = my.doSomething(foo);</span><br><span class="line"></span><br><span class="line">Object:</span><br><span class="line">Foo newFoo = (Foo) my.doSomething(foo);</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œä½¿ç”¨æ³›å‹çš„å¥½å¤„ï¼š</p>
<p>1.ä¸éœ€è¦åšå¼ºåˆ¶ç±»å‹è½¬æ¢</p>
<p>2.ç¼–è¯‘æ—¶æ›´å®‰å…¨ã€‚å¦‚æœä½¿ç”¨Objectç±»çš„è¯ï¼Œä½ æ²¡æ³•ä¿è¯è¿”å›çš„ç±»å‹ä¸€å®šæ˜¯Fooï¼Œä¹Ÿè®¸æ˜¯å…¶å®ƒç±»å‹ã€‚è¿™æ—¶ä½ å°±ä¼šåœ¨è¿è¡Œæ—¶å¾—åˆ°ä¸€ä¸ªç±»å‹è½¬æ¢å¼‚å¸¸ï¼ˆClassCastExceptionï¼‰</p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/SDDDDDSA/article/details/120733398">https://blog.csdn.net/SDDDDDSA/article/details/120733398</a></p>
<p>2ã€æ³›å‹<code>&lt;T&gt; T</code> ä¸ T çš„åŒºåˆ«</p>
<p>æ–¹æ³•è¿”å›å‰çš„<code>&lt;T&gt; </code>æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå½“å‰æ–¹æ³•çš„å€¼ä¼ å…¥ç±»å‹å¯ä»¥å’Œç±»åˆå§‹åŒ–çš„æ³›å‹ç±»å‹ä¸åŒï¼Œä¹Ÿæ˜¯å°±æ˜¯è¯¥æ–¹æ³•çš„æ³›å‹ç±»å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸éœ€è¦è·Ÿç±»åˆå§‹åŒ–çš„æ³›å‹ç±»ç›¸åŒ.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">package com.jt.test;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">/**</span><br><span class="line"> * @Description</span><br><span class="line"> * æœ‰çš„æ–¹æ³•è¿”å›å€¼ä¸º &lt;T&gt; T ï¼Œæœ‰çš„æ–¹æ³•è¿”å›å€¼ä¸º T ,åŒºåˆ«åœ¨é‚£é‡Œ ï¼Ÿ</span><br><span class="line"> **/</span><br><span class="line">public class Request&lt;E&gt; &#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    public &lt;T&gt; T getObject(Class&lt;T&gt; tClass) throws IllegalAccessException, InstantiationException &#123;</span><br><span class="line">        T t = tClass.newInstance();</span><br><span class="line">        return t;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * æ–¹æ³•è¿”å›å‰çš„ &lt;T&gt; æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå½“å‰æ–¹æ³•çš„å€¼ä¼ å…¥ç±»å‹å¯ä»¥å’Œç±»åˆå§‹åŒ–çš„æ³›å‹ç±»å‹ä¸åŒï¼Œ</span><br><span class="line">     * ä¹Ÿæ˜¯å°±æ˜¯è¯¥æ–¹æ³•çš„æ³›å‹ç±»å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸éœ€è¦è·Ÿç±»åˆå§‹åŒ–çš„æ³›å‹ç±»ç›¸åŒ</span><br><span class="line">     *</span><br><span class="line">     * å‚æ•° T</span><br><span class="line">     *  ç¬¬ä¸€ä¸ª è¡¨ç¤ºæ˜¯æ³›å‹</span><br><span class="line">     *  ç¬¬äºŒä¸ª è¡¨ç¤ºæ˜¯è¿”å›æ˜¯Tç±»å‹çš„æ•°æ®</span><br><span class="line">     *  ç¬¬ä¸‰ä¸ª è¡¨ç¤ºé™åˆ¶å‚æ•°ç±»å‹ä¸ºT</span><br><span class="line">     * @param data</span><br><span class="line">     * @param &lt;T&gt;</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    private &lt;T&gt; T getListFirst(List&lt;T&gt; data) &#123;</span><br><span class="line">        if (data == null || data.size() == 0) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        return data.get(0);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * è¿™ä¸ªåªèƒ½ä¼ Tç±»å‹çš„æ•°æ®</span><br><span class="line">     * @param data</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    private E getListFirst2(List&lt;E&gt; data) &#123;</span><br><span class="line">        if (data == null || data.size() == 0) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        return data.get(0);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Integer&gt; data = new ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; data2 = new ArrayList&lt;&gt;();</span><br><span class="line">        // å…¥å‚ç”±List&lt;T&gt;çš„T å†³å®šï¼Œå› ä¸ºè¿”å›å€¼ä¸º&lt;T&gt; T ,æ‰€ä»¥å…¥å‚ä¸å— Request&lt;T&gt; å½±å“</span><br><span class="line">        Integer a = new Request&lt;String&gt;().getListFirst(data);</span><br><span class="line"> </span><br><span class="line">        // ç¼–è¯‘å‡ºé”™ï¼Œå…¥å‚ç”±Request&lt;T&gt; Tçš„å†³å®šï¼Œå—Request&lt;T&gt;å½±å“</span><br><span class="line">        //new Request&lt;String&gt;().getListFirst2(data);</span><br><span class="line"> </span><br><span class="line">        // æ²¡ä»€ä¹ˆåŒºåˆ«</span><br><span class="line">        String aa = new Request&lt;String&gt;().getListFirst(data2);</span><br><span class="line">        String bb = new Request&lt;String&gt;().getListFirst2(data2);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qianzhitu/article/details/107962657">https://blog.csdn.net/qianzhitu/article/details/107962657</a></p>
<p>3ã€æ³›å‹é€šé…ç¬¦</p>
<p>æ³›å‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ã€‚</p>
<p>å¸¸ç”¨çš„ Tï¼ŒEï¼ŒKï¼ŒVï¼Œï¼Ÿ</p>
<p>æœ¬è´¨ä¸Šè¿™äº›ä¸ªéƒ½æ˜¯é€šé…ç¬¦ï¼Œæ²¡å•¥åŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯ç¼–ç æ—¶çš„ä¸€ç§çº¦å®šä¿—æˆçš„ä¸œè¥¿ã€‚æ¯”å¦‚ä¸Šè¿°ä»£ç ä¸­çš„ T ï¼Œæˆ‘ä»¬å¯ä»¥æ¢æˆ A-Z ä¹‹é—´çš„ä»»ä½•ä¸€ä¸ª å­—æ¯éƒ½å¯ä»¥ï¼Œå¹¶ä¸ä¼šå½±å“ç¨‹åºçš„æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯å¦‚æœæ¢æˆå…¶ä»–çš„å­—æ¯ä»£æ›¿ T ï¼Œåœ¨å¯è¯»æ€§ä¸Šå¯èƒ½ä¼šå¼±ä¸€äº›ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒTï¼ŒEï¼ŒKï¼ŒVï¼Œï¼Ÿæ˜¯è¿™æ ·çº¦å®šçš„ï¼š</p>
<p>ï¼Ÿè¡¨ç¤ºä¸ç¡®å®šçš„ java ç±»å‹<br>T (type) è¡¨ç¤ºå…·ä½“çš„ä¸€ä¸ªjavaç±»å‹<br>K V (key value) åˆ†åˆ«ä»£è¡¨javaé”®å€¼ä¸­çš„Key Value<br>E (element) ä»£è¡¨Element</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/minkeyto/article/details/116205607">https://blog.csdn.net/minkeyto/article/details/116205607</a></p>
<p>å­¦é•¿æ•™å­¦å¦¹javaæ³›å‹ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_67401499/article/details/125401501">https://blog.csdn.net/m0_67401499/article/details/125401501</a></p>
<h3 id="javaå¯å˜å‚æ•°"><a href="#javaå¯å˜å‚æ•°" class="headerlink" title="javaå¯å˜å‚æ•°"></a>javaå¯å˜å‚æ•°</h3><p>javaå¯å˜å‚æ•°æ˜¯æŒ‡åœ¨è°ƒç”¨æ–¹æ³•æ—¶ä¼ å…¥ä¸å®šé•¿åº¦çš„å‚æ•°ï¼Œæœ¬è´¨ä¸Šæ˜¯åŸºäºæ•°ç»„å®ç°çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//å‚æ•°ä¸ºå¯å˜å‚æ•°</span><br><span class="line">//åœ¨å®šä¹‰æ–¹æ³•æ—¶ï¼Œåœ¨æœ€åä¸€ä¸ªå½¢å‚ä¸ŠåŠ &quot;â€¦&quot;å°±è¡¨ç¤ºè¯¥å½¢å‚å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°å€¼ï¼Œå¤šä¸ªå‚æ•°å€¼è¢«å½“åšæ•°ç»„ä¼ å…¥ã€‚</span><br><span class="line">public static void element(Integer... args)&#123; &#125;</span><br><span class="line">//å‚æ•°ä¸ºæ•°ç»„</span><br><span class="line">public static void element(Integer[] args)&#123; &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//å‚æ•°ä¸ºå¯å˜å‚æ•°</span><br><span class="line">public static void element(Integer... args) &#123;</span><br><span class="line">    for (int arg : args) &#123;</span><br><span class="line">        System.out.print(arg + &quot;  &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    //éƒ½å¯ä»¥</span><br><span class="line">    element(1,2,3);</span><br><span class="line">    int[] array=&#123;1,2,3&#125;;</span><br><span class="line">    element(array);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âš ï¸å¯å˜å‚æ•°åªèƒ½åšä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œå‰é¢æœ‰æ²¡æœ‰å…¶ä»–å‚æ•°éƒ½å¯ä»¥ï¼Œä¸€ä¸ªå‡½æ•°æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªå¯å˜å‚æ•°ã€‚</p>
<p>å¯å˜å‚æ•°åœ¨ç¼–è¯‘ä¸ºå­—èŠ‚ç åï¼Œåœ¨æ–¹æ³•ç­¾åä¸­æ˜¯ä»¥æ•°ç»„å½¢æ€å‡ºç°çš„ï¼Œå¦‚æœä¸¤ä¸ªæ–¹æ³•ç­¾åç¼–è¯‘åçš„æ˜¯ä¸€è‡´çš„è¯ï¼Œæ˜¯ä¸èƒ½ç¼–è¯‘é€šè¿‡çš„ï¼Œä¸å¯ä»¥ä½œä¸ºæ–¹æ³•çš„é‡è½½ã€‚</p>
<p>å¯å˜å‚æ•°ä½œä¸ºå‚æ•°çš„æ–¹æ³•å¯ä»¥ä¼ å…¥æ•°ç»„ç±»å‹çš„æ•°æ®æˆ–è€…ç›´æ¥ä¼ å…¥å¤šä¸ªæ•°æ®ï¼Œä½†æ˜¯æ•°ç»„ä½œä¸ºå‚æ•°çš„æ–¹æ³•åªèƒ½ä¼ å…¥æ•°ç»„ç±»å‹çš„æ•°æ®ã€‚</p>
<p>åå°„æ—¶ï¼Œå¯å˜å‚æ•°çš„æ³¨æ„äº‹é¡¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class Demo5 &#123;</span><br><span class="line"></span><br><span class="line">    public static void element(Integer... args)&#123;</span><br><span class="line">        System.out.println(args.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Integer[] arrry=&#123;1,2,3&#125;;</span><br><span class="line">        try &#123;</span><br><span class="line">            //åå°„æ˜¯è¿è¡Œæ—¶è·å–çš„ï¼Œåœ¨è¿è¡Œæ—¶çœ‹æ¥ï¼Œå¯å˜å‚æ•°å’Œæ•°ç»„ä¸Šæ˜¯ä¸€è‡´çš„ã€‚å› è€Œæ–¹æ³•çš„ç­¾åä¸º([java/lang/Integer;)V</span><br><span class="line">            //Methodå¯¹è±¡çš„æ–¹æ³•å£°æ˜ä¸ºObject invoke (Object obj,Object.. args)</span><br><span class="line">            //argsè™½ç„¶æ˜¯ä¸€ä¸ªå¯å˜é•¿åº¦çš„å‚æ•°ï¼Œä½†æ˜¯argsçš„é•¿åº¦å—é™äºè¯¥æ–¹æ³•å¯¹è±¡ä»£è¡¨çš„çœŸå®æ–¹æ³•çš„å‚æ•°åˆ—è¡¨é•¿åº¦,</span><br><span class="line">            //ä»è¿è¡Œæ—¶ç­¾åæ¥çœ‹ï¼Œ([java/lang/Integer;)Vå®é™…ä¸Šæ˜¯ä¸€ä¸ªå½¢å‚ï¼Œå³Integer[] args,å› æ­¤invoke (Object obj,Object.. args)ä¸­å¯å˜å‚æ•°argsçš„å®é™…å‚æ•°é•¿åº¦åªèƒ½ä¸º1ã€‚</span><br><span class="line">            Method method = Demo5.class.getMethod(&quot;element&quot;, Integer[].class);</span><br><span class="line">            //arrayçš„é•¿åº¦ä¸º3ï¼Œä¸ç¬¦åˆ</span><br><span class="line">            method.invoke(null,arrry);</span><br><span class="line">            //å°†Integer[]è½¬ä¸ºObject[]ï¼Œé•¿åº¦è¿˜æ˜¯ä¸º3ï¼Œä¸ç¬¦åˆ</span><br><span class="line">            method.invoke(null,(Object[])arrry);</span><br><span class="line">            //å°†æ•´ä¸ªInteger[]è½¬ä¸ºä¸€ä¸ªObjectï¼Œé•¿åº¦ä¸º1ï¼Œç¬¦åˆ</span><br><span class="line">            method.invoke(null,(Object)arrry);</span><br><span class="line">            //Object[]çš„é•¿åº¦ä¸º1ï¼Œç¬¦åˆï¼Œå’Œä¸Šé¢ç›¸åŒ</span><br><span class="line">            method.invoke(null,new Object[]&#123;arrry&#125;);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43413307/article/details/125485292">https://blog.csdn.net/weixin_43413307/article/details/125485292</a></p>
<h3 id="ç±»ä¸­çš„å¸ƒå°”ç±»å‹getæ–¹æ³•æ³¨æ„"><a href="#ç±»ä¸­çš„å¸ƒå°”ç±»å‹getæ–¹æ³•æ³¨æ„" class="headerlink" title="ç±»ä¸­çš„å¸ƒå°”ç±»å‹getæ–¹æ³•æ³¨æ„"></a>ç±»ä¸­çš„å¸ƒå°”ç±»å‹getæ–¹æ³•æ³¨æ„</h3><p>@Getterè‡ªåŠ¨ç”Ÿæˆgetteræ–¹æ³•ï¼Œä½†æ˜¯ï¼š<br>1.Booleanç±»å‹,ç”Ÿæˆçš„getæ–¹æ³•æ˜¯getå¼€å¤´çš„(å»ºè®®ä½¿ç”¨è¿™ä¸ª).<br>2.booleanç±»å‹,ç”Ÿæˆçš„getæ–¹æ³•æ˜¯iså¼€å¤´çš„(ç”¨è¿™ä¸ªæœ€å¥½é‡å†™getXxx()æ ¼å¼çš„æ–¹æ³•).</p>
<p>ç”¨åˆ°å¸ƒå°”å€¼çš„å±æ€§æ—¶,æœ€å¥½ç»Ÿä¸€ä½¿ç”¨å¤§å†™çš„åŒ…è£…ç±»Boolean.<br>å¦‚æœç”¨å°å†™çš„booeanåŸºæœ¬ç±»å‹,æœ€å¥½é‡å†™getæ–¹æ³•,ä¿è¯æ˜¯getXxxxçš„æ ¼å¼å³å¯.<br>*å¦‚æœè¿™ä¸ªå¯¹è±¡æ¶‰åŠåˆ°åå°„,åå°„ä¸€èˆ¬ä¼šé»˜è®¤è°ƒå–å¯¹è±¡çš„getæ–¹æ³•,å¯¹äºè¿™ä¸ªisçš„æƒ…å†µ,æ˜¯èµ°ä¸é€šçš„.</p>
<h3 id="javaçš„nativeæ–¹æ³•"><a href="#javaçš„nativeæ–¹æ³•" class="headerlink" title="javaçš„nativeæ–¹æ³•"></a>javaçš„nativeæ–¹æ³•</h3><p>ä»€ä¹ˆæ˜¯nativeæ–¹æ³•ï¼Ÿ<br>ä¸€ä¸ªNative Methodæ˜¯ä¸€ä¸ªjavaè°ƒç”¨éjavaä»£ç çš„æ¥å£ã€‚Native Methodçš„å®ç°ç”±éjavaè¯­è¨€å®ç°ï¼Œæ¯”å¦‚Cã€‚è¿™ä¸ªç‰¹å¾å¹¶éjavaæ‰€ç‰¹æœ‰ï¼Œå¾ˆå¤šå…¶å®ƒçš„ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è¿™ä¸€æœºåˆ¶ï¼Œæ¯”å¦‚åœ¨Cï¼‹ï¼‹ä¸­ï¼Œä½ å¯ä»¥ç”¨extern â€œCâ€å‘ŠçŸ¥Cï¼‹ï¼‹ç¼–è¯‘å™¨å»è°ƒç”¨ä¸€ä¸ªCçš„å‡½æ•°ã€‚</p>
<p>ä½¿ç”¨nativeå…³é”®å­—è¯´æ˜è¿™ä¸ªæ–¹æ³•æ˜¯åŸç”Ÿå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨C/C++è¯­è¨€å®ç°çš„ï¼Œå¹¶ä¸”è¢«ç¼–è¯‘æˆäº†DLLï¼Œç”±javaå»è°ƒç”¨ã€‚ è¿™äº›å‡½æ•°çš„å®ç°ä½“åœ¨DLLä¸­ï¼ŒJDKçš„æºä»£ç ä¸­å¹¶ä¸åŒ…å«ï¼Œä½ åº”è¯¥æ˜¯çœ‹ä¸åˆ°çš„ã€‚å¯¹äºä¸åŒçš„å¹³å°å®ƒä»¬ä¹Ÿæ˜¯ä¸åŒçš„ã€‚è¿™ä¹Ÿæ˜¯javaçš„åº•å±‚æœºåˆ¶ï¼Œå®é™…ä¸Šjavaå°±æ˜¯åœ¨ä¸åŒçš„å¹³å°ä¸Šè°ƒç”¨ä¸åŒçš„nativeæ–¹æ³•å®ç°å¯¹æ“ä½œç³»ç»Ÿçš„è®¿é—®çš„ã€‚</p>
<p>ä¾‹å¦‚ï¼š<br>Thread.sleep(1000); è¿˜æœ‰ Thread.start0() éƒ½æ˜¯nativeæ–¹æ³•ã€‚<br>åœ¨JDK æºç  Object.class ç±»ä¸­çš„ getClass() æ–¹æ³•ã€hashCode()æ–¹æ³•ã€clone() æ–¹æ³•</p>
<p>nativeçš„æ„æ€å°±æ˜¯é€šçŸ¥æ“ä½œç³»ç»Ÿï¼Œ è¿™ä¸ªå‡½æ•°ä½ å¿…é¡»ç»™æˆ‘å®ç°ï¼Œå› ä¸ºæˆ‘è¦ä½¿ç”¨ã€‚ æ‰€ä»¥nativeå…³é”®å­—çš„å‡½æ•°éƒ½æ˜¯æ“ä½œç³»ç»Ÿå®ç°çš„ï¼Œ javaåªèƒ½è°ƒç”¨ã€‚<br>javaæ˜¯è·¨å¹³å°çš„è¯­è¨€ï¼Œæ—¢ç„¶æ˜¯è·¨äº†å¹³å°ï¼Œæ‰€ä»˜å‡ºçš„ä»£ä»·å°±æ˜¯ç‰ºç‰²ä¸€äº›å¯¹åº•å±‚çš„æ§åˆ¶ï¼Œè€Œjavaè¦å®ç°å¯¹åº•å±‚çš„æ§åˆ¶ï¼Œå°±éœ€è¦ä¸€äº›å…¶ä»–è¯­è¨€çš„å¸®åŠ©ï¼Œè¿™ä¸ªå°±æ˜¯nativeçš„ä½œç”¨äº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.nativeæ–¹æ³•æ˜¯javaä¸å…¶ä»–è¯­è¨€åä½œçš„æ—¶å€™ä½¿ç”¨çš„ï¼Œåº•å±‚å®ç°ä¸æ˜¯java(c,c++)</span><br><span class="line">2.nativeå¹¶ä¸æ˜¯javaå®ç°çš„ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨å°±å¥½ï¼Œä¸éœ€è¦ç®¡ä»–åº•å±‚å®ç°</span><br><span class="line">3.nativeæ–¹æ³•å®é™…ä¸Šæ˜¯javaç”¨äºè°ƒç”¨åº•å±‚æ“ä½œç³»ç»Ÿçš„æ–¹æ³•,javaåªèƒ½è°ƒç”¨ï¼Œä¸èƒ½æŸ¥çœ‹å’Œä¿®æ”¹</span><br><span class="line">4.javaæ˜¯è·¨å¹³å°è¯­è¨€ï¼Œè‡ªç„¶è€Œç„¶ä¼šå¤±å»å¯¹åº•å±‚çš„æ§åˆ¶ï¼Œäºæ˜¯æƒ³è¦è°ƒç”¨åº•å±‚æ–¹æ³•ï¼Œå°±å¿…é¡»ä½¿ç”¨nativeæ–¹æ³•é—´æ¥è°ƒç”¨åº•å±‚æ“ä½œç³»ç»Ÿçš„æ–¹æ³•(c,c++å®ç°)</span><br><span class="line">5.éšç€javaçš„ä¸æ–­å‘å±•ï¼Œnativeæ–¹æ³•è¶Šæ¥è¶Šå°‘</span><br><span class="line">6.nativeæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå…¶ä¿®é¥°çš„æ–¹æ³•åªè¯´æ˜ä¸å®ç°</span><br><span class="line">7.nativeæ–¹æ³•åŠ è½½åˆ° æœ¬åœ°æ ˆä¸­</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/TheWayForDream/article/details/122202601</span><br></pre></td></tr></table></figure>

<p>JNIï¼šJava Native Interfaceï¼š<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/28001771/answer/2049534464">https://www.zhihu.com/question/28001771/answer/2049534464</a><br>nativeç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://www.jb51.net/article/195760.html">https://www.jb51.net/article/195760.html</a></p>
<h3 id="printStackTrace-æ–¹æ³•"><a href="#printStackTrace-æ–¹æ³•" class="headerlink" title="printStackTrace()æ–¹æ³•"></a>printStackTrace()æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">â€¦ &#125; catch(Exception e) &#123;</span><br><span class="line">e.printStackTrace() ; &#125;</span><br></pre></td></tr></table></figure>

<p>tryè¯­å¥ä¸­å‡ºç°å¼‚å¸¸æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†catchæ‹¬å·ä¸­çš„Exception e åˆå§‹åŒ–ã€‚</p>
<p>printStackTrace()ï¼šåœ¨å‘½ä»¤è¡Œæ‰“å°å¼‚å¸¸ä¿¡æ¯åœ¨ç¨‹åºä¸­å‡ºé”™çš„ä½ç½®åŠåŸå› ã€‚<br>System.out.println(e)ï¼šæ‰“å°å¼‚å¸¸</p>
<p>ä¸å»ºè®®ä½¿ç”¨printStackTrace()çš„åŸå› ï¼š<br>e.printStackTrace() è¯­å¥è¦äº§ç”Ÿçš„å­—ç¬¦ä¸²è®°å½•çš„æ˜¯å †æ ˆä¿¡æ¯ï¼Œå¤ªé•¿å¤ªå¤šï¼Œå†…å­˜ä¼šè¢«å¡«æ»¡ã€‚</p>
<p>çŸ­æ—¶é—´å†…å¤§é‡è¯·æ±‚è®¿é—®æ­¤æ¥å£ -&gt; ä»£ç æœ¬èº«æœ‰é—®é¢˜ï¼Œå¾ˆå¤šæƒ…å†µä¸‹æŠ›å¼‚å¸¸  -&gt; e.printStackTrace() æ¥æ‰“å°å¼‚å¸¸åˆ°æ§åˆ¶å° -&gt; äº§ç”Ÿé”™è¯¯å †æ ˆå­—ç¬¦ä¸²åˆ°å­—ç¬¦ä¸²æ± å†…å­˜ç©ºé—´ -&gt; æ­¤å†…å­˜ç©ºé—´ä¸€ä¸‹å­è¢«å æ»¡äº† -&gt; å¼€å§‹åœ¨æ­¤å†…å­˜ç©ºé—´äº§å‡ºå­—ç¬¦ä¸²çš„çº¿ç¨‹æœªå®Œæˆï¼Œå°±æ²¡ç©ºé—´äº† -&gt;  å¤§é‡çº¿ç¨‹äº§å‡ºå­—ç¬¦ä¸²äº§å‡ºåˆ°ä¸€åŠï¼Œç­‰åœ¨è¿™å„¿ï¼ˆç­‰æœ‰å†…å­˜äº†ç»§ç»­æï¼‰-&gt; ç›¸äº’ç­‰å¾…ï¼Œç­‰å†…å­˜ï¼Œé”æ­»äº†ï¼Œæ•´ä¸ªåº”ç”¨æŒ‚æ‰äº†ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸å»ºè®®printStackTraceï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/kzadmxz/article/details/89914896">https://blog.csdn.net/kzadmxz/article/details/89914896</a></p>
<p>å»ºè®®ï¼šlogger.error(â€œ***â€,  e);</p>
<h3 id="ç”Ÿæˆéšæœºæ•°"><a href="#ç”Ÿæˆéšæœºæ•°" class="headerlink" title="ç”Ÿæˆéšæœºæ•°"></a>ç”Ÿæˆéšæœºæ•°</h3><p>âœ…1.ä½¿ç”¨Mathæ–¹æ³•</p>
<p>javaæœ¬èº«çš„ï¼Œä¸éœ€è¦å¯¼å…¥åŒ…ï¼ŒMath.random()éšæœºç”Ÿæˆä¸€ä¸ªdoubleç±»å‹[0ï¼Œ1)ï¼Œå¦‚æœæƒ³ç”Ÿæˆ1~100çš„éšæœºæ•°:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int num = (int)(Math.random()*100)+1;</span><br><span class="line">System.out.println(num);</span><br><span class="line">System.out.println((int)0.01); //0</span><br></pre></td></tr></table></figure>

<p>âœ…2.ä½¿ç”¨Randomæ–¹æ³•ç”Ÿæˆéšæœºæ•°</p>
<p>Randomç±»æ˜¯java.untilä¸‹çš„ä¸€ä¸ªæ ¹æ®éšæœºç®—æ³•çš„èµ·æºæ•°å­—è¿›è¡Œä¸€äº›å˜åŒ–ï¼Œä»è€Œå¾—åˆ°éšæœºæ•°å­—çš„æ–¹æ³•ã€‚</p>
<p>éšæœºç®—æ³•çš„èµ·æºæ•°å­—è¢«æˆä¸ºç§å­æ•°ï¼ˆseedï¼‰ã€‚</p>
<p>è™½ç„¶Randomç±»äº§ç”Ÿçš„æ•°å­—æ˜¯éšæœºçš„ï¼Œä½†åœ¨ç›¸åŒç§å­æ•°ï¼ˆseedï¼‰ä¸‹çš„ç›¸åŒæ¬¡æ•°äº§ç”Ÿçš„éšæœºæ•°æ˜¯ç›¸åŒçš„ï¼ˆä¼ªéšæœºï¼‰ã€‚</p>
<p>Randomä¸­å…±æœ‰ä¸¤ç§æ„é€ æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1ã€public Randomï¼ˆï¼‰</span><br><span class="line">æ­¤æ„é€ æ–¹æ³•æ˜¯ä»¥ç³»ç»Ÿè‡ªèº«çš„æ—¶é—´ä¸ºç§å­æ•°æ¥æ„é€ Randomå¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line">2ã€public Randomï¼ˆlong seedï¼‰</span><br><span class="line">æ­¤æ„é€ æ–¹æ³•å¯ä»¥è‡ªå·±æ¥é€‰å®šå…·ä½“çš„ç§å­æ¥æ„é€ Randomå¯¹è±¡ã€‚</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨æ–¹æ³•ï¼šéƒ½å¯ä»¥åŠ å‚æ•°è¡¨ç¤ºèŒƒå›´ï¼ŒèŒƒå›´æ˜¯å·¦é—­å³å¼€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">random.nextInt()	è¿”å›å€¼ä¸ºæ•´æ•°,èŒƒå›´æ˜¯intç±»å‹èŒƒå›´</span><br><span class="line">random.nextLong()	è¿”å›å€¼ä¸ºé•¿æ•´å‹ï¼ŒèŒƒå›´æ˜¯longç±»å‹çš„èŒƒå›´</span><br><span class="line">random.nextFloat()	è¿”å›å€¼ä¸ºå°æ•°ï¼ŒèŒƒå›´æ˜¯[0,0.1]</span><br><span class="line">random.nextDouble()	è¿”å›å€¼ä¸ºå°æ•°ï¼ŒèŒƒå›´æ˜¯[0,0.1]</span><br><span class="line">random.nextBooleanï¼ˆï¼‰	è¿”å›å€¼ä¸ºbooleanå€¼ï¼Œtrueå’Œfalseæ¦‚ç‡ç›¸åŒ</span><br><span class="line">radom.nextGaussian()	è¿”å›å€¼ä¸ºå‘ˆé«˜æ–¯ï¼ˆâ€œæ­£æ€â€ï¼‰åˆ†å¸ƒçš„ double å€¼ï¼Œå…¶å¹³å‡å€¼æ˜¯ 0.0ï¼Œæ ‡å‡†å·®æ˜¯ 1.0</span><br></pre></td></tr></table></figure>

<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Random r = new Random();//ä»¥ç³»ç»Ÿè‡ªèº«æ—¶é—´ä¸ºç§å­æ•°</span><br><span class="line">int i = r.nextInt();</span><br><span class="line">System.out.println(&quot;i&quot;+i);</span><br><span class="line">Scanner sc  =new Scanner(System.in);</span><br><span class="line">int j = sc.nextInt();</span><br><span class="line">Random r2 = new Random(j);//è‡ªå®šä¹‰ç§å­æ•°</span><br><span class="line">Random r3 = new Random(j);//è¿™é‡Œæ˜¯ä¸ºäº†éªŒè¯ä¸Šæ–¹çš„æ³¨æ„äº‹é¡¹ï¼šRandomç±»æ˜¯ä¼ªéšæœºï¼Œç›¸åŒç§å­æ•°ç›¸åŒæ¬¡æ•°äº§ç”Ÿçš„éšæœºæ•°ç›¸åŒ</span><br><span class="line">int num  = r2.nextInt(1000);</span><br><span class="line">int num2 = r3.nextInt(1000);</span><br><span class="line">System.out.println(&quot;num&quot;+num);</span><br><span class="line">System.out.println(&quot;num2&quot;+num2);</span><br></pre></td></tr></table></figure>

<p>âœ…3.ä½¿ç”¨SecureRandomç”Ÿæˆéšæœºæ•°</p>
<p>java.util.Randomçš„å®ä¾‹ä¸æ˜¯åŠ å¯†å®‰å…¨çš„ï¼Œè¦æ˜¯çŸ¥é“setSeedå€¼(å³æ—¶é—´æˆ³)ï¼Œå¾ˆæ˜æ˜¾èƒ½æŠŠéšæœºæ•°ç»™çŒœå‡ºæ¥ã€‚æ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨Randomã€‚SecureRandomæ¥è·å–åŠ å¯†å®‰å…¨çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œä»¥ä¾›å¯¹å®‰å…¨æ•æ„Ÿçš„åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚</p>
<p>åœ¨å®‰å…¨åº”ç”¨åœºæ™¯ï¼Œéšæœºæ•°åº”è¯¥ä½¿ç”¨å®‰å…¨çš„éšæœºæ•°ã€‚å¯†ç å­¦æ„ä¹‰ä¸Šçš„å®‰å…¨éšæœºæ•°ï¼Œè¦æ±‚å¿…é¡»ä¿è¯å…¶ä¸å¯é¢„æµ‹æ€§ã€‚</p>
<p>å¯†ç å­¦å®‰å…¨çš„ä¼ªéšæœºæ•°äº§ç”Ÿå™¨ï¼šJDKçš„java.security.SecureRandom</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SecureRandom random = new SecureRandom();</span><br><span class="line">String returnValue = &quot;&quot;;</span><br><span class="line">int randomInt = 0;</span><br><span class="line">int range = 9;</span><br><span class="line">for(int i=0; i&lt;5; i++ )&#123;</span><br><span class="line">    randomInt = random.nextInt(range+1);</span><br><span class="line">    returnValue = returnValue + randomInt;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(returnValue);</span><br><span class="line"></span><br><span class="line">secureRandom.setSeed(System.currentTimeMillis()); //ä½¿ç”¨ç³»ç»Ÿæ—¶é—´ä½œä¸ºç§å­</span><br><span class="line">å¦‚æœåŒä¸€æ¯«ç§’è¿ç»­è°ƒç”¨ï¼Œåˆ™å¾—åˆ°çš„éšæœºæ•°åˆ™æ˜¯ç›¸åŒçš„ã€‚</span><br><span class="line">ä¸è¦è‡ªå·±æŒ‡å®šç§å­ã€‚åº”å½“ä½¿ç”¨ç³»ç»Ÿéšæœºæºã€‚é‡‡ç”¨æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testSecureRandom() throws NoSuchAlgorithmException &#123;</span><br><span class="line">    //æŒ‡å®šç®—æ³•åç§°</span><br><span class="line">    SecureRandom secureRandom = SecureRandom.getInstance(&quot;SHA1PRNG&quot;);</span><br><span class="line">    secureRandom.setSeed(10000L);</span><br><span class="line">    for(int i = 0 ; i &lt; 10 ; i ++) &#123;</span><br><span class="line">        System.out.println(secureRandom.nextInt(1000));</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(&quot;-------------------&quot;);</span><br><span class="line">    secureRandom = new SecureRandom();</span><br><span class="line">    secureRandom.setSeed(10000L);</span><br><span class="line">    for(int i = 0; i &lt; 10 ; i ++) &#123;</span><br><span class="line">        System.out.println(secureRandom.nextInt(1000));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="getInstanceæ–¹æ³•"><a href="#getInstanceæ–¹æ³•" class="headerlink" title="getInstanceæ–¹æ³•"></a>getInstanceæ–¹æ³•</h3><p>ä¸¤ä¸ªä½¿ç”¨åœºæ™¯ï¼š</p>
<p>âœ…1.æŠ½è±¡ç±»</p>
<p>æŠ½è±¡ç±»æ˜¯æ— æ³•ç›´æ¥newå‡ºæ¥çš„ï¼Œæ‰€ä»¥æƒ³è¦é€šè¿‡å®ä¾‹åŒ–çš„è¯åªèƒ½é€šè¿‡getInstance()æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class GetInstanceTest &#123;</span><br><span class="line">    public static void main(String args[])</span><br><span class="line">    &#123;</span><br><span class="line">        Person p = Person.getInstance(&quot;Limbo&quot;);</span><br><span class="line">        p.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">abstract class Person &#123;</span><br><span class="line">    private String title;</span><br><span class="line">    public Person(String title) &#123;</span><br><span class="line">        this.title = title;</span><br><span class="line">    &#125;</span><br><span class="line">    abstract public void eat();</span><br><span class="line">    public static  PersonImpl getInstance(String title) &#123;</span><br><span class="line">        return new PersonImpl(title);</span><br><span class="line">    &#125;</span><br><span class="line">    //å¿…é¡»staticï¼š</span><br><span class="line">    static class PersonImpl extends Person</span><br><span class="line">    &#123;</span><br><span class="line">        public PersonImpl(String title) &#123;</span><br><span class="line">            super(title);</span><br><span class="line">        &#125;</span><br><span class="line">        @Override</span><br><span class="line">        public void eat()</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(&quot;Eat!!!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ…2.å•ä¾‹è®¾è®¡æ¨¡å¼</p>
<p>ä¸€èˆ¬åœ¨å•ä¾‹æ¨¡å¼ä¸‹ä½¿ç”¨.getInstance()åˆ›å»ºå¯¹è±¡.<br>å•ä¾‹æ¨¡å¼ï¼šä¸€ä¸ªç±»æœ‰ä¸”åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class SingleTest &#123;</span><br><span class="line">    public static void main(String args[]) &#123;</span><br><span class="line">        Singleton s = Singleton.getInstance();</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Singleton &#123;</span><br><span class="line">    private String title;</span><br><span class="line">    private String content;</span><br><span class="line">    //åœ¨è‡ªå·±å†…éƒ¨å®šä¹‰è‡ªå·±çš„ä¸€ä¸ªå®ä¾‹</span><br><span class="line">    private static Singleton SINGLETON = null;</span><br><span class="line">    //private åªèƒ½åœ¨è‡ªå·±å†…éƒ¨ä¾›è‡ªå·±å»è®¿é—®</span><br><span class="line">    private Singleton(String title, String content) &#123;</span><br><span class="line">        this.title = title;</span><br><span class="line">        this.content = content;</span><br><span class="line">    &#125;</span><br><span class="line">    //æ­¤é™æ€æ–¹æ³•ä¾›å¤–éƒ¨ç›´æ¥è®¿é—®</span><br><span class="line">    public static Singleton getInstance() &#123;</span><br><span class="line">        if (SINGLETON == null)</span><br><span class="line">            SINGLETON = new Singleton(&quot;Kobe&quot;, &quot;MVP&quot;);</span><br><span class="line">        return SINGLETON;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return this.title + &quot; - &quot; + this.content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>getInsance()t:åœ¨ä¸»å‡½æ•°å¼€å§‹æ—¶è°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ï¼Œæ­¤å¯¹è±¡æ˜¯staticçš„ï¼Œåœ¨å†…å­˜ä¸­ä¿ç•™ç€å®ƒçš„å¼•ç”¨ï¼Œå³å†…å­˜ä¸­æœ‰ä¸€å—åŒºåŸŸä¸“é—¨ç”¨æ¥å­˜æ”¾é™æ€æ–¹æ³•å’Œå˜é‡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè°ƒç”¨å¤šæ¬¡è¿”å›åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>(1)å¯¹è±¡ä½¿ç”¨ä¹‹å‰é€šè¿‡getinstanceå¾—åˆ°ï¼Œè€Œä¸éœ€è¦è‡ªå·±å®šä¹‰ï¼Œç”¨å®Œä¹‹åä¸éœ€è¦deleteï¼›</p>
<p>(2)new ä¸€å®šè¦ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œåˆ†é…å†…å­˜ï¼›getInstance() åˆ™ä¸ä¸€å®šè¦å†æ¬¡åˆ›å»ºï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªå·²å­˜åœ¨çš„å¼•ç”¨ç»™ä½ ä½¿ç”¨ï¼Œè¿™åœ¨æ•ˆèƒ½ä¸Šä¼˜äºnewï¼›</p>
<p>(3) newåˆ›å»ºååªèƒ½å½“æ¬¡ä½¿ç”¨ï¼Œè€ŒgetInstance()å¯ä»¥è·¨æ ˆåŒºåŸŸä½¿ç”¨ï¼Œæˆ–è€…è¿œç¨‹è·¨åŒºåŸŸä½¿ç”¨ã€‚æ‰€ä»¥getInstance()é€šå¸¸æ˜¯staticé™æ€å®ä¾‹æ–¹æ³•ã€‚</p>
<p>æ‘˜è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/baxianhua/p/9341953.html">https://www.cnblogs.com/baxianhua/p/9341953.html</a></p>
<h3 id="lang3ä¸‹çš„Pair"><a href="#lang3ä¸‹çš„Pair" class="headerlink" title="lang3ä¸‹çš„Pair"></a>lang3ä¸‹çš„Pair</h3><p>org.apache.commons.lang3.tuple.Pair</p>
<p>Pair ç”¨äºå­˜å‚¨å·¦å³å…ƒç´ å¯¹ï¼ŒPair&lt;Left, Right&gt;ã€‚ä¸»è¦æœ‰ä¸¤ä¸ªå­ç±»ï¼ŒImmutablePair å’Œ MutablePairã€‚</p>
<p>Pair å®ç°äº† java.util.Map.Entryï¼Œå› æ­¤ left å’Œ right ä¹Ÿå¯ä»¥è§†ä½œ key-valueã€‚ä¸åŒäºMapï¼ŒPairåªèƒ½å­˜ä¸€ç»„é”®å€¼å¯¹ã€‚</p>
<p>of æ–¹æ³• ä»¥ static è°ƒç”¨çš„å½¢å¼åˆ›å»ºä¸€ä¸ª Pair å®ä¾‹. é»˜è®¤åˆ›å»ºçš„æ˜¯ ImmutablePairã€‚left, rightå€¼final ä¿®é¥°ï¼Œ å€¼ç¬¬ä¸€æ¬¡è¢«è®¾ç½®åä¸å¯å˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Pair&lt;Integer, String&gt; pair = Pair.of(1, &quot;1&quot;);</span><br><span class="line">System.out.println(pair.getLeft());</span><br><span class="line">System.out.println(pair.getKey());</span><br><span class="line">System.out.println(pair.getRight());</span><br><span class="line">System.out.println(pair.getValue());</span><br><span class="line">pair.setValue(&quot;2&quot;); //java.lang.UnsupportedOperationException</span><br></pre></td></tr></table></figure>

<p>org.apache.commons.lang3.tuple.MutablePair<br>ç»§æ‰¿äº† Pairï¼Œleft å’Œ right å€¼å¯å˜ã€‚</p>
<p>Pairä¸Mapï¼š<br>1.å…±é€šç‚¹: Pair å’Œ Map éƒ½æ˜¯ä»¥ key, value è¿›è¡Œå­˜å‚¨ã€‚<br>2.ä¸åŒç‚¹:<br>Pair é€šè¿‡ getKey(), getValue() è·å– key å’Œ valueï¼Œæ²¡æœ‰å¢åŠ é”®å€¼å¯¹çš„æ“ä½œã€‚<br>Map æ˜¯é€šè¿‡ get(key) è·å– key å¯¹åº”çš„ valueï¼Œé€šè¿‡ values() è·å–æ‰€æœ‰çš„valueï¼Œè€Œä¸”è¿˜å¯ä»¥é€šè¿‡ put å¢åŠ é”®å€¼å¯¹ã€‚<br>Pair ä¿å­˜çš„æ˜¯ä¸€å¯¹ key-valueï¼Œè€Œ Map å¯ä»¥ä¿å­˜å¤šå¯¹ key-valueã€‚</p>
<p>âš ï¸Pairçš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯ï¼šVOä¸­ç”¨åˆ°çš„å°æ•°æ®ç»“æ„ï¼Œä¸æƒ³å†æ„é€ ä¸€ä¸ªpojoäº†ï¼Œæœ‰ä¸¤ç»„é”®å€¼å¯¹çš„æ•°æ®ï¼Œæ¯”å¦‚Pointï¼Œåªæœ‰xå’Œyã€‚å°±å¯ä»¥ç”¨<code>List&lt;Pair&lt;String, Double&gt;&gt;</code> è¡¨ç¤ºã€‚<br>âš ï¸ä½†æ˜¯Pairä¸èƒ½è¢«jsonè§£æã€‚</p>
<h3 id="å‡ ç§æ’åºç®—æ³•"><a href="#å‡ ç§æ’åºç®—æ³•" class="headerlink" title="å‡ ç§æ’åºç®—æ³•"></a>å‡ ç§æ’åºç®—æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-äº¤æ¢æ’åº</span><br><span class="line"> -å†’æ³¡æ’åº</span><br><span class="line"> -å¿«é€Ÿæ’åº</span><br><span class="line">-æ’å…¥æ’åº</span><br><span class="line"> -ç›´æ¥æ’å…¥æ’åº</span><br><span class="line"> -å¸Œå°”æ’åº</span><br><span class="line">-é€‰æ‹©æ’åº</span><br><span class="line"> -ç®€å•é€‰æ‹©æ’åº</span><br><span class="line"> -å †æ’åº</span><br><span class="line">-å½’å¹¶æ’åº</span><br><span class="line">-åŸºæ•°æ’åº</span><br></pre></td></tr></table></figure>

<h4 id="âœ…å†’æ³¡æ’åº"><a href="#âœ…å†’æ³¡æ’åº" class="headerlink" title="âœ…å†’æ³¡æ’åº"></a>âœ…å†’æ³¡æ’åº</h4><p>1.ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œåˆ™è¿›è¡Œäº¤æ¢,æ­¤æ—¶æœ€åçš„å…ƒç´ åº”æ˜¯æœ€å¤§çš„æ•°ã€‚<br>2.å¯¹å‰©ä½™å…ƒç´ é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹å…ƒç´ éœ€è¦æ¯”è¾ƒä¸ºæ­¢ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public void bubbleSortOpt(int[] arr) &#123;</span><br><span class="line">    if(arr == null) &#123;</span><br><span class="line">        throw new NullPointerException();</span><br><span class="line">    &#125;</span><br><span class="line">    if(arr.length &lt; 2) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    int temp = 0;</span><br><span class="line">    for(int i = 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">        for(int j = 0; j &lt; arr.length - i - 1; j++) &#123;</span><br><span class="line">            if(arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">                temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + 1];</span><br><span class="line">                arr[j + 1] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†’æ³¡æ’åºä¼˜åŒ–ï¼š<br>å‡å¦‚å¾…æ’åºæ•°ç»„æ˜¯ 2ã€1ã€3ã€4ã€5 è¿™æ ·çš„æƒ…å†µï¼ŒæŒ‰ç…§ä¸Šè¿°ä»£ç å®ç°ï¼Œç¬¬ä¸€æ¬¡å¾ªç¯å³å¯å¾—å‡ºæ­£ç¡®ç»“æœã€‚ä½†å¾ªç¯å¹¶ä¸ä¼šåœæ­¢ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°ç»“æŸä¸ºæ­¢ã€‚æ˜¾ç„¶ï¼Œä¹‹åçš„å¾ªç¯éå†æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½ï¼Œç”¨æ¥è¡¨ç¤ºå½“å‰æ¬¡å¾ªç¯æ˜¯å¦æœ‰äº¤æ¢ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è¯´æ˜å½“å‰æ•°ç»„å·²ç»å®Œå…¨æ’åºï¼Œç›´æ¥è¿”å›ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public static int bubbleSortOpt2(int[] arr) &#123;</span><br><span class="line">    if (arr == null) &#123;</span><br><span class="line">        throw new NullPointerException();</span><br><span class="line">    &#125; else if (arr.length &lt; 2) &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int temp;</span><br><span class="line">    int count = 0;</span><br><span class="line">    for (int i = 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">        int flag = 1;</span><br><span class="line">        for (int j = 0; j &lt; arr.length - 1 - i; j++) &#123;</span><br><span class="line">            if (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">                temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + 1];</span><br><span class="line">                arr[j + 1] = temp;</span><br><span class="line">                flag = 0;</span><br><span class="line">            &#125;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        // æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œæ’åºå·²ç»å®Œæˆ</span><br><span class="line">        if (flag == 1) &#123;</span><br><span class="line">            return count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†’æ³¡æ’åºå†ä¼˜åŒ–ï¼š<br>æ¯”å¦‚ 3ã€4ã€2ã€1ã€6ã€7ã€8 è¿™ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€æ¬¡å¾ªç¯åï¼Œå˜ä¸º 3ã€2ã€1ã€4ã€6ã€7ã€8 çš„é¡ºåºï¼Œæˆ‘ä»¬å‘ç°ï¼Œ1 ä¹‹åçš„ 4 ã€6ã€7ã€8 å·²ç»æœ‰åºäº†ï¼Œç¬¬äºŒæ¬¡å¾ªç¯å°±æ²¡å¿…è¦å¯¹åé¢è¿™æ®µå†éå†æ¯”è¾ƒã€‚<br>è®°å½•æœ€åå‘ç”Ÿäº¤æ¢çš„åœ°ç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„åˆ†ç•Œç‚¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public static int bubbleSortOpt3(int[] arr) &#123;</span><br><span class="line"></span><br><span class="line">    if (arr == null) &#123;</span><br><span class="line">        throw new RuntimeException();</span><br><span class="line">    &#125; else if (arr.length &lt; 2) &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int temp;</span><br><span class="line">    int count = 0;</span><br><span class="line">    int len = arr.length - 1;</span><br><span class="line">    for (int i = 0; i &lt; len; i++) &#123;</span><br><span class="line">        // è®°å½•æœ€åä¸€æ¬¡äº¤æ¢ä½ç½®</span><br><span class="line">        int lastChange = 0;</span><br><span class="line">        for (int j = 0; j &lt; len; j++) &#123;</span><br><span class="line">            if (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">                temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + 1];</span><br><span class="line">                arr[j + 1] = temp;</span><br><span class="line">                // æ¯äº¤æ¢ä¸€æ¬¡æ›´æ–°ä¸€æ¬¡</span><br><span class="line">                lastChange = j;</span><br><span class="line">            &#125;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        // æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œæ’åºå·²ç»å®Œæˆ</span><br><span class="line">        if (lastChange == 0) &#123;</span><br><span class="line">            return count;</span><br><span class="line">        &#125;</span><br><span class="line">        len = lastChange;</span><br><span class="line">    &#125;</span><br><span class="line">    return count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…å¿«é€Ÿæ’åº"><a href="#âœ…å¿«é€Ÿæ’åº" class="headerlink" title="âœ…å¿«é€Ÿæ’åº"></a>âœ…å¿«é€Ÿæ’åº</h4><p>å¿«é€Ÿæ’åºçš„æ€æƒ³å¾ˆç®€å•ï¼Œå…ˆæ‰¾ä¸€ä¸ªåŸºå‡†æ•°ï¼Œå…ˆæŠŠå¾…æ’åºçš„æ•°ç»„æ ¹æ®åŸºå‡†æ•°æ‹†æˆå·¦å³ä¸¤ä¸ªåŒºé—´ï¼Œå·¦è¾¹éƒ½æ¯”ä¸­é—´çš„åŸºå‡†æ•°å°ï¼Œå³è¾¹éƒ½æ¯”åŸºå‡†æ•°å¤§ã€‚æ¥ç€å·¦å³ä¸¤è¾¹å„è‡ªå†åšåŒæ ·çš„æ“ä½œï¼Œå®Œæˆåå†æ‹†åˆ†å†ç»§ç»­ï¼Œä¸€ç›´åˆ°å„åŒºé—´åªæœ‰ä¸€ä¸ªæ•°ä¸ºæ­¢ã€‚<br>ç®—æ³•çš„å®ç°éœ€è¦ç”¨åˆ°é€’å½’ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public void quickSort(int[] arr, int start, int end) &#123;</span><br><span class="line"></span><br><span class="line">    if(start &lt; end) &#123;</span><br><span class="line">        // æŠŠæ•°ç»„ä¸­çš„é¦–ä½æ•°å­—ä½œä¸ºåŸºå‡†æ•°</span><br><span class="line">        int pivot = arr[start];</span><br><span class="line">        // è®°å½•éœ€è¦æ’åºçš„ä¸‹æ ‡</span><br><span class="line">        int low = start;</span><br><span class="line">        int high = end;</span><br><span class="line">        // å¾ªç¯æ‰¾åˆ°æ¯”åŸºå‡†æ•°å¤§çš„æ•°å’Œæ¯”åŸºå‡†æ•°å°çš„æ•°</span><br><span class="line">        while(low &lt; high) &#123;</span><br><span class="line">            // å³è¾¹çš„æ•°å­—æ¯”åŸºå‡†æ•°å¤§</span><br><span class="line">            while(low &lt; high &amp;&amp; arr[high] &gt;= pivot) &#123;</span><br><span class="line">                high--;</span><br><span class="line">            &#125;</span><br><span class="line">            // ä½¿ç”¨å³è¾¹çš„æ•°æ›¿æ¢å·¦è¾¹çš„æ•°</span><br><span class="line">            arr[low] = arr[high];</span><br><span class="line">            // å·¦è¾¹çš„æ•°å­—æ¯”åŸºå‡†æ•°å°</span><br><span class="line">            while(low &lt; high &amp;&amp; arr[low] &lt;= pivot) &#123;</span><br><span class="line">                low++;</span><br><span class="line">            &#125;</span><br><span class="line">            // ä½¿ç”¨å·¦è¾¹çš„æ•°æ›¿æ¢å³è¾¹çš„æ•°</span><br><span class="line">            arr[high] = arr[low];</span><br><span class="line">        &#125;</span><br><span class="line">        // æŠŠæ ‡å‡†å€¼èµ‹ç»™ä¸‹æ ‡é‡åˆçš„ä½ç½®</span><br><span class="line">        arr[low] = pivot;</span><br><span class="line">        // å¤„ç†æ‰€æœ‰å°çš„æ•°å­—</span><br><span class="line">        quickSort(arr, start, low);</span><br><span class="line">        // å¤„ç†æ‰€æœ‰å¤§çš„æ•°å­—</span><br><span class="line">        quickSort(arr, low + 1, end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨ Java å®ç°çš„å…«ç§å¸¸ç”¨æ’åºç®—æ³•:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/CSDN_handsome/article/details/109055036">https://blog.csdn.net/CSDN_handsome/article/details/109055036</a></p>
<p>æƒ³å®ç°ä¸€ä¸ªæ ¹æ®å¯¹è±¡æŸå±æ€§é¦–å°¾ç›¸æ¥çš„æ’åºï¼Œç”¨Comparatorè‡ªå®šä¹‰æ’åºæ²¡è¡Œå¾—é€šï¼Œæ‰€ä»¥ï¼šå…ˆå¼„ä¸€ä¸ªendçš„Setï¼Œç„¶åä¾¿åˆ©startï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åé€ ä¸€ä¸ªstart-å¯¹è±¡çš„Mapï¼Œç„¶åç”¨endæ‰¾å¯¹è±¡ï¼Œä¸€ä¸ªä¸€ä¸ªæ‰¾åˆ°ã€‚</p>
<h3 id="javaé“¾å¼ç¼–ç¨‹"><a href="#javaé“¾å¼ç¼–ç¨‹" class="headerlink" title="javaé“¾å¼ç¼–ç¨‹"></a>javaé“¾å¼ç¼–ç¨‹</h3><p>é“¾å¼ç¼–ç¨‹çš„åŸç†æ˜¯è¿”å›ä¸€ä¸ªthiså¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¿”å›å¯¹è±¡æœ¬èº«ï¼Œä»è€Œè¾¾åˆ°é“¾å¼æ•ˆæœã€‚</p>
<p>é“¾å¼ç¼–ç¨‹ï¼Œä¸­é—´æ“ä½œçš„è¿”å›å€¼éƒ½æ˜¯è‡ªå·±ï¼Œæ¯ä¸ªæ“ä½œçš„è¾“å‡ºæ˜¯ä½“ç°åœ¨è‡ªå·±å¯¹è±¡çš„æ”¹å˜ä¸­çš„ï¼Œç±»ä¼¼äº<code>Stream&lt;T&gt;</code></p>
<p>é“¾å¼ç¼–ç¨‹çš„æ¡ˆä¾‹ï¼š</p>
<p>1ã€StringBuilder å’Œ StringBufferä¸­çš„append()æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">StringBuilder buffer = new StringBuilder();</span><br><span class="line">buffer.append(&quot;ä½ &quot;).append(&quot;å¥½&quot;).append(&quot;!&quot;);</span><br><span class="line"></span><br><span class="line">æºç ï¼š</span><br><span class="line">@Override</span><br><span class="line">public StringBuilder append(String str) &#123;</span><br><span class="line">    super.append(str);</span><br><span class="line">    return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€String è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String string = String.valueOf(&quot;123&quot;).concat(&quot;,4567890&quot;).replace(&#x27;,&#x27;, &#x27;!&#x27;).substring(2, 8);</span><br><span class="line"></span><br><span class="line">æºç ï¼š</span><br><span class="line">è¿”å›çš„æ˜¯å¯¹è±¡æœ¬èº«ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨é“¾å¼ç¼–ç¨‹</span><br><span class="line">public static String valueOf(Object obj) &#123;</span><br><span class="line">    return (obj == null) ? &quot;null&quot; : obj.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public String concat(String str) &#123;</span><br><span class="line">     // çœç•¥...</span><br><span class="line">    return new String(buf, true);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€ Stream æµå¼è®¡ç®—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">list.stream()</span><br><span class="line">    // ç›¸åŒå…ƒç´ å»é‡</span><br><span class="line">    .distinct()</span><br><span class="line">    // å‡åºæ’åº</span><br><span class="line">    .sorted((c1, c2) -&gt; c1.compareTo(c2))</span><br><span class="line">    // éå†</span><br><span class="line">    .forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">æºç ï¼š</span><br><span class="line">æ–¹æ³•è¿”å›çš„æ˜¯å¯¹è±¡æœ¬èº«ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨é“¾å¼ç¼–ç¨‹</span><br><span class="line">Stream&lt;T&gt; distinct();</span><br><span class="line">Stream&lt;T&gt; sorted(Comparator&lt;? super T&gt; comparator);</span><br></pre></td></tr></table></figure>

<p>è‡ªå·±åšä¸€ä¸ªé“¾å¼ç¼–ç¨‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Person person = new Person();</span><br><span class="line">        person.setAge(10).setName(&quot;11&quot;);</span><br><span class="line">        System.out.println(person);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @ToString</span><br><span class="line">    static class Person &#123;</span><br><span class="line">        private String name;</span><br><span class="line">        private Integer age;</span><br><span class="line"></span><br><span class="line">        public Person setName(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line">        public Person setAge(Integer age) &#123;</span><br><span class="line">            this.age = age;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="javaæ•°ç»„ã€å­—ç¬¦ä¸²ã€listçš„æœ€å¤§é•¿åº¦"><a href="#javaæ•°ç»„ã€å­—ç¬¦ä¸²ã€listçš„æœ€å¤§é•¿åº¦" class="headerlink" title="javaæ•°ç»„ã€å­—ç¬¦ä¸²ã€listçš„æœ€å¤§é•¿åº¦"></a>javaæ•°ç»„ã€å­—ç¬¦ä¸²ã€listçš„æœ€å¤§é•¿åº¦</h3><p>âœ…æ•°ç»„çš„æœ€å¤§é•¿åº¦ï¼š<br>æ•°ç»„çš„lengthå±æ€§æ˜¯intç±»å‹ï¼Œå 4ä¸ªå­—èŠ‚ï¼Œæœ€å¤§å€¼ä¸ºInteger.MAX_VALUE= 2^31-1ã€21äº¿å¤šã€‘<br>æ³¨æ„ï¼šè¿™æ˜¯ç†è®ºä¸Šçš„æœ€å¤§é•¿åº¦ï¼Œå †å†…å­˜ä¸ä¸€å®šèƒ½å¼€è¾Ÿé‚£ä¹ˆå¤§çš„å­˜å‚¨ç©ºé—´æ¥å­˜å‚¨è¯¥æ•°ç»„ã€‚</p>
<p>âœ…å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ï¼š<br>è¿è¡Œæ—¶ï¼š<br>Stringã€StringBuilderã€StringBufferåº•å±‚éƒ½æ˜¯åŸºäºå­—ç¬¦æ•°ç»„char[ ]çš„ï¼Œè¯¥æ•°ç»„çš„æœ€å¤§é•¿åº¦ä¹Ÿä¸ºInteger.MAX_VALUEï¼Œæ‰€ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²æœ€å¤§21äº¿å¤šä¸ªå­—ç¬¦ã€æ¯ä¸ªå­—ç¬¦åœ¨java8ä¸­å 1ä¸ªå­—èŠ‚ã€‘ï¼Œå³å 2^32-2ä¸ªå­—èŠ‚ï¼Œå³å·®2ä¸ªå­—èŠ‚è¾¾åˆ°4GBã€‚<br>2^10å­—èŠ‚=1KBï¼Œ2^20=1MBï¼Œ2^30=1GB</p>
<p>ç¼–è¯‘æ—¶ï¼š<br>javaæºç é€šè¿‡javacç¼–è¯‘åç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œé™æ€å¸¸é‡æ± ä¸­å­—ç¬¦ä¸²å¸¸é‡çš„é•¿åº¦æœ€å¤šä¸º65535ï¼Œå› ä¸ºJVMä¸ºäº†è§£å†³å†å²ä¸Šçš„ä¸€ä¸ªBUGï¼Œæ‰€ä»¥å¼ºåˆ¶è¦æ±‚ç¼–è¯‘æ—¶å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ä¸º65534ã€‚</p>
<p>âœ…ArrayListå’ŒLinkedListçš„æœ€å¤§é•¿åº¦<br>ArrayListåº•å±‚æ˜¯æ•°ç»„ï¼Œæœ€å¤§å€¼ä¸ºInteger.MAX_VALUE= 231-1ã€21äº¿å¤šã€‘<br>LinkedListåº•å±‚æ˜¯é“¾è¡¨ï¼Œç†è®ºæ˜¯æ— ä¸Šé™é•¿åº¦ã€‚</p>
<h3 id="Javaå…ƒç»„Tuple"><a href="#Javaå…ƒç»„Tuple" class="headerlink" title="Javaå…ƒç»„Tuple"></a>Javaå…ƒç»„Tuple</h3><p>Javaä¸­çš„Tupleæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ çš„æ•°æ®ç±»å‹å¯ä¸åŒã€‚Tupleä¸Listé›†åˆç±»ä¼¼ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼ŒListé›†åˆåªèƒ½å­˜å‚¨ä¸€ç§æ•°æ®ç±»å‹ï¼Œè€ŒTupleå¯å­˜å‚¨å¤šç§æ•°æ®ç±»å‹ã€‚<br>å¯èƒ½ä½ ä¼šè¯´ï¼ŒObjectç±»å‹çš„Listå®é™…ä¹Ÿæ˜¯å¯ä»¥å­˜å‚¨å¤šç§ç±»å‹çš„å•Šï¼Ÿä½†æ˜¯åœ¨åˆ›å»ºListçš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šå…ƒç´ æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯åªèƒ½æŒ‡å®šä¸ºObjectç±»å‹ï¼Œè·å–çš„å…ƒç´ ç±»å‹å°±æ˜¯Objectï¼Œå¦‚æœ‰éœ€è¦åˆ™è¦è¿›è¡Œå¼ºè½¬ã€‚è€ŒTupleåœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œåˆ™å¯ä»¥ç›´æ¥æŒ‡å®šå¤šä¸ªå…ƒç´ æ•°æ®ç±»å‹ã€‚</p>
<p>å…ƒç»„ï¼ˆtupleï¼‰æ˜¯å…³ç³»æ•°æ®åº“ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼Œå…³ç³»æ˜¯ä¸€å¼ è¡¨ï¼Œè¡¨ä¸­çš„æ¯è¡Œï¼ˆå³æ•°æ®åº“ä¸­çš„æ¯æ¡è®°å½•ï¼‰å°±æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œæ¯åˆ—å°±æ˜¯ä¸€ä¸ªå±æ€§ã€‚ åœ¨äºŒç»´è¡¨é‡Œï¼Œå…ƒç»„ä¹Ÿç§°ä¸ºè¡Œã€‚å…³ç³»æ•°æ®åº“ä¸­çš„ ä¸€æ¡è®°å½•å°±æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œ ä¸€ä¸ªè¡¨å°±æ˜¯ä¸€ä¸ªå…³ç³»ï¼Œ çºªå½•ç»„æˆè¡¨ï¼Œ å…ƒç»„ç”Ÿæˆå…³ç³»ï¼Œ è¿™å°±æ˜¯å…³ç³»æ•°æ®åº“çš„æ ¸å¿ƒç†å¿µã€‚</p>
<p>å…ƒç»„çš„ä½¿ç”¨å°±æ˜¯é€šè¿‡æ³›å‹å®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åå»ä¿å­˜å¤šä¸ªç±»å‹å±æ€§ã€‚æ‰€ä»¥å¯ä»¥è®¤ä¸ºå…ƒç»„å®Œå…¨æ˜¯åŸºäºæ³›å‹çš„ã€‚è¿”å›çš„æ‰€æœ‰ç±»å‹å±æ€§å¤–åŒ…ä¸€å±‚å¯¹è±¡ç„¶åè¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå…¶å®å°±æ˜¯ä½œä¸ºå…ƒç»„çš„å®ç°å®šä¹‰ã€‚</p>
<p>å…ƒç»„ä¸åŒäºListï¼ŒListå­˜å‚¨ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œè™½ç„¶ä¹Ÿå¯ä»¥å­˜å‚¨ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œé‚£å°±ä¸ç¬¦åˆæ³›å‹äº†ã€‚</p>
<p>å…ƒç»„ä¸åŒäºæ•°ç»„ï¼Œæ•°ç»„ç§å­˜å‚¨çš„ç›¸åŒçš„æ•°æ®ç±»å‹ã€‚</p>
<p>å…ƒç»„ä¸åŒäºmapï¼Œmapç±»å‹æ˜¯é”®å€¼å¯¹å­˜åœ¨çš„ï¼Œè€Œå…ƒç»„ä¸­çš„å€¼ï¼Œå€¼ä¹‹é—´æ²¡æœ‰å…³ç³»ã€‚</p>
<p>å…ƒç»„çš„å€¼å¯ä»¥æ˜¯ä¸åŒæ•°æ®ç±»å‹ï¼Œå€¼ä¸å€¼ä¹‹é—´æ²¡æœ‰å…³ç³»ã€‚</p>
<p>ç†è§£ï¼šå…ƒç¥–ç›¸å½“äºå®šä¹‰ä¸€ä¸ªVOï¼Œé‡Œé¢æœ‰ä¸åŒçš„å±æ€§ç±»å‹ï¼Œå¯ä»¥åŒ…è£…ä¸åŒç±»å‹ã€‚å’ŒliståŒºåˆ«æ˜¯ï¼Œåå…ƒç¥–å°±å¯ä»¥æ”¾10ä¸ªä¸åŒç±»å‹çš„æ•°æ®ã€‚å…ƒç¥–çš„ä¼˜ç‚¹å…¶å®è¿˜æ˜¯å¯ä»¥é˜²æ­¢ä»£ç çš„å†—ä½™ï¼Œä¸ç”¨å†™æ›´å¤šçš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªè¿”å›å¤šä¸ªæˆ‘æƒ³è¦çš„ç±»å‹å±æ€§ã€‚ä¸Šé¢çš„Pairå°±æ˜¯å®ç°è¿™ä¹ˆä¸€ä¸ªåŠŸèƒ½ï¼Œä¹Ÿæ˜¯å…ƒç¥–ã€‚</p>
<hr>
<p>ä¾èµ–JaråŒ…ï¼šjavatuples</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.javatuples&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;javatuples&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>jaråŒ…ä¸­çš„ç»“æ„å¾ˆç®€å•ï¼Œå…¶ä¸­çš„ç±»ä¸»è¦æ˜¯tupleåŸºç¡€ç±»ã€æ‰©å±•çš„ä¸€å…ƒç»„ã€äºŒå…ƒç»„â€¦åå…ƒç»„ï¼Œä»¥åŠé”®å€¼å¯¹å…ƒç»„ï¼›æ¥å£çš„ä½œç”¨æ˜¯æä¾›ã€è·å–åˆ›å»ºå„å…ƒç»„æ—¶ä¼ å…¥å‚æ•°å€¼ã€‘çš„æ–¹æ³•ã€‚</p>
<p>å…¶ä¸­ä¸‰å…ƒç¥–çš„æºç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package org.javatuples;</span><br><span class="line"></span><br><span class="line">import java.util.Collection;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line"></span><br><span class="line">import org.javatuples.valueintf.IValue0;</span><br><span class="line">import org.javatuples.valueintf.IValue1;</span><br><span class="line">import org.javatuples.valueintf.IValue2;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * A tuple of three elements.</span><br><span class="line"> * &lt;/p&gt; </span><br><span class="line"> * </span><br><span class="line"> * @since 1.0</span><br><span class="line"> * </span><br><span class="line"> * @author Daniel Fern&amp;aacute;ndez</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public final class Triplet&lt;A,B,C&gt; </span><br><span class="line">        extends Tuple</span><br><span class="line">        implements IValue0&lt;A&gt;,</span><br><span class="line">                    IValue1&lt;B&gt;,</span><br><span class="line">                    IValue2&lt;C&gt; &#123;</span><br><span class="line"></span><br><span class="line">    private static final long serialVersionUID = -1877265551599483740L;</span><br><span class="line"></span><br><span class="line">    private static final int SIZE = 3;</span><br><span class="line"></span><br><span class="line">    private final A val0;</span><br><span class="line">    private final B val1;</span><br><span class="line">    private final C val2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static &lt;A,B,C&gt; Triplet&lt;A,B,C&gt; with(final A value0, final B value1, final C value2) &#123;</span><br><span class="line">        return new Triplet&lt;A,B,C&gt;(value0,value1,value2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬è°ƒç”¨é™æ€æ–¹æ³•withï¼Œä¼ å…¥å…ƒç»„æ•°æ®ï¼Œåˆ›å»ºä¸€ä¸ªå…ƒç»„ã€‚å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå·¥å…·ç±»ï¼Œæä¾›å…¬å…±æ–¹æ³•ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°ä¸ªæ•°ï¼Œè¿”å›ä¸åŒçš„å…ƒç»„å¯¹è±¡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package com.liuxuan.study;</span><br><span class="line"></span><br><span class="line">import com.liuxuan.repository.domain.Student;</span><br><span class="line">import org.javatuples.Pair;</span><br><span class="line">import org.javatuples.Triplet;</span><br><span class="line">import org.javatuples.Unit;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author: liuxuan</span><br><span class="line"> * @date: 2023-02-06 22:32</span><br><span class="line"> **/</span><br><span class="line">public class TupleUtils&#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å•å…ƒç´ å…ƒç¥–</span><br><span class="line">     */</span><br><span class="line">    public static &lt;A&gt; Unit&lt;A&gt; with(final A value0) &#123;</span><br><span class="line">        return Unit.with(value0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åŒå…ƒç´ å…ƒç¥–</span><br><span class="line">     */</span><br><span class="line">    public static &lt;A, B&gt; Pair&lt;A, B&gt; with(final A value0, final B value1) &#123;</span><br><span class="line">        return Pair.with(value0, value1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ä¸‰å…ƒç´ å…ƒç¥–</span><br><span class="line">     */</span><br><span class="line">    public static &lt;A, B, C&gt; Triplet&lt;A, B, C&gt; with(final A value0, final B value1, final C value2) &#123;</span><br><span class="line">        return Triplet.with(value0, value1, value2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Triplet&lt;Integer, String, String&gt;&gt; roleList = new ArrayList&lt;Triplet&lt;Integer, String, String&gt;&gt;();</span><br><span class="line"></span><br><span class="line">        Triplet&lt;Integer, String, String&gt; studentTriplet = TupleUtils.with(11, &quot;sid&quot;, &quot;graduate&quot;);</span><br><span class="line">        Triplet&lt;Integer, String, String&gt; teacherTriplet = TupleUtils.with(22, &quot;tid&quot;, &quot;graduate&quot;);</span><br><span class="line">        Triplet&lt;Integer, String, String&gt; programmerTriplet = TupleUtils.with(33, &quot;id&quot;, &quot;graduate&quot;);</span><br><span class="line"></span><br><span class="line">        roleList.add(studentTriplet);</span><br><span class="line">        roleList.add(teacherTriplet);</span><br><span class="line">        roleList.add(programmerTriplet);</span><br><span class="line"></span><br><span class="line">        for (Triplet&lt;Integer, String, String&gt; triplet : roleList) &#123;</span><br><span class="line">            System.out.println(triplet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TupleUtilsä¸­æä¾›äº†withçš„é‡è½½æ–¹æ³•ï¼Œè°ƒç”¨æ—¶æ ¹æ®ä¼ å…¥çš„å‚æ•°å€¼ä¸ªæ•°ï¼Œè¿”å›å¯¹åº”çš„å…ƒç»„å¯¹è±¡ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35006663/article/details/100301416">https://blog.csdn.net/qq_35006663/article/details/100301416</a></p>
<hr>
<p>org.apache.commons.lang3.tuple ä¸­çš„å…ƒç¥–</p>
<p>ç”¨äºå¤„ç†ä¸€å¯¹é”®å€¼çš„å¯¹è±¡pairç±»ä¼¼äºMap.entryï¼Œcommons lang3å¢åŠ äº†å¯ä»¥å¤„ç†3ä¸ªå€¼çš„TripleåŸºç±»ï¼Œæ­¤åŒ…ä¸‹å®šä¹‰äº†<code>Pair&lt;L,R&gt;</code>æŠ½è±¡åŸºç±»ï¼ŒåŠMutablePair,MutableTriple,ImmutablePair,ImmutableTripleå­ç±»ã€‚ä¸€ä¸ªçº¿ç¨‹éå®‰å…¨ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ã€‚</p>
<p>æ¥å£ï¼š<br>1.<code>Pair</code>ï¼šå°è£…ä¸€å¯¹é”®å€¼å¯¹ã€‚<br>å®ç°ç±»ï¼šå¯å˜ï¼š<code>MutablePair&lt;L,R&gt;</code>ï¼Œä¸å¯å˜ï¼š<code>ImmutablePair</code><br>2.<code>Triple</code>ï¼šå°è£…3ä¸ªå€¼çš„ç±»<br>å®ç°ç±»ï¼š<code>ImmutableTriple</code>; <code>MuttableTriple&lt;L,M,R&gt;</code></p>
<h3 id="Preconditions-checkArgumentæ ¡éªŒå­—æ®µ"><a href="#Preconditions-checkArgumentæ ¡éªŒå­—æ®µ" class="headerlink" title="Preconditions.checkArgumentæ ¡éªŒå­—æ®µ"></a>Preconditions.checkArgumentæ ¡éªŒå­—æ®µ</h3><p>guavaä¸­çš„é™æ€æ–¹æ³•ï¼Œç”¨æ¥ç¡®è®¤å‚æ•°æ˜¯ä¸æ˜¯ç¬¦åˆè¦æ±‚ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;guava&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;31.0.1-jre&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String param = &quot;&quot;;</span><br><span class="line">//æ—§å¼å†™æ³•</span><br><span class="line">if (StringUtils.isEmpty(param)) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;paramå­—æ®µä¸èƒ½ä¸ºç©º&quot;);</span><br><span class="line">&#125;</span><br><span class="line">//æ–°å¼å†™æ³•ï¼šæœŸæœ›è¿™ä¸ªå­—æ®µä¸èƒ½ä¸ºç©º</span><br><span class="line">Preconditions.checkArgument(StringUtils.isNotEmpty(param), &quot;paramå­—æ®µä¸èƒ½ä¸ºç©º&quot;);</span><br></pre></td></tr></table></figure>

<p>æ–°å¼çš„æ ¡éªŒæ˜¯ï¼šè¦æ±‚æˆ‘ä»¬å¯¹æŸä¸ªå­—æ®µçš„è¦æ±‚æ˜¯ä»€ä¹ˆï¼Œå½“é€»è¾‘æœªå‘½ä¸­è¦æ±‚æ—¶ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h3 id="é˜»å¡é˜Ÿåˆ—"><a href="#é˜»å¡é˜Ÿåˆ—" class="headerlink" title="é˜»å¡é˜Ÿåˆ—"></a>é˜»å¡é˜Ÿåˆ—</h3><p>drainTo()æ–¹æ³•ï¼š<br>ArrayBlockingQueueæ˜¯æœ‰ç•Œçš„é˜»å¡é˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—å†…éƒ¨ä½¿ç”¨æ•°ç»„æ”¯æŒçš„å…ƒç´ å­˜å‚¨ã€‚<br>drainTo()æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å…ƒç´ ä¼ è¾“åˆ°é›†åˆã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int capacity = 10;</span><br><span class="line">ArrayBlockingQueue queue = new ArrayBlockingQueue(capacity);</span><br><span class="line">queue.add(11);</span><br><span class="line">queue.add(22);</span><br><span class="line">queue.add(33);</span><br><span class="line">System.out.println(&quot;queue = &quot; + queue); //[11, 22, 33]</span><br><span class="line">ArrayList list = new ArrayList();</span><br><span class="line">queue.drainTo(list);</span><br><span class="line">System.out.println(&quot;queue = &quot; + queue); //[]</span><br><span class="line">System.out.println(&quot;collection = &quot; + list); //[11, 22, 33]</span><br></pre></td></tr></table></figure>

<h3 id="javaè·å–æœ¬åœ°ip"><a href="#javaè·å–æœ¬åœ°ip" class="headerlink" title="javaè·å–æœ¬åœ°ip"></a>javaè·å–æœ¬åœ°ip</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String localIP = InetAddress.getLocalHost().getHostAddress();</span><br><span class="line">System.out.println(localIP);</span><br></pre></td></tr></table></figure>

<h3 id="guavaä¸­çš„ImmutableList"><a href="#guavaä¸­çš„ImmutableList" class="headerlink" title="guavaä¸­çš„ImmutableList"></a>guavaä¸­çš„ImmutableList</h3><p>ImmutableListæ˜¯ä¸€ä¸ªä¸å¯å˜ã€çº¿ç¨‹å®‰å…¨çš„åˆ—è¡¨é›†åˆï¼Œå®ƒåªä¼šè·å–ä¼ å…¥å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œè€Œä¸ä¼šå½±å“åˆ°åŸæ¥çš„å˜é‡æˆ–è€…å¯¹è±¡ã€‚</p>
<p>ImmutableListåˆ›å»ºä¸å¯å˜å¯¹è±¡æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨é™æ€ofæ–¹æ³•ï¼Œå¦å¤–ä¸€ç§æ˜¯ä½¿ç”¨é™æ€å†…éƒ¨ç±»Builderã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">é™æ€å†…éƒ¨ç±»æ„å»ºæ–¹æ³• :</span><br><span class="line">ImmutableList&lt;Integer&gt; list = ImmutableList .&lt;Integer&gt;builder()</span><br><span class="line">                        .add(12)</span><br><span class="line">                        .add(23)</span><br><span class="line">                        .add(34)</span><br><span class="line">                        .build();</span><br><span class="line"></span><br><span class="line">é™æ€æ–¹æ³•æä¾›äº†å¤šä¸ªå‚æ•°çš„ofé™æ€æ–¹æ³•:</span><br><span class="line">ImmutableList&lt;String&gt; list3 = ImmutableList .&lt;String&gt;of(&quot;12&quot;,&quot;23&quot;);</span><br><span class="line"></span><br><span class="line">å¤åˆ¶æ•°ç»„ä¸­çš„å…ƒç´ åˆ°ImmutableListä¸­:</span><br><span class="line"> List&lt;String&gt; list4 = new ArrayList&lt;String&gt;();</span><br><span class="line">list4.add(&quot;1&quot;);</span><br><span class="line">list4.add(&quot;2&quot;);</span><br><span class="line">list4.add(&quot;3&quot;);</span><br><span class="line">//copyæ•°ç»„list4çš„ä¸€ä¸ªå‰¯æœ¬</span><br><span class="line">List&lt;String&gt; list5 = ImmutableList .&lt;String&gt;copyOf(list4);</span><br></pre></td></tr></table></figure>

<h3 id="System-getProperty"><a href="#System-getProperty" class="headerlink" title="System.getProperty()"></a>System.getProperty()</h3><p>è·å–ç³»ç»Ÿå±æ€§ï¼Œå³åœ¨javaè™šæ‹Ÿæœºå¯åŠ¨æ—¶å®šä¹‰çš„ç¯å¢ƒå˜é‡çš„å€¼ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å±æ€§åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§çš„é»˜è®¤å€¼ã€‚</p>
<p><code>String s = System.getProperty(&quot;line.separator&quot;)</code> è·å–ç³»ç»Ÿç©ºæ ¼ã€‚</p>
<p>System.getProperty() æ˜¯è·å–ç³»ç»Ÿçš„ç›¸å…³å±æ€§ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç¼–ç ã€æ“ä½œç³»ç»Ÿåç§°ã€åŒºåŸŸã€ç”¨æˆ·åç­‰ï¼Œæ­¤å±æ€§ä¸€èˆ¬æ˜¯ç”± JVM è‡ªåŠ¨è·å–ï¼Œä¸èƒ½è®¾ç½®ã€‚è¿™ä¸ªå¿…é¡»æ¥æ”¶ä¸€ä¸ª String ç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ª String ç±»å‹çš„å€¼ã€‚å¦‚æœæƒ³è¦è·å–æ‰€æœ‰çš„ç³»ç»Ÿçš„ç›¸å…³å±æ€§å€¼å¯ä»¥ä½¿ç”¨ System.getProperties() æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">java.runtime.name-------Java(TM) SE Runtime Environment</span><br><span class="line">sun.boot.library.path-------C:\Program Files\Java\jdk1.8.0_60\jre\bin</span><br><span class="line">java.vm.version-------25.60-b23</span><br><span class="line">java.vm.vendor-------Oracle Corporation</span><br><span class="line">java.vendor.url-------http://java.oracle.com/</span><br><span class="line">path.separator-------;</span><br><span class="line">java.vm.name-------Java HotSpot(TM) 64-Bit Server VM</span><br><span class="line">file.encoding.pkg-------sun.io</span><br><span class="line">user.country-------CN</span><br><span class="line">user.script-------</span><br><span class="line">sun.java.launcher-------SUN_STANDARD</span><br><span class="line">sun.os.patch.level-------</span><br><span class="line">java.vm.specification.name-------Java Virtual Machine Specification</span><br><span class="line">user.dir-------F:\siwei\dayunmotor-tbox\dayunmotor-forward-hbase</span><br><span class="line">java.runtime.version-------1.8.0_60-b27</span><br><span class="line">java.awt.graphicsenv-------sun.awt.Win32GraphicsEnvironment</span><br><span class="line">java.endorsed.dirs-------C:\Program Files\Java\jdk1.8.0_60\jre\lib\endorsed</span><br><span class="line">os.arch-------amd64</span><br><span class="line">java.io.tmpdir-------C:\Users\yesway\AppData\Local\Temp\</span><br><span class="line">line.separator-------</span><br><span class="line"></span><br><span class="line">java.vm.specification.vendor-------Oracle Corporation</span><br><span class="line">user.variant-------</span><br><span class="line">os.name-------Windows 10</span><br><span class="line">sun.jnu.encoding-------GBK</span><br><span class="line">java.library.path-------C:\Program Files\Java\jdk1.8.0_60\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\ProgramData\Oracle\Java\javapath;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\WINDOWS\System32\OpenSSH\;D:\Program Files\Git\cmd;C:\Users\yesway\AppData\Local\Microsoft\WindowsApps;;.</span><br><span class="line">java.specification.name-------Java Platform API Specification</span><br><span class="line">java.class.version-------52.0</span><br><span class="line">sun.management.compiler-------HotSpot 64-Bit Tiered Compilers</span><br><span class="line">os.version-------10.0</span><br><span class="line">user.home-------C:\Users\yesway</span><br><span class="line">user.timezone-------</span><br><span class="line">java.awt.printerjob-------sun.awt.windows.WPrinterJob</span><br><span class="line">file.encoding-------UTF-8</span><br><span class="line">java.specification.version-------1.8</span><br><span class="line">java.class.path-------C:\Program Files\Java\jdk1.8.0_60\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\rt.jar;F:\siwei\dayunmotor-tbox\dayunmotor-forward-hbase\target\classes;D:\dayunMaven\org\springframework\boot\spring-boot-starter\2.4.0\spring-boot-starter-2.4.0.jar;D:\dayunMaven\org\springframework\boot\spring-boot\2.4.0\spring-boot-2.4.0.jar;D:\dayunMaven\org\springframework\spring-context\5.3.1\spring-context-5.3.1.jar;D:\dayunMaven\org\springframework\boot\spring-boot-autoconfigure\2.4.0\spring-boot-autoconfigure-2.4.0.jar;D:\dayunMaven\jakarta\annotation\jakarta.annotation-api\1.3.5\jakarta.annotation-api-1.3.5.jar;D:\dayunMaven\org\springframework\spring-core\5.3.1\spring-core-5.3.1.jar;D:\dayunMaven\org\springframework\spring-jcl\5.3.1\spring-jcl-5.3.1.jar;D:\dayunMaven\org\yaml\snakeyaml\1.27\snakeyaml-1.27.jar;D:\dayunMaven\org\springframework\boot\spring-boot-starter-aop\2.4.0\spring-boot-starter-aop-2.4.0.jar;D:\dayunMaven\org\springframework\spring-aop\5.3.1\spring-aop-5.3.1.jar;D:\dayunMaven\org\springframework\spring-beans\5.3.1\spring-beans-5.3.1.jar;D:\dayunMaven\org\aspectj\aspectjweaver\1.9.6\aspectjweaver-1.9.6.jar;D:\dayunMaven\org\springframework\boot\spring-boot-starter-amqp\2.4.0\spring-boot-starter-amqp-2.4.0.jar;D:\dayunMaven\org\springframework\spring-messaging\5.3.1\spring-messaging-5.3.1.jar;D:\dayunMaven\org\springframework\amqp\spring-rabbit\2.3.1\spring-rabbit-2.3.1.jar;D:\dayunMaven\org\springframework\amqp\spring-amqp\2.3.1\spring-amqp-2.3.1.jar;D:\dayunMaven\org\springframework\retry\spring-retry\1.3.0\spring-retry-1.3.0.jar;D:\dayunMaven\javax\annotation\javax.annotation-api\1.3.2\javax.annotation-api-1.3.2.jar;D:\dayunMaven\com\rabbitmq\amqp-client\5.9.0\amqp-client-5.9.0.jar;D:\dayunMaven\org\springframework\spring-tx\5.3.1\spring-tx-5.3.1.jar;D:\dayunMaven\org\springframework\boot\spring-boot-starter-log4j2\2.4.0\spring-boot-starter-log4j2-2.4.0.jar;D:\dayunMaven\org\apache\logging\log4j\log4j-slf4j-impl\2.13.3\log4j-slf4j-impl-2.13.3.jar;D:\dayunMaven\org\apache\logging\log4j\log4j-jul\2.13.3\log4j-jul-2.13.3.jar;D:\dayunMaven\org\slf4j\jul-to-slf4j\1.7.30\jul-to-slf4j-1.7.30.jar;D:\dayunMaven\org\springframework\boot\spring-boot-starter-web\2.4.0\spring-boot-starter-web-2.4.0.jar;D:\dayunMaven\org\springframework\boot\spring-boot-starter-json\2.4.0\spring-boot-starter-json-2.4.0.jar;D:\dayunMaven\com\fasterxml\jackson\datatype\jackson-datatype-jdk8\2.11.3\jackson-datatype-jdk8-2.11.3.jar;D:\dayunMaven\com\fasterxml\jackson\module\jackson-module-parameter-names\2.11.3\jackson-module-parameter-names-2.11.3.jar;D:\dayunMaven\org\springframework\boot\spring-boot-starter-tomcat\2.4.0\spring-boot-starter-tomcat-2.4.0.jar;D:\dayunMaven\org\apache\tomcat\embed\tomcat-embed-core\9.0.39\tomcat-embed-core-9.0.39.jar;D:\dayunMaven\org\glassfish\jakarta.el\3.0.3\jakarta.el-3.0.3.jar;D:\dayunMaven\org\apache\tomcat\embed\tomcat-embed-websocket\9.0.39\tomcat-embed-websocket-9.0.39.jar;D:\dayunMaven\org\springframework\spring-web\5.3.1\spring-web-5.3.1.jar;D:\dayunMaven\org\springframework\spring-webmvc\5.3.1\spring-webmvc-5.3.1.jar;D:\dayunMaven\org\springframework\spring-expression\5.3.1\spring-expression-5.3.1.jar;D:\dayunMaven\net\minidev\json-smart\2.3\json-smart-2.3.jar;D:\dayunMaven\net\minidev\accessors-smart\1.2\accessors-smart-1.2.jar;D:\dayunMaven\org\ow2\asm\asm\5.0.4\asm-5.0.4.jar;D:\dayunMaven\org\springframework\boot\spring-boot-starter-data-redis\2.4.0\spring-boot-starter-data-redis-2.4.0.jar;D:\dayunMaven\org\springframework\data\spring-data-redis\2.4.1\spring-data-redis-2.4.1.jar;D:\dayunMaven\org\springframework\data\spring-data-keyvalue\2.4.1\spring-data-keyvalue-2.4.1.jar;D:\dayunMaven\org\springframework\data\spring-data-commons\2.4.1\spring-data-commons-2.4.1.jar;D:\dayunMaven\org\springframework\spring-oxm\5.3.1\spring-oxm-5.3.1.jar;D:\dayunMaven\org\springframework\spring-context-support\5.3.1\spring-context-support-5.3.1.jar;D:\dayunMaven\io\lettuce\lettuce-core\6.0.1.RELEASE\lettuce-core-6.0.1.RELEASE.jar;D:\dayunMaven\io\netty\netty-common\4.1.53.Final\netty-common-4.1.53.Final.jar;D:\dayunMaven\io\netty\netty-handler\4.1.53.Final\netty-handler-4.1.53.Final.jar;D:\dayunMaven\io\netty\netty-resolver\4.1.53.Final\netty-resolver-4.1.53.Final.jar;D:\dayunMaven\io\netty\netty-buffer\4.1.53.Final\netty-buffer-4.1.53.Final.jar;D:\dayunMaven\io\netty\netty-codec\4.1.53.Final\netty-codec-4.1.53.Final.jar;D:\dayunMaven\io\netty\netty-transport\4.1.53.Final\netty-transport-4.1.53.Final.jar;D:\dayunMaven\io\projectreactor\reactor-core\3.3.11.RELEASE\reactor-core-3.3.11.RELEASE.jar;D:\dayunMaven\org\reactivestreams\reactive-streams\1.0.3\reactive-streams-1.0.3.jar;D:\dayunMaven\commons-lang\commons-lang\2.6\commons-lang-2.6.jar;D:\dayunMaven\org\apache\commons\commons-pool2\2.8.0\commons-pool2-2.8.0.jar;D:\dayunMaven\org\projectlombok\lombok\1.18.8\lombok-1.18.8.jar;D:\dayunMaven\org\apache\logging\log4j\log4j-core\2.11.2\log4j-core-2.11.2.jar;D:\dayunMaven\org\apache\logging\log4j\log4j-api\2.11.2\log4j-api-2.11.2.jar;D:\dayunMaven\org\slf4j\slf4j-api\1.7.5\slf4j-api-1.7.5.jar;D:\dayunMaven\com\fasterxml\jackson\core\jackson-annotations\2.9.0\jackson-annotations-2.9.0.jar;D:\dayunMaven\com\alibaba\fastjson\1.2.47\fastjson-1.2.47.jar;D:\dayunMaven\org\apache\hadoop\hadoop-client\3.0.0\hadoop-client-3.0.0.jar;D:\dayunMaven\org\apache\hadoop\hadoop-hdfs-client\3.0.0\hadoop-hdfs-client-3.0.0.jar;D:\dayunMaven\com\squareup\okhttp\okhttp\2.4.0\okhttp-2.4.0.jar;D:\dayunMaven\com\squareup\okio\okio\1.4.0\okio-1.4.0.jar;D:\dayunMaven\org\apache\hadoop\hadoop-yarn-api\3.0.0\hadoop-yarn-api-3.0.0.jar;D:\dayunMaven\javax\xml\bind\jaxb-api\2.2.11\jaxb-api-2.2.11.jar;D:\dayunMaven\org\apache\hadoop\hadoop-yarn-client\3.0.0\hadoop-yarn-client-3.0.0.jar;D:\dayunMaven\org\apache\hadoop\hadoop-mapreduce-client-core\3.0.0\hadoop-mapreduce-client-core-3.0.0.jar;D:\dayunMaven\org\apache\hadoop\hadoop-yarn-common\3.0.0\hadoop-yarn-common-3.0.0.jar;D:\dayunMaven\org\eclipse\jetty\jetty-util\9.3.19.v20170502\jetty-util-9.3.19.v20170502.jar;D:\dayunMaven\com\sun\jersey\jersey-client\1.19\jersey-client-1.19.jar;D:\dayunMaven\com\fasterxml\jackson\module\jackson-module-jaxb-annotations\2.7.8\jackson-module-jaxb-annotations-2.7.8.jar;D:\dayunMaven\com\fasterxml\jackson\jaxrs\jackson-jaxrs-json-provider\2.7.8\jackson-jaxrs-json-provider-2.7.8.jar;D:\dayunMaven\com\fasterxml\jackson\jaxrs\jackson-jaxrs-base\2.7.8\jackson-jaxrs-base-2.7.8.jar;D:\dayunMaven\org\apache\hadoop\hadoop-mapreduce-client-jobclient\3.0.0\hadoop-mapreduce-client-jobclient-3.0.0.jar;D:\dayunMaven\org\apache\hadoop\hadoop-mapreduce-client-common\3.0.0\hadoop-mapreduce-client-common-3.0.0.jar;D:\dayunMaven\org\apache\hadoop\hadoop-annotations\3.0.0\hadoop-annotations-3.0.0.jar;D:\dayunMaven\org\apache\hbase\hbase-shaded-client\2.1.0\hbase-shaded-client-2.1.0.jar;D:\dayunMaven\com\github\stephenc\findbugs\findbugs-annotations\1.3.9-1\findbugs-annotations-1.3.9-1.jar;D:\dayunMaven\org\apache\htrace\htrace-core4\4.2.0-incubating\htrace-core4-4.2.0-incubating.jar;D:\dayunMaven\commons-logging\commons-logging\1.2\commons-logging-1.2.jar;D:\dayunMaven\org\apache\htrace\htrace-core\3.1.0-incubating\htrace-core-3.1.0-incubating.jar;D:\dayunMaven\log4j\log4j\1.2.17\log4j-1.2.17.jar;D:\dayunMaven\org\apache\yetus\audience-annotations\0.5.0\audience-annotations-0.5.0.jar;D:\dayunMaven\junit\junit\4.12\junit-4.12.jar;D:\dayunMaven\org\hamcrest\hamcrest-core\1.3\hamcrest-core-1.3.jar;D:\dayunMaven\org\apache\hadoop\hadoop-common\3.0.0\hadoop-common-3.0.0.jar;D:\dayunMaven\com\google\guava\guava\11.0.2\guava-11.0.2.jar;D:\dayunMaven\commons-cli\commons-cli\1.2\commons-cli-1.2.jar;D:\dayunMaven\org\apache\commons\commons-math3\3.1.1\commons-math3-3.1.1.jar;D:\dayunMaven\org\apache\httpcomponents\httpclient\4.5.2\httpclient-4.5.2.jar;D:\dayunMaven\org\apache\httpcomponents\httpcore\4.4.4\httpcore-4.4.4.jar;D:\dayunMaven\commons-codec\commons-codec\1.4\commons-codec-1.4.jar;D:\dayunMaven\commons-io\commons-io\2.4\commons-io-2.4.jar;D:\dayunMaven\commons-net\commons-net\3.1\commons-net-3.1.jar;D:\dayunMaven\commons-collections\commons-collections\3.2.2\commons-collections-3.2.2.jar;D:\dayunMaven\javax\servlet\javax.servlet-api\3.1.0\javax.servlet-api-3.1.0.jar;D:\dayunMaven\javax\servlet\jsp\jsp-api\2.1\jsp-api-2.1.jar;D:\dayunMaven\com\sun\jersey\jersey-core\1.19\jersey-core-1.19.jar;D:\dayunMaven\javax\ws\rs\jsr311-api\1.1.1\jsr311-api-1.1.1.jar;D:\dayunMaven\com\sun\jersey\jersey-servlet\1.19\jersey-servlet-1.19.jar;D:\dayunMaven\com\sun\jersey\jersey-json\1.19\jersey-json-1.19.jar;D:\dayunMaven\org\codehaus\jettison\jettison\1.1\jettison-1.1.jar;D:\dayunMaven\com\sun\xml\bind\jaxb-impl\2.2.3-1\jaxb-impl-2.2.3-1.jar;D:\dayunMaven\org\codehaus\jackson\jackson-core-asl\1.9.2\jackson-core-asl-1.9.2.jar;D:\dayunMaven\org\codehaus\jackson\jackson-mapper-asl\1.9.2\jackson-mapper-asl-1.9.2.jar;D:\dayunMaven\org\codehaus\jackson\jackson-jaxrs\1.9.2\jackson-jaxrs-1.9.2.jar;D:\dayunMaven\org\codehaus\jackson\jackson-xc\1.9.2\jackson-xc-1.9.2.jar;D:\dayunMaven\com\sun\jersey\jersey-server\1.19\jersey-server-1.19.jar;D:\dayunMaven\commons-beanutils\commons-beanutils\1.9.3\commons-beanutils-1.9.3.jar;D:\dayunMaven\org\apache\commons\commons-configuration2\2.1.1\commons-configuration2-2.1.1.jar;D:\dayunMaven\org\apache\commons\commons-lang3\3.4\commons-lang3-3.4.jar;D:\dayunMaven\org\slf4j\slf4j-log4j12\1.7.25\slf4j-log4j12-1.7.25.jar;D:\dayunMaven\org\apache\avro\avro\1.7.7\avro-1.7.7.jar;D:\dayunMaven\com\thoughtworks\paranamer\paranamer\2.3\paranamer-2.3.jar;D:\dayunMaven\org\xerial\snappy\snappy-java\1.0.5\snappy-java-1.0.5.jar;D:\dayunMaven\com\google\re2j\re2j\1.1\re2j-1.1.jar;D:\dayunMaven\com\google\protobuf\protobuf-java\2.5.0\protobuf-java-2.5.0.jar;D:\dayunMaven\org\apache\hadoop\hadoop-auth\3.0.0\hadoop-auth-3.0.0.jar;D:\dayunMaven\com\nimbusds\nimbus-jose-jwt\4.41.1\nimbus-jose-jwt-4.41.1.jar;D:\dayunMaven\com\github\stephenc\jcip\jcip-annotations\1.0-1\jcip-annotations-1.0-1.jar;D:\dayunMaven\org\apache\curator\curator-framework\2.12.0\curator-framework-2.12.0.jar;D:\dayunMaven\com\jcraft\jsch\0.1.54\jsch-0.1.54.jar;D:\dayunMaven\org\apache\curator\curator-client\2.12.0\curator-client-2.12.0.jar;D:\dayunMaven\org\apache\curator\curator-recipes\2.12.0\curator-recipes-2.12.0.jar;D:\dayunMaven\com\google\code\findbugs\jsr305\3.0.0\jsr305-3.0.0.jar;D:\dayunMaven\org\apache\zookeeper\zookeeper\3.4.9\zookeeper-3.4.9.jar;D:\dayunMaven\jline\jline\0.9.94\jline-0.9.94.jar;D:\dayunMaven\io\netty\netty\3.10.5.Final\netty-3.10.5.Final.jar;D:\dayunMaven\org\apache\commons\commons-compress\1.4.1\commons-compress-1.4.1.jar;D:\dayunMaven\org\tukaani\xz\1.0\xz-1.0.jar;D:\dayunMaven\org\apache\kerby\kerb-simplekdc\1.0.1\kerb-simplekdc-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerb-client\1.0.1\kerb-client-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerby-config\1.0.1\kerby-config-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerb-core\1.0.1\kerb-core-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerby-pkix\1.0.1\kerby-pkix-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerby-asn1\1.0.1\kerby-asn1-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerby-util\1.0.1\kerby-util-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerb-common\1.0.1\kerb-common-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerb-crypto\1.0.1\kerb-crypto-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerb-util\1.0.1\kerb-util-1.0.1.jar;D:\dayunMaven\org\apache\kerby\token-provider\1.0.1\token-provider-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerb-admin\1.0.1\kerb-admin-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerb-server\1.0.1\kerb-server-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerb-identity\1.0.1\kerb-identity-1.0.1.jar;D:\dayunMaven\org\apache\kerby\kerby-xdr\1.0.1\kerby-xdr-1.0.1.jar;D:\dayunMaven\org\codehaus\woodstox\stax2-api\3.1.4\stax2-api-3.1.4.jar;D:\dayunMaven\com\fasterxml\woodstox\woodstox-core\5.0.3\woodstox-core-5.0.3.jar;D:\dayunMaven\com\fasterxml\jackson\core\jackson-databind\2.9.6\jackson-databind-2.9.6.jar;D:\dayunMaven\com\fasterxml\jackson\core\jackson-core\2.9.6\jackson-core-2.9.6.jar;D:\dayunMaven\com\fasterxml\jackson\datatype\jackson-datatype-jsr310\2.9.6\jackson-datatype-jsr310-2.9.6.jar;D:\dayunMaven\com\google\code\gson\gson\2.6.2\gson-2.6.2.jar;D:\Program Files\JetBrains\IntelliJ IDEA 2020.2.4\lib\idea_rt.jar</span><br><span class="line">user.name-------yesway</span><br><span class="line">java.vm.specification.version-------1.8</span><br><span class="line">sun.java.command-------com.dayunmotor.forward.hbase.ForwardHbaseApplication</span><br><span class="line">java.home-------C:\Program Files\Java\jdk1.8.0_60\jre</span><br><span class="line">sun.arch.data.model-------64</span><br><span class="line">user.language-------zh</span><br><span class="line">java.specification.vendor-------Oracle Corporation</span><br><span class="line">awt.toolkit-------sun.awt.windows.WToolkit</span><br><span class="line">java.vm.info-------mixed mode</span><br><span class="line">java.version-------1.8.0_60</span><br><span class="line">java.ext.dirs-------C:\Program Files\Java\jdk1.8.0_60\jre\lib\ext;C:\WINDOWS\Sun\Java\lib\ext</span><br><span class="line">sun.boot.class.path-------C:\Program Files\Java\jdk1.8.0_60\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\rt.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\sunrsasign.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_60\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_60\jre\classes</span><br><span class="line">java.vendor-------Oracle Corporation</span><br><span class="line">file.separator-------\</span><br><span class="line">java.vendor.url.bug-------http://bugreport.sun.com/bugreport/</span><br><span class="line">sun.io.unicode.encoding-------UnicodeLittle</span><br><span class="line">sun.cpu.endian-------little</span><br><span class="line">sun.desktop-------windows</span><br><span class="line">sun.cpu.isalist-------amd64</span><br></pre></td></tr></table></figure>


<h3 id="ç”¨åå°„è·å–Javaå¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§åç§°å’Œå±æ€§å€¼"><a href="#ç”¨åå°„è·å–Javaå¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§åç§°å’Œå±æ€§å€¼" class="headerlink" title="ç”¨åå°„è·å–Javaå¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§åç§°å’Œå±æ€§å€¼"></a>ç”¨åå°„è·å–Javaå¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§åç§°å’Œå±æ€§å€¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectTest &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws NoSuchMethodException &#123;</span><br><span class="line">        Person person = new Person(&quot;zhangsan&quot;, 30, &quot;ç”·&quot;);</span><br><span class="line">        StringBuilder sbName = new StringBuilder();</span><br><span class="line">        StringBuilder sbValue = new StringBuilder();</span><br><span class="line">        String[] fieldNames = getFiledName(person);</span><br><span class="line"></span><br><span class="line">        for(int j=0 ; j&lt;fieldNames.length ; j++)&#123; //éå†æ‰€æœ‰å±æ€§</span><br><span class="line">            String name = fieldNames[j]; //è·å–å±æ€§çš„åå­—</span><br><span class="line">            Object value = getFieldValueByName(name, person);</span><br><span class="line">            sbName.append(name);</span><br><span class="line">            sbValue.append(value);</span><br><span class="line">            if(j != fieldNames.length - 1) &#123;</span><br><span class="line">                sbName.append(&quot;/&quot;);</span><br><span class="line">                sbValue.append(&quot;/&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;attribute name:&quot;+sbName.toString());</span><br><span class="line">        System.out.println(&quot;attribute value:&quot;+sbValue.toString());</span><br><span class="line">        // æ ¹æ®Methodè·å–ç±»å</span><br><span class="line">        Method method = person.getClass().getMethod(&quot;printName&quot;, new Class[] &#123;&#125;);</span><br><span class="line">        String className = method.getDeclaringClass().getName(); //ç±»å</span><br><span class="line">        String methodName = method.getName();</span><br><span class="line">        System.out.println(&quot;full name:&quot; + className + &quot;.&quot; + methodName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è·å–å±æ€§åæ•°ç»„</span><br><span class="line">     * */</span><br><span class="line">    private static String[] getFiledName(Object o)&#123;</span><br><span class="line">        Field[] fields=o.getClass().getDeclaredFields();</span><br><span class="line">        String[] fieldNames=new String[fields.length];</span><br><span class="line">        for(int i=0;i&lt;fields.length;i++)&#123;</span><br><span class="line">            // System.out.println(fields[i].getType());</span><br><span class="line">            fieldNames[i]=fields[i].getName();</span><br><span class="line">        &#125;</span><br><span class="line">        return fieldNames;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ ¹æ®å±æ€§åè·å–å±æ€§å€¼</span><br><span class="line">     **/</span><br><span class="line">    private static Object getFieldValueByName(String fieldName, Object o) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            String firstLetter = fieldName.substring(0, 1).toUpperCase();</span><br><span class="line">            String getter = &quot;get&quot; + firstLetter + fieldName.substring(1);</span><br><span class="line">            Method method = o.getClass().getMethod(getter, new Class[] &#123;&#125;);</span><br><span class="line">            Object value = method.invoke(o, new Object[] &#123;&#125;);</span><br><span class="line">            return value;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static class Person &#123;</span><br><span class="line">        private String name;</span><br><span class="line">        private int age;</span><br><span class="line">        private String gender;</span><br><span class="line"></span><br><span class="line">        public Person(String n,int a,String g) &#123;</span><br><span class="line">            name = n;</span><br><span class="line">            age = a;</span><br><span class="line">            gender = g;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public String getName() &#123;</span><br><span class="line">            return name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public int getAge() &#123;</span><br><span class="line">            return age;</span><br><span class="line">        &#125;</span><br><span class="line">        public String getGender() &#123;</span><br><span class="line">            return gender;</span><br><span class="line">        &#125;</span><br><span class="line">        public void printName() &#123;</span><br><span class="line">            System.out.println(&quot;name is &quot; + name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiadongqing/p/16298207.html">https://www.cnblogs.com/xiadongqing/p/16298207.html</a></p>
<p>å…³äºåå°„çš„æ¦‚å¿µï¼š<br>Javaä¸­çš„åå°„æ˜¯é€šè¿‡åå°„APIæ¥å®ç°çš„ã€‚Javaåå°„APIä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„ç±»å’Œæ¥å£ï¼š<br>1ã€Class ç±»ï¼šè¡¨ç¤ºä¸€ä¸ªç±»æˆ–æ¥å£ï¼Œåœ¨è¿è¡Œæ—¶JVMä¸­æ¯ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„Classå¯¹è±¡ã€‚<br>2ã€Constructorç±»ï¼šè¡¨ç¤ºä¸€ä¸ªç±»çš„æ„é€ æ–¹æ³•ã€‚<br>3ã€Method ç±»ï¼šè¡¨ç¤ºä¸€ä¸ªç±»çš„æ–¹æ³•ã€‚<br>4ã€Field ç±»ï¼šè¡¨ç¤ºä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡ï¼ˆå­—æ®µï¼‰ã€‚</p>
<p>åå°„å®ç°çš„æ ¸å¿ƒæ˜¯ Class ç±»ï¼Œä¸€ä¸ªç±»åœ¨ç¼–è¯‘åä¼šç”Ÿæˆå¯¹åº”çš„ classæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­åŒ…å«äº†ç±»çš„ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­—æ®µã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ä¿¡æ¯ã€‚åœ¨è¿è¡Œæ—¶ï¼ŒJVMä¼šè¯»å–è¿™ä¸ª æ–‡ä»¶å¹¶å°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚å½“éœ€è¦ä½¿ç”¨ä¸€ä¸ªç±»æ—¶ï¼ŒJVMä¼šé€šè¿‡ç±»çš„å…¨é™å®šåæ¥æ‰¾åˆ°å¯¹åº”çš„ class æ–‡ä»¶ï¼Œå¹¶å°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚åœ¨åŠ è½½åï¼ŒJVM ä¼šä¸ºæ¯ä¸ªç±»åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ Classå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†ç±»çš„æ‰€æœ‰ç»“æ„ä¿¡æ¯ã€‚</p>
<p>é€šè¿‡ Class å¯¹è±¡å¯ä»¥è·å–ç±»çš„æ‰€æœ‰ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ„é€ å‡½æ•°ã€æ–¹æ³•ã€å­—æ®µç­‰ã€‚å¯ä»¥é€šè¿‡ Constructorã€Method å’ŒField ç­‰ç±»æ¥è¡¨ç¤ºç±»çš„æ„é€ å‡½æ•°ã€æ–¹æ³•å’Œå­—æ®µï¼Œé€šè¿‡è¿™äº›ç±»å¯ä»¥è·å–å’Œè°ƒç”¨ç±»çš„æ„é€ å‡½æ•°æ•°ã€æ–¹æ³•å’Œå­—æ®µã€‚</p>
<p>åå°„çš„å®ç°ä¸»è¦ä¾é JVM ä¸­çš„ç±»åŠ è½½æœºåˆ¶å’Œ Classå¯¹è±¡ï¼Œé€šè¿‡ class å¯¹è±¡å¯ä»¥è·å–ç±»çš„æ‰€æœ‰ç»“æ„ä¿¡æ¯ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯å¯ä»¥å®ç°å¯¹ç±»çš„åŠ¨æ€æ“ä½œã€‚åœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡åå°„å¯ä»¥åŠ¨æ€åœ°åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨æ–¹æ³•ã€è®¿é—®å­—æ®µç­‰ï¼Œä»è€Œå®ç°äº†æ¯”è¾ƒçµæ´»çš„ç¼–ç¨‹æ–¹å¼ã€‚</p>
<p>åå°„æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€è·å–å¯¹è±¡ä¿¡æ¯çš„èƒ½åŠ›ã€‚å®ƒå¯ä»¥è®©ç¨‹åºåœ¨è¿è¡Œæ—¶é€šè¿‡å¯¹è±¡çš„å¼•ç”¨æ¥è·å–å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ã€å±æ€§ã€æ–¹æ³•ç­‰ï¼Œè€Œä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç¡¬ç¼–ç ã€‚å…·ä½“å®ç°åå°„çš„æ–¹å¼æ˜¯é€šè¿‡åå°„APlæ¥è·å–å¯¹è±¡çš„ç±»ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»åã€çˆ¶ç±»ã€æ¥å£ã€æ–¹æ³•ã€å±æ€§ç­‰ï¼Œç„¶åé€šè¿‡åå°„APIæä¾›çš„æ–¹æ³•æ¥æ“ä½œè¿™äº›ä¿¡æ¯ã€‚åœ¨Javaä¸­ï¼Œåå°„APIä¸»è¦åŒ…æ‹¬ Class ç±»ã€Constructorç±»ã€Fieldç±»å’ŒMethodç±»ç­‰ã€‚é€šè¿‡è¿™äº›ç±»ï¼Œå¯ä»¥å®ç°åŠ¨æ€åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨æ–¹æ³•ã€è·å–å±æ€§ç­‰æ“ä½œã€‚</p>
<p>åå°„æ˜¯ä¸€ç§å¼ºå¤§çš„ç¼–ç¨‹æŠ€æœ¯ï¼Œä½†ä¹Ÿéœ€è¦è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šå¢åŠ ä»£ç çš„å¤æ‚åº¦å’Œè¿è¡Œæ—¶å¼€é”€ã€‚</p>
<h3 id="javaä¸­çš„StopWatch"><a href="#javaä¸­çš„StopWatch" class="headerlink" title="javaä¸­çš„StopWatch"></a>javaä¸­çš„StopWatch</h3><p>StopWatchä¸åœ¨javaæ ‡å‡†åŒ…ä¸­çš„ï¼Œå¯ä»¥åœ¨ä»¥ä¸‹ä¸¤ä¸ªç¨‹åºåŒ…ä¸­æ‰¾åˆ°StopWatchå·¥å…·ç±»</p>
<p>org.apache.commons.lang3.time<br>Apache Commons Langæä¾›äº†ä¸€äº›Javaæ ‡å‡†åº“ä¸­æ²¡æœ‰æä¾›çš„ç±»ä¸æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨Stringæ“ä½œæ–¹æ³•ï¼ŒåŸºç¡€æ•°å€¼æ–¹æ³•ï¼Œå¯¹è±¡å¼•ç”¨ï¼Œå¹¶å‘è¡Œï¼Œåˆ›å»ºåŠåºåˆ—åŒ–ï¼Œç³»ç»Ÿå±æ€§ç­‰æ–¹é¢æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½</p>
<p>org.springframework.util<br>springæ¡†æ¶ä¸ºç°ä»£javaä¼ä¸šçº§åº”ç”¨æä¾›äº†ä¸€ä¸ªç®€æ´å¹¶ä¸”å¯Œæœ‰è¡¨è¾¾èƒ½åŠ›çš„å¯ä»¥è¿è¡Œåœ¨ä»»ä½•éƒ¨ç½²å¹³å°çš„ç¼–ç¨‹ä¸è®¾ç½®æ¨¡å‹</p>
<p>çœ‹ä¸€ä¸‹springä¸­çš„æ€ä¹ˆç”¨ï¼Œå¯ä»¥ä¼˜é›…åœ°æ‰“å°å‡ºå¤šä¸ªä»»åŠ¡çš„è¯¦ç»†è€—æ—¶æƒ…å†µï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class StopWatchTest &#123;</span><br><span class="line">    public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">        StopWatch sw = new StopWatch(&quot;æ¨¡æ¿æµ‹è¯•&quot;);</span><br><span class="line"></span><br><span class="line">        sw.start(&quot;ä»»åŠ¡1&quot;);</span><br><span class="line">        Thread.sleep(1000 * 1);</span><br><span class="line">        sw.stop();</span><br><span class="line"></span><br><span class="line">        sw.start(&quot;ä»»åŠ¡2&quot;);</span><br><span class="line">        Thread.sleep(1000 * 2);</span><br><span class="line">        sw.stop();</span><br><span class="line"></span><br><span class="line">        sw.start(&quot;ä»»åŠ¡3&quot;);</span><br><span class="line">        Thread.sleep(1000 * 3);</span><br><span class="line">        sw.stop();</span><br><span class="line"></span><br><span class="line">        //æ‰“å°å„å­ä»»åŠ¡è€—æ—¶æ¯”ä¾‹</span><br><span class="line">        System.out.println(sw.prettyPrint());</span><br><span class="line">        System.out.println(&quot;æ‰€æœ‰ä»»åŠ¡æ€»è€—æ—¶ï¼š&quot; + sw.getTotalTimeMillis() + &quot;ms&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qfzhaohan/article/details/121379893">https://blog.csdn.net/qfzhaohan/article/details/121379893</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/30/myblog/JAVA/java%E6%8E%A5%E5%8F%A3&%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/30/myblog/JAVA/java%E6%8E%A5%E5%8F%A3&%E7%B1%BB/" class="post-title-link" itemprop="url">javaå¸¸è§„æ¥å£ã€ç±»</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-30 09:59:37" itemprop="dateCreated datePublished" datetime="2022-04-30T09:59:37+08:00">2022-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-06-04 17:22:58" itemprop="dateModified" datetime="2023-06-04T17:22:58+08:00">2023-06-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Serializableæ¥å£"><a href="#Serializableæ¥å£" class="headerlink" title="Serializableæ¥å£"></a>Serializableæ¥å£</h3><p>ä½äºjava.io.SerializableåŒ…ä¸­ï¼Œä¸€èˆ¬åœ¨åˆ›å»ºå®ä½“ç±»çš„æ—¶å€™ä¼šå»å®ç°è¿™ä¸ªæ¥å£ï¼Œç›®çš„æ˜¯ä¸ºäº†åºåˆ—åŒ–ã€‚</p>
<p>åºåˆ—åŒ–æŒ‡çš„æ˜¯æŠŠå¯¹è±¡è½¬åŒ–æˆå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠå†…å­˜ä¸­çš„å¯¹è±¡è½¬æ¢æˆä¸€è¿ä¸²çš„å­—èŠ‚bytesæè¿°çš„è¿‡ç¨‹ã€‚<br>ååºåˆ—åŒ–å°±æ˜¯å°†å­—èŠ‚bytesæ•°æ®æ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚</p>
<p>éœ€è¦å°†å†…å­˜ä¸­å¯¹è±¡çŠ¶æ€æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­æ—¶ï¼Œéœ€è¦è¿›è¡Œåºåˆ—åŒ–ã€‚è¿™ä¸ªæ¯”è¾ƒç›´è§‚çš„å°±æ˜¯é€šè¿‡ObjectOutputStreamå’ŒFileOutputStreamå‘æ–‡ä»¶ä¸­ä¿å­˜å¯¹è±¡æ—¶ï¼Œå®ç°äº†Serializableæ¥å£çš„å¯¹è±¡ä¼šä»¥äºŒè¿›åˆ¶æ•°æ®çš„å½¢å¼ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œæœªå®ç°Serializableæ¥å£çš„å¯¹è±¡åˆ™ä¼šç›´æ¥æŠ¥é”™ï¼Œæ— æ³•ä¿å­˜ã€‚</p>
<p>serialVersionUIDï¼š<br>å¦‚æœåœ¨è¿›è¡Œååºåˆ—åŒ–å‰ï¼Œå°†æŸä¸ªå®ä½“ç±»åŸæœ‰çš„serialVersionUIDæ”¹å˜ï¼Œåœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶å°±ä¼šæŠ¥InvalidClassExceptionå¼‚å¸¸ã€‚<br>å¦‚æœæ²¡æœ‰æŒ‡å®šserialVersionUIDï¼Œåœ¨è¿›è¡Œåºåˆ—åŒ–æ—¶ï¼ŒJVMä¼šé€šè¿‡è®¡ç®—ç»™è¯¥ç±»ä¸€ä¸ªé»˜è®¤çš„serialVersionUIDå€¼ã€‚<br>ä½†æ˜¯ä¸å»ºè®®ä¸æŒ‡å®šserialVersionUIDï¼Œé«˜åº¦ä¾èµ–äºJVMé»˜è®¤ç”ŸæˆserialVersionUIDï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä¸ç¼–è¯‘å™¨çš„å®ç°ç»†èŠ‚è€¦åˆï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´åœ¨ååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å‘ç”Ÿæ„å¤–çš„InvalidClassExceptionå¼‚å¸¸ã€‚ä¸ªäººè®¤ä¸ºåº”è¯¥æ˜¯æŒ‡ä¸åŒç¼–è¯‘å™¨ç¼–è¯‘çš„ä¸åŒç±»å¯èƒ½äº§ç”Ÿä¸€ä¸ªç›¸åŒçš„é»˜è®¤serialVersionUIDã€‚<br>å¦å¤–å°½é‡ç”¨privateæ¥ä¿®é¥°serialVersionUIDã€‚</p>
<hr>
<p>Serializableå…¶å®æ˜¯ä¸ªç©ºæ¥å£ï¼Œç”¨æ¥æ ‡è¯†å½“å‰ç±»å¯ä»¥è¢«åºåˆ—åŒ–ã€‚<br>å‘Šè¯‰jvmï¼Œè®©jvmå¸®å¿™åšåºåˆ—åŒ–ã€‚</p>
<p>å®ç°äº†Serializableæ¥å£çš„ç±»å¯ä»¥è¢«ObjectOutputStreamè½¬æ¢ä¸ºå­—èŠ‚æµï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ObjectInputStreamå†å°†å…¶è§£æä¸ºå¯¹è±¡ã€‚</p>
<p>âœ…ä»€ä¹ˆæ˜¯åºåˆ—åŒ–ï¼Ÿ</p>
<p>åºåˆ—åŒ–ï¼ˆserializeï¼‰ - åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµã€‚<br>ååºåˆ—åŒ–ï¼ˆdeserializeï¼‰ - ååºåˆ—åŒ–æ˜¯å°†å­—èŠ‚æµè½¬æ¢ä¸ºå¯¹è±¡ã€‚</p>
<p>ä½œç”¨ï¼š<br>åºåˆ—åŒ–å¯ä»¥å°†å¯¹è±¡çš„å­—èŠ‚åºåˆ—æŒä¹…åŒ–â€”â€”ä¿å­˜åœ¨å†…å­˜ã€æ–‡ä»¶ã€æ•°æ®åº“ä¸­ã€‚<br>åœ¨ç½‘ç»œä¸Šä¼ é€å¯¹è±¡çš„å­—èŠ‚åºåˆ—ã€‚<br>RMI(è¿œç¨‹æ–¹æ³•è°ƒç”¨)</p>
<p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š<br>1ã€æƒ³æŠŠå†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–è€…æ•°æ®åº“ä¸­æ—¶<br>2ã€æƒ³æŠŠå¯¹è±¡é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“æ—¶</p>
<p>âœ…å¦‚ä½•ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">// Genderç±»ï¼Œè¡¨ç¤ºæ€§åˆ«</span><br><span class="line">// æ¯ä¸ªæšä¸¾ç±»å‹éƒ½ä¼šé»˜è®¤ç»§æ‰¿ç±»java.lang.Enumï¼Œè€ŒEnumç±»å®ç°äº†Serializableæ¥å£ï¼Œæ‰€ä»¥æšä¸¾ç±»å‹å¯¹è±¡éƒ½æ˜¯é»˜è®¤å¯ä»¥è¢«åºåˆ—åŒ–çš„ã€‚</span><br><span class="line">public enum Gender &#123;  </span><br><span class="line">    MALE, FEMALE  </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// Person ç±»å®ç°äº† Serializable æ¥å£ï¼Œå®ƒåŒ…å«ä¸‰ä¸ªå­—æ®µã€‚å¦å¤–ï¼Œå®ƒè¿˜é‡å†™äº†è¯¥ç±»çš„ toString() æ–¹æ³•ï¼Œä»¥æ–¹ä¾¿æ‰“å° Person å®ä¾‹ä¸­çš„å†…å®¹ã€‚</span><br><span class="line">public class Person implements Serializable &#123;  </span><br><span class="line">    private String name = null;  </span><br><span class="line">    private Integer age = null;  </span><br><span class="line">    private Gender gender = null;  </span><br><span class="line"></span><br><span class="line">    public Person() &#123;  </span><br><span class="line">        System.out.println(&quot;none-arg constructor&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">    public Person(String name, Integer age, Gender gender) &#123;  </span><br><span class="line">        System.out.println(&quot;arg constructor&quot;);  </span><br><span class="line">        this.name = name;  </span><br><span class="line">        this.age = age;  </span><br><span class="line">        this.gender = gender;  </span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">    // çœç•¥ set get æ–¹æ³•</span><br><span class="line">    @Override </span><br><span class="line">    public String toString() &#123;  </span><br><span class="line">        return &quot;[&quot; + name + &quot;, &quot; + age + &quot;, &quot; + gender + &quot;]&quot;;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">// SimpleSerialç±»ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„åºåˆ—åŒ–ç¨‹åºï¼Œå®ƒå…ˆå°†Personå¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶person.outä¸­ï¼Œç„¶åå†ä»è¯¥æ–‡ä»¶ä¸­è¯»å‡ºè¢«å­˜å‚¨çš„Personå¯¹è±¡ï¼Œå¹¶æ‰“å°è¯¥å¯¹è±¡ã€‚</span><br><span class="line">public class SimpleSerial &#123;  </span><br><span class="line">    public static void main(String[] args) throws Exception &#123;  </span><br><span class="line">        File file = new File(&quot;person.out&quot;);  </span><br><span class="line">        ObjectOutputStream oout = new ObjectOutputStream(new FileOutputStream(file)); // æ³¨æ„è¿™é‡Œä½¿ç”¨çš„æ˜¯ ObjectOutputStream å¯¹è±¡è¾“å‡ºæµå°è£…å…¶ä»–çš„è¾“å‡ºæµ</span><br><span class="line">        Person person = new Person(&quot;John&quot;, 101, Gender.MALE);  </span><br><span class="line">        oout.writeObject(person);  </span><br><span class="line">        oout.close();  </span><br><span class="line"> </span><br><span class="line">        ObjectInputStream oin = new ObjectInputStream(new FileInputStream(file));  // ä½¿ç”¨å¯¹è±¡è¾“å…¥æµè¯»å–åºåˆ—åŒ–çš„å¯¹è±¡</span><br><span class="line">        Object newPerson = oin.readObject(); // æ²¡æœ‰å¼ºåˆ¶è½¬æ¢åˆ°Personç±»å‹  </span><br><span class="line">        oin.close();  </span><br><span class="line">        System.out.println(newPerson);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">// ä¸Šè¿°ç¨‹åºçš„è¾“å‡ºçš„ç»“æœä¸ºï¼š</span><br><span class="line">arg constructor  </span><br><span class="line">[John, 31, MALE]</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼šç®€ä¹¦<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8e4a9cac727f">https://www.jianshu.com/p/8e4a9cac727f</a></p>
<p>csdnï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u011568312/article/details/57611440">https://blog.csdn.net/u011568312/article/details/57611440</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">âœ…Serializableæ˜¯javaä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œä¸»è¦ç”¨äºå®ç°å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</span><br><span class="line">åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢æˆå­—èŠ‚æµçš„è¿‡ç¨‹ï¼Œé€šå¸¸ç”¨äºå°†å¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶ä¸­æˆ–ç½‘ç»œä¸­ã€‚</span><br><span class="line">ååºåˆ—åŒ–æ˜¯å°†å­—èŠ‚æµè½¬æ¢å›å¯¹è±¡çš„è¿‡ç¨‹ï¼Œé€šå¸¸ç”¨äºè¯»å–æ–‡ä»¶æˆ–ç½‘ç»œä¸­çš„å¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line">å®ç°Serializableæ¥å£åï¼Œå°±å¯ä»¥ä½¿ç”¨javaæä¾›çš„ObjectOutputStreamå’ŒObjectInputStreamå°†å¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</span><br><span class="line"></span><br><span class="line">å°†ä¸€ä¸ªPersonå¯¹è±¡åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­ï¼š</span><br><span class="line">Person person = new Person(&quot;name&quot;);</span><br><span class="line">FileOutputStream fos = new FileOutputStream(&quot;person.txt&quot;);</span><br><span class="line">ObjectOutputStream oos = new ObjectOutputStream(fos);</span><br><span class="line">oos.writeObject(person);</span><br><span class="line"></span><br><span class="line">ä»æ–‡ä»¶ä¸­è¯»å–ä¸€ä¸ªPersonå¯¹è±¡å¹¶ååºåˆ—åŒ–ï¼š</span><br><span class="line">FileInputStream fis = new FileInputStream(&quot;person.txt&quot;);</span><br><span class="line">ObjectInputStream ois = new ObjectInputStream(fis);</span><br><span class="line">Person person = (Person)ois.readObject();</span><br><span class="line"></span><br><span class="line">ååºåˆ—åŒ–å’Œåºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä¿è¯å¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œ</span><br><span class="line">å¦‚æœæŸä¸ªå±æ€§ä¸å¯åºåˆ—åŒ–ï¼Œå¯ä»¥ä½¿ç”¨transientå…³é”®å­—ä¿®é¥°ï¼Œè¡¨ç¤ºè¯¥å±æ€§ä¸å‚ä¸åºåˆ—åŒ–ã€‚</span><br><span class="line">private transient int age;</span><br><span class="line"></span><br><span class="line">âœ…Serializableå’ŒJSONåºåˆ—åŒ–çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line">Serializableå’ŒJSONåºåˆ—åŒ–éƒ½æ˜¯javaä¸­ä¸¤ç§ä¸åŒçš„åºåˆ—åŒ–æ–¹å¼ï¼Œå®ƒä»¬å„è‡ªæœ‰ä¸åŒçš„åº”ç”¨åœºæ™¯å’Œç‰¹ç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">Serializable æ˜¯Java ä¸­çš„ä¸€ç§é»˜è®¤çš„åºåˆ—åŒ–æ–¹å¼ï¼Œå®ƒæ˜¯å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼Œ</span><br><span class="line">å¯ä»¥å°†Java å¯¹è±¡å­˜å‚¨åˆ°æ–‡ä»¶æˆ–ç½‘ç»œä¸­ã€‚serializable åºåˆ—åŒ–æ–¹å¼å¯ä»¥æ”¯æŒ Java ä¸­çš„æ‰€æœ‰ç±»å’Œå¯¹è±¡ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ç±»å’Œç¬¬ä¸‰æ–¹åº“ä¸­çš„ç±»ï¼Œä½†æ˜¯åºåˆ—åŒ–åçš„æ•°æ®é€šå¸¸æ¯”è¾ƒéš¾ä»¥é˜…è¯»å’Œå¤„ç†ã€‚</span><br><span class="line">JSON åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡åºåˆ—åŒ–ä¸º JSON æ ¼å¼ï¼Œå¯ä»¥å°†Java å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²æˆ–å­—èŠ‚æ•°ç»„ï¼Œ</span><br><span class="line">é€šå¸¸ç”¨äº Web åº”ç”¨ä¸­çš„æ•°æ®ä¼ è¾“ã€APIæ¥å£çš„å¼€å‘ç­‰åœºæ™¯ã€‚</span><br><span class="line">ä¸Serializable åºåˆ—åŒ–æ–¹å¼ä¸åŒï¼ŒJSON åºåˆ—åŒ–å¯ä»¥è·¨è¯­è¨€ä½¿ç”¨ï¼Œå› ä¸º JSON æ ¼å¼æ˜¯ä¸€ç§é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå¯ä»¥è¢«å‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€è§£æå’Œå¤„ç†ã€‚</span><br><span class="line">åœ¨Java ä¸­ï¼Œä½¿ç”¨JSON åºåˆ—åŒ–å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œä¾‹å¦‚ Jacksonã€Gson ç­‰ç­‰ã€‚è¿™äº›åº“æä¾›äº†ä¸°å¯Œçš„ API å’Œé…ç½®é€‰é¡¹ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å°†Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºJSON æ ¼å¼ï¼Œå¹¶ä¸”æ”¯æŒååºåˆ—åŒ–ï¼Œå°†JSON æ ¼å¼çš„å®‡ç¬¦ä¸²æˆ–å­—èŠ‚æ•°ç»„è½¬æ¢å› Java å¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line">âœ…è¢«@RequestBodyä¿®é¥°çš„è‡ªå®šä¹‰å˜é‡éœ€è¦å®ç°Serializableå—ï¼Ÿ</span><br><span class="line">åœ¨ Spring MVC ä¸­ï¼Œ@ReauestBodyæ³¨è§£ç”¨äºæ¥æ”¶ HTTP è¯·æ±‚ä¸­çš„JSONXMLæ ¼å¼çš„æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Java å¯¹è±¡ã€‚</span><br><span class="line">è¢« @RequestBody ä¿®é¥°çš„è‡ªå®šä¹‰å˜é‡åœ¨æ¥æ”¶è¯·æ±‚æ•°æ®å¹¶è¿›è¡Œè½¬æ¢æ—¶ï¼Œå¹¶ä¸éœ€è¦å®ç° Serializable æ¥å£ã€‚</span><br><span class="line">Serializable æ¥å£ä¸»è¦ç”¨äº Java å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå³å°† Java å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œæˆ–å°†å­—èŠ‚æµè½¬æ¢ä¸º Java å¯¹è±¡ã€‚</span><br><span class="line">è€Œ @RequestBody æ³¨è§£æ¥æ”¶çš„è¯·æ±‚æ•°æ®æ˜¯ JSON/XMLæ ¼å¼çš„å®‡ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯Java å¯¹è±¡çš„å­—èŠ‚æµï¼Œå› æ­¤ä¸éœ€è¦å®ç° Serializable æ¥å£ã€‚</span><br><span class="line"></span><br><span class="line">âœ…ä»€ä¹ˆæƒ…å†µä¸‹çš„ç½‘ç»œä¼ è¾“éœ€è¦è‡ªå®šä¹‰å˜é‡å®ç° Serializableï¼Ÿ</span><br><span class="line">åœ¨Java ä¸­ï¼Œå¦‚æœéœ€è¦å°†å¯¹è±¡é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“ï¼Œéœ€è¦å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼Œç„¶åå†è¿›è¡Œä¼ è¾“ã€‚</span><br><span class="line">æ­¤æ—¶ï¼Œè¢«ä¼ è¾“çš„å¯¹è±¡éœ€è¦å®ç° Serializable æ¥å£ï¼Œç¡®ä¿å¯¹è±¡çš„å±æ€§å¯ä»¥è¢«æ­£ç¡®åœ°åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</span><br><span class="line">å®ç° Serializable æ¥å£çš„å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼Œç„¶åé€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“ã€‚åœ¨ç½‘ç»œä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼ŒJVM ä¼šå°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œç„¶åå‘é€åˆ°å…¶ä»–è®¡ç®—æœºä¸Šï¼Œæ¥æ”¶æ–¹å†å°†å­—èŠ‚æµè½¬æ¢ä¸ºå¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line">1è¿œç¨‹æ–¹æ³•è°ƒç”¨ (Remote Method lInvocationï¼Œç®€ç§° RMI)ï¼šRMIå…è®¸Java ç¨‹åºåœ¨åˆ†å¸ƒå¼ç½‘ç»œç¯å¢ƒä¸­è¿›è¡Œè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œå…¶ä¸­éœ€è¦å°†æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ Serializable åºåˆ—åŒ–ä¼ è¾“çš„å¯¹è±¡ã€‚</span><br><span class="line">2.Java åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ¡†æ¶ï¼šä¾‹å¦‚ Spring Bootã€Apache Dubbã€‚ ç­‰æ¡†æ¶ï¼Œå®ƒä»¬å¯ä»¥å°†Java å¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼Œå¹¶è¿›è¡Œç½‘ç»œä¼ è¾“ï¼Œä»¥å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼€å‘å’Œéƒ¨ç½²ã€‚</span><br><span class="line">3. Web åº”ç”¨ä¸­çš„æ•°æ®ä¼ è¾“ï¼šä¾‹å¦‚ä½¿ç”¨ Ajax å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œåœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ é€’JSON æˆ– xMLæ ¼å¼çš„æ•°æ®ç­‰åœºæ™¯ã€‚</span><br><span class="line"></span><br><span class="line">@JSONField(serialize = false)ä»€ä¹ˆæ„æ€ï¼Ÿ</span><br><span class="line">@JSONField(serialize = false) æ˜¯é˜¿é‡Œå·´å·´ FastJSON åº“æ‘„ä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œ</span><br><span class="line">ç”¨äºåœ¨å°† Java å¯¹è±¡åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²æ—¶ï¼Œå¿½ç•¥å½“å‰å±æ€§çš„å€¼ã€‚</span><br><span class="line">è¯¥æ³¨è§£å¯ä»¥ç”¨åœ¨ Javaç±»çš„å±æ€§ä¸Šï¼Œè¡¨ç¤ºåœ¨åºåˆ—åŒ–æ—¶ä¸å°†è¯¥å±æ€§çš„å€¼åºåˆ—åŒ–åˆ° JSON å®‡ç¬¦ä¸²ä¸­ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="MultipartFileæ¥å£"><a href="#MultipartFileæ¥å£" class="headerlink" title="MultipartFileæ¥å£"></a>MultipartFileæ¥å£</h3><p>ç”¨äºhttpä¸­è·å–å‰å°ä¼ æ¥çš„æ–‡ä»¶</p>
<p>ä½äºï¼špackage org.springframework.web.multipart;åŒ…ä¸‹<br>ä¸­æ–‡åï¼šå¤šç»„ä»¶æ–‡æ¡£<br>ç»§æ‰¿è‡ªï¼šInputStreamSource,å¹¶å°è£…äº†getInputStream()æ–¹æ³•<br>æ­¤æ–¹æ³•ç”¨æ³•ï¼š<code>@RequesParam(&quot;file&quot;)MultipartFile file</code><br><code>InputStream is  = file.getInputStream();</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String getName():å¾—åˆ°çš„æ˜¯@RequesParam(value = &quot;file&quot;)ä¸­çš„valueå€¼ï¼Œä¸ä¼šä¸ºç©ºã€‚</span><br><span class="line">String getOriginalFilename():è·å–çš„æ˜¯æ–‡ä»¶çš„å®Œæ•´åç§°ï¼ŒåŒ…æ‹¬æ–‡ä»¶åç§°+æ–‡ä»¶æ‹“å±•åã€‚</span><br><span class="line">String getContentType()ï¼šè¿”å›æ–‡ä»¶å†…å®¹ç±»å‹ï¼Œä¸æ˜¯æ–‡ä»¶æ‰©å±•åï¼ˆä¾‹å¦‚ï¼šjpegå›¾ç‰‡ï¼šimage/jpegï¼‰</span><br><span class="line">boolean isEmpty()ï¼šè¿”å›ä¸Šä¼ çš„æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼Œå³multipartå½¢å¼ä¸­æ²¡æœ‰é€‰æ‹©ä»»ä½•æ–‡ä»¶æˆ–è€…é€‰æ‹©çš„æ–‡ä»¶æ²¡æœ‰å†…å®¹</span><br><span class="line">long getSize()ï¼šä»¥å­—èŠ‚ä¸ºå•ä½è¿”å›æ–‡ä»¶å¤§å°</span><br><span class="line">byte[] getBytes()ï¼šä»¥å­—èŠ‚æ•°ç»„çš„å½¢å¼è¿”å›æ–‡ä»¶å†…å®¹</span><br><span class="line">InputStream getInputStream()ï¼šè¿”å›ä¸€ä¸ªå­—èŠ‚æµ</span><br><span class="line">void transferTo()ï¼šç”¨æ¥å°†æ¥æ”¶æ–‡ä»¶ä¼ è¾“åˆ°ç»™å®šç›®æ ‡è·¯å¾„ï¼Œä¼šæŠ›å‡ºIOExceptionã€IllegalStateExceptionå¼‚å¸¸ã€‚è¯¥æ–¹æ³•åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ä½¿ç”¨è¾ƒå°‘ã€‚</span><br></pre></td></tr></table></figure>





<h3 id="Patternç±»-amp-Matcherç±»"><a href="#Patternç±»-amp-Matcherç±»" class="headerlink" title="Patternç±»&amp;Matcherç±»"></a>Patternç±»&amp;Matcherç±»</h3><p>Patternç±»æ˜¯java.util.regexåŒ…ä¸­çš„finalç±»ã€‚æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„ç¼–è¯‘è¡¨ç¤ºå½¢å¼ï¼Œæ­¤ç±»çš„å®ä¾‹æ˜¯ä¸å¯å˜çš„ï¼Œå¯ä¾›å¤šä¸ªå¹¶å‘çº¿ç¨‹å®‰å…¨ä½¿ç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰</span><br><span class="line">public final class Pattern extends Object implements Serializable</span><br><span class="line"></span><br><span class="line">//Patternè°ƒç”¨é™æ€æ–¹æ³•compileè¿”å›Patternå®ä¾‹ã€‚</span><br><span class="line">// å°†ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘å¹¶èµ‹äºˆç»™Patternç±»</span><br><span class="line">Pattern pattern = Pattern.compile(paternStr);</span><br><span class="line"></span><br><span class="line">// å¢åŠ flagå‚æ•°çš„æŒ‡å®šï¼Œå¯é€‰çš„flagå‚æ•°åŒ…æ‹¬ï¼šCASE INSENSITIVE,MULTILINE,DOTALL,UNICODE CASEï¼Œ CANON EQ </span><br><span class="line">static Pattern compile(String regex, int flags) </span><br><span class="line">//å…ˆä¸æ˜ç™½</span><br><span class="line"></span><br><span class="line">//Pattern.split()ï¼ˆé™æ€æ–¹æ³•ï¼‰å’Œstring.split()ç”¨é€”ä¸€æ ·ï¼Œ</span><br><span class="line">//æ˜¯å°†å­—ç¬¦ä¸²ä»æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„åœ°æ–¹åˆ†å¼€</span><br><span class="line">String input = &quot;This!!unusual use!!hh!!points&quot;;</span><br><span class="line">System.out.println(Arrays.toString(Pattern.compile(&quot;!!&quot;).split(input)));</span><br><span class="line">System.out.println(Arrays.toString(Pattern.compile(&quot;!!&quot;).split(input, 3)));</span><br><span class="line">// ç¬¬äºŒç§ï¼Œç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥é™åˆ¶å°†è¾“å…¥åˆ†å‰²æˆå­—ç¬¦ä¸²çš„æ•°é‡</span><br></pre></td></tr></table></figure>

<p>æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\\d è¡¨ç¤ºæ•°å­—ï¼Œå‰é¢å¤šäº†ç¬¬ä¸€ä¸ª\ï¼Œæ˜¯è½¬ä¹‰çš„æ„æ€ã€‚</span><br><span class="line">+è¡¨ç¤ºé‡å¤å‰é¢çš„</span><br><span class="line">\\d+ è¡¨ç¤ºå¤šä¸ªæ•°å­—</span><br></pre></td></tr></table></figure>

<p>Matcherå¯¹è±¡æ˜¯ä¸€ä¸ªçŠ¶æ€æœºå™¨ï¼Œå®ƒä¾æ®Patternå¯¹è±¡åšä¸ºåŒ¹é…æ¨¡å¼å¯¹å­—ç¬¦ä¸²å±•å¼€åŒ¹é…æ£€æŸ¥ï¼Œæ­¤ç±»çš„å®ä¾‹ç”¨äºå¤šä¸ªå¹¶å‘çº¿ç¨‹æ˜¯ä¸å®‰å…¨çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Pattern.matcher é™æ€æ–¹æ³•ï¼š</span><br><span class="line">Pattern.matcher(String regex,CharSequence input)</span><br><span class="line">é™æ€æ–¹æ³•,ç”¨äºå¿«é€ŸåŒ¹é…å­—ç¬¦ä¸²,åŒ¹é…å…¨éƒ¨å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">pattern.matcher(CharSequence input):</span><br><span class="line">è¿”å›ä¸€ä¸ªMatcherå¯¹è±¡ã€‚</span><br><span class="line">Matcherç±»çš„æ„é€ æ–¹æ³•ä¹Ÿæ˜¯ç§æœ‰çš„,ä¸èƒ½éšæ„åˆ›å»º,</span><br><span class="line">åªèƒ½é€šè¿‡pattern.matcher(CharSequence input)æ–¹æ³•å¾—åˆ°è¯¥ç±»çš„å®ä¾‹</span><br><span class="line"></span><br><span class="line">Pattern p=Pattern.compile(&quot;\\d+&quot;); </span><br><span class="line">Matcher m=p.matcher(&quot;22bb23&quot;); </span><br><span class="line">m.pattern();//è¿”å›p ä¹Ÿå°±æ˜¯è¿”å›è¯¥Matcherå¯¹è±¡æ˜¯ç”±å“ªä¸ªPatternå¯¹è±¡çš„åˆ›å»ºçš„</span><br></pre></td></tr></table></figure>

<p>ç”¨Patternä»¥åŠMatcheråŒ¹é…ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String str = &quot;aa11bb&quot;;</span><br><span class="line">String paternStr = &quot;\\d+&quot;;</span><br><span class="line">Pattern pattern = Pattern.compile(paternStr);</span><br><span class="line">Matcher matcher = pattern.matcher(str);</span><br><span class="line">if (matcher.find()) &#123;   //æœ‰åŒ¹é…å°±è¡Œ</span><br><span class="line">    System.out.println(matcher.group(0));  //è¾“å‡º11</span><br><span class="line">&#125;</span><br><span class="line">if (matcher.matches()) &#123;  //éœ€è¦å®Œå…¨åŒ¹é…</span><br><span class="line">    System.out.println(matcher.group(0));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šæ–¹æ³•ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/woniu317/article/details/52186694">https://blog.csdn.net/woniu317/article/details/52186694</a><br><a target="_blank" rel="noopener" href="http://www.51gjie.com/java/759.html">http://www.51gjie.com/java/759.html</a></p>
<h3 id="Functionæ¥å£"><a href="#Functionæ¥å£" class="headerlink" title="Functionæ¥å£"></a>Functionæ¥å£</h3><p>JDKæä¾›äº†å¤§é‡å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£ä»¥ä¸°å¯ŒLambdaçš„å…¸å‹ä½¿ç”¨åœºæ™¯ï¼Œå®ƒä»¬ä¸»è¦åœ¨ java.util.function åŒ…ä¸­è¢«æä¾›ã€‚ </p>
<p>java.util.function.Function&lt;T,R&gt; æ¥å£ç”¨æ¥æ ¹æ®ä¸€ä¸ªç±»å‹çš„æ•°æ®å¾—åˆ°å¦ä¸€ä¸ªç±»å‹çš„æ•°æ®ï¼Œå‰è€…ç§°ä¸ºå‰ç½®æ¡ä»¶ï¼Œåè€…ç§°ä¸ºåç½®æ¡ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@FunctionalInterface</span><br><span class="line">public interface Function&lt;T, R&gt; &#123;</span><br><span class="line">    R apply(T t);</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å­ï¼šèµ·åˆ°äº†è½¬æ¢ç±»å‹çš„ä½œç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class FunctionTest &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        method(s -&gt; Integer.parseInt(s));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void method(Function&lt;String, Integer&gt; function) &#123;</span><br><span class="line">        int num = function.apply(&quot;10&quot;);</span><br><span class="line">        System.out.println(num + 20);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–æ–¹æ³•ï¼šå¦‚andThenæ–¹æ³•<br><a target="_blank" rel="noopener" href="http://t.zoukankan.com/liyihua-p-12286100.html">http://t.zoukankan.com/liyihua-p-12286100.html</a></p>
<p>å’Œ@FunctionalInterfaceä½œç”¨ä¸€æ ·ï¼Ÿ</p>
<h3 id="å‡½æ•°å¼æ¥å£"><a href="#å‡½æ•°å¼æ¥å£" class="headerlink" title="å‡½æ•°å¼æ¥å£"></a>å‡½æ•°å¼æ¥å£</h3><p>å‡½æ•°å¼æ¥å£å°±æ˜¯åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚</p>
<p>å‡½æ•°å¼æ¥å£ï¼Œå³é€‚ç”¨äºå‡½æ•°å¼ç¼–ç¨‹åœºæ™¯çš„æ¥å£ã€‚è€ŒJavaä¸­çš„å‡½æ•°å¼ç¼–ç¨‹ä½“ç°å°±æ˜¯Lambdaï¼Œæ‰€ä»¥å‡½æ•°å¼æ¥å£å°±æ˜¯å¯ä»¥é€‚ç”¨äºLambdaä½¿ç”¨çš„æ¥å£ã€‚åªæœ‰ç¡®ä¿æ¥å£ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒJavaä¸­çš„Lambdaæ‰èƒ½é¡ºåˆ©åœ°è¿›è¡Œæ¨å¯¼ã€‚å¯ä»¥æœ‰å¤šä¸ªdefaultæ–¹æ³•ã€‚</p>
<p>ä¸ºäº†é¿å…åˆ«äººåœ¨è¿™ä¸ªæ¥å£ä¸­å¢åŠ æ¥å£å‡½æ•°å¯¼è‡´å…¶æœ‰å¤šä¸ªæ¥å£å‡½æ•°éœ€è¦è¢«å®ç°ï¼Œå˜æˆâ€éå‡½æ•°æ¥å£â€ï¼Œå¯ä»¥åœ¨æ¥å£ä¸ŠåŠ ä¸Šä¸€ä¸ªæ³¨è§£<code>@FunctionalInterface</code>, è¿™æ ·åˆ«äººå°±æ— æ³•åœ¨é‡Œé¢æ·»åŠ æ–°çš„æ¥å£å‡½æ•°äº†ã€‚</p>
<p><code>@FunctionalInterface public interface Function&lt;T, R&gt; &#123;   &#125;</code></p>
<p>åœ¨java.util.functionåŒ…ä¸‹ï¼š</p>
<h4 id="âœ…Functionæ¥å£"><a href="#âœ…Functionæ¥å£" class="headerlink" title="âœ…Functionæ¥å£"></a>âœ…Functionæ¥å£</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@FunctionalInterface</span><br><span class="line">public interface Function&lt;T, R&gt; &#123;</span><br><span class="line">    R apply(T t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡½æ•°å‹æ¥å£ï¼š<code>Function&lt;T, R&gt;</code>ï¼Œæœ‰å‚æœ‰è¿”å›å€¼ï¼Œæ¥å—ä¸€ä¸ªTç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªRç±»å‹çš„è¿”å›å€¼ã€‚</p>
<p>å…¶ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼š<code>R apply(T t);</code></p>
<p>Tæ˜¯è¾“å…¥ï¼ŒRæ˜¯è¾“å‡ºï¼Œè¡¨ç¤ºä¸€ä¸ªç±»å‹è½¬æ¢ï¼Œlambdaè¡¨è¾¾å¼å®ç°applyæ–¹æ³•ã€‚<br>streamçš„mapæ–¹æ³•ï¼Œä¼ å‚å°±æ˜¯Functionï¼Œè¡¨ç¤ºæ˜ å°„ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class FunctionTest &#123;</span><br><span class="line">    Function&lt;String, String&gt; function = (str) -&gt; &#123;</span><br><span class="line">        return &quot;hello,&quot; + str;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    String funDemo(String str2, Function&lt;String, String&gt; function) &#123;</span><br><span class="line">        return function.apply(str2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testFunDemo() &#123;</span><br><span class="line">        System.out.println(funDemo(&quot;å°æ˜&quot;, function));</span><br><span class="line">        System.out.println(funDemo(&quot;å°ç¾&quot;, str -&gt; &quot;hello&quot;+str));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…Predicateæ¥å£"><a href="#âœ…Predicateæ¥å£" class="headerlink" title="âœ…Predicateæ¥å£"></a>âœ…Predicateæ¥å£</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@FunctionalInterface</span><br><span class="line">public interface Predicate&lt;T&gt; &#123;</span><br><span class="line">    boolean test(T t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–­è¨€å‹æ¥å£ï¼š<code>Predicate&lt;T&gt;</code> æœ‰å‚æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼æ˜¯booleanç±»å‹ï¼Œç”¨æ¥åˆ¤æ–­æŸé¡¹æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚ç»å¸¸ç”¨æ¥è¿›è¡Œç­›æ»¤æ“ä½œã€‚</p>
<p>å…¶ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼š<code>boolean test(T t);</code></p>
<p>Tæ˜¯è¾“å…¥ï¼Œè¾“å‡ºbooleanç±»å‹ï¼Œè¡¨ç¤ºä¸€ç§æ¡ä»¶è¿‡æ»¤ã€‚<br>streamçš„filteræ–¹æ³•ç©¿å‚æ˜¯Predicateã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class PredicateTest &#123;</span><br><span class="line">    Predicate&lt;Integer&gt; predicate = (i) -&gt; &#123;</span><br><span class="line">        return i &gt; 10;</span><br><span class="line">    &#125;;</span><br><span class="line">    boolean preDemo(Integer i, Predicate&lt;Integer&gt; predicate) &#123;</span><br><span class="line">        return predicate.test(i);</span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    public void testPreDemo() &#123;</span><br><span class="line">        System.out.println(preDemo(12, predicate));//æ‰“å°ç»“æœï¼štrue</span><br><span class="line">        System.out.println(preDemo(12, i -&gt; i &gt; 13));//æ‰“å°ç»“æœï¼šfalse</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…Consumeræ¥å£"><a href="#âœ…Consumeræ¥å£" class="headerlink" title="âœ…Consumeræ¥å£"></a>âœ…Consumeræ¥å£</h4><p>æ¶ˆè´¹å‹æ¥å£ï¼šConsumer æœ‰å‚æ— è¿”å›å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@FunctionalInterface</span><br><span class="line">public interface Consumer&lt;T&gt; &#123;</span><br><span class="line">    void accept(T t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class ConsumerTest &#123;</span><br><span class="line">    Consumer&lt;String&gt; consumer = (str) -&gt; &#123;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;;</span><br><span class="line">    public void conDemo(String str, Consumer&lt;String&gt; consumer) &#123;</span><br><span class="line">        consumer.accept(str);</span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    public void testConDemo() &#123;</span><br><span class="line">        conDemo(&quot;hello&quot;, consumer);//æ‰“å°ç»“æœï¼šhello</span><br><span class="line">        conDemo(&quot;hello&quot;, s -&gt; System.out.println(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>æ›´å¤šå‡½æ•°å¼æ¥å£ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45580378/article/details/124853396">https://blog.csdn.net/weixin_45580378/article/details/124853396</a></p>
<p>è¿·æƒ‘ï¼š<br>1.å‡½æ•°å¼æ¥å£ä¸­çš„defaultæ–¹æ³•æ˜¯å¹²å˜›çš„<br>2.æ³›å‹ã€‚<code>Function&lt;T, R&gt;</code>ä»£è¡¨ä¸¤ä¸ªæ³›å‹ï¼›<code>Function&lt;? super T, ? extends R&gt; mapper</code>ä»£è¡¨é™åˆ¶æ³›å‹ç±»å‹ï¼Ÿ</p>
<h4 id="âœ…Supplieræ¥å£"><a href="#âœ…Supplieræ¥å£" class="headerlink" title="âœ…Supplieræ¥å£"></a>âœ…Supplieræ¥å£</h4><p>ä¾›ç»™å‹æ¥å£ï¼šSupplier æ— å‚æœ‰è¿”å›å€¼ï¼Œç”¨äºæä¾›æ•°æ®æºçš„ã€‚</p>
<p>è¯¥æ¥å£é€šå¸¸ç”¨äºå»¶è¿Ÿè®¡ç®—ï¼Œåªæœ‰åœ¨éœ€è¦ç»“æœçš„æ—¶å€™æ‰è¿›è¡Œè®¡ç®—ï¼Œå¯ä»¥è¢«ç”¨ä½œä¸€ç§å·¥å‚æ¨¡å¼ï¼Œç”Ÿäº§ä¸åŒçš„å¯¹è±¡ï¼Œå…·ä½“å®ç°å¯ä»¥ç”±Lambdaè¡¨è¾¾å¼ä¼ å…¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Supplier&lt;String&gt; supplier = () -&gt; &quot;hello&quot;;</span><br><span class="line">String res = supplier.get();</span><br><span class="line">System.out.println(res);</span><br></pre></td></tr></table></figure>

<h3 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h3><p>Java 8 æä¾›çš„ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«æœ‰å¯é€‰å€¼çš„åŒ…è£…ç±»ï¼Œè¿™æ„å‘³ç€ Optional ç±»æ—¢å¯ä»¥å«æœ‰å¯¹è±¡ä¹Ÿå¯ä»¥ä¸ºç©ºã€‚</p>
<p>Optionalï¼Œå¯ä»¥é¿å…æ²¡æœ‰å¿…è¦çš„ null å€¼æ£€æŸ¥.</p>
<p><code>public final class Optional&lt;T&gt; &#123;&#125;</code></p>
<p>Optional æ˜¯ Java å®ç°å‡½æ•°å¼ç¼–ç¨‹çš„å¼ºåŠ²ä¸€æ­¥ï¼Œå¹¶ä¸”å¸®åŠ©åœ¨èŒƒå¼ä¸­å®ç°ã€‚<br>åœ¨ Java 8 ä¹‹å‰ï¼Œä»»ä½•è®¿é—®å¯¹è±¡æ–¹æ³•æˆ–å±æ€§çš„è°ƒç”¨éƒ½å¯èƒ½å¯¼è‡´NullPointerException.</p>
<p>âœ…åˆ›å»ºOptionalå¯¹è±¡</p>
<p>1ï¼‰å¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³• empty() åˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; empty = Optional.empty();</span><br><span class="line">System.out.println(empty); // è¾“å‡ºï¼šOptional.empty</span><br><span class="line"></span><br><span class="line">@Test(expected = NoSuchElementException.class)</span><br><span class="line">public void whenCreateEmptyOptional_thenNull() &#123;</span><br><span class="line">    Optional&lt;Person&gt; emptyOpt = Optional.empty();</span><br><span class="line">    System.out.println(emptyOpt);</span><br><span class="line">    emptyOpt.get(); //NoSuchElementException</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ï¼‰å¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³• of() åˆ›å»ºä¸€ä¸ªéç©ºçš„ Optional å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; opt = Optional.of(&quot;11&quot;);</span><br><span class="line">System.out.println(opt); // è¾“å‡ºï¼šOptional[11]</span><br></pre></td></tr></table></figure>

<p>ä¼ é€’ç»™ of() æ–¹æ³•çš„å‚æ•°å¿…é¡»æ˜¯éç©ºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ä¸º nullï¼Œå¦åˆ™ä»ç„¶ä¼šæŠ›å‡º NullPointerExceptionã€‚</p>
<p>3ï¼‰å¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³• ofNullable() åˆ›å»ºä¸€ä¸ªå³å¯ç©ºåˆå¯éç©ºçš„ Optional å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String name = null;</span><br><span class="line">Optional&lt;String&gt; optOrNull = Optional.ofNullable(name);</span><br><span class="line">System.out.println(optOrNull); // è¾“å‡ºï¼šOptional.empty</span><br></pre></td></tr></table></figure>

<p>âœ…ifPresentæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public boolean isPresent() &#123;</span><br><span class="line">    return value != null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void ifPresent(Consumer&lt;? super T&gt; consumer) &#123;</span><br><span class="line">    if (value != null)</span><br><span class="line">        consumer.accept(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥é€šè¿‡æ–¹æ³• isPresent() åˆ¤æ–­ä¸€ä¸ª Optional å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¯¥æ–¹æ³•è¿”å› trueï¼Œå¦åˆ™è¿”å› falseâ€”â€”å–ä»£äº† obj != null çš„åˆ¤æ–­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; opt = Optional.of(&quot;11&quot;);</span><br><span class="line">System.out.println(opt.isPresent()); // è¾“å‡ºï¼šfalse</span><br><span class="line"></span><br><span class="line">Optional&lt;String&gt; optOrNull = Optional.ofNullable(null);</span><br><span class="line">System.out.println(opt.isPresent()); // è¾“å‡ºï¼štrue</span><br></pre></td></tr></table></figure>

<p>ifPresent(Consumer&lt;? super T&gt; consumer) æ˜¯å¦‚æœä¸ä¸ºnullçš„è¯ï¼Œå¯¹å¯¹è±¡åšä»€ä¹ˆæ“ä½œã€‚</p>
<p>javaä¸­çš„Optionalï¼š<br><a target="_blank" rel="noopener" href="https://www.jb51.net/article/214824.htm">https://www.jb51.net/article/214824.htm</a><br>ä¸€æ–‡å½»åº•ææ‡‚ Java çš„ Optionalï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qing_gee/article/details/104767082">https://blog.csdn.net/qing_gee/article/details/104767082</a></p>
<h3 id="GenericConverteræ¥å£"><a href="#GenericConverteræ¥å£" class="headerlink" title="GenericConverteræ¥å£"></a>GenericConverteræ¥å£</h3><p>æ˜¯springæ¡†æ¶ä¸­ç”¨äºè¿›è¡Œç±»å‹è½¬æ¢çš„æ¥å£ï¼Œå¯ä»¥å°†ä¸€ç§ç±»å‹çš„å¯¹è±¡è½¬æ¢æˆå¦ä¸€ç§ç±»å‹çš„å¯¹è±¡ã€‚</p>
<p>GenericConverteræ˜¯converteræ¥å£çš„ä¸€ä¸ªæ¯”è¾ƒç²¾è‡´çš„å®ç°ï¼Œå®ƒæ”¯æŒå¤šä¸ªsourceå’Œç›®æ ‡ç±»å‹çš„è½¬åŒ–ï¼ŒåŒæ—¶è¿˜æä¾›äº†sourceå’Œç›®æ ‡ç±»å‹çš„ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡èƒ½è®©ä½ å®ç°åŸºäºå±æ€§ä¸Šçš„æ³¨è§£æˆ–ä¿¡æ¯æ¥è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p>
<p>getConvertibleTypesè¿”å›ä¸€ä¸ªsource-&gt;targetçš„é”®å€¼å¯¹ï¼Œç„¶åé€šè¿‡å®ç°convertæ¥å£æ¥å®ç°ä½ çš„è½¬æ¢é€»è¾‘ã€‚sourceTypeDescrptorèƒ½è®©ä½ è·å–åˆ°å­˜æ”¾ç€å³å°†è¢«è½¬æ¢çš„å€¼çš„fieldï¼Œè€ŒtargetTypeDescriptorèƒ½è®©ä½ è·å¾—è¢«è½¬æ¢åçš„å€¼å°†è¢«å­˜æ”¾çš„fieldã€‚</p>
<p>GenericConverterçš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å°±æ˜¯èƒ½å°†arrayè½¬collectionçš„ArrayToCollectionConverterã€‚</p>
<p>ä¾‹å­ï¼š<br>1ã€é¦–å…ˆéœ€è¦å†™ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒä½œä¸ºconverterä»¬çš„æ³¨å†Œä¸­å¿ƒï¼Œç„¶åå°†è‡ªå·±é‡å†™çš„GenericConverteræ³¨å†Œè¿›æ¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public ConvertService getConvertService() &#123;</span><br><span class="line">    ConversionServiceFactoryBean bean = new ConversionServiceFactoryBean();</span><br><span class="line">    Set&lt;?&gt; sets = Sets.newHashSet(new MyGenericConverter());</span><br><span class="line">    bean.setConverters(sets);</span><br><span class="line">    bean.afterPropertiesSet();</span><br><span class="line">    return bean.getObject();    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">public class MyGenericConverter implements GenericConverter &#123;</span><br><span class="line">    /**</span><br><span class="line">        * å‘Šè¯‰è½¬æ¢å™¨æ€»éƒ¨ï¼Œæˆ‘è¿™ä¸ªè½¬æ¢å™¨æ”¯æŒä»€ä¹ˆæ ·çš„è½¬æ¢ï¼Œå¯ä»¥æ”¯æŒå¤šä¸ªè½¬æ¢</span><br><span class="line">        * æ­¤å¤„æ”¯æŒ string -&gt; list å’Œ string -&gt; map</span><br><span class="line">        */</span><br><span class="line">    @Override</span><br><span class="line">    public Set&lt;ConvertiblePair&gt; getConvertibleTypes() &#123;</span><br><span class="line">        Set&lt;ConvertiblePair&gt; convertiblePairs = Collections.newSetFromMap(new ConcurrentHashMap&lt;&gt;());</span><br><span class="line">        ConvertiblePair stringToArray = new ConvertiblePair(String.class, Array.class);</span><br><span class="line">        ConvertiblePair stringToMap = new ConvertiblePair(String.class, Map.class);</span><br><span class="line">        convertiblePairs.add(stringToArray);</span><br><span class="line">        convertiblePairs.add(stringToMap);</span><br><span class="line">        return convertiblePairs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">        * @param source     è¢«è½¬æ¢çš„ä¸œè¥¿</span><br><span class="line">        * @param sourceType è¢«è½¬æ¢çš„ä¸œè¥¿çš„ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ç”¨äºè®¾ç½®æ¡ä»¶ï¼Œå…·ä½“å’‹ç©çœ‹typeDescriptorï¼Œæ¯”å¦‚å¯ä»¥ç”¨æ¥åˆ¤æ–­è½¬æ¢æºæ˜¯å¦æ‹¥æœ‰æŸäº›æ³¨è§£</span><br><span class="line">        *                   @see TypeDescriptor</span><br><span class="line">        * @param targetType è½¬æ¢ç›®æ ‡ç±»å‹çš„ä¸Šä¸‹æ–‡</span><br><span class="line">        * @return</span><br><span class="line">        * æ¡ˆä¾‹åœºæ™¯ï¼šå¦‚æœè½¬æ¢æºè¢«@Resourceæ ‡è¯†ï¼Œå¹¶ä¸”ç›®æ ‡ç±»å‹ä¸ºListï¼Œåˆ™è½¬æ¢list</span><br><span class="line">        *                                         ç›®æ ‡ç±»å‹ä¸ºmapï¼Œåˆ™è½¬æ¢ä¸ºmap</span><br><span class="line">        */</span><br><span class="line">    @Override</span><br><span class="line">    public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) &#123;</span><br><span class="line">        Resource annotation = sourceType.getAnnotation(Resource.class);</span><br><span class="line">        if (annotation!= null)&#123;</span><br><span class="line">            if (targetType.getType() == List.class)&#123;</span><br><span class="line">                return Arrays.asList(source.toString().split(&quot;:&quot;));</span><br><span class="line">            &#125;</span><br><span class="line">            if (targetType.getType() == Map.class)&#123;</span><br><span class="line">                Map&lt;String, String&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">                map.put(&quot;a&quot;,source.toString().split(&quot;:&quot;)[0]);</span><br><span class="line">                map.put(&quot;b&quot;,source.toString().split(&quot;:&quot;)[1]);</span><br><span class="line">                return map;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws NoSuchFieldException &#123;</span><br><span class="line">        DefaultConversionService defaultConversionService = new DefaultConversionService();</span><br><span class="line">        defaultConversionService.addConverter(new MyGenericConverter());</span><br><span class="line"></span><br><span class="line">        Apple apple = new Apple();</span><br><span class="line">        apple.setName(&quot;1:2&quot;);</span><br><span class="line"></span><br><span class="line">        List convert = (List) defaultConversionService.convert(apple.getName(),</span><br><span class="line">                new TypeDescriptor(Apple.class.getDeclaredField(&quot;name&quot;)),</span><br><span class="line">                new TypeDescriptor(ResolvableType.forRawClass(List.class),null,null));</span><br><span class="line">        System.out.println(convert.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€getConvertibleTypes ç”¨äºå‘Šè¯‰æ³¨å†Œä¸­å¿ƒï¼Œä½ é‡å†™çš„converterèƒ½å¤Ÿæ”¯æŒä»€ä¹ˆæ ·çš„è½¬æ¢ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ”¯æŒstringåˆ°listï¼Œstringåˆ°mapçš„è½¬æ¢</p>
<p>å‚è€ƒï¼šGenericConverterçš„ç”¨æ³•éšç¬”<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_26950567/article/details/103685810">https://blog.csdn.net/qq_26950567/article/details/103685810</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/30/myblog/JAVA/fastjson/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/30/myblog/JAVA/fastjson/" class="post-title-link" itemprop="url">fastjson</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-30 09:44:44" itemprop="dateCreated datePublished" datetime="2022-04-30T09:44:44+08:00">2022-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-18 15:50:45" itemprop="dateModified" datetime="2023-02-18T15:50:45+08:00">2023-02-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>fastjsonæ˜¯é˜¿é‡Œå‡ºå“çš„å¤„ç†JSONå­—ç¬¦ä¸²çš„Javaç±»åº“ï¼Œå¯ä»¥å¯¹JSONå­—ç¬¦ä¸²ã€JSONå¯¹è±¡ã€Javaå¯¹è±¡è¿›è¡Œäº’ç›¸è½¬æ¢ã€‚éœ€è¦å¯¼å…¥fastjsonåŒ…ã€‚</p>
<h3 id="Stringã€JSONObjectã€Objectè½¬æ¢"><a href="#Stringã€JSONObjectã€Objectè½¬æ¢" class="headerlink" title="Stringã€JSONObjectã€Objectè½¬æ¢"></a>Stringã€JSONObjectã€Objectè½¬æ¢</h3><p>ä¸€ã€å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡/æ•°ç»„<br>å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡<br>JSON.parseObject(String text)<br>JSON.parse(String text)</p>
<p>å­—ç¬¦ä¸²è½¬æˆJSONæ•°ç»„<br>JSON.parseArray(String text)<br>JSON.parse(String text)</p>
<p>äºŒã€å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡/åˆ—è¡¨<br>å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡<br>JSON.parseObject(String text, Class<T> clazz)</T></p>
<p>å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡åˆ—è¡¨<br>JSON.parseArray(String text, Class<T> clazz)</T></p>
<p>ä¸‰ã€Javaå¯¹è±¡/åˆ—è¡¨è½¬æˆJSONå¯¹è±¡/æ•°ç»„<br>Javaå¯¹è±¡è½¬æˆJSONå¯¹è±¡<br>JSONObject.toJSON(Object javaObject)<br>JSON.toJSON(Object javaObject)</p>
<p>Javaå¯¹è±¡åˆ—è¡¨è½¬æˆJSONæ•°ç»„<br>JSONArray.toJSON(Object javaObject)<br>JSON.toJSON(Object javaObject)</p>
<p>å››ã€JSONå¯¹è±¡/æ•°ç»„è½¬æˆJavaå¯¹è±¡/åˆ—è¡¨<br>JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡<br>JSON.toJavaObject(JSON json, Class<T> clazz)<br>jsonObject.toJavaObject(JSON json) (éé™æ€æ–¹æ³•)</T></p>
<p>JSONæ•°ç»„è½¬æˆJavaå¯¹è±¡åˆ—è¡¨<br>jsonArray.toJavaList(Class<T> clazz) (éé™æ€æ–¹æ³•)</T></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.alibaba.fastjson.JSONArray;</span><br><span class="line">import com.alibaba.fastjson.JSONObject;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">public class FastJSONLearning &#123;</span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">    String jsonObjectStr = &quot;&#123;\&quot;prop\&quot;:\&quot;code\&quot;,\&quot;label\&quot;:\&quot;ä»£ç \&quot;,\&quot;required\&quot;:true,\&quot;key\&quot;:true&#125;&quot;;</span><br><span class="line">    String jsonArrayStr = &quot;[&#123;\&quot;prop\&quot;:\&quot;code\&quot;,\&quot;label\&quot;:\&quot;ä»£ç \&quot;,\&quot;required\&quot;:true,\&quot;key\&quot;:true&#125;,&#123;\&quot;prop\&quot;:\&quot;explain\&quot;,\&quot;label\&quot;:\&quot;ä¸­æ–‡é‡Šä¹‰\&quot;,\&quot;required\&quot;:true&#125;]&quot;;</span><br><span class="line"> </span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡/æ•°ç»„</span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    JSONObject jsonObject1 = JSON.parseObject(jsonObjectStr);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡: &quot; + jsonObject1);</span><br><span class="line"> </span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    JSONObject jsonObject2 = (JSONObject) JSON.parse(jsonObjectStr);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJSONå¯¹è±¡: &quot; + jsonObject2);</span><br><span class="line"> </span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJSONæ•°ç»„</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    JSONArray jsonArray1 = JSON.parseArray(jsonArrayStr);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJSONæ•°ç»„: &quot; + jsonArray1);</span><br><span class="line"> </span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    JSONArray jsonArray2 = (JSONArray) JSON.parse(jsonArrayStr);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJSONæ•°ç»„: &quot; + jsonArray2);</span><br><span class="line"> </span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡/åˆ—è¡¨</span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡</span><br><span class="line">    Dict dict = JSON.parseObject(jsonObjectStr, Dict.class);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡: &quot; + dict.toString());</span><br><span class="line"> </span><br><span class="line">    // å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡åˆ—è¡¨</span><br><span class="line">    List&lt;Dict&gt; dictList = JSON.parseArray(jsonArrayStr, Dict.class);</span><br><span class="line">    System.out.println(&quot;å­—ç¬¦ä¸²è½¬æˆJavaå¯¹è±¡åˆ—è¡¨: &quot; + dictList.toString());</span><br><span class="line"> </span><br><span class="line">    // Javaå¯¹è±¡/åˆ—è¡¨è½¬æˆJSONå¯¹è±¡/æ•°ç»„</span><br><span class="line">    // Javaå¯¹è±¡è½¬æˆJSONå¯¹è±¡</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    JSONObject jsonObject3 = (JSONObject) JSONObject.toJSON(dict);</span><br><span class="line">    System.out.println(&quot;Javaå¯¹è±¡è½¬æˆJSONå¯¹è±¡: &quot; + jsonObject3.toJSONString());</span><br><span class="line"> </span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    JSONObject jsonObject4 = (JSONObject) JSON.toJSON(dict);</span><br><span class="line">    System.out.println(&quot;Javaå¯¹è±¡è½¬æˆJSONå¯¹è±¡: &quot; + jsonObject4.toJSONString());</span><br><span class="line"> </span><br><span class="line">    // Javaå¯¹è±¡åˆ—è¡¨è½¬æˆJSONæ•°ç»„</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    JSONArray jsonArray3 = (JSONArray) JSONArray.toJSON(dictList);</span><br><span class="line">    System.out.println(&quot;Javaå¯¹è±¡åˆ—è¡¨è½¬æˆJSONæ•°ç»„: &quot; + jsonArray3.toJSONString());</span><br><span class="line"> </span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    JSONArray jsonArray4 = (JSONArray) JSON.toJSON(dictList);</span><br><span class="line">    System.out.println(&quot;Javaå¯¹è±¡åˆ—è¡¨è½¬æˆJSONæ•°ç»„: &quot; + jsonArray4.toJSONString());</span><br><span class="line"> </span><br><span class="line">    // JSONå¯¹è±¡/æ•°ç»„è½¬æˆJavaå¯¹è±¡/åˆ—è¡¨</span><br><span class="line">    // JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡</span><br><span class="line">    // æ–¹æ³•1</span><br><span class="line">    Dict dict1 = JSON.toJavaObject(jsonObject1, Dict.class);</span><br><span class="line">    System.out.println(&quot;JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡: &quot; + dict1);</span><br><span class="line"> </span><br><span class="line">    // JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡</span><br><span class="line">    // æ–¹æ³•2</span><br><span class="line">    Dict dict2 = jsonObject1.toJavaObject(Dict.class);</span><br><span class="line">    System.out.println(&quot;JSONå¯¹è±¡è½¬æˆJavaå¯¹è±¡: &quot; + dict2);</span><br><span class="line"> </span><br><span class="line">    // JSONæ•°ç»„è½¬æˆJavaå¯¹è±¡åˆ—è¡¨</span><br><span class="line">    List&lt;Dict&gt; dictList1 = jsonArray1.toJavaList(Dict.class);</span><br><span class="line">    System.out.println(&quot;JSONæ•°ç»„è½¬æˆJavaå¯¹è±¡åˆ—è¡¨: &quot; + dictList1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lasdaybg/p/15144350.html">https://www.cnblogs.com/lasdaybg/p/15144350.html</a></p>
<h3 id="jsonæ–‡ä»¶ä¸­è·å–"><a href="#jsonæ–‡ä»¶ä¸­è·å–" class="headerlink" title="jsonæ–‡ä»¶ä¸­è·å–"></a>jsonæ–‡ä»¶ä¸­è·å–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class JsonTest &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void TestJ()&#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            File jsonFile = ResourceUtils.getFile(&quot;classpath:hello.json&quot;);</span><br><span class="line">            String s = FileUtils.readFileToString(jsonFile);</span><br><span class="line">            System.out.println(&quot;s:&quot;+s);</span><br><span class="line">        &#125; catch(Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;error:&quot;+e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>FileUtils éœ€è¦å¯¼åŒ…ï¼šcommons-ioã€‚<br>classpathè¡¨ç¤ºé¡¹ç›®ä¸­çš„resourceæ–‡ä»¶å¤¹ã€‚</p>
<h3 id="JSONObjectã€JSONArray"><a href="#JSONObjectã€JSONArray" class="headerlink" title="JSONObjectã€JSONArray"></a>JSONObjectã€JSONArray</h3><p>ä¹Ÿæ˜¯fastjsonä¸‹çš„</p>
<p>JSONæ˜¯äº’è”ç½‘å¼€å‘è¿‡ç¨‹ä¸­åº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§æ•°æ®ç±»å‹ï¼Œä¸ç®¡æ˜¯åç«¯APIæ¥å£ä¸­ï¼Œè¿˜æ˜¯åœ¨å‰ç«¯éƒ½èƒ½å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚JSON å°±æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œè¢«å¹¿æ³›åº”ç”¨äº WEB åº”ç”¨ç¨‹åºå¼€å‘</p>
<p>åœ¨çº¿è§£æï¼š<a target="_blank" rel="noopener" href="https://c.runoob.com/front-end/53/">https://c.runoob.com/front-end/53/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;area&quot;: &quot;å±±ä¸œèæ³½&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;é©¬é©¬é©¬é©¬é©¬ç™¾ä¸‡&quot;,</span><br><span class="line">  &quot;age&quot;: [1,2,3]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JSONã€JSONå¯¹è±¡ã€JSONæ•°ç»„åŒºåˆ«<br>JSON å‘¢åªæ˜¯ä¸€ç§å®è§‚ä¸Šçš„å«æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå°±åƒ xml ç»“æ„ä¸€æ ·ï¼Œæ˜¯ä¸€ç§è§„çº¦æ€§å†…å®¹ï¼›è€Œ JSON å¯¹è±¡åˆ™æ˜¯å¯¹ JSON çš„å…·ä½“ä½“ç°ï¼›JSON æ•°ç»„åˆ™æ˜¯å°†å¤šä¸ª JSON å¯¹è±¡è¿›è¡Œå­˜å‚¨çš„ä¸€ä¸ªé›†åˆï¼Œå¯ä»¥æƒ³è±¡æˆ Java ä¸­çš„ List å’Œ Object çš„å…³ç³»</p>
<h4 id="JSONObject"><a href="#JSONObject" class="headerlink" title="JSONObject"></a>JSONObject</h4><p>JSONObject æ˜¯æ ¹æ® JSON å½¢å¼åœ¨ Java ä¸­å­˜åœ¨çš„å¯¹è±¡æ˜ å°„<br>å„å¤§ JSON ç±»åº“çš„ JSONObject å†…éƒ¨å®ç°ä¹Ÿæ˜¯ä¸å¤ªä¸€æ ·çš„ã€‚<br>ä¾‹å¦‚fastjsonï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class JSONObject extends JSON implements Map&lt;String, Object&gt;, Cloneable, Serializable, InvocationHandler &#123;</span><br><span class="line">&#125;</span><br><span class="line">å¯¹ HashMap çš„ä¸€å±‚å°è£…ï¼Œå¹¶æä¾›äº†ä¸€äº›ä¸ªæ€§åŒ–æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JSONObject json = new JSONObject();</span><br><span class="line">json.put(&quot;key&quot;,&quot;value&quot;);</span><br><span class="line">json.put(&quot;key1&quot;,&quot;11&quot;);</span><br><span class="line">System.out.println(json.getInteger(&quot;key1&quot;));</span><br><span class="line">System.out.println(json.getString(&quot;key&quot;));</span><br></pre></td></tr></table></figure>

<h4 id="JSONArray"><a href="#JSONArray" class="headerlink" title="JSONArray"></a>JSONArray</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class JSONArray extends JSON implements List&lt;Object&gt;, Cloneable, RandomAccess, Serializable &#123;</span><br><span class="line">&#125;</span><br><span class="line">ä¸€ä¸ª List ä¸­ å¥—äº†ä¸ª Map ç±»ç»“æ„</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">JSONObject person = new JSONObject();</span><br><span class="line">person.put(&quot;name&quot;, &quot;é©¬é©¬é©¬é©¬é©¬ç™¾ä¸‡&quot;);</span><br><span class="line">JSONObject drug = new JSONObject();</span><br><span class="line">drug.put(&quot;drugName&quot;, &quot;ç›é…¸ä¸å¡å› æ³¨å°„æ¶²&quot;);</span><br><span class="line">JSONArray array = new JSONArray();</span><br><span class="line">array.add(person);</span><br><span class="line">array.add(drug);</span><br></pre></td></tr></table></figure>

<h4 id="å„ç§è½¬æ¢"><a href="#å„ç§è½¬æ¢" class="headerlink" title="å„ç§è½¬æ¢"></a>å„ç§è½¬æ¢</h4><p>æ™®é€šå¯¹è±¡ã€jsonå­—ç¬¦ä¸²ã€jsonObject</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å°†å¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">String jsonStr = JSON.toJSONString(person);</span><br><span class="line">å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONObjectå¯¹è±¡</span><br><span class="line">JSONObject jsonObject = JSON.parseObject(jsonStr);</span><br><span class="line">å°†JSONObject è½¬æ¢ä¸ºå¯¹è±¡</span><br><span class="line">JSONObject person = new JSONObject();</span><br><span class="line">person.put(&quot;name&quot;, &quot;é©¬é©¬é©¬é©¬é©¬ç™¾ä¸‡&quot;);</span><br><span class="line">person.put(&quot;age&quot;, 25);</span><br><span class="line">Student stuObj = JSON.toJavaObject(person, Student.class);</span><br></pre></td></tr></table></figure>

<h3 id="ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡"><a href="#ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡"></a>ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">B = JSON.parseObject(JSON.toString(a), b.class)</span><br></pre></td></tr></table></figure>


<h3 id="getJSONObjectã€getJSONArray"><a href="#getJSONObjectã€getJSONArray" class="headerlink" title="getJSONObjectã€getJSONArray"></a>getJSONObjectã€getJSONArray</h3><p>Fastjsonä¸­getJSONObject()ä¸getJSONArray()ï¼Œç”¨äºè·å–JSONObjecté‡Œçš„JSONObjectã€JSONArray()ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;    &quot;package&quot;: &#123;</span><br><span class="line">        &quot;List1&quot;: &#123;</span><br><span class="line">            &quot;errorCode&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;errorMsg&quot;: &quot;Success&quot;,</span><br><span class="line">            &quot;receiverTradeNum&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;List2&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;medicalNum&quot;: &quot;15XXXXXX&quot;,</span><br><span class="line">                &quot;queryDate&quot;: &quot;YYYYMMDD&quot;,</span><br><span class="line">                &quot;name&quot;: &quot;XXX&quot;,</span><br><span class="line">                &quot;authorizationNum&quot;: &quot;xxxxx&quot;,</span><br><span class="line">                &quot;pageNum&quot;: &quot;1&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">JSONObject jsonObj = JSON.parseObject(jsonStr);</span><br><span class="line">JSONObject package = jsonObj.getJSONObject(&quot;package&quot;);     // å®šä½åˆ°package jsonå¯¹è±¡</span><br><span class="line">JSONArray list = package.getJSONArray(&quot;List2&quot;);   //é‡‡ç”¨getJSONArrayæ–¹æ³•ï¼Œ å®šä½åˆ°jsoné›†åˆ</span><br></pre></td></tr></table></figure>


<h3 id="XStream"><a href="#XStream" class="headerlink" title="XStream"></a>XStream</h3><p>XStreamæ˜¯Javaç±»åº“ï¼Œç”¨æ¥å°†å¯¹è±¡åºåˆ—åŒ–æˆXMLï¼ˆJSONï¼‰æˆ–ååºåˆ—åŒ–ä¸ºå¯¹è±¡ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨XStreamï¼Œæˆ‘ä»¬å¯ä»¥æŠŠJavaå¯¹è±¡è½¬æ¢æˆXMLï¼Œä¹Ÿå¯ä»¥å°†XMLè½¬æ¢ä¸ºJavaå¯¹è±¡ã€‚</p>
<p>ä¾èµ–ï¼š<br>XStreamçš„å¿…å¯¼JARåŒ…ï¼š<br>æ ¸å¿ƒJARåŒ…ï¼šxstream-1.4.7.jarï¼›<br>å¿…é¡»ä¾èµ–åŒ…ï¼šxpp3_min-1.1.4c.jarï¼ˆXML Pull Parserï¼Œä¸€æ¬¾é€Ÿåº¦å¾ˆå¿«çš„XMLè§£æå™¨ï¼‰ã€‚</p>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">XStream xStream = new XStream();</span><br><span class="line">xStream.alias(&quot;china&quot;, List.class);   //æ ‡ç­¾ç±»æ¢æˆæŒ‡å®šå­—ç¬¦</span><br><span class="line">xStream.alias(&quot;province&quot;, Province.class);</span><br><span class="line">xStream.alias(&quot;city&quot;, City.class);</span><br><span class="line"></span><br><span class="line">xStream.useAttributeFor(Province.class, &quot;name&quot;); //å­å…ƒç´ ç¼–ç¨‹ç†Ÿæ‚‰</span><br><span class="line">xStream.addImplicitCollection(Province.class, &quot;cities&quot;);  //å»æ‰citiesæ ‡ç­¾</span><br><span class="line"></span><br><span class="line">String string = xStream.toXML(proList);</span><br><span class="line">System.out.println(string);</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u014565127/article/details/104419528">https://blog.csdn.net/u014565127/article/details/104419528</a></p>
<p><strong>é«˜å¹¶å‘æƒ…å†µä¸‹çš„æ€§èƒ½é—®é¢˜</strong></p>
<p>é¡¹ç›®ä¸­ä½¿ç”¨äº†XStreamè¿›è¡ŒXMLåºåˆ—åŒ–ã€ååºåˆ—åŒ–çš„æ–¹æ¡ˆï¼Œå®ŒæˆæœåŠ¡ä¹‹é—´çš„æ¥å£æŠ¥æ–‡Objectä¸Xmlgæ ¼å¼ä¹‹é—´çš„è½¬åŒ–ã€‚</p>
<p>å½“çº¿ä¸Šä¸šåŠ¡é‡å¹¶ä¸å¤§çš„æƒ…å†µä¸‹ï¼Œä¸€åˆ‡æ­£å¸¸ï¼›ä½†æ˜¯å‘ç°å½“ä¸šåŠ¡é‡çªç„¶åŠ å¤§çš„æƒ…å†µä¸‹ï¼Œçªç„¶å‘ç°ï¼Œçº¿ä¸ŠæœåŠ¡å™¨å‡ºç°CPUå±…é«˜ä¸ä¸‹ï¼ŒæœåŠ¡æ¥å£è°ƒç”¨é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œç ”ç©¶JVMæ—¥å¿—åˆ†æï¼Œå‘ç°å‡ºç°å¾ˆå¤šçš„RUNNABLEé—®é¢˜ã€‚</p>
<p>é—®é¢˜åŸå› ï¼šXStreamåœ¨newçš„æ—¶å€™ä¼šåˆ›å»ºCompositeClassLoaderï¼ˆåˆå§‹ç±»åŠ è½½å™¨ï¼‰ï¼Œå¹¶ä¸”ä¸æ–­newä¼šä¸æ–­åˆ›å»ºï¼Œå¯¼è‡´ygcéœ€è¦æ‰«æçš„å†…å®¹è¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆå¯¼è‡´æ¥å£è°ƒç”¨æ€§èƒ½ä¸‹é™ã€‚</p>
<p>XStreamæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸éœ€è¦é‡å¤åˆå§‹åŒ–xstreamå¯¹è±¡ï¼Œæ¯ä¸€ç§ç±»å‹å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡å³å¯ï¼Œè€Œæ­£æ˜¯ç”±äºå¼€å‘äººå‘˜é”™è¯¯åœ°åœ¨æ¯æ¬¡å¤„ç†æ—¶éƒ½å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„xstreamå¯¹è±¡ï¼Œæ‰å¯¼è‡´äº†è¯¥é—®é¢˜ã€‚</p>
<p>è§£å†³ï¼šå•åˆ—æ¨¡å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">åŸæ¥ï¼š</span><br><span class="line">XStream xstream = XStreamInitializer.getInstance();</span><br><span class="line">xstream.processAnnotations(this.getClass());</span><br><span class="line">xstream.aliasSystemAttribute(null, &quot;class&quot;);</span><br><span class="line">return xstream.toXML(this);</span><br><span class="line"></span><br><span class="line">ç°åœ¨ï¼š</span><br><span class="line">å®ç°å•åˆ—ï¼š</span><br><span class="line">public class XmlHandler&#123;</span><br><span class="line"></span><br><span class="line">    private static final ConcurrentHashMap xStream = new ConcurrentHashMap&lt;String, XStream&gt;();</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * åˆå§‹åŒ–</span><br><span class="line">     * @param objName</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    private static XStream getXStream(Class&lt;?&gt; objName) &#123;</span><br><span class="line">        String key = objName.getName();</span><br><span class="line">        if (xStream.get(key) == null)</span><br><span class="line">            xStream.put(key, new XStream());</span><br><span class="line">        return (XStream) xStream.get(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">åºåˆ—åŒ–ï¼š</span><br><span class="line">XStream xstream = XmlHandler.getXStream(Dog.class);</span><br><span class="line">xstream.processAnnotations(Dog.class);</span><br><span class="line">String xml = xstream.toXML(dog);</span><br><span class="line"></span><br><span class="line">ååºåˆ—åŒ–ï¼š</span><br><span class="line">XStream xStream = XmlHandler.getXStream(Dog.class);</span><br><span class="line">xStream.processAnnotations(Dog.class);</span><br><span class="line">Dog dog = (Dog) xStream.fromXML(xml);</span><br></pre></td></tr></table></figure>

<p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43767602/article/details/114824028">https://blog.csdn.net/weixin_43767602/article/details/114824028</a></p>
<h3 id="JSONä¸XMLè½¬åŒ–"><a href="#JSONä¸XMLè½¬åŒ–" class="headerlink" title="JSONä¸XMLè½¬åŒ–"></a>JSONä¸XMLè½¬åŒ–</h3><p>è¯¦è§ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/CDWLX/article/details/119038509">https://blog.csdn.net/CDWLX/article/details/119038509</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/baidu_37366055/article/details/110468129">https://blog.csdn.net/baidu_37366055/article/details/110468129</a></p>
<p>xmlè½¬jsonï¼šç”¨ org.jdomï¼Œç”¨ dom æå–èŠ‚ç‚¹ è½¬æˆmap<br>jsonè½¬xmlï¼š com.alibaba.fastjson.JSONObject</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.jdom&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jdom&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.1.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;dom4j&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.6.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;gson&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.4&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.0.16.graal&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><span class="line">package org.example.javaer;</span><br><span class="line"></span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.StringReader;</span><br><span class="line">import java.io.StringWriter;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Map;</span><br><span class="line">import java.util.Map.Entry;</span><br><span class="line">import java.util.Set;</span><br><span class="line"></span><br><span class="line">import org.dom4j.io.OutputFormat;</span><br><span class="line">import org.dom4j.io.SAXReader;</span><br><span class="line">import org.dom4j.io.XMLWriter;</span><br><span class="line">import org.jdom.Document;</span><br><span class="line">import org.jdom.Element;</span><br><span class="line">import org.jdom.JDOMException;</span><br><span class="line">import org.jdom.input.SAXBuilder;</span><br><span class="line">import org.xml.sax.InputSource;</span><br><span class="line"></span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.alibaba.fastjson.JSONArray;</span><br><span class="line">import com.alibaba.fastjson.JSONObject;</span><br><span class="line"></span><br><span class="line">public class JsonXML &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        //è¯·æ³¨æ„ä½¿ç”¨æ­£å¸¸çš„xml</span><br><span class="line">        //xml-&gt;json</span><br><span class="line">//      String jsonStr = xmlToJson(&quot;D:\\NewFile.xml&quot;, null);</span><br><span class="line">//      System.out.println(jsonStr);</span><br><span class="line"></span><br><span class="line">        //json-&gt;xml</span><br><span class="line">        String xmlstr = jsonToXml(&quot;&#123;\&quot;b_content\&quot;:&#123;\&quot;sdata\&quot;:\&quot;Ps/DPJnZZPN6QQJQodY3+hK6PWCF3/2oi3DJPnFEXgKDrXX5rHT7q/I0nQPAruuBbQRfErnenQNvPpbf/lXl690qtye0/ZEuDs0ByFdFAGffQalB+Ij3lLUMDPz=\&quot;,\&quot;userobj\&quot;:&#123;\&quot;uid\&quot;:\&quot;ma000\&quot;,\&quot;realtype\&quot;:\&quot;DC\&quot;,\&quot;cn\&quot;:\&quot;æ³•äººç”¨æˆ·2\&quot;,\&quot;tokenid\&quot;:\&quot;\&quot;,\&quot;usertype\&quot;:\&quot;2\&quot;,\&quot;link_person_name\&quot;:\&quot;è”ç³»äºº2\&quot;,\&quot;isreal\&quot;:\&quot;true\&quot;,\&quot;telephonenumber\&quot;:\&quot;13*******21\&quot;,\&quot;mail\&quot;:\&quot;ceshi@123.com\&quot;,\&quot;idcardtype\&quot;:\&quot;10\&quot;,\&quot;createtime\&quot;:\&quot;20150618191221\&quot;,\&quot;extproperties\&quot;:[\&quot;address=å¹¿ä¸œçœå¹¿å·å¸‚å¤©æ²³åŒºå¤©æ²³åŒ—è·¯XXXå·\&quot;,\&quot;legal_code=440***********033\&quot;,\&quot;ent_type=-1\&quot;,\&quot;link_person_code=350************14\&quot;,\&quot;origin=gdbs\&quot;,\&quot;card_type_two_num=-1\&quot;,\&quot;cert_ca=-1\&quot;,\&quot;accout_type=2\&quot;,\&quot;account_uid=2\&quot;,\&quot;comm_code=-1\&quot;,\&quot;unit_type=-1\&quot;,\&quot;legal_id_type=10\&quot;,\&quot;landline=-1\&quot;,\&quot;tax_code=-1\&quot;,\&quot;cert_notafter=-1\&quot;,\&quot;card_type_one_num=-1\&quot;,\&quot;local_user=-1\&quot;,\&quot;legal_person=éƒ‘**\&quot;,\&quot;link_person_type=10\&quot;,\&quot;card_type_three=-1\&quot;,\&quot;card_type_two=-1\&quot;,\&quot;card_type_three_num=-1\&quot;,\&quot;cert_data=-1\&quot;,\&quot;area=guangzhou\&quot;,\&quot;uversion=3.0\&quot;,\&quot;cert_notbefore=-1\&quot;,\&quot;card_type_one=-1\&quot;,\&quot;user_typeext=2\&quot;],\&quot;idcardnumber\&quot;:\&quot;11***************23\&quot;,\&quot;useridcode\&quot;:\&quot;38c97fa1ee2e43d4a664cffc4554cde4\&quot;,\&quot;creditable_level_of_account_way\&quot;:\&quot;L2@YSS@2088******653||L0@IDV@44088******75||L3@GW@44088******75\&quot;,\&quot;creditable_level_of_account\&quot;:\&quot;L3\&quot;&#125;,\&quot;pareobj\&quot;:&#123;\&quot;uid\&quot;:\&quot;mayintao\&quot;,\&quot;realtype\&quot;:\&quot;DC\&quot;,\&quot;cn\&quot;:\&quot;å•ä½ç”¨æˆ·2\&quot;,\&quot;tokenid\&quot;:\&quot;\&quot;,\&quot;usertype\&quot;:\&quot;2\&quot;,\&quot;link_person_name\&quot;:\&quot;è”ç³»äºº2\&quot;,\&quot;isreal\&quot;:\&quot;true\&quot;,\&quot;telephonenumber\&quot;:\&quot;13*******21\&quot;,\&quot;mail\&quot;:\&quot;ceshi@123.com\&quot;,\&quot;idcardtype\&quot;:\&quot;50\&quot;,\&quot;createtime\&quot;:\&quot;20150618191221\&quot;,\&quot;extproperties\&quot;:[\&quot;address=å¹¿ä¸œçœå¹¿å·å¸‚ä¸œå±±åŒº\&quot;,\&quot;legal_id_type=-1\&quot;,\&quot;link_person_type=-1\&quot;,\&quot;legal_code=-1\&quot;,\&quot;origin=gdbs\&quot;,\&quot;tax_code=-1\&quot;,\&quot;legal_person=-1\&quot;,\&quot;area=shenzhen\&quot;,\&quot;link_person_code=-1\&quot;,\&quot;user_typeext=2\&quot;,\&quot;uversion=1.0\&quot;],\&quot;idcardnumber\&quot;:\&quot;456787654\&quot;,\&quot;useridcode\&quot;:\&quot;75c91fagrr2e67d4a169cfmc8735ctrf\&quot;,\&quot;creditable_level_of_account_way\&quot;:\&quot;L2@YSS@2088******653||L0@IDV@44088******75||L3@GW@44088******75\&quot;,\&quot;creditable_level_of_account\&quot;:\&quot;L3\&quot;&#125;,\&quot;user_creditable_level\&quot;:&#123;\&quot;creditable_level_of_account_way\&quot;:\&quot;L2@YSS@2088******653||L0@IDV@44088******75||L3@GW@44088******75\&quot;,\&quot;creditable_level_of_account_way_list\&quot;:[&#123;\&quot;auth_time\&quot;:\&quot;2018-02-28 16:45:26\&quot;,\&quot;uniqueid\&quot;:\&quot;***86f93fb61***\&quot;,\&quot;user_name\&quot;:\&quot;éƒ­**\&quot;,\&quot;auth_identification\&quot;:\&quot;2088******653\&quot;,\&quot;identity_level\&quot;:\&quot;L2\&quot;,\&quot;credential_no\&quot;:\&quot;44088******75\&quot;,\&quot;way_code\&quot;:\&quot;YSS\&quot;&#125;,&#123;\&quot;auth_time\&quot;:null,\&quot;uniqueid\&quot;:\&quot;***764486f93fb61212***\&quot;,\&quot;user_name\&quot;:\&quot;éƒ­**\&quot;,\&quot;auth_identification\&quot;:\&quot;44088******75\&quot;,\&quot;identity_level\&quot;:\&quot;L0\&quot;,\&quot;credential_no\&quot;:\&quot;44088******75\&quot;,\&quot;way_code\&quot;:\&quot;IDV\&quot;&#125;,&#123;\&quot;auth_time\&quot;:\&quot;2018-02-13 17:12:31\&quot;,\&quot;uniqueid\&quot;:\&quot;*****764486f93fb612122*****\&quot;,\&quot;user_name\&quot;:\&quot;éƒ­**\&quot;,\&quot;auth_identification\&quot;:\&quot;44088******75\&quot;,\&quot;identity_level\&quot;:\&quot;L3\&quot;,\&quot;credential_no\&quot;:\&quot;44088******75\&quot;,\&quot;way_code\&quot;:\&quot;GW\&quot;&#125;],\&quot;creditable_level_of_account\&quot;:\&quot;L3\&quot;&#125;&#125;,\&quot;time_stamp\&quot;:\&quot;20200821\&quot;,\&quot;version \&quot;:\&quot;v1\&quot;,\&quot;sign\&quot;:\&quot;rxf0MFT7eQqYgYKWtgzNBi6mhS2tbqkPgI \&quot;&#125;&quot;);</span><br><span class="line">        System.out.println(xmlstr);</span><br><span class="line">        createXMLFile(formatXML(xmlstr), &quot;æµ‹è¯•&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * xmlè½¬jsonå­—ç¬¦ä¸² æ³¨æ„:è·¯å¾„å’Œå­—ç¬¦ä¸²äºŒä¼ ä¸€å¦å¤–ä¸€ä¸ªä¼ null&lt;br&gt;</span><br><span class="line">     * æ–¹ æ³• åï¼šxmlToJson &lt;br&gt;</span><br><span class="line">     * @param xmlPath xmlè·¯å¾„(å’Œå­—ç¬¦ä¸²äºŒä¼ ä¸€,ä¸¤æ ·éƒ½ä¼ ä¼˜å…ˆä½¿ç”¨è·¯å¾„)</span><br><span class="line">     * @param xmlStr xmlå­—ç¬¦ä¸²(å’Œè·¯å¾„äºŒä¼ ä¸€,ä¸¤æ ·éƒ½ä¼ ä¼˜å…ˆä½¿ç”¨è·¯å¾„)</span><br><span class="line">     * @return String</span><br><span class="line">     * @throws IOException</span><br><span class="line">     * @throws JDOMException</span><br><span class="line">     */</span><br><span class="line">    @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">    public static String xmlToJson(String xmlPath,String xmlStr)&#123;</span><br><span class="line">        SAXBuilder sbder = new SAXBuilder();</span><br><span class="line">        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();</span><br><span class="line">        Document document;</span><br><span class="line">        try &#123;</span><br><span class="line">            if(xmlPath!=null)&#123;</span><br><span class="line">                //è·¯å¾„</span><br><span class="line">                document = sbder.build(new File(xmlPath));</span><br><span class="line">            &#125;else if(xmlStr!=null)&#123;</span><br><span class="line">                //xmlå­—ç¬¦</span><br><span class="line">                StringReader reader = new StringReader(xmlStr);</span><br><span class="line">                InputSource ins = new InputSource(reader);</span><br><span class="line">                document = sbder.build(ins);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                return &quot;&#123;&#125;&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            //è·å–æ ¹èŠ‚ç‚¹</span><br><span class="line">            Element el =  document.getRootElement();</span><br><span class="line">            List&lt;Element&gt; eList =  el.getChildren();</span><br><span class="line">            Map&lt;String, Object&gt; rootMap = new HashMap&lt;String, Object&gt;();</span><br><span class="line">            //å¾—åˆ°é€’å½’ç»„è£…çš„map</span><br><span class="line">            rootMap = xmlToMap(eList,rootMap);</span><br><span class="line">            map.put(el.getName(), rootMap);</span><br><span class="line">            //å°†mapè½¬æ¢ä¸ºjson è¿”å›</span><br><span class="line">            return JSON.toJSONString(map);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            return &quot;&#123;&#125;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * jsonè½¬xml&lt;br&gt;</span><br><span class="line">     * æ–¹ æ³• åï¼šjsonToXml &lt;br&gt;</span><br><span class="line">     * @param json</span><br><span class="line">     * @return String</span><br><span class="line">     */</span><br><span class="line">    public static String jsonToXml(String json)&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            StringBuffer buffer = new StringBuffer();</span><br><span class="line">            buffer.append(&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;&quot;);</span><br><span class="line">            buffer.append(&quot;&lt;base&gt;&quot;);</span><br><span class="line">            JSONObject jObj = JSON.parseObject(json);</span><br><span class="line">            jsonToXmlstr(jObj,buffer);</span><br><span class="line">            buffer.append(&quot;&lt;/base&gt;&quot;);</span><br><span class="line">            return buffer.toString();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * jsonè½¬str&lt;br&gt;</span><br><span class="line">     * æ–¹ æ³• åï¼šjsonToXmlstr &lt;br&gt;</span><br><span class="line">     * @param jObj</span><br><span class="line">     * @param buffer</span><br><span class="line">     * @return String</span><br><span class="line">     */</span><br><span class="line">    public static String jsonToXmlstr(JSONObject jObj,StringBuffer buffer )&#123;</span><br><span class="line">        Set&lt;Entry&lt;String, Object&gt;&gt;  se = jObj.entrySet();</span><br><span class="line">        for( Iterator&lt;Entry&lt;String, Object&gt;&gt;   it = se.iterator();  it.hasNext(); )</span><br><span class="line">        &#123;</span><br><span class="line">            Entry&lt;String, Object&gt; en = it.next();</span><br><span class="line">            if(en.getValue() != null &amp;&amp; en.getValue().getClass().getName().equals(&quot;com.alibaba.fastjson.JSONObject&quot;))&#123;</span><br><span class="line">                buffer.append(&quot;&lt;&quot;+en.getKey()+&quot;&gt;&quot;);</span><br><span class="line">                JSONObject jo = jObj.getJSONObject(en.getKey());</span><br><span class="line">                jsonToXmlstr(jo,buffer);</span><br><span class="line">                buffer.append(&quot;&lt;/&quot;+en.getKey()+&quot;&gt;&quot;);</span><br><span class="line">            &#125;else if(en.getValue() != null &amp;&amp; en.getValue().getClass().getName().equals(&quot;com.alibaba.fastjson.JSONArray&quot;))&#123;</span><br><span class="line">                if (en.getKey().equals(&quot;extproperties&quot;)) &#123;</span><br><span class="line">                    JSONArray ja = jObj.getJSONArray(en.getKey());</span><br><span class="line">                    Iterator&lt;Object&gt; it1 = ja.iterator();</span><br><span class="line">                    List&lt;String&gt; list=new ArrayList&lt;String&gt;();</span><br><span class="line">                    while (it1.hasNext()) &#123;</span><br><span class="line">                        String ob = (String) it1.next();</span><br><span class="line">                        System.out.println(ob);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;else &#123;</span><br><span class="line">                    JSONArray jarray = jObj.getJSONArray(en.getKey());</span><br><span class="line">                    for (int i = 0; i &lt; jarray.size(); i++) &#123;</span><br><span class="line">                        buffer.append(&quot;&lt;&quot;+en.getKey()+&quot;&gt;&quot;);</span><br><span class="line">                        JSONObject jsonobject =  jarray.getJSONObject(i);</span><br><span class="line">                        jsonToXmlstr(jsonobject,buffer);</span><br><span class="line">                        buffer.append(&quot;&lt;/&quot;+en.getKey()+&quot;&gt;&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;else if(en.getValue() != null &amp;&amp; en.getValue().getClass().getName().equals(&quot;java.lang.String&quot;))&#123;</span><br><span class="line">                buffer.append(&quot;&lt;&quot;+en.getKey()+&quot;&gt;&quot;+en.getValue());</span><br><span class="line">                buffer.append(&quot;&lt;/&quot;+en.getKey()+&quot;&gt;&quot;);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                buffer.append(&quot;&lt;&quot;+en.getKey()+&quot;&gt;&quot;+&quot;&quot;);</span><br><span class="line">                buffer.append(&quot;&lt;/&quot;+en.getKey()+&quot;&gt;&quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        return buffer.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * èŠ‚ç‚¹è½¬map&lt;br&gt;</span><br><span class="line">     * æ–¹ æ³• åï¼šxmlToMap &lt;br&gt;</span><br><span class="line">     * @param eList</span><br><span class="line">     * @param map</span><br><span class="line">     * @return Map&lt;String,Object&gt;</span><br><span class="line">     */</span><br><span class="line">    @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">    public static Map&lt;String, Object&gt; xmlToMap(List&lt;Element&gt; eList,Map&lt;String, Object&gt; map)&#123;</span><br><span class="line">        for (Element e : eList) &#123;</span><br><span class="line">            Map&lt;String, Object&gt; eMap = new HashMap&lt;String, Object&gt;();</span><br><span class="line">            List&lt;Element&gt; elementList = e.getChildren();</span><br><span class="line">            if(elementList!=null&amp;&amp;elementList.size()&gt;0)&#123;</span><br><span class="line">                eMap = xmlToMap(elementList,eMap);</span><br><span class="line">                Object obj = map.get(e.getName());</span><br><span class="line">                if(obj!=null)&#123;</span><br><span class="line">                    List&lt;Object&gt; olist = new ArrayList&lt;Object&gt;();</span><br><span class="line">                    if(obj.getClass().getName().equals(&quot;java.util.HashMap&quot;))&#123;</span><br><span class="line">                        olist.add(obj);</span><br><span class="line">                        olist.add(eMap);</span><br><span class="line"></span><br><span class="line">                    &#125;else if(obj.getClass().getName().equals(&quot;java.util.ArrayList&quot;))&#123;</span><br><span class="line">                        olist = (List&lt;Object&gt;)obj;</span><br><span class="line">                        olist.add(eMap);</span><br><span class="line">                    &#125;</span><br><span class="line">                    map.put(e.getName(), olist);</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    map.put(e.getName(), eMap);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                map.put(e.getName(), e.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å°†å·²ç»æ ¼å¼åŒ–çš„xmlå­—ç¬¦ä¸²å†™å…¥xmlæ–‡ä»¶</span><br><span class="line">     * @param xmlStr</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static boolean createXMLFile(String xmlStr,String xmlName)&#123;</span><br><span class="line">        boolean flag = false;</span><br><span class="line">        try &#123;</span><br><span class="line">            XMLWriter output = null;</span><br><span class="line">            //OutputFormat   format   =   OutputFormat.createPrettyPrint();</span><br><span class="line">            //format.setSuppressDeclaration(true);</span><br><span class="line">            // format.setEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">            //å¦‚æœä¸Šé¢è®¾ç½®çš„xmlç¼–ç ç±»å‹ä¸ºGBKï¼Œåˆ™åº”å½“ç”¨FileWriteræ¥æ„å»ºxmlæ–‡ä»¶ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸­æ–‡è¿ç é—®é¢˜</span><br><span class="line">                /*outpt = new XMLWriter(</span><br><span class="line">                        new FileWriter(</span><br><span class="line">                                new File(&quot;D:/myeclipse/Workspaces/fusionChartsDemoTest/WebRoot/xml/&quot;+xmlName+&quot;.xml&quot;)) ,</span><br><span class="line">                                    format);</span><br><span class="line">                  */</span><br><span class="line"></span><br><span class="line">            //å¦‚æœä¸Šé¢è®¾ç½®çš„xmlç¼–ç ç±»å‹ä¸ºutf-8ï¼Œåˆ™åº”å½“ç”¨FileOutputStreamæ¥æ„å»ºxmlæ–‡ä»¶ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šå‡ºç°é—®é¢˜</span><br><span class="line">            output = new XMLWriter(</span><br><span class="line">                    new FileOutputStream(</span><br><span class="line">                            new File(&quot;D:/&quot;+xmlName+&quot;.xml&quot;)));</span><br><span class="line">            output.setEscapeText(false);</span><br><span class="line">            output.write( xmlStr );</span><br><span class="line">            output.close();</span><br><span class="line">            return flag = true;</span><br><span class="line"></span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return flag;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static  String formatXML(String str) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        SAXReader reader=new SAXReader();</span><br><span class="line"></span><br><span class="line">        //åˆ›å»ºä¸€ä¸ªä¸²çš„å­—ç¬¦è¾“å…¥æµ</span><br><span class="line">        StringReader in=new StringReader(str);</span><br><span class="line">        org.dom4j.Document doc=reader.read(in);</span><br><span class="line">        // åˆ›å»ºè¾“å‡ºæ ¼å¼</span><br><span class="line">        OutputFormat formater=OutputFormat.createPrettyPrint();</span><br><span class="line">        //å»æ‰xmlæ–‡ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">        //formater.setSuppressDeclaration(true);</span><br><span class="line">        //è®¾ç½®xmlçš„è¾“å‡ºç¼–ç </span><br><span class="line">        formater.setEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        //åˆ›å»ºè¾“å‡º(ç›®æ ‡)</span><br><span class="line">        StringWriter out=new StringWriter();</span><br><span class="line">        //åˆ›å»ºè¾“å‡ºæµ</span><br><span class="line">        XMLWriter writer=new XMLWriter(out,formater);</span><br><span class="line">        //è¾“å‡ºæ ¼å¼åŒ–çš„ä¸²åˆ°ç›®æ ‡ä¸­ï¼Œæ‰§è¡Œåã€‚æ ¼å¼åŒ–åçš„ä¸²ä¿å­˜åœ¨outä¸­ã€‚</span><br><span class="line">        writer.write(doc);</span><br><span class="line"></span><br><span class="line">        writer.close();</span><br><span class="line"></span><br><span class="line">        // System.out.println(out.toString());</span><br><span class="line"></span><br><span class="line">        //è¿”å›æˆ‘ä»¬æ ¼å¼åŒ–åçš„ç»“æœ</span><br><span class="line">        return out.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/29/myblog/JAVA/java%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/29/myblog/JAVA/java%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">javaå¸¸è§„æ³¨è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-29 22:56:27" itemprop="dateCreated datePublished" datetime="2022-04-29T22:56:27+08:00">2022-04-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-20 15:33:54" itemprop="dateModified" datetime="2023-08-20T15:33:54+08:00">2023-08-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ä»JDK5å¼€å§‹,Javaå¢åŠ å¯¹å…ƒæ•°æ®çš„æ”¯æŒï¼Œä¹Ÿå°±æ˜¯æ³¨è§£ï¼Œæ³¨è§£ä¸æ³¨é‡Šæ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„ï¼Œå¯ä»¥æŠŠæ³¨è§£ç†è§£ä¸ºä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°ï¼Œè¿™äº›æ ‡è®°å¯ä»¥åœ¨ç¼–è¯‘ï¼Œç±»åŠ è½½ï¼Œè¿è¡Œæ—¶è¢«è¯»å–ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å¤„ç†ã€‚é€šè¿‡æ³¨è§£å¼€å‘äººå‘˜å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç å’Œé€»è¾‘çš„æƒ…å†µä¸‹åœ¨æºä»£ç ä¸­åµŒå…¥è¡¥å……ä¿¡æ¯ã€‚</p>
<p>æ‰€æœ‰çš„æ³¨è§£æœ¬è´¨ä¸Šéƒ½æ˜¯ç»§æ‰¿è‡ª Annotation æ¥å£ã€‚ä½†æ˜¯ï¼Œæ‰‹åŠ¨å®šä¹‰ä¸€ä¸ªæ¥å£ç»§æ‰¿ Annotation æ¥å£æ— æ•ˆçš„ï¼Œéœ€è¦é€šè¿‡ @interface å£°æ˜æ³¨è§£ï¼ŒAnnotation æ¥å£æœ¬èº«ä¹Ÿä¸å®šä¹‰æ³¨è§£ç±»å‹ï¼Œåªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ¥å£ã€‚</p>
<h3 id="Pattern"><a href="#Pattern" class="headerlink" title="@Pattern"></a>@Pattern</h3><p>ç”¨æ¥é™å®šstringæ ¼å¼ï¼Œç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥é™å®šã€‚<br>éœ€è¦å¯¼å…¥validation-apiåŒ…ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Getter</span><br><span class="line">    @Setter</span><br><span class="line">    public static class StudentVO&#123;</span><br><span class="line">        @Pattern(regexp = &quot;^[A-Za-z]+$&quot;, message = &quot;åªèƒ½å­—æ¯&quot;)</span><br><span class="line">        private String name;</span><br><span class="line">        private Long age;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">1 åŒ¹é…é¦–å°¾ç©ºæ ¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š(^\s*)|(\s*$)</span><br><span class="line">  2 æ•´æ•°æˆ–è€…å°æ•°ï¼š^[0-9]+\.&#123;0,1&#125;[0-9]&#123;0,2&#125;$</span><br><span class="line">  3 åªèƒ½è¾“å…¥æ•°å­—ï¼š&quot;^[0-9]*$&quot;ã€‚</span><br><span class="line">  4 åªèƒ½è¾“å…¥nä½çš„æ•°å­—ï¼š&quot;^\d&#123;n&#125;$&quot;ã€‚</span><br><span class="line">  5 åªèƒ½è¾“å…¥è‡³å°‘nä½çš„æ•°å­—ï¼š&quot;^\d&#123;n,&#125;$&quot;ã€‚</span><br><span class="line">  6 åªèƒ½è¾“å…¥m~nä½çš„æ•°å­—ï¼šã€‚&quot;^\d&#123;m,n&#125;$&quot;</span><br><span class="line">  7 åªèƒ½è¾“å…¥é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—ï¼š&quot;^(0|[1-9][0-9]*)$&quot;ã€‚</span><br><span class="line">  8 åªèƒ½è¾“å…¥æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°ï¼š&quot;^[0-9]+(.[0-9]&#123;2&#125;)?$&quot;ã€‚</span><br><span class="line">  9 åªèƒ½è¾“å…¥æœ‰1~3ä½å°æ•°çš„æ­£å®æ•°ï¼š&quot;^[0-9]+(.[0-9]&#123;1,3&#125;)?$&quot;ã€‚</span><br><span class="line"> 10 åªèƒ½è¾“å…¥éé›¶çš„æ­£æ•´æ•°ï¼š&quot;^\+?[1-9][0-9]*$&quot;ã€‚</span><br><span class="line"> 11 åªèƒ½è¾“å…¥éé›¶çš„è´Ÿæ•´æ•°ï¼š&quot;^\-[1-9][]0-9&quot;*$ã€‚</span><br><span class="line"> 12 åªèƒ½è¾“å…¥é•¿åº¦ä¸º3çš„å­—ç¬¦ï¼š&quot;^.&#123;3&#125;$&quot;ã€‚</span><br><span class="line"> 13 åªèƒ½è¾“å…¥ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^[A-Za-z]+$&quot;ã€‚</span><br><span class="line"> 14 åªèƒ½è¾“å…¥ç”±26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^[A-Z]+$&quot;ã€‚</span><br><span class="line"> 15 åªèƒ½è¾“å…¥ç”±26ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^[a-z]+$&quot;ã€‚</span><br><span class="line"> 16 åªèƒ½è¾“å…¥ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^[A-Za-z0-9]+$&quot;ã€‚</span><br><span class="line"> 17 åªèƒ½è¾“å…¥ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š&quot;^\w+$&quot;ã€‚</span><br><span class="line"> 18 éªŒè¯ç”¨æˆ·å¯†ç ï¼š&quot;^[a-zA-Z]\w&#123;5,17&#125;$&quot;æ­£ç¡®æ ¼å¼ä¸ºï¼šä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6~18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—ç¬¦ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚</span><br><span class="line"> 19 éªŒè¯æ˜¯å¦å«æœ‰^%&amp;&#x27;,;=?$\&quot;ç­‰å­—ç¬¦ï¼š&quot;[^%&amp;&#x27;,;=?$\x22]+&quot;ã€‚</span><br><span class="line"> 20 åªèƒ½è¾“å…¥æ±‰å­—ï¼š&quot;^[\u4e00-\u9fa5]&#123;0,&#125;$&quot;</span><br><span class="line"> 21 éªŒè¯Emailåœ°å€ï¼š&quot;^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$&quot;ã€‚</span><br><span class="line"> 22 éªŒè¯InternetURLï¼š&quot;^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$&quot;ã€‚</span><br><span class="line"> 23 éªŒè¯ç”µè¯å·ç ï¼š&quot;^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$&quot;æ­£ç¡®æ ¼å¼ä¸ºï¼š&quot;XXX-XXXXXXX&quot;ã€&quot;XXXX-XXXXXXXX&quot;ã€&quot;XXX-XXXXXXX&quot;ã€&quot;XXX-XXXXXXXX&quot;ã€&quot;XXXXXXX&quot;å’Œ&quot;XXXXXXXX&quot;ã€‚</span><br><span class="line"> 24 éªŒè¯èº«ä»½è¯å·ï¼ˆ15ä½æˆ–18ä½æ•°å­—ï¼‰ï¼š&quot;^\d&#123;15&#125;|\d&#123;18&#125;$&quot;ã€‚</span><br><span class="line"> 25 éªŒè¯ä¸€å¹´çš„12ä¸ªæœˆï¼š&quot;^(0?[1-9]|1[0-2])$&quot;æ­£ç¡®æ ¼å¼ä¸ºï¼š&quot;01&quot;ï½&quot;09&quot;å’Œ&quot;1&quot;ï½&quot;12&quot;ã€‚</span><br><span class="line"> 26 éªŒè¯ä¸€ä¸ªæœˆçš„31å¤©ï¼š&quot;^((0?[1-9])|((1|2)[0-9])|30|31)$&quot;æ­£ç¡®æ ¼å¼ä¸ºï¼›&quot;01&quot;ï½&quot;09&quot;å’Œ&quot;1&quot;ï½&quot;31&quot;ã€‚</span><br><span class="line"> 27 åŒ¹é…ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š [\u4e00-\u9fa5]</span><br><span class="line"> 28 åŒ¹é…åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…)ï¼š[^\x00-\xff]</span><br><span class="line"> 29 åº”ç”¨ï¼šè®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1ï¼‰</span><br><span class="line"> 30 String.prototype.len=function()&#123;return this.replace(/[^\x00-\xff]/g,&quot;aa&quot;).length;&#125;</span><br><span class="line"> 31 åŒ¹é…ç©ºè¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n[\s| ]*\r</span><br><span class="line"> 32 åŒ¹é…htmlæ ‡ç­¾çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š&lt;(.*)&gt;(.*)&lt;\/(.*)&gt;|&lt;(.*)\/&gt;</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/qq_36927265/article/details/87864026</span><br></pre></td></tr></table></figure>

<p>åœ¨controlå±‚ï¼Œå‰ç«¯è°ƒç”¨æ¥è¿›è¡Œæ•°æ®æ ¡éªŒã€‚</p>
<p>ä¸€ã€VOå¯¹è±¡å†…ç”¨@Patterné™å®šï¼Œcontrolæ–¹æ³•ä¸­ç”¨@Validæ£€æŸ¥ã€‚<br><a target="_blank" rel="noopener" href="http://www.wpf123.com/post/97.html">http://www.wpf123.com/post/97.html</a></p>
<p>äºŒã€controlç±»ç”¨@Validatedæ³¨è§£ï¼Œæ–¹æ³•å†…Stringå‚æ•°ç”¨@Pattern</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@Validated</span><br><span class="line">class Controller &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping</span><br><span class="line">public ResponseEntity&lt;List&lt;Permission&gt;&gt; query(</span><br><span class="line">    @RequestHeader(&quot;iv-user&quot;) String userId,</span><br><span class="line">        @Pattern(regexp = &quot;^accessor$&quot;, message = &quot;è¯·æ±‚å‚æ•°ä¸åˆæ³•&quot;)</span><br><span class="line">        @RequestParam(&quot;findBy&quot;) String accessor,</span><br><span class="line">        @RequestParam(&quot;accessorId&quot;) long accessorId)&#123;</span><br><span class="line">        //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="JSONField"><a href="#JSONField" class="headerlink" title="@JSONField"></a>@JSONField</h3><p>æ¥è‡ªfastjsonï¼Œfastjsonæ˜¯é˜¿é‡Œå·´å·´å‡ºå“çš„å¿«é€Ÿè§£æjsonçš„ä¸€ä¸ªå·¥å…·,</p>
<p>ä¸€ã€nameå±æ€§ï¼šç”¨æ¥æŒ‡å®šJSONä¸²ä¸­keyçš„åç§°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@JSONField(name = &quot;AGE&quot;)</span><br><span class="line">private String age;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½œç”¨åœ¨setterã€getteræ–¹æ³•ä¸Šã€‚</p>
<p>äºŒã€formatè§„å®šæ—¥æœŸæ ¼å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@JSONField(format=&quot;yyyy-MM-dd HH:mm:ss&quot;)</span><br><span class="line">private Date date;</span><br></pre></td></tr></table></figure>

<p>ä¸‰ã€ordinalï¼šè§„å®šå­—æ®µçš„é¡ºåº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@JSONField(ordinal = 3)</span><br><span class="line">private int f0;</span><br><span class="line"></span><br><span class="line">@JSONField(ordinal = 2)</span><br><span class="line">private int f1;</span><br><span class="line"></span><br><span class="line">@JSONField(ordinal = 1)</span><br><span class="line">private int f2;</span><br></pre></td></tr></table></figure>

<p>å››ã€serialize/deserializeæŒ‡å®šå­—æ®µä¸åºåˆ—åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@JSONField(serialize=false)</span><br><span class="line">public Date date;</span><br></pre></td></tr></table></figure>

<p>äº”ã€<code>@JSONField(serializeUsing=xxx.class, deserializeUsing=xxx.class)</code><br>æŒ‡å®šåºåˆ—åŒ–å’Œååºåˆ—åŒ–å­—æ®µä½¿ç”¨çš„åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨ã€‚<br>éœ€è¦å®ç°<code>ObjectSerializer</code>æ¥å£ã€‚</p>
<h3 id="ToString"><a href="#ToString" class="headerlink" title="@ToString"></a>@ToString</h3><p>LomBokä¸­çš„æ³¨è§£ï¼Œç”¨æ¥ç®€åŒ–ä»£ç ã€‚</p>
<p>1.é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†æ‰“å°æ‰€æœ‰éé™æ€å­—æ®µã€‚<br>2.å¦‚æœè¦è·³è¿‡æŸäº›å­—æ®µï¼Œå¯ä»¥ç”¨æ³¨é‡Šè¿™äº›å­—æ®µ@ToString.Excludeã€‚<br>3.å¯ä»¥ä½¿ç”¨ç²¾ç¡®æŒ‡å®šè¦è¢«toStringæ–¹æ³•åŒ…å«çš„å­—æ®µï¼Œå…ˆè®¾ç½®@ToString(onlyExplicitlyIncluded = true)ï¼Œç„¶åä½¿ç”¨@ToString.Includeæ ‡è®°æ¯ä¸ªè¦åŒ…å«çš„å­—æ®µã€‚<br>4.å¯ä»¥æ›´æ”¹ç”¨äºæ ‡è¯†æˆå‘˜çš„åç§°@ToString.Include(name = â€œsome other nameâ€)ï¼Œnameç›¸å½“äºç»™å­—æ®µèµ·åˆ«åã€‚<br>5.å¯ä»¥é€šè¿‡æ›´æ”¹æˆå‘˜çš„æ‰“å°é¡ºåº@ToString.Include(rank = 1)ã€‚rank è¡¨ç¤ºè¯¥å­—æ®µçš„ä¼˜å…ˆçº§ï¼Œå€¼è¶Šå¤§æ’åœ¨è¶Šå‰é¢ï¼Œé»˜è®¤ä¸º 0ï¼Œç­‰çº§ç›¸åŒçš„æˆå‘˜ä»¥å®ƒä»¬åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºæ‰“å°ã€‚</p>
<h3 id="CrossOrigin"><a href="#CrossOrigin" class="headerlink" title="@CrossOrigin"></a>@CrossOrigin</h3><p>å‡ºäºå®‰å…¨åŸå› ï¼Œæµè§ˆå™¨ç¦æ­¢Ajaxè°ƒç”¨é©»ç•™åœ¨å½“å‰åŸç‚¹ä¹‹å¤–çš„èµ„æºã€‚</p>
<p>è·¨æºèµ„æºå…±äº«ï¼ˆCORSï¼‰æ˜¯ç”±å¤§å¤šæ•°æµè§ˆå™¨å®ç°çš„W3Cè§„èŒƒï¼Œå…è®¸æ‚¨çµæ´»åœ°æŒ‡å®šä»€ä¹ˆæ ·çš„è·¨åŸŸè¯·æ±‚è¢«æˆæƒï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸€äº›ä¸å¤ªå®‰å…¨å’Œä¸å¤ªå¼ºå¤§çš„ç­–ç•¥ï¼Œå¦‚IFRAMEæˆ–JSONPã€‚</p>
<p>å‚æ•°ï¼š<br>originsï¼š å…è®¸å¯è®¿é—®çš„åŸŸåˆ—è¡¨<br>maxAge:å‡†å¤‡å“åº”å‰çš„ç¼“å­˜æŒç»­çš„æœ€å¤§æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</p>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@CrossOrigin(origins = &#123;&quot;http://domain2.com&quot;,&quot;ã€‚ã€‚ã€‚&quot;&#125;, maxAge = 3600)</span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/account&quot;)</span><br><span class="line">public class AccountController &#123;</span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;/&#123;id&#125;&quot;)</span><br><span class="line">    public Account retrieve(@PathVariable Long id) &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/188106">https://cloud.tencent.com/developer/article/188106</a></p>
<h3 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h3><p>å¼€å‘restful APIæ—¶ï¼Œä¼šç”¨åˆ°ï¼Œ@RestController æ˜¯@controllerå’Œ@ResponseBody çš„ç»“åˆã€‚</p>
<p>@Controller å°†å½“å‰ä¿®é¥°çš„ç±»æ³¨å…¥Spring IOCå®¹å™¨ï¼Œä½¿å¾—ä»è¯¥ç±»æ‰€åœ¨çš„é¡¹ç›®è·‘èµ·æ¥çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªç±»å°±è¢«å®ä¾‹åŒ–ã€‚</p>
<p>@ResponseBody å®ƒçš„ä½œç”¨æ˜¯æŒ‡è¯¥ç±»ä¸­æ‰€æœ‰çš„APIæ¥å£è¿”å›çš„æ•°æ®ï¼Œç”­ç®¡ä½ å¯¹åº”çš„æ–¹æ³•è¿”å›Mapæˆ–æ˜¯å…¶ä»–Objectï¼Œå®ƒä¼šä»¥Jsonå­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h3><p>@RequestMapping æ˜¯ Spring Web åº”ç”¨ç¨‹åºä¸­æœ€å¸¸è¢«ç”¨åˆ°çš„æ³¨è§£ä¹‹ä¸€ã€‚åœ¨Spring MVC ä¸­ä½¿ç”¨ @RequestMapping æ¥æ˜ å°„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å®ƒæ¥æŒ‡å®šæ§åˆ¶å™¨å¯ä»¥å¤„ç†å“ªäº›URLè¯·æ±‚ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@RestController  </span><br><span class="line">@RequestMapping(&quot;/home&quot;)  </span><br><span class="line">public class IndexController &#123;  </span><br><span class="line">    @RequestMapping(&quot;/&quot;)  </span><br><span class="line">    String get() &#123;  </span><br><span class="line">        //mapped to hostname:port/home/  </span><br><span class="line">        return &quot;go to home&quot;;  </span><br><span class="line">    &#125;  </span><br><span class="line">    @RequestMapping(&quot;/index&quot;)  </span><br><span class="line">    String index() &#123;  </span><br><span class="line">        //mapped to hostname:port/home/index/  </span><br><span class="line">        return &quot;go to index&quot;;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6f5aec232c97">https://www.jianshu.com/p/6f5aec232c97</a></p>
<p>âœ…RequestMappingå‚æ•°</p>
<p>1ï¼Œvalueï¼Œmethod<br>valueï¼šæŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Templateæ¨¡å¼ã€‚<br>methodï¼šæŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼ŒGETã€POSTã€PUTã€DELETEç­‰ã€‚</p>
<p>2ï¼Œconsumesï¼Œproduces<br>consumesï¼šæŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆcontent-typeï¼‰ï¼Œä¾‹å¦‚application/jsonï¼Œtext/htmlã€‚<br>producesï¼šæŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„ï¼ˆAcceptï¼‰ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ã€‚ä¸ä½†å¯ä»¥è®¾ç½®è¿”å›å€¼ç±»å‹è¿˜å¯ä»¥è®¾å®šè¿”å›å€¼çš„å­—ç¬¦ç¼–ç ã€‚</p>
<p>3ï¼Œparamsï¼Œheaders<br>paramsï¼šæŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ—¶ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚<br>headersï¼šæŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</p>
<p>å‰åç«¯æ•°æ®jsonæ•°æ®ç±»å‹</p>
<p>1ï¼Œjsonå¯¹è±¡ç±»å‹ï¼Œå³å‰ç«¯å®šä¹‰çš„Content typeä¸ºapplication/x-www-form-urlencodedç­‰ï¼Œåç«¯åº”ä½¿ç”¨@RequestParamæ³¨è§£æ¥æ”¶æ­¤ç±»å‹çš„jsonå‚æ•°ã€‚</p>
<p>2ï¼Œjsonå­—ç¬¦ä¸²ç±»å‹ï¼Œå³å‰ç«¯å®šä¹‰çš„Content typeä¸ºapplication/jsonï¼Œåç«¯åº”ä½¿ç”¨@RequestBodyæ³¨è§£æ¥æ”¶jsonå‚æ•°ã€‚</p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/FlyGoldfish/articles/15649305.html">https://www.cnblogs.com/FlyGoldfish/articles/15649305.html</a></p>
<p>åœ¨Spring MVC ä¸­ä½¿ç”¨ @RequestMapping æ¥æ˜ å°„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å®ƒæ¥æŒ‡å®šæ§åˆ¶å™¨å¯ä»¥å¤„ç†å“ªäº›URLè¯·æ±‚ï¼Œç›¸å½“äºServletä¸­åœ¨web.xmlä¸­é…ç½®</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/web&quot;)</span><br><span class="line">piblic class TestController &#123;</span><br><span class="line">    // æ–¹æ³•ä»…å¤„ç†è¯·æ±‚æ–¹å¼æ˜¯GETå’Œrequest Content-Typeä¸ºâ€œapplication/jsonâ€ç±»å‹çš„è¯·æ±‚</span><br><span class="line">    //æ™®é€šå‚æ•°ç”¨@RequestParam</span><br><span class="line">    @RequestMapping(value = &quot;/test1&quot;, method = &#123;RequestMethod.GET, RequestMethod.POST&#125;, consumes = &quot;application/json&quot;)</span><br><span class="line">    public String test2(@RequestParam(&quot;id&quot;) String id)&#123;</span><br><span class="line">        return &quot;test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //å¯¹è±¡ç±»å‹ç”¨@RequestBody</span><br><span class="line">    @RequestMapping(value = &quot;/test2&quot;, method = &#123;RequestMethod.GET, RequestMethod.POST&#125;, consumes = MediaType.APPLICATION_JSON_VALUE)</span><br><span class="line">    public String test2(@RequestBody VO vo)&#123;</span><br><span class="line">        return &quot;test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸ºjson</span><br><span class="line">    @RequestMapping(value = &quot;/list&quot; , method = RequestMethod.POST,produces=&quot;application/json&quot;)</span><br><span class="line">public JSONObject list(@PathVariable String communityId) &#123;</span><br><span class="line">   JSONObject object = new JSONObject();</span><br><span class="line">   object.put(&quot;communityId&quot;,communityId);</span><br><span class="line">   return object;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">    //@responseBodyå°±æ˜¯è¿”å›å€¼æ˜¯jsonæ•°æ®ï¼Œä½¿ç”¨@responseBodyï¼Œå°±å¯ä»¥çœç•¥produceså±æ€§</span><br><span class="line">    @RequestMapping(value = &quot;/list&quot; , method = RequestMethod.POST)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public JSONObject list(@PathVariable String communityId) &#123;</span><br><span class="line">    JSONObject object = new JSONObject();</span><br><span class="line">    object.put(&quot;communityId&quot;,communityId);</span><br><span class="line">    return object;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    //è¿”å›å€¼æ˜¯jsonæ•°æ®ï¼Œå­—ç¬¦ç¼–ç ä¸ºutf-8</span><br><span class="line">    @RequestMapping(value = &quot;/list&quot; , method = RequestMethod.POST,produces=&quot;application/json;charset=utf-8&quot;)</span><br><span class="line">    public JSONObject list(@PathVariable String communityId) &#123;</span><br><span class="line">    JSONObject object = new JSONObject();</span><br><span class="line">    object.put(&quot;communityId&quot;,communityId);</span><br><span class="line">    return object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šç”¨æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46058921/article/details/122141863">https://blog.csdn.net/weixin_46058921/article/details/122141863</a></p>
<p>âœ…MediaType<br>consumeså‚æ•°ä¸­å¯ä»¥ç”¨çš„ã€‚</p>
<p>MediaTypeåª’ä½“ç±»å‹ï¼šå†³å®šæµè§ˆå™¨å°†ä»¥ä»€ä¹ˆå½¢å¼ã€ä»€ä¹ˆç¼–ç å¯¹èµ„æºè¿›è¡Œè§£æContent-Typeï¼šä¹Ÿå±äºMediaTypeåª’ä½“ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ¨è¯·æ±‚å¤´ä¸­æŒ‡å®šèµ„æºçš„MediaType</p>
<p><a target="_blank" rel="noopener" href="https://javajgs.com/archives/75280">https://javajgs.com/archives/75280</a></p>
<p>âœ…RequestMappingã€GetMappingã€PostMappingçš„åŒºåˆ«</p>
<p>@RequestMappingæ˜¯ä¸€ä¸ªæ— æ–¹æ³•çš„æ³¨è§£ã€‚@GetMappingå’Œ@PostMappingæ˜¯ç»„åˆæ³¨è§£ï¼Œåˆ†åˆ«æ˜¯@RequestMapping(method = RequestMethod.GET)å’Œ@RequestMapping(method = RequestMethod.POST)çš„ç¼©å†™ã€‚<br>GETã€POSTæ˜¯æ–¹æ³•çš„æ˜ å°„ï¼Œè¡¨ç¤ºä¸º<br>@RequestMapping(method = RequestMethod.${æ–¹æ³•})</p>
<p>åœ¨ä¸€å¼€å§‹çš„æ˜ å°„æ˜¯ä½¿ç”¨@RequestMapping(method = RequestMethod.${æ–¹æ³•})æ¥è¡¨ç¤ºã€‚åæ¥Spring4.3ä¸­å¼•è¿›äº†@GetMappingã€@PostMappingã€@PutMappingã€@DeleteMappingã€@PatchMappingæ³¨è§£æ¥å¸®åŠ©ç®€åŒ–å¸¸ç”¨çš„HTTPæ–¹æ³•çš„æ˜ å°„ã€‚</p>
<h3 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h3><p>@RequestParamï¼šå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°ä½ æ§åˆ¶å™¨çš„æ–¹æ³•å‚æ•°ä¸Šï¼ˆæ˜¯springmvcä¸­æ¥æ”¶æ™®é€šå‚æ•°çš„æ³¨è§£ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ï¼šf(@RequestParam(value=â€å‚æ•°åâ€,required=â€true/falseâ€,defaultValue=â€â€) String s</span><br><span class="line">       , å…¶ä»–å…¥å‚ï¼‰</span><br><span class="line"> </span><br><span class="line">valueï¼šå‚æ•°å</span><br><span class="line"> </span><br><span class="line">requiredï¼šæ˜¯å¦åŒ…å«è¯¥å‚æ•°ï¼Œé»˜è®¤ä¸ºtrueï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚è·¯å¾„ä¸­å¿…é¡»åŒ…å«è¯¥å‚æ•°ï¼Œå¦‚æœä¸åŒ…å«å°±æŠ¥é”™ã€‚</span><br><span class="line"> </span><br><span class="line">defaultValueï¼šé»˜è®¤å‚æ•°å€¼ï¼Œå¦‚æœè®¾ç½®äº†è¯¥å€¼ï¼Œrequired=trueå°†å¤±æ•ˆï¼Œè‡ªåŠ¨ä¸ºfalse,å¦‚æœæ²¡æœ‰ä¼ è¯¥å‚æ•°ï¼Œå°±ä½¿ç”¨é»˜è®¤å€¼</span><br></pre></td></tr></table></figure>

<p>âœ…@RequestParamå¦‚ä½•æ¥æ”¶Listå‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(value = &quot;hello&quot;, method = &#123;RequestMethod.POST&#125;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public boolean hello(@RequestParam(value = &quot;userIds&quot;) List&lt;Long&gt; userIds) &#123;</span><br><span class="line">   </span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>postmanä¼ å‚ï¼šç›´æ¥åœ¨Paramsä¸­åŠ ï¼š1,2,3</p>
<p>âš ï¸ï¼š@RequestBodyä¼ çš„voï¼Œå¹¶ä¸”æŒ‡æ˜ä¼ å…¥jsonæ ¼å¼ï¼ˆcontentTypeï¼‰ï¼Œæ”¾åœ¨body-rowä¸­ã€‚<br>ç”¨çš„æ˜¯@RequestParamä¼ å‚ï¼Œæ”¾åœ¨Paramsä¸­ï¼Œæ”¾åœ¨body-rowä¸­ç”¨jsonæ ¼å¼ä¸è¡Œã€‚æ”¾åœ¨Paramsä¸­ï¼Œç›¸å½“äºæ˜¯åŠ åœ¨urlåé¢ã€‚</p>
<p>âœ…@RequestParamå¦‚ä½•æ¥æ”¶Dateå‚æ•°</p>
<p>é¦–å…ˆå¼•å…¥joda-timeåŒ…ã€‚mavençš„dependencyï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;joda-time&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;joda-time&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.4&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨Controllerä»£ç é‡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public String testMethod(@RequestParam @DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;) Date testdate)&#123;</span><br><span class="line">    System.out.println(testDate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>postmanä¼ å‚ï¼šç›´æ¥2022-09-24 00:00:00</p>
<h3 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h3><p>@RequestBodyä¸»è¦ç”¨æ¥æ¥æ”¶å‰ç«¯ä¼ é€’ç»™åç«¯çš„jsonå­—ç¬¦ä¸²ä¸­çš„æ•°æ®çš„(è¯·æ±‚ä½“ä¸­çš„æ•°æ®çš„)ï¼Œå› æ­¤@RequestBodyåªèƒ½ç”¨äºæ¥æ”¶POSTè¯·æ±‚çš„å‚æ•°<br>@RequestParamæ¥æ”¶çš„æ˜¯key-valueé‡Œé¢çš„å‚æ•°(URLä¸­çš„å‚æ•°)ï¼Œé€šå¸¸ç”¨äºæ¥æ”¶GETè¯·æ±‚çš„å‚æ•°ï¼ˆPOSTä¹Ÿèƒ½æ¥æ”¶åªæ¥æ”¶URLé‡Œçš„ï¼Œè¯·æ±‚ä½“çš„æ¥æ”¶ä¸åˆ°ï¼‰</p>
<p>å³ï¼š<br>å¦‚æœå‚æ•°æ˜¯æ”¾åœ¨è¯·æ±‚ä½“VOä¸­ï¼Œä¼ å…¥åå°çš„è¯ï¼Œé‚£ä¹ˆåå°è¦ç”¨@RequestBodyæ‰èƒ½æ¥æ”¶åˆ°ï¼›<br>å¦‚æœä¸æ˜¯æ”¾åœ¨è¯·æ±‚ä½“ä¸­çš„è¯ï¼Œé‚£ä¹ˆåå°æ¥æ”¶å‰å°ä¼ è¿‡æ¥çš„å‚æ•°æ—¶ï¼Œè¦ç”¨@RequestParamæ¥æ¥æ”¶ã€‚</p>
<p>æ€»ç»“ï¼š<br>@RequestParamå’Œ@RequestBodyéƒ½èƒ½æ¥æ”¶Postæ–¹å¼è¯·æ±‚ä¼ æ¥çš„æ•°æ®ï¼Œä½†æ˜¯@RequestParamä¸èƒ½æ¥æ”¶jsonå­—ç¬¦ä¸²ï¼Œè€Œ@RequestBodyèƒ½ï¼Œ@RequestBodyä¸èƒ½æ¥æ”¶form-dataç±»å‹çš„å†…å®¹ï¼Œ@RequestParamèƒ½ã€‚<br>ä¸€ä¸ªè¯·æ±‚ï¼Œåªæœ‰ä¸€ä¸ªRequestBodyï¼›ä¸€ä¸ªè¯·æ±‚ï¼Œå¯ä»¥æœ‰å¤šä¸ªRequestParamã€‚<br>@ReuestBodyæ¥å—å•ä¸ªå‚æ•°çš„æ—¶å€™åªèƒ½å…ˆä½¿ç”¨Map&lt;String,Object&gt; paramsæ¥æ”¶,ç„¶åå†ä½¿ç”¨params.get(â€œnameâ€)è·å–å‚æ•°çš„å€¼ã€‚</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/justry_deng/article/details/80972817">https://blog.csdn.net/justry_deng/article/details/80972817</a></p>
<h3 id="postmanä¸Šå¦‚ä½•è¯·æ±‚"><a href="#postmanä¸Šå¦‚ä½•è¯·æ±‚" class="headerlink" title="postmanä¸Šå¦‚ä½•è¯·æ±‚"></a>postmanä¸Šå¦‚ä½•è¯·æ±‚</h3><p>âœ…postè¯·æ±‚ï¼Œä¼ å‚æ˜¯listçš„è¯ï¼Œç”¨@RequestParamçš„è¯åªèƒ½æ”¾åœ¨urlåé¢ï¼Œé•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ã€‚ç”¨@RequestBodyæ˜¯æ”¾åœ¨bodyé‡Œã€‚</p>
<p>âœ…å…³äº@RequestParamä¼ å‚å’Œ@RequestBodyä¼ å‚ï¼Œåœ¨postmanä¸­å¦‚ä½•åŠ ï¼š<br>1ã€@RequestParamçš„å‚æ•°å¯ä»¥æ”¾åœ¨postmançš„paramä¸­ï¼ˆè·Ÿåœ¨urlåé¢ï¼‰ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨bodyé‡Œçš„form-dataé‡Œï¼ˆæ”¾åœ¨bodyé‡Œçš„ï¼‰ï¼Œä½†æ˜¯ä¸èƒ½æ”¾åœ¨bodyçš„rawé‡Œã€‚èƒ½æ”¾åœ¨å“ªé‡Œéœ€è¦çœ‹consumeå‚æ•°çš„MedisTypeï¼Œæƒ³æ”¾åœ¨form-dataé‡Œéœ€è¦è®¾ç½®MedisTypeä¸ºmultipart/form-dataï¼Œæˆ–è€…ä¸è¦é™å®šä¸ºjsonã€‚<br>2ã€@RequestBodyçš„å‚æ•°æ”¾åœ¨bodyé‡Œçš„rawé‡Œæ ¼å¼ä¸ºjsonã€‚ä¸€èˆ¬ä¼ å¯¹è±¡voã€‚</p>
<p>âœ…RequestBodyä¼ mapå‹å‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@ResponseBody</span><br><span class="line">@PostMapping(&quot;/test&quot;)</span><br><span class="line">public String testMethod(@RequestBody Map&lt;String,String&gt; map)&#123;</span><br><span class="line">    System.out.println(testDate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>postmanå¦‚ä½•è¯·æ±‚ï¼š<br>1.è®¾ç½®è¯·æ±‚æ–¹å¼ä¸ºPost<br>2.åœ¨Headersä¸­æ·»åŠ Content-Typeï¼Œå€¼ä¸ºapplication/json<br>3.åœ¨bodyä¸­é€‰æ‹©rowï¼Œé€‰æ‹©jsonæ•°æ®æ ¼å¼ï¼Œæœ€ååœ¨ä¸‹é¢ä»¥jsonçš„æ•°æ®æ ¼å¼å¡«å†™å‚æ•°</p>
<p>âœ…@RequestParamä¼ å‚ä»€ä¹ˆæ—¶å€™æ”¾åœ¨form-dataé‡Œï¼Œä»€ä¹ˆæ—¶å€™æ”¾åœ¨paramsé‡Œ</p>
<p>é•¿çš„è¯æ”¾åœ¨form-dataé‡Œï¼Œä¸æ˜¯è·Ÿåœ¨urlåçš„ã€‚å¦‚æœæ”¾åœ¨paramsé‡Œå°±æ˜¯è·Ÿåœ¨urlåé¢çš„ã€‚</p>
<h3 id="ResponseBody"><a href="#ResponseBody" class="headerlink" title="@ResponseBody"></a>@ResponseBody</h3><p>@ResponseBody æ³¨è§£çš„ä½œç”¨æ˜¯å°†Controllerçš„æ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œé€šè¿‡é€‚å½“çš„è½¬æ¢å™¨è½¬æ¢ä¸ºæŒ‡å®šçš„æ ¼å¼ä¹‹åï¼Œå†™å…¥åˆ°responseå¯¹è±¡çš„bodyåŒºï¼Œé€šå¸¸ç”¨æ¥è¿”å›JSONæ•°æ®æˆ–è€…æ˜¯XMLæ•°æ®ã€‚</p>
<p>@ResponseBodyçš„ä½œç”¨å…¶å®æ˜¯å°†javaå¯¹è±¡è½¬ä¸ºjsonæ ¼å¼çš„æ•°æ®ï¼Œç„¶åç›´æ¥å†™å…¥HTTP response çš„bodyä¸­ï¼›ä¸€èˆ¬åœ¨å¼‚æ­¥è·å–æ•°æ®æ—¶ä½¿ç”¨</p>
<p>@ResponseBody æ˜¯ä½œç”¨åœ¨æ–¹æ³•ä¸Šçš„</p>
<p>æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_47609799/article/details/124843709">https://blog.csdn.net/weixin_47609799/article/details/124843709</a></p>
<h3 id="Builder"><a href="#Builder" class="headerlink" title="@Builder"></a>@Builder</h3><p>lombokä¸­çš„æ³¨è§£ã€‚<br>Builder ä½¿ç”¨åˆ›å»ºè€…æ¨¡å¼åˆå«å»ºé€ è€…æ¨¡å¼ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€æ­¥æ­¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯¹ç”¨æˆ·å±è”½äº†é‡Œé¢æ„å»ºçš„ç»†èŠ‚ï¼Œä½†å´å¯ä»¥ç²¾ç»†åœ°æ§åˆ¶å¯¹è±¡çš„æ„é€ è¿‡ç¨‹ã€‚</p>
<p>@Builderæ³¨è§£çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥ç”Ÿæˆå¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºå¯¹è±¡é“¾å¼èµ‹å€¼ã€‚æ”¾åœ¨å®ä½“ç±»ä¸Šã€‚<br>â€‹@Builderâ€‹â€‹æ³¨é‡Šä¸ºä½ çš„ç±»ç”Ÿæˆç›¸å¯¹ç•¥å¾®å¤æ‚çš„æ„å»ºå™¨APIã€‚</p>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student student = Student.builder()</span><br><span class="line">        .name( &quot;admin&quot; )</span><br><span class="line">        .age( 18 )</span><br><span class="line">        .build();</span><br></pre></td></tr></table></figure>

<p>ä¸@Singularç»“åˆä½¿ç”¨<br>ä½¿ç”¨@Singularæ³¨é‡Šæ³¨é‡Šä¸€ä¸ªé›†åˆå­—æ®µ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Singular</span><br><span class="line">private List&lt;String&gt; hobbies;</span><br><span class="line"></span><br><span class="line">.hobbies( &quot;110&quot; ).hobbies( &quot;112&quot; )</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/g56467467464/article/details/105407741">https://blog.csdn.net/g56467467464/article/details/105407741</a></p>
<h3 id="TableName"><a href="#TableName" class="headerlink" title="@TableName"></a>@TableName</h3><p>baomidou.mybatisplusçš„æ³¨è§£<br>@TableNameæ˜¯mybatis-plusä¸­çš„æ³¨è§£ï¼Œä¸»è¦æ˜¯å®ç°å®ä½“ç±»å‹å’Œæ•°æ®åº“ä¸­çš„è¡¨å®ç°æ˜ å°„ã€‚<br>æ”¾åœ¨å®ä½“ç±»DOä¸Šã€‚</p>
<p>è™½ç„¶åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ï¼Œ@TableNameæ˜¯mybatis-plusä¸­çš„æ³¨è§£ï¼Œ@Tableæ˜¯Hibernateä¸­çš„æ³¨è§£ã€‚</p>
<h3 id="Param"><a href="#Param" class="headerlink" title="@Param"></a>@Param</h3><p>1 ã€@Paramæ³¨è§£çš„ä½œç”¨æ˜¯ç»™å‚æ•°å‘½å,å‚æ•°å‘½ååå°±èƒ½æ ¹æ®åå­—å¾—åˆ°å‚æ•°å€¼,æ­£ç¡®çš„å°†å‚æ•°ä¼ å…¥sqlè¯­å¥ä¸­ï¼ˆä¸€èˆ¬é€šè¿‡#{}çš„æ–¹å¼ï¼Œ${}ä¼šæœ‰sqlæ³¨å…¥çš„é—®é¢˜ï¼‰ã€‚<br>2ã€ä¸€èˆ¬å†™åœ¨mappeæ¥å£ï¼ˆDAOæ¥å£ï¼‰çš„å…¥å‚ï¼Œå¯¹åº”xmlä¸­#{}ä¸­çš„å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨æ–¹æ³•ï¼š</span><br><span class="line">Mapperæ¥å£æ–¹æ³•ï¼š</span><br><span class="line">public int findById(@Param(&quot;userId&quot;) int userId);</span><br><span class="line">å¯¹åº”çš„xmlæ–‡ä»¶ï¼š</span><br><span class="line"> &lt;select id=&quot;findById&quot; resultMap=&quot;baseMap&quot;&gt;</span><br><span class="line">    select &lt;include redif=&quot;all_column_list&quot;&gt; from table_name</span><br><span class="line">    where user_id = #&#123;userId&#125;</span><br><span class="line"> &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸ä½¿ç”¨@Paramæ³¨è§£æ—¶ï¼Œå‚æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¹¶ä¸”æ˜¯Javabeanã€‚</p>
<p>ä½¿ç”¨äº†@Paramåï¼Œå¯ä»¥ä¸ç”¨parameterTypeï¼Ÿ å­˜ç–‘</p>
<h3 id="Mapper"><a href="#Mapper" class="headerlink" title="@Mapper"></a>@Mapper</h3><p>åœ¨ä½¿ç”¨MybatisæŒä¹…å±‚æ¡†æ¶æ¥æ“ä½œæ•°æ®åº“æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Mapperæ³¨è§£å’Œ@MapperScanæ³¨è§£æ¥å°†Mapperæ¥å£ç±»äº¤ç»™Sprinigè¿›è¡Œç®¡ç†ã€‚</p>
<p>ç›®çš„å°±æ˜¯ä¸ºäº†ä¸å†å†™mapperæ˜ å°„æ–‡ä»¶ï¼ˆxmlæ–‡ä»¶ï¼‰ã€‚</p>
<p>Spring Bootçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼šä¸å»ºè®®ä½¿ç”¨xmlæ–‡ä»¶é…ç½®ã€‚ä½†æ˜¯ï¼Œè¿™å¯¹MyBatisæ¥è¯´è¿›é€€ä¸¤éš¾ï¼Œå› ä¸ºMyBatisç¦»ä¸å¼€xmlï¼Œéœ€è¦xmlæ¥é…ç½®sqlè¯­å¥ã€‚ä¸ºäº†è¿åˆSpring Bootçš„å‘å±•ç†å¿µï¼ŒMyBatiså®˜æ–¹å¼€å‘äº†mybatis-spring-boot-starterï¼Œæˆ‘ä»¬è¦æƒ³æ›´å°‘çš„ä¾èµ–xmlï¼Œéœ€è¦æ·±å…¥çš„ç ”ç©¶mybatis-spring-boot-starterä¸­çš„ç”¨æ³•ï¼Œå°¤å…¶æ˜¯@MapperScanå’Œ@Mapperçš„ç”¨æ³•ã€‚</p>
<p>ä¸€ã€æ³¨è§£@Mapperï¼Œè¿™ç§æ–¹å¼è¦æ±‚æ¯ä¸€ä¸ªMapperç±»éƒ½éœ€è¦æ·»åŠ æ­¤æ³¨è§£<br>åœ¨æ¥å£ç±»ä¸Šæ·»åŠ äº†@Mapperï¼Œåœ¨ç¼–è¯‘ä¹‹åä¼šç”Ÿæˆç›¸åº”çš„æ¥å£å®ç°ç±»</p>
<p>äºŒã€@MapperScanæ³¨è§£ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸ç”¨ä¸ºæ¯ä¸ªMapperç±»éƒ½æ·»åŠ @Mapperæ³¨è§£ã€‚æŒ‡å®šè¦å˜æˆå®ç°ç±»çš„æ¥å£æ‰€åœ¨çš„åŒ…<br>æ·»åŠ ä½ç½®ï¼šæ˜¯åœ¨Springbootå¯åŠ¨ç±»ä¸Šé¢æ·»åŠ ï¼Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication  </span><br><span class="line">@MapperScan(&#123;&quot;cn.mybatis.mappers.class&quot;,&quot;cn.mybatis.mappers.student&quot;&#125;)  </span><br><span class="line">public class SpringbootMybatisDemoApplication&#123;  </span><br><span class="line">    public static void main(String[] args) &#123;  </span><br><span class="line">       SpringApplication.run(SpringbootMybatisDemoApplication.class, args);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆå®ç°ï¼šç›´æ¥åœ¨Mapperç±»ä¸­é‡‡ç”¨æ³¨è§£çš„å½¢å¼æ“ä½œæ•°æ®åº“ï¼Œé€šè¿‡@MapperScanæ‰«æåˆ¶å®šçš„æ˜ å°„å™¨å­˜æ”¾è·¯å¾„ï¼Œæœ€ç»ˆä¸éœ€è¦åŠ ä»»ä½•æ³¨è§£ï¼Œä¹Ÿä¸éœ€è¦å¯¹åº”çš„xmlæ–‡ä»¶æ¥é…ç½®sqlè¯­å¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//ä¸éœ€è¦åŠ ä»»ä½•æ³¨è§£ï¼Œä¹Ÿä¸éœ€è¦å¯¹åº”çš„xmlæ–‡ä»¶</span><br><span class="line">public interface UserMapper&#123;</span><br><span class="line">     @Select(&quot;select * from user&quot;)</span><br><span class="line">     List&lt;User&gt; getUserList(String userId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://www.mybatis.cn/archives/862.html">http://www.mybatis.cn/archives/862.html</a></p>
<h3 id="PostConstruct"><a href="#PostConstruct" class="headerlink" title="@PostConstruct"></a>@PostConstruct</h3><p>@PostContructæ˜¯Javaè‡ªå¸¦çš„æ³¨è§£ï¼Œåœ¨æ–¹æ³•ä¸ŠåŠ è¯¥æ³¨è§£ä¼šåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨springå®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œè¯¥æ–¹æ³•ã€‚å¯ä½œä¸ºä¸€äº›æ•°æ®çš„å¸¸è§„åŒ–åŠ è½½ï¼Œæ¯”å¦‚æ•°æ®å­—å…¸ä¹‹ç±»çš„ã€‚</p>
<p>ä»Java EE5è§„èŒƒå¼€å§‹ï¼ŒServletä¸­å¢åŠ äº†ä¸¤ä¸ªå½±å“Servletç”Ÿå‘½å‘¨æœŸçš„æ³¨è§£ï¼Œ@PostConstructå’Œ@PreDestroyï¼Œè¿™ä¸¤ä¸ªæ³¨è§£è¢«ç”¨æ¥ä¿®é¥°ä¸€ä¸ªéé™æ€çš„voidï¼ˆï¼‰æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@PostConstruct</span><br><span class="line">public void someMethod()&#123;&#125;</span><br><span class="line"></span><br><span class="line">public @PostConstruct void someMethod()&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œæ—¶æœºï¼šåœ¨ä¾èµ–æ³¨å…¥å®Œæˆåè¢«è‡ªåŠ¨è°ƒç”¨ã€‚åœ¨æœåŠ¡å™¨åŠ è½½Servletçš„æ—¶å€™è¿è¡Œï¼Œå¹¶ä¸”åªä¼šè¢«æœåŠ¡å™¨æ‰§è¡Œä¸€æ¬¡ã€‚PostConstructåœ¨æ„é€ å‡½æ•°ä¹‹åæ‰§è¡Œï¼Œinitï¼ˆï¼‰æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚<br>Constructor &gt;&gt; @Autowired &gt;&gt; @PostConstruct &gt;&gt; init &gt;&gt; service &gt;&gt; destroy &gt;&gt; PreDestroy</p>
<p>è¯¥æ³¨è§£ä¸BeanPostProcessoræ¥å£æœ‰å…³ï¼Œå®ƒæœ‰ä¸ªå®ç°ç±»CommonAnnotationBeanPostProcessorï¼Œå°±æ˜¯ä¸“é—¨å¤„ç†@PostConstruct  @PreDestroyæ³¨è§£ã€‚</p>
<hr>
<p>InitialzingBeanæ¥å£çš„afterPropertiesSetå’Œé…ç½®beanæ—¶çš„init-methodï¼Œä¹Ÿæœ‰ç±»ä¼¼åŠŸèƒ½ã€‚</p>
<p>initMethodå’ŒInitializingBeanæ˜¯springæä¾›çš„ä¸¤ç§å¯¹ç±»çš„å±æ€§è¿›è¡Œè£…é…çš„æ–¹å¼ã€‚initMethodå’ŒInitializingBeanæŒ‡å®šæ–¹æ³•çš„æ‰§è¡Œé¡ºåºåœ¨æ™®é€šå±æ€§è£…é…ä¹‹åï¼ŒinitMethodæŒ‡å®šçš„æ–¹æ³•åˆåœ¨InitializingBeanæŒ‡å®šçš„æ–¹æ³•ä¹‹åæ‰§è¡Œã€‚</p>
<p>ä¸‰è€…æ‰§è¡Œé¡ºåºï¼šConstruction &gt; å¯¹è±¡å±æ€§set() æ–¹æ³•-&gt; @PostConstruct -&gt; InitializingBean -&gt; initMethod</p>
<p>æ€»ç»“ï¼šå¯ä¸å¯ä»¥ç†è§£ä¸º@PostConstructåœ¨åˆå§‹åŒ–è‡ªå·±beanæ—¶ï¼Œä¾èµ–æ³¨å…¥å…¶ä»–å±æ€§beanåæ‰§è¡Œï¼Œè€ŒInitialzingBeanæ¥å£åˆæ˜¯åœ¨å®ƒåé¢ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/chinawangfei/article/details/122825129">https://blog.csdn.net/chinawangfei/article/details/122825129</a></p>
<h3 id="Deprecated"><a href="#Deprecated" class="headerlink" title="@Deprecated"></a>@Deprecated</h3><p>@Deprecatedæ˜¯javaå†…ç½®æ³¨è§£ï¼Œæ­¤æ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ï¼Œå±æ€§ï¼Œç±»ä¸Šï¼Œè¡¨ç¤ºå·²åºŸå¼ƒï¼Œä¸ç»´æŠ¤ï¼Œå¯èƒ½ä¼šåˆ é™¤ã€‚<br>è¡¨ç¤ºä¸æ¨èç¨‹åºå‘˜ä½¿ç”¨ï¼Œä½†æ˜¯è¿˜å¯ä»¥ä½¿ç”¨ã€‚</p>
<h3 id="Valid"><a href="#Valid" class="headerlink" title="@Valid"></a>@Valid</h3><p>ç”¨äºå¯¹è±¡å±æ€§å­—æ®µçš„è§„åˆ™æ£€æµ‹ï¼Œä¸ºäº†é¿å…ä½¿ç”¨å†—ä½™çš„ä»£ç è¿›è¡Œifåˆ¤æ–­ï¼Œä½¿ç”¨@Validæ³¨è§£å®ç°ã€‚</p>
<p>æ˜¯Springä¸­çš„æ³¨è§£ï¼Œéœ€è¦å¼•å…¥ä¾èµ–ï¼Œå¦‚æœæ˜¯ springboot é¡¹ç›®ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ç”¨å¼•å…¥äº†ï¼Œå·²ç»å¼•å…¥äº†ï¼Œå°±å­˜åœ¨äºæœ€æ ¸å¿ƒçš„ web å¼€å‘åŒ… spring-boot-starter-web é‡Œé¢ã€‚</p>
<p>å¦‚æœä¸æ˜¯ï¼Œéœ€è¦å¼•å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.validation&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.1.0.Final&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"> </span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.4.1.Final&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹æ³•ï¼šåœ¨è¢«æ£€éªŒçš„å®ä½“ç±»ä¸­ï¼Œä½¿ç”¨æ³¨è§£åŠ ä¸€äº›é™åˆ¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@NotBlank(message = &quot;è¯·è¾“å…¥åç§°&quot;)</span><br><span class="line">@Length(message = &quot;åç§°ä¸èƒ½è¶…è¿‡ä¸ª &#123;max&#125; å­—ç¬¦&quot;, max = 10)</span><br><span class="line">public String name;</span><br><span class="line"> </span><br><span class="line">@NotNull(message = &quot;è¯·è¾“å…¥å¹´é¾„&quot;)</span><br><span class="line">@Range(message = &quot;å¹´é¾„èŒƒå›´ä¸º &#123;min&#125; åˆ° &#123;max&#125; ä¹‹é—´&quot;, min = 1, max = 100)</span><br><span class="line">public Integer age;</span><br><span class="line"></span><br><span class="line">@Email(message = &quot;é‚®ç®±ä¸æ­£ç¡®&quot;)</span><br><span class="line">@Min(value = 1000000)</span><br><span class="line"></span><br><span class="line">@NotEmpty(message=&quot;ä¸èƒ½ä¸ºç©º&quot;)</span><br><span class="line">@Size(message=&quot;æœ€å¤š5ä¸ª&quot;, max=5)</span><br><span class="line">private List&lt;Intefer&gt; list;</span><br></pre></td></tr></table></figure>

<p>åœ¨Controllerçš„å¯¹åº”æ–¹æ³•ä¸­ï¼Œå¯¹ä¼ å…¥å‚æ•°åŠ @Validæ³¨è§£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;/action/register&quot;)</span><br><span class="line">public Result registerByForm(@Valid @RequestBody RegisterUser registerUser)&#123;</span><br><span class="line">    return userService.register(registerUser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43587472/article/details/110388778">https://blog.csdn.net/weixin_43587472/article/details/110388778</a></p>
<h3 id="Transactionalæ³¨è§£"><a href="#Transactionalæ³¨è§£" class="headerlink" title="@Transactionalæ³¨è§£"></a>@Transactionalæ³¨è§£</h3><p>springframeworkä¸­çš„æ³¨è§£ã€‚<br>å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œæ˜¯å»ºç«‹åœ¨AOPä¹‹ä¸Šï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œç„¶åå†ç›®æ ‡æ–¹æ³•å¼€å§‹ä¹‹å‰åˆ›å»ºæˆ–åŠ å…¥ä¸€ä¸ªä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•ä¹‹åï¼Œæ ¹æ®æ‰§è¡Œæƒ…å†µæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼š@Transactionalæ³¨è§£åœ¨ä»£ç æ‰§è¡Œå‡ºé”™æ—¶è¿›è¡Œäº‹åŠ¡çš„å›æ»šã€‚</p>
<p>javaå¼‚å¸¸æ¨¡å‹ï¼š<br>Throwableæ˜¯æœ€é¡¶å±‚çš„çˆ¶ç±»ï¼Œæœ‰Errorå’ŒExceptionä¸¤ä¸ªå­ç±»ã€‚<br>Errorè¡¨ç¤ºä¸¥é‡çš„é”™è¯¯ï¼ˆå¦‚OOMç­‰ï¼‰ï¼›<br>Exceptionå¯ä»¥åˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntimeExceptionåŠå…¶å­ç±»ï¼‰å’Œéè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆExceptionçš„å­ç±»ä¸­ï¼Œé™¤äº†RuntimeExceptionåŠå…¶å­ç±»ä¹‹å¤–çš„ç±»ï¼‰ã€‚</p>
<p>éè¿è¡Œæ—¶å¼‚å¸¸æ˜¯æ£€æŸ¥å¼‚å¸¸ï¼ˆchecked exceptionsï¼‰ï¼Œä¸€å®šè¦try catchï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸æ˜¯å¯é¢„æ–™çš„ï¼Œç¼–è¯‘é˜¶æ®µå°±æ£€æŸ¥çš„å‡ºæ¥ï¼›<br>Errorå’Œè¿è¡Œæ—¶å¼‚å¸¸æ˜¯éæ£€æŸ¥å¼‚å¸¸ï¼ˆunchecked exceptionsï¼‰ï¼Œä¸éœ€è¦try catchï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸æ˜¯ä¸å¯é¢„æ–™çš„ï¼Œç¼–è¾‘é˜¶æ®µä¸ä¼šæ£€æŸ¥ï¼Œæ²¡å¿…è¦æ£€æŸ¥ï¼Œä¹Ÿæ£€æŸ¥ä¸å‡ºæ¥ã€‚</p>
<p>springçš„@Transactionalæ³¨è§£å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¼€å¯äº‹åŠ¡ï¼Œä½†æ˜¯é»˜è®¤åªåœ¨é‡åˆ°è¿è¡Œæ—¶å¼‚å¸¸å’ŒErroræ—¶æ‰ä¼šå›æ»šï¼Œéè¿è¡Œæ—¶å¼‚å¸¸ä¸å›æ»šï¼Œå³Exceptionçš„å­ç±»ä¸­ï¼Œé™¤äº†RuntimeExceptionåŠå…¶å­ç±»ï¼Œå…¶ä»–çš„ç±»é»˜è®¤ä¸å›æ»šã€‚</p>
<p>è€ŒrollbackForå±æ€§å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒrollbackFor = Exception.classè¡¨ç¤ºExceptionåŠå…¶å­ç±»çš„å¼‚å¸¸éƒ½ä¼šè§¦å‘å›æ»šï¼ŒåŒæ—¶ä¸å½±å“Errorçš„å›æ»šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// è¿è¡Œæ—¶å¼‚å¸¸ï¼Œæ­£å¸¸å›æ»š</span><br><span class="line">@Transactional</span><br><span class="line">public void save()&#123;</span><br><span class="line">    StudentDO studentDO = new StudentDO();</span><br><span class="line">    studentDO.setName(&quot;ltm&quot;);</span><br><span class="line">    studentDO.setAge(22);</span><br><span class="line">    studentMapper.insert(studentDO);</span><br><span class="line">    throw new RuntimeException(&quot;æˆ‘æ˜¯å¼‚å¸¸&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// éè¿è¡Œæ—¶å¼‚å¸¸ï¼ŒåŠ rollbackForå±æ€§ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶å›æ»š</span><br><span class="line">@Transactional(rollbackFor = Exception.class)</span><br><span class="line">public void save() throws IOException&#123;</span><br><span class="line">    StudentDO studentDO = new StudentDO();</span><br><span class="line">    studentDO.setName(&quot;ltm&quot;);</span><br><span class="line">    studentDO.setAge(22);</span><br><span class="line">    studentMapper.insert(studentDO);</span><br><span class="line">    throw new IOException();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c5988db897fc">https://www.jianshu.com/p/c5988db897fc</a></p>
<p>ä½¿ç”¨æ–¹æ³•ï¼š<br>1.éœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableTransactionManagementæ³¨è§£ã€‚<br>2.å½“ä½œç”¨åœ¨ç±»ä¸Šï¼Œè¯¥ç±»æ‰€ä»¥publicæ–¹æ³•éƒ½å…·æœ‰è¯¥ç±»å‹çš„äº‹åŠ¡å±æ€§ã€‚ä¹Ÿå¯ä»¥åŠ åœ¨publicæ–¹æ³•ä¸Šã€‚</p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_9177933/2978291">https://blog.51cto.com/u_9177933/2978291</a></p>
<h3 id="SneakyThrows"><a href="#SneakyThrows" class="headerlink" title="@SneakyThrows"></a>@SneakyThrows</h3><p>âœ…javaçš„å¼‚å¸¸ä½“ç³»</p>
<p><img src="/images/java%E5%BC%82%E5%B8%B8.png"></p>
<p>Erroræ˜¯ç¼–è¯‘æ—¶é”™è¯¯å’Œç³»ç»Ÿé”™è¯¯ï¼Œç³»ç»Ÿé”™è¯¯åœ¨é™¤ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œéƒ½ä¸éœ€è¦ä½ æ¥å…³å¿ƒï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°ã€‚è€Œç¼–è¯‘æ—¶é”™è¯¯ï¼Œå¦‚æœä½ ä½¿ç”¨äº†ç¼–è¯‘å™¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæç¤ºã€‚</p>
<p>Exceptionåˆ™æ˜¯å¯ä»¥è¢«æŠ›å‡ºçš„åŸºæœ¬ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸»è¦å…³å¿ƒçš„ä¹Ÿæ˜¯è¿™ä¸ªç±»ã€‚<br>Exceptionåˆåˆ†ä¸ºRunTimeExceptionå’Œå…¶ä»–Exceptionã€‚</p>
<p>RunTimeExceptionï¼šè¿è¡Œæ—¶å¼‚å¸¸ï¼Œåˆç§°ä¸å—æ£€æŸ¥å¼‚å¸¸ï¼Œä¸å—æ£€æŸ¥ï¼Œå› ä¸ºä¸å—æ£€æŸ¥ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­å¯èƒ½ä¼šæœ‰RunTimeExceptionæ—¶Javaç¼–è¯‘æ£€æŸ¥æ—¶ä¸ä¼šå‘Šè¯‰ä½ æœ‰è¿™ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯åœ¨å®é™…è¿è¡Œä»£ç æ—¶åˆ™ä¼šæš´éœ²å‡ºæ¥ï¼Œæ¯”å¦‚ç»å…¸çš„1/0ï¼Œç©ºæŒ‡é’ˆç­‰ã€‚å¦‚æœä¸å¤„ç†ä¹Ÿä¼šè¢«Javaè‡ªå·±å¤„ç†ã€‚</p>
<p>å…¶ä»–Exceptionï¼Œå—æ£€æŸ¥å¼‚å¸¸ã€‚å¯ä»¥ç†è§£ä¸ºé”™è¯¯ï¼Œå¿…é¡»è¦å¼€å‘è€…è§£å†³ä»¥åæ‰èƒ½ç¼–è¯‘é€šè¿‡ï¼Œè§£å†³çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œ<br>1ï¼šthrowåˆ°ä¸Šå±‚ï¼Œ<br>2ï¼Œtry-catchå¤„ç†ã€‚</p>
<p>âœ…@SneakyThrowsçš„ä½œç”¨ï¼š<br>æ™®é€šExceptionç±»,ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å—æ£€å¼‚å¸¸æˆ–è€…Checked Exceptionä¼šå¼ºåˆ¶è¦æ±‚æŠ›å‡ºå®ƒçš„æ–¹æ³•å£°æ˜throwsï¼Œè°ƒç”¨è€…å¿…é¡»æ˜¾ç¤ºçš„å»å¤„ç†è¿™ä¸ªå¼‚å¸¸ã€‚è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†æé†’å¼€å‘è€…å¤„ç†ä¸€äº›åœºæ™¯ä¸­å¿…ç„¶å¯èƒ½å­˜åœ¨çš„å¼‚å¸¸æƒ…å†µã€‚æ¯”å¦‚ç½‘ç»œå¼‚å¸¸é€ æˆIOExceptionã€‚</p>
<p>ä½†æ˜¯ç°å®å¤§éƒ¨åˆ†æƒ…å†µä¸‹çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä¸€è·¯å¾€å¤–æŠ›äº†äº‹ã€‚æ‰€ä»¥æ¸æ¸çš„javaç¨‹åºå‘˜å¤„ç†Exceptionçš„å¸¸è§æ‰‹æ®µå°±æ˜¯å¤–é¢åŒ…ä¸€å±‚RuntimeExceptionï¼Œæ¥ç€å¾€ä¸Šä¸¢.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">&#125;catch(Exception e)&#123;</span><br><span class="line">throw new RuntimeException(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€ŒLombokçš„@SneakyThrowså°±æ˜¯ä¸ºäº†æ¶ˆé™¤è¿™æ ·çš„æ¨¡æ¿ä»£ç ã€‚<br>ä½¿ç”¨æ³¨è§£åä¸éœ€è¦æ‹…å¿ƒExceptionçš„å¤„ç†.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> import lombok.SneakyThrows;</span><br><span class="line"></span><br><span class="line">public class SneakyThrowsExample implements Runnable &#123;</span><br><span class="line">  @SneakyThrows(UnsupportedEncodingException.class)</span><br><span class="line">  public String utf8ToString(byte[] bytes) &#123;</span><br><span class="line">    return new String(bytes, &quot;UTF-8&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @SneakyThrows</span><br><span class="line">  public void run() &#123;</span><br><span class="line">    throw new Throwable();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸç†ï¼šæœ€é‡è¦çš„æ˜¯throw (T)t, ä½¿ç”¨æ³›å‹,å°†ä¼ å…¥çš„Throwableå¼ºè½¬ä¸ºRuntimeExceptionå¼‚å¸¸.<br>è™½ç„¶, æˆ‘ä»¬æŠ›å‡ºçš„å¼‚å¸¸ä¸æ˜¯RuntimeException,ä½†æ˜¯å¯ä»¥éª—è¿‡javacç¼–è¯‘å™¨,æ³›å‹æœ€åå­˜å‚¨ä¸ºå­—èŠ‚ç æ–‡ä»¶æ—¶å¹¶æ²¡æœ‰æ³›å‹ä¿¡æ¯.</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22162093/article/details/115486647">https://blog.csdn.net/qq_22162093/article/details/115486647</a></p>
<h3 id="Data"><a href="#Data" class="headerlink" title="@Data"></a>@Data</h3><p>@Dataæ³¨è§£æ˜¯lombok.jaråŒ…ä¸‹çš„æ³¨è§£ï¼Œè¯¥æ³¨è§£é€šå¸¸ç”¨åœ¨å®ä½“beanä¸Šï¼Œä¸éœ€è¦å†™å‡ºsetå’Œgetæ–¹æ³•ï¼Œä½†æ˜¯å…·å¤‡å®ä½“beanæ‰€å…·å¤‡çš„æ–¹æ³•ï¼Œç®€åŒ–ç¼–ç¨‹æé«˜å˜æˆé€Ÿåº¦ã€‚</p>
<p>@Dataç›¸å½“äº@Getter @Setter @RequiredArgsConstructor @ToString @EqualsAndHashCodeè¿™5ä¸ªæ³¨è§£çš„åˆé›†ã€‚</p>
<p>@Data ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„getã€setã€equalsã€hashCodeã€toStringç­‰æ–¹æ³•<br>@AllArgsConstructor ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„å…¨å‚æ„é€ <br>@NoArgsConstructor ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„æ— å‚æ„é€ <br>@Setter ï¼šæ³¨åœ¨å±æ€§ä¸Šï¼Œæä¾› set æ–¹æ³•<br>@Getter ï¼šæ³¨åœ¨å±æ€§ä¸Šï¼Œæä¾› get æ–¹æ³•<br>@EqualsAndHashCode ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›å¯¹åº”çš„ equals å’Œ hashCode æ–¹æ³•<br>@Log4j/@Slf4j ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›å¯¹åº”çš„ Logger å¯¹è±¡ï¼Œå˜é‡åä¸º log</p>
<h3 id="RequiredArgsConstructor"><a href="#RequiredArgsConstructor" class="headerlink" title="@RequiredArgsConstructor"></a>@RequiredArgsConstructor</h3><p>lombokä¸­çš„æ³¨è§£ã€‚å¯ç”¨äºç”Ÿæˆæœ‰å‚æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åœ¨å†™controlleræˆ–è€…Serviceå±‚çš„æ—¶å€™ï¼Œéœ€è¦æ³¨å…¥å¾ˆå¤šçš„mapperæ¥å£æˆ–è€…å¦å¤–çš„serviceæ¥å£çš„æ—¶å€™å°±é¿å…ä¼šå†™å¾ˆå¤šçš„@Autowiredæ³¨è§£ã€‚</p>
<p>å®ä½“ç±»æœ‰å‚æ„é€ å‡½æ•°ï¼š<br>å¿…é¡»å£°æ˜çš„å˜é‡ä¸ºfinal</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Getter</span><br><span class="line">@Setter</span><br><span class="line">@ToString</span><br><span class="line">@RequiredArgsConstructor</span><br><span class="line">static class Person &#123;</span><br><span class="line">    private final String name;</span><br><span class="line">    private final Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@RequiredArgsConstructor(onConstructor =@_(@Autowired))<br>å†™åœ¨ç±»ä¸Šå¯ä»¥ä»£æ›¿@Autowiredæ³¨è§£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨æ³¨å…¥æ—¶éœ€è¦ç”¨finalå®šä¹‰ï¼Œæˆ–è€…ä½¿ç”¨@notnullæ³¨è§£.<br>å½“æˆ‘ä»¬éœ€è¦æ³¨å…¥Beançš„æ—¶å€™å¯ä»¥ç›´æ¥åœ¨ç±»åç§°ä¸Šä½¿ç”¨ã€‚ä»£æ›¿äº†Autowritedæ³¨è§£.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/v1/demo&quot;)</span><br><span class="line">@RequiredArgsConstructor(onConstructor = @__(@Autowired))</span><br><span class="line">public class DemoController &#123;</span><br><span class="line">    private final DemoService demoService;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="SuppressWarnings"><a href="#SuppressWarnings" class="headerlink" title="@SuppressWarnings"></a>@SuppressWarnings</h3><p>ä½œç”¨ï¼šæŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Šï¼Œæœ‰æ—¶å€™å¯ä»¥çœ‹åˆ°ideaä¸­æœ‰è­¦å‘Šçš„é¢œè‰²æ ‡æ³¨ï¼Œå½“æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°è¿™äº›è­¦å‘Šçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ SuppressWarningsæ³¨è§£æ¥æŠ‘åˆ¶è­¦å‘Šä¿¡æ¯ã€‚<br>åœ¨<code>&#123;&quot; &quot;&#125; </code>ä¸­ï¼Œå¯ä»¥å†™å…¥ä½ å¸Œæœ›æŠ‘åˆ¶(ä¸æ˜¾ç¤º)è­¦å‘Šä¿¡æ¯ã€‚</p>
<p>ä¾‹å¦‚ï¼š<br><code>@SuppressWarnings&#123;&quot;rawtypes&quot;, &quot;unchecked&quot;, &quot;unused&quot;&#125;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">allï¼ŒæŠ‘åˆ¶æ‰€æœ‰è­¦å‘Š</span><br><span class="line">boxingï¼ŒæŠ‘åˆ¶ä¸å°è£…/æ‹†è£…ä½œä¸šç›¸å…³çš„è­¦å‘Š</span><br><span class="line">castï¼ŒæŠ‘åˆ¶ä¸å¼ºåˆ¶è½¬å‹ä½œä¸šç›¸å…³çš„è­¦å‘Š</span><br><span class="line">dep-annï¼ŒæŠ‘åˆ¶ä¸æ·˜æ±°æ³¨é‡Šç›¸å…³çš„è­¦å‘Š</span><br><span class="line">deprecationï¼ŒæŠ‘åˆ¶ä¸æ·˜æ±°çš„ç›¸å…³è­¦å‘Š</span><br><span class="line">fallthroughï¼ŒæŠ‘åˆ¶ä¸switché™ˆè¿°å¼ä¸­é—æ¼breakç›¸å…³çš„è­¦å‘Š</span><br><span class="line">finallyï¼ŒæŠ‘åˆ¶ä¸æœªä¼ å›finallyåŒºå—ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">hidingï¼ŒæŠ‘åˆ¶ä¸éšè—å˜æ•°çš„åŒºåŸŸå˜æ•°ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">incomplete-switchï¼ŒæŠ‘åˆ¶ä¸switché™ˆè¿°å¼(enum case)ä¸­é—æ¼é¡¹ç›®ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">javadocï¼ŒæŠ‘åˆ¶ä¸javadocç›¸å…³çš„è­¦å‘Š</span><br><span class="line">nlsï¼ŒæŠ‘åˆ¶ä¸énlså­—ä¸²æ–‡å­—ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">nullï¼ŒæŠ‘åˆ¶ä¸ç©ºå€¼åˆ†æç›¸å…³çš„è­¦å‘Š</span><br><span class="line">rawtypesï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨rawç±»å‹ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">resourceï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨Closeableç±»å‹çš„èµ„æºç›¸å…³çš„è­¦å‘Š</span><br><span class="line">restrictionï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨ä¸å»ºè®®æˆ–ç¦æ­¢å‚ç…§ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">serialï¼ŒæŠ‘åˆ¶ä¸å¯åºåˆ—åŒ–çš„ç±»åˆ«é—æ¼serialVersionUIDæ ä½ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">static-accessï¼ŒæŠ‘åˆ¶ä¸é™æ€å­˜å–ä¸æ­£ç¡®ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">static-methodï¼ŒæŠ‘åˆ¶ä¸å¯èƒ½å®£å‘Šä¸ºstaticçš„æ–¹æ³•ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">superï¼ŒæŠ‘åˆ¶ä¸ç½®æ¢æ–¹æ³•ç›¸å…³ä½†ä¸å«superå‘¼å«çš„è­¦å‘Š</span><br><span class="line">synthetic-accessï¼ŒæŠ‘åˆ¶ä¸å†…éƒ¨ç±»åˆ«çš„å­˜å–æœªæœ€ä½³åŒ–ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">sync-overrideï¼ŒæŠ‘åˆ¶å› ä¸ºç½®æ¢åŒæ­¥æ–¹æ³•è€Œé—æ¼åŒæ­¥åŒ–çš„è­¦å‘Š</span><br><span class="line">uncheckedï¼ŒæŠ‘åˆ¶ä¸æœªæ£€æŸ¥çš„ä½œä¸šç›¸å…³çš„è­¦å‘Š</span><br><span class="line">unqualified-field-accessï¼ŒæŠ‘åˆ¶ä¸æ ä½å­˜å–ä¸åˆæ ¼ç›¸å…³çš„è­¦å‘Š</span><br><span class="line">unusedï¼ŒæŠ‘åˆ¶ä¸æœªç”¨çš„ç¨‹å¼ç åŠåœç”¨çš„ç¨‹å¼ç ç›¸å…³çš„è­¦å‘Š</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41684621/article/details/123807986">https://blog.csdn.net/qq_41684621/article/details/123807986</a></p>
<p>âœ…<code>Raw use of parameterized class</code> å‚æ•°åŒ–ç±»å‹çš„åŸå§‹ä½¿ç”¨</p>
<p>æŒ‡å‡ºçœç•¥äº†ç±»å‹çš„å‚æ•°åŒ–ç±»çš„ä½¿ç”¨ã€‚è¿™ç§å¯¹å‚æ•°åŒ–ç±»å‹çš„åŸå§‹ä½¿ç”¨åœ¨Javaä¸­æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯ä¼šç ´åä½¿ç”¨ç±»å‹å‚æ•°çš„ç›®çš„ï¼Œå¹¶å¯èƒ½æ©ç›–é”™è¯¯ã€‚æ­¤æ£€æŸ¥åæ˜ äº†ç¼–è¯‘é˜¶æ®µå¯¹åŸå§‹ç±»å‹çš„è­¦å‘Šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List list = new ArrayList(); //ä¸æŒ‡å®šèŒƒå‹ï¼Œé»˜è®¤ä¸ºObjectç±»å‹</span><br><span class="line">list.add(&quot;123&quot;);</span><br><span class="line">list.add(1L);</span><br><span class="line">list.add(0.11d);</span><br><span class="line">// å¯ä»¥è¿™æ ·æ„é€ listï¼Œä½†æ˜¯ä¸‹é¢è½¬ç±»å‹ä¼šå‡ºé”™ï¼Œä¸èƒ½å§Stringç±»å‹è½¬ä¸ºdoubleã€‚</span><br><span class="line">//java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Double</span><br><span class="line">for (Object o : list) &#123;</span><br><span class="line">    double a = (double) o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç å°±æ˜¯ç›´æ¥ä½¿ç”¨åŸç”Ÿæ€ç±»å‹çš„å®ç°ï¼Œåœ¨ç¼–è¯‘æ—¶æœŸä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯ä¸€æ—¦è¿è¡Œå°±ä¼šæŠ¥é”™ï¼šException in thread â€œmainâ€ java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Doubleï¼Œä»£ç è®¾è®¡åº”è¯¥ä½¿é”™è¯¯å°½æ—©è¢«å‘ç°ï¼Œè€Œè¿™å°±æ˜¯ä¸å®‰å…¨çš„è¡¨ç°äº†ï¼Œè€Œä¸”å¯è¯»æ€§è€Œè¨€ï¼Œç¼ºå°‘äº†å½¢å¼ç±»å‹å‚æ•°ï¼Œæˆ‘ä»¬å¾ˆéš¾æ˜ç™½Listå­˜å‚¨çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œè¡¨è¿°æ€§å˜å·®ã€‚</p>
<p>å¦‚æœç¡®å®šä½¿ç”¨æ˜¯å®‰å…¨çš„ï¼Œä¸ä¼šåœ¨è¿è¡Œæ—¶å€™å¯¼è‡´é”™è¯¯ï¼Œåˆ™å¯é€šè¿‡ <code>@SuppressWarnings(&quot;rawtypes&quot;)</code>æ¶ˆé™¤ä½¿ç”¨åŸç”Ÿæ€ç±»å‹è­¦å‘Šã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1677759">https://cloud.tencent.com/developer/article/1677759</a></p>
<p>âœ…<code>Unchecked call to ... </code> è°ƒç”¨æœªç»æ£€æŸ¥</p>
<p>æ¯”å¦‚ä¸Šé¢addçš„æ—¶å€™å°±ä¼šæç¤ºï¼Œè¡¨ç¤ºæœªæ£€æŸ¥addçš„å‚æ•°çš„ç±»å‹ï¼Œå› ä¸ºå®šä¹‰listçš„æ—¶å€™æ²¡æŒ‡å®šç±»å‹ï¼Œå¦‚æœæŒ‡å®šç±»å‹å°±ä¸æŠ¥äº†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/26/myblog/spring/BeanFactory%E5%92%8CApplicationContext/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/26/myblog/spring/BeanFactory%E5%92%8CApplicationContext/" class="post-title-link" itemprop="url">BeanFactoryã€ApplicationContext</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-26 22:12:06" itemprop="dateCreated datePublished" datetime="2022-04-26T22:12:06+08:00">2022-04-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-18 18:31:45" itemprop="dateModified" datetime="2023-02-18T18:31:45+08:00">2023-02-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring%E7%90%86%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">springç†è§£</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="BeanFactoryä¸ApplicationContext"><a href="#BeanFactoryä¸ApplicationContext" class="headerlink" title="BeanFactoryä¸ApplicationContext"></a>BeanFactoryä¸ApplicationContext</h3><p>BeanFactoryä½¿ç®¡ç†ä¸åŒç±»å‹çš„javaå¯¹è±¡æˆä¸ºå¯èƒ½ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡ApplacationContextå»ºç«‹åœ¨BeanFactoråŸºç¡€ä¹‹ä¸Šï¼Œæä¾›äº†æ›´å¤šé¢å‘åº”ç”¨çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†å›½é™…åŒ–æ”¯æŒå’Œæ¡†æ¶äº‹ä»¶ä½“ç³»ï¼Œæ›´æ˜“äºåˆ›å»ºå®é™…åº”ç”¨ã€‚æˆ‘ä»¬ä¸€èˆ¬ç§°BeanFactoryä¸ºIOCå®¹å™¨ï¼Œè€Œç§°ApplicationContextä¸ºåº”ç”¨ä¸Šä¸‹æ–‡ã€‚ä½†æœ‰æ—¶ä¸ºäº†è¡Œæ–‡æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¹Ÿç§°ApplicationContextä¸ºSpringå®¹å™¨ã€‚</p>
<p>å¯¹äºäºŒè€…çš„ç”¨é€”ï¼Œå¯ä»¥è¿›è¡Œç®€å•çš„åˆ’åˆ†ï¼šBeanFactoræ˜¯Springæ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘Springæœ¬èº«ï¼›ApplicationContexté¢å‘ä½¿ç”¨Springæ¡†æ¶çš„å¼€å‘è€…ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨åœºåˆéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ApplicationContextè€Œéåº•å±‚çš„BeanFactoryã€‚</p>
<p>ï¼ˆ1ï¼‰BeanFactoryï¼šæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„æ´¾ç”Ÿï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼š<br>â‘ ç»§æ‰¿MessageSourceï¼Œå› æ­¤æ”¯æŒå›½é™…åŒ–ã€‚<br>â‘¡ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶è®¿é—®æ–¹å¼ã€‚<br>â‘¢æä¾›åœ¨ç›‘å¬å™¨ä¸­æ³¨å†Œbeançš„äº‹ä»¶ã€‚<br>â‘£åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚<br>â‘¤è½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ ï¼Œä½¿å¾—æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¯”å¦‚åº”ç”¨çš„webå±‚ã€‚</p>
<p>ï¼ˆ2ï¼‰BeanFactoryé€šå¸¸æ˜¯ä½¿ç”¨ç¼–ç¨‹æ–¹å¼è¢«åˆ›å»ºçš„ï¼Œè€ŒApplicationContextå¯ä»¥ç”¨å£°æ˜ï¼ˆå°±æ˜¯ç”¨é…ç½®çš„æ–¹å¼ï¼‰çš„æ–¹å¼åˆ›å»ºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ApplicationContextçš„å®ç°ç±»ä¹‹ä¸€ç”¨ç¼–ç æ–¹å¼æ¥åˆ›å»ºApplicationContextçš„å®ä¾‹.</p>
<p>ï¼ˆ3ï¼‰BeanFactoryé‡‡ç”¨çš„æ˜¯å»¶è¿ŸåŠ è½½å½¢å¼æ¥æ³¨å…¥beançš„ï¼Œåªæœ‰åœ¨ä½¿ç”¨åˆ°getBean() æ—¶ï¼Œæ‰å¯¹è¯¥beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›beançš„é…ç½®é—®é¢˜ã€‚è€ŒApplicationContextåˆ™ç›¸åï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰çš„beanï¼Œè¿™æ ·åœ¨å®¹å™¨å¯åŠ¨æ—¶å°±èƒ½å‘ç°spring ä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯ã€‚è¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanï¼Œé€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚ç›¸å¯¹äºåŸºæœ¬çš„BeanFactoryï¼ŒApplicationContext å”¯ä¸€çš„ä¸è¶³æ˜¯å ç”¨å†…å­˜ç©ºé—´ã€‚å½“åº”ç”¨ç¨‹åºé…ç½®Beanè¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚</p>
<p>ï¼ˆ4ï¼‰BeanFactoryå’ŒApplicationContextéƒ½æ”¯æŒBeanPostProcesserã€BeanFactoryPostProcessorçš„ä½¿ç”¨ï¼Œä½†ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼šBeanFactoryæ˜¯æ‰‹åŠ¨æ³¨å†Œçš„ï¼ŒApplicationContextæ˜¯è‡ªåŠ¨æ³¨å†Œçš„.</p>
<h3 id="ApplicationContextçš„åˆ›å»ºæ–¹å¼"><a href="#ApplicationContextçš„åˆ›å»ºæ–¹å¼" class="headerlink" title="ApplicationContextçš„åˆ›å»ºæ–¹å¼"></a>ApplicationContextçš„åˆ›å»ºæ–¹å¼</h3><h4 id="ä½¿ç”¨ä»£ç æ–¹å¼"><a href="#ä½¿ç”¨ä»£ç æ–¹å¼" class="headerlink" title="ä½¿ç”¨ä»£ç æ–¹å¼"></a>ä½¿ç”¨ä»£ç æ–¹å¼</h4><p>ApplicationContextæ¥å£å¸¸ç”¨å®ç°ç±»ï¼š</p>
<p>1.ClassPathXmlApplicationContext</p>
<p>a.åŠ è½½å•ä¸ªé…ç½®æ–‡ä»¶æ–¹å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext cxt = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br></pre></td></tr></table></figure>

<p>b.åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶æ–¹å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String[] configs = &#123;&quot;bean1.xml&quot;,&quot;bean2.xml&quot;,&quot;bean3.xml&quot;&#125;;</span><br><span class="line">ApplicationContext cxt = new ClassPathXmlApplicationContext(configs);</span><br></pre></td></tr></table></figure>

<p>2.ConfigurableApplicationContextæ¥å£</p>
<p>StartApplicationä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å¯åŠ¨springbootåº”ç”¨ï¼Œè·å–springçš„iocå®¹å™¨</span><br><span class="line">ConfigurableApplicationContext context = SpringApplication.run(StartApplication.class, args);</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨é…ç½®-å£°æ˜"><a href="#ä½¿ç”¨é…ç½®-å£°æ˜" class="headerlink" title="ä½¿ç”¨é…ç½®(å£°æ˜)"></a>ä½¿ç”¨é…ç½®(å£°æ˜)</h4><p>åœ¨javaeeåº”ç”¨ä¸­å‘Servletå®¹å™¨ä¸­æ³¨å…¥Springå®¹å™¨çš„æ–¹æ³•</p>
<p>ContextLoader æ¥å£ï¼Œå®ƒæœ‰ä¸¤ä¸ªå®ç° :ContextLoaderListener å’Œ ContextLoaderServlet. å…¶ä¸­å¸¸ç”¨çš„æ˜¯ ContextLoaderListener. ä» spring æ–‡æ¡£ä¸Šå¯ä»¥æŸ¥åˆ°ï¼Œä»–ä»¬äºŒè€…å®ç°çš„åŠŸèƒ½åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯ ContextLoaderListener ä¸èƒ½åœ¨ä¸ Servlet2.2 å…¼å®¹çš„ web å®¹å™¨ä¸­ä½¿ç”¨ã€‚å¦å¤–ï¼Œå› ä¸º ContextLoaderLitener æ˜¯ä¸€ä¸ª servlet Listener ï¼Œå› æ­¤ï¼Œå®ƒæ˜¯åœ¨ servlet context å»ºç«‹åç«‹å³æ‰§è¡Œï¼Œä¹Ÿå°±ä»¥ä¸ºè¿™ servlet å·²å»ºç«‹ï¼Œ spring çš„ ApplicationContext å°±å¾—åˆ°äº†åˆå§‹åŒ–ï¼Œå¹¶ä¸”èƒ½å¤Ÿç›¸åº”ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œæ‰€ä»¥é¦–é€‰ ContextLoaderListener.</p>
<p>åœ¨web.xmlä¸­æ·»åŠ å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;? xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; </span><br><span class="line"> &lt;! DOCTYPE web-app</span><br><span class="line">      PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span><br><span class="line">      &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt; </span><br><span class="line"> </span><br><span class="line"> &lt; web-app &gt; </span><br><span class="line">     &lt; display-name &gt; Baselib Application &lt;/ display-name &gt; </span><br><span class="line">    </span><br><span class="line">     &lt; context-param &gt; </span><br><span class="line">        &lt; param-name &gt; contextConfigLocation &lt;/ param-name &gt; </span><br><span class="line">        &lt; param-value &gt; </span><br><span class="line">        /WEB-INF/classes/spring-sup-middelbeans.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-action.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-beans.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-cm.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-hibernate.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-resource.xml</span><br><span class="line">        /WEB-INF/classes/spring-ueaac-sso.xml</span><br><span class="line">        /WEB-INF/classes/com/javaeye/jert/application_context.xml</span><br><span class="line">        &lt;/ param-value &gt; </span><br><span class="line">    &lt;/ context-param &gt; </span><br><span class="line"></span><br><span class="line">    &lt; listener &gt; </span><br><span class="line">        &lt; listener-class &gt; org.springframework.web.context.ContextLoaderListener &lt;/ listener-class &gt; </span><br><span class="line">    &lt;/ listener &gt; </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt; param-value &gt; /WEB-INF/classes/spring-*.xml &lt;/ context-param &gt; </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¸»è¦æ˜¯é…ç½®äº† spring çš„ç›‘å¬å™¨ ContextLoaderListener ï¼Œå®ƒæ£€æŸ¥ contextConfigLocation è¿™ä¸ªå‚æ•°ã€‚å¦‚æœå®ƒä¸å­˜åœ¨çš„è¯ï¼Œå®ƒå°†ç”¨ /WEB-INF/applicationContext.xml ä½œä¸ºé»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœ contextConfigLocation å­˜åœ¨çš„è¯ï¼Œå®ƒå°†æ ¹æ®è¯¥å‚æ•°çš„å€¼æŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œæ¥ä¸€ä¸€è¯»å– spring å‚æ•°ã€‚</p>
<p>contextConfigLocation æ˜¯è¢« spring å›ºå®šçš„ï¼Œä¸“é—¨ç”¨æ¥æŸ¥  æ‰¾é…ç½®æ–‡ä»¶ä½ç½®çš„.</p>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/sole_ghost/article/details/1389664">https://blog.csdn.net/sole_ghost/article/details/1389664</a></p>
<h3 id="ApplicationContext-getBean"><a href="#ApplicationContext-getBean" class="headerlink" title="ApplicationContext.getBean"></a>ApplicationContext.getBean</h3><p>ç›®çš„ï¼šè·å–Springå®¹å™¨ä¸­å·²åˆå§‹åŒ–çš„bean</p>
<p>ç¬¬ä¸€ç§ï¼šgetBean(String name)<br>å‚æ•°nameè¡¨ç¤ºIOCå®¹å™¨ä¸­å·²ç»å®ä¾‹åŒ–çš„beançš„idæˆ–è€…name,<br>åœ¨IOCå®¹å™¨ä¸­æ˜¯å”¯ä¸€çš„ä¸èƒ½é‡åã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">Person p = (Person) ctx.getBean(&quot;p&quot;);</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§ï¼šgetBean(Class<T> type)<br>typeè¡¨ç¤ºè¦åŠ è½½çš„Beançš„ç±»å‹ã€‚<br>å¦‚æœè¯¥ç±»å‹æ²¡æœ‰ç»§æ‰¿ä»»ä½•çˆ¶ç±»(Objectç±»é™¤å¤–)å’Œå®ç°æ¥å£çš„è¯ï¼Œé‚£ä¹ˆè¦æ±‚è¯¥ç±»å‹çš„beanåœ¨IOCå®¹å™¨ä¸­ä¹Ÿå¿…é¡»æ˜¯å”¯ä¸€çš„.(æ¯”å¦‚å®šä¹‰åŒä¸€ç±»çš„ä¸¤ä¸ªbeanï¼Œä½†æ˜¯propertyæ³¨å…¥çš„å±æ€§ä¸ä¸€æ ·)<br>ä¸éœ€è¦ç±»å‹è½¬æ¢ã€‚</T></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">Person p = ctx.getBean(Person.class);</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§ï¼šgetBean(String name,Class<T> type)<br>è¿™ç§æ–¹å¼æ¯”è¾ƒé€‚åˆæ¥å£/æŠ½è±¡ç±»ï¼Œæœ‰ä¸åŒå®ç°ç±»æˆ–å­ç±»æ—¶ï¼Œtypeå†™æ¥å£æˆ–çˆ¶ç±»ï¼Œnameå†™bean nameã€‚</T></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person p = ctx.getBean(&quot;person&quot;,BasePerson.class);</span><br></pre></td></tr></table></figure>

<p>ç¬¬å››ç§ï¼š getBean(String name,Object[] args)<br>ç¬¬äºŒä¸ªå‚æ•°Object[] argså¯ä»¥ç»™beançš„å±æ€§èµ‹å€¼ï¼Œèµ‹å€¼çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šæ„é€ æ–¹æ³•å’Œå·¥å‚æ–¹æ³•ã€‚ä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è·å–çš„beanå¿…é¡»æŠŠscopeå±æ€§è®¾ç½®ä¸ºprototypeï¼Œä¹Ÿå°±æ˜¯éå•ä¾‹æ¨¡å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1.æ„é€ æ–¹æ³•æ–¹å¼ï¼š</span><br><span class="line">&lt;bean name=&quot;p3&quot; class=&quot;com.bean.Person&quot; scope=&quot;prototype&quot;/&gt;</span><br><span class="line"></span><br><span class="line">Person p = (Person) ctx.getBean(&quot;p3&quot;,new Object[]&#123;&quot;ç‹äº”&quot;,35&#125;);</span><br><span class="line"></span><br><span class="line">2.å·¥å‚æ³¨å…¥æ–¹å¼ï¼š</span><br><span class="line">å·¥å‚ç±»ï¼š</span><br><span class="line">public class PersonFactory &#123;</span><br><span class="line">//é™æ€å·¥å‚æ³¨å…¥</span><br><span class="line">public static Person getPersonInstance(String name,int age)throws Exception</span><br><span class="line">&#123;</span><br><span class="line">  Person p = (Person)Class.forName(&quot;com.bean.Person&quot;).newInstance();</span><br><span class="line">   Method m = p.getClass().getMethod(&quot;setName&quot;, java.lang.String.class);</span><br><span class="line">   m.invoke(p, name);</span><br><span class="line">   m = p.getClass().getMethod(&quot;setAge&quot;, int.class);</span><br><span class="line">   m.invoke(p, age);</span><br><span class="line">   return p;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">é…ç½®beanï¼š</span><br><span class="line">&lt;bean name=&quot;p3&quot; class=&quot;com.factory.PersonFactory&quot; factory-method=&quot;getPersonInstance&quot; scope=&quot;prototype&quot;&gt;</span><br><span class="line">&lt;constructor-arg name=&quot;name&quot;&gt;</span><br><span class="line">&lt;null/&gt;</span><br><span class="line">&lt;/constructor-arg&gt;</span><br><span class="line">&lt;constructor-arg name=&quot;age&quot; value=&quot;0&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">Person p = (Person) ctx.getBean(&quot;p3&quot;,new Object[]&#123;&quot;ç‹äº”&quot;,35&#125;);</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_23927391/article/details/80625578">https://blog.csdn.net/qq_23927391/article/details/80625578</a></p>
<h3 id="ApplicationContext-getBeanWithAnnotation"><a href="#ApplicationContext-getBeanWithAnnotation" class="headerlink" title="ApplicationContext.getBeanWithAnnotation"></a>ApplicationContext.getBeanWithAnnotation</h3><p>springä¸­å¯ä»¥é€šè¿‡getBeansWithAnnotationæ¥è·å–iocå®¹å™¨ä¸­ä½¿ç”¨äº†æŸä¸ªæ³¨è§£çš„æ‰€æœ‰bean,è¿™ä¸ªæ–¹æ³•åº•å±‚åŸç†ï¼šæˆ‘ä»¬çŸ¥é“å¯ä»¥é€šè¿‡åå°„æ¥è·å–ä¸€ä¸ªç±»ä¸­æ‰€æœ‰çš„æ³¨è§£ï¼Œç„¶åé€šè¿‡éå†springå®¹å™¨ä¸­æ‰€æœ‰beanå°±èƒ½è·å–éœ€è¦çš„ç»“æœã€‚è¿”å›Map&lt;String, Object&gt;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//è‡ªå®šä¹‰@Auditableæ³¨è§£</span><br><span class="line">package com.yk.annotation;</span><br><span class="line"></span><br><span class="line">import java.lang.annotation.ElementType;</span><br><span class="line">import java.lang.annotation.Retention;</span><br><span class="line">import java.lang.annotation.RetentionPolicy;</span><br><span class="line">import java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(&#123;ElementType.METHOD,ElementType.TYPE&#125;)</span><br><span class="line">public @interface Auditable &#123;</span><br><span class="line">    String[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//åœ¨personç±»ä¸­æˆ‘ä»¬å¼•å…¥@Auditableï¼Œå¹¶é€šè¿‡@Componentå°†å…¶æ³¨å…¥springå®¹å™¨</span><br><span class="line">package com.yk.annotation;</span><br><span class="line"></span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">@Auditable(&quot;person.sleep&quot;)</span><br><span class="line">public class Person &#123;</span><br><span class="line"></span><br><span class="line">    void sleep()&#123;</span><br><span class="line">        System.out.println(&quot;ç¡è§‰äº†&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class TestApplicationContext implements ApplicationContextAware &#123;</span><br><span class="line"> </span><br><span class="line">    protected ApplicationContext applicationContext;</span><br><span class="line">	</span><br><span class="line">    @Override</span><br><span class="line">    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123;</span><br><span class="line">        this.applicationContext = applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @PostConstruct</span><br><span class="line">    public void init() throws Exception &#123;</span><br><span class="line">        Class aClass = Class.forName(&quot;com.yk.annotation.Auditable&quot;);</span><br><span class="line">        //boolean b = aClass.isAnnotation();</span><br><span class="line">        //System.out.println(b);</span><br><span class="line">        //Person person = applicationContext.getBean(Person.class);</span><br><span class="line">        Map beansWithAnnotation = applicationContext.getBeansWithAnnotation(aClass);</span><br><span class="line"></span><br><span class="line">        Iterator entries = beansWithAnnotation.entrySet().iterator();</span><br><span class="line"></span><br><span class="line">        while (entries.hasNext()) &#123;</span><br><span class="line"></span><br><span class="line">            Map.Entry entry = (Map.Entry) entries.next();</span><br><span class="line">            System.out.println(&quot;Key = &quot; + entry.getKey() + &quot;, Value = &quot; + entry.getValue());</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42374693/article/details/115374179">https://blog.csdn.net/weixin_42374693/article/details/115374179</a></p>
<h3 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><p>ä¸€ä¸ªä½¿ç”¨å·¥å‚æ¨¡å¼ç®¡ç†å¤šä¸ªç±»å®ç°åŒä¸€ä¸ªæ¥å£çš„ä¾‹å­ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_33898233/article/details/91414228">https://blog.csdn.net/weixin_33898233/article/details/91414228</a></p>
<p><code>applicationContext.getBeansOfType(Sort.class);</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/23/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/yarn%E5%92%8Cmapreduce/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/23/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/yarn%E5%92%8Cmapreduce/" class="post-title-link" itemprop="url">yarnå’Œmapreduceæ¨¡å‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-23 12:45:14" itemprop="dateCreated datePublished" datetime="2022-04-23T12:45:14+08:00">2022-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-20 15:28:57" itemprop="dateModified" datetime="2023-08-20T15:28:57+08:00">2023-08-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åç«¯å¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="mapreduce"><a href="#mapreduce" class="headerlink" title="mapreduce"></a>mapreduce</h3><p>è°·æ­Œä¸‰å‰‘å®¢ï¼šGFSï¼ˆé«˜å¯Œå¸…ï¼‰ã€bigtableã€mapreduceï¼ˆåäººï¼‰</p>
<p>å±‚æ¬¡ï¼šGFSæœ€åº•å±‚æ–‡ä»¶ç³»ç»Ÿã€åœ¨å¾€ä¸Šæ˜¯BigTableæ–‡ä»¶æ¨¡å‹ã€å†å¾€ä¸Šæ˜¯ç®—æ³•MapReduce</p>
<p>mapï¼šæ‹†è§£<br>reduceï¼šç»„åˆ</p>
<p>mapreduceç±»ä¼¼äºèµ›ç™¾å‘³ï¼šå¾—åˆ°æ•°æ®ï¼ˆinputï¼‰ã€åˆ‡åˆ†ï¼ˆsplitï¼‰ã€æŠŠæ•°æ®å½’ç±»ï¼ˆmapï¼‰ã€ç»„è£…ï¼ˆshuffleï¼‰ã€äº¤ä»˜ï¼ˆreduceï¼‰</p>
<p>ä¾‹å­ï¼šmapreduceåšå•è¯å‡ºç°æ•°çš„ç»Ÿè®¡ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æ˜¯å¹¶è¡Œçš„è¿‡ç¨‹ã€‚</p>
<p><img src="/images/mapreduce.png"></p>
<p>ä¾‹å­ï¼šmapreduceå®ç°å€’æ’ç´¢å¼•ï¼Œè®°å½•æ¯ä¸ªå•è¯å‡ºç°çš„ä½ç½®<br><img src="/images/mapreduce%E4%BE%8B%E5%AD%90.png"></p>
<p>mapreduceæ¶æ„ï¼š<br>é¦–å…ˆæ˜¯ç”¨æˆ·è¿›ç¨‹ï¼ˆuser programï¼‰åè°ƒå’Œå®šä¹‰ç¨‹åºæ€ä¹ˆè¿è¡Œï¼Œè´Ÿè´£æ‹†è§£workerï¼Œå…¶ä¸­ä¸€ä¸ªmaster workerï¼ˆä½œä¸ºç”¨æˆ·çš„ä»£ç†æ¥åè°ƒæ•´ä¸ªè¿‡ç¨‹ï¼‰ã€‚</p>
<p><img src="/images/mapreduce%E6%9E%B6%E6%9E%84.png"></p>
<p>mapreduceæœ¬è´¨å°±æ˜¯åˆ†æ”¯æ³•ã€‚</p>
<h3 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h3><p>å¦ä¸€ç§èµ„æºåè°ƒè€…ï¼Œhadoop1.xä¸­è´Ÿè´£èµ„æºç®¡ç†çš„æ˜¯ä¸€JobTrackerã€‚</p>
<p>yarnè´Ÿè´£å¤§æ•°æ®è®¡ç®—ä¸­çš„ï¼šèµ„æºç®¡ç†ã€ç¨‹åºè°ƒåº¦ã€‚</p>
<p>ä¸»è¦ç”±ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†æ„æˆï¼šResourceManagerï¼ˆç»Ÿæ½å…¨å±€ï¼‰ã€NodeManagerï¼ˆç®¡ç†æ¯ä¸ªè®¡ç®—æœºèŠ‚ç‚¹ä¸Šçš„èµ„æºè°ƒåº¦ï¼‰<br>ResourceManagerä¸­æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼šApplicationManagerã€ResourceScheduler</p>
<p>1.ä½œä¸šæäº¤é˜¶æ®µï¼šclientå‘æ•´ä¸ªé›†ç¾¤æäº¤jobï¼Œç”³è¯·job_idï¼ŒResourceManagerè¿”å›jobèµ„æºæäº¤è·¯å¾„å’Œjob_idï¼Œclientæ”¶åˆ°åå‘é€jaråŒ…åˆ°æŒ‡å®šè·¯å¾„HDFSã€‚clientæäº¤åå‘ResourceManageræäº¤æ‰§è¡Œè¯·æ±‚ï¼ŒResourceManageråˆ›å»ºä¸€ä¸ªApplicationManageræ¥ç®¡ç†è¿™ä¸ªjobã€‚</p>
<p>2.ä½œä¸šåˆå§‹åŒ–é˜¶æ®µï¼šApplicationManagerå°†jobæäº¤åˆ°ResourceSchedulerä¸­ï¼ŒResourceSchedulerç»´æŠ¤ä¸€ä¸ªjobé˜Ÿåˆ—ï¼Œç­‰å¾…æ‰§è¡Œã€‚å¯ä»¥æ‰§è¡Œæ—¶ï¼ŒResourceScheduleré€šçŸ¥ApplicationManageræœ‰ä¸€ä¸ªNodeManagerå¯ä»¥æ‰§è¡Œjobã€‚ApplicationManageråœ¨NodeManagerä¸­å¼€è¾Ÿå®¹å™¨Containerï¼ŒContainerä¸­å¯åŠ¨ApplicationMasterï¼ŒApplicationMasterè·å–HDFSä¸Šçš„æ–‡ä»¶ï¼Œç”ŸæˆTaskï¼ˆå¯ä»¥æ˜¯mapTaskï¼Œä¹Ÿå¯ä»¥æ˜¯reduceTaskï¼‰ã€‚</p>
<p>3.ä»»åŠ¡åˆ†é…é˜¶æ®µï¼šApplicationMasterå‘ResourceManagerç”³è¯·è¿è¡ŒTaskçš„ä»»åŠ¡èµ„æºï¼ŒResourceManagerå°†Taskä»»åŠ¡åˆ†é…ç»™ç©ºé—²çš„NodeManagerï¼ŒNodeManageråˆ›å»ºç”¨äºæ‰§è¡ŒTaskçš„å®¹å™¨Containerã€‚</p>
<p>4.ä»»åŠ¡è¿è¡Œé˜¶æ®µï¼šApplicationMasteré€šçŸ¥æ‰€æœ‰æ¥æ”¶åˆ°Taskè®¡ç®—ä»»åŠ¡çš„NodeManagerå¯åŠ¨è®¡ç®—ï¼ŒNodeManagerè¿›è¡Œè®¡ç®—ã€‚æ‰§è¡Œå®Œæˆåï¼Œå‘ResourceManagerç”³è¯·Containerè¿è¡Œæ–°çš„Taskã€‚æ‰€æœ‰çš„Taskæ‰§è¡Œå®Œæ¯•åï¼ŒApplicationMasterå‘ResourceManagerç”³è¯·æ³¨é”€è‡ªå·±ã€‚</p>
<p>5.ä½œä¸šå®Œæˆé˜¶æ®µï¼šæ¡†æ¶æ›´æ–°ä»»åŠ¡çš„è¿›åº¦å’ŒçŠ¶æ€ã€‚</p>
<p><img src="/images/yarn%E6%B5%81%E7%A8%8B.png"></p>
<p>è§†é¢‘åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Pa4y1t7nf?spm_id_from=333.1007.top_right_bar_window_history.content.click">https://www.bilibili.com/video/BV1Pa4y1t7nf?spm_id_from=333.1007.top_right_bar_window_history.content.click</a></p>
<h3 id="mapreduceä¸yarn"><a href="#mapreduceä¸yarn" class="headerlink" title="mapreduceä¸yarn"></a>mapreduceä¸yarn</h3><p>mapreduceçš„æµç¨‹ï¼š</p>
<p>1.é¦–å…ˆç”¨æˆ·ç¨‹åº (JobClient) æäº¤äº†ä¸€ä¸ª jobï¼Œjob çš„ä¿¡æ¯ä¼šå‘é€åˆ° Job Tracker ä¸­ï¼ŒJob Tracker æ˜¯ Map-reduce æ¡†æ¶çš„ä¸­å¿ƒï¼Œä»–éœ€è¦ä¸é›†ç¾¤ä¸­çš„æœºå™¨å®šæ—¶é€šä¿¡ (heartbeat), éœ€è¦ç®¡ç†å“ªäº›ç¨‹åºåº”è¯¥è·‘åœ¨å“ªäº›æœºå™¨ä¸Šï¼Œéœ€è¦ç®¡ç†æ‰€æœ‰ job å¤±è´¥ã€é‡å¯ç­‰æ“ä½œï¼Œéœ€è¦åˆ†é…åœ¨æ¯ä¸ª TaskTracker ä¸Šè¿è¡Œçš„ map å’Œ reduce ä»»åŠ¡ã€‚</p>
<p>2.TaskTracker æ˜¯ Map-reduce é›†ç¾¤ä¸­æ¯å°æœºå™¨éƒ½æœ‰çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œä»–åšçš„äº‹æƒ…ä¸»è¦æ˜¯ç›‘è§†è‡ªå·±æ‰€åœ¨æœºå™¨çš„èµ„æºæƒ…å†µã€‚ </p>
<p>3.TaskTracker åŒæ—¶ç›‘è§†å½“å‰æœºå™¨çš„ tasks è¿è¡ŒçŠ¶å†µã€‚TaskTracker éœ€è¦æŠŠè¿™äº›ä¿¡æ¯é€šè¿‡ heartbeat å‘é€ç»™ JobTrackerï¼ŒJobTracker ä¼šæœé›†è¿™äº›ä¿¡æ¯ä»¥ç»™æ–°æäº¤çš„ job åˆ†é…è¿è¡Œåœ¨å“ªäº›æœºå™¨ä¸Šã€‚ä¸Šå›¾è™šçº¿ç®­å¤´å°±æ˜¯è¡¨ç¤ºæ¶ˆæ¯çš„å‘é€ - æ¥æ”¶çš„è¿‡ç¨‹ã€‚</p>
<hr>
<p>MapReduceå­˜åœ¨çš„é—®é¢˜ï¼š</p>
<p>1.JobTracker æ˜¯ Map-reduce çš„é›†ä¸­å¤„ç†ç‚¹ï¼Œå­˜åœ¨å•ç‚¹æ•…éšœã€‚</p>
<p>2.JobTracker å®Œæˆäº†å¤ªå¤šçš„ä»»åŠ¡ï¼Œé€ æˆäº†è¿‡å¤šçš„èµ„æºæ¶ˆè€—ï¼Œå½“ map-reduce job éå¸¸å¤šçš„æ—¶å€™ï¼Œä¼šé€ æˆå¾ˆå¤§çš„å†…å­˜å¼€é”€ï¼Œæ½œåœ¨æ¥è¯´ï¼Œä¹Ÿå¢åŠ äº† JobTracker fail çš„é£é™©ï¼Œè¿™ä¹Ÿæ˜¯ä¸šç•Œæ™®éæ€»ç»“å‡ºè€ Hadoop çš„ Map-Reduce åªèƒ½æ”¯æŒ 4000 èŠ‚ç‚¹ä¸»æœºçš„ä¸Šé™ã€‚</p>
<p>3.åœ¨ TaskTracker ç«¯ï¼Œä»¥ map/reduce task çš„æ•°ç›®ä½œä¸ºèµ„æºçš„è¡¨ç¤ºè¿‡äºç®€å•ï¼Œæ²¡æœ‰è€ƒè™‘åˆ° cpu/ å†…å­˜çš„å ç”¨æƒ…å†µï¼Œå¦‚æœä¸¤ä¸ªå¤§å†…å­˜æ¶ˆè€—çš„ task è¢«è°ƒåº¦åˆ°äº†ä¸€å—ï¼Œå¾ˆå®¹æ˜“å‡ºç° OOM (å†…å­˜æº¢å‡ºï¼šéœ€è¦çš„å†…å­˜ç©ºé—´å¤§äºç³»ç»Ÿåˆ†é…çš„å†…å­˜ç©ºé—´)ã€‚</p>
<p>4.åœ¨ TaskTracker ç«¯ï¼ŒæŠŠèµ„æºå¼ºåˆ¶åˆ’åˆ†ä¸º map task slot å’Œ reduce task slot, å¦‚æœå½“ç³»ç»Ÿä¸­åªæœ‰ map task æˆ–è€…åªæœ‰ reduce task çš„æ—¶å€™ï¼Œä¼šé€ æˆèµ„æºçš„æµªè´¹ï¼Œä¹Ÿå°±æ˜¯å‰é¢æè¿‡çš„é›†ç¾¤èµ„æºåˆ©ç”¨çš„é—®é¢˜ã€‚</p>
<p>5.æºä»£ç å±‚é¢åˆ†æçš„æ—¶å€™ï¼Œä¼šå‘ç°ä»£ç éå¸¸çš„éš¾è¯»ï¼Œå¸¸å¸¸å› ä¸ºä¸€ä¸ª class åšäº†å¤ªå¤šçš„äº‹æƒ…ï¼Œä»£ç é‡è¾¾ 3000 å¤šè¡Œï¼Œï¼Œé€ æˆ class çš„ä»»åŠ¡ä¸æ¸…æ™°ï¼Œå¢åŠ  bug ä¿®å¤å’Œç‰ˆæœ¬ç»´æŠ¤çš„éš¾åº¦ã€‚</p>
<p>6.ä»æ“ä½œçš„è§’åº¦æ¥çœ‹ï¼Œç°åœ¨çš„ Hadoop MapReduce æ¡†æ¶åœ¨æœ‰ä»»ä½•é‡è¦çš„æˆ–è€…ä¸é‡è¦çš„å˜åŒ– ( ä¾‹å¦‚ bug ä¿®å¤ï¼Œæ€§èƒ½æå‡å’Œç‰¹æ€§åŒ– ) æ—¶ï¼Œéƒ½ä¼šå¼ºåˆ¶è¿›è¡Œç³»ç»Ÿçº§åˆ«çš„å‡çº§æ›´æ–°ã€‚æ›´ç³Ÿçš„æ˜¯ï¼Œå®ƒä¸ç®¡ç”¨æˆ·çš„å–œå¥½ï¼Œå¼ºåˆ¶è®©åˆ†å¸ƒå¼é›†ç¾¤ç³»ç»Ÿçš„æ¯ä¸€ä¸ªç”¨æˆ·ç«¯åŒæ—¶æ›´æ–°ã€‚è¿™äº›æ›´æ–°ä¼šè®©ç”¨æˆ·ä¸ºäº†éªŒè¯ä»–ä»¬ä¹‹å‰çš„åº”ç”¨ç¨‹åºæ˜¯ä¸æ˜¯é€‚ç”¨æ–°çš„ Hadoop ç‰ˆæœ¬è€Œæµªè´¹å¤§é‡æ—¶é—´ã€‚</p>
<p>æ€»ç»“ï¼šä»ä¸šç•Œä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„å˜åŒ–è¶‹åŠ¿å’Œ hadoop æ¡†æ¶çš„é•¿è¿œå‘å±•æ¥çœ‹ï¼ŒMapReduce çš„ JobTracker/TaskTracker æœºåˆ¶éœ€è¦å¤§è§„æ¨¡çš„è°ƒæ•´æ¥ä¿®å¤å®ƒåœ¨å¯æ‰©å±•æ€§ï¼Œå†…å­˜æ¶ˆè€—ï¼Œçº¿ç¨‹æ¨¡å‹ï¼Œå¯é æ€§å’Œæ€§èƒ½ä¸Šçš„ç¼ºé™·ã€‚</p>
<hr>
<p>yarnï¼š</p>
<p>ä» 0.23.0 ç‰ˆæœ¬å¼€å§‹ï¼ŒHadoop çš„ MapReduce æ¡†æ¶å®Œå…¨é‡æ„ï¼Œå‘ç”Ÿäº†æ ¹æœ¬çš„å˜åŒ–ã€‚æ–°çš„ Hadoop MapReduce æ¡†æ¶å‘½åä¸º MapReduceV2 æˆ–è€…å« Yarnã€‚</p>
<p>é‡æ„æ ¹æœ¬çš„æ€æƒ³æ˜¯å°† JobTracker ä¸¤ä¸ªä¸»è¦çš„åŠŸèƒ½åˆ†ç¦»æˆå•ç‹¬çš„ç»„ä»¶ï¼Œè¿™ä¸¤ä¸ªåŠŸèƒ½æ˜¯èµ„æºç®¡ç†å’Œä»»åŠ¡è°ƒåº¦ / ç›‘æ§ã€‚æ–°çš„ResourceManager èµ„æºç®¡ç†å™¨å…¨å±€ç®¡ç†æ‰€æœ‰åº”ç”¨ç¨‹åºè®¡ç®—èµ„æºçš„åˆ†é…ï¼Œæ¯ä¸€ä¸ªåº”ç”¨çš„ ApplicationMaster è´Ÿè´£ç›¸åº”çš„è°ƒåº¦å’Œåè°ƒã€‚ä¸€ä¸ªåº”ç”¨ç¨‹åºæ— éæ˜¯ä¸€ä¸ªå•ç‹¬çš„ä¼ ç»Ÿçš„ MapReduce ä»»åŠ¡æˆ–è€…æ˜¯ä¸€ä¸ª DAG( æœ‰å‘æ— ç¯å›¾ ) ä»»åŠ¡ã€‚ResourceManager å’Œæ¯ä¸€å°æœºå™¨çš„èŠ‚ç‚¹ç®¡ç†æœåŠ¡å™¨èƒ½å¤Ÿç®¡ç†ç”¨æˆ·åœ¨é‚£å°æœºå™¨ä¸Šçš„è¿›ç¨‹å¹¶èƒ½å¯¹è®¡ç®—è¿›è¡Œç»„ç»‡ã€‚</p>
<p>è€çš„MapReduceä¸»è¦åŒ…æ‹¬Job Trackerå’ŒTask Trackerï¼ŒYARNä¸­ä¸»è¦æ˜¯ä¸‰ä¸ªç»„ä»¶ï¼šResource Managerã€Node Managerå’ŒApplication Masterã€‚Resource Managerè´Ÿè´£å…¨å±€èµ„æºåˆ†é…ï¼ŒApplication Masteræ¯ä¸ªèŠ‚ç‚¹ï¼ˆjobï¼Ÿï¼‰ä¸€ä¸ªï¼Œè´Ÿè´£å½“å‰èŠ‚ç‚¹çš„è°ƒåº¦å’Œåè°ƒã€‚Node Manageræ˜¯æ¯å°æœºå™¨çš„ä»£ç†ï¼Œç›‘æ§åº”ç”¨ç¨‹åºçš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œå¹¶æ±‡æŠ¥ç»™Resource Managerã€‚å› æ­¤ä¸è€çš„MapReduceç›¸æ¯”ï¼ŒYARNæŠŠèµ„æºç®¡ç†ä¸ä»»åŠ¡è°ƒåº¦çš„å·¥ä½œåˆ†ç¦»å¼€æ¥ï¼Œå‡å°‘äº†MapReduceä¸­Job Trackerçš„å‹åŠ›ã€‚</p>
<p>ResourceManagerï¼šæ˜¯ä¸€ä¸ªä¸­å¿ƒçš„æœåŠ¡ï¼Œå®ƒåšçš„äº‹æƒ…æ˜¯è°ƒåº¦ã€å¯åŠ¨æ¯ä¸€ä¸ª Job æ‰€å±çš„ ApplicationMasterã€å¦å¤–ç›‘æ§ ApplicationMaster çš„å­˜åœ¨æƒ…å†µã€‚ResourceManager è´Ÿè´£ä½œä¸šä¸èµ„æºçš„è°ƒåº¦ã€‚æ¥æ”¶ JobSubmitter æäº¤çš„ä½œä¸šï¼ŒæŒ‰ç…§ä½œä¸šçš„ä¸Šä¸‹æ–‡ (Context) ä¿¡æ¯ï¼Œä»¥åŠä» NodeManager æ”¶é›†æ¥çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¯åŠ¨è°ƒåº¦è¿‡ç¨‹ï¼Œåˆ†é…ä¸€ä¸ª Container ä½œä¸º App Mstr.</p>
<p>NodeManagerï¼šåŠŸèƒ½æ¯”è¾ƒä¸“ä¸€ï¼Œå°±æ˜¯è´Ÿè´£ Container çŠ¶æ€çš„ç»´æŠ¤ï¼Œå¹¶å‘ RM ä¿æŒå¿ƒè·³ã€‚</p>
<p>ApplicationMasterï¼šè´Ÿè´£ä¸€ä¸ª Job ç”Ÿå‘½å‘¨æœŸå†…çš„æ‰€æœ‰å·¥ä½œï¼Œç±»ä¼¼è€çš„æ¡†æ¶ä¸­ JobTrackerã€‚ä½†æ³¨æ„æ¯ä¸€ä¸ª Jobï¼ˆä¸æ˜¯æ¯ä¸€ç§ï¼‰éƒ½æœ‰ä¸€ä¸ª ApplicationMasterï¼Œå®ƒå¯ä»¥è¿è¡Œåœ¨ ResourceManager ä»¥å¤–çš„æœºå™¨ä¸Šã€‚</p>
<hr>
<p>yarnçš„ä¼˜åŠ¿ï¼š</p>
<p>1 YARNå¤§å¤§å‡å°‘äº†Job Trackerçš„èµ„æºæ¶ˆè€—ï¼Œå¹¶ä¸”è®©ç›‘æµ‹æ¯ä¸ªJobå­ä»»åŠ¡çŠ¶æ€çš„ç¨‹åºåˆ†å¸ƒå¼åŒ–äº†ã€‚<br>2 YARNä¸­Application Masteræ˜¯ä¸€ä¸ªå¯å˜æ›´éƒ¨åˆ†ï¼Œç”¨æˆ·å¯ä»¥å¯¹ä¸åŒç¼–ç¨‹æ¨¡å‹ç¼–å†™è‡ªå·±çš„AppMstï¼Œè®©æ›´å¤šç±»å‹çš„ç¼–ç¨‹æ¨¡å‹èƒ½è·‘åœ¨Hadoopé›†ç¾¤ä¸­ã€‚<br>3 è€çš„æ¡†æ¶ä¸­ï¼ŒJob Trackerä¸€ä¸ªå¾ˆå¤§çš„è´Ÿæ‹…å°±æ˜¯ç›‘æ§Jobä¸‹ä»»åŠ¡çš„è¿è¡ŒçŠ¶å†µï¼Œç°åœ¨ç”±Application Masterå»åšï¼Œè€ŒResource Manageræ˜¯ç›‘æµ‹Application Masterçš„è¿è¡ŒçŠ¶å†µï¼Œå¦‚æœå‡ºé—®é¢˜ï¼Œä¼šå°†å…¶åœ¨å…¶ä»–æœºå™¨ä¸Šé‡å¯ã€‚</p>
<p>å‡ºå¤„ï¼š<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9523999e13cf">https://www.jianshu.com/p/9523999e13cf</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/hahachenchen789/article/details/80527706">https://blog.csdn.net/hahachenchen789/article/details/80527706</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/22/myblog/spring/spring%E6%A1%86%E6%9E%B6%E4%B9%8Bbean%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/22/myblog/spring/spring%E6%A1%86%E6%9E%B6%E4%B9%8Bbean%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">springæ¡†æ¶@Beanæ³¨è§£ã€æ‹¦æˆªå™¨ã€ç›‘å¬å™¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-22 22:14:57" itemprop="dateCreated datePublished" datetime="2022-04-22T22:14:57+08:00">2022-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-06-04 15:32:59" itemprop="dateModified" datetime="2023-06-04T15:32:59+08:00">2023-06-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring%E7%90%86%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">springç†è§£</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Beanæ³¨è§£"><a href="#Beanæ³¨è§£" class="headerlink" title="@Beanæ³¨è§£"></a>@Beanæ³¨è§£</h3><p>ä½œç”¨åœ¨æ–¹æ³•ä¸Šçš„æ³¨è§£ï¼ŒSpringçš„@Beanæ³¨è§£ç”¨äºå‘Šè¯‰æ–¹æ³•ï¼Œäº§ç”Ÿä¸€ä¸ªBeanå¯¹è±¡ï¼Œç„¶åè¿™ä¸ªBeanå¯¹è±¡äº¤ç»™Springç®¡ç†ã€‚äº§ç”Ÿè¿™ä¸ªBeanå¯¹è±¡çš„æ–¹æ³•Springåªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œéšåè¿™ä¸ªSpringå°†ä¼šå°†è¿™ä¸ªBeanå¯¹è±¡æ”¾åœ¨è‡ªå·±çš„IOCå®¹å™¨ä¸­ã€‚(å’Œxmlé…ç½®ä¸­çš„beanæ ‡ç­¾çš„ä½œç”¨æ˜¯ä¸€æ ·çš„)</p>
<p>@Beanä¸»è¦ç”¨åœ¨@Configurationæ³¨è§£çš„ç±»ä¸­ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨@Componentæ³¨è§£çš„ç±»ä¸­ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class AppConfig &#123;</span><br><span class="line"> </span><br><span class="line">    // ä½¿ç”¨@Bean æ³¨è§£è¡¨æ˜myBeanéœ€è¦äº¤ç»™Springè¿›è¡Œç®¡ç†</span><br><span class="line">    // æœªæŒ‡å®šbean çš„åç§°ï¼Œé»˜è®¤é‡‡ç”¨çš„æ˜¯æ–¹æ³•åçš„é…ç½®æ–¹å¼</span><br><span class="line">    @Bean</span><br><span class="line">    public MyBean buildMyBean()&#123;</span><br><span class="line">        return new MyBean();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class MyBean &#123;</span><br><span class="line"> </span><br><span class="line">    public MyBean()&#123;</span><br><span class="line">        System.out.println(&quot;MyBean Initializing&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»SpringBeanApplicationTestsï¼Œæµ‹è¯•ä¸Šè¿°ä»£ç çš„æ­£ç¡®æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class SpringBeanApplicationTests &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">        context.getBean(&quot;buildMyBean&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Beançš„å±æ€§ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">valueï¼šbeanåˆ«åå’Œnameæ˜¯ç›¸äº’ä¾èµ–å…³è”çš„ï¼Œvalue,nameå¦‚æœéƒ½ä½¿ç”¨çš„è¯å€¼å¿…é¡»è¦ä¸€è‡´ï¼›</span><br><span class="line"></span><br><span class="line">nameï¼šbeanåç§°ï¼Œå¦‚æœä¸å†™ä¼šé»˜è®¤ä¸ºæ³¨è§£çš„æ–¹æ³•åç§°ï¼›</span><br><span class="line"></span><br><span class="line">autowireï¼šè‡ªå®šè£…é…é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œå»ºè®®å°½é‡ä¸è¦å¼€å¯ï¼Œå› ä¸ºè‡ªåŠ¨è£…é…ä¸èƒ½è£…é…åŸºæœ¬æ•°æ®ç±»å‹ã€å­—ç¬¦ä¸²ã€æ•°ç»„ç­‰ï¼Œè¿™æ˜¯è‡ªåŠ¨è£…é…è®¾è®¡çš„å±€é™æ€§ï¼Œå¹¶ä¸”è‡ªåŠ¨è£…é…ä¸å¦‚ä¾èµ–æ³¨å…¥ç²¾ç¡®ï¼›</span><br><span class="line"></span><br><span class="line">initMethodï¼šbeançš„åˆå§‹åŒ–ä¹‹å‰çš„æ‰§è¡Œæ–¹æ³•ï¼Œè¯¥å‚æ•°ä¸€èˆ¬ä¸æ€ä¹ˆç”¨ï¼Œå› ä¸ºå®Œå…¨å¯ä»¥åœ¨ä»£ç ä¸­å®ç°ï¼›</span><br><span class="line"></span><br><span class="line">destroyMethodï¼šé»˜è®¤ä½¿ç”¨javaConfigé…ç½®çš„beanï¼Œå¦‚æœå­˜åœ¨closeæˆ–è€…shutdownæ–¹æ³•ï¼Œåˆ™åœ¨beané”€æ¯æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œå¦‚æœä½ ä¸æƒ³æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œåˆ™æ·»åŠ @Bean(destroyMethod=&quot;&quot;)æ¥é˜²æ­¢å‡ºå‘é”€æ¯æ–¹æ³•ï¼›</span><br></pre></td></tr></table></figure>

<p>Springä¸­çš„@Beanæ³¨è§£ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_36380516/article/details/119194065">https://blog.csdn.net/weixin_36380516/article/details/119194065</a></p>
<h3 id="Beanå’Œ-Component"><a href="#Beanå’Œ-Component" class="headerlink" title="@Beanå’Œ@Component"></a>@Beanå’Œ@Component</h3><ul>
<li>@Componentæ³¨è§£è¡¨æ˜ä¸€ä¸ªç±»ä¼šä½œä¸ºç»„ä»¶ç±»ï¼Œå¹¶å‘ŠçŸ¥Springè¦ä¸ºè¿™ä¸ªç±»åˆ›å»ºbeanã€‚</li>
<li>@Beanæ³¨è§£å‘Šè¯‰Springè¿™ä¸ªæ–¹æ³•å°†ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è¦æ³¨å†Œä¸ºSpringåº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„beanã€‚é€šå¸¸æ–¹æ³•ä½“ä¸­åŒ…å«äº†æœ€ç»ˆäº§ç”Ÿbeanå®ä¾‹çš„é€»è¾‘ã€‚</li>
</ul>
<p>ç›¸åŒç‚¹ï¼šä¸¤è€…çš„ç»“æœéƒ½æ˜¯ä¸ºspringå®¹å™¨æ³¨å†ŒBean.<br>ä¸åŒç‚¹ï¼š@Component é€šå¸¸æ˜¯é€šè¿‡ç±»è·¯å¾„æ‰«ææ¥è‡ªåŠ¨ä¾¦æµ‹ä»¥åŠè‡ªåŠ¨è£…é…åˆ°Springå®¹å™¨ä¸­ã€‚<br>ã€€ã€€ã€€ã€€@Bean æ³¨è§£é€šå¸¸æ˜¯æˆ‘ä»¬åœ¨æ ‡æœ‰è¯¥æ³¨è§£çš„æ–¹æ³•ä¸­å®šä¹‰äº§ç”Ÿè¿™ä¸ªbeançš„é€»è¾‘ã€‚</p>
<blockquote>
<p>@Component ï¼ˆ@Controller @Service @Respositoryï¼‰ä½œç”¨äºç±»ä¸Šï¼Œåªæœ‰åœ¨æˆ‘ä»¬çš„SpringBootåº”ç”¨ç¨‹åºå¯ç”¨äº†ç»„ä»¶æ‰«æå¹¶ä¸”åŒ…å«äº†è¢«æ³¨è§£çš„ç±»æ—¶æ‰æœ‰æ•ˆã€‚é€šè¿‡ç»„ä»¶æ‰«æï¼ŒSpringå°†æ‰«ææ•´ä¸ªç±»è·¯å¾„ï¼Œå¹¶å°†æ‰€æœ‰@Componentæ³¨é‡Šç±»æ·»åŠ åˆ°Spring Contextï¼Œè¿™é‡Œæœ‰çš„ä¸è¶³å°±æ˜¯ä¼šæŠŠæ•´ä¸ªç±»å½“æˆbeanæ³¨å†Œåˆ°spring å®¹å™¨ä¸Šï¼Œå¦‚æœè¿™ä¸ªç±»ä¸­å¹¶ä¸æ˜¯æ‰€æœ‰æ–¹æ³•éƒ½éœ€è¦æ³¨å†Œä¸ºbeançš„è¯ï¼Œä¼šå‡ºç°ä¸éœ€è¦çš„æ–¹æ³•éƒ½æ³¨å†Œæˆä¸ºbeanï¼Œè¿™æ—¶å€™å¿…é¡»ç¡®ä¿è¿™äº›ä¸éœ€è¦çš„æ–¹æ³•ä¹Ÿèƒ½æ³¨å†Œä¸ºbeanæˆ–è€…åœ¨æ‰«æä¸­åŠ filter è¿‡æ»¤è¿™äº›ä¸éœ€è¦çš„bean,å¦è€…springå°†æ— æ³•æˆåŠŸå¯åŠ¨ã€‚</p>
</blockquote>
<blockquote>
<p>@Beanç›¸å¯¹æ¥è¯´å°±æ›´åŠ çµæ´»äº†ï¼Œå®ƒå¯ä»¥ç‹¬ç«‹åŠ åœ¨æ–¹æ³•ä¸Šï¼ŒæŒ‰éœ€æ³¨å†Œåˆ°springå®¹å™¨ï¼Œè€Œä¸”å¦‚æœä½ è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹ç±»åº“é‡Œé¢æŸä¸ªæ–¹æ³•çš„æ—¶å€™ï¼ˆæˆ–è€…ç±»ï¼Ÿï¼‰ï¼Œä½ å°±åªèƒ½ç”¨@BeanæŠŠè¿™ä¸ªæ–¹æ³•æ³¨å†Œåˆ°springå®¹å™¨ï¼Œå› ä¸ºç”¨@Componentä½ éœ€è¦é…ç½®ç»„ä»¶æ‰«æåˆ°è¿™ä¸ªç¬¬ä¸‰æ–¹ç±»è·¯å¾„è€Œä¸”è¿˜è¦åœ¨åˆ«äººæºä»£ç åŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼Œå¾ˆæ˜æ˜¾æ˜¯ä¸ç°å®çš„ã€‚</p>
</blockquote>
<p>â¤ï¸å½“æˆ‘ä»¬å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ä¸­çš„ç±»éœ€è¦è£…é…åˆ°Springå®¹å™¨æ—¶ï¼Œåˆ™åªèƒ½é€šè¿‡@Beanæ¥å®ç°<br>æ€»ç»“ï¼š@Componentå’Œ@Beanéƒ½æ˜¯ç”¨æ¥æ³¨å†ŒBeanå¹¶è£…é…åˆ°Springå®¹å™¨ä¸­ï¼Œä½†æ˜¯Beanæ¯”Componentçš„è‡ªå®šä¹‰æ€§æ›´å¼ºã€‚å¯ä»¥å®ç°ä¸€äº›Componentå®ç°ä¸äº†çš„è‡ªå®šä¹‰åŠ è½½ç±»ã€‚ç‰¹åˆ«æ˜¯äºŒæ–¹åº“æˆ–ä¸‰æ–¹åº“çš„ç±»è£…é…ä¸ºbeanï¼Œåªèƒ½ç”¨@Beanã€‚</p>
<h3 id="å®ç°FactoryBeanæ¥å£"><a href="#å®ç°FactoryBeanæ¥å£" class="headerlink" title="å®ç°FactoryBeanæ¥å£"></a>å®ç°FactoryBeanæ¥å£</h3><p>org.springframework.beans.factoryä¸­</p>
<p>FactoryBeanæ˜¯ä¸€ä¸ªå·¥å‚Beanï¼Œå¯ä»¥ç”ŸæˆæŸä¸€ä¸ªç±»å‹Beanå®ä¾‹ï¼Œå®ƒæœ€å¤§çš„ä¸€ä¸ªä½œç”¨æ˜¯ï¼šå¯ä»¥è®©æˆ‘ä»¬è‡ªå®šä¹‰Beançš„åˆ›å»ºè¿‡ç¨‹ã€‚BeanFactoryæ˜¯Springå®¹å™¨ä¸­çš„ä¸€ä¸ªåŸºæœ¬ç±»ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªç±»ï¼Œåœ¨BeanFactoryä¸­å¯ä»¥åˆ›å»ºå’Œç®¡ç†Springå®¹å™¨ä¸­çš„Beanï¼Œå®ƒå¯¹äºBeançš„åˆ›å»ºæœ‰ä¸€ä¸ªç»Ÿä¸€çš„æµç¨‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public interface FactoryBean&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    //è¿”å›çš„å¯¹è±¡å®ä¾‹</span><br><span class="line">    T getObject() throws Exception;</span><br><span class="line">    //Beançš„ç±»å‹</span><br><span class="line">    Class&lt;?&gt; getObjectType();</span><br><span class="line">    //trueæ˜¯å•ä¾‹ï¼Œfalseæ˜¯éå•ä¾‹  åœ¨Spring5.0ä¸­æ­¤æ–¹æ³•åˆ©ç”¨äº†JDK1.8çš„æ–°ç‰¹æ€§å˜æˆäº†defaultæ–¹æ³•ï¼Œè¿”å›true</span><br><span class="line">    boolean isSingleton();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>FactoryBeanä¸­å®šä¹‰äº†ä¸€ä¸ªSpring Beançš„å¾ˆé‡è¦çš„ä¸‰ä¸ªç‰¹æ€§ï¼šæ˜¯å¦å•ä¾‹ã€Beanç±»å‹ã€Beanå®ä¾‹ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">//FactoryBeanæ¥å£çš„å®ç°ç±»</span><br><span class="line">@Component</span><br><span class="line">public class FactoryBeanLearn implements FactoryBean &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object getObject() throws Exception &#123;</span><br><span class="line">        //è¿™ä¸ªBeanæ˜¯æˆ‘ä»¬è‡ªå·±newçš„ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æ§åˆ¶Beançš„åˆ›å»ºè¿‡ç¨‹äº†</span><br><span class="line">        return new FactoryBeanServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        return FactoryBeanService.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean isSingleton() &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//æ¥å£</span><br><span class="line">public interface FactoryBeanService &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æµ‹è¯•FactoryBean</span><br><span class="line">     */</span><br><span class="line">    void testFactoryBean();</span><br><span class="line">&#125;</span><br><span class="line">//å®ç°ç±»</span><br><span class="line">public class FactoryBeanServiceImpl implements FactoryBeanService &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æµ‹è¯•FactoryBean</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void testFactoryBean() &#123;</span><br><span class="line">        System.out.println(&quot;æˆ‘æ˜¯FactoryBeançš„ä¸€ä¸ªæµ‹è¯•ç±»ã€‚ã€‚ã€‚ã€‚&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//å•æµ‹</span><br><span class="line">@Test</span><br><span class="line">public void test() &#123;</span><br><span class="line">        ClassPathXmlApplicationContext cac = new ClassPathXmlApplicationContext(&quot;classpath:com/zkn/spring/learn/base/applicationContext.xml&quot;);</span><br><span class="line">        FactoryBeanService beanService = cac.getBean(FactoryBeanService.class);</span><br><span class="line">        beanService.testFactoryBean();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>â¤ï¸FactoryBeanæ˜¯è‡ªå®šä¹‰äº†ä¸€ç§æ³¨å…¥Beançš„æ–¹æ³•ï¼Œåœ¨ç±»ä¸­æ²¡æœ‰åŠ æ³¨è§£ï¼Œä¹Ÿæ²¡æœ‰xmlä¸­é…ç½®ï¼Œä½†æ˜¯å®ç°FactoryBeanæ¥å£ï¼Œé‡å†™getObjectæ–¹æ³•æ¥è¿”å›å¯¹è±¡ï¼Œè¡¨ç¤ºæ³¨å…¥äº†beanï¼Œé‡å†™getObjectTypeè¡¨ç¤ºè·å–beanæ—¶beançš„ç±»å‹ã€‚ç„¶åå°±å¯ä»¥é€šè¿‡getBean(ç±»å‹.class)è·å–beanå®ä¾‹äº†ã€‚<br>è‡³äºï¼Œå¦‚ä½•é€šè¿‡ApplicationContext.getBean()ï¼Œè§ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zknxx/article/details/79572387">https://blog.csdn.net/zknxx/article/details/79572387</a></p>
<h3 id="ApplicationContextAwareæ¥å£"><a href="#ApplicationContextAwareæ¥å£" class="headerlink" title="ApplicationContextAwareæ¥å£"></a>ApplicationContextAwareæ¥å£</h3><p>org.springframework.contextä¸­</p>
<p>å½“ä¸€ä¸ªç±»å®ç°äº†è¿™ä¸ªæ¥å£ä¹‹åï¼Œè¿™ä¸ªç±»å°±å¯ä»¥æ–¹ä¾¿çš„è·å¾—ApplicationContextå¯¹è±¡ï¼ˆspringä¸Šä¸‹æ–‡ï¼‰ï¼ŒSpringå‘ç°æŸä¸ªBeanå®ç°äº†ApplicationContextAwareæ¥å£ï¼ŒSpringå®¹å™¨ä¼šåœ¨åˆ›å»ºè¯¥Beanä¹‹åï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥Beançš„setApplicationContextï¼ˆå‚æ•°ï¼‰æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä¼šå°†å®¹å™¨æœ¬èº«ApplicationContextå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³•ã€‚</p>
<p>â¤ï¸ä¹‹å‰è·å–ApplicationContextéœ€è¦åŠ è½½é…ç½®æ–‡ä»¶ä»è€Œåˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œspringè‡ªåŠ¨å°†å®¹å™¨æœ¬èº«ApplicationContextå¯¹è±¡ä¼ é€’ç»™å…¶ä¸­çš„æ–¹æ³•setApplicationContextã€‚å®ç°å®ƒçš„ç±»ï¼Œå¯ä»¥åœ¨ç±»ä¸­åˆ›å»ºç§æœ‰çš„ApplicationContextå˜é‡ï¼Œåœ¨setApplicationContextä¸­this. = è¿›è¡Œä¼ é€’ã€‚</p>
<p>å®ç°ApplicationContextAwareæ¥å£å¯ä»¥æ–¹ä¾¿è·å–ApplicationContextï¼Œå³springå®¹å™¨ï¼Œè·å–å®¹å™¨ä¹‹åå°±å¯ä»¥æ–¹ä¾¿è·å–beanã€‚</p>
<p>ä¾‹å­ï¼š<br>è·å–ä¸€ä¸ªæ’åºå·¥å‚ï¼š</p>
<p>æ’åºæ¥å£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Sort &#123;</span><br><span class="line">    SortType getSortType();</span><br><span class="line">    int[] sorting(int[] sourceArray);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ’åºç®—æ³•å®ç°æ¥å£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class SelectionSort implements Sort &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public SortType getSortType() &#123;</span><br><span class="line">        return SortType.SELECTION;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public int[] sorting(int[] sourceArray) &#123;</span><br><span class="line">        int[] arr = Arrays.copyOf(sourceArray, sourceArray.length);</span><br><span class="line"> </span><br><span class="line">        // æ€»å…±è¦ç»è¿‡ N-1 è½®æ¯”è¾ƒ</span><br><span class="line">        for (int i = 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">            int min = i;</span><br><span class="line"> </span><br><span class="line">            // æ¯è½®éœ€è¦æ¯”è¾ƒçš„æ¬¡æ•° N-i</span><br><span class="line">            for (int j = i + 1; j &lt; arr.length; j++) &#123;</span><br><span class="line">                if (arr[j] &lt; arr[min]) &#123;</span><br><span class="line">                    // è®°å½•ç›®å‰èƒ½æ‰¾åˆ°çš„æœ€å°å€¼å…ƒç´ çš„ä¸‹æ ‡</span><br><span class="line">                    min = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            // å°†æ‰¾åˆ°çš„æœ€å°å€¼å’Œiä½ç½®æ‰€åœ¨çš„å€¼è¿›è¡Œäº¤æ¢</span><br><span class="line">            if (i != min) &#123;</span><br><span class="line">                int temp = arr[i];</span><br><span class="line">                arr[i] = arr[min];</span><br><span class="line">                arr[min] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æšä¸¾æ’åºç±»å‹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public enum SortType &#123;</span><br><span class="line">    SELECTION,</span><br><span class="line">    BUBBLE,</span><br><span class="line">    INSERT,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ’åºå·¥å‚ï¼Œå®ç° ApplicationContextAware æ¥å£:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class SortFactory implements ApplicationContextAware &#123;</span><br><span class="line">    private static Map&lt;SortType, Sort&gt; sortBeanMap = new ConcurrentHashMap&lt;&gt;(16);</span><br><span class="line">    @Override</span><br><span class="line">    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123;</span><br><span class="line">        Map&lt;String, Sort&gt; map = applicationContext.getBeansOfType(Sort.class);</span><br><span class="line">        map.forEach((key, value) -&gt; sortBeanMap.put(value.getSortType(), value));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public int[] sorting(SortType sortType, int[] sourceArray) &#123;</span><br><span class="line">        Sort sort = sortBeanMap.get(sortType);</span><br><span class="line">        return sort.sorting(sourceArray);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">public class SortController &#123;</span><br><span class="line"> </span><br><span class="line">    private final SortFactory sortFactory;</span><br><span class="line"> </span><br><span class="line">    public SortController(SortFactory sortFactory) &#123;</span><br><span class="line">        this.sortFactory = sortFactory;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @PostMapping(value = &quot;factory/sort&quot;)</span><br><span class="line">    public Object sortFactory(SortType sortType, int[] sourceArr) &#123;</span><br><span class="line">        return sortFactory.sorting(sortType, sourceArr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒè‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_33898233/article/details/91414228">https://blog.csdn.net/weixin_33898233/article/details/91414228</a></p>
<h3 id="InitialzingBeanæ¥å£"><a href="#InitialzingBeanæ¥å£" class="headerlink" title="InitialzingBeanæ¥å£"></a>InitialzingBeanæ¥å£</h3><p>å½“ä¸€ä¸ªç±»å®ç°è¿™ä¸ªæ¥å£ä¹‹åï¼ŒSpringå¯åŠ¨åï¼Œåˆå§‹åŒ–Beanæ—¶ï¼Œè‹¥è¯¥Beanå®ç°InitialzingBeanæ¥å£ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨afterPropertiesSet()æ–¹æ³•ï¼Œå®Œæˆä¸€äº›ç”¨æˆ·è‡ªå®šä¹‰çš„åˆå§‹åŒ–æ“ä½œã€‚</p>
<p>åŒæ ·é…ç½®Beançš„æ—¶å€™ä½¿ç”¨init-methodä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„æ“ä½œã€‚ï¼ˆä¸éœ€è¦å®ç°InitialzingBeanæ¥å£ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void afterPropertiesSet() throws Exception &#123;&#125;</span><br><span class="line"></span><br><span class="line">&lt;bean id = &quot;springBeanInit02&quot; class = &quot;com.lyj.studySpringBoot.init.SpringBeanInit&quot; init-method=&quot;testInit&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;id&quot; value=&quot;#&#123;1111111&#125;&quot; /&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot; value=&quot;$&#123;test.springEL&#125;&quot; /&gt;</span><br><span class="line">	&lt;property name=&quot;age&quot; value=&quot;#&#123;10+8&#125;&quot; /&gt; // SpringELè¡¨è¾¾å¼</span><br><span class="line">	&lt;property name=&quot;sex&quot; value=&quot;false&quot; /&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">ç³»ç»Ÿæ˜¯å…ˆè°ƒç”¨afterPropertiesSetæ–¹æ³•ï¼Œç„¶ååœ¨è°ƒç”¨init-methodä¸­æŒ‡å®šçš„æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure>

<p>Springæ˜¯é€šè¿‡åå°„æ¥è°ƒç”¨init-methodæŒ‡å®šæ–¹æ³•ï¼Œè€Œå®ç°InitializingBeanæ¥å£æ˜¯ç›´æ¥è°ƒç”¨afterPropertiesSetæ–¹æ³•ï¼Œæ‰€ä»¥åè€…æ•ˆç‡é«˜ï¼Œä½†ä½¿ç”¨init-methodæ–¹å¼å‡å°‘äº†å¯¹Springçš„ä¾èµ–ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40093255/article/details/117318760">https://blog.csdn.net/qq_40093255/article/details/117318760</a></p>
<h3 id="MethodInterceptoræ¥å£-æ‹¦æˆªå™¨"><a href="#MethodInterceptoræ¥å£-æ‹¦æˆªå™¨" class="headerlink" title="MethodInterceptoræ¥å£-æ‹¦æˆªå™¨"></a>MethodInterceptoræ¥å£-æ‹¦æˆªå™¨</h3><p>org.aopalliance.interceptä¸­<br>MethodInterceptoræ¥å£ç»§æ‰¿äº†Interceptoræ¥å£ï¼ŒInterceptoæ¥å£åˆç»§æ‰¿äº†Adviceæ¥å£ï¼Œå› æ­¤æˆ‘ä¸ªå°†è¿™æ‹¦æˆªå™¨ç§°ä¸ºä¸€ä¸ªé€šçŸ¥ã€‚</p>
<p>å®ç°MethodInterceptor æ¥å£ï¼Œåœ¨è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œå°±å¯ä»¥å®ç°åœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰ã€è°ƒç”¨æ–¹æ³•è¿‡ç¨‹ä¸­ã€è°ƒç”¨æ–¹æ³•ä¹‹åå¯¹å…¶è¿›è¡Œæ§åˆ¶ã€‚</p>
<p>æ‹¦æˆªå™¨å°±åƒæ˜¯å»ºç«‹äº†ä¸€ä¸ªé€šçŸ¥ã€‚ç”¨åˆ‡é¢åšå¢å¼ºä¸€æ ·ã€‚</p>
<p>ç®€å•çš„ä¾‹å­ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012834750/article/details/71773887">https://blog.csdn.net/u012834750/article/details/71773887</a><br>1.å®ç°æ¥å£é‡å†™invokeæ–¹æ³•ï¼Œåšå¢å¼º<br>2.å†™ä¸€ä¸ªç®€å•æ–¹æ³•<br>3.æµ‹è¯•ä¸­ï¼Œç”¨ä»£ç†å·¥å‚è®¾ç½®ä»£ç†å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">public class TestMethodInterceptor  &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // åˆå§‹åŒ–ä¸€ä¸ªä»£ç†å·¥å‚</span><br><span class="line">        ProxyFactory proxyFactory=new ProxyFactory();</span><br><span class="line"></span><br><span class="line">        // è®¾ç½®ç›®æ ‡ç±»ï¼Œä»¥ä¾¿äºCglibå·¥å…·åŒ…åŠ¨æ€ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œå³æˆ‘ä»¬æ‰€éœ€çš„ä»£ç†ç±»</span><br><span class="line">        // æœ€å¥½æŠŠå®ç°ç±»å•ç‹¬å†™ï¼Œè¿™é‡Œè®¾ç½®çš„æ˜¯å®ç°ç±»ï¼ˆä¸šåŠ¡ï¼‰</span><br><span class="line">        proxyFactory.setTarget(new TestMethodInterceptor());</span><br><span class="line"></span><br><span class="line">        // è®¾ç½®æ‹¦æˆªå™¨ï¼Œè€Œæ‹¦æˆªå™¨çš„&quot;public Object invoke(MethodInvocation mi)&quot;å®šä¹‰äº†ä»£ç†ç±»ï¼ˆå®é™…æ˜¯UserDaoImplçš„å­ç±»ï¼‰çš„æ–¹æ³•ç”Ÿæˆç­–ç•¥ã€‚</span><br><span class="line">        proxyFactory.addAdvice(new adviseMethodInterceptor());</span><br><span class="line"></span><br><span class="line">        // è·å–ä»£ç†ç±»</span><br><span class="line">        Object proxy = proxyFactory.getProxy();</span><br><span class="line">         // å‘ä¸Šè½¬å‹ï¼Œè½¬å‹ä¸ºçˆ¶ç±»ç±»å‹</span><br><span class="line">        TestMethodInterceptor methodInterceptor = (TestMethodInterceptor) proxy;</span><br><span class="line"></span><br><span class="line">        methodInterceptor.doSomeThing(&quot;é€šè¿‡ä»£ç†å·¥å‚è®¾ç½®ä»£ç†å¯¹è±¡ï¼Œæ‹¦æˆªä»£ç†æ–¹æ³•&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class adviseMethodInterceptor implements MethodInterceptor&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public Object invoke(MethodInvocation methodInvocation) throws Throwable &#123;</span><br><span class="line"></span><br><span class="line">            Object result=null;</span><br><span class="line">            try&#123;</span><br><span class="line">                System.out.println(&quot;æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼š&quot;+methodInvocation.getMethod().toString());</span><br><span class="line"></span><br><span class="line">                result= methodInvocation.proceed();</span><br><span class="line"></span><br><span class="line">                System.out.println(&quot;æ–¹æ³•æ‰§è¡Œä¹‹åï¼š&quot;+methodInvocation.getMethod().toString());</span><br><span class="line">                System.out.println(&quot;æ–¹æ³•æ­£å¸¸è¿è¡Œç»“æœï¼š&quot;+result);</span><br><span class="line"></span><br><span class="line">                return result;</span><br><span class="line"></span><br><span class="line">            &#125;catch (Exception e)&#123;</span><br><span class="line">                System.out.println(&quot;æ–¹æ³•å‡ºç°å¼‚å¸¸:&quot;+e.toString());</span><br><span class="line">                System.out.println(&quot;æ–¹æ³•è¿è¡ŒExceptionç»“æœï¼š&quot;+result);</span><br><span class="line">                return result;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String doSomeThing(String someThing)&#123;</span><br><span class="line"></span><br><span class="line">        //int i=5/0;</span><br><span class="line">        return &quot;æ‰§è¡Œè¢«æ‹¦æˆªçš„æ–¹æ³•ï¼š&quot;+someThing;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>AOPéƒ½æ˜¯åŸºäºï¼ˆCglibï¼‰ä»£ç†æ¨¡å¼å®ç°çš„ï¼Œå…¶ä¸­çš„å…³é”®ç‚¹åœ¨äºå®ç°MethodInterceptoræ¥å£ï¼Œåœ¨å…¶â€œpublic Object invoke(MethodInvocation mi)â€æ–¹æ³•ä¸­åˆ¶å®šä»£ç†æ–¹æ³•çš„ç”Ÿæˆç­–ç•¥ï¼Œè€Œä»æ­¤æ–¹æ³•çš„MethodInvocationç±»å‹å‚æ•°miä¸­å¯ä»¥è·å¾—ç›®æ ‡å¯¹è±¡ã€ç›®æ ‡æ–¹æ³•ã€æ–¹æ³•çš„å‚æ•°ç­‰ä¿¡æ¯ï¼Œæ ¹æ®è¿™äº›ä¿¡æ¯å¯ä»¥ç²¾ç¡®åœ°æ§åˆ¶å¢å¼ºæ•ˆæœã€‚</p>
<p>invokeæ–¹æ³•çš„ä¼ å‚æ˜¯MethodInvocationï¼Œè¡¨ç¤ºæ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// è·å–æ–¹æ³•å</span><br><span class="line">String methodName = mi.getMethod().getName();</span><br><span class="line">if (methodName.startsWith(&quot;add&quot;))</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br><span class="line">result= methodInvocation.proceed();</span><br><span class="line"></span><br><span class="line">// è·å–æ–¹æ³•å‚æ•°</span><br><span class="line">Object[] args = methodInvocation.getArguments();</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„ä¾‹å­ï¼š<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gocode/p/aop-in-spring.html">https://www.cnblogs.com/gocode/p/aop-in-spring.html</a></p>
<p>â¤ï¸æ€»ç»“ï¼šæ‹¦æˆªå™¨ï¼Œå¯ä»¥ä»¥åŠ¨æ€ä»£ç†çš„æ–¹å¼æ‰§è¡Œæ–¹æ³•ï¼Œå¦ä¸€ä¸ªä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªåˆ‡é¢ï¼Œå…·ä½“çš„é€šçŸ¥åœ¨invokeä¸­åŠ ï¼Œä¼ å…¥å‚æ•°å¯ä»¥è·å–ç›®æ ‡å¯¹è±¡ã€æ–¹æ³•ã€æ–¹æ³•å‚æ•°ï¼Œä»è€Œé€‰æ‹©å¯¹ä¸åŒåˆ‡å…¥ç‚¹è¿›è¡Œä¸åŒçš„é€šçŸ¥/å¢å¼ºã€‚ä¹Ÿå¯ä»¥ä¸åŠ é€šçŸ¥ï¼Œåªæ˜¯proceedæ‰§è¡Œæœ¬æ–¹æ³•ã€‚</p>
<p>âœ…æ‹¦æˆªå™¨ä¸ºä»€ä¹ˆä¸€å®šè¦åŠ @Componentï¼Ÿ</p>
<p>åœ¨Spring æ¡†æ¶ä¸­ï¼Œä½¿ç”¨ @Componentæ³¨è§£å°†ä¸€ä¸ªç±»æ ‡è®°ä¸ºç»„ä»¶ï¼Œè¡¨ç¤ºè¿™ä¸ªç±»å¯ä»¥è¢« Spring å®¹å™¨æ‰«æå¹¶åˆ›å»ºå®ä¾‹ã€‚<br>åœ¨AOPä¸­ï¼Œåˆ‡é¢ç±»éœ€è¦è¢« Spring å®¹å™¨ç®¡ç†ï¼Œæ‰€ä»¥éœ€è¦å°†è¿™ä¸ªç±»åŠ ä¸Š@Componentæ³¨è§£ï¼Œä»¥ä¾¿è¢«Spring å®¹å™¨æ‰«æå¹¶åˆ›å»ºå®ä¾‹ã€‚å¦‚æœä¸åŠ @Componentæ³¨è§£ï¼Œè¿™ä¸ªåˆ‡é¢ç±»å°±ä¸ä¼šè¢«Spring å®¹å™¨ç®¡ç†ï¼Œä¹Ÿå°±æ— æ³•æ‰§è¡Œæ‹¦æˆªçš„é€»è¾‘ã€‚<br>å¦å¤–ï¼Œå¦‚æœè¿™ä¸ªåˆ‡é¢ç±»éœ€è¦æ³¨å…¥å…¶ä»–ä¾èµ–ï¼Œæ¯”å¦‚æ•°æ®æºã€ç¼“å­˜ç­‰ï¼Œä¹Ÿéœ€è¦åŠ ä¸Š @Componentæ³¨è§£ï¼Œä»¥ä¾¿è¢« Springå®¹å™¨ç®¡ç†ã€‚å¦‚æœä¸åŠ  @Component æ³¨è§£ï¼Œè¿™äº›ä¾èµ–ä¹Ÿæ— æ³•è¢«æ³¨å…¥ï¼Œä¼šå¯¼è‡´ä»£ç å‡ºç°é”™è¯¯ã€‚<br>æ€»ä¹‹ï¼ŒåŠ ä¸Š@Componentæ³¨è§£å¯ä»¥è®©è¿™ä¸ªåˆ‡é¢ç±»è¢« Spring å®¹å™¨ç®¡ç†ï¼Œä»¥ä¾¿æ‰§è¡Œæ‹¦æˆªçš„é€»è¾‘ï¼Œå¹¶æ³¨å…¥å…¶ä»–ä¾èµ–ï¼Œç¡®ä¿ä»£ç çš„æ­£ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h3 id="ApplicationListeneræ¥å£-ç›‘å¬å™¨"><a href="#ApplicationListeneræ¥å£-ç›‘å¬å™¨" class="headerlink" title="ApplicationListeneræ¥å£-ç›‘å¬å™¨"></a>ApplicationListeneræ¥å£-ç›‘å¬å™¨</h3><p>ApplicationContextäº‹ä»¶æœºåˆ¶æ˜¯è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼çš„å®ç°ï¼Œé€šè¿‡ApplicationEventç±»å’ŒApplicationListeneræ¥å£ï¼Œå¯ä»¥å®ç°ApplicationContextäº‹ä»¶å¤„ç†ã€‚</p>
<p>å¦‚æœå®¹å™¨ä¸­æœ‰ä¸€ä¸ªApplicationListener Beanï¼Œæ¯å½“ApplicationContextå‘å¸ƒApplicationEventæ—¶ï¼ŒApplicationListener Beanå°†è‡ªåŠ¨è¢«è§¦å‘ã€‚è¿™ç§äº‹ä»¶æœºåˆ¶éƒ½å¿…é¡»éœ€è¦ç¨‹åºæ˜¾ç¤ºpublishçš„è§¦å‘ã€‚</p>
<p>äº‹ä»¶å¯ä»¥è‡ªå®šä¹‰ã€ç›‘å¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œå®Œå…¨æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘æ¥å¤„ç†ã€‚</p>
<p>1.å®šä¹‰äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class EmailEvent extends ApplicationEvent&#123;</span><br><span class="line">ã€€ã€€ private String address;</span><br><span class="line">ã€€ã€€ private String text;</span><br><span class="line">ã€€ã€€ public EmailEvent(Object source, String address, String text)&#123;</span><br><span class="line">ã€€ã€€ super(source);</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ this.address = address;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ this.text = text;</span><br><span class="line">ã€€ã€€ &#125;</span><br><span class="line">ã€€ã€€ public EmailEvent(Object source) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€super(source);</span><br><span class="line">ã€€ã€€ &#125;</span><br><span class="line">ã€€ã€€ //......addresså’Œtextçš„setterã€getter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.ç›‘å¬äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class EmailNotifier implements ApplicationListener&#123;</span><br><span class="line">    // ç›‘å¬åäº‹ä»¶å¤„ç†çš„æ–¹æ³•ï¼Œå¯ä»¥å¯¹äº‹ä»¶åšä¸€äº›åˆ¤æ–­</span><br><span class="line">ã€€ã€€ public void onApplicationEvent(ApplicationEvent event) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€if (event instanceof EmailEvent) &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ EmailEvent emailEvent = (EmailEvent)event;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ System.out.println(&quot;é‚®ä»¶åœ°å€ï¼š&quot; + emailEvent.getAddress());</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ System.our.println(&quot;é‚®ä»¶å†…å®¹ï¼š&quot; + emailEvent.getText());</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€&#125; else &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ System.our.println(&quot;å®¹å™¨æœ¬èº«äº‹ä»¶ï¼š&quot; + event);</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€ &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.è§¦å‘äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class SpringTest &#123;</span><br><span class="line">ã€€ã€€ public static void main(String args[])&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€//åˆ›å»ºä¸€ä¸ªApplicationEventå¯¹è±¡</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€EmailEvent event = new EmailEvent(&quot;hello&quot;,&quot;abc@163.com&quot;,&quot;This is a test&quot;);</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€//ä¸»åŠ¨è§¦å‘è¯¥äº‹ä»¶</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€context.publishEvent(event);</span><br><span class="line">ã€€ã€€ &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åœ¨æ‹¦æˆªå™¨ä¸­åšå¢å¼ºè§¦å‘ã€‚</p>
<p>ä¸ç®¡æ˜¯å†…ç½®ç›‘å¬è¿˜æ˜¯å¤–éƒ¨è‡ªå®šä¹‰ç›‘å¬ä¸€å®šè¦æŠŠå®ç°ApplicationListenerçš„ç±»å®šä¹‰æˆä¸€ä¸ªbeanæ‰è¡Œï¼Œå¯ä»¥æ˜¯é€šè¿‡æ³¨è§£@Componentç­‰ä¹Ÿå¯ä»¥é€šè¿‡xmlçš„æ–¹å¼å»æ‰§è¡Œã€‚</p>
<p>ç›‘å¬å™¨å®ç°ç±»å®ç°çš„ApplicationListeneræ¥å£ä¸­ï¼Œå¯ä»¥åŠ èŒƒå‹ï¼Œäº‹ä»¶ç±»å‹ã€‚</p>
<h3 id="æ¥å£é˜²åˆ·"><a href="#æ¥å£é˜²åˆ·" class="headerlink" title="æ¥å£é˜²åˆ·"></a>æ¥å£é˜²åˆ·</h3><p>å†™ä¸€ä¸ªé€šç”¨ç±»ç”¨redisé”æ¥å®ç°ï¼Œéœ€è¦å‰æ®µä¼ ä¸€ä¸ªä¸œè¥¿æ¥è¡¨ç¤ºredisçš„keyï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32871365/article/details/122113652">https://blog.csdn.net/qq_32871365/article/details/122113652</a></p>
<p>åœ¨å‰æ®µè®¿é—®å‰ï¼Œå…ˆä»åç«¯ç”³è¯·ä¸€ä¸ªtokenï¼Œç„¶åæ‹¿è¿™tockenè®¿é—®ï¼Œåç«¯æ ¡éªŒtockenï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42071874/article/details/90402099">https://blog.csdn.net/weixin_42071874/article/details/90402099</a></p>
<p>è‡ªå®šä¹‰æ³¨è§£+redis+æ‹¦æˆªå™¨çš„æ–¹æ³•ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40918145/article/details/108734614">https://blog.csdn.net/weixin_40918145/article/details/108734614</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45637260/article/details/127692497">https://blog.csdn.net/qq_45637260/article/details/127692497</a><br>1.å†™ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£ä¼ å¯è®¿é—®æ¬¡æ•°<br>2.å†™ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œè·å–è‡ªå®šä¹‰æ³¨è§£ï¼Œå¹¶ä¸”è·å–HttpServletRequestï¼Œä»ä¸­è·å–ipï¼Œç„¶åredisè®°å½•è®¿é—®æ¬¡æ•°<br>3.é…ç½®æ‹¦æˆªå™¨WebMvcConfigurerAdapter<br>4.controlleræ¥å£æ–¹æ³•ä¸ŠåŠ è‡ªå®šä¹‰æ³¨è§£</p>
<p>åŒæ ·æ˜¯ä»¥ipä¸ºç»´åº¦ï¼Œæ‹¦æˆªå™¨/aopï¼š<br><a target="_blank" rel="noopener" href="https://www.jb51.net/article/205093.htm">https://www.jb51.net/article/205093.htm</a></p>
<p>è‡ªå®šä¹‰æ³¨è§£ï¼šåˆ‡é¢aopï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34033209/article/details/118601590">https://blog.csdn.net/qq_34033209/article/details/118601590</a></p>
<p>tockenï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/LilLazy/p/14708539.html">https://www.cnblogs.com/LilLazy/p/14708539.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/14/myblog/JAVA/java%20junit%E4%B8%8Emock%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/14/myblog/JAVA/java%20junit%E4%B8%8Emock%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">javaçš„junitä¸mockæµ‹è¯•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-14 22:22:37" itemprop="dateCreated datePublished" datetime="2022-04-14T22:22:37+08:00">2022-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-18 14:13:33" itemprop="dateModified" datetime="2023-02-18T14:13:33+08:00">2023-02-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å•å…ƒæµ‹è¯•(Unit test)ï¼š<br>å•å…ƒæµ‹è¯•å…³æ³¨å•ä¸€çš„ç±». å®ƒä»¬å­˜åœ¨çš„ç›®çš„æ˜¯æ£€æŸ¥è¿™ä¸ªç±»ä¸­çš„ä»£ç æ˜¯å¦æŒ‰ç…§æœŸæœ›æ­£ç¡®è¿è¡Œ.<br>ç‰¹å¾ï¼šå¿«é€Ÿã€ç‹¬ç«‹ã€å¯é‡å¤ã€è‡ªæ£€æŸ¥ï¼ˆä¸åŠ mainä¸æ‰“æ—¥å¿—ï¼‰<br>æ ¸å¿ƒä»·å€¼ï¼šç¼©çŸ­åé¦ˆå‘¨æœŸï¼Œé™ä½ç¼ºé™·ä¿®å¤æˆæœ¬ï¼Œç†è§£ä»£ç æ„å›¾</p>
<p>é›†æˆæµ‹è¯•(Integration test)<br>é¡¾åæ€ä¹‰, é›†æˆæµ‹è¯•æ˜¯æ£€æŸ¥å¼€å‘çš„æ¨¡å—å’Œå…¶ä»–æ¨¡å—æ•´åˆæ—¶æ˜¯å¦æ­£å¸¸å·¥ä½œ.<br>è™½ç„¶é›†æˆæµ‹è¯•çš„ä»£ç å½±å“èŒƒå›´æ¯”å•å…ƒæµ‹è¯•è¦å¹¿, ä½†æ˜¯é›†æˆæµ‹è¯•å’Œå•å…ƒæµ‹è¯•ä¸€æ ·, ä¹Ÿæ˜¯é’ˆå¯¹äºå¼€å‘è€…è€Œè¨€çš„.<br>é›†æˆæµ‹è¯•æ˜¯å¯¹å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰æœ‰ä¾èµ–çš„æµ‹è¯•ã€‚</p>
<p>ç«¯åˆ°ç«¯æµ‹è¯•(End-to-End test)<br>ç«¯åˆ°ç«¯æµ‹è¯•æ˜¯å°†æ•´ä¸ªç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“, ç„¶åä»ç”¨æˆ·çš„è§’åº¦è¿›è¡Œæµ‹è¯•çš„.<br>ç«¯åˆ°ç«¯æµ‹è¯•çš„ç›®çš„æ˜¯æµ‹è¯•ç³»ç»Ÿåœ¨å®é™…ä½¿ç”¨çš„æ˜¯å¦æ­£å¸¸çš„, å› æ­¤é€šå¸¸æ¥è¯´æ˜¯ä¸éœ€è¦æµ‹è¯•æ›¿èº«çš„(Test Double)</p>
<h2 id="1-Junitå•å…ƒæµ‹è¯•"><a href="#1-Junitå•å…ƒæµ‹è¯•" class="headerlink" title="1.Junitå•å…ƒæµ‹è¯•"></a>1.Junitå•å…ƒæµ‹è¯•</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å•å…ƒæµ‹è¯•çš„ç›®çš„: æµ‹è¯•å½“å‰æ‰€å†™çš„ä»£ç æ˜¯å¦æ˜¯æ­£ç¡®çš„, ä¾‹å¦‚è¾“å…¥ä¸€ç»„æ•°æ®, ä¼šè¾“å‡ºæœŸæœ›çš„æ•°æ®; è¾“å…¥é”™è¯¯æ•°æ®, ä¼šäº§ç”Ÿé”™è¯¯å¼‚å¸¸ç­‰.</p>
<p>åœ¨å•å…ƒæµ‹è¯•ä¸­, æˆ‘ä»¬éœ€è¦ä¿è¯è¢«æµ‹ç³»ç»Ÿæ˜¯ç‹¬ç«‹çš„(SUT æ²¡æœ‰ä»»ä½•çš„ DOC), å³å½“è¢«æµ‹ç³»ç»Ÿé€šè¿‡æµ‹è¯•æ—¶, é‚£ä¹ˆå®ƒåœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½æ˜¯èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„. ç¼–å†™å•å…ƒæµ‹è¯•æ—¶, ä»…ä»…éœ€è¦å…³æ³¨å•ä¸ªç±»å°±å¯ä»¥äº†. è€Œä¸éœ€è¦å…³æ³¨ä¾‹å¦‚æ•°æ®åº“æœåŠ¡, Web æœåŠ¡ç­‰ç»„ä»¶.</p>
<p>ã€SUTã€‘è¢«æµ‹ç³»ç»Ÿ(System under test, SUT) è¢«æµ‹ç³»ç»Ÿã€‚æ ¹æ®æµ‹è¯•ç±»å‹çš„ä¸åŒ, SUT æŒ‡ä»£çš„å†…å®¹ä¹Ÿä¸åŒ, ä¾‹å¦‚ SUT å¯ä»¥æ˜¯ä¸€ä¸ªç±»ç”šè‡³æ˜¯ä¸€æ•´ä¸ªç³»ç»Ÿ.</p>
<p>ã€DOCã€‘è¢«æµ‹ç³»ç»Ÿæ‰€ä¾èµ–çš„ç»„ä»¶, ä¾‹å¦‚è¿›ç¨‹ UserService çš„å•å…ƒæµ‹è¯•æ—¶, UserService ä¼šä¾èµ– UserDao, å› æ­¤ UserDao å°±æ˜¯ DOC</p>
<p>ã€Test Doubleã€‘æµ‹è¯•æ›¿èº«<br>ä¸€ä¸ªå®é™…çš„ç³»ç»Ÿä¼šä¾èµ–å¤šä¸ªå¤–éƒ¨å¯¹è±¡, ä½†æ˜¯åœ¨è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶, æˆ‘ä»¬ä¼šç”¨ä¸€äº›åŠŸèƒ½è¾ƒä¸ºç®€å•çš„å¹¶ä¸”å…¶è¡Œä¸ºå’Œå®é™…å¯¹è±¡ç±»ä¼¼çš„å‡å¯¹è±¡æ¥ä½œä¸º SUT çš„ä¾èµ–å¯¹è±¡, ä»¥æ­¤æ¥é™ä½å•å…ƒæµ‹è¯•çš„å¤æ‚æ€§å’Œå¯å®ç°æ€§. åœ¨è¿™é‡Œ, è¿™äº›å‡å¯¹è±¡å°±è¢«ç§°ä¸º æµ‹è¯•æ›¿èº«(Test Double).</p>
<p>æµ‹è¯•æ›¿èº«æœ‰ä»¥ä¸‹äº”ç§ï¼š</p>
<p>1.Test stub, ä¸º SUT æä¾›æ•°æ®çš„å‡å¯¹è±¡ã€‚stub ç±»æœ‰æ—¶å€™è¿˜ä¼šè®°å½•è°ƒç”¨çš„ä¸€äº›ä¿¡æ¯ã€‚</p>
<p>2.Fake objectï¼Œå®ç°äº†ç®€å•åŠŸèƒ½çš„ä¸€ä¸ªå‡å¯¹è±¡. Fake object å’Œ Test stub çš„ä¸»è¦åŒºåˆ«å°±æ˜¯ Test stub ä¾§é‡äºç”¨äºæä¾›æ•°æ®çš„å‡å¯¹è±¡, è€Œ Fake object æ²¡æœ‰è¿™å±‚å«ä¹‰ï¼Œä½¿ç”¨ Fake object çš„æœ€ä¸»è¦çš„åŸå› å°±æ˜¯åœ¨æµ‹è¯•æ—¶æŸäº›ç»„ä»¶ä¸å¯ç”¨æˆ–è¿è¡Œé€Ÿåº¦å¤ªæ…¢, å› è€Œä½¿ç”¨ Fake object æ¥ä»£æ›¿å®ƒä»¬.<br>è­¬å¦‚è¯´ï¼Œå®ƒå­˜åœ¨å†…å­˜ä¸­è€Œä¸æ˜¯çœŸæ­£çš„æ•°æ®åº“ä¸­ã€‚</p>
<p>3.Mock object<br>æ˜¯æŒ‡ç±»æˆ–è€…æ¥å£çš„æ¨¡æ‹Ÿå®ç°ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå¯¹è±¡ä¸­æŸä¸ªæ–¹æ³•çš„è¾“å‡ºç»“æœã€‚<br>å®é™…ä¸Š, Mock object æ˜¯ Test stub æˆ– Fake object ä¸€ç§, ä½†æ˜¯ Mock object æœ‰ Test stub/Fake object æ²¡æœ‰çš„ç‰¹æ€§, Mock object å¯ä»¥å¾ˆçµæ´»åœ°é…ç½®æ‰€è°ƒç”¨çš„æ–¹æ³•æ‰€äº§ç”Ÿçš„è¡Œä¸º, å¹¶ä¸”å®ƒå¯ä»¥è¿½è¸ªæ–¹æ³•è°ƒç”¨, ä¾‹å¦‚ä¸€ä¸ª Mock Object æ–¹æ³•è°ƒç”¨æ—¶ä¼ é€’äº†å“ªäº›å‚æ•°, æ–¹æ³•è°ƒç”¨äº†å‡ æ¬¡ç­‰.</p>
<p>4.Dummy object: åœ¨æµ‹è¯•ä¸­å¹¶ä¸ä½¿ç”¨çš„, ä½†æ˜¯ä¸ºäº†æµ‹è¯•ä»£ç èƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘/è¿è¡Œè€Œæ·»åŠ çš„å¯¹è±¡. ä¾‹å¦‚æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ª Test Double å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•, è¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ é€’å‡ ä¸ªå‚æ•°, ä½†æ˜¯å…¶ä¸­æŸä¸ªå‚æ•°æ— è®ºæ˜¯ä»€ä¹ˆå€¼éƒ½ä¸ä¼šå½±å“æµ‹è¯•çš„ç»“æœ, é‚£ä¹ˆè¿™ä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ª Dummy object.<br>Dummy object å¯ä»¥æ˜¯ä¸€ä¸ªç©ºå¼•ç”¨, ä¸€ä¸ªç©ºå¯¹è±¡æˆ–è€…æ˜¯ä¸€ä¸ªå¸¸é‡ç­‰.<br>ç®€å•çš„è¯´, Dummy object å°±æ˜¯é‚£äº›æ²¡æœ‰ä½¿ç”¨åˆ°çš„, ä»…ä»…æ˜¯ä¸ºäº†å¡«å……å‚æ•°åˆ—è¡¨çš„å¯¹è±¡.</p>
<p>5.Test Spy<br>å¯ä»¥åŒ…è£…ä¸€ä¸ªçœŸå®çš„ Java å¯¹è±¡, å¹¶è¿”å›ä¸€ä¸ªåŒ…è£…åçš„æ–°å¯¹è±¡. è‹¥æ²¡æœ‰ç‰¹åˆ«é…ç½®çš„è¯, å¯¹è¿™ä¸ªæ–°å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•è°ƒç”¨, éƒ½ä¼šå§”æ´¾ç»™å®é™…çš„ Java å¯¹è±¡.</p>
<p>mock å’Œ spy çš„åŒºåˆ«æ˜¯: mock æ˜¯æ— ä¸­ç”Ÿæœ‰åœ°ç”Ÿå‡ºä¸€ä¸ª<strong>å®Œå…¨è™šæ‹Ÿçš„å¯¹è±¡</strong>, å®ƒçš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯è™šæ‹Ÿçš„; è€Œ spy æ˜¯åœ¨ç°æœ‰ç±»çš„åŸºç¡€ä¸ŠåŒ…è£…äº†ä¸€ä¸ªå¯¹è±¡, å³å¦‚æœæˆ‘ä»¬æ²¡æœ‰é‡å†™ spy çš„æ–¹æ³•, é‚£ä¹ˆè¿™äº›æ–¹æ³•çš„å®ç°å…¶å®éƒ½æ˜¯è°ƒç”¨çš„è¢«åŒ…è£…çš„å¯¹è±¡çš„æ–¹æ³•.</p>
<p>ã€test fixtureã€‘æµ‹è¯•çš„å…ˆå†³æ¡ä»¶ï¼Œ<br>@Before åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿è¡Œå‰éƒ½ä¼šè¢«è°ƒç”¨, @After åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿è¡Œåéƒ½ä¼šè¢«è°ƒç”¨.<br>å› ä¸º @Before å’Œ @After ä¼šåœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•å‰åéƒ½ä¼šè¢«è°ƒç”¨, è€Œæœ‰æ—¶æˆ‘ä»¬ä»…ä»…éœ€è¦åœ¨æµ‹è¯•å‰è¿›è¡Œä¸€æ¬¡åˆå§‹åŒ–, è¿™æ ·çš„æƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨@BeforeClass å’Œ@AfterClass æ³¨è§£.</p>
<p>ã€test caseã€‘æµ‹è¯•ç”¨ä¾‹<br>åœ¨ JUnit 3ä¸­, æµ‹è¯•æ–¹æ³•éƒ½å¿…é¡»ä»¥ test ä¸ºå‰ç¼€, ä¸”å¿…é¡»æ˜¯ public void çš„, JUnit 4ä¹‹å, å°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶äº†, åªè¦åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ ‡æ³¨ @Test æ³¨è§£, æ–¹æ³•ç­¾åå¯ä»¥æ˜¯ä»»æ„çš„.</p>
<p>ã€æµ‹è¯•å¥—ä»¶ã€‘é€šè¿‡ TestSuit å¯¹è±¡å°†å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ç»„è£…æˆä¸€ä¸ªæµ‹è¯•å¥—ä»¶, æµ‹è¯•å¥—ä»¶æ‰¹é‡è¿è¡Œ.<br>é€šè¿‡@RunWith å’Œ@SuteClass ä¸¤ä¸ªæ³¨è§£, æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•å¥—ä»¶. é€šè¿‡@RunWith æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„è¿è¡Œå™¨, å¹¶é€šè¿‡@SuiteClasses æ³¨è§£, å°†éœ€è¦è¿›è¡Œæµ‹è¯•çš„ç±»åˆ—è¡¨ä½œä¸ºå‚æ•°ä¼ å…¥.</p>
<h3 id="Junit4æ³¨è§£"><a href="#Junit4æ³¨è§£" class="headerlink" title="Junit4æ³¨è§£"></a>Junit4æ³¨è§£</h3><p>@Test (expected = Exception.class) è¡¨ç¤ºé¢„æœŸä¼šæŠ›å‡ºException.class çš„å¼‚å¸¸</p>
<p>@Ignore å«ä¹‰æ˜¯â€œæŸäº›æ–¹æ³•å°šæœªå®Œæˆï¼Œæš‚ä¸å‚ä¸æ­¤æ¬¡æµ‹è¯•â€ã€‚è¿™æ ·çš„è¯æµ‹è¯•ç»“æœå°±ä¼šæç¤ºä½ æœ‰å‡ ä¸ªæµ‹è¯•è¢«å¿½ç•¥ï¼Œè€Œä¸æ˜¯å¤±è´¥ã€‚ä¸€æ—¦ä½ å®Œæˆäº†ç›¸åº”å‡½æ•°ï¼Œåªéœ€è¦æŠŠ@Ignoreæ³¨è§£åˆ å»ï¼Œå°±å¯ä»¥è¿›è¡Œæ­£å¸¸çš„æµ‹è¯•ã€‚</p>
<p>@Test(timeout=100) è¡¨ç¤ºé¢„æœŸæ–¹æ³•æ‰§è¡Œä¸ä¼šè¶…è¿‡ 100 æ¯«ç§’ï¼Œæ§åˆ¶æ­»å¾ªç¯</p>
<p>@Before è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ä¹‹ç±»çš„æ“ä½œ</p>
<p>@After è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œé‡Šæ”¾èµ„æºï¼Œå›æ”¶å†…å­˜ä¹‹ç±»çš„æ“</p>
<p>@BeforeClass è¡¨ç¤ºè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œæ•°æ®åº“è¿æ¥æ“ä½œï¼Œæ³¨æ„è¯¥æ³¨è§£è¿ç”¨åœ¨é™æ€æ–¹æ³•ã€‚</p>
<p>@AfterClass è¡¨ç¤ºè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ–¹æ³•ä¹‹åæ‰§è¡Œã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œæ•°æ®åº“è¿æ¥å…³é—­æ“ä½œï¼Œæ³¨æ„è¯¥æ³¨è§£è¿ç”¨åœ¨é™æ€æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import org.junit.runner.RunWith;  </span><br><span class="line">import org.junit.runners.Suite;  </span><br><span class="line">import org.junit.runners.Suite.SuiteClasses;  </span><br><span class="line">  </span><br><span class="line">@RunWith( Suite.class )  </span><br><span class="line">@SuiteClasses( &#123; JUnitTest1.class, JUnitTest2.class &#125; )  </span><br><span class="line">public class AllTests &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœ‰å¤šä¸ªæµ‹è¯•ç±», å¯ä»¥åˆå¹¶æˆä¸€ä¸ªæµ‹è¯•å¥—ä»¶è¿›è¡Œæµ‹è¯•, è¿è¡Œä¸€ä¸ª Test Suite, é‚£ä¹ˆå°±ä¼šè¿è¡Œåœ¨è¿™ä¸ª Test Suite ä¸­çš„æ‰€ç”¨çš„æµ‹è¯•.<br>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Test Suite, è¿™ä¸ª Test Suite åŒ…å«äº†ä¸¤ä¸ªæµ‹è¯•ç±»: JUnitTest1 å’Œ JUnitTest2, å› æ­¤è¿è¡Œ è¿™ä¸ª Test Suite æ—¶, å°±ä¼šè‡ªåŠ¨è¿è¡Œè¿™ä¸¤ä¸ªæµ‹è¯•ç±»äº†.</p>
<p>*åœ¨ç±»åä¸ŠæŒ‰ä¸‹command+shift+tï¼Œå°±å¯ä»¥ç”Ÿæˆå¯¹åº”æµ‹è¯•ç±»ã€‚</p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000006731125">https://segmentfault.com/a/1190000006731125</a></p>
<h2 id="2-Mockitoä¸­-Mockä¸-InjectMock"><a href="#2-Mockitoä¸­-Mockä¸-InjectMock" class="headerlink" title="2.Mockitoä¸­@Mockä¸@InjectMock"></a>2.Mockitoä¸­@Mockä¸@InjectMock</h2><p>Mockito æ˜¯ä¸€ä¸ªæµè¡Œ mock æ¡†æ¶ï¼Œå¯ä»¥å’ŒJUnitç»“åˆèµ·æ¥ä½¿ç”¨ã€‚Mockito å…è®¸ä½ åˆ›å»ºå’Œé…ç½® mock å¯¹è±¡ã€‚<br>Mockitoæ˜¯javaå•å…ƒæµ‹è¯•ä¸­ï¼Œæœ€å¸¸ç”¨çš„mckå·¥å…·ä¹‹ä¸€ï¼Œæä¾›äº†è¯¸å¤šæ‰“æ¡©æ–¹æ³•å’Œæ³¨è§£ã€‚å…¶ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ³¨è§£ï¼Œ@Mockå’Œ@InjectMockï¼Œåå­—å’Œåœ¨ä»£ç ä¸­ä½¿ç”¨ çš„ä½ç½®éƒ½å¾ˆåƒã€‚ä½†æ˜¯æ˜¯åœ¨åŠŸèƒ½ä¸Šæ— ä»»ä½•å¯ç±»æ¯”æ€§çš„å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚<br>ç¨‹åºå‘˜é€šå¸¸åˆ›é€ æ¨¡æ‹Ÿå¯¹è±¡æ¥æµ‹è¯•å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºï¼Œå¾ˆç±»ä¼¼æ±½è½¦è®¾è®¡è€…ä½¿ç”¨ç¢°æ’æµ‹è¯•å‡äººæ¥æ¨¡æ‹Ÿè½¦è¾†ç¢°æ’ä¸­äººçš„åŠ¨æ€è¡Œä¸ºã€‚</p>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨mockï¼Ÿ<br>åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæ¨¡æ‹Ÿå¯¹è±¡å¯ä»¥æ¨¡æ‹Ÿå¤æ‚çš„ã€çœŸå®çš„ï¼ˆéæ¨¡æ‹Ÿï¼‰å¯¹è±¡çš„è¡Œä¸ºï¼Œ å¦‚æœçœŸå®çš„å¯¹è±¡æ— æ³•æ”¾å…¥å•å…ƒæµ‹è¯•ä¸­ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡å°±å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å•å…ƒæµ‹è¯•çš„æ€è·¯æ˜¯åœ¨ä¸æ¶‰åŠä¾èµ–å…³ç³»çš„æƒ…å†µä¸‹æµ‹è¯•ä»£ç ï¼ˆéš”ç¦»æ€§ï¼‰ï¼Œæ‰€ä»¥æµ‹è¯•ä»£ç ä¸å…¶ä»–ç±»æˆ–è€…ç³»ç»Ÿçš„å…³ç³»åº”è¯¥å°½é‡è¢«æ¶ˆé™¤ã€‚ä¸€ä¸ªå¯è¡Œçš„æ¶ˆé™¤æ–¹æ³•æ˜¯æ›¿æ¢æ‰ä¾èµ–ç±»ï¼ˆæµ‹è¯•æ›¿æ¢ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›¿èº«æ¥æ›¿æ¢æ‰çœŸæ­£çš„ä¾èµ–å¯¹è±¡ã€‚</p>
<h3 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h3><p>@Mockï¼š<br>åœ¨Mockitoä¸­ç”¨äºåˆ›å»ºmockå¯¹è±¡ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><code>@Mock</code><br><code>private ClassName mockedObjectï¼›</code></p>
<p>ä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸ºmockedObjectï¼Œç±»å‹ä¸ºClassNameçš„mockå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰€æœ‰çš„æ–¹æ³•è¢«ç½®ç©ºï¼Œæ ¹æ®æµ‹è¯•ä»£ç é€»è¾‘çš„éœ€è¦ä½¿ç”¨.</p>
<hr>
<p>@InjectMockï¼š<br>åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œç®€å•çš„è¯´æ˜¯è¿™ä¸ªMockå¯ä»¥è°ƒç”¨çœŸå®ä»£ç çš„æ–¹æ³•ï¼Œå…¶ä½™ç”¨@Mockï¼ˆæˆ–@Spyï¼‰æ³¨è§£åˆ›å»ºçš„mockå°†è¢«æ³¨å…¥åˆ°ç”¨è¯¥å®ä¾‹ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(MockitoJUnitRunner.class)  </span><br><span class="line">public class Test &#123;  </span><br><span class="line">  </span><br><span class="line">    @InjectMocks  </span><br><span class="line">    private SomeHandler someHandler;  </span><br><span class="line">  </span><br><span class="line">    @Mock  </span><br><span class="line">    private OneDependency oneDependency; // æ­¤mockå°†è¢«æ³¨å…¥åˆ°someHandler  </span><br><span class="line"></span><br><span class="line">    // ...   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¸­ï¼Œ@InjectMockä¸‹é¢å£°æ˜äº†ä¸€ä¸ªå¾…æµ‹è¯•çš„å¯¹è±¡ï¼Œ@Mockå®šä¹‰çš„mockå¯¹è±¡å°†ä¼šè¢«æ³¨å…¥åˆ°è¿™ä¸ªå¾…æµ‹è¯•çš„å¯¹è±¡ä¸­ã€‚</p>
<hr>
<p>ğŸ¤” @Mockåˆ›å»ºåˆ›å»ºmockå¯¹è±¡ä¹‹åï¼Œåœ¨å¯¹å…·ä½“çš„æ–¹æ³•æ‰“æ¡©ä¹‹å‰ï¼Œmockå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•å…¨è¢«ç½®ç©ºï¼ˆ0æˆ–è€…nullï¼‰ï¼Œæ‰€ä»¥ï¼Œå¯¹åº”çš„æ–¹æ³•æ˜¯ä¸è¿è¡Œçš„ã€‚<br>*mockå¯¹è±¡åˆ›å»ºä¹‹åï¼Œè¢«æµ‹è¯•ç±»ä¸­çš„è¯¥å¯¹è±¡çš„æ–¹æ³•å°±éƒ½ä¸æ‰§è¡Œäº†ã€‚</p>
<p>ğŸ¤” @Spyå¯ä»¥åˆ›å»ºçš„å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•éƒ½ä¼šæŒ‰ç…§åŸæ–¹æ³•çš„é€»è¾‘æ‰§è¡Œï¼Œç›´åˆ°è¢«æ‰“æ¡©è¿”å›æŸä¸ªå…·ä½“çš„å€¼ã€‚</p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/langren1992/p/9681600.html">https://www.cnblogs.com/langren1992/p/9681600.html</a></p>
<h3 id="mockä½¿ç”¨"><a href="#mockä½¿ç”¨" class="headerlink" title="mockä½¿ç”¨"></a>mockä½¿ç”¨</h3><p>mavenæ³¨å…¥ä¾èµ–ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨æ³¨è§£ï¼Œé‚£ä¹ˆå¿…é¡»è¦å®ä¾‹åŒ– mock å¯¹è±¡ã€‚Mockito åœ¨é‡åˆ°ä½¿ç”¨æ³¨è§£çš„å­—æ®µçš„æ—¶å€™å¿…é¡»ä½¿ç”¨@RunWith(MockitoJUnitRunner.class) æˆ– MockitoAnnotations.initMocks(this)è¿›è¡Œmocksçš„åˆå§‹åŒ–å’Œæ³¨å…¥ã€‚<br>(å¯ä»¥å†™ä¸€ä¸ªinitå‡½æ•°ï¼ŒåŠ @Beforeæ³¨è§£)</p>
<h4 id="é…ç½®mock"><a href="#é…ç½®mock" class="headerlink" title="é…ç½®mock"></a>é…ç½®mock</h4><p>when(â€¦â€‹.).thenReturn(â€¦â€‹.)å¯ä»¥è¢«ç”¨æ¥å®šä¹‰å½“æ¡ä»¶æ»¡è¶³æ—¶å‡½æ•°çš„è¿”å›å€¼ï¼Œå½“å¤šæ¬¡è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼ŒMockito ä¼šæ ¹æ®ä½ å®šä¹‰çš„å…ˆåé¡ºåºæ¥è¿”å›è¿”å›å€¼ï¼ˆå¤šæ¬¡è°ƒç”¨ï¼‰ã€‚Mocks è¿˜å¯ä»¥æ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒæ¥å®šä¹‰ä¸åŒçš„è¿”å›å€¼ã€‚è­¬å¦‚è¯´ä½ çš„å‡½æ•°å¯ä»¥å°†anyString æˆ–è€… anyIntä½œä¸ºè¾“å…¥å‚æ•°ï¼Œç„¶åå®šä¹‰å…¶ç‰¹å®šçš„æ”¾å›å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void test1()  &#123;</span><br><span class="line">        //  åˆ›å»º mock</span><br><span class="line">        MyClass test = Mockito.mock(MyClass.class);</span><br><span class="line"></span><br><span class="line">        // è‡ªå®šä¹‰ getUniqueId() çš„è¿”å›å€¼</span><br><span class="line">        when(test.getUniqueId(Mockito.anyLong())).thenReturn(43);</span><br><span class="line"></span><br><span class="line">        // åœ¨æµ‹è¯•ä¸­ä½¿ç”¨mockå¯¹è±¡</span><br><span class="line">        assertEquals(test.getUniqueId(), 43);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è¿”å›å¤šä¸ªå€¼</span><br><span class="line">@Test</span><br><span class="line">public void testMoreThanOneReturnValue()  &#123;</span><br><span class="line">        Iterator i= mock(Iterator.class);</span><br><span class="line">        when(i.next()).thenReturn(&quot;Mockito&quot;).thenReturn(&quot;rocks&quot;);</span><br><span class="line">        String result=i.next()+&quot; &quot;+i.next();</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(&quot;Mockito rocks&quot;, result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¦‚ä½•æ ¹æ®è¾“å…¥æ¥è¿”å›å€¼</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(&quot;Mockito&quot;)).thenReturn(1);</span><br><span class="line">        when(c.compareTo(&quot;Eclipse&quot;)).thenReturn(2);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(1,c.compareTo(&quot;Mockito&quot;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¦‚ä½•è®©è¿”å›å€¼ä¸ä¾èµ–äºè¾“å…¥</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueInDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(anyInt())).thenReturn(-1);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(-1 ,c.compareTo(9));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®å‚æ•°ç±»å‹æ¥è¿”å›å€¼</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueInDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(isA(Todo.class))).thenReturn(0);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        Todo todo = new Todo(5);</span><br><span class="line">        assertEquals(todo ,c.compareTo(new Todo(1)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="æ— è¿”å›å€¼çš„æ–¹æ³•"><a href="#æ— è¿”å›å€¼çš„æ–¹æ³•" class="headerlink" title="æ— è¿”å›å€¼çš„æ–¹æ³•"></a>æ— è¿”å›å€¼çš„æ–¹æ³•</h4><p>mokitoä¸­ï¼Œå¯¹æ— è¿”å›çš„å‡½æ•°ä»€ä¹ˆéƒ½ä¸åš<br>Mokito.doNothing().when(å¯¹è±¡).å‡½æ•°();</p>
<p>å¯¹äºæ— è¿”å›å€¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨doReturn(â€¦â€‹).when(â€¦â€‹).methodCallæ¥è·å¾—ç±»ä¼¼çš„æ•ˆæœã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³åœ¨è°ƒç”¨æŸäº›æ— è¿”å›å€¼å‡½æ•°çš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨doThrow æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢æµ‹è¯•ç”¨ä¾‹æè¿°äº†å¦‚ä½•ä½¿ç”¨doThrow()æ–¹æ³•</span><br><span class="line"></span><br><span class="line">@Test(expected=IOException.class)</span><br><span class="line">public void testForIOException() &#123;</span><br><span class="line">        // åˆ›å»ºå¹¶é…ç½® mock å¯¹è±¡</span><br><span class="line">        OutputStream mockStream = mock(OutputStream.class);</span><br><span class="line">        doThrow(new IOException()).when(mockStream).close();</span><br><span class="line"></span><br><span class="line">        // ä½¿ç”¨ mock</span><br><span class="line">        OutputStreamWriter streamWriter= new OutputStreamWriter(mockStream);</span><br><span class="line">        streamWriter.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="éªŒè¯æ˜¯å¦è°ƒç”¨"><a href="#éªŒè¯æ˜¯å¦è°ƒç”¨" class="headerlink" title="éªŒè¯æ˜¯å¦è°ƒç”¨"></a>éªŒè¯æ˜¯å¦è°ƒç”¨</h4><p>éªŒè¯ query æ–¹æ³•æ˜¯å¦è¢« MyDatabase çš„ mock å¯¹è±¡è°ƒç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">public class MockitoTest  &#123;</span><br><span class="line"></span><br><span class="line">        @Mock</span><br><span class="line">        MyDatabase databaseMock; (1)</span><br><span class="line"></span><br><span class="line">        @Rule public MockitoRule mockitoRule = MockitoJUnit.rule(); (2)</span><br><span class="line"></span><br><span class="line">        @Test</span><br><span class="line">        public void testQuery()  &#123;</span><br><span class="line">                ClassToTest t  = new ClassToTest(databaseMock); (3)</span><br><span class="line">                boolean check = t.query(&quot;* from t&quot;); (4)</span><br><span class="line">                assertTrue(check); (5)</span><br><span class="line">                verify(databaseMock).query(&quot;* from t&quot;); (6)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mockito ä¼šè·Ÿè¸ª mock å¯¹è±¡é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•å’Œå˜é‡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ¥éªŒè¯å‡½æ•°åœ¨ä¼ å…¥ç‰¹å®šå‚æ•°çš„æ—¶å€™æ˜¯å¦è¢«è°ƒç”¨ã€‚è¿™ç§æ–¹å¼çš„æµ‹è¯•ç§°è¡Œä¸ºæµ‹è¯•ï¼Œè¡Œä¸ºæµ‹è¯•å¹¶ä¸ä¼šæ£€æŸ¥å‡½æ•°çš„è¿”å›å€¼ï¼Œè€Œæ˜¯æ£€æŸ¥åœ¨ä¼ å…¥æ­£ç¡®å‚æ•°æ—¶å€™å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void testVerify()  &#123;</span><br><span class="line">        // åˆ›å»ºå¹¶é…ç½® mock å¯¹è±¡</span><br><span class="line">        MyClass test = Mockito.mock(MyClass.class);</span><br><span class="line">        when(test.getUniqueId()).thenReturn(43);</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨mockå¯¹è±¡é‡Œé¢çš„æ–¹æ³•å¹¶ä¼ å…¥å‚æ•°ä¸º12</span><br><span class="line">        test.testing(12);</span><br><span class="line">        test.getUniqueId();</span><br><span class="line">        test.getUniqueId();</span><br><span class="line"></span><br><span class="line">        // æŸ¥çœ‹åœ¨ä¼ å…¥å‚æ•°ä¸º12çš„æ—¶å€™æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨</span><br><span class="line">        verify(test).testing(Matchers.eq(12));</span><br><span class="line"></span><br><span class="line">        // æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨ä¸¤æ¬¡</span><br><span class="line">        verify(test, times(2)).getUniqueId();</span><br><span class="line"></span><br><span class="line">        // å…¶ä»–ç”¨æ¥éªŒè¯å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨çš„æ–¹æ³•</span><br><span class="line">        verify(mock, never()).someMethod(&quot;never called&quot;);</span><br><span class="line">        verify(mock, atLeastOnce()).someMethod(&quot;called at least once&quot;);</span><br><span class="line">        verify(mock, atLeast(2)).someMethod(&quot;called at least twice&quot;);</span><br><span class="line">        verify(mock, times(5)).someMethod(&quot;called five times&quot;);</span><br><span class="line">        verify(mock, atMost(3)).someMethod(&quot;called at most 3 times&quot;);</span><br><span class="line">&#125;</span><br><span class="line">å‰é¢éƒ½åŠ ä¸ªMockito.</span><br></pre></td></tr></table></figure>

<h3 id="spyä½¿ç”¨"><a href="#spyä½¿ç”¨" class="headerlink" title="spyä½¿ç”¨"></a>spyä½¿ç”¨</h3><p>@Spyæˆ–è€…spy()æ–¹æ³•å¯ä»¥è¢«ç”¨æ¥å°è£… java å¯¹è±¡ã€‚è¢«å°è£…åï¼Œé™¤éç‰¹æ®Šå£°æ˜ï¼ˆæ‰“æ¡© stubï¼‰ï¼Œå¦åˆ™éƒ½ä¼šçœŸæ­£çš„è°ƒç”¨å¯¹è±¡é‡Œé¢çš„æ¯ä¸€ä¸ªæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">// Lets mock a LinkedList</span><br><span class="line">List list = new LinkedList();</span><br><span class="line">List spy = spy(list);</span><br><span class="line"></span><br><span class="line">// å¯ç”¨ doReturn() æ¥æ‰“æ¡©</span><br><span class="line">doReturn(&quot;foo&quot;).when(spy).get(0);</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢ä»£ç ä¸ç”Ÿæ•ˆ</span><br><span class="line">// çœŸæ­£çš„æ–¹æ³•ä¼šè¢«è°ƒç”¨</span><br><span class="line">// å°†ä¼šæŠ›å‡º IndexOutOfBoundsException çš„å¼‚å¸¸ï¼Œå› ä¸º List ä¸ºç©º</span><br><span class="line">when(spy.get(0)).thenReturn(&quot;foo&quot;);</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f6e3ab9719b9">https://www.jianshu.com/p/f6e3ab9719b9</a><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7b67806b74f6">https://www.jianshu.com/p/7b67806b74f6</a></p>
<h2 id="PowerMockRunner-å’Œ-MockitoJUnitRunner"><a href="#PowerMockRunner-å’Œ-MockitoJUnitRunner" class="headerlink" title="PowerMockRunner å’Œ MockitoJUnitRunner"></a>PowerMockRunner å’Œ MockitoJUnitRunner</h2><p>å…³äºæ‰“æ¡©ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/moshowgame/article/details/100983711">https://blog.csdn.net/moshowgame/article/details/100983711</a></p>
<h2 id="when-thenReturn-å’Œ-doReturn-when-åŒºåˆ«"><a href="#when-thenReturn-å’Œ-doReturn-when-åŒºåˆ«" class="headerlink" title="when().thenReturn() å’Œ doReturn().when() åŒºåˆ«"></a>when().thenReturn() å’Œ doReturn().when() åŒºåˆ«</h2><p>ä½¿ç”¨@Mockæ—¶å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä½†æ˜¯@Spyæ—¶ï¼Œå®ƒä»¬çš„è°ƒç”¨ç»“æœä¸åŒã€‚<br>1.when().thenReturn() ä¼šè°ƒç”¨çœŸå®çš„æ–¹æ³•ï¼Œå®¹æ˜“æŠ›å‡ºå¼‚å¸¸<br>2.doReturn().when() ä¸ä¼šè°ƒç”¨çœŸå®æ–¹æ³•</p>
<h2 id="PowerMockito"><a href="#PowerMockito" class="headerlink" title="PowerMockito"></a>PowerMockito</h2><p>PowerMockæ‰©å±•äº†EasyMockå’ŒMockitoæ¡†æ¶ï¼Œå¢åŠ äº†å¯¹staticå’Œfinalæ–¹æ³•mockæ”¯æŒç­‰åŠŸèƒ½.<br>PowerMockæœ‰ä¸¤ä¸ªé‡è¦çš„æ³¨è§£ï¼š<br> @RunWith(PowerMockRunner.class)<br> @prepareForTest({MyObject.class})<br> @PrepareForTestæ³¨è§£å’Œ@RunWithæ³¨è§£æ˜¯ç»“åˆä½¿ç”¨çš„ï¼Œä¸è¦å•ç‹¬ä½¿ç”¨@PrepareForTestï¼Œå¦åˆ™ä¸èµ·ä½œç”¨ã€‚å½“ä½¿ç”¨PowerMockå»mocké™æ€ï¼Œfinalæˆ–è€…ç§æœ‰æ–¹æ³•æ—¶ï¼Œéœ€è¦åŠ ä¸Šè¿™ä¸¤ä¸ªæ³¨è§£ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/KeeYang108/article/details/79891588">https://blog.csdn.net/KeeYang108/article/details/79891588</a></p>
<h2 id="Mockæµ‹è¯•è¸©å‘"><a href="#Mockæµ‹è¯•è¸©å‘" class="headerlink" title="Mockæµ‹è¯•è¸©å‘"></a>Mockæµ‹è¯•è¸©å‘</h2><p>ä»Šå¤©å†™äº†ä¸€ä¸ªcontrolå±‚çš„mockå•å…ƒæµ‹è¯•ï¼Œå› ä¸ºè¦è°ƒserviceå±‚ï¼ˆå®ç°ç±»ï¼‰çš„æ–¹æ³•ï¼Œå°±æŠŠserviceæ¥å£åšäº†ä¸€ä¸ªmockï¼Œæµ‹è¯•æ—¶å€™ä¸€ç›´åŒ…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚<br>mock serviceå®ç°ç±»ä¹‹åï¼Œæ­£å¸¸ã€‚</p>
<p>æ›´æ–°ï¼šä»Šå¤©@Mockçš„æ¥å£ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¥‡æ€ªäº†ï¼š<br>mockæ¥å£å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸çš„caseï¼šæ˜¯serviceï¼ˆ.ä¹‹å‰çš„ï¼‰æ˜¯å®ç°ç±»ï¼Œ@Autowiredçš„ä¹Ÿæ˜¯å®ç°ç±»ï¼Œæ‰€ä»¥mockæ¥å£æ²¡ç”¨ï¼Ÿ<br>è€Œä»Šå¤©mockæ¥å£ï¼Œè¢«æµ‹è¯•ç±»ä¸­.ä¹‹å‰çš„æ˜¯æ¥å£ï¼Œ@Autowiredçš„ä¹Ÿæ˜¯æ¥å£ï¼Œæ‰€ä»¥æ²¡æ¯›ç—…ã€‚</p>
<p>åŠ @RunWith(PowerMockRunner.class)<br>è¦æµ‹è¯•çš„ç±»åŠ @InjectMocks</p>
<p>1.serviceå®ç°ç±»ä¸åŠ mockï¼Œåˆ°æŒ‡å®šæ–¹æ³•ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œserviceå¯¹è±¡ä¸ºç©º<br>2.å¦‚æœserviceæ–¹æ³•æ— è¿”å›ï¼Œå¯ä»¥ä¸æ‰“æ¡©ï¼Œå¦‚æœæœ‰è¿”å›ï¼Œæœ€å¥½æ‰“ä¸ªæ¡©ã€‚<br>3.æœ‰è¿”å›çš„æ‰“äº†æ¡©ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„è¾“å…¥ï¼Œè¿”å›ä¸åŒçš„ç»“æœã€‚æœ‰è¿”å›å¦‚æœä¸æ‰“æ¡©ï¼Œç›¸å½“äºè¿”å›çš„æ˜¯nullï¼Œè¿”å›å¦‚æœè¢«åé¢ç”¨åˆ°ï¼Œå®¹æ˜“æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h2 id="Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸"><a href="#Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸" class="headerlink" title="Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸"></a>Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸</h2><p>mockæµ‹è¯•çš„è¢«æµ‹è¯•ç±»ï¼ˆ@InjectMockï¼‰ä¸­çš„å±æ€§ä¸€èˆ¬ä¸ºnullï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸åŠ å°±åœ¨è¢«æµ‹è¯•ç±»ä¸­è°ƒç”¨å±æ€§å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼ŒæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºå±æ€§å¯¹è±¡æ˜¯nullã€‚<br>å°†å±æ€§å¯¹è±¡åœ¨Testä¸­æ·»åŠ @Mockä¸ºmockå¯¹è±¡ï¼Œç›´æ¥å¿½ç•¥å±æ€§å¯¹è±¡æ–¹æ³•ï¼Œä¸è¿›å…¥æ‰§è¡Œã€‚<br>å°†å±æ€§å¯¹è±¡åœ¨Testä¸­æ·»åŠ @Spyä¸ºspyå¯¹è±¡ï¼Œä¼šè¿›å…¥è¯¥æ–¹æ³•ä¸­ï¼Œä½†æ˜¯åªé™äºä¸€å±‚ï¼Œå†è¿›å…¥å°±ä¸è¡Œäº†ï¼Œè¿˜æ˜¯ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<hr>
<h2 id="å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤"><a href="#å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤" class="headerlink" title="å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤"></a>å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤</h2><p>Jnitï¼šä¸€ä¸ªjavaè¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œç¼–å†™å’Œè¿è¡Œå¯é‡å¤çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>
<p>Mockitoï¼šå•å…ƒæµ‹è¯•æ¨¡æ‹Ÿæ¡†æ¶ï¼Œé‡‡ç”¨æ¨¡æ‹ŸæŠ€æœ¯ï¼Œæ¨¡æ‹Ÿåº”ç”¨ä¸­ä¾èµ–çš„å¤æ‚å¯¹è±¡ï¼ŒæŠŠæµ‹è¯•å¯¹è±¡å’Œä¾èµ–å¯¹è±¡éš”ç¦»å¼€ã€‚</p>
<p>PowerMockï¼šåœ¨Mockitoçš„åŸºç¡€ä¸Šä½œå‡ºæ‰©å±•ã€‚</p>
<p>å•å…ƒæµ‹è¯•æ­¥éª¤ï¼šå®šä¹‰å¯¹è±¡ - æ¨¡æ‹Ÿæ–¹æ³• - è°ƒç”¨æ–¹æ³• - éªŒè¯æ–¹æ³• ï¼ˆç¬¬äºŒæ­¥å’Œç¬¬å››æ­¥æ˜¯æœ‰å¤–éƒ¨ä¾èµ–æ—¶éœ€è¦mockä½¿ç”¨çš„ï¼‰</p>
<p>1ã€å®šä¹‰æµ‹è¯•å¯¹è±¡ï¼ˆnew/Mockito.spy/@Spy/@InjectMocksï¼‰<br>2ã€æ¨¡æ‹Ÿä¾èµ–å¯¹è±¡ï¼ˆç›´æ¥æ„å»ºå¯¹è±¡/Jsonååºåˆ—åŒ–å¯¹è±¡/@Mock/@Spyï¼‰<br>3ã€æ³¨å…¥ä¾èµ–å¯¹è±¡ï¼ˆset/Whitebox/@Mockï¼‰<br>4ã€æ¨¡æ‹Ÿä¾èµ–æ–¹æ³•<br>5ã€è°ƒç”¨è¢«æµ‹æ–¹æ³•ï¼ˆåˆ†ä¸ºæ„é€ æ–¹æ³•ã€æ™®é€šæ–¹æ³•ã€é™æ€æ–¹æ³•ï¼‰ï¼ˆéƒ½åˆ†ä¸ºæœ‰æƒé™å’Œæ— æƒé™ï¼‰ï¼ˆæœ‰æƒé™ç›´æ¥è°ƒç”¨ï¼Œæ— æƒé™ç”¨ï¼š<code>Whitebox.invokeMethod(userService, &quot;isUser&quot;, uid)</code>ï¼‰<br>6ã€éªŒè¯ä¾èµ–æ–¹æ³•ï¼ˆMockito.verify(â€¦)ï¼‰ï¼ˆç”¨ArgumentCaptor/@Captoræ•è·å‚æ•°ï¼‰<br>7ã€éªŒè¯æ•°æ®å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//éªŒè¯å¯¹è±¡ä¸ºç©º</span><br><span class="line">Assert.assertNull(&quot;å¿…é¡»ä¸ºç©ºï¼&quot;, uid);</span><br><span class="line">//éªŒè¯å¯¹è±¡éç©º</span><br><span class="line">Assert.assertNotNull(&quot;ä¸èƒ½ä¸ºç©ºï¼&quot;, uid);</span><br><span class="line">//éªŒè¯ä¸ºçœŸ</span><br><span class="line">Assert.assertTrue(&quot;è¿”å›å¿…é¡»ä¸ºçœŸ&quot;, isSuper);</span><br><span class="line">//éªŒè¯ä¸ºå‡</span><br><span class="line">Assert.assertFalse(&quot;è¿”å›å¿…é¡»ä¸ºå‡&quot;, isSuper);</span><br><span class="line">//éªŒè¯æ•°æ®å¯¹è±¡æ˜¯å¦ä¸€è‡´</span><br><span class="line">Assert.assertSame(&quot;ç”¨æˆ·å¿…é¡»ä¸€è‡´&quot;, exceptId, uid);</span><br><span class="line">//éªŒè¯æ•°æ®å¯¹è±¡æ˜¯å¦ä¸€è‡´</span><br><span class="line">Assert.assertNotSame(&quot;ç”¨æˆ·ä¸èƒ½ä¸€è‡´&quot;, exceptId, uid);</span><br><span class="line">//éªŒè¯ç®€å•æ•°æ®å¯¹è±¡</span><br><span class="line">Assert.assertNotEquals(&quot;ç”¨æˆ·åç§°ä¸ä¸€è‡´&quot;, &quot;admin&quot;, user)</span><br><span class="line">//éªŒè¯ç®€å•æ•°ç»„æˆ–é›†åˆå¯¹è±¡</span><br><span class="line">Assert.assertArrayEquals</span><br><span class="line">//å¯¹äºå¤æ‚æ•°æ®ï¼Œå¯ä»¥å…ˆåºåˆ—åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œç„¶åAssert.assertEquals</span><br></pre></td></tr></table></figure>
<p>éªŒè¯è·‘å‡ºå¼‚å¸¸ï¼šå¯ä»¥ç”¨@Test(expected=ExampleException.class)ï¼Œä½†æ˜¯ä¸€æ—¦å†…éƒ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œæ•´ä¸ªæ–¹æ³•å°±è¿”å›ï¼Œåé¢çš„éªŒè¯æ²¡æ³•æ‰§è¡Œã€‚@Ruleæ³¨è§£å®ç°ã€‚æ¨èä½¿ç”¨Assert</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ExampleException e = Assert.assertThrows(&quot;å¼‚å¸¸ç±»å‹ä¸ä¸€è‡´&quot;, ExampleException.class, ()-&gt;userService.getUser(uid));</span><br><span class="line">Assert.assertEquals(&quot;å¼‚å¸¸æ¶ˆæ¯ä¸ä¸€è‡´&quot;, exceptString, e.getMessage());</span><br></pre></td></tr></table></figure>
<p>8ã€éªŒè¯ä¾èµ–å¯¹è±¡ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰<br><code>Mockito.verifyNotInteractions</code></p>
<p>âœ…Mockitoçš„anyç›¸å…³çš„å‚æ•°åŒ¹é…æ–¹æ³•ä¸æ”¯æŒå¯ç©ºå‚æ•°å’Œç©ºå‚æ•°ï¼Œåº”è¯¥ç”¨nullableæ–¹æ³•ã€‚<br>âœ…é‡‡ç”¨Mockitoçš„å‚æ•°åŒ¹é…æ–¹æ³•æ—¶ï¼Œå…¶ä»–å‚æ•°ä¸èƒ½ç›´æ¥ç”¨å¸¸é‡æˆ–å˜é‡ï¼Œåº”è¯¥ç”¨Mockitoçš„eqæ–¹æ³•ã€‚</p>
<h2 id="Mocké™æ€æ–¹æ³•"><a href="#Mocké™æ€æ–¹æ³•" class="headerlink" title="Mocké™æ€æ–¹æ³•"></a>Mocké™æ€æ–¹æ³•</h2><p>é€šè¿‡PowerMockito.mockStatic() å¯¹é™æ€æ–¹æ³•è¿›è¡Œmockã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.powermock&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.powermock&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.commons.lang3.StringUtils;</span><br><span class="line">import org.junit.jupiter.api.Assertions;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.powermock.api.mockito.PowerMockito;</span><br><span class="line">import org.powermock.core.classloader.annotations.PowerMockIgnore;</span><br><span class="line">import org.powermock.core.classloader.annotations.PrepareForTest;</span><br><span class="line">import org.powermock.modules.junit4.PowerMockRunner;</span><br><span class="line"> </span><br><span class="line">@RunWith(PowerMockRunner.class)</span><br><span class="line">@PrepareForTest(StringUtils.class)  //å¤šä¸ªé™æ€æ–¹æ³•çš„è¯&#123;1,2&#125;</span><br><span class="line">//@PowerMockIgnore(&quot;javax.crypto.*&quot;)</span><br><span class="line">public class MyTest &#123;</span><br><span class="line"> </span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        //æ¨¡æ‹Ÿä¾èµ–æ–¹æ³•</span><br><span class="line">        PowerMockito.mockStatic(StringUtils.class);</span><br><span class="line">        PowerMockito.when(StringUtils.isEmpty(&quot;empty&quot;)).thenReturn(true);</span><br><span class="line">        Assertions.assertTrue(StringUtils.isEmpty(&quot;empty&quot;));</span><br><span class="line">        //éªŒè¯ä¾èµ–æ–¹æ³•è¢«è°ƒç”¨</span><br><span class="line">        PowerMockito.verifyStatic(StringUtils.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/q2878948/article/details/124862699">https://blog.csdn.net/q2878948/article/details/124862699</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34497300/article/details/119774225">https://blog.csdn.net/qq_34497300/article/details/119774225</a></p>
<h2 id="Mockç§æœ‰æ–¹æ³•"><a href="#Mockç§æœ‰æ–¹æ³•" class="headerlink" title="Mockç§æœ‰æ–¹æ³•"></a>Mockç§æœ‰æ–¹æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆ@RunWith(PowerMockRunner.class)</span><br><span class="line">æŠŠç§æœ‰æ–¹æ³•æ‰€åœ¨ç±»æ”¾åœ¨@PrepareForTest()ä¸­</span><br><span class="line">//æ¨¡æ‹Ÿç§æœ‰ä¾èµ–æ–¹æ³•</span><br><span class="line">PowerMockito.doReturn(true).when(MyService.class, &quot;myFunc&quot;, myParam);</span><br><span class="line">PowerMockito.when(MyService.class, &quot;myFunc&quot;, myParam).thenReturn(true);</span><br><span class="line">//éªŒè¯ç§æœ‰æ–¹æ³•è°ƒç”¨</span><br><span class="line">PowerMockito.verifyPrivate(myClass, times(1)).invoke(&quot;myfunc&quot;, any(List.class))</span><br></pre></td></tr></table></figure>

<p>âš ï¸æƒ³mockè¢«éªŒè¯ç±»(@InjectMock)çš„ç§æœ‰æ–¹æ³•æ˜¯ä¸è¡Œçš„ã€‚åªèƒ½mockæ³¨å…¥ç±»çš„ç§æœ‰æ–¹æ³•ã€‚</p>
<h2 id="Mockè¢«æµ‹è¯•ç±»çš„å…¶ä»–publicæ–¹æ³•"><a href="#Mockè¢«æµ‹è¯•ç±»çš„å…¶ä»–publicæ–¹æ³•" class="headerlink" title="Mockè¢«æµ‹è¯•ç±»çš„å…¶ä»–publicæ–¹æ³•"></a>Mockè¢«æµ‹è¯•ç±»çš„å…¶ä»–publicæ–¹æ³•</h2><p>ç›´æ¥ç”¨Mockito.whenæ˜¯ä¸è¡Œï¼Œä¼šæŠ¥ç©ºæŒ‡é’ˆã€‚</p>
<p>è¿˜æ²¡æå‡ºæ¥ã€‚</p>
<p>Javaä¸­ä½¿ç”¨PowerMockito mock staticæ–¹æ³•/newå¯¹è±¡/mockå¯¹è±¡çš„publicæˆ–privateæ–¹æ³•çš„ç®€å•ç¤ºä¾‹ï¼š<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/epic358/p/16559549.html">https://www.cnblogs.com/epic358/p/16559549.html</a></p>
<h2 id="Mockæµ‹è¯•ä¿®æ”¹æ–¹æ³•çš„å…¥å‚"><a href="#Mockæµ‹è¯•ä¿®æ”¹æ–¹æ³•çš„å…¥å‚" class="headerlink" title="Mockæµ‹è¯•ä¿®æ”¹æ–¹æ³•çš„å…¥å‚"></a>Mockæµ‹è¯•ä¿®æ”¹æ–¹æ³•çš„å…¥å‚</h2><p>å¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œç›´æ¥ä½¿ç”¨Mockito.when().thenReturn()çš„æ–¹å¼Mockå³å¯ï¼Œä½†æ˜¯å¯¹äºæ²¡æœ‰è¿”å›å€¼çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨æ–¹æ³•å†…éƒ¨å´å¯¹æ–¹æ³•çš„å…¥å‚åšäº†ä¸€äº›é€»è¾‘çš„æ–¹æ³•ï¼Œå°±ä¸èƒ½å†ç”¨è¿™ç§æ–¹å¼ï¼Œåº”è¯¥ç”¨å¦å¤–ä¸€ä¸ªMockæ–¹æ³•ï¼Œå³doNothingã€‚</p>
<p>Mockçš„æ—¶å€™ï¼Œé¦–å…ˆåŒ¹é…å‚æ•°ï¼Œç„¶ååœ¨ArgumentMatcherä¸­ä¿®æ”¹å‚æ•°å³å¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// mockæ–¹å¼ä¿®æ”¹æ–¹æ³•å…¥å‚</span><br><span class="line">doNothing().when(userService).service(any(), argThat(new ArgumentMatcher&lt;UserResponse&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean matches(UserResponse response) &#123;</span><br><span class="line">        ImportInfo importInfo = new ImportInfo();</span><br><span class="line">        importInfo.setStatus(&quot;APPROVING&quot;);</span><br><span class="line">        // ä¿®æ”¹å…¥å‚çš„å±æ€§</span><br><span class="line">        response.setImportInfo(importInfo);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;));</span><br><span class="line">Request request = new Request();</span><br><span class="line">Response response = new Response();</span><br><span class="line">// è¿™ä¸ªæ˜¯æˆ‘ä»¬è¦éªŒè¯çš„ä¸»æ–¹æ³•</span><br><span class="line">handler.handle(request, response);</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.wxxblog.com/article/5">https://www.wxxblog.com/article/5</a></p>
<h2 id="å•å…ƒæµ‹è¯•é£æ ¼"><a href="#å•å…ƒæµ‹è¯•é£æ ¼" class="headerlink" title="å•å…ƒæµ‹è¯•é£æ ¼"></a>å•å…ƒæµ‹è¯•é£æ ¼</h2><p>å•å…ƒæµ‹è¯•çš„æ„ä¹‰åœ¨äºéªŒè¯ä¸šåŠ¡ä»£ç ï¼Œé«˜è¦†ç›–ç‡+å¯è¯»æ€§ = é«˜ä»·å€¼ã€‚é«˜è¦†ç›–ç‡åŒ…æ‹¬å¯¹ä»£ç çš„è¦†ç›–ï¼Œä¹ŸåŒ…æ‹¬å¯¹æµ‹è¯•ç”¨ä¾‹çš„è¦†ç›–ã€‚</p>
<p>ä¸€ä¸ªæ–¹æ³•è¦æµ‹è¯•å¤šç§æµ‹è¯•åœºæ™¯çš„è¯ï¼Œå°±å†™å¤šä¸ªmockæ–¹æ³•ï¼Œä¸€ä¸ªå•ä¾§æ–¹æ³•åªé’ˆå¯¹ä¸€ä¸ªè¡Œä¸ºã€‚ä½†æ˜¯çœ‹ï¼Œæœ‰äº›å…¬å…±çš„mockæ‰“æ¡©å¯ä»¥æå–å‡ºæ¥ï¼Œå†™æˆä¸€ä¸ªå…¬å…±çš„ç§æœ‰æ–¹æ³•ï¼Œæˆ–è€…å†™ä¸€ä¸ªinitæ–¹æ³•ï¼Œç”¨@Beforeæ³¨è§£ä¿®é¥°ï¼Œåœ¨è¿è¡Œæµ‹è¯•æ–¹æ³•æ—¶å°±æå‰æ‰“æ¡©ã€‚</p>
<p>æ¨èçš„é£æ ¼ï¼š<br>1.ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä»…è°ƒç”¨ä¸€æ¬¡è¢«æµ‹æ–¹æ³•<br>2.è‡³å°‘ä¸€ä¸ªæ­£ä¾‹çš„æµ‹è¯•ç”¨ä¾‹<br>3ï¼Œæå–å…¬å…±çš„mockæ’æ¡©<br>4.å¼‚å¸¸æµçš„æµ‹è¯•ä¸­ï¼Œåªå¼•å…¥ä¸€ç§å¼‚å¸¸çš„mocké‡å†™<br>5.åŠ æ³¨é‡Šï¼šæµ‹è¯•ä»€ä¹ˆåœºæ™¯ï¼ŒæœŸæœ›ä»€ä¹ˆç»“æœ</p>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>1ã€Mockito.anyString ä»€ä¹ˆçš„ï¼Œä¸èƒ½å’Œå®é™…çš„å‚æ•°ä¸€èµ·ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„è¾“å…¥ã€‚<br>ä¼šæŠ¥é”™ï¼šInvalidUseOfMatchersExceptionã€‚</p>
<p>2ã€æ¥å£çš„å•å…ƒæµ‹è¯•ç±»ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå®ç°ç±»å°±ä¸€ä¸ªå•å…ƒæµ‹è¯•ç±»ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/13/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/13/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/redis/" class="post-title-link" itemprop="url">redis</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-13 21:58:17" itemprop="dateCreated datePublished" datetime="2022-04-13T21:58:17+08:00">2022-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-28 17:51:18" itemprop="dateModified" datetime="2022-11-28T17:51:18+08:00">2022-11-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åç«¯å¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h4><p>redisï¼šå†…å­˜å­˜å‚¨ï¼ˆé€Ÿåº¦å¿«ï¼‰ã€è¿œç¨‹æ“ä½œï¼ˆå¯ä»¥ä¸å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼‰ã€æŒä¹…åŒ–ï¼ˆæœåŠ¡å™¨é‡å¯å¯ä¿æŒé‡å¯å‰çš„æ•°æ®ï¼‰ã€å¯æ‰©å±•ï¼ˆä¸»ä»å¤åˆ¶ã€åˆ†ç‰‡ï¼‰</p>
<h4 id="macå®‰è£…redis"><a href="#macå®‰è£…redis" class="headerlink" title="macå®‰è£…redis"></a>macå®‰è£…redis</h4><p>âœ…brew install redis å®‰è£…<br>âœ…brew info redis æŸ¥çœ‹å®‰è£…è·¯å¾„<br>âœ…å¯åŠ¨redisï¼š<br>æ–¹å¼ä¸€ï¼šä½¿ç”¨brewå¯åŠ¨ brew services start redis<br>æ–¹å¼äºŒï¼šè¿›å…¥redisçš„binç›®å½•ï¼Œè¾“å…¥redis-server<br>âœ…å…³é—­redisæœåŠ¡<br>æ–¹å¼ä¸€ï¼šredis-cli SHUTDOWN<br>æ–¹å¼äºŒï¼šredis-cliè¿›å…¥å†è¾“å…¥SHUTDOWN<br>âœ…æŸ¥çœ‹redisæ˜¯å¦åœ¨è¿è¡Œï¼šps axu|grep redis<br>âœ…å®¢æˆ·ç«¯è¿æ¥redisï¼šredis-cli -h 127.0.0.1 -p 6379<br>è¿æ¥åæ‰§è¡Œpingå‘½ä»¤ï¼Œæ£€æµ‹redisæœåŠ¡æ˜¯å¦å¯åŠ¨<br>âœ…redis.confé…ç½®æ–‡ä»¶è¯´æ˜ï¼š<br>redisé»˜è®¤æ˜¯å‰å°å¯åŠ¨ï¼Œå¦‚æœç›¸ä»¥å®ˆæŠ¤è¿›ç¨‹ï¼ˆåå°æ–¹å¼ï¼‰è¿è¡Œï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å°†daemonize noä¿®æ”¹ä¸ºyesã€‚</p>
<blockquote>
<p>å®ˆæŠ¤è¿›ç¨‹ï¼ˆåå°è¿›ç¨‹ï¼‰ä¸å‰å°è¿›ç¨‹ï¼š<br>å‰å°è¿›ç¨‹æ˜¯åœ¨ç»ˆç«¯ä¸­è¿è¡Œçš„ï¼Œç»ˆç«¯å…³é—­è¿›ç¨‹ä¹Ÿå°±æ¶ˆå¤±ã€‚<br>å®ˆæŠ¤è¿›ç¨‹æ˜¯è¿è¡Œåœ¨åå°çš„ä¸€ç§ç‰¹æ®Šè¿›ç¨‹ï¼Œä¸å—ç»ˆç«¯æ§åˆ¶ï¼Œä¹Ÿä¸éœ€è¦ç»ˆç«¯çš„äº¤äº’ã€‚<br>Linuxä¸­å¤§å¤šæ•°æœåŠ¡å™¨æ˜¯ç”¨å®ˆæŠ¤è¿›ç¨‹å®ç°çš„ï¼Œæ¯”å¦‚webæœåŠ¡å™¨httpç­‰ã€‚</p>
</blockquote>
<h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><p>keys * æŸ¥çœ‹æ‰€æœ‰keyçš„å†…å®¹<br>exits key  æŸ¥çœ‹keyæ˜¯å¦å­˜åœ¨<br>set key value  è®¾ç½®keyçš„å†…å®¹<br>get key  è·å–keyçš„å†…å®¹<br>flushdb  åˆ é™¤å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰key<br>flushall  åˆ é™¤æ‰€æœ‰æ•°æ®åº“ä¸­key</p>
<p>æœåŠ¡å™¨ç›¸å…³å‘½ä»¤ï¼š<br>ping  æµ‹è¯•è¿æ¥æ˜¯å¦å­˜æ´»ï¼Œè¿”å›pongä»£è¡¨æœ‰å“åº”<br>echo  è¾“å‡ºä¿¡æ¯<br>select num  é€‰æ‹©æ•°æ®åº“ï¼Œ0-15<br>quit  é€€å‡ºè¿æ¥<br>dbsize  è¿”å›å½“å‰æ•°æ®åº“ä¸­keyçš„æ•°é‡<br>info  è·å–æœåŠ¡çš„ç›¸å…³ä¿¡æ¯</p>
<p>è®¾ç½®é”®å‘½ä»¤ï¼š<br>setex key seconds value è®¾ç½®å€¼å¹¶è®¾ç½®æœ‰æ•ˆæœŸï¼Œå·²å­˜åœ¨ä¼šè¦†ç›–<br>pexpire key millisecond è®¾ç½®æœ‰æ•ˆæ—¶é—´ï¼Œæ¯«ç§’ä¸ºå•ä½ï¼Œå¿…é¡»æ˜¯å·²ç»å­˜åœ¨çš„key<br>setnx key value ä¸å­˜åœ¨æ—¶æ”¾å…¥<br>exists key æ˜¯å¦å­˜åœ¨è¯¥key<br>ttl key ä»¥ç§’ä¸ºå•ä½æ˜¾ç¤ºè¿‡æœŸæ—¶é—´<br>pttl key ä»¥æ¯«ç§’ä¸ºå•ä½æ˜¾ç¤ºè¿‡æœŸæ—¶é—´</p>
<h4 id="redisæ•°æ®ç»“æ„"><a href="#redisæ•°æ®ç»“æ„" class="headerlink" title="redisæ•°æ®ç»“æ„"></a>redisæ•°æ®ç»“æ„</h4><p>stringï¼šå¯å­˜å‚¨å­—ç¬¦ä¸²ã€æ•´æ•°ã€æµ®ç‚¹æ•°<br>listï¼šä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²<br>setï¼šåŒ…å«å­—ç¬¦ä¸²çš„æ— åºæ”¶é›†å®¹å™¨<br>hashï¼šåŒ…å«é”®å€¼çš„æ— åºæ•£åˆ—è¡¨<br>zsetï¼šæœ‰åºé›†åˆï¼Œå…ƒç´ æ’åˆ—é¡ºåºç”±åˆ†å€¼å¤§å°å†³å®š</p>
<h4 id="redis-hset"><a href="#redis-hset" class="headerlink" title="redis hset"></a>redis hset</h4><p>Redis Hset å‘½ä»¤ç”¨äºä¸ºå“ˆå¸Œè¡¨ä¸­çš„å­—æ®µèµ‹å€¼ ã€‚<br>å¦‚æœå“ˆå¸Œè¡¨ä¸å­˜åœ¨ï¼Œä¸€ä¸ªæ–°çš„å“ˆå¸Œè¡¨è¢«åˆ›å»ºå¹¶è¿›è¡Œ HSET æ“ä½œã€‚<br>å¦‚æœå­—æ®µå·²ç»å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ï¼Œæ—§å€¼å°†è¢«è¦†ç›–ã€‚<br>hset myhashset key value</p>
<h4 id="redis-listç›¸å…³"><a href="#redis-listç›¸å…³" class="headerlink" title="redis listç›¸å…³"></a>redis listç›¸å…³</h4><p>å¾€listçš„å³è¾¹åŠ ä¸€ä¸ªå€¼<br>rpush mylist value<br>å¦‚æœåˆ—è¡¨ä¸å­˜åœ¨åˆ™æ–°å»ºï¼Œå¦‚æœkeyä¸æ˜¯åˆ—è¡¨ç±»å‹ï¼Œè¿”å›é”™è¯¯ã€‚<br>lrange mylist  ä»å·¦è¾¹ä¸€ä¸ªä¸€ä¸ªéå†å±•ç¤º<br>llen mylist è¿”å›é•¿åº¦</p>
<h4 id="noauth-authentication-required"><a href="#noauth-authentication-required" class="headerlink" title="noauth authentication required"></a>noauth authentication required</h4><p>è®¤è¯é—®é¢˜ï¼Œéœ€è¦è¾“å…¥å¯†ç <br>auth â€œpasswordâ€œ</p>
<h4 id="keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢"><a href="#keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢"></a>keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢</h4><p><code>*é€šé…ç¬¦ï¼škeys *hh*</code><br><code>?å•ä¸ªé€šé…ç¬¦ï¼škeys helï¼Ÿï¼Ÿ</code>  å¿˜äº†æœ€åä¸¤ä¸ªå­—æ¯<br><code>[]é€šé…ç¬¦ï¼škeys hell[opt]</code>  æœ€åä¸€ä¸ªå­—æ¯å¯èƒ½æ˜¯o p tä¸­çš„ä¸€ä¸ª</p>
<h4 id="redis-setexå‘½ä»¤"><a href="#redis-setexå‘½ä»¤" class="headerlink" title="redis setexå‘½ä»¤"></a>redis setexå‘½ä»¤</h4><p>ä¸ºæŒ‡å®šçš„keyè®¾ç½®å€¼åŠå…¶è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœå·²å­˜åœ¨ï¼Œåˆ™æ›¿æ¢<br>setex key 10 value   //10såè¿‡æœŸ<br>ttl key  //è¿˜æœ‰å¤šå°‘æ—¶é—´è¿‡æœŸ</p>
<h4 id="misconf-redis-is-configured-to-save-RDB"><a href="#misconf-redis-is-configured-to-save-RDB" class="headerlink" title="misconf redis is configured to save RDB"></a>misconf redis is configured to save RDB</h4><p>erroråŸå› ï¼šå¼ºåˆ¶å…³é—­rediså¿«ç…§å¯¼è‡´ä¸èƒ½æŒä¹…åŒ–<br>è§£å†³ï¼šconfig set stop-writes-on-bgsave-error no</p>
<h4 id="Jediså’ŒredisTemplate"><a href="#Jediså’ŒredisTemplate" class="headerlink" title="Jediså’ŒredisTemplate"></a>Jediså’ŒredisTemplate</h4><p>Jedisæ˜¯Rediså®˜æ–¹æ¨èçš„é¢å‘Javaçš„æ“ä½œRedisçš„å®¢æˆ·ç«¯ï¼Œè€ŒRedisTemplateæ˜¯SpringDataRedisä¸­å¯¹JedisApiçš„é«˜åº¦å°è£…ã€‚</p>
<p>SpringDataRedisç›¸å¯¹äºJedisæ¥è¯´å¯ä»¥æ–¹ä¾¿åœ°æ›´æ¢Redisçš„Javaå®¢æˆ·ç«¯ï¼Œæ¯”Jediså¤šäº†è‡ªåŠ¨ç®¡ç†è¿æ¥æ± çš„ç‰¹æ€§ï¼Œæ–¹ä¾¿ä¸å…¶ä»–Springæ¡†æ¶è¿›è¡Œæ­é…ä½¿ç”¨å¦‚ï¼šSpringCache</p>
<p>jedisè¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡</span><br><span class="line">        Jedis jedis = new Jedis(&quot;localhost&quot;);</span><br><span class="line">        System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;);</span><br><span class="line">        //æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ</span><br><span class="line">        System.out.println(&quot;æœåŠ¡æ­£åœ¨è¿è¡Œ: &quot;+jedis.ping());</span><br><span class="line">        long time=0;</span><br><span class="line">        long TestNum=100;</span><br><span class="line">        for(int i=0;i&lt;TestNum;i++)&#123;</span><br><span class="line">            long timeS=System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">            jedis.set(&quot;jedis-s&quot;+i,&quot;jedis&quot;+i);</span><br><span class="line">            long timeE=System.currentTimeMillis();</span><br><span class="line">            time+=timeE-timeS;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.print(&quot;æ€»æ—¶é—´ï¼š&quot;+time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>redisTemplateè¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@SpringBootTest(classes = ServiceApplication.class)</span><br><span class="line">public class RedisTemplateTest &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private RedisUtils redisUtils;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void T()&#123;</span><br><span class="line">        long time=0;</span><br><span class="line">        long TestNum=100;</span><br><span class="line">        for(int i=0;i&lt;TestNum;i++)&#123;</span><br><span class="line">            long timeS=System.currentTimeMillis();</span><br><span class="line">            redisUtils.set(&quot;RedisTemplateTest&quot;,&quot;redi&quot;+i);</span><br><span class="line">            long timeE=System.currentTimeMillis();</span><br><span class="line">            time+=timeE-timeS;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;æ€»æ—¶é—´ï¼š&quot;+time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37208934/article/details/95201211">https://blog.csdn.net/qq_37208934/article/details/95201211</a></p>
<h4 id="redisTemplate-opsForHash"><a href="#redisTemplate-opsForHash" class="headerlink" title="redisTemplate.opsForHash()"></a>redisTemplate.opsForHash()</h4><p>Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚<br>Redis ä¸­æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 2^32 - 1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰ã€‚</p>
<p>å­˜å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">Mapä»¥mapé›†åˆçš„å½¢å¼æ·»åŠ é”®å€¼å¯¹</span><br><span class="line">&lt;String, String&gt; maps = new HashMap();</span><br><span class="line">maps.put(&quot;1&quot;,&quot;æ˜ŸæœŸä¸€&quot;);</span><br><span class="line">maps.put(&quot;2&quot;,&quot;æ˜ŸæœŸäºŒ&quot;);</span><br><span class="line">maps.put(&quot;3&quot;,&quot;æ˜ŸæœŸä¸‰&quot;);</span><br><span class="line">maps.put(&quot;4&quot;,&quot;æ˜ŸæœŸå››&quot;);</span><br><span class="line">redisTemplate.opsForHash().putAll(&quot;day:week&quot;, maps);</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥å•ä¸ªå­˜å…¥ï¼š</span><br><span class="line">redisTemplate.opsForHash().put(&quot;redisKey&quot;,&quot;key1&quot;,&quot;value1&quot;);</span><br><span class="line">redisTemplate.opsForHash().put(&quot;redisKey&quot;,&quot;key1&quot;,&quot;value2&quot;);</span><br><span class="line">mapä¸­keyç›¸åŒæ›¿æ¢value</span><br><span class="line">è¿”å›å€¼ä¸ºvoid</span><br><span class="line"></span><br><span class="line">è·å–redisKeyå¯¹åº”çš„mapä¸­keyå¯¹åº”çš„å€¼ï¼š</span><br><span class="line">Object o = redisTemplate.opsForHash().get(&quot;redisKey&quot;, &quot;key1&quot;);</span><br><span class="line">å¦‚æœæ²¡æœ‰è¿”å›null</span><br><span class="line"></span><br><span class="line">è·å–keyå¯¹åº”çš„æ‰€æœ‰mapé”®å€¼å¯¹ï¼š</span><br><span class="line">Map hashValue = redisTemplate.opsForHash().entries(&quot;redisKey&quot;);</span><br><span class="line"></span><br><span class="line">è·å–keyå¯¹åº”çš„mapä¸­æ‰€æœ‰çš„é”®ï¼š</span><br><span class="line">Set hashValue = redisTemplate.opsForHash().keys(&quot;redisKey&quot;);</span><br><span class="line"></span><br><span class="line">è·å–keyå¯¹åº”çš„mapä¸­æ‰€æœ‰çš„å€¼:</span><br><span class="line">List hashValue = redisTemplate.opsForHash().values(&quot;redisKey&quot;);</span><br><span class="line"></span><br><span class="line">åˆ¤æ–­keyå¯¹åº”çš„mapä¸­æ˜¯å¦æœ‰æŒ‡å®šçš„é”®:</span><br><span class="line">Boolean aBoolean = redisTemplate.opsForHash().hasKey(&quot;redisKey&quot;, &quot;mapKey&quot;);</span><br><span class="line"></span><br><span class="line">è·å–keyå¯¹åº”çš„mapçš„é•¿åº¦:</span><br><span class="line">Long hashValue = redisTemplate.opsForHash().size(&quot;redisKey&quot;);</span><br><span class="line"></span><br><span class="line">å¦‚æœkeyå¯¹åº”çš„mapä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢åˆ°mapä¸­ï¼Œå­˜åœ¨åˆ™ä¸æ–°å¢ä¹Ÿä¸è¦†ç›–:</span><br><span class="line">redisTemplate.opsForHash().putIfAbsent(&quot;redisKey&quot;, &quot;mapKey&quot;, &quot;mapValue&quot;);</span><br><span class="line">è¿”å›å€¼ä¸ºBooleanã€‚</span><br><span class="line">è¿™ä¸ªæ–¹æ³•ä¼šåˆ¤æ–­keyæ˜¯å¦æœ‰å€¼ï¼Œå¦‚æœæ²¡æœ‰å°±ç›´æ¥æ’å…¥ï¼Œè¿”å›trueï¼›å¦‚æœæœ‰å€¼çš„è¯å°±ä¸ä¼šæ’å…¥ï¼Œè¿”å›falseã€‚</span><br><span class="line">è¿”å›çš„æ˜¯æ˜¯å¦æˆåŠŸå†™å…¥äº†ã€‚</span><br><span class="line"></span><br><span class="line">ç›´æ¥ä»¥mapé›†åˆçš„æ–¹å¼æ·»åŠ keyå¯¹åº”çš„å€¼:</span><br><span class="line">mapä¸­keyå·²ç»å­˜åœ¨ï¼Œè¦†ç›–æ›¿æ¢</span><br><span class="line">mapä¸­keyä¸å­˜åœ¨ï¼Œæ–°å¢</span><br><span class="line">Map newMap = new HashMap();</span><br><span class="line">newMap.put(&quot;map4&quot;,&quot;map4&quot;);</span><br><span class="line">newMap.put(&quot;map5&quot;,&quot;map5&quot;);</span><br><span class="line">redisTemplate.opsForHash().putAll(&quot;hashValue&quot;,newMap);</span><br><span class="line"></span><br><span class="line">ä»¥é›†åˆçš„æ–¹å¼è·å–mapé”®å¯¹åº”çš„mapå€¼ï¼š</span><br><span class="line">List list = new ArrayList&lt;&gt;();</span><br><span class="line">list.add(&quot;mapKey1&quot;);</span><br><span class="line">list.add(&quot;mapKey2&quot;);</span><br><span class="line">List hashValue = redisTemplate.opsForHash().multiGet(&quot;redisKey&quot;, list);</span><br><span class="line"></span><br><span class="line">è·å–æŒ‡å®škeyå¯¹åº”çš„mapé›†åˆä¸­ï¼ŒæŒ‡å®šé”®å¯¹åº”çš„å€¼çš„é•¿åº¦:</span><br><span class="line">Long aLong = redisTemplate.opsForHash().lengthOfValue(&quot;redisKey&quot;, &quot;mapKey&quot;);</span><br><span class="line"></span><br><span class="line">ä½¿redisKeyå¯¹åº”çš„mapä¸­ï¼Œé”®mapKeyå¯¹åº”çš„å€¼ä»¥long1è‡ªå¢:</span><br><span class="line">Long increment = redisTemplate.opsForHash().increment(&quot;redisKey&quot;, &quot;mapKey&quot;, 1);</span><br><span class="line">ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æ˜¯longå‹ï¼Œä¹Ÿå¯ä»¥æ˜¯doubleå‹ã€‚</span><br><span class="line"></span><br><span class="line">åŒ¹é…è·å–é”®å€¼å¯¹ï¼šï¼ˆè·Ÿgetæœ‰å•¥ä¸åŒï¼Ÿï¼‰</span><br><span class="line">ScanOptions.NONEä¸ºè·å–å…¨éƒ¨é”®å¯¹</span><br><span class="line">ScanOptions.scanOptions().match(â€œmap1â€).build()ï¼ŒåŒ¹é…è·å–é”®ä½map1çš„é”®å€¼å¯¹</span><br><span class="line">Cursor&lt;Map.Entry&lt;Object,Object&gt;&gt; cursor = redisTemplate.opsForHash().scan(&quot;hashValue&quot;,ScanOptions.scanOptions().match(&quot;map1&quot;).build());</span><br><span class="line">//Cursor&lt;Map.Entry&lt;Object,Object&gt;&gt; cursor = redisTemplate.opsForHash().scan(&quot;hashValue&quot;,ScanOptions.NONE);</span><br><span class="line">while (cursor.hasNext()) &#123;</span><br><span class="line">    Map.Entry&lt;Object, Object&gt; entry = cursor.next();</span><br><span class="line">    System.out.println(&quot;entry.getKey() = &quot; + entry.getKey());</span><br><span class="line">    System.out.println(&quot;entry.getValue() = &quot; + entry.getValue());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">åˆ é™¤keyå¯¹åº”çš„mapä¸­çš„é”®å€¼å¯¹ï¼š</span><br><span class="line">Long delete = redisTemplate.opsForHash().delete(&quot;redisKey&quot;, &quot;map1&quot;, &quot;map2&quot;);</span><br><span class="line">åˆ é™¤äº†ä¸¤ä¸ªï¼Œå¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ª</span><br></pre></td></tr></table></figure>

<p>è·å–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Object, Object&gt; entries = redisTemplate.opsForHash().entries(&quot;day:week&quot;);</span><br></pre></td></tr></table></figure>

<p>scan:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scanå’Œkeysä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯æ¨¡ç³ŠæŸ¥è¯¢ï¼Œæœ€å¤§çš„åŒºåˆ«å°±æ˜¯keysä¼šé˜»å¡ï¼Œè€Œscanä¸ä¼šé˜»å¡</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43167662/article/details/123232840">https://blog.csdn.net/weixin_43167662/article/details/123232840</a></p>
<h4 id="redisTemplate-opsForGeo"><a href="#redisTemplate-opsForGeo" class="headerlink" title="redisTemplate.opsForGeo()"></a>redisTemplate.opsForGeo()</h4><p>rediså…³äºgeoä½ç½®è®¡ç®—çš„apiã€‚æœ‰ä¸ªkeyï¼Œvalueç›¸å½“äº<code>map&lt;member, Point&gt;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">//é¦–å…ˆæ³¨å…¥redisTemplate</span><br><span class="line">@Autowired</span><br><span class="line">private RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">//å°†æŒ‡å®šçš„åœ°ç†ç©ºé—´ä½ç½®ï¼ˆçº¬åº¦ã€ç»åº¦ã€åç§°ï¼‰æ·»åŠ åˆ°æŒ‡å®šçš„keyå’Œmemberä¸­</span><br><span class="line">Long addedNum = redisTemplate.opsForGeo().add(key, new Point(x,y), member);</span><br><span class="line">// keyå’Œmsgä¸ºå­—ç¬¦ä¸²ï¼ŒPointæ˜¯springframework.data.geoä¸‹çš„</span><br><span class="line"></span><br><span class="line">//æ ¹æ®keyå’Œå¤šä¸ªmemberè¿”å›åæ ‡ç‚¹</span><br><span class="line">List&lt;Point&gt; points = redisTemplate.opsForGeo().position(key, String... members);</span><br><span class="line"></span><br><span class="line">//è¿”å›ä¸¤ä¸ªç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»ï¼Œå•ä½å‚æ•°å¯ä»¥ä¸åŠ </span><br><span class="line">//å¦‚æœæŸä¸ªmemberæ²¡æœ‰ï¼Œä¼šæŠ¥ç©ºæŒ‡é’ˆé”™è¯¯</span><br><span class="line">Distance distance = redisTemplate.opsForGeo().distance(key,member1,member2, RedisGeoCommands.DistanceUnit.KILOMETERS);</span><br><span class="line">//Distanceæ˜¯springframework.data.geo.matricsåŒ…ä¸‹çš„</span><br><span class="line"></span><br><span class="line">//ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œè¿”å›é”®åŒ…å«çš„ä½ç½®å…ƒç´ å½“ä¸­ï¼Œä¸ä¸­å¿ƒçš„è·ç¦»ä¸è¶…è¿‡ç»™å®šæœ€å¤§è·ç¦»çš„æ‰€æœ‰ä½ç½®å…ƒç´ ï¼Œå¹¶ç»™å‡ºæ‰€æœ‰ä½ç½®å…ƒç´ ä¸ä¸­å¿ƒçš„å¹³å‡è·ç¦»</span><br><span class="line">//å¦‚æœæŸä¸ªmemberæ²¡æœ‰ï¼Œä¹Ÿä¼šæŠ¥é”™</span><br><span class="line">Circle circle = new Circle(new Point(114.05, 22.55), new Distance(200, Metrics.KILOMETERS));</span><br><span class="line">GeoResults&lt;RedisGeoCommands.GeoLocation&lt;String&gt;&gt; results = redisTemplate.opsForGeo()</span><br><span class="line">    .radius(&quot;geo&quot;,circle);</span><br><span class="line">----------------</span><br><span class="line">GeoResults: </span><br><span class="line">&#123;averageDistance: 51.367149999999995 KILOMETERS, </span><br><span class="line">results: GeoResult [content: RedisGeoCommands.GeoLocation(name=æ·±åœ³, point=Point [x=114.049998, y=22.550001]), distance: 3.0E-4 KILOMETERS],GeoResult [content: RedisGeoCommands.GeoLocation(name=å¹¿å·, point=Point [x=113.270001, y=23.130001]), distance: 102.734 KILOMETERS]&#125;</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">//ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œä¸ªæ•°é™åˆ¶ä¸ºragsçš„ç‚¹ï¼Œè·ç¦»ä¸ºdistance</span><br><span class="line">RedisGeoCommands.GeoRadiusCommandArgs args = RedisGeoCommands.GeoRadiusCommandArgs.newGeoRadiusArgs().includeDistance().includeCoordinates().sortAscending().limit(5);</span><br><span class="line">GeoResults&lt;RedisGeoCommands.GeoLocation&lt;String&gt;&gt; results = redisTemplate.opsForGeo()</span><br><span class="line">    .radius(&quot;geo&quot;,circle,args);</span><br><span class="line"></span><br><span class="line">//ç”¨åæ ‡çš„memberå’Œè·ç¦»æ›¿ä»£ä¸Šé¢çš„circle</span><br><span class="line">Distance distance = new Distance(200,Metrics.KILOMETERS);</span><br><span class="line">RedisGeoCommands.GeoRadiusCommandArgs args = RedisGeoCommands.GeoRadiusCommandArgs.newGeoRadiusArgs().includeDistance().includeCoordinates().sortAscending().limit(5);</span><br><span class="line">GeoResults&lt;RedisGeoCommands.GeoLocation&lt;String&gt;&gt;  results = redisTemplate.opsForGeo()</span><br><span class="line">        .radius(&quot;geo&quot;,&quot;æ·±åœ³&quot;,distance,args);</span><br><span class="line"></span><br><span class="line">//è·å–è·ç¦»memberåæ ‡æŒ‡å®šåŠå¾„çš„ç‚¹</span><br><span class="line">GeoResults&lt;RedisGeoCommands.GeoLocation&lt;String&gt;&gt;  results = redisTemplate.opsForGeo()</span><br><span class="line">        .radius(key,member,radius); //radiusæ˜¯doubleç±»å‹</span><br><span class="line"></span><br><span class="line">//åˆ é™¤member</span><br><span class="line">Long removeNum = redisTemplate.opsForGeo().remove(key, String... members);</span><br></pre></td></tr></table></figure>

<p>redisçš„geoå®æˆ˜ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39274753/article/details/107783674">https://blog.csdn.net/weixin_39274753/article/details/107783674</a></p>
<h4 id="å¯è§†åŒ–å·¥å…·another-redis"><a href="#å¯è§†åŒ–å·¥å…·another-redis" class="headerlink" title="å¯è§†åŒ–å·¥å…·another redis"></a>å¯è§†åŒ–å·¥å…·another redis</h4><p>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/qishibo/AnotherRedisDesktopManager/releases">https://github.com/qishibo/AnotherRedisDesktopManager/releases</a></p>
<p>è¿æ¥ï¼šè¾“å…¥ åœ°å€host , ç«¯å£ï¼Œå¯†é’¥</p>
<p>å¯è§†åŒ–ï¼škeyï¼ŒæœåŠ¡å™¨ç‰ˆæœ¬ï¼Œä½¿ç”¨å†…å­˜ï¼Œè¿è¡ŒçŠ¶æ€ï¼Œä½¿ç”¨åˆ°çš„åº“ç­‰ä¿¡æ¯</p>
<p>æ”¯æŒä¸‰ç§æ–‡æœ¬æ ¼å¼ï¼Œåˆ†åˆ«æ˜¯ text,json , unserialize</p>
<p>ç”¨æ³•å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/220209936">https://zhuanlan.zhihu.com/p/220209936</a></p>
<h4 id="redisTemplate-opsForList"><a href="#redisTemplate-opsForList" class="headerlink" title="redisTemplate.opsForList()"></a>redisTemplate.opsForList()</h4><p>Redisåˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰</p>
<p>ä¸€ä¸ªåˆ—è¡¨æœ€å¤šå¯ä»¥åŒ…å« 2^32-1 ä¸ªå…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨è¶…è¿‡40äº¿ä¸ªå…ƒç´ )ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">è·å–æŒ‡å®šèŒƒå›´å†…çš„å€¼ï¼š</span><br><span class="line">List&lt;Object&gt; res = redisTemplate.opsForList().range(K key, long start, long end)</span><br><span class="line">(&quot;rightList&quot;, 0, -1);  //è·å–æ‰€æœ‰å€¼</span><br><span class="line"></span><br><span class="line">è·å–listé•¿åº¦:</span><br><span class="line">Long res = redisTemplate.opsForList().size(key)</span><br><span class="line"></span><br><span class="line">è·å–æŒ‡å®šä½ç½®çš„å€¼ï¼ˆindexä»å·¦å¾€å³ï¼Œä»0å¼€å§‹ï¼‰:</span><br><span class="line">Object res = redisTemplate.opsForList().index(key, index)</span><br><span class="line"></span><br><span class="line">ç§»é™¤keyä¸­æœ€å·¦çš„ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›ï¼š</span><br><span class="line">Object res = redisTemplate.opsForList().leftPop(&quot;key&quot;);</span><br><span class="line"></span><br><span class="line">æŒ‡å®šè¿‡æœŸæ—¶é—´ååˆ é™¤keyä¸­æœ€å·¦çš„ä¸€ä¸ªå€¼ï¼š</span><br><span class="line">redisTemplate.opsForList().leftPop(&quot;key&quot;,1,TimeUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">ç§»é™¤k1ä¸­æœ€å³çš„å€¼ï¼Œå¹¶å°†ç§»é™¤çš„å€¼æ’å…¥k2ä¸­æœ€å·¦ä¾§ï¼š</span><br><span class="line">redisTemplate.opsForList().rightPopAndLeftPush(&quot;key1&quot;, &quot;key2&quot;);</span><br><span class="line">k1å’Œk2ä¸æ˜¯åŒä¸€ä¸ªkeyæ—¶ï¼Œk1å³ä¾§ç§»é™¤ï¼Œk2å·¦ä¾§æ’å…¥ï¼Œk2ä¸å­˜åœ¨æ—¶åˆ™æ–°å¢ä¸€ä¸ªç„¶ååœ¨æ’å…¥</span><br><span class="line">k1å’Œk2æ˜¯åŒä¸€ä¸ªkeyæ—¶ï¼Œç›¸å½“äºæŠŠæœ€å³ä¾§çš„å€¼ç§»åˆ°äº†æœ€å·¦ä¾§</span><br><span class="line">åŠ å®šæ—¶çš„ï¼š</span><br><span class="line">redisTemplate.opsForList().rightPopAndLeftPush(&quot;list&quot;, &quot;list2&quot;,1,TimeUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">ä»æœ€å³ä¾§ç§»é™¤ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›ï¼š</span><br><span class="line">Object res = redisTemplate.opsForList().rightPop(&quot;key&quot;);</span><br><span class="line"></span><br><span class="line">å·¦æ¨å…¥ï¼š</span><br><span class="line">Long res = redisTemplate.opsForList().leftPush(&quot;list&quot;,&quot;a&quot;);</span><br><span class="line"></span><br><span class="line">ä»é›†åˆå·¦è¾¹å¼€å§‹åœ¨vå€¼åè¾¹æ’å…¥æ–°å€¼v1ï¼š</span><br><span class="line">Long res = redisTemplate.opsForList().leftPush(K key, V v, V v1)</span><br><span class="line">æœ‰å¤šä¸ªvå€¼æ—¶ï¼Œä»å·¦è¾¹å¼€å§‹æŸ¥åˆ°ç¬¬ä¸€ä¸ªvå€¼å³å¯ï¼Œä¸å­˜åœ¨væ—¶ï¼Œä¸æ’å…¥æ–°å€¼v1</span><br><span class="line"></span><br><span class="line">ä»å·¦è¾¹æ‰¹é‡æ’å…¥æ–°å€¼ï¼š</span><br><span class="line">List&lt;String&gt; strings = Arrays.asList(&quot;j&quot;, &quot;q&quot;, &quot;k&quot;);</span><br><span class="line">Long res = redisTemplate.opsForList().leftPushAll(&quot;list&quot;, strings);</span><br><span class="line"></span><br><span class="line">å¯å˜å‚æ•°æ’å…¥æ–°å€¼ï¼š</span><br><span class="line">leftPushAll(K key, Vâ€¦ values)</span><br><span class="line">redisTemplate.opsForList().leftPushAll(&quot;list&quot;, &quot;j&quot;, &quot;q&quot;, &quot;k&quot;);</span><br><span class="line"></span><br><span class="line">å¦‚æœkeyå­˜åœ¨ï¼Œä»å·¦è¾¹æ’å…¥æ–°å€¼ï¼š</span><br><span class="line">redisTemplate.opsForList().leftPushIfPresent(&quot;list&quot;, &quot;j&quot;);</span><br><span class="line"></span><br><span class="line">å³æ¨å…¥ç•¥ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨æŒ‡å®šåæ ‡ä½ç½®æ’å…¥(æ›¿æ¢)æ–°å€¼ï¼š</span><br><span class="line">redisTemplate.opsForList().set(&quot;key&quot;,2,&quot;e&quot;);</span><br><span class="line">indexä¸å­˜åœ¨ï¼ŒæŠ¥é”™ï¼ˆERR index out of rangeï¼‰</span><br><span class="line">keyä¸å­˜åœ¨ï¼ŒæŠ¥é”™ï¼ˆERR no such keyï¼‰</span><br><span class="line">ä»å·¦ä¾§æ’å…¥</span><br><span class="line"></span><br><span class="line">ç§»é™¤ä»å·¦/å³çš„ç¬¬ä¸€ä¸ªå€¼ä¸ºvalueï¼š</span><br><span class="line">redisTemplate.opsForList().remove(&quot;key&quot;, n, value);</span><br><span class="line">count&gt; 0ï¼šåˆ é™¤ç­‰äºä»å·¦åˆ°å³ç§»åŠ¨çš„å€¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›</span><br><span class="line">count&lt; 0ï¼šåˆ é™¤ç­‰äºä»å³åˆ°å·¦ç§»åŠ¨çš„å€¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›</span><br><span class="line">count = 0ï¼šåˆ é™¤ç­‰äºvalueçš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">trim(K key, long long1, long long2ï¼‰</span><br><span class="line">æˆªå–é›†åˆå…ƒç´ ï¼Œå¹¶å°†å…¶ä¿ç•™ä¸ºkeyå¯¹åº”çš„æ–°å€¼</span><br></pre></td></tr></table></figure>

<p>æ¥è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43658899/article/details/121040307">https://blog.csdn.net/weixin_43658899/article/details/121040307</a></p>
<h4 id="redisTemplate-opsForValue"><a href="#redisTemplate-opsForValue" class="headerlink" title="redisTemplate.opsForValue()"></a>redisTemplate.opsForValue()</h4><p>æ™®é€šç¼“å­˜ç±»å‹ï¼ŒString</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">void set(K key, V value)</span><br><span class="line">æ–°å¢ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å€¼ï¼Œkeyæ˜¯é”®ï¼Œvalueæ˜¯å€¼</span><br><span class="line">redisTemplate.opsForValue().set(&quot;stringkey&quot;, &quot;stringvalue&quot;);</span><br><span class="line"></span><br><span class="line">void set(K key, V value, long timeout, TimeUnit unit)</span><br><span class="line">æ–°å¢ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å€¼ï¼Œå¹¶ä¸”è®¾ç½®å˜é‡å€¼çš„è¿‡æœŸæ—¶é—´.</span><br><span class="line">redisTemplate.opsForValue().set(&quot;timeoutkey&quot;, &quot;timeoutvalue&quot;, 10, TimeUnit.SECONDS);</span><br><span class="line"></span><br><span class="line">Boolean setIfAbsent(K key, V value)</span><br><span class="line">å¦‚æœé”®ä¸å­˜åœ¨åˆ™æ–°å¢,å­˜åœ¨åˆ™ä¸æ”¹å˜å·²ç»æœ‰çš„å€¼ã€‚</span><br><span class="line">redisTemplate.opsForValue().setIfAbsent(&quot;newkey&quot;, &quot;newvalue&quot;);</span><br><span class="line"></span><br><span class="line">V get(Object key)</span><br><span class="line">è·å–keyå¯¹åº”çš„å€¼</span><br><span class="line">redisTemplate.opsForValue().get(&quot;stringkey&quot;);</span><br><span class="line"></span><br><span class="line">String get(K key, long start, long end)</span><br><span class="line">æˆªå–keyé”®å¯¹åº”å€¼çš„å­—ç¬¦ä¸²ï¼Œä»å¼€å§‹ä¸‹æ ‡ä½ç½®å¼€å§‹åˆ°ç»“æŸä¸‹æ ‡çš„ä½ç½®(åŒ…å«ç»“æŸä¸‹æ ‡)çš„å­—ç¬¦ä¸²ã€‚ä¸‹æ ‡ä»1å¼€å§‹ï¼Œå¦‚æœstringkeyå¯¹åº”çš„å€¼ä¸ºvalueï¼Œé‚£ä¹ˆä¸‹é¢è¿™ä¸ªæ–¹æ³•è¿”å›ä¸ºï¼šal</span><br><span class="line">redisTemplate.opsForValue().get(&quot;stringkey&quot;, 2, 3);</span><br><span class="line"></span><br><span class="line">V getAndSet(K key, V value)</span><br><span class="line">è·å–åŸæ¥keyé”®å¯¹åº”çš„å€¼å¹¶é‡æ–°èµ‹æ–°å€¼</span><br><span class="line">redisTemplate.opsForValue().getAndSet(&quot;stringkey&quot;, &quot;newvalue&quot;);</span><br><span class="line"></span><br><span class="line">Long increment(K key, long delta)</span><br><span class="line">Double increment(K key, double delta) </span><br><span class="line">ä»¥å¢é‡çš„æ–¹å¼å°†å€¼å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºé€’å¢å› å­</span><br><span class="line">redisTemplate.opsForValue().set(&quot;doublevalue&quot;, 1);</span><br><span class="line">redisTemplate.opsForValue().increment(&quot;doublevalue&quot;, 1.2);//ä»¥1.2é€’å¢ï¼Œé€’å¢åä¸º2.2</span><br><span class="line">redisTemplate.opsForValue().increment(&quot;doublevalue&quot;, 1);//ä»¥1é€’å¢ï¼Œé€’å¢åä¸º3.2</span><br><span class="line"></span><br><span class="line">Integer append(K key, String value)</span><br><span class="line">åœ¨åŸæœ‰çš„å€¼åŸºç¡€ä¸Šæ–°å¢å­—ç¬¦ä¸²åˆ°æœ«å°¾</span><br><span class="line">redisTemplate.opsForValue().append(&quot;stringkey&quot;, &quot;appendValue&quot;);</span><br><span class="line"></span><br><span class="line">Long size(K key)</span><br><span class="line">è·å–æŒ‡å®šå­—ç¬¦ä¸²çš„é•¿åº¦</span><br><span class="line">Long size = redisTemplate.opsForValue().size(&quot;stringkey&quot;);</span><br></pre></td></tr></table></figure>

<p>æ¥è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/xinghui_liu/article/details/120986171">https://blog.csdn.net/xinghui_liu/article/details/120986171</a></p>
<h4 id="redisTemplateåŸºç¡€æ“ä½œ"><a href="#redisTemplateåŸºç¡€æ“ä½œ" class="headerlink" title="redisTemplateåŸºç¡€æ“ä½œ"></a>redisTemplateåŸºç¡€æ“ä½œ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">æŒ‡å®šç¼“å­˜å¤±æ•ˆæ—¶é—´</span><br><span class="line">Boolean redisTemplate.expire(key, timeout, TimeUnit)</span><br><span class="line"></span><br><span class="line">æ ¹æ®keyè·å–è¿‡æœŸæ—¶é—´</span><br><span class="line">Long redisTemplate.getExpire(key, TimeUnit)</span><br><span class="line">è¿”å›0ä»£è¡¨æ°¸ä¹…æœ‰æ•ˆ</span><br><span class="line"></span><br><span class="line">åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</span><br><span class="line">Boolean redisTemplate.hasKey(key)</span><br><span class="line"></span><br><span class="line">åˆ é™¤ç¼“å­˜</span><br><span class="line">public void delete(String... key) &#123;</span><br><span class="line">    if (key != null &amp;&amp; key.length &gt; 0) &#123;</span><br><span class="line">        if (key.length == 1) &#123;</span><br><span class="line">            redisTemplate.delete(key[0]);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            redisTemplate.delete(CollectionUtils.arrayToList(key));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/09/myblog/spring/spring-aop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/09/myblog/spring/spring-aop/" class="post-title-link" itemprop="url">spring aopæ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-09 11:56:23" itemprop="dateCreated datePublished" datetime="2022-04-09T11:56:23+08:00">2022-04-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-31 21:49:35" itemprop="dateModified" datetime="2022-05-31T21:49:35+08:00">2022-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å·¥ä½œä¸­é‡åˆ°ä¸ªaopçš„é—®é¢˜ï¼Œjdkä»£ç†æ¢cglibä»£ç†è¿˜ä¸è¿‡æ¥ï¼Œä»¥åŠjdkä»£ç†å­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜ã€‚æ€»ç»“å¹¶å®æˆ˜ä¸€ä¸‹ã€‚</p>
<h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="aopç›¸å…³æœ¯è¯­"><a href="#aopç›¸å…³æœ¯è¯­" class="headerlink" title="aopç›¸å…³æœ¯è¯­"></a>aopç›¸å…³æœ¯è¯­</h4><ul>
<li>Targetï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡</li>
<li>Proxyï¼šä»£ç†å¯¹è±¡</li>
<li>Joinpointï¼šè¿æ¥ç‚¹ï¼ŒæŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨Springä¸­ï¼Œè¿™äº›ç‚¹æŒ‡æ–¹æ³•ï¼Œå› ä¸ºSpringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼ˆå¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³•ï¼‰</li>
<li>Pointcutï¼šåˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº›Joinpointè¿›è¡Œæ‹¦æˆªçš„å®šä¹‰</li>
<li>Adviceï¼šï¼ˆé€šçŸ¥/å¢å¼ºï¼‰æ˜¯æŒ‡æ‹¦æˆªåˆ°Joinpointä¹‹åè¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥</li>
<li>Aspectï¼šåˆ‡é¢æ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ï¼ˆå¢å¼ºï¼‰çš„ç»“åˆ</li>
<li>Weavingï¼šç»‡å…¥å®è´¨æŠŠå°†åˆ‡ç‚¹å’Œå¢å¼ºç»“åˆçš„è¿‡ç¨‹æ˜¯ç»‡å…¥è¿‡ç¨‹ï¼ŒSpringæ˜¯åŠ¨æ€ä»£ç†ç»‡å…¥ï¼ŒAspectJæ˜¯é‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥</li>
</ul>
<p>*è¿æ¥ç‚¹æ˜¯å¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³•ï¼Œåˆ‡ç‚¹æ˜¯å®é™…ä¸Šè¢«å¢å¼ºè¿‡çš„æ–¹æ³•ï¼Œè¿æ¥ç‚¹èŒƒå›´æ›´å¤§</p>
<h4 id="aopå¼€å‘è¿‡ç¨‹"><a href="#aopå¼€å‘è¿‡ç¨‹" class="headerlink" title="aopå¼€å‘è¿‡ç¨‹"></a>aopå¼€å‘è¿‡ç¨‹</h4><ol>
<li><p>ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼ˆTargetçš„ç›®æ ‡æ–¹æ³•-åˆ‡ç‚¹ï¼‰</p>
</li>
<li><p>ç¼–å†™åˆ‡é¢ç±»ï¼Œåˆ‡é¢ç±»ä¸­æœ‰é€šçŸ¥ï¼ˆå¢å¼ºåŠŸèƒ½æ–¹æ³•ï¼‰</p>
</li>
<li><p>åœ¨é…ç½®æ–‡ä»¶/æ³¨è§£å½“ä¸­ï¼Œé…ç½®ç»‡å…¥å…³ç³»ï¼Œå³å°†é‚£äº›é€šçŸ¥ä¸å“ªäº›è¿æ¥ç‚¹è¿›è¡Œç»“åˆ</p>
</li>
</ol>
<p>AOPæŠ€æœ¯å®ç°çš„å†…å®¹ï¼š<br>Springæ¡†æ¶ä¼šç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œâ€“é€šè¿‡é…ç½®æ–‡ä»¶å†³å®šå“ªäº›æ–¹æ³•æ˜¯åˆ‡ç‚¹ï¼›ä¸€æ—¦ç›‘æ§åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œå³ä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡ï¼ˆåˆ‡ç‚¹ï¼‰çš„ä»£ç†å¯¹è±¡ã€‚ç„¶åæ ¹æ®é…ç½®æ–‡ä»¶é…ç½®çš„å¢å¼ºç±»å‹ï¼ˆé€šçŸ¥ï¼‰ï¼Œåœ¨ä»£ç†å¯¹è±¡ï¼ˆåˆ‡ç‚¹ï¼‰å¯¹åº”çš„ä½ç½®ï¼Œå°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚<br>é…ç½®æ–‡ä»¶-æ‰§è¡Œåˆ‡ç‚¹æ–¹æ³•-ç›‘æ§åˆ°å¹¶åŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨ä»£ç†å¯¹è±¡åŒåæ–¹æ³•-å†…éƒ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œè¿›è¡Œå¢å¼ºæ–¹æ³•çš„ä»‹å…¥ã€‚</p>
<p>AOPåº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼ï¼š<br>Springä¼šæ ¹æ®ç›®æ ‡ç±»æ˜¯å¦å®ç°äº†æ¥å£æ¥å†³å®šé‡‡ç”¨å“ªç§åŠ¨æ€ä»£ç†ã€‚</p>
<h3 id="å®è·µ-é…ç½®æ–‡ä»¶"><a href="#å®è·µ-é…ç½®æ–‡ä»¶" class="headerlink" title="å®è·µ-é…ç½®æ–‡ä»¶"></a>å®è·µ-é…ç½®æ–‡ä»¶</h3><p>æ–°å»ºä¸ªspringé¡¹ç›®</p>
<ol>
<li><p>å¯¼å…¥ç›¸å…³ä¾èµ–ï¼šspring-contextã€spring-coreã€spring-beansï¼Œè¿˜æœ‰åˆ‡é¢çš„åŒ… Aspectjweaver</p>
</li>
<li><p>æ–°å»ºserviceæ¥å£ï¼Œæ–°å»ºå®ç°ç±»Impl</p>
</li>
<li><p>æ–°å»ºåˆ‡é¢ç±»ï¼Œå®šä¹‰åˆ‡é¢æ–¹æ³•</p>
</li>
<li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼€å¯æ³¨è§£æ‰«æ  --&gt;</span><br><span class="line">&lt;context:component-scan base-package=&quot;com.aop.demo&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;aop:config proxy-target-class=&quot;false&quot;&gt;</span><br><span class="line">    &lt;aop:pointcut id=&quot;userServiceImplPointcut&quot; expression=&quot;execution(* com.aop.demo.UserServiceImpl.addUser(..))&quot; /&gt;</span><br><span class="line">    &lt;aop:aspect id=&quot;aopClass&quot; ref=&quot;aopMethods&quot;&gt;</span><br><span class="line">        &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;userServiceImplPointcut&quot; /&gt;</span><br><span class="line">        &lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;userServiceImplPointcut&quot; /&gt;</span><br><span class="line">    &lt;/aop:aspect&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>æµ‹è¯•æ–¹æ³•<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class AopTest &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void testUserServiceAop()&#123;</span><br><span class="line">        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring-aop.xml&quot;);</span><br><span class="line">        // proxy-target-class=&quot;false&quot; æ—¶ï¼Œä½¿ç”¨jdkä»£ç†</span><br><span class="line">        // å¼ºåˆ¶è½¬æ¢å¿…é¡»ç”¨çˆ¶ç±»æ¥å£æ¥å®šä¹‰</span><br><span class="line">        UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">        userService.addUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>âš ï¸ proxy-target-class=â€falseâ€ æˆ–é»˜è®¤è¡¨ç¤ºä½¿ç”¨jdkä»£ç†ï¼Œè·å–å¯¹è±¡éœ€è¦ç”¨çˆ¶ç±»æ¥å£ï¼Œç”¨å®ç°ç±»ä¼šæŠ¥<code>java.lang.ClassCastException: com.sun.proxy.$Proxy* cannot be cast to***</code> çš„é”™è¯¯ã€‚</p>
<p>âš ï¸ proxy-target-class=â€trueâ€æ—¶ï¼Œä½¿ç”¨cglibä»£ç†ï¼Œä½¿ç”¨çˆ¶ç±»æ¥å£ä¹Ÿå¯ä»¥ï¼Œä½¿ç”¨å®ç°ç±»å®šä¹‰å¯¹è±¡ä¹Ÿå¯ä»¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">UserServiceImpl userService = (UserServiceImpl)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">userService.addUser();</span><br></pre></td></tr></table></figure>

<p>âš ï¸ å¦å¤–ï¼Œè¿˜æœ‰ä¸ªç°è±¡æ˜¯åœ¨jdkä»£ç†æ—¶å­˜åœ¨çš„bugï¼š<br>åŸæœ¬çš„ï¼š <code>UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</code> å¯ä»¥è·å¾—beanï¼Œæ²¡é—®é¢˜ã€‚<br>ä½†æ˜¯ï¼š <code>UserService userService = (UserService)context.getBean(UserServiceImpl.class);</code>  é€šè¿‡ç±»çš„å…¨è·¯å¾„è·å¾—beanå°±ä¼šå‡ºç°<code>No qualifying bean of type</code> çš„é—®é¢˜ã€‚<br>æ€»ç»“ï¼šjdkä»£ç†æ–¹å¼ä¸ç”¨å®ç°ç±»ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šç”¨å®ç°ç±»çš„beanï¼Œå³ä½¿é…äº†å®ç°ç±»çš„beanï¼Œä¹Ÿä¸è¡Œã€‚</p>
<p>åŸå› ï¼šspring aopé»˜è®¤æ˜¯ä½¿ç”¨jdkåŠ¨æ€ä»£ç†çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘é€šè¿‡getBean(ServiceImpl.class)ï¼Œè¡¨è¾¾å‡ºçš„æ„æ€æ˜¯å¸Œæœ›ç¨‹åºé€šè¿‡jdkåŠ¨æ€ä»£ç†ç»™æˆ‘ä¸€ä¸ªServiceImplç±»ã€‚è€Œjdkçš„åŠ¨æ€ä»£ç†æ˜¯åŸºäºæ¥å£å®ç°çš„ï¼Œå› ä¸ºå®ƒæœ¬èº«è¦ç»§æ‰¿ä¸€ä¸ªProxyç±»ï¼Œè€Œjavaæ˜¯å•ç»§æ‰¿ï¼ˆæ¥å£å¯ä»¥å¤šç»§æ‰¿ï¼‰ï¼Œæ‰€ä»¥å®ƒé€šè¿‡å®ç°æ¥å£è¿›è¡Œä»£ç†ã€‚å®ƒé€šè¿‡å®ç°æˆ‘ä»¬ç»™å®ƒçš„æ¥å£å’Œç»§æ‰¿Proxyç±»å®ç°jdkåŠ¨æ€ä»£ç†ã€‚è€Œæˆ‘ä»¬ç»™å®ƒçš„æ˜¯ä¸€ä¸ªServiceImplç±»ï¼Œè¿™ä¸ªæ—¶å€™jdkåŠ¨æ€ä»£ç†å°±æ²¡æœ‰åŠæ³•äº†ã€‚<br>jdkåŠ¨æ€ä»£ç†äº§ç”Ÿçš„å¯¹è±¡å±äºProxyç±»å‹ï¼Œå±äºç»™å®šçš„æ¥å£ï¼ˆServiceï¼‰ç±»å‹ï¼Œä½†ä¸å±äºæˆ‘ä»¬è¦ä»£ç†çš„é‚£ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æœ¬ä»£ç ä¸­ServiceImplç±»å‹<br>å› æ­¤ï¼Œä½¿ç”¨æ¥å£çš„ç±»è·¯å¾„ï¼š<code>UserService userService = (UserService)context.getBean(UserService.class);</code> ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚è¿™ä¹Ÿè§£é‡Šäº†å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ã€‚<br>ä½†æ˜¯ï¼Œæ¢æˆcglibï¼Œå®ç°ç±»/çˆ¶ç±»æ¥å£ï¼Œè·å–beançš„æ–¹å¼ï¼šid/ç±»è·¯å¾„ï¼Œéƒ½å¯ä»¥ï¼Œæ²¡è§£é‡Šå·¥ä½œä¸­ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æ¢æˆcglibçš„é—®é¢˜ã€‚</p>
<p>æ€»ç»“ï¼š<br>jdkä»£ç†ï¼šå¿…é¡»çˆ¶ç±»æ¥å£è·å¾—beanï¼Œæ‹¬å·å†…å¯ä»¥æ˜¯å®ç°ç±»çš„bean idï¼Œä¹Ÿå¯ä»¥æ˜¯çˆ¶ç±»æ¥å£çš„å…¨è·¯å¾„ã€‚<br>cglibä»£ç†ï¼šæ€ä¹ˆéƒ½è¡Œã€‚</p>
<h3 id="å®è·µ-æ³¨è§£"><a href="#å®è·µ-æ³¨è§£" class="headerlink" title="å®è·µ-æ³¨è§£"></a>å®è·µ-æ³¨è§£</h3><ol>
<li><p>ä½¿ç”¨@Aspectæ³¨è§£ï¼Œå‡ºäº†aspectweaveråŒ…ä¹‹å¤–ï¼Œè¿˜éœ€è¦aspectjrtåŒ…</p>
</li>
<li><p>æ–°å»ºserviceæ¥å£ï¼Œæ–°å»ºå®ç°ç±»Impl</p>
</li>
<li><p>æ–°å»ºåˆ‡é¢ç±»ï¼Œå®šä¹‰åˆ‡é¢æ–¹æ³•</p>
</li>
<li><p>ç¼–å†™é…ç½®ç±»</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@ComponentScan(basePackages = &#123;&quot;com.aop.demo.zhujie&quot;&#125;)</span><br><span class="line">@EnableAspectJAutoProxy(proxyTargetClass = false)</span><br><span class="line">public class SpringCfg &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = new AnnotationConfigApplicationContext(SpringCfg.class);  //åŠ è½½é…ç½®ç±»</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå’Œé…ç½®æ–‡ä»¶ä¸€æ ·ã€‚</p>
<h3 id="githubåœ°å€"><a href="#githubåœ°å€" class="headerlink" title="githubåœ°å€"></a>githubåœ°å€</h3><p><a target="_blank" rel="noopener" href="https://github.com/jadeliuliu/aop-demo">https://github.com/jadeliuliu/aop-demo</a></p>
<p>å‚è€ƒï¼š<br>çŸ¥è¯†ç‚¹ï¼š<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Zhang-DevelopingPlatform/p/14723490.html">https://www.cnblogs.com/Zhang-DevelopingPlatform/p/14723490.html</a></p>
<p>jdkä»£ç†æ‰¾ä¸åˆ°beanï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32080243/article/details/90261768">https://blog.csdn.net/qq_32080243/article/details/90261768</a></p>
<p>cglibå®ç°ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/shaoweijava/article/details/76474652">https://blog.csdn.net/shaoweijava/article/details/76474652</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jade liu"
      src="/images/head.gif">
  <p class="site-author-name" itemprop="name">Jade liu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">104</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jadeliuliu" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;jadeliuliu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jadeliu1998@163.com" title="E-Mail â†’ mailto:jadeliu1998@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/jadeliu1998" title="CSDN â†’ https:&#x2F;&#x2F;blog.csdn.net&#x2F;jadeliu1998" rel="noopener" target="_blank"><i class="fab fa-google fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5823044646" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5823044646" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jade liu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>





        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
