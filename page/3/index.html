<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Jadeliu&#39;s blog">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Jadeliu&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jade liu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Jadeliu's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jadeliu's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/14/myblog/JAVA/java%20junit%E4%B8%8Emock%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/14/myblog/JAVA/java%20junit%E4%B8%8Emock%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">javaçš„junitä¸mockæµ‹è¯•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-14 22:22:37" itemprop="dateCreated datePublished" datetime="2022-04-14T22:22:37+08:00">2022-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-30 16:00:12" itemprop="dateModified" datetime="2022-10-30T16:00:12+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å•å…ƒæµ‹è¯•(Unit test)ï¼š<br>å•å…ƒæµ‹è¯•å…³æ³¨å•ä¸€çš„ç±». å®ƒä»¬å­˜åœ¨çš„ç›®çš„æ˜¯æ£€æŸ¥è¿™ä¸ªç±»ä¸­çš„ä»£ç æ˜¯å¦æŒ‰ç…§æœŸæœ›æ­£ç¡®è¿è¡Œ.<br>ç‰¹å¾ï¼šå¿«é€Ÿã€ç‹¬ç«‹ã€å¯é‡å¤ã€è‡ªæ£€æŸ¥ï¼ˆä¸åŠ mainä¸æ‰“æ—¥å¿—ï¼‰<br>æ ¸å¿ƒä»·å€¼ï¼šç¼©çŸ­åé¦ˆå‘¨æœŸï¼Œé™ä½ç¼ºé™·ä¿®å¤æˆæœ¬ï¼Œç†è§£ä»£ç æ„å›¾</p>
<p>é›†æˆæµ‹è¯•(Integration test)<br>é¡¾åæ€ä¹‰, é›†æˆæµ‹è¯•æ˜¯æ£€æŸ¥å¼€å‘çš„æ¨¡å—å’Œå…¶ä»–æ¨¡å—æ•´åˆæ—¶æ˜¯å¦æ­£å¸¸å·¥ä½œ.<br>è™½ç„¶é›†æˆæµ‹è¯•çš„ä»£ç å½±å“èŒƒå›´æ¯”å•å…ƒæµ‹è¯•è¦å¹¿, ä½†æ˜¯é›†æˆæµ‹è¯•å’Œå•å…ƒæµ‹è¯•ä¸€æ ·, ä¹Ÿæ˜¯é’ˆå¯¹äºå¼€å‘è€…è€Œè¨€çš„.<br>é›†æˆæµ‹è¯•æ˜¯å¯¹å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰æœ‰ä¾èµ–çš„æµ‹è¯•ã€‚</p>
<p>ç«¯åˆ°ç«¯æµ‹è¯•(End-to-End test)<br>ç«¯åˆ°ç«¯æµ‹è¯•æ˜¯å°†æ•´ä¸ªç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“, ç„¶åä»ç”¨æˆ·çš„è§’åº¦è¿›è¡Œæµ‹è¯•çš„.<br>ç«¯åˆ°ç«¯æµ‹è¯•çš„ç›®çš„æ˜¯æµ‹è¯•ç³»ç»Ÿåœ¨å®é™…ä½¿ç”¨çš„æ˜¯å¦æ­£å¸¸çš„, å› æ­¤é€šå¸¸æ¥è¯´æ˜¯ä¸éœ€è¦æµ‹è¯•æ›¿èº«çš„(Test Double)</p>
<h2 id="1-Junitå•å…ƒæµ‹è¯•"><a href="#1-Junitå•å…ƒæµ‹è¯•" class="headerlink" title="1.Junitå•å…ƒæµ‹è¯•"></a>1.Junitå•å…ƒæµ‹è¯•</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å•å…ƒæµ‹è¯•çš„ç›®çš„: æµ‹è¯•å½“å‰æ‰€å†™çš„ä»£ç æ˜¯å¦æ˜¯æ­£ç¡®çš„, ä¾‹å¦‚è¾“å…¥ä¸€ç»„æ•°æ®, ä¼šè¾“å‡ºæœŸæœ›çš„æ•°æ®; è¾“å…¥é”™è¯¯æ•°æ®, ä¼šäº§ç”Ÿé”™è¯¯å¼‚å¸¸ç­‰.</p>
<p>åœ¨å•å…ƒæµ‹è¯•ä¸­, æˆ‘ä»¬éœ€è¦ä¿è¯è¢«æµ‹ç³»ç»Ÿæ˜¯ç‹¬ç«‹çš„(SUT æ²¡æœ‰ä»»ä½•çš„ DOC), å³å½“è¢«æµ‹ç³»ç»Ÿé€šè¿‡æµ‹è¯•æ—¶, é‚£ä¹ˆå®ƒåœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½æ˜¯èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„. ç¼–å†™å•å…ƒæµ‹è¯•æ—¶, ä»…ä»…éœ€è¦å…³æ³¨å•ä¸ªç±»å°±å¯ä»¥äº†. è€Œä¸éœ€è¦å…³æ³¨ä¾‹å¦‚æ•°æ®åº“æœåŠ¡, Web æœåŠ¡ç­‰ç»„ä»¶.</p>
<p>ã€SUTã€‘è¢«æµ‹ç³»ç»Ÿ(System under test, SUT) è¢«æµ‹ç³»ç»Ÿã€‚æ ¹æ®æµ‹è¯•ç±»å‹çš„ä¸åŒ, SUT æŒ‡ä»£çš„å†…å®¹ä¹Ÿä¸åŒ, ä¾‹å¦‚ SUT å¯ä»¥æ˜¯ä¸€ä¸ªç±»ç”šè‡³æ˜¯ä¸€æ•´ä¸ªç³»ç»Ÿ.</p>
<p>ã€DOCã€‘è¢«æµ‹ç³»ç»Ÿæ‰€ä¾èµ–çš„ç»„ä»¶, ä¾‹å¦‚è¿›ç¨‹ UserService çš„å•å…ƒæµ‹è¯•æ—¶, UserService ä¼šä¾èµ– UserDao, å› æ­¤ UserDao å°±æ˜¯ DOC</p>
<p>ã€Test Doubleã€‘æµ‹è¯•æ›¿èº«<br>ä¸€ä¸ªå®é™…çš„ç³»ç»Ÿä¼šä¾èµ–å¤šä¸ªå¤–éƒ¨å¯¹è±¡, ä½†æ˜¯åœ¨è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶, æˆ‘ä»¬ä¼šç”¨ä¸€äº›åŠŸèƒ½è¾ƒä¸ºç®€å•çš„å¹¶ä¸”å…¶è¡Œä¸ºå’Œå®é™…å¯¹è±¡ç±»ä¼¼çš„å‡å¯¹è±¡æ¥ä½œä¸º SUT çš„ä¾èµ–å¯¹è±¡, ä»¥æ­¤æ¥é™ä½å•å…ƒæµ‹è¯•çš„å¤æ‚æ€§å’Œå¯å®ç°æ€§. åœ¨è¿™é‡Œ, è¿™äº›å‡å¯¹è±¡å°±è¢«ç§°ä¸º æµ‹è¯•æ›¿èº«(Test Double).</p>
<p>æµ‹è¯•æ›¿èº«æœ‰ä»¥ä¸‹äº”ç§ï¼š</p>
<p>1.Test stub, ä¸º SUT æä¾›æ•°æ®çš„å‡å¯¹è±¡ã€‚stub ç±»æœ‰æ—¶å€™è¿˜ä¼šè®°å½•è°ƒç”¨çš„ä¸€äº›ä¿¡æ¯ã€‚</p>
<p>2.Fake objectï¼Œå®ç°äº†ç®€å•åŠŸèƒ½çš„ä¸€ä¸ªå‡å¯¹è±¡. Fake object å’Œ Test stub çš„ä¸»è¦åŒºåˆ«å°±æ˜¯ Test stub ä¾§é‡äºç”¨äºæä¾›æ•°æ®çš„å‡å¯¹è±¡, è€Œ Fake object æ²¡æœ‰è¿™å±‚å«ä¹‰ï¼Œä½¿ç”¨ Fake object çš„æœ€ä¸»è¦çš„åŸå› å°±æ˜¯åœ¨æµ‹è¯•æ—¶æŸäº›ç»„ä»¶ä¸å¯ç”¨æˆ–è¿è¡Œé€Ÿåº¦å¤ªæ…¢, å› è€Œä½¿ç”¨ Fake object æ¥ä»£æ›¿å®ƒä»¬.<br>è­¬å¦‚è¯´ï¼Œå®ƒå­˜åœ¨å†…å­˜ä¸­è€Œä¸æ˜¯çœŸæ­£çš„æ•°æ®åº“ä¸­ã€‚</p>
<p>3.Mock object<br>æ˜¯æŒ‡ç±»æˆ–è€…æ¥å£çš„æ¨¡æ‹Ÿå®ç°ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå¯¹è±¡ä¸­æŸä¸ªæ–¹æ³•çš„è¾“å‡ºç»“æœã€‚<br>å®é™…ä¸Š, Mock object æ˜¯ Test stub æˆ– Fake object ä¸€ç§, ä½†æ˜¯ Mock object æœ‰ Test stub/Fake object æ²¡æœ‰çš„ç‰¹æ€§, Mock object å¯ä»¥å¾ˆçµæ´»åœ°é…ç½®æ‰€è°ƒç”¨çš„æ–¹æ³•æ‰€äº§ç”Ÿçš„è¡Œä¸º, å¹¶ä¸”å®ƒå¯ä»¥è¿½è¸ªæ–¹æ³•è°ƒç”¨, ä¾‹å¦‚ä¸€ä¸ª Mock Object æ–¹æ³•è°ƒç”¨æ—¶ä¼ é€’äº†å“ªäº›å‚æ•°, æ–¹æ³•è°ƒç”¨äº†å‡ æ¬¡ç­‰.</p>
<p>4.Dummy object: åœ¨æµ‹è¯•ä¸­å¹¶ä¸ä½¿ç”¨çš„, ä½†æ˜¯ä¸ºäº†æµ‹è¯•ä»£ç èƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘/è¿è¡Œè€Œæ·»åŠ çš„å¯¹è±¡. ä¾‹å¦‚æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ª Test Double å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•, è¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ é€’å‡ ä¸ªå‚æ•°, ä½†æ˜¯å…¶ä¸­æŸä¸ªå‚æ•°æ— è®ºæ˜¯ä»€ä¹ˆå€¼éƒ½ä¸ä¼šå½±å“æµ‹è¯•çš„ç»“æœ, é‚£ä¹ˆè¿™ä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ª Dummy object.<br>Dummy object å¯ä»¥æ˜¯ä¸€ä¸ªç©ºå¼•ç”¨, ä¸€ä¸ªç©ºå¯¹è±¡æˆ–è€…æ˜¯ä¸€ä¸ªå¸¸é‡ç­‰.<br>ç®€å•çš„è¯´, Dummy object å°±æ˜¯é‚£äº›æ²¡æœ‰ä½¿ç”¨åˆ°çš„, ä»…ä»…æ˜¯ä¸ºäº†å¡«å……å‚æ•°åˆ—è¡¨çš„å¯¹è±¡.</p>
<p>5.Test Spy<br>å¯ä»¥åŒ…è£…ä¸€ä¸ªçœŸå®çš„ Java å¯¹è±¡, å¹¶è¿”å›ä¸€ä¸ªåŒ…è£…åçš„æ–°å¯¹è±¡. è‹¥æ²¡æœ‰ç‰¹åˆ«é…ç½®çš„è¯, å¯¹è¿™ä¸ªæ–°å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•è°ƒç”¨, éƒ½ä¼šå§”æ´¾ç»™å®é™…çš„ Java å¯¹è±¡.</p>
<p>mock å’Œ spy çš„åŒºåˆ«æ˜¯: mock æ˜¯æ— ä¸­ç”Ÿæœ‰åœ°ç”Ÿå‡ºä¸€ä¸ª<strong>å®Œå…¨è™šæ‹Ÿçš„å¯¹è±¡</strong>, å®ƒçš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯è™šæ‹Ÿçš„; è€Œ spy æ˜¯åœ¨ç°æœ‰ç±»çš„åŸºç¡€ä¸ŠåŒ…è£…äº†ä¸€ä¸ªå¯¹è±¡, å³å¦‚æœæˆ‘ä»¬æ²¡æœ‰é‡å†™ spy çš„æ–¹æ³•, é‚£ä¹ˆè¿™äº›æ–¹æ³•çš„å®ç°å…¶å®éƒ½æ˜¯è°ƒç”¨çš„è¢«åŒ…è£…çš„å¯¹è±¡çš„æ–¹æ³•.</p>
<p>ã€test fixtureã€‘æµ‹è¯•çš„å…ˆå†³æ¡ä»¶ï¼Œ<br>@Before åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿è¡Œå‰éƒ½ä¼šè¢«è°ƒç”¨, @After åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿è¡Œåéƒ½ä¼šè¢«è°ƒç”¨.<br>å› ä¸º @Before å’Œ @After ä¼šåœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•å‰åéƒ½ä¼šè¢«è°ƒç”¨, è€Œæœ‰æ—¶æˆ‘ä»¬ä»…ä»…éœ€è¦åœ¨æµ‹è¯•å‰è¿›è¡Œä¸€æ¬¡åˆå§‹åŒ–, è¿™æ ·çš„æƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨@BeforeClass å’Œ@AfterClass æ³¨è§£.</p>
<p>ã€test caseã€‘æµ‹è¯•ç”¨ä¾‹<br>åœ¨ JUnit 3ä¸­, æµ‹è¯•æ–¹æ³•éƒ½å¿…é¡»ä»¥ test ä¸ºå‰ç¼€, ä¸”å¿…é¡»æ˜¯ public void çš„, JUnit 4ä¹‹å, å°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶äº†, åªè¦åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ ‡æ³¨ @Test æ³¨è§£, æ–¹æ³•ç­¾åå¯ä»¥æ˜¯ä»»æ„çš„.</p>
<p>ã€æµ‹è¯•å¥—ä»¶ã€‘é€šè¿‡ TestSuit å¯¹è±¡å°†å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ç»„è£…æˆä¸€ä¸ªæµ‹è¯•å¥—ä»¶, æµ‹è¯•å¥—ä»¶æ‰¹é‡è¿è¡Œ.<br>é€šè¿‡@RunWith å’Œ@SuteClass ä¸¤ä¸ªæ³¨è§£, æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•å¥—ä»¶. é€šè¿‡@RunWith æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„è¿è¡Œå™¨, å¹¶é€šè¿‡@SuiteClasses æ³¨è§£, å°†éœ€è¦è¿›è¡Œæµ‹è¯•çš„ç±»åˆ—è¡¨ä½œä¸ºå‚æ•°ä¼ å…¥.</p>
<h3 id="Junit4æ³¨è§£"><a href="#Junit4æ³¨è§£" class="headerlink" title="Junit4æ³¨è§£"></a>Junit4æ³¨è§£</h3><p>@Test (expected = Exception.class) è¡¨ç¤ºé¢„æœŸä¼šæŠ›å‡ºException.class çš„å¼‚å¸¸</p>
<p>@Ignore å«ä¹‰æ˜¯â€œæŸäº›æ–¹æ³•å°šæœªå®Œæˆï¼Œæš‚ä¸å‚ä¸æ­¤æ¬¡æµ‹è¯•â€ã€‚è¿™æ ·çš„è¯æµ‹è¯•ç»“æœå°±ä¼šæç¤ºä½ æœ‰å‡ ä¸ªæµ‹è¯•è¢«å¿½ç•¥ï¼Œè€Œä¸æ˜¯å¤±è´¥ã€‚ä¸€æ—¦ä½ å®Œæˆäº†ç›¸åº”å‡½æ•°ï¼Œåªéœ€è¦æŠŠ@Ignoreæ³¨è§£åˆ å»ï¼Œå°±å¯ä»¥è¿›è¡Œæ­£å¸¸çš„æµ‹è¯•ã€‚</p>
<p>@Test(timeout=100) è¡¨ç¤ºé¢„æœŸæ–¹æ³•æ‰§è¡Œä¸ä¼šè¶…è¿‡ 100 æ¯«ç§’ï¼Œæ§åˆ¶æ­»å¾ªç¯</p>
<p>@Before è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ä¹‹ç±»çš„æ“ä½œ</p>
<p>@After è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œé‡Šæ”¾èµ„æºï¼Œå›æ”¶å†…å­˜ä¹‹ç±»çš„æ“</p>
<p>@BeforeClass è¡¨ç¤ºè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œæ•°æ®åº“è¿æ¥æ“ä½œï¼Œæ³¨æ„è¯¥æ³¨è§£è¿ç”¨åœ¨é™æ€æ–¹æ³•ã€‚</p>
<p>@AfterClass è¡¨ç¤ºè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ–¹æ³•ä¹‹åæ‰§è¡Œã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œæ•°æ®åº“è¿æ¥å…³é—­æ“ä½œï¼Œæ³¨æ„è¯¥æ³¨è§£è¿ç”¨åœ¨é™æ€æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import org.junit.runner.RunWith;  </span><br><span class="line">import org.junit.runners.Suite;  </span><br><span class="line">import org.junit.runners.Suite.SuiteClasses;  </span><br><span class="line">  </span><br><span class="line">@RunWith( Suite.class )  </span><br><span class="line">@SuiteClasses( &#123; JUnitTest1.class, JUnitTest2.class &#125; )  </span><br><span class="line">public class AllTests &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœ‰å¤šä¸ªæµ‹è¯•ç±», å¯ä»¥åˆå¹¶æˆä¸€ä¸ªæµ‹è¯•å¥—ä»¶è¿›è¡Œæµ‹è¯•, è¿è¡Œä¸€ä¸ª Test Suite, é‚£ä¹ˆå°±ä¼šè¿è¡Œåœ¨è¿™ä¸ª Test Suite ä¸­çš„æ‰€ç”¨çš„æµ‹è¯•.<br>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Test Suite, è¿™ä¸ª Test Suite åŒ…å«äº†ä¸¤ä¸ªæµ‹è¯•ç±»: JUnitTest1 å’Œ JUnitTest2, å› æ­¤è¿è¡Œ è¿™ä¸ª Test Suite æ—¶, å°±ä¼šè‡ªåŠ¨è¿è¡Œè¿™ä¸¤ä¸ªæµ‹è¯•ç±»äº†.</p>
<p>*åœ¨ç±»åä¸ŠæŒ‰ä¸‹command+shift+tï¼Œå°±å¯ä»¥ç”Ÿæˆå¯¹åº”æµ‹è¯•ç±»ã€‚</p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000006731125">https://segmentfault.com/a/1190000006731125</a></p>
<h2 id="2-Mockitoä¸­-Mockä¸-InjectMock"><a href="#2-Mockitoä¸­-Mockä¸-InjectMock" class="headerlink" title="2.Mockitoä¸­@Mockä¸@InjectMock"></a>2.Mockitoä¸­@Mockä¸@InjectMock</h2><p>Mockito æ˜¯ä¸€ä¸ªæµè¡Œ mock æ¡†æ¶ï¼Œå¯ä»¥å’ŒJUnitç»“åˆèµ·æ¥ä½¿ç”¨ã€‚Mockito å…è®¸ä½ åˆ›å»ºå’Œé…ç½® mock å¯¹è±¡ã€‚<br>Mockitoæ˜¯javaå•å…ƒæµ‹è¯•ä¸­ï¼Œæœ€å¸¸ç”¨çš„mckå·¥å…·ä¹‹ä¸€ï¼Œæä¾›äº†è¯¸å¤šæ‰“æ¡©æ–¹æ³•å’Œæ³¨è§£ã€‚å…¶ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ³¨è§£ï¼Œ@Mockå’Œ@InjectMockï¼Œåå­—å’Œåœ¨ä»£ç ä¸­ä½¿ç”¨ çš„ä½ç½®éƒ½å¾ˆåƒã€‚ä½†æ˜¯æ˜¯åœ¨åŠŸèƒ½ä¸Šæ— ä»»ä½•å¯ç±»æ¯”æ€§çš„å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚<br>ç¨‹åºå‘˜é€šå¸¸åˆ›é€ æ¨¡æ‹Ÿå¯¹è±¡æ¥æµ‹è¯•å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºï¼Œå¾ˆç±»ä¼¼æ±½è½¦è®¾è®¡è€…ä½¿ç”¨ç¢°æ’æµ‹è¯•å‡äººæ¥æ¨¡æ‹Ÿè½¦è¾†ç¢°æ’ä¸­äººçš„åŠ¨æ€è¡Œä¸ºã€‚</p>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨mockï¼Ÿ<br>åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæ¨¡æ‹Ÿå¯¹è±¡å¯ä»¥æ¨¡æ‹Ÿå¤æ‚çš„ã€çœŸå®çš„ï¼ˆéæ¨¡æ‹Ÿï¼‰å¯¹è±¡çš„è¡Œä¸ºï¼Œ å¦‚æœçœŸå®çš„å¯¹è±¡æ— æ³•æ”¾å…¥å•å…ƒæµ‹è¯•ä¸­ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡å°±å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å•å…ƒæµ‹è¯•çš„æ€è·¯æ˜¯åœ¨ä¸æ¶‰åŠä¾èµ–å…³ç³»çš„æƒ…å†µä¸‹æµ‹è¯•ä»£ç ï¼ˆéš”ç¦»æ€§ï¼‰ï¼Œæ‰€ä»¥æµ‹è¯•ä»£ç ä¸å…¶ä»–ç±»æˆ–è€…ç³»ç»Ÿçš„å…³ç³»åº”è¯¥å°½é‡è¢«æ¶ˆé™¤ã€‚ä¸€ä¸ªå¯è¡Œçš„æ¶ˆé™¤æ–¹æ³•æ˜¯æ›¿æ¢æ‰ä¾èµ–ç±»ï¼ˆæµ‹è¯•æ›¿æ¢ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›¿èº«æ¥æ›¿æ¢æ‰çœŸæ­£çš„ä¾èµ–å¯¹è±¡ã€‚</p>
<h3 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h3><p>@Mockï¼š<br>åœ¨Mockitoä¸­ç”¨äºåˆ›å»ºmockå¯¹è±¡ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><code>@Mock</code><br><code>private ClassName mockedObjectï¼›</code></p>
<p>ä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸ºmockedObjectï¼Œç±»å‹ä¸ºClassNameçš„mockå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰€æœ‰çš„æ–¹æ³•è¢«ç½®ç©ºï¼Œæ ¹æ®æµ‹è¯•ä»£ç é€»è¾‘çš„éœ€è¦ä½¿ç”¨.</p>
<hr>
<p>@InjectMockï¼š<br>åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œç®€å•çš„è¯´æ˜¯è¿™ä¸ªMockå¯ä»¥è°ƒç”¨çœŸå®ä»£ç çš„æ–¹æ³•ï¼Œå…¶ä½™ç”¨@Mockï¼ˆæˆ–@Spyï¼‰æ³¨è§£åˆ›å»ºçš„mockå°†è¢«æ³¨å…¥åˆ°ç”¨è¯¥å®ä¾‹ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(MockitoJUnitRunner.class)  </span><br><span class="line">public class Test &#123;  </span><br><span class="line">  </span><br><span class="line">    @InjectMocks  </span><br><span class="line">    private SomeHandler someHandler;  </span><br><span class="line">  </span><br><span class="line">    @Mock  </span><br><span class="line">    private OneDependency oneDependency; // æ­¤mockå°†è¢«æ³¨å…¥åˆ°someHandler  </span><br><span class="line"></span><br><span class="line">    // ...   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¸­ï¼Œ@InjectMockä¸‹é¢å£°æ˜äº†ä¸€ä¸ªå¾…æµ‹è¯•çš„å¯¹è±¡ï¼Œ@Mockå®šä¹‰çš„mockå¯¹è±¡å°†ä¼šè¢«æ³¨å…¥åˆ°è¿™ä¸ªå¾…æµ‹è¯•çš„å¯¹è±¡ä¸­ã€‚</p>
<hr>
<p>ğŸ¤” @Mockåˆ›å»ºåˆ›å»ºmockå¯¹è±¡ä¹‹åï¼Œåœ¨å¯¹å…·ä½“çš„æ–¹æ³•æ‰“æ¡©ä¹‹å‰ï¼Œmockå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•å…¨è¢«ç½®ç©ºï¼ˆ0æˆ–è€…nullï¼‰ï¼Œæ‰€ä»¥ï¼Œå¯¹åº”çš„æ–¹æ³•æ˜¯ä¸è¿è¡Œçš„ã€‚<br>*mockå¯¹è±¡åˆ›å»ºä¹‹åï¼Œè¢«æµ‹è¯•ç±»ä¸­çš„è¯¥å¯¹è±¡çš„æ–¹æ³•å°±éƒ½ä¸æ‰§è¡Œäº†ã€‚</p>
<p>ğŸ¤” @Spyå¯ä»¥åˆ›å»ºçš„å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•éƒ½ä¼šæŒ‰ç…§åŸæ–¹æ³•çš„é€»è¾‘æ‰§è¡Œï¼Œç›´åˆ°è¢«æ‰“æ¡©è¿”å›æŸä¸ªå…·ä½“çš„å€¼ã€‚</p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/langren1992/p/9681600.html">https://www.cnblogs.com/langren1992/p/9681600.html</a></p>
<h3 id="mockä½¿ç”¨"><a href="#mockä½¿ç”¨" class="headerlink" title="mockä½¿ç”¨"></a>mockä½¿ç”¨</h3><p>mavenæ³¨å…¥ä¾èµ–ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨æ³¨è§£ï¼Œé‚£ä¹ˆå¿…é¡»è¦å®ä¾‹åŒ– mock å¯¹è±¡ã€‚Mockito åœ¨é‡åˆ°ä½¿ç”¨æ³¨è§£çš„å­—æ®µçš„æ—¶å€™å¿…é¡»ä½¿ç”¨@RunWith(MockitoJUnitRunner.class) æˆ– MockitoAnnotations.initMocks(this)è¿›è¡Œmocksçš„åˆå§‹åŒ–å’Œæ³¨å…¥ã€‚<br>(å¯ä»¥å†™ä¸€ä¸ªinitå‡½æ•°ï¼ŒåŠ @Beforeæ³¨è§£)</p>
<h4 id="é…ç½®mock"><a href="#é…ç½®mock" class="headerlink" title="é…ç½®mock"></a>é…ç½®mock</h4><p>when(â€¦â€‹.).thenReturn(â€¦â€‹.)å¯ä»¥è¢«ç”¨æ¥å®šä¹‰å½“æ¡ä»¶æ»¡è¶³æ—¶å‡½æ•°çš„è¿”å›å€¼ï¼Œå½“å¤šæ¬¡è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼ŒMockito ä¼šæ ¹æ®ä½ å®šä¹‰çš„å…ˆåé¡ºåºæ¥è¿”å›è¿”å›å€¼ï¼ˆå¤šæ¬¡è°ƒç”¨ï¼‰ã€‚Mocks è¿˜å¯ä»¥æ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒæ¥å®šä¹‰ä¸åŒçš„è¿”å›å€¼ã€‚è­¬å¦‚è¯´ä½ çš„å‡½æ•°å¯ä»¥å°†anyString æˆ–è€… anyIntä½œä¸ºè¾“å…¥å‚æ•°ï¼Œç„¶åå®šä¹‰å…¶ç‰¹å®šçš„æ”¾å›å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void test1()  &#123;</span><br><span class="line">        //  åˆ›å»º mock</span><br><span class="line">        MyClass test = Mockito.mock(MyClass.class);</span><br><span class="line"></span><br><span class="line">        // è‡ªå®šä¹‰ getUniqueId() çš„è¿”å›å€¼</span><br><span class="line">        when(test.getUniqueId()).thenReturn(43);</span><br><span class="line"></span><br><span class="line">        // åœ¨æµ‹è¯•ä¸­ä½¿ç”¨mockå¯¹è±¡</span><br><span class="line">        assertEquals(test.getUniqueId(), 43);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è¿”å›å¤šä¸ªå€¼</span><br><span class="line">@Test</span><br><span class="line">public void testMoreThanOneReturnValue()  &#123;</span><br><span class="line">        Iterator i= mock(Iterator.class);</span><br><span class="line">        when(i.next()).thenReturn(&quot;Mockito&quot;).thenReturn(&quot;rocks&quot;);</span><br><span class="line">        String result=i.next()+&quot; &quot;+i.next();</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(&quot;Mockito rocks&quot;, result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¦‚ä½•æ ¹æ®è¾“å…¥æ¥è¿”å›å€¼</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(&quot;Mockito&quot;)).thenReturn(1);</span><br><span class="line">        when(c.compareTo(&quot;Eclipse&quot;)).thenReturn(2);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(1,c.compareTo(&quot;Mockito&quot;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¦‚ä½•è®©è¿”å›å€¼ä¸ä¾èµ–äºè¾“å…¥</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueInDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(anyInt())).thenReturn(-1);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(-1 ,c.compareTo(9));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®å‚æ•°ç±»å‹æ¥è¿”å›å€¼</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueInDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(isA(Todo.class))).thenReturn(0);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        Todo todo = new Todo(5);</span><br><span class="line">        assertEquals(todo ,c.compareTo(new Todo(1)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="æ— è¿”å›å€¼çš„æ–¹æ³•"><a href="#æ— è¿”å›å€¼çš„æ–¹æ³•" class="headerlink" title="æ— è¿”å›å€¼çš„æ–¹æ³•"></a>æ— è¿”å›å€¼çš„æ–¹æ³•</h4><p>mokitoä¸­ï¼Œå¯¹æ— è¿”å›çš„å‡½æ•°ä»€ä¹ˆéƒ½ä¸åš<br>Mokito.doNothing().when(å¯¹è±¡).å‡½æ•°();</p>
<p>å¯¹äºæ— è¿”å›å€¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨doReturn(â€¦â€‹).when(â€¦â€‹).methodCallæ¥è·å¾—ç±»ä¼¼çš„æ•ˆæœã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³åœ¨è°ƒç”¨æŸäº›æ— è¿”å›å€¼å‡½æ•°çš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨doThrow æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢æµ‹è¯•ç”¨ä¾‹æè¿°äº†å¦‚ä½•ä½¿ç”¨doThrow()æ–¹æ³•</span><br><span class="line"></span><br><span class="line">@Test(expected=IOException.class)</span><br><span class="line">public void testForIOException() &#123;</span><br><span class="line">        // åˆ›å»ºå¹¶é…ç½® mock å¯¹è±¡</span><br><span class="line">        OutputStream mockStream = mock(OutputStream.class);</span><br><span class="line">        doThrow(new IOException()).when(mockStream).close();</span><br><span class="line"></span><br><span class="line">        // ä½¿ç”¨ mock</span><br><span class="line">        OutputStreamWriter streamWriter= new OutputStreamWriter(mockStream);</span><br><span class="line">        streamWriter.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="éªŒè¯æ˜¯å¦è°ƒç”¨"><a href="#éªŒè¯æ˜¯å¦è°ƒç”¨" class="headerlink" title="éªŒè¯æ˜¯å¦è°ƒç”¨"></a>éªŒè¯æ˜¯å¦è°ƒç”¨</h4><p>éªŒè¯ query æ–¹æ³•æ˜¯å¦è¢« MyDatabase çš„ mock å¯¹è±¡è°ƒç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">public class MockitoTest  &#123;</span><br><span class="line"></span><br><span class="line">        @Mock</span><br><span class="line">        MyDatabase databaseMock; (1)</span><br><span class="line"></span><br><span class="line">        @Rule public MockitoRule mockitoRule = MockitoJUnit.rule(); (2)</span><br><span class="line"></span><br><span class="line">        @Test</span><br><span class="line">        public void testQuery()  &#123;</span><br><span class="line">                ClassToTest t  = new ClassToTest(databaseMock); (3)</span><br><span class="line">                boolean check = t.query(&quot;* from t&quot;); (4)</span><br><span class="line">                assertTrue(check); (5)</span><br><span class="line">                verify(databaseMock).query(&quot;* from t&quot;); (6)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mockito ä¼šè·Ÿè¸ª mock å¯¹è±¡é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•å’Œå˜é‡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ¥éªŒè¯å‡½æ•°åœ¨ä¼ å…¥ç‰¹å®šå‚æ•°çš„æ—¶å€™æ˜¯å¦è¢«è°ƒç”¨ã€‚è¿™ç§æ–¹å¼çš„æµ‹è¯•ç§°è¡Œä¸ºæµ‹è¯•ï¼Œè¡Œä¸ºæµ‹è¯•å¹¶ä¸ä¼šæ£€æŸ¥å‡½æ•°çš„è¿”å›å€¼ï¼Œè€Œæ˜¯æ£€æŸ¥åœ¨ä¼ å…¥æ­£ç¡®å‚æ•°æ—¶å€™å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void testVerify()  &#123;</span><br><span class="line">        // åˆ›å»ºå¹¶é…ç½® mock å¯¹è±¡</span><br><span class="line">        MyClass test = Mockito.mock(MyClass.class);</span><br><span class="line">        when(test.getUniqueId()).thenReturn(43);</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨mockå¯¹è±¡é‡Œé¢çš„æ–¹æ³•å¹¶ä¼ å…¥å‚æ•°ä¸º12</span><br><span class="line">        test.testing(12);</span><br><span class="line">        test.getUniqueId();</span><br><span class="line">        test.getUniqueId();</span><br><span class="line"></span><br><span class="line">        // æŸ¥çœ‹åœ¨ä¼ å…¥å‚æ•°ä¸º12çš„æ—¶å€™æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨</span><br><span class="line">        verify(test).testing(Matchers.eq(12));</span><br><span class="line"></span><br><span class="line">        // æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨ä¸¤æ¬¡</span><br><span class="line">        verify(test, times(2)).getUniqueId();</span><br><span class="line"></span><br><span class="line">        // å…¶ä»–ç”¨æ¥éªŒè¯å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨çš„æ–¹æ³•</span><br><span class="line">        verify(mock, never()).someMethod(&quot;never called&quot;);</span><br><span class="line">        verify(mock, atLeastOnce()).someMethod(&quot;called at least once&quot;);</span><br><span class="line">        verify(mock, atLeast(2)).someMethod(&quot;called at least twice&quot;);</span><br><span class="line">        verify(mock, times(5)).someMethod(&quot;called five times&quot;);</span><br><span class="line">        verify(mock, atMost(3)).someMethod(&quot;called at most 3 times&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="spyä½¿ç”¨"><a href="#spyä½¿ç”¨" class="headerlink" title="spyä½¿ç”¨"></a>spyä½¿ç”¨</h3><p>@Spyæˆ–è€…spy()æ–¹æ³•å¯ä»¥è¢«ç”¨æ¥å°è£… java å¯¹è±¡ã€‚è¢«å°è£…åï¼Œé™¤éç‰¹æ®Šå£°æ˜ï¼ˆæ‰“æ¡© stubï¼‰ï¼Œå¦åˆ™éƒ½ä¼šçœŸæ­£çš„è°ƒç”¨å¯¹è±¡é‡Œé¢çš„æ¯ä¸€ä¸ªæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">// Lets mock a LinkedList</span><br><span class="line">List list = new LinkedList();</span><br><span class="line">List spy = spy(list);</span><br><span class="line"></span><br><span class="line">// å¯ç”¨ doReturn() æ¥æ‰“æ¡©</span><br><span class="line">doReturn(&quot;foo&quot;).when(spy).get(0);</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢ä»£ç ä¸ç”Ÿæ•ˆ</span><br><span class="line">// çœŸæ­£çš„æ–¹æ³•ä¼šè¢«è°ƒç”¨</span><br><span class="line">// å°†ä¼šæŠ›å‡º IndexOutOfBoundsException çš„å¼‚å¸¸ï¼Œå› ä¸º List ä¸ºç©º</span><br><span class="line">when(spy.get(0)).thenReturn(&quot;foo&quot;);</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f6e3ab9719b9">https://www.jianshu.com/p/f6e3ab9719b9</a><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7b67806b74f6">https://www.jianshu.com/p/7b67806b74f6</a></p>
<h2 id="PowerMockRunner-å’Œ-MockitoJUnitRunner"><a href="#PowerMockRunner-å’Œ-MockitoJUnitRunner" class="headerlink" title="PowerMockRunner å’Œ MockitoJUnitRunner"></a>PowerMockRunner å’Œ MockitoJUnitRunner</h2><p>å…³äºæ‰“æ¡©ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/moshowgame/article/details/100983711">https://blog.csdn.net/moshowgame/article/details/100983711</a></p>
<h2 id="when-thenReturn-å’Œ-doReturn-when-åŒºåˆ«"><a href="#when-thenReturn-å’Œ-doReturn-when-åŒºåˆ«" class="headerlink" title="when().thenReturn() å’Œ doReturn().when() åŒºåˆ«"></a>when().thenReturn() å’Œ doReturn().when() åŒºåˆ«</h2><p>ä½¿ç”¨@Mockæ—¶å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä½†æ˜¯@Spyæ—¶ï¼Œå®ƒä»¬çš„è°ƒç”¨ç»“æœä¸åŒã€‚<br>1.when().thenReturn() ä¼šè°ƒç”¨çœŸå®çš„æ–¹æ³•ï¼Œå®¹æ˜“æŠ›å‡ºå¼‚å¸¸<br>2.doReturn().when() ä¸ä¼šè°ƒç”¨çœŸå®æ–¹æ³•</p>
<h2 id="PowerMockito"><a href="#PowerMockito" class="headerlink" title="PowerMockito"></a>PowerMockito</h2><p>PowerMockæ‰©å±•äº†EasyMockå’ŒMockitoæ¡†æ¶ï¼Œå¢åŠ äº†å¯¹staticå’Œfinalæ–¹æ³•mockæ”¯æŒç­‰åŠŸèƒ½.<br>PowerMockæœ‰ä¸¤ä¸ªé‡è¦çš„æ³¨è§£ï¼š<br> @RunWith(PowerMockRunner.class)<br> @prepareForTest({MyObject.class})<br> @PrepareForTestæ³¨è§£å’Œ@RunWithæ³¨è§£æ˜¯ç»“åˆä½¿ç”¨çš„ï¼Œä¸è¦å•ç‹¬ä½¿ç”¨@PrepareForTestï¼Œå¦åˆ™ä¸èµ·ä½œç”¨ã€‚å½“ä½¿ç”¨PowerMockå»mocké™æ€ï¼Œfinalæˆ–è€…ç§æœ‰æ–¹æ³•æ—¶ï¼Œéœ€è¦åŠ ä¸Šè¿™ä¸¤ä¸ªæ³¨è§£ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/KeeYang108/article/details/79891588">https://blog.csdn.net/KeeYang108/article/details/79891588</a></p>
<h2 id="Mockæµ‹è¯•è¸©å‘"><a href="#Mockæµ‹è¯•è¸©å‘" class="headerlink" title="Mockæµ‹è¯•è¸©å‘"></a>Mockæµ‹è¯•è¸©å‘</h2><p>ä»Šå¤©å†™äº†ä¸€ä¸ªcontrolå±‚çš„mockå•å…ƒæµ‹è¯•ï¼Œå› ä¸ºè¦è°ƒserviceå±‚ï¼ˆå®ç°ç±»ï¼‰çš„æ–¹æ³•ï¼Œå°±æŠŠserviceæ¥å£åšäº†ä¸€ä¸ªmockï¼Œæµ‹è¯•æ—¶å€™ä¸€ç›´åŒ…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚<br>mock serviceå®ç°ç±»ä¹‹åï¼Œæ­£å¸¸ã€‚</p>
<p>æ›´æ–°ï¼šä»Šå¤©@Mockçš„æ¥å£ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¥‡æ€ªäº†ï¼š<br>mockæ¥å£å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸çš„caseï¼šæ˜¯serviceï¼ˆ.ä¹‹å‰çš„ï¼‰æ˜¯å®ç°ç±»ï¼Œ@Autowiredçš„ä¹Ÿæ˜¯å®ç°ç±»ï¼Œæ‰€ä»¥mockæ¥å£æ²¡ç”¨ï¼Ÿ<br>è€Œä»Šå¤©mockæ¥å£ï¼Œè¢«æµ‹è¯•ç±»ä¸­.ä¹‹å‰çš„æ˜¯æ¥å£ï¼Œ@Autowiredçš„ä¹Ÿæ˜¯æ¥å£ï¼Œæ‰€ä»¥æ²¡æ¯›ç—…ã€‚</p>
<p>åŠ @RunWith(PowerMockRunner.class)<br>è¦æµ‹è¯•çš„ç±»åŠ @InjectMocks</p>
<p>1.serviceå®ç°ç±»ä¸åŠ mockï¼Œåˆ°æŒ‡å®šæ–¹æ³•ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œserviceå¯¹è±¡ä¸ºç©º<br>2.å¦‚æœserviceæ–¹æ³•æ— è¿”å›ï¼Œå¯ä»¥ä¸æ‰“æ¡©ï¼Œå¦‚æœæœ‰è¿”å›ï¼Œæœ€å¥½æ‰“ä¸ªæ¡©ã€‚<br>3.æœ‰è¿”å›çš„æ‰“äº†æ¡©ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„è¾“å…¥ï¼Œè¿”å›ä¸åŒçš„ç»“æœã€‚æœ‰è¿”å›å¦‚æœä¸æ‰“æ¡©ï¼Œç›¸å½“äºè¿”å›çš„æ˜¯nullï¼Œè¿”å›å¦‚æœè¢«åé¢ç”¨åˆ°ï¼Œå®¹æ˜“æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h2 id="Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸"><a href="#Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸" class="headerlink" title="Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸"></a>Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸</h2><p>mockæµ‹è¯•çš„è¢«æµ‹è¯•ç±»ï¼ˆ@InjectMockï¼‰ä¸­çš„å±æ€§ä¸€èˆ¬ä¸ºnullï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸åŠ å°±åœ¨è¢«æµ‹è¯•ç±»ä¸­è°ƒç”¨å±æ€§å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼ŒæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºå±æ€§å¯¹è±¡æ˜¯nullã€‚<br>å°†å±æ€§å¯¹è±¡åœ¨Testä¸­æ·»åŠ @Mockä¸ºmockå¯¹è±¡ï¼Œç›´æ¥å¿½ç•¥å±æ€§å¯¹è±¡æ–¹æ³•ï¼Œä¸è¿›å…¥æ‰§è¡Œã€‚<br>å°†å±æ€§å¯¹è±¡åœ¨Testä¸­æ·»åŠ @Spyä¸ºspyå¯¹è±¡ï¼Œä¼šè¿›å…¥è¯¥æ–¹æ³•ä¸­ï¼Œä½†æ˜¯åªé™äºä¸€å±‚ï¼Œå†è¿›å…¥å°±ä¸è¡Œäº†ï¼Œè¿˜æ˜¯ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<hr>
<h2 id="å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤"><a href="#å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤" class="headerlink" title="å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤"></a>å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤</h2><p>Jnitï¼šä¸€ä¸ªjavaè¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œç¼–å†™å’Œè¿è¡Œå¯é‡å¤çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>
<p>Mockitoï¼šå•å…ƒæµ‹è¯•æ¨¡æ‹Ÿæ¡†æ¶ï¼Œé‡‡ç”¨æ¨¡æ‹ŸæŠ€æœ¯ï¼Œæ¨¡æ‹Ÿåº”ç”¨ä¸­ä¾èµ–çš„å¤æ‚å¯¹è±¡ï¼ŒæŠŠæµ‹è¯•å¯¹è±¡å’Œä¾èµ–å¯¹è±¡éš”ç¦»å¼€ã€‚</p>
<p>PowerMockï¼šåœ¨Mockitoçš„åŸºç¡€ä¸Šä½œå‡ºæ‰©å±•ã€‚</p>
<p>å•å…ƒæµ‹è¯•æ­¥éª¤ï¼šå®šä¹‰å¯¹è±¡ - æ¨¡æ‹Ÿæ–¹æ³• - è°ƒç”¨æ–¹æ³• - éªŒè¯æ–¹æ³• ï¼ˆç¬¬äºŒæ­¥å’Œç¬¬å››æ­¥æ˜¯æœ‰å¤–éƒ¨ä¾èµ–æ—¶éœ€è¦mockä½¿ç”¨çš„ï¼‰</p>
<p>1ã€å®šä¹‰æµ‹è¯•å¯¹è±¡ï¼ˆnew/Mockito.spy/@Spy/@InjectMocksï¼‰<br>2ã€æ¨¡æ‹Ÿä¾èµ–å¯¹è±¡ï¼ˆç›´æ¥æ„å»ºå¯¹è±¡/Jsonååºåˆ—åŒ–å¯¹è±¡/@Mock/@Spyï¼‰<br>3ã€æ³¨å…¥ä¾èµ–å¯¹è±¡ï¼ˆset/Whitebox/@Mockï¼‰<br>4ã€æ¨¡æ‹Ÿä¾èµ–æ–¹æ³•<br>5ã€è°ƒç”¨è¢«æµ‹æ–¹æ³•ï¼ˆåˆ†ä¸ºæ„é€ æ–¹æ³•ã€æ™®é€šæ–¹æ³•ã€é™æ€æ–¹æ³•ï¼‰ï¼ˆéƒ½åˆ†ä¸ºæœ‰æƒé™å’Œæ— æƒé™ï¼‰ï¼ˆæœ‰æƒé™ç›´æ¥è°ƒç”¨ï¼Œæ— æƒé™ç”¨ï¼š<code>Whitebox.invokeMethod(userService, &quot;isUser&quot;, uid)</code>ï¼‰<br>6ã€éªŒè¯ä¾èµ–æ–¹æ³•ï¼ˆMockito.verify(â€¦)ï¼‰ï¼ˆç”¨ArgumentCaptor/@Captoræ•è·å‚æ•°ï¼‰<br>7ã€éªŒè¯æ•°æ®å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//éªŒè¯å¯¹è±¡ä¸ºç©º</span><br><span class="line">Assert.assertNull(&quot;å¿…é¡»ä¸ºç©ºï¼&quot;, uid);</span><br><span class="line">//éªŒè¯å¯¹è±¡éç©º</span><br><span class="line">Assert.assertNotNull(&quot;ä¸èƒ½ä¸ºç©ºï¼&quot;, uid);</span><br><span class="line">//éªŒè¯ä¸ºçœŸ</span><br><span class="line">Assert.assertTrue(&quot;è¿”å›å¿…é¡»ä¸ºçœŸ&quot;, isSuper);</span><br><span class="line">//éªŒè¯ä¸ºå‡</span><br><span class="line">Assert.assertFalse(&quot;è¿”å›å¿…é¡»ä¸ºå‡&quot;, isSuper);</span><br><span class="line">//éªŒè¯æ•°æ®å¯¹è±¡æ˜¯å¦ä¸€è‡´</span><br><span class="line">Assert.assertSame(&quot;ç”¨æˆ·å¿…é¡»ä¸€è‡´&quot;, exceptId, uid);</span><br><span class="line">//éªŒè¯æ•°æ®å¯¹è±¡æ˜¯å¦ä¸€è‡´</span><br><span class="line">Assert.assertNotSame(&quot;ç”¨æˆ·ä¸èƒ½ä¸€è‡´&quot;, exceptId, uid);</span><br><span class="line">//éªŒè¯ç®€å•æ•°æ®å¯¹è±¡</span><br><span class="line">Assert.assertNotEquals(&quot;ç”¨æˆ·åç§°ä¸ä¸€è‡´&quot;, &quot;admin&quot;, user)</span><br><span class="line">//éªŒè¯ç®€å•æ•°ç»„æˆ–é›†åˆå¯¹è±¡</span><br><span class="line">Assert.assertArrayEquals</span><br><span class="line">//å¯¹äºå¤æ‚æ•°æ®ï¼Œå¯ä»¥å…ˆåºåˆ—åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œç„¶åAssert.assertEquals</span><br></pre></td></tr></table></figure>
<p>éªŒè¯è·‘å‡ºå¼‚å¸¸ï¼šå¯ä»¥ç”¨@Test(expected=ExampleException.class)ï¼Œä½†æ˜¯ä¸€æ—¦å†…éƒ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œæ•´ä¸ªæ–¹æ³•å°±è¿”å›ï¼Œåé¢çš„éªŒè¯æ²¡æ³•æ‰§è¡Œã€‚@Ruleæ³¨è§£å®ç°ã€‚æ¨èä½¿ç”¨Assert</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ExampleException e = Assert.assertThrows(&quot;å¼‚å¸¸ç±»å‹ä¸ä¸€è‡´&quot;, ExampleException.class, ()-&gt;userService.getUser(uid));</span><br><span class="line">Assert.assertEquals(&quot;å¼‚å¸¸æ¶ˆæ¯ä¸ä¸€è‡´&quot;, exceptString, e.getMessage());</span><br></pre></td></tr></table></figure>
<p>8ã€éªŒè¯ä¾èµ–å¯¹è±¡ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰<br><code>Mockito.verifyNotInteractions</code></p>
<p>âœ…Mockitoçš„anyç›¸å…³çš„å‚æ•°åŒ¹é…æ–¹æ³•ä¸æ”¯æŒå¯ç©ºå‚æ•°å’Œç©ºå‚æ•°ï¼Œåº”è¯¥ç”¨nullableæ–¹æ³•ã€‚<br>âœ…é‡‡ç”¨Mockitoçš„å‚æ•°åŒ¹é…æ–¹æ³•æ—¶ï¼Œå…¶ä»–å‚æ•°ä¸èƒ½ç›´æ¥ç”¨å¸¸é‡æˆ–å˜é‡ï¼Œåº”è¯¥ç”¨Mockitoçš„eqæ–¹æ³•ã€‚</p>
<h2 id="Mocké™æ€æ–¹æ³•"><a href="#Mocké™æ€æ–¹æ³•" class="headerlink" title="Mocké™æ€æ–¹æ³•"></a>Mocké™æ€æ–¹æ³•</h2><p>é€šè¿‡PowerMockito.mockStatic() å¯¹é™æ€æ–¹æ³•è¿›è¡Œmockã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.powermock&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.powermock&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.commons.lang3.StringUtils;</span><br><span class="line">import org.junit.jupiter.api.Assertions;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.powermock.api.mockito.PowerMockito;</span><br><span class="line">import org.powermock.core.classloader.annotations.PowerMockIgnore;</span><br><span class="line">import org.powermock.core.classloader.annotations.PrepareForTest;</span><br><span class="line">import org.powermock.modules.junit4.PowerMockRunner;</span><br><span class="line"> </span><br><span class="line">@RunWith(PowerMockRunner.class)</span><br><span class="line">@PrepareForTest(StringUtils.class)</span><br><span class="line">@PowerMockIgnore(&quot;javax.crypto.*&quot;)</span><br><span class="line">public class MyTest &#123;</span><br><span class="line"> </span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        PowerMockito.mockStatic(StringUtils.class);</span><br><span class="line">        PowerMockito.when(StringUtils.isEmpty(&quot;empty&quot;)).thenReturn(true);</span><br><span class="line">        Assertions.assertTrue(StringUtils.isEmpty(&quot;empty&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/q2878948/article/details/124862699">https://blog.csdn.net/q2878948/article/details/124862699</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34497300/article/details/119774225">https://blog.csdn.net/qq_34497300/article/details/119774225</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/13/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/13/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/redis/" class="post-title-link" itemprop="url">redis</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-13 21:58:17" itemprop="dateCreated datePublished" datetime="2022-04-13T21:58:17+08:00">2022-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-04 21:12:08" itemprop="dateModified" datetime="2022-11-04T21:12:08+08:00">2022-11-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åç«¯å¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h4><p>redisï¼šå†…å­˜å­˜å‚¨ï¼ˆé€Ÿåº¦å¿«ï¼‰ã€è¿œç¨‹æ“ä½œï¼ˆå¯ä»¥ä¸å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼‰ã€æŒä¹…åŒ–ï¼ˆæœåŠ¡å™¨é‡å¯å¯ä¿æŒé‡å¯å‰çš„æ•°æ®ï¼‰ã€å¯æ‰©å±•ï¼ˆä¸»ä»å¤åˆ¶ã€åˆ†ç‰‡ï¼‰</p>
<h4 id="macå®‰è£…redis"><a href="#macå®‰è£…redis" class="headerlink" title="macå®‰è£…redis"></a>macå®‰è£…redis</h4><p>âœ…brew install redis å®‰è£…<br>âœ…brew info redis æŸ¥çœ‹å®‰è£…è·¯å¾„<br>âœ…å¯åŠ¨redisï¼š<br>æ–¹å¼ä¸€ï¼šä½¿ç”¨brewå¯åŠ¨ brew services start redis<br>æ–¹å¼äºŒï¼šè¿›å…¥redisçš„binç›®å½•ï¼Œè¾“å…¥redis-server<br>âœ…å…³é—­redisæœåŠ¡<br>æ–¹å¼ä¸€ï¼šredis-cli SHUTDOWN<br>æ–¹å¼äºŒï¼šredis-cliè¿›å…¥å†è¾“å…¥SHUTDOWN<br>âœ…æŸ¥çœ‹redisæ˜¯å¦åœ¨è¿è¡Œï¼šps axu|grep redis<br>âœ…å®¢æˆ·ç«¯è¿æ¥redisï¼šredis-cli -h 127.0.0.1 -p 6379<br>è¿æ¥åæ‰§è¡Œpingå‘½ä»¤ï¼Œæ£€æµ‹redisæœåŠ¡æ˜¯å¦å¯åŠ¨<br>âœ…redis.confé…ç½®æ–‡ä»¶è¯´æ˜ï¼š<br>redisé»˜è®¤æ˜¯å‰å°å¯åŠ¨ï¼Œå¦‚æœç›¸ä»¥å®ˆæŠ¤è¿›ç¨‹ï¼ˆåå°æ–¹å¼ï¼‰è¿è¡Œï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å°†daemonize noä¿®æ”¹ä¸ºyesã€‚</p>
<blockquote>
<p>å®ˆæŠ¤è¿›ç¨‹ï¼ˆåå°è¿›ç¨‹ï¼‰ä¸å‰å°è¿›ç¨‹ï¼š<br>å‰å°è¿›ç¨‹æ˜¯åœ¨ç»ˆç«¯ä¸­è¿è¡Œçš„ï¼Œç»ˆç«¯å…³é—­è¿›ç¨‹ä¹Ÿå°±æ¶ˆå¤±ã€‚<br>å®ˆæŠ¤è¿›ç¨‹æ˜¯è¿è¡Œåœ¨åå°çš„ä¸€ç§ç‰¹æ®Šè¿›ç¨‹ï¼Œä¸å—ç»ˆç«¯æ§åˆ¶ï¼Œä¹Ÿä¸éœ€è¦ç»ˆç«¯çš„äº¤äº’ã€‚<br>Linuxä¸­å¤§å¤šæ•°æœåŠ¡å™¨æ˜¯ç”¨å®ˆæŠ¤è¿›ç¨‹å®ç°çš„ï¼Œæ¯”å¦‚webæœåŠ¡å™¨httpç­‰ã€‚</p>
</blockquote>
<h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><p>keys * æŸ¥çœ‹æ‰€æœ‰keyçš„å†…å®¹<br>exits key  æŸ¥çœ‹keyæ˜¯å¦å­˜åœ¨<br>set key value  è®¾ç½®keyçš„å†…å®¹<br>get key  è·å–keyçš„å†…å®¹<br>flushdb  åˆ é™¤å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰key<br>flushall  åˆ é™¤æ‰€æœ‰æ•°æ®åº“ä¸­key</p>
<p>æœåŠ¡å™¨ç›¸å…³å‘½ä»¤ï¼š<br>ping  æµ‹è¯•è¿æ¥æ˜¯å¦å­˜æ´»ï¼Œè¿”å›pongä»£è¡¨æœ‰å“åº”<br>echo  è¾“å‡ºä¿¡æ¯<br>select num  é€‰æ‹©æ•°æ®åº“ï¼Œ0-15<br>quit  é€€å‡ºè¿æ¥<br>dbsize  è¿”å›å½“å‰æ•°æ®åº“ä¸­keyçš„æ•°é‡<br>info  è·å–æœåŠ¡çš„ç›¸å…³ä¿¡æ¯</p>
<p>è®¾ç½®é”®å‘½ä»¤ï¼š<br>setex key seconds value è®¾ç½®å€¼å¹¶è®¾ç½®æœ‰æ•ˆæœŸï¼Œå·²å­˜åœ¨ä¼šè¦†ç›–<br>pexpire key millisecond è®¾ç½®æœ‰æ•ˆæ—¶é—´ï¼Œæ¯«ç§’ä¸ºå•ä½ï¼Œå¿…é¡»æ˜¯å·²ç»å­˜åœ¨çš„key<br>setnx key value ä¸å­˜åœ¨æ—¶æ”¾å…¥<br>exists key æ˜¯å¦å­˜åœ¨è¯¥key<br>ttl key ä»¥ç§’ä¸ºå•ä½æ˜¾ç¤ºè¿‡æœŸæ—¶é—´<br>pttl key ä»¥æ¯«ç§’ä¸ºå•ä½æ˜¾ç¤ºè¿‡æœŸæ—¶é—´</p>
<h4 id="redisæ•°æ®ç»“æ„"><a href="#redisæ•°æ®ç»“æ„" class="headerlink" title="redisæ•°æ®ç»“æ„"></a>redisæ•°æ®ç»“æ„</h4><p>stringï¼šå¯å­˜å‚¨å­—ç¬¦ä¸²ã€æ•´æ•°ã€æµ®ç‚¹æ•°<br>listï¼šä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²<br>setï¼šåŒ…å«å­—ç¬¦ä¸²çš„æ— åºæ”¶é›†å®¹å™¨<br>hashï¼šåŒ…å«é”®å€¼çš„æ— åºæ•£åˆ—è¡¨<br>zsetï¼šæœ‰åºé›†åˆï¼Œå…ƒç´ æ’åˆ—é¡ºåºç”±åˆ†å€¼å¤§å°å†³å®š</p>
<h4 id="redis-hset"><a href="#redis-hset" class="headerlink" title="redis hset"></a>redis hset</h4><p>Redis Hset å‘½ä»¤ç”¨äºä¸ºå“ˆå¸Œè¡¨ä¸­çš„å­—æ®µèµ‹å€¼ ã€‚<br>å¦‚æœå“ˆå¸Œè¡¨ä¸å­˜åœ¨ï¼Œä¸€ä¸ªæ–°çš„å“ˆå¸Œè¡¨è¢«åˆ›å»ºå¹¶è¿›è¡Œ HSET æ“ä½œã€‚<br>å¦‚æœå­—æ®µå·²ç»å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ï¼Œæ—§å€¼å°†è¢«è¦†ç›–ã€‚<br>hset myhashset key value</p>
<h4 id="redis-listç›¸å…³"><a href="#redis-listç›¸å…³" class="headerlink" title="redis listç›¸å…³"></a>redis listç›¸å…³</h4><p>å¾€listçš„å³è¾¹åŠ ä¸€ä¸ªå€¼<br>rpush mylist value<br>å¦‚æœåˆ—è¡¨ä¸å­˜åœ¨åˆ™æ–°å»ºï¼Œå¦‚æœkeyä¸æ˜¯åˆ—è¡¨ç±»å‹ï¼Œè¿”å›é”™è¯¯ã€‚<br>lrange mylist  ä»å·¦è¾¹ä¸€ä¸ªä¸€ä¸ªéå†å±•ç¤º<br>llen mylist è¿”å›é•¿åº¦</p>
<h4 id="noauth-authentication-required"><a href="#noauth-authentication-required" class="headerlink" title="noauth authentication required"></a>noauth authentication required</h4><p>è®¤è¯é—®é¢˜ï¼Œéœ€è¦è¾“å…¥å¯†ç <br>auth â€œpasswordâ€œ</p>
<h4 id="keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢"><a href="#keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢"></a>keyså‘½ä»¤æ¨¡ç³ŠæŸ¥è¯¢</h4><p><code>*é€šé…ç¬¦ï¼škeys *hh*</code><br><code>?å•ä¸ªé€šé…ç¬¦ï¼škeys helï¼Ÿï¼Ÿ</code>  å¿˜äº†æœ€åä¸¤ä¸ªå­—æ¯<br><code>[]é€šé…ç¬¦ï¼škeys hell[opt]</code>  æœ€åä¸€ä¸ªå­—æ¯å¯èƒ½æ˜¯o p tä¸­çš„ä¸€ä¸ª</p>
<h4 id="redis-setexå‘½ä»¤"><a href="#redis-setexå‘½ä»¤" class="headerlink" title="redis setexå‘½ä»¤"></a>redis setexå‘½ä»¤</h4><p>ä¸ºæŒ‡å®šçš„keyè®¾ç½®å€¼åŠå…¶è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœå·²å­˜åœ¨ï¼Œåˆ™æ›¿æ¢<br>setex key 10 value   //10såè¿‡æœŸ<br>ttl key  //è¿˜æœ‰å¤šå°‘æ—¶é—´è¿‡æœŸ</p>
<h4 id="misconf-redis-is-configured-to-save-RDB"><a href="#misconf-redis-is-configured-to-save-RDB" class="headerlink" title="misconf redis is configured to save RDB"></a>misconf redis is configured to save RDB</h4><p>erroråŸå› ï¼šå¼ºåˆ¶å…³é—­rediså¿«ç…§å¯¼è‡´ä¸èƒ½æŒä¹…åŒ–<br>è§£å†³ï¼šconfig set stop-writes-on-bgsave-error no</p>
<h4 id="Jediså’ŒredisTemplate"><a href="#Jediså’ŒredisTemplate" class="headerlink" title="Jediså’ŒredisTemplate"></a>Jediså’ŒredisTemplate</h4><p>Jedisæ˜¯Rediså®˜æ–¹æ¨èçš„é¢å‘Javaçš„æ“ä½œRedisçš„å®¢æˆ·ç«¯ï¼Œè€ŒRedisTemplateæ˜¯SpringDataRedisä¸­å¯¹JedisApiçš„é«˜åº¦å°è£…ã€‚</p>
<p>SpringDataRedisç›¸å¯¹äºJedisæ¥è¯´å¯ä»¥æ–¹ä¾¿åœ°æ›´æ¢Redisçš„Javaå®¢æˆ·ç«¯ï¼Œæ¯”Jediså¤šäº†è‡ªåŠ¨ç®¡ç†è¿æ¥æ± çš„ç‰¹æ€§ï¼Œæ–¹ä¾¿ä¸å…¶ä»–Springæ¡†æ¶è¿›è¡Œæ­é…ä½¿ç”¨å¦‚ï¼šSpringCache</p>
<p>jedisè¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡</span><br><span class="line">        Jedis jedis = new Jedis(&quot;localhost&quot;);</span><br><span class="line">        System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;);</span><br><span class="line">        //æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ</span><br><span class="line">        System.out.println(&quot;æœåŠ¡æ­£åœ¨è¿è¡Œ: &quot;+jedis.ping());</span><br><span class="line">        long time=0;</span><br><span class="line">        long TestNum=100;</span><br><span class="line">        for(int i=0;i&lt;TestNum;i++)&#123;</span><br><span class="line">            long timeS=System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">            jedis.set(&quot;jedis-s&quot;+i,&quot;jedis&quot;+i);</span><br><span class="line">            long timeE=System.currentTimeMillis();</span><br><span class="line">            time+=timeE-timeS;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.print(&quot;æ€»æ—¶é—´ï¼š&quot;+time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>redisTemplateè¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@SpringBootTest(classes = ServiceApplication.class)</span><br><span class="line">public class RedisTemplateTest &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private RedisUtils redisUtils;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void T()&#123;</span><br><span class="line">        long time=0;</span><br><span class="line">        long TestNum=100;</span><br><span class="line">        for(int i=0;i&lt;TestNum;i++)&#123;</span><br><span class="line">            long timeS=System.currentTimeMillis();</span><br><span class="line">            redisUtils.set(&quot;RedisTemplateTest&quot;,&quot;redi&quot;+i);</span><br><span class="line">            long timeE=System.currentTimeMillis();</span><br><span class="line">            time+=timeE-timeS;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;æ€»æ—¶é—´ï¼š&quot;+time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37208934/article/details/95201211">https://blog.csdn.net/qq_37208934/article/details/95201211</a></p>
<h4 id="redisTemplate-opsForHash"><a href="#redisTemplate-opsForHash" class="headerlink" title="redisTemplate.opsForHash()"></a>redisTemplate.opsForHash()</h4><p>Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚<br>Redis ä¸­æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 2^32 - 1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰ã€‚</p>
<p>å­˜å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">Mapä»¥mapé›†åˆçš„å½¢å¼æ·»åŠ é”®å€¼å¯¹</span><br><span class="line">&lt;String, String&gt; maps = new HashMap();</span><br><span class="line">maps.put(&quot;1&quot;,&quot;æ˜ŸæœŸä¸€&quot;);</span><br><span class="line">maps.put(&quot;2&quot;,&quot;æ˜ŸæœŸäºŒ&quot;);</span><br><span class="line">maps.put(&quot;3&quot;,&quot;æ˜ŸæœŸä¸‰&quot;);</span><br><span class="line">maps.put(&quot;4&quot;,&quot;æ˜ŸæœŸå››&quot;);</span><br><span class="line">redisTemplate.opsForHash().putAll(&quot;day:week&quot;, maps);</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥å•ä¸ªå­˜å…¥ï¼š</span><br><span class="line">redisTemplate.opsForHash().put(&quot;redisKey&quot;,&quot;key1&quot;,&quot;value1&quot;);</span><br><span class="line">redisTemplate.opsForHash().put(&quot;redisKey&quot;,&quot;key1&quot;,&quot;value2&quot;);</span><br><span class="line">mapä¸­keyç›¸åŒæ›¿æ¢value</span><br><span class="line"></span><br><span class="line">è·å–redisKeyå¯¹åº”çš„mapä¸­keyå¯¹åº”çš„å€¼ï¼š</span><br><span class="line">Object o = redisTemplate.opsForHash().get(&quot;redisKey&quot;, &quot;key1&quot;);</span><br><span class="line">å¦‚æœæ²¡æœ‰è¿”å›null</span><br><span class="line"></span><br><span class="line">è·å–keyå¯¹åº”çš„æ‰€æœ‰mapé”®å€¼å¯¹ï¼š</span><br><span class="line">Map hashValue = redisTemplate.opsForHash().entries(&quot;redisKey&quot;);</span><br><span class="line"></span><br><span class="line">è·å–keyå¯¹åº”çš„mapä¸­æ‰€æœ‰çš„é”®ï¼š</span><br><span class="line">Set hashValue = redisTemplate.opsForHash().keys(&quot;redisKey&quot;);</span><br><span class="line"></span><br><span class="line">è·å–keyå¯¹åº”çš„mapä¸­æ‰€æœ‰çš„å€¼:</span><br><span class="line">List hashValue = redisTemplate.opsForHash().values(&quot;redisKey&quot;);</span><br><span class="line"></span><br><span class="line">åˆ¤æ–­keyå¯¹åº”çš„mapä¸­æ˜¯å¦æœ‰æŒ‡å®šçš„é”®:</span><br><span class="line">Boolean aBoolean = redisTemplate.opsForHash().hasKey(&quot;redisKey&quot;, &quot;mapKey&quot;);</span><br><span class="line"></span><br><span class="line">è·å–keyå¯¹åº”çš„mapçš„é•¿åº¦:</span><br><span class="line">Long hashValue = redisTemplate.opsForHash().size(&quot;redisKey&quot;);</span><br><span class="line"></span><br><span class="line">å¦‚ä½•keyå¯¹åº”çš„mapä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢åˆ°mapä¸­ï¼Œå­˜åœ¨åˆ™ä¸æ–°å¢ä¹Ÿä¸è¦†ç›–:</span><br><span class="line">redisTemplate.opsForHash().putIfAbsent(&quot;redisKey&quot;, &quot;mapKey&quot;, &quot;mapValue&quot;);</span><br><span class="line"></span><br><span class="line">ç›´æ¥ä»¥mapé›†åˆçš„æ–¹å¼æ·»åŠ keyå¯¹åº”çš„å€¼:</span><br><span class="line">mapä¸­keyå·²ç»å­˜åœ¨ï¼Œè¦†ç›–æ›¿æ¢</span><br><span class="line">mapä¸­keyä¸å­˜åœ¨ï¼Œæ–°å¢</span><br><span class="line">Map newMap = new HashMap();</span><br><span class="line">newMap.put(&quot;map4&quot;,&quot;map4&quot;);</span><br><span class="line">newMap.put(&quot;map5&quot;,&quot;map5&quot;);</span><br><span class="line">redisTemplate.opsForHash().putAll(&quot;hashValue&quot;,newMap);</span><br><span class="line"></span><br><span class="line">ä»¥é›†åˆçš„æ–¹å¼è·å–mapé”®å¯¹åº”çš„mapå€¼ï¼š</span><br><span class="line">List list = new ArrayList&lt;&gt;();</span><br><span class="line">list.add(&quot;mapKey1&quot;);</span><br><span class="line">list.add(&quot;mapKey2&quot;);</span><br><span class="line">List hashValue = redisTemplate.opsForHash().multiGet(&quot;redisKey&quot;, list);</span><br><span class="line"></span><br><span class="line">è·å–æŒ‡å®škeyå¯¹åº”çš„mapé›†åˆä¸­ï¼ŒæŒ‡å®šé”®å¯¹åº”çš„å€¼çš„é•¿åº¦:</span><br><span class="line">Long aLong = redisTemplate.opsForHash().lengthOfValue(&quot;redisKey&quot;, &quot;mapKey&quot;);</span><br><span class="line"></span><br><span class="line">ä½¿redisKeyå¯¹åº”çš„mapä¸­ï¼Œé”®mapKeyå¯¹åº”çš„å€¼ä»¥long1è‡ªå¢:</span><br><span class="line">Long increment = redisTemplate.opsForHash().increment(&quot;redisKey&quot;, &quot;mapKey&quot;, 1);</span><br><span class="line">ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æ˜¯longå‹ï¼Œä¹Ÿå¯ä»¥æ˜¯doubleå‹ã€‚</span><br><span class="line"></span><br><span class="line">åŒ¹é…è·å–é”®å€¼å¯¹ï¼šï¼ˆè·Ÿgetæœ‰å•¥ä¸åŒï¼Ÿï¼‰</span><br><span class="line">ScanOptions.NONEä¸ºè·å–å…¨éƒ¨é”®å¯¹</span><br><span class="line">ScanOptions.scanOptions().match(â€œmap1â€).build()ï¼ŒåŒ¹é…è·å–é”®ä½map1çš„é”®å€¼å¯¹</span><br><span class="line">Cursor&lt;Map.Entry&lt;Object,Object&gt;&gt; cursor = redisTemplate.opsForHash().scan(&quot;hashValue&quot;,ScanOptions.scanOptions().match(&quot;map1&quot;).build());</span><br><span class="line">//Cursor&lt;Map.Entry&lt;Object,Object&gt;&gt; cursor = redisTemplate.opsForHash().scan(&quot;hashValue&quot;,ScanOptions.NONE);</span><br><span class="line">while (cursor.hasNext()) &#123;</span><br><span class="line">    Map.Entry&lt;Object, Object&gt; entry = cursor.next();</span><br><span class="line">    System.out.println(&quot;entry.getKey() = &quot; + entry.getKey());</span><br><span class="line">    System.out.println(&quot;entry.getValue() = &quot; + entry.getValue());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">åˆ é™¤keyå¯¹åº”çš„mapä¸­çš„é”®å€¼å¯¹ï¼š</span><br><span class="line">Long delete = redisTemplate.opsForHash().delete(&quot;redisKey&quot;, &quot;map1&quot;, &quot;map2&quot;);</span><br><span class="line">åˆ é™¤äº†ä¸¤ä¸ªï¼Œå¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ª</span><br></pre></td></tr></table></figure>

<p>è·å–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Object, Object&gt; entries = redisTemplate.opsForHash().entries(&quot;day:week&quot;);</span><br></pre></td></tr></table></figure>

<p>scan:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scanå’Œkeysä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯æ¨¡ç³ŠæŸ¥è¯¢ï¼Œæœ€å¤§çš„åŒºåˆ«å°±æ˜¯keysä¼šé˜»å¡ï¼Œè€Œscanä¸ä¼šé˜»å¡</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šæ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43167662/article/details/123232840">https://blog.csdn.net/weixin_43167662/article/details/123232840</a></p>
<h4 id="redisTemplate-opsForGeo"><a href="#redisTemplate-opsForGeo" class="headerlink" title="redisTemplate.opsForGeo()"></a>redisTemplate.opsForGeo()</h4><p>rediså…³äºgeoä½ç½®è®¡ç®—çš„apiã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">private RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">redisTemplate.opsForGeo().add(key, new Point(x,y), msg);</span><br><span class="line">// keyå’Œmsgä¸ºå­—ç¬¦ä¸²ï¼ŒPointæ˜¯springframework.data.geoä¸‹çš„</span><br></pre></td></tr></table></figure>

<p>redisçš„geoå®æˆ˜ï¼š<a target="_blank" rel="noopener" href="http://itpcb.com/a/536152">http://itpcb.com/a/536152</a></p>
<h4 id="å¯è§†åŒ–å·¥å…·another-redis"><a href="#å¯è§†åŒ–å·¥å…·another-redis" class="headerlink" title="å¯è§†åŒ–å·¥å…·another redis"></a>å¯è§†åŒ–å·¥å…·another redis</h4><p>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/qishibo/AnotherRedisDesktopManager/releases">https://github.com/qishibo/AnotherRedisDesktopManager/releases</a></p>
<p>è¿æ¥ï¼šè¾“å…¥ åœ°å€host , ç«¯å£ï¼Œå¯†é’¥</p>
<p>å¯è§†åŒ–ï¼škeyï¼ŒæœåŠ¡å™¨ç‰ˆæœ¬ï¼Œä½¿ç”¨å†…å­˜ï¼Œè¿è¡ŒçŠ¶æ€ï¼Œä½¿ç”¨åˆ°çš„åº“ç­‰ä¿¡æ¯</p>
<p>æ”¯æŒä¸‰ç§æ–‡æœ¬æ ¼å¼ï¼Œåˆ†åˆ«æ˜¯ text,json , unserialize</p>
<p>ç”¨æ³•å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/220209936">https://zhuanlan.zhihu.com/p/220209936</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/09/myblog/spring/spring-aop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/09/myblog/spring/spring-aop/" class="post-title-link" itemprop="url">spring aopæ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-09 11:56:23" itemprop="dateCreated datePublished" datetime="2022-04-09T11:56:23+08:00">2022-04-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-31 21:49:35" itemprop="dateModified" datetime="2022-05-31T21:49:35+08:00">2022-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å·¥ä½œä¸­é‡åˆ°ä¸ªaopçš„é—®é¢˜ï¼Œjdkä»£ç†æ¢cglibä»£ç†è¿˜ä¸è¿‡æ¥ï¼Œä»¥åŠjdkä»£ç†å­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜ã€‚æ€»ç»“å¹¶å®æˆ˜ä¸€ä¸‹ã€‚</p>
<h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="aopç›¸å…³æœ¯è¯­"><a href="#aopç›¸å…³æœ¯è¯­" class="headerlink" title="aopç›¸å…³æœ¯è¯­"></a>aopç›¸å…³æœ¯è¯­</h4><ul>
<li>Targetï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡</li>
<li>Proxyï¼šä»£ç†å¯¹è±¡</li>
<li>Joinpointï¼šè¿æ¥ç‚¹ï¼ŒæŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨Springä¸­ï¼Œè¿™äº›ç‚¹æŒ‡æ–¹æ³•ï¼Œå› ä¸ºSpringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼ˆå¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³•ï¼‰</li>
<li>Pointcutï¼šåˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº›Joinpointè¿›è¡Œæ‹¦æˆªçš„å®šä¹‰</li>
<li>Adviceï¼šï¼ˆé€šçŸ¥/å¢å¼ºï¼‰æ˜¯æŒ‡æ‹¦æˆªåˆ°Joinpointä¹‹åè¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥</li>
<li>Aspectï¼šåˆ‡é¢æ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ï¼ˆå¢å¼ºï¼‰çš„ç»“åˆ</li>
<li>Weavingï¼šç»‡å…¥å®è´¨æŠŠå°†åˆ‡ç‚¹å’Œå¢å¼ºç»“åˆçš„è¿‡ç¨‹æ˜¯ç»‡å…¥è¿‡ç¨‹ï¼ŒSpringæ˜¯åŠ¨æ€ä»£ç†ç»‡å…¥ï¼ŒAspectJæ˜¯é‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥</li>
</ul>
<p>*è¿æ¥ç‚¹æ˜¯å¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³•ï¼Œåˆ‡ç‚¹æ˜¯å®é™…ä¸Šè¢«å¢å¼ºè¿‡çš„æ–¹æ³•ï¼Œè¿æ¥ç‚¹èŒƒå›´æ›´å¤§</p>
<h4 id="aopå¼€å‘è¿‡ç¨‹"><a href="#aopå¼€å‘è¿‡ç¨‹" class="headerlink" title="aopå¼€å‘è¿‡ç¨‹"></a>aopå¼€å‘è¿‡ç¨‹</h4><ol>
<li><p>ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼ˆTargetçš„ç›®æ ‡æ–¹æ³•-åˆ‡ç‚¹ï¼‰</p>
</li>
<li><p>ç¼–å†™åˆ‡é¢ç±»ï¼Œåˆ‡é¢ç±»ä¸­æœ‰é€šçŸ¥ï¼ˆå¢å¼ºåŠŸèƒ½æ–¹æ³•ï¼‰</p>
</li>
<li><p>åœ¨é…ç½®æ–‡ä»¶/æ³¨è§£å½“ä¸­ï¼Œé…ç½®ç»‡å…¥å…³ç³»ï¼Œå³å°†é‚£äº›é€šçŸ¥ä¸å“ªäº›è¿æ¥ç‚¹è¿›è¡Œç»“åˆ</p>
</li>
</ol>
<p>AOPæŠ€æœ¯å®ç°çš„å†…å®¹ï¼š<br>Springæ¡†æ¶ä¼šç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œâ€“é€šè¿‡é…ç½®æ–‡ä»¶å†³å®šå“ªäº›æ–¹æ³•æ˜¯åˆ‡ç‚¹ï¼›ä¸€æ—¦ç›‘æ§åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œå³ä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡ï¼ˆåˆ‡ç‚¹ï¼‰çš„ä»£ç†å¯¹è±¡ã€‚ç„¶åæ ¹æ®é…ç½®æ–‡ä»¶é…ç½®çš„å¢å¼ºç±»å‹ï¼ˆé€šçŸ¥ï¼‰ï¼Œåœ¨ä»£ç†å¯¹è±¡ï¼ˆåˆ‡ç‚¹ï¼‰å¯¹åº”çš„ä½ç½®ï¼Œå°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚<br>é…ç½®æ–‡ä»¶-æ‰§è¡Œåˆ‡ç‚¹æ–¹æ³•-ç›‘æ§åˆ°å¹¶åŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨ä»£ç†å¯¹è±¡åŒåæ–¹æ³•-å†…éƒ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œè¿›è¡Œå¢å¼ºæ–¹æ³•çš„ä»‹å…¥ã€‚</p>
<p>AOPåº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼ï¼š<br>Springä¼šæ ¹æ®ç›®æ ‡ç±»æ˜¯å¦å®ç°äº†æ¥å£æ¥å†³å®šé‡‡ç”¨å“ªç§åŠ¨æ€ä»£ç†ã€‚</p>
<h3 id="å®è·µ-é…ç½®æ–‡ä»¶"><a href="#å®è·µ-é…ç½®æ–‡ä»¶" class="headerlink" title="å®è·µ-é…ç½®æ–‡ä»¶"></a>å®è·µ-é…ç½®æ–‡ä»¶</h3><p>æ–°å»ºä¸ªspringé¡¹ç›®</p>
<ol>
<li><p>å¯¼å…¥ç›¸å…³ä¾èµ–ï¼šspring-contextã€spring-coreã€spring-beansï¼Œè¿˜æœ‰åˆ‡é¢çš„åŒ… Aspectjweaver</p>
</li>
<li><p>æ–°å»ºserviceæ¥å£ï¼Œæ–°å»ºå®ç°ç±»Impl</p>
</li>
<li><p>æ–°å»ºåˆ‡é¢ç±»ï¼Œå®šä¹‰åˆ‡é¢æ–¹æ³•</p>
</li>
<li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼€å¯æ³¨è§£æ‰«æ  --&gt;</span><br><span class="line">&lt;context:component-scan base-package=&quot;com.aop.demo&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;aop:config proxy-target-class=&quot;false&quot;&gt;</span><br><span class="line">    &lt;aop:pointcut id=&quot;userServiceImplPointcut&quot; expression=&quot;execution(* com.aop.demo.UserServiceImpl.addUser(..))&quot; /&gt;</span><br><span class="line">    &lt;aop:aspect id=&quot;aopClass&quot; ref=&quot;aopMethods&quot;&gt;</span><br><span class="line">        &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;userServiceImplPointcut&quot; /&gt;</span><br><span class="line">        &lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;userServiceImplPointcut&quot; /&gt;</span><br><span class="line">    &lt;/aop:aspect&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>æµ‹è¯•æ–¹æ³•<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class AopTest &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void testUserServiceAop()&#123;</span><br><span class="line">        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring-aop.xml&quot;);</span><br><span class="line">        // proxy-target-class=&quot;false&quot; æ—¶ï¼Œä½¿ç”¨jdkä»£ç†</span><br><span class="line">        // å¼ºåˆ¶è½¬æ¢å¿…é¡»ç”¨çˆ¶ç±»æ¥å£æ¥å®šä¹‰</span><br><span class="line">        UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">        userService.addUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>âš ï¸ proxy-target-class=â€falseâ€ æˆ–é»˜è®¤è¡¨ç¤ºä½¿ç”¨jdkä»£ç†ï¼Œè·å–å¯¹è±¡éœ€è¦ç”¨çˆ¶ç±»æ¥å£ï¼Œç”¨å®ç°ç±»ä¼šæŠ¥<code>java.lang.ClassCastException: com.sun.proxy.$Proxy* cannot be cast to***</code> çš„é”™è¯¯ã€‚</p>
<p>âš ï¸ proxy-target-class=â€trueâ€æ—¶ï¼Œä½¿ç”¨cglibä»£ç†ï¼Œä½¿ç”¨çˆ¶ç±»æ¥å£ä¹Ÿå¯ä»¥ï¼Œä½¿ç”¨å®ç°ç±»å®šä¹‰å¯¹è±¡ä¹Ÿå¯ä»¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">UserServiceImpl userService = (UserServiceImpl)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">userService.addUser();</span><br></pre></td></tr></table></figure>

<p>âš ï¸ å¦å¤–ï¼Œè¿˜æœ‰ä¸ªç°è±¡æ˜¯åœ¨jdkä»£ç†æ—¶å­˜åœ¨çš„bugï¼š<br>åŸæœ¬çš„ï¼š <code>UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</code> å¯ä»¥è·å¾—beanï¼Œæ²¡é—®é¢˜ã€‚<br>ä½†æ˜¯ï¼š <code>UserService userService = (UserService)context.getBean(UserServiceImpl.class);</code>  é€šè¿‡ç±»çš„å…¨è·¯å¾„è·å¾—beanå°±ä¼šå‡ºç°<code>No qualifying bean of type</code> çš„é—®é¢˜ã€‚<br>æ€»ç»“ï¼šjdkä»£ç†æ–¹å¼ä¸ç”¨å®ç°ç±»ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šç”¨å®ç°ç±»çš„beanï¼Œå³ä½¿é…äº†å®ç°ç±»çš„beanï¼Œä¹Ÿä¸è¡Œã€‚</p>
<p>åŸå› ï¼šspring aopé»˜è®¤æ˜¯ä½¿ç”¨jdkåŠ¨æ€ä»£ç†çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘é€šè¿‡getBean(ServiceImpl.class)ï¼Œè¡¨è¾¾å‡ºçš„æ„æ€æ˜¯å¸Œæœ›ç¨‹åºé€šè¿‡jdkåŠ¨æ€ä»£ç†ç»™æˆ‘ä¸€ä¸ªServiceImplç±»ã€‚è€Œjdkçš„åŠ¨æ€ä»£ç†æ˜¯åŸºäºæ¥å£å®ç°çš„ï¼Œå› ä¸ºå®ƒæœ¬èº«è¦ç»§æ‰¿ä¸€ä¸ªProxyç±»ï¼Œè€Œjavaæ˜¯å•ç»§æ‰¿ï¼ˆæ¥å£å¯ä»¥å¤šç»§æ‰¿ï¼‰ï¼Œæ‰€ä»¥å®ƒé€šè¿‡å®ç°æ¥å£è¿›è¡Œä»£ç†ã€‚å®ƒé€šè¿‡å®ç°æˆ‘ä»¬ç»™å®ƒçš„æ¥å£å’Œç»§æ‰¿Proxyç±»å®ç°jdkåŠ¨æ€ä»£ç†ã€‚è€Œæˆ‘ä»¬ç»™å®ƒçš„æ˜¯ä¸€ä¸ªServiceImplç±»ï¼Œè¿™ä¸ªæ—¶å€™jdkåŠ¨æ€ä»£ç†å°±æ²¡æœ‰åŠæ³•äº†ã€‚<br>jdkåŠ¨æ€ä»£ç†äº§ç”Ÿçš„å¯¹è±¡å±äºProxyç±»å‹ï¼Œå±äºç»™å®šçš„æ¥å£ï¼ˆServiceï¼‰ç±»å‹ï¼Œä½†ä¸å±äºæˆ‘ä»¬è¦ä»£ç†çš„é‚£ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æœ¬ä»£ç ä¸­ServiceImplç±»å‹<br>å› æ­¤ï¼Œä½¿ç”¨æ¥å£çš„ç±»è·¯å¾„ï¼š<code>UserService userService = (UserService)context.getBean(UserService.class);</code> ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚è¿™ä¹Ÿè§£é‡Šäº†å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ã€‚<br>ä½†æ˜¯ï¼Œæ¢æˆcglibï¼Œå®ç°ç±»/çˆ¶ç±»æ¥å£ï¼Œè·å–beançš„æ–¹å¼ï¼šid/ç±»è·¯å¾„ï¼Œéƒ½å¯ä»¥ï¼Œæ²¡è§£é‡Šå·¥ä½œä¸­ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æ¢æˆcglibçš„é—®é¢˜ã€‚</p>
<p>æ€»ç»“ï¼š<br>jdkä»£ç†ï¼šå¿…é¡»çˆ¶ç±»æ¥å£è·å¾—beanï¼Œæ‹¬å·å†…å¯ä»¥æ˜¯å®ç°ç±»çš„bean idï¼Œä¹Ÿå¯ä»¥æ˜¯çˆ¶ç±»æ¥å£çš„å…¨è·¯å¾„ã€‚<br>cglibä»£ç†ï¼šæ€ä¹ˆéƒ½è¡Œã€‚</p>
<h3 id="å®è·µ-æ³¨è§£"><a href="#å®è·µ-æ³¨è§£" class="headerlink" title="å®è·µ-æ³¨è§£"></a>å®è·µ-æ³¨è§£</h3><ol>
<li><p>ä½¿ç”¨@Aspectæ³¨è§£ï¼Œå‡ºäº†aspectweaveråŒ…ä¹‹å¤–ï¼Œè¿˜éœ€è¦aspectjrtåŒ…</p>
</li>
<li><p>æ–°å»ºserviceæ¥å£ï¼Œæ–°å»ºå®ç°ç±»Impl</p>
</li>
<li><p>æ–°å»ºåˆ‡é¢ç±»ï¼Œå®šä¹‰åˆ‡é¢æ–¹æ³•</p>
</li>
<li><p>ç¼–å†™é…ç½®ç±»</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@ComponentScan(basePackages = &#123;&quot;com.aop.demo.zhujie&quot;&#125;)</span><br><span class="line">@EnableAspectJAutoProxy(proxyTargetClass = false)</span><br><span class="line">public class SpringCfg &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = new AnnotationConfigApplicationContext(SpringCfg.class);  //åŠ è½½é…ç½®ç±»</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå’Œé…ç½®æ–‡ä»¶ä¸€æ ·ã€‚</p>
<h3 id="githubåœ°å€"><a href="#githubåœ°å€" class="headerlink" title="githubåœ°å€"></a>githubåœ°å€</h3><p><a target="_blank" rel="noopener" href="https://github.com/jadeliuliu/aop-demo">https://github.com/jadeliuliu/aop-demo</a></p>
<p>å‚è€ƒï¼š<br>çŸ¥è¯†ç‚¹ï¼š<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Zhang-DevelopingPlatform/p/14723490.html">https://www.cnblogs.com/Zhang-DevelopingPlatform/p/14723490.html</a></p>
<p>jdkä»£ç†æ‰¾ä¸åˆ°beanï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32080243/article/details/90261768">https://blog.csdn.net/qq_32080243/article/details/90261768</a></p>
<p>cglibå®ç°ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/shaoweijava/article/details/76474652">https://blog.csdn.net/shaoweijava/article/details/76474652</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/05/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0github/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/05/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0github/" class="post-title-link" itemprop="url">demoä¸Šä¼ åˆ°github</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-05 13:34:09" itemprop="dateCreated datePublished" datetime="2022-04-05T13:34:09+08:00">2022-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-09 18:12:54" itemprop="dateModified" datetime="2022-04-09T18:12:54+08:00">2022-04-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åç«¯å¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="1-çœ‹ä¸€ä¸‹ä¸githubçš„è¿æ¥"><a href="#1-çœ‹ä¸€ä¸‹ä¸githubçš„è¿æ¥" class="headerlink" title="1.çœ‹ä¸€ä¸‹ä¸githubçš„è¿æ¥"></a>1.çœ‹ä¸€ä¸‹ä¸githubçš„è¿æ¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æ²¡å®‰è£…gitçš„è¯ï¼Œbrew install git å®‰è£…ä¸€ä¸‹</span><br><span class="line"></span><br><span class="line">è®¾ç½®sshï¼š</span><br><span class="line">ssh-keygen -t rsa -C &quot;your_email@youremail.com&quot;</span><br><span class="line">~/ä¸‹ç”Ÿæˆ.sshæ–‡ä»¶å¤¹ï¼Œè¿›å»ï¼Œæ‰“å¼€id_rsa.pubï¼Œå¤åˆ¶é‡Œé¢çš„keyï¼Œæ·»åŠ åˆ°github</span><br><span class="line"></span><br><span class="line">éªŒè¯è¿æ¥ï¼šssh -T git@github.com</span><br><span class="line"></span><br><span class="line">è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼š</span><br><span class="line">git config --global user.name &quot;jadeliuliu&quot;</span><br><span class="line">git config --global user.email &quot;xxxxx@163.com&quot;</span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line">You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure>

<h4 id="2-ä»£ç pushåˆ°github"><a href="#2-ä»£ç pushåˆ°github" class="headerlink" title="2.ä»£ç pushåˆ°github"></a>2.ä»£ç pushåˆ°github</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git init  åˆå§‹åŒ–è¯¥æ–‡ä»¶å¤¹</span><br><span class="line">git add</span><br><span class="line">git commit è¿™æ ·å·²ç»å°†è¦æ›´æ”¹çš„æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œä½†æ˜¯å‘¢è¿˜æ²¡æœ‰çœŸæ­£æäº¤åˆ°ç½‘ç«™ä¸Šå»</span><br><span class="line">githubæ–°å»ºä»“åº“</span><br><span class="line">å…³è”githubä»“åº“ï¼š</span><br><span class="line">git remote add origin git@github.com:ç”¨æˆ·å/ä»“åº“å.git</span><br><span class="line">git remote add origin https://github.com/ç”¨æˆ·å/ä»“åº“å.git</span><br><span class="line">ä¸Šé¢çš„ä¸¤ä¸ªå‘½ä»¤ç»“æœä¸€æ ·ï¼Œåªæ˜¯åè®®ä¸ä¸€æ ·ï¼Œç¬¬ä¸€ä¸ªé€Ÿåº¦ä¼šæ¯”è¾ƒå¿«ã€‚åªæ˜¯ç¬¬ä¸€æ¬¡æäº¤é¡¹ç›®æ—¶éœ€è¦</span><br><span class="line">git push -u origin master æäº¤åˆ°github</span><br></pre></td></tr></table></figure>

<h4 id="3-gitä¸­ä½¿ç”¨sshå’Œhttpåè®®çš„åŒºåˆ«"><a href="#3-gitä¸­ä½¿ç”¨sshå’Œhttpåè®®çš„åŒºåˆ«" class="headerlink" title="3.gitä¸­ä½¿ç”¨sshå’Œhttpåè®®çš„åŒºåˆ«"></a>3.gitä¸­ä½¿ç”¨sshå’Œhttpåè®®çš„åŒºåˆ«</h4><p>gitå¯ä»¥ä½¿ç”¨å››ç§ä¸»è¦çš„åè®®æ¥ä¼ è¾“èµ„æ–™: æœ¬åœ°åè®®ï¼ˆLocalï¼‰ï¼ŒHTTP åè®®ï¼ŒSSHï¼ˆSecure Shellï¼‰åè®®åŠ git åè®®ã€‚å…¶ä¸­ï¼Œæœ¬åœ°åè®®ç”±äºç›®å‰å¤§éƒ½æ˜¯è¿›è¡Œè¿œç¨‹å¼€å‘å’Œå…±äº«ä»£ç æ‰€ä»¥ä¸€èˆ¬ä¸å¸¸ç”¨ï¼Œè€Œgitåè®®ç”±äºç¼ºä¹æˆæƒæœºåˆ¶ä¸”è¾ƒéš¾æ¶è®¾æ‰€ä»¥ä¹Ÿä¸å¸¸ç”¨ã€‚</p>
<p>æœ€å¸¸ç”¨çš„ä¾¿æ˜¯SSHå’ŒHTTP(S)åè®®ã€‚gitå…³è”è¿œç¨‹ä»“åº“å¯ä»¥ä½¿ç”¨httpåè®®æˆ–è€…sshåè®®ã€‚</p>
<p><strong>ã€ä¼˜ç¼ºç‚¹ã€‘</strong></p>
<p><strong>sshï¼š</strong></p>
<ul>
<li>ä¸€èˆ¬ä½¿ç”¨22ç«¯å£ï¼›</li>
<li>é€šè¿‡å…ˆåœ¨æœ¬åœ°ç”ŸæˆSSHå¯†é’¥å¯¹å†æŠŠå…¬é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼›</li>
<li>é€Ÿåº¦ç›¸è¾ƒæ…¢ç‚¹</li>
</ul>
<p><strong>httpsï¼š</strong></p>
<ul>
<li>ä¸€èˆ¬ä½¿ç”¨443ç«¯å£ï¼›</li>
<li>é€šè¿‡ç”¨æˆ·å/å¯†ç æˆæƒï¼Œå¯ç”¨æ€§æ¯”è¾ƒé«˜ï¼›</li>
<li>é€Ÿåº¦ç›¸è¾ƒå¿«ç‚¹</li>
</ul>
<p>ä¸€èˆ¬ä¼ä¸šé˜²ç«å¢™ä¼šæ‰“å¼€80å’Œ443è¿™ä¸¤ä¸ªhttp/httpsåè®®çš„ç«¯å£ï¼Œå› æ­¤åœ¨æ¶è®¾äº†ä¼ä¸šé˜²ç«å¢™çš„æ—¶å€™ä½¿ç”¨httpå°±å¯ä»¥å¾ˆå¥½çš„ç»•å¼€å®‰å…¨é™åˆ¶ä½¿ç”¨gitäº†ï¼Œå¾ˆæ–¹ä¾¿ï¼›è€Œå¯¹äºsshæ¥è¯´ï¼Œä¼ä¸šé˜²ç«å¢™å¾ˆå¯èƒ½æ²¡æ‰“å¼€22ç«¯å£ã€‚</p>
<p><strong>ã€ä½¿ç”¨åŒºåˆ«ã€‘</strong></p>
<p><strong>cloneé¡¹ç›®ï¼š</strong></p>
<p>ã€€ã€€**ä½¿ç”¨sshæ–¹å¼æ—¶ï¼Œéœ€è¦é…ç½®ssh keyï¼Œå³è¦å°†ç”Ÿæˆçš„SSHå¯†é’¥å¯¹çš„å…¬é’¥ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼›<br>**</p>
<p>ã€€ã€€<strong>ä½¿ç”¨httpæ–¹å¼æ—¶ï¼Œæ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥ç›´æ¥å…‹éš†ä¸‹æ¥ã€‚</strong></p>
<p><strong>pushé¡¹ç›®ï¼š</strong></p>
<p>ã€€ã€€<strong>ä½¿ç”¨sshæ–¹å¼æ—¶ï¼Œä¸éœ€è¦éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼Œ*<em>**ä¹‹å‰é…ç½®è¿‡ssh keyï¼Œ(å¦‚æœä½ æ²¡è®¾ç½®å¯†ç )**</em>*ç›´æ¥pushå³å¯ï¼›</strong></p>
<p>ã€€ã€€<strong>ä½¿ç”¨httpæ–¹å¼æ—¶ï¼Œéœ€è¦éªŒè¯ç”¨æˆ·åå’Œå¯†ç ã€‚</strong></p>
<p> <strong>æ€»ç»“ï¼š</strong></p>
<p>HTTPSåˆ©äºåŒ¿åè®¿é—®ï¼Œé€‚åˆå¼€æºé¡¹ç›®ï¼Œå¯ä»¥æ–¹ä¾¿è¢«åˆ«äººå…‹éš†å’Œè¯»å–(ä½†æ²¡æœ‰pushæƒé™)ï¼›</p>
<p>SSHä¸åˆ©äºåŒ¿åè®¿é—®ï¼Œæ¯”è¾ƒé€‚åˆå†…éƒ¨é¡¹ç›®ï¼Œåªè¦é…ç½®äº†SSHå…¬é’¥æå¯è‡ªç”±å®ç°cloneå’Œpushæ“ä½œã€‚</p>
<h4 id="4-githubä¸­çš„repositoryå’Œproject"><a href="#4-githubä¸­çš„repositoryå’Œproject" class="headerlink" title="4.githubä¸­çš„repositoryå’Œproject"></a>4.githubä¸­çš„repositoryå’Œproject</h4><pre><code>Githubä¸Šè¾¹çš„repositoriesç¿»è¯‘ä¸ºä»£ç ä»“åº“ï¼Œå¯ä»¥ä¿å­˜å¤šä¸ªä»£ç å·¥ç¨‹å’Œé¡¹ç›®çš„ä»£ç ï¼Œèµ„æºï¼Œæ–‡æœ¬ã€å›¾ç‰‡......ç­‰;

è€Œprojectså¯ä»¥ç¿»è¯‘ä¸ºé¡¹ç›®æ¿ï¼Œæ˜¯project-boardsçš„ç®€å†™ã€‚ç®€å•è¯´ï¼Œå¯ä»¥ç†è§£ä¸ºå·¥ä½œè®¡åˆ’è¡¨ä¹‹ç±»çš„ä¹¦ç­¾ï¼Œåˆ¶å®šä¸€ä¸‹å·¥ä½œè®¡åˆ’ï¼ŒBugï¼Œæµç¨‹ä»€ä¹ˆçš„ã€‚
</code></pre>
<h4 id="5-git-add-ä¹‹åå–æ¶ˆåŠ å…¥"><a href="#5-git-add-ä¹‹åå–æ¶ˆåŠ å…¥" class="headerlink" title="5.git add ä¹‹åå–æ¶ˆåŠ å…¥"></a>5.git add ä¹‹åå–æ¶ˆåŠ å…¥</h4><p>å¦‚æœå·²ç»æ‰§è¡Œäº†git add dir_name</p>
<p>æ­¤æ—¶éœ€è¦æ’¤é”€ addæ“ä½œï¼Œåˆ™éœ€æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p>
<p>git rm -r dir_name â€“cached</p>
<p>ç”±äºç›®å½•å·²ç»æ·»åŠ åˆ°git æš‚å­˜ï¼ˆstageï¼‰ä¸­äº†ï¼Œæ‰€ä»¥éœ€è¦åŠ â€“cachedå‚æ•°</p>
<p>git reset .   æ’¤é”€å…¨éƒ¨git add</p>
<p>git rm ä¸ git resetçš„åŒºåˆ«<br>git rmï¼šç”¨äºä»å·¥ä½œåŒºå’Œç´¢å¼•ä¸­åˆ é™¤æ–‡ä»¶<br>git resetï¼šç”¨äºå°†å½“å‰HEADå¤ä½åˆ°æŒ‡å®šçŠ¶æ€ã€‚ä¸€èˆ¬ç”¨äºæ’¤æ¶ˆä¹‹å‰çš„ä¸€äº›æ“ä½œ(å¦‚ï¼šgit add,git commitç­‰)ã€‚</p>
<p><em>git reset HEAD å¦‚æœåé¢ä»€ä¹ˆéƒ½ä¸è·Ÿçš„è¯ å°±æ˜¯ä¸Šä¸€æ¬¡add é‡Œé¢çš„å…¨éƒ¨æ’¤é”€äº†<br>git reset HEAD XXX/XXX/XXX.java å°±æ˜¯å¯¹æŸä¸ªæ–‡ä»¶è¿›è¡Œæ’¤é”€äº†</em></p>
<h4 id="6-mainå’Œmasterï¼Ÿ"><a href="#6-mainå’Œmasterï¼Ÿ" class="headerlink" title="6.mainå’Œmasterï¼Ÿ"></a>6.mainå’Œmasterï¼Ÿ</h4><p>åœ¨2020å¹´10æœˆ1æ—¥ï¼Œä½ åˆ›å»ºçš„ä»»ä½•æ–°ä»“åº“éƒ½å°†ä½¿ç”¨mainä½œä¸ºé»˜è®¤åˆ†æ”¯ï¼Œè€Œä¸æ˜¯masterã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/wannananana/p/12059806.html">https://www.cnblogs.com/wannananana/p/12059806.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/03/myblog/JAVA/log%E6%97%A5%E5%BF%97%E4%B8%8Emaven%E6%89%93%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/03/myblog/JAVA/log%E6%97%A5%E5%BF%97%E4%B8%8Emaven%E6%89%93%E5%8C%85/" class="post-title-link" itemprop="url">logæ—¥å¿—ä¸mavenæ‰“åŒ…</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-03 11:02:33" itemprop="dateCreated datePublished" datetime="2022-04-03T11:02:33+08:00">2022-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-30 15:48:31" itemprop="dateModified" datetime="2022-10-30T15:48:31+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å·¥ä½œä¸­éœ€è¦å°†åº”ç”¨éƒ¨ç½²åœ¨æœ¬åœ°ï¼Œæƒ³æ¥ä¹‹å‰ç”¨goçš„æ—¶å€™è²Œä¼¼æ˜¯ç›´æ¥ç¼–è¯‘è¿è¡Œå°±åœ¨æœ¬åœ°éƒ¨ç½²äº†ï¼Œä½†æ˜¯javaéœ€è¦ç”¨åˆ°mavenæ‰“åŒ…ï¼Œè¿˜æ²¡æ‰“åŒ…è¿‡ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚é¡ºä¾¿å·¥ä½œä¸­æŸ¥çœ‹æ—¥å¿—å¯¹log4jã€sjf4jã€logbackã€lombackè¿™å‡ ä¸ªä¸œè¥¿æœ‰ç‚¹è¿·ç³Šï¼Œæ‰€ä»¥å…ˆå­¦ä¸€ä¸‹æ—¥å¿—ç›¸å…³çš„ï¼Œç„¶åå»ºå·¥ç¨‹æ‰“åŒ…éƒ¨ç½²åœ¨æœ¬åœ°çœ‹ä¸‹æ•ˆæœã€‚</p>
<h3 id="1-lombok"><a href="#1-lombok" class="headerlink" title="1.lombok"></a>1.lombok</h3><p>è‡ªç„¶ä¸å¿…å¤šè¯´ï¼Œlombokå¯ä»¥é€šè¿‡ç®€å•çš„æ³¨è§£çš„å½¢å¼æ¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–å’Œæ¶ˆé™¤ä¸€äº›å¿…é¡»æœ‰ä½†æ˜¾å¾—å¾ˆè‡ƒè‚¿çš„Javaä»£ç ï¼Œæ¯”å¦‚å¸¸è§çš„Getter&amp;Setterã€toString()ã€æ„é€ å‡½æ•°ç­‰ç­‰ã€‚lombokä¸ä»…æ–¹ä¾¿ç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿè®©æˆ‘ä»¬çš„ä»£ç æ›´ç®€æ´ã€‚</p>
<p>lombokæä¾›äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„jaråŒ…ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸æˆ‘ä»¬çš„é¡¹ç›®è¿›è¡Œé›†æˆã€‚</p>
<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>ç¬¬ä¸€æ­¥ï¼šåŠ å…¥lombokä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>scop=providedï¼Œè¡¨ç¤ºå®ƒåªåœ¨ç¼–è¯‘é˜¶æ®µç”Ÿæ•ˆï¼Œä¸éœ€è¦æ‰“å…¥åŒ…ä¸­ï¼Œlombokåœ¨ç¼–è¯‘æœŸå°†å¸¦lombokæ³¨è§£çš„javaæ–‡ä»¶æ­£ç¡®ç¼–è¯‘ä¸ºå®Œæ•´çš„classæ–‡ä»¶ã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼šideaä¸­æ·»åŠ lombokæ’ä»¶</p>
<p>å¦åˆ™ä¼šæŠ¥ç¼ºå°‘æ–¹æ³•å’Œæ²¡æœ‰è®¾ç½®å±æ€§çš„å¼‚å¸¸ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®å¯ç”¨æ³¨é‡Šå¤„ç†</p>
<p>è®¾ç½®ä¸­ Annotation processorsï¼Œenable annotation processingã€‚</p>
<h4 id="lombokåŸç†"><a href="#lombokåŸç†" class="headerlink" title="lombokåŸç†"></a>lombokåŸç†</h4><ol>
<li>javacå¯¹æºä»£ç è¿›è¡Œåˆ†æï¼Œç”Ÿæˆäº†ä¸€æ£µæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰</li>
<li>ç¼–è¯‘è¿‡ç¨‹ä¸­è°ƒç”¨å®ç°äº†â€œJSR 269 APIâ€çš„Lombokç¨‹åº</li>
<li>æ­¤æ—¶Lombokå°±å¯¹ç¬¬ä¸€æ­¥éª¤å¾—åˆ°çš„ASTè¿›è¡Œå¤„ç†ï¼Œæ‰¾åˆ°@Dataæ³¨è§£æ‰€åœ¨ç±»å¯¹åº”çš„è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç„¶åä¿®æ”¹è¯¥è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå¢åŠ getterå’Œsetteræ–¹æ³•å®šä¹‰çš„ç›¸åº”æ ‘èŠ‚ç‚¹</li>
<li>javacä½¿ç”¨ä¿®æ”¹åçš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ï¼Œå³ç»™classå¢åŠ æ–°çš„èŠ‚ç‚¹ï¼ˆä»£ç å—ï¼‰</li>
</ol>
<h3 id="2-SLF4J"><a href="#2-SLF4J" class="headerlink" title="2.SLF4J"></a>2.SLF4J</h3><h4 id="æ¥å£ä¸åŒ…å…³ç³»"><a href="#æ¥å£ä¸åŒ…å…³ç³»" class="headerlink" title="æ¥å£ä¸åŒ…å…³ç³»"></a>æ¥å£ä¸åŒ…å…³ç³»</h4><p>Simple logging Facade for Javaï¼Œæ„æ€ä¸ºç®€å•æ—¥å¿—é—¨é¢ï¼Œå®ƒæ˜¯æŠŠä¸åŒçš„æ—¥å¿—ç³»ç»Ÿçš„å®ç°è¿›è¡Œäº†å…·ä½“çš„æŠ½è±¡åŒ–ï¼Œåªæä¾›äº†ç»Ÿä¸€çš„æ—¥å¿—ä½¿ç”¨æ¥å£ï¼Œä½¿ç”¨æ—¶åªéœ€è¦æŒ‰ç…§å…¶æä¾›çš„æ¥å£æ–¹æ³•è¿›è¡Œè°ƒç”¨å³å¯ï¼Œç”±äº<strong>å®ƒåªæ˜¯ä¸€ä¸ªæ¥å£</strong>ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å¯ä»¥ç›´æ¥å•ç‹¬ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶ï¼Œæ‰€ä»¥æœ€ç»ˆæ—¥å¿—çš„æ ¼å¼ã€è®°å½•çº§åˆ«ã€è¾“å‡ºæ–¹å¼ç­‰éƒ½è¦<strong>é€šè¿‡æ¥å£ç»‘å®šçš„å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿæ¥å®ç°</strong>ï¼Œè¿™äº›å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿå°±æœ‰log4jã€logbackã€java.util.loggingç­‰ï¼Œå®ƒä»¬æ‰å®ç°äº†å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</p>
<p>SLF4Jåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®é™…ä½¿ç”¨æ—¶å¿…é¡»è¦ç»“åˆå…·ä½“çš„æ—¥å¿—ç³»ç»Ÿæ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹SLF4Jå’Œå„ä¸ªå…·ä½“çš„æ—¥å¿—ç³»ç»Ÿè¿›è¡Œç»‘å®šæ—¶çš„æ¡†æ¶åŸç†å›¾ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/e5308c09a82e0c57889adea715d6a602.png"></p>
<p>slf4jåŸç†å¾ˆç®€å•ï¼Œä»–åªæä¾›ä¸€ä¸ªæ ¸å¿ƒslf4j api(å°±æ˜¯slf4j-api.jaråŒ…)ï¼Œè¿™ä¸ªåŒ…åªæœ‰æ—¥å¿—çš„æ¥å£ï¼Œå¹¶æ²¡æœ‰å®ç°ï¼Œæ‰€ä»¥å¦‚æœè¦ä½¿ç”¨å°±å¾—<strong>å†ç»™å®ƒæä¾›ä¸€ä¸ªå®ç°äº†äº›æ¥å£çš„æ—¥å¿—åŒ…</strong>ï¼Œæ¯” å¦‚ï¼šlog4jã€common loggingã€jdk logæ—¥å¿—å®ç°åŒ…ç­‰ï¼Œä½†æ˜¯<strong>è¿™äº›æ—¥å¿—å®ç°åˆä¸èƒ½é€šè¿‡æ¥å£ç›´æ¥è°ƒç”¨</strong>ï¼Œå®ç°ä¸Šä»–ä»¬æ ¹æœ¬å°±å’Œslf4j-apiä¸ä¸€è‡´ï¼Œå› æ­¤slf4jåˆå¢åŠ äº†ä¸€å±‚æ¥<strong>è½¬æ¢å„æ—¥å¿—å®ç°åŒ…çš„ä½¿ç”¨</strong>ï¼Œå½“ç„¶slf4j-simpleé™¤å¤–ã€‚å…¶ç»“æ„å¦‚ä¸‹ï¼š </p>
<blockquote>
<p>slf4j-api(æ¥å£å±‚)<br> | |<br>å„æ—¥å¿—å®ç°åŒ…çš„è¿æ¥å±‚( slf4j-jdk14, slf4j-log4j)<br> | |<br>å„æ—¥å¿—å®ç°åŒ…     </p>
</blockquote>
<p><strong>æ‰€ä»¥ï¼Œç»“åˆå„æ—¥å¿—å®ç°åŒ…ä½¿ç”¨æ—¶æä¾›çš„jaråŒ…æƒ…å†µä¸ºï¼š</strong></p>
<p>SLF4Jå’Œlogbackç»“åˆä½¿ç”¨æ—¶éœ€è¦æä¾›çš„jarï¼šslf4j-api.jarã€logback-classic.jarã€logback-core.jar</p>
<p>SLF4Jå’Œlog4jç»“åˆä½¿ç”¨æ—¶éœ€è¦æä¾›çš„jarï¼šslf4j-api.jarã€slf4j-log4j12.jarã€log4j.jar</p>
<p>å’Œlog4j2é…åˆéœ€è¦å¯¼å…¥log4j2çš„<strong>log4j-api.jar</strong>ã€<strong>log4j-core.jar</strong>å’Œæ¡¥æ¥åŒ…<strong>log4j-slf4j-impl.jar</strong>ã€‚</p>
<p>SLF4Jå’ŒJDKä¸­java.util.loggingç»“åˆä½¿ç”¨æ—¶éœ€è¦æä¾›çš„jarï¼šslf4j-api.jarã€slf4j-jdk14.jar</p>
<p>SLF4Jå’Œsimple(SLF4Jæœ¬èº«æä¾›çš„ä¸€ä¸ªæ¥å£çš„ç®€å•å®ç°)ç»“åˆä½¿ç”¨æ—¶éœ€è¦æä¾›çš„jarï¼šslf4j-api.jarã€slf4j-simple.jar</p>
<p>å½“ç„¶è¿˜æœ‰å…¶ä»–çš„æ—¥å¿—å®ç°åŒ…ï¼Œä»¥ä¸Šæ˜¯ç»å¸¸ä¼šä½¿ç”¨åˆ°çš„ä¸€äº›ã€‚</p>
<p>*<strong>æ³¨æ„ï¼Œä»¥ä¸Šslf4jå’Œå„æ—¥å¿—å®ç°åŒ…ç»“åˆä½¿ç”¨æ—¶æœ€å¥½åªä½¿ç”¨ä¸€ç§ç»“åˆï¼Œä¸ç„¶çš„è¯ä¼šæç¤ºé‡å¤ç»‘å®šæ—¥å¿—ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´æ—¥å¿—æ— æ³•è¾“å‡ºã€‚*</strong></p>
<h4 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>*<strong>slf4j-api.jar:å¯¹å¤–æä¾›ç»Ÿä¸€çš„æ—¥å¿—è°ƒç”¨æ¥å£ï¼Œè¯¥æ¥å£å…·ä½“æä¾›çš„è°ƒç”¨æ–¹å¼å’Œæ–¹æ³•ä¸¾ä¾‹è¯´æ˜ï¼š*</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">ã€€ã€€<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(Tester.class);  </span><br><span class="line">ã€€ã€€<span class="comment">//é€šè¿‡LoggerFactoryè·å–Loggerå®ä¾‹</span></span><br><span class="line">ã€€ã€€<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//æ¥å£é‡Œçš„ç»Ÿä¸€çš„è°ƒç”¨æ–¹æ³•ï¼Œå„å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿéƒ½æœ‰å®ç°è¿™äº›æ–¹æ³•</span></span><br><span class="line">ã€€ã€€		logger.info(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>); </span><br><span class="line">       logger.debug(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">       logger.error(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">       logger.trace(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">       logger.warn(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨Lombokæä¾›çš„@Slf4jæ³¨è§£ï¼Œå¯ä»¥çœå»è·å–Loggerå¯¹è±¡çš„æ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨log.info()â€¦</p>
<p><strong>å¦‚æœç³»ç»Ÿä¸­ä¹‹å‰å·²ç»ä½¿ç”¨äº†log4jåšæ—¥å¿—è¾“å‡ºï¼Œæƒ³ä½¿ç”¨slf4jä½œä¸ºç»Ÿä¸€çš„æ—¥å¿—è¾“å‡ºï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</strong></p>
<p>å¦‚æœä¹‹å‰ç³»ç»Ÿä¸­æ˜¯å•ç‹¬ä½¿ç”¨log4jåšä¸ºæ—¥å¿—è¾“å‡ºçš„ï¼Œè¿™æ—¶å†æƒ³ä½¿ç”¨slf4jåšä¸ºæ—¥å¿—è¾“å‡ºæ—¶ï¼Œå¦‚æœç³»ç»Ÿä¸­æ—¥å¿—æ¯”è¾ƒå¤šï¼Œæ­¤æ—¶æ›´æ”¹æ—¥å¿—è¾“å‡ºæ–¹æ³•è‚¯å®šæ˜¯ä¸å¤ªç°å®çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨log4j-over-slf4j.jarå°†ä½¿ç”¨log4jæ—¥å¿—æ¡†æ¶è¾“å‡ºçš„æ—¥å¿—è·¯ç”±åˆ°slf4jä¸Šæ¥ç»Ÿä¸€é‡‡ç”¨slf4jæ¥è¾“å‡ºæ—¥å¿—ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ</h4><p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SLF4J?</strong></p>
<ul>
<li> slf4jæ˜¯ä¸€ä¸ª<strong>æ—¥å¿—æ¥å£ï¼Œè‡ªå·±æ²¡æœ‰å…·ä½“å®ç°æ—¥å¿—ç³»ç»Ÿ</strong>ï¼Œåªæä¾›äº†ä¸€ç»„æ ‡å‡†çš„è°ƒç”¨api,è¿™æ ·<strong>å°†è°ƒç”¨å’Œå…·ä½“çš„æ—¥å¿—å®ç°åˆ†ç¦»</strong>ï¼Œ<strong>ä½¿ç”¨slf4jåæœ‰åˆ©äºæ ¹æ®è‡ªå·±å®é™…çš„éœ€æ±‚æ›´æ¢å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿ</strong>ï¼Œæ¯”å¦‚ï¼Œä¹‹å‰ä½¿ç”¨çš„å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿä¸ºlog4jï¼Œæƒ³æ›´æ¢ä¸ºlogbackæ—¶ï¼Œåªéœ€è¦åˆ é™¤log4jç›¸å…³çš„jarï¼Œç„¶ååŠ å…¥logbackç›¸å…³çš„jarå’Œæ—¥å¿—é…ç½®æ–‡ä»¶å³å¯ï¼Œè€Œä¸éœ€è¦æ”¹åŠ¨å…·ä½“çš„æ—¥å¿—è¾“å‡ºæ–¹æ³•ï¼Œè¯•æƒ³å¦‚æœæ²¡æœ‰é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œå½“ä½ çš„ç³»ç»Ÿä¸­æ—¥å¿—è¾“å‡ºæœ‰æˆåƒä¸Šä¸‡æ¡æ—¶ï¼Œä½ è¦æ›´æ¢æ—¥å¿—ç³»ç»Ÿå°†æ˜¯å¤šä¹ˆåºå¤§çš„ä¸€é¡¹å·¥ç¨‹ã€‚å¦‚æœä½ å¼€å‘çš„æ˜¯ä¸€ä¸ªé¢å‘å…¬ä¼—ä½¿ç”¨çš„ç»„ä»¶æˆ–å…¬å…±æœåŠ¡æ¨¡å—ï¼Œé‚£ä¹ˆä¸€å®šè¦ä½¿ç”¨slf4çš„è¿™ç§å½¢å¼ï¼Œè¿™æœ‰åˆ©äºåˆ«äººåœ¨è°ƒç”¨ä½ çš„æ¨¡å—æ—¶ä¿æŒå’Œä»–ç³»ç»Ÿä¸­ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—è¾“å‡ºã€‚</li>
<li><strong>slf4jæ—¥å¿—è¾“å‡ºæ—¶å¯ä»¥ä½¿ç”¨{}å ä½ç¬¦</strong>ï¼Œå¦‚ï¼Œlogger.info(â€œtestlog: {}â€, â€œtestâ€)ï¼Œè€Œå¦‚æœåªä½¿ç”¨log4jåšæ—¥å¿—è¾“å‡ºæ—¶ï¼Œåªèƒ½ä»¥logger.info(â€œtestlog:â€+â€testâ€)è¿™ç§å½¢å¼ï¼Œå‰è€…è¦æ¯”åè€…åœ¨æ€§èƒ½ä¸Šæ›´å¥½ï¼Œåè€…é‡‡ç”¨+è¿æ¥å­—ç¬¦ä¸²æ—¶å°±æ˜¯new ä¸€ä¸ªString å­—ç¬¦ä¸²ï¼Œåœ¨æ€§èƒ½ä¸Šå°±ä¸å¦‚å‰è€…ã€‚</li>
</ul>
<h3 id="3-log4j-log-for-java"><a href="#3-log4j-log-for-java" class="headerlink" title="3.log4j(log for java)"></a>3.<strong>log4j(log for java)</strong></h3><p>Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥<strong>æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°</strong>æ˜¯æ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„ä»¶ï¼Œç”šè‡³æ˜¯å¥—æ¥å£æœåŠ¡å™¨ã€NTçš„äº‹ä»¶è®°å½•å™¨ã€UNIX Syslogå®ˆæŠ¤è¿›ç¨‹ç­‰ï¼›æˆ‘ä»¬ä¹Ÿå¯ä»¥<strong>æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</strong>ï¼›é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°±æ˜¯ï¼Œè¿™äº›å¯ä»¥<strong>é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®</strong>ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li>å¼•å…¥jar,ä½¿ç”¨log4jæ—¶éœ€è¦çš„jarä¸ºï¼šlog4j.jarã€‚</li>
<li>å®šä¹‰é…ç½®æ–‡ä»¶log4j.propertiesæˆ–log4j.xml</li>
<li>åœ¨å…·ä½“çš„ç±»ä¸­è¿›è¡Œä½¿ç”¨ï¼š<ul>
<li>åœ¨éœ€è¦æ—¥å¿—è¾“å‡ºçš„ç±»ä¸­åŠ å…¥ï¼šprivate static final Logger logger = Logger.getLogger(Tester.class);  //é€šè¿‡Loggerè·å–Loggerå®ä¾‹</li>
<li>åœ¨éœ€è¦è¾“å‡ºæ—¥å¿—çš„åœ°æ–¹è°ƒç”¨ç›¸åº”æ–¹æ³•å³å¯ï¼šlogger.debug(â€œSystem â€¦..â€)</li>
</ul>
</li>
</ul>
<h3 id="4-logback"><a href="#4-logback" class="headerlink" title="4.logback"></a>4.logback</h3><p>logbackåŒæ ·æ˜¯ç”±log4jçš„ä½œè€…è®¾è®¡å®Œæˆçš„ï¼Œæ‹¥æœ‰æ›´å¥½çš„ç‰¹æ€§ï¼Œç”¨æ¥å–ä»£log4jçš„ä¸€ä¸ªæ—¥å¿—æ¡†æ¶ï¼Œæ˜¯slf4jçš„åŸç”Ÿå®ç°(å³ç›´æ¥å®ç°äº†slf4jçš„æ¥å£ï¼Œè€Œlog4jå¹¶æ²¡æœ‰ç›´æ¥å®ç°ï¼Œæ‰€ä»¥å°±éœ€è¦ä¸€ä¸ªé€‚é…å™¨slf4j-log4j12.jar)ï¼Œlogbackä¸€å…±æœ‰ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<ul>
<li>logback-coreï¼šå…¶å®ƒä¸¤ä¸ªæ¨¡å—çš„åŸºç¡€æ¨¡å—</li>
<li>logback-classicï¼šå®ƒæ˜¯log4jçš„ä¸€ä¸ªæ”¹è‰¯ç‰ˆæœ¬ï¼ŒåŒæ—¶å®ƒå®Œæ•´å®ç°äº†slf4j APIä½¿ä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›´æ¢æˆå…¶å®ƒæ—¥å¿—ç³»ç»Ÿå¦‚log4jæˆ–JDK14 Logging</li>
<li>logback-accessï¼šè®¿é—®æ¨¡å—ä¸Servletå®¹å™¨é›†æˆæä¾›é€šè¿‡Httpæ¥è®¿é—®æ—¥å¿—çš„åŠŸèƒ½</li>
</ul>
<p>åŒæ ·ï¼Œå•ç‹¬ä½¿ç”¨å®ƒæ—¶ï¼Œéœ€è¦å¼•å…¥ä»¥ä¸Šjarï¼Œç„¶åè¿›è¡Œé…ç½®æ–‡ä»¶çš„é…ç½®ï¼Œæœ€åå°±æ˜¯åœ¨ç›¸å…³ç±»ä¸­è¿›è¡Œä½¿ç”¨ï¼Œä½¿ç”¨æ—¶åŠ å…¥ä»¥ä¸‹è¯­å¥:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(Test.class);</span><br><span class="line"> ã€€logger.info(<span class="string">&quot;æ‰“å°æ—¥å¿—&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦æ”¹ä»£ç çš„æ—¥å¿—çº§åˆ«ï¼šæ”¹logback-spring.xmlé‡Œçš„<code>&lt;root level=&quot;INFO&quot;&gt;</code></p>
<h3 id="5-logå‘å±•å²"><a href="#5-logå‘å±•å²" class="headerlink" title="5.logå‘å±•å²"></a>5.logå‘å±•å²</h3><p>ä»JDK1.4å¼€å§‹æä¾›java.until.loggingæ—¥å¿—æ¡†æ¶æ¥æ‰“å°æ—¥å¿—ï¼Œä½†æ˜¯å¤§ä½¬è§‰å¾—JULå¤ªéš¾ç”¨äº†ï¼Œå°±è‡ªå·±æ‰‹æ’¸äº†ä¸ªlog4jï¼Œåæ¥log4jå‘ç°å®‰å…¨æ¼æ´ï¼ŒåŠ ä¸Šä»£ç ç»“æ„é—®é¢˜éš¾ä»¥ç»´æŠ¤ï¼Œäºæ˜¯ä»1.2å°±åœæ­¢æ›´æ–°log4jï¼Œå¹¶åˆé‡æ–°æ‰‹æ’¸äº†ä¸ªlog4j2ï¼Œå†åæ¥ï¼Œè¿™ä¸ªå¤§ä½¬åˆåŒæ‰‹æ’¸äº†ä¸€ä¸ªæ€§èƒ½æ›´é«˜ã€åŠŸèƒ½æ›´å…¨çš„logbackã€‚</p>
<p>ä»æ­¤ï¼Œè¿™ä¸ªå¤§ä½¬æ„å»ºäº†logçš„ä¸–ç•Œï¼Œä¹Ÿåˆ›é€ äº†æœ€å¸¸è§çš„æ—¥å¿—æ¡†æ¶ï¼šlog4jã€log4j2ã€logbackã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨log4jï¼Œéœ€è¦log4j.jar</span></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line">Logger logger_log4j = Logger.getLogger(Test.class);</span><br><span class="line">logger_log4j.info(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨log4j2ï¼Œéœ€è¦log4j-api.jarã€log4j-core.jar</span></span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.LogManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.Logger;</span><br><span class="line">Logger logger_log4j2 = LogManager.getLogger(Test.class);</span><br><span class="line">logger_log4j2.info(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// logbackï¼Œéœ€è¦logback-classic.jarã€logback-core.jar</span></span><br><span class="line"><span class="keyword">import</span> ch.qos.logback.classic.Logger;</span><br><span class="line"><span class="keyword">import</span> ch.qos.logback.classic.LoggerContext;</span><br><span class="line">Logger logger_logback = <span class="keyword">new</span> LoggerContext().getLogger(Test.class);</span><br><span class="line">logger_logback.info(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// java.until.loggingï¼Œç®€ç§°jul</span></span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line">Logger logger_jul = Logger.getLogger(<span class="string">&quot;java.Test&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢ä¸éš¾çœ‹å‡ºï¼Œä½¿ç”¨ä¸åŒçš„æ—¥å¿—æ¡†æ¶ï¼Œå°±è¦å¼•å…¥ä¸åŒçš„jaråŒ…ï¼Œä½¿ç”¨ä¸åŒçš„ä»£ç è·å–Loggerã€‚</p>
<p>äºæ˜¯Apache Commons Loggingå‡ºç°äº†ã€‚</p>
<p>Common-loggingæä¾›äº†ä¸€ä¸ªæ—¥å¿—å…¥å£ï¼Œç§°ä½œâ€é—¨é¢æ—¥å¿—â€ï¼Œå³å®ƒä¸è´Ÿè´£å†™æ—¥å¿—ï¼Œè€Œæ˜¯<strong>æä¾›ç”¨ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œé€šè¿‡jaræ¥å†³å®šä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶</strong>ï¼Œè¿™æ ·å°±ä¸è¦å†æ›´æ¢æ¡†æ¶çš„æ—¶å€™å†ä¿®æ”¹ä»£ç äº†ã€‚åæ¥å¼€å‘äº†log4jçš„å¤§ä½¬åˆå› ä¸ºå«Œå¼ƒCommon-loggingéš¾ç”¨ï¼Œå¼€å‘äº†é—¨é¢æ—¥å¿—æ¡†æ¶<strong>slf4j</strong>ï¼Œä»Šå¤©å°±æ‹¿slf4jè®²è¿°é—¨é¢æ—¥å¿—ã€‚</p>
<p>é—¨é¢æ—¥å¿—å’Œè®¾è®¡æ¨¡å¼ä¸­çš„<strong>å¤–è§‚æ¨¡å¼</strong>å¦‚å‡ºä¸€è¾™ï¼Œæœ¬èº«ä¸æä¾›æœåŠ¡ï¼Œä¸ºå­ç³»ç»Ÿæä¾›ç»Ÿä¸€çš„å…¥å£ï¼Œå°è£…å­ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œä¾¿äºå®¢æˆ·ç«¯è°ƒç”¨ã€‚slf4jå°±åƒæ˜¯èœé¸Ÿé©¿ç«™ï¼Œæœ¬èº«æ²¡æœ‰å¿«é€’æœåŠ¡ï¼Œä½†æ˜¯æä¾›é¡ºä¸°ã€ä¸­é€šç­‰å¿«é€’æœåŠ¡ï¼Œè‡³äºä½ æƒ³ç”¨é¡ºä¸°è¿˜æ˜¯ç”¨ä¸­é€šï¼Œå®Œå…¨å–å†³äºä½ çš„æƒ³æ³•ã€‚</p>
<p>ä½¿ç”¨slf4jï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line">Logger logger = LoggerFactory.getLogger(Test.class);</span><br><span class="line">logger.info(<span class="string">&quot;Hello World!&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨slf4jéœ€è¦é¦–å…ˆå¯¼å…¥<strong>slf4j-api.jar</strong>ï¼Œå’Œlog4jé…åˆï¼Œéœ€è¦å¯¼å…¥<strong>log4j.jar</strong>ï¼Œä»¥åŠæ¡¥æ¥åŒ…<strong>slf4j-log412.jar</strong>ã€‚</p>
<p>logbackåªéœ€è¦å¯¼å…¥<strong>logback-classic.jar</strong>å’Œ<strong>logback-core.jar</strong>å³å¯ï¼Œä¸éœ€è¦æ¡¥æ¥åŒ…ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨æ¡¥æ¥åŒ…ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨æ¡¥æ¥åŒ…ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨æ¡¥æ¥åŒ…ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨æ¡¥æ¥åŒ…ï¼Ÿ</h4><p>slf4jä»LoggerFactory.getLogger()å¼€å§‹ï¼ŒåŸç†å°±æ˜¯å°±æ˜¯è®©ClassLoaderä»classpath(ä¾èµ–çš„jar)ä¸­æ‰¾åˆ°<strong>StaticLoggerBinder</strong>è¿™ä¸ªç±»ï¼Œç„¶ååˆ©ç”¨ä»–æ¥è¿”å›log4jã€logbackä¸­çš„Loggerï¼Œç„¶åæ‰“å°æ—¥å¿—ã€‚</p>
<p>æ‰€è°“çš„æ¡¥æ¥åŒ…ï¼Œå°±æ˜¯å®ç°StaticLoggerBinderç±»ï¼Œç”¨æ¥è¿æ¥slf4jå’Œæ—¥å¿—æ¡†æ¶ã€‚å› ä¸ºlog4jå’Œlog4j2åˆšå¼€å§‹æ²¡æœ‰StaticLoggerBinderè¿™ä¸ªç±»ï¼Œä¸ºäº†ä¸æ”¹å˜ç¨‹åºç»“æ„ï¼Œåªèƒ½é‡æ–°å†™ä¸€ä¸ªæ–°çš„jaræ¥å®ç°StaticLoggerBinderã€‚è€Œlogbackå‡ºç°slf4jä¹‹åï¼Œäºæ˜¯åœ¨logbackæœ¬èº«çš„jarä¸­å®ç°äº†StaticLoggerBinderï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æ¡¥æ¥åŒ…ã€‚</p>
<p>StaticLoggerBinderå®ç°äº†ä½¿ç”¨åº•å±‚æ—¥å¿—æ¡†æ¶åˆ›å»ºLoggerçš„åŠŸèƒ½ï¼Œå„è‡ªçš„StaticLoggerBinderä¸ºslf4jæä¾›çš„Loggerï¼Œå†æä¾›ç»™ç”¨æˆ·æ‰“å°æ—¥å¿—ã€‚</p>
<p>log4jå’Œlog4j2æ¡¥æ¥åŒ…åŠlogbackä¾èµ–é‡Œï¼Œéƒ½æœ‰StaticLoggerBinderç±»ã€‚</p>
<p>â€œClass path contains multiple SLF4J bindings.â€åœ¨ä½¿ç”¨slf4jçš„æ—¶å€™ä¼šé‡åˆ°ä»¥ä¸Šçš„æŠ¥å‘Šä¿¡æ¯ã€‚ç©¶å…¶æ ¹æœ¬æ˜¯å› ä¸ºlogback-classicã€log4j-slf4j-implã€slf4j-log412ã€slf4j-jdkè¿™äº›jarä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚ä»–ä»¬éƒ½å®ç°äº†StaticLoggerBinderç±»è€Œå¯¼è‡´å†²çªï¼Œslf4jæ— æ³•ç¡®å®šåˆ°åº•ç”¨å“ªä¸ªæ—¥å¿—æ¡†æ¶ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol>
<li><p>lombokæ˜¯ä¸€ä¸ªå¯ä»¥ç®€åŒ–ä»£ç çš„jaråŒ…ï¼Œéœ€è¦å¯¼å…¥ä¾èµ–ï¼Œæ·»åŠ æ’ä»¶ï¼Œå¯ä»¥è¯´æ˜¯å¼€å‘å¿…å¤‡ã€‚è·Ÿæ—¥å¿—æ²¡å•¥å…³ç³»ï¼Œåªä¸è¿‡@Slf4jæ³¨è§£æ˜¯lombokæä¾›çš„ï¼Œç”¨æ¥åœ¨æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨logã€‚</p>
</li>
<li><p>slf4jæ˜¯æ—¥å¿—é—¨é¢ï¼Œä¸€ä¸ªæ—¥å¿—æ¥å£ï¼Œè€Œä¸æä¾›æ—¥å¿—ç³»ç»Ÿå®ç°ï¼Œæ–¹ä¾¿æ—¥å¿—ç³»ç»Ÿä¸è°ƒç”¨çš„åˆ†ç¦»ï¼Œå¯ä»¥æ–¹ä¾¿æ›´æ¢æ—¥å¿—ç³»ç»Ÿã€‚ç›¸å½“äºæ˜¯æä¾›äº†ä¸€ç§æ—¥å¿—è¾“å‡ºçš„è§„èŒƒï¼Œä¸‹é¢çš„æ—¥å¿—ç³»ç»Ÿéƒ½éœ€è¦å®ç°è¿™äº›æ–¹æ³•ï¼Œç»Ÿä¸€äº†æ—¥å¿—è¾“å‡ºè§„èŒƒã€‚å®ƒå®ç°äº†æ—¥å¿—æ¡†æ¶ä¸€äº›é€šç”¨çš„apiï¼Œlog4jå’Œlogbackæ˜¯å…·ä½“çš„æ—¥å¿—æ¡†æ¶ã€‚</p>
</li>
<li><p>log4jå°±æ˜¯ä¸€ä¸ªæ—¥å¿—å®ç°ç³»ç»Ÿï¼Œå…·ä½“çš„é…ç½®æ–‡ä»¶log4j.propertiesæ€ä¹ˆå†™ï¼Œè¿˜å¾—å†çœ‹çœ‹ã€‚log4jåœ¨ç»“åˆslf4jæ—¶éœ€è¦ä½¿ç”¨ä¸€ä¸ªé€‚é…ç±»æ¡¥æ¥åŒ…ã€‚ä½¿ç”¨Logger.getLoggerã€‚</p>
</li>
<li><p>logbackæ—¶æ¯”log4jæ–°çš„æ—¥å¿—å®ç°ç³»ç»Ÿï¼Œç›´æ¥å®ç°äº†slf4jæ¥å£ï¼Œä½¿ç”¨LoggerFactory.getLoggerã€‚</p>
<p>ä»–ä»¬å¯ä»¥å•ç‹¬çš„ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç»‘å®šslf4jä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>å•ç‹¬ä½¿ç”¨ï¼Œåˆ†åˆ«è°ƒç”¨æ¡†æ¶è‡ªå·±çš„æ–¹æ³•æ¥è¾“å‡ºæ—¥å¿—ä¿¡æ¯ã€‚ç»‘å®šslf4jä¸€èµ·ä½¿ç”¨ã€‚è°ƒç”¨slf4jçš„apiæ¥è¾“å…¥æ—¥å¿—ä¿¡æ¯ï¼Œå…·ä½“ä½¿ç”¨ä¸åº•å±‚æ—¥å¿—æ¡†æ¶æ— å…³ï¼ˆéœ€è¦åº•å±‚æ¡†æ¶çš„é…ç½®æ–‡ä»¶ï¼‰ã€‚æ˜¾ç„¶ä¸æ¨èå•ç‹¬ä½¿ç”¨æ—¥å¿—æ¡†æ¶ã€‚å‡è®¾é¡¹ç›®ä¸­å·²ç»ä½¿ç”¨äº†log4jï¼Œè€Œæˆ‘ä»¬æ­¤æ—¶åŠ è½½äº†ä¸€ä¸ªç±»åº“ï¼Œè€Œè¿™ä¸ªç±»åº“ä¾èµ–å¦ä¸€ä¸ªæ—¥å¿—æ¡†æ¶ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ—¥å¿—æ¡†æ¶ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚è€Œä½¿ç”¨äº†slf4jå°±ä¸åŒäº†ï¼Œç”±äºåº”ç”¨è°ƒç”¨çš„æŠ½è±¡å±‚çš„apiï¼Œä¸åº•å±‚æ—¥å¿—æ¡†æ¶æ˜¯æ— å…³çš„ï¼Œå› æ­¤å¯ä»¥ä»»æ„æ›´æ¢æ—¥å¿—æ¡†æ¶ã€‚</p>
</li>
</ol>
<h3 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h3><h4 id="1-mavené¡¹ç›®"><a href="#1-mavené¡¹ç›®" class="headerlink" title="1.mavené¡¹ç›®"></a>1.mavené¡¹ç›®</h4><p>å¾ˆä¹…æ²¡åœ¨è¿™ä¸ªç”µè„‘ä¸Šæ–°å»ºmavené¡¹ç›®ï¼Œç»“æœé—®é¢˜æ¥äº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/.m2 â¯ mvn -v      </span><br><span class="line">zsh: command not found: mvn</span><br></pre></td></tr></table></figure>

<p>ä¹‹å‰å‡ºç°çš„é—®é¢˜åˆå‡ºç°äº†ï¼Œä¹‹å‰é‡æ–°é…ç½®äº†ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œå¯æ˜¯brew info maven ä¹Ÿæ‰¾ä¸åˆ°ä¹‹å‰mavenå®‰è£…çš„è·¯å¾„ï¼Œéš¾é“ä¹‹å‰æˆ‘ä¸æ˜¯é€šè¿‡brewå®‰è£…çš„å—ï¼Ÿ</p>
<p>å¦å¤–åœ¨èµ„æºåº“ä¸­ä¹Ÿæ²¡æ‰¾åˆ°ï¼Œå¥½å§ï¼Œé‡æ–° brew install maven ğŸ˜…ã€‚å¯æ˜¯brewå®‰è£…æŠ¥é”™ã€‚</p>
<p>å®˜ç½‘<a target="_blank" rel="noopener" href="https://maven.apache.org/download.cgi%E4%B8%8B%E8%BD%BDapache-maven-3.8.5-bin.tar.gz%E3%80%82%E8%A7%A3%E5%8E%8B%E5%88%B0%E8%B5%84%E6%BA%90%E5%BA%93%E4%B8%AD%E3%80%82%E9%82%A3%E4%B9%88%E5%A6%82%E4%BD%95%E4%BD%BF%E5%BE%97%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E8%BE%93%E5%85%A5mvn%E8%83%BD%E5%A4%9F%E6%89%BE%E5%88%B0maven%E5%8C%85%EF%BC%9F%E5%B0%B1%E9%9C%80%E8%A6%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%BA%86%E3%80%82">https://maven.apache.org/download.cgiä¸‹è½½apache-maven-3.8.5-bin.tar.gzã€‚è§£å‹åˆ°èµ„æºåº“ä¸­ã€‚é‚£ä¹ˆå¦‚ä½•ä½¿å¾—åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥mvnèƒ½å¤Ÿæ‰¾åˆ°mavenåŒ…ï¼Ÿå°±éœ€è¦é…ç½®ç¯å¢ƒå˜é‡äº†ã€‚</a></p>
<p>ä¸‹è½½ä¹‹åï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¸ç»æƒ³èµ·ä¹‹å‰çš„ç–‘é—®ï¼šjdkç¯å¢ƒå˜é‡åœ¨/etc/profileä¸­é…ç½®ï¼Œè€Œmavenä¸­çš„ç¯å¢ƒå˜é‡åœ¨~/.bash_profileï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>æˆ‘ä»¬å¸¸è¯´çš„ç¯å¢ƒå˜é‡ä¿®æ”¹ä¸»è¦åŒ…å«ä¸¤ç±»æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ profile å’Œ bashrc æ–‡ä»¶ã€‚profile æ–‡ä»¶åˆåˆ†ä¸ºï¼šâ€/etc/profileâ€ï¼Œâ€<del>/.bash_profileâ€ï¼›bashrc æ–‡ä»¶åˆ™åˆåˆ†ä¸º â€œ/etc/bashrcâ€ï¼Œå’Œ â€œ</del>/.bashrcâ€ æ–‡ä»¶ã€‚</p>
<p>è¯´åˆ°è¿™å„¿ï¼Œå¯èƒ½è¿·æƒ‘äº†ï¼Œæˆ‘åœ¨æˆ‘ç”µè„‘é‡Œæ²¡çœ‹åˆ°.bash_profileå’Œ.bashrcå•Šï¼Œä½†æ˜¯çœ‹åˆ°.zshrcäº†ï¼Œè¿™æ˜¯ä¸ºå•¥ï¼Ÿ</p>
<blockquote>
<p>iterm2ä»¥åŠmacè‡ªå¸¦çš„terminaléƒ½æ˜¯ç»ˆç«¯æ¨¡æ‹Ÿå™¨ã€‚æœ€å¼€å§‹æ—¶å€™å°±ç”¨èµ·äº†iterm2.</p>
<p>bashï¼Œzshæ˜¯shellï¼Œzshå…¼å®¹bash</p>
<p>shellï¼šå£³ï¼Œç”¨å®ƒè¡¨ç¤ºâ€œä¸ºä½¿ç”¨è€…æä¾›çš„æ“ä½œç•Œé¢â€ï¼ŒShellæ³›æŒ‡æ‰€æœ‰ä¸ºç”¨æˆ·æä¾›æ“ä½œç•Œé¢çš„ç¨‹åºï¼Œåˆ†ä¸ºä¸¤ç±»ï¼šå‘½ä»¤è¡Œï¼ˆCLIï¼‰ä¸å›¾å½¢ç•Œé¢ï¼ˆGUIï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨èŠshellçš„æ—¶å€™ï¼Œå…¶å®éƒ½æ˜¯èŠçš„Linuxçš„å‘½ä»¤è¡Œç•Œé¢ã€‚</p>
</blockquote>
<blockquote>
<p>shå’Œbashå’Œzsh :</p>
<p>shå…¨ç§°ä¸ºBourne Shellï¼Œæ¥è‡ªäº1977å¹´åº•çš„Unix v7ç‰ˆã€‚äºŒè¿›åˆ¶æ–‡ä»¶ä½ç½®ä¸º<code>/bin/sh</code>ã€‚ </p>
<p>bashå…¨ç§°ä¸ºBourne-Again Shellï¼Œæ˜¯åœ¨1989å¹´å¯¹shçš„é‡å†™ç‰ˆï¼Œæ›¿ä»£äº†shã€‚äºŒè¿›åˆ¶æ–‡ä»¶ä½ç½®ä¸º<code>/bin/bash</code>ã€‚ </p>
<p>ç°åœ¨çš„Linuxç³»ç»Ÿä»¥åŠmacOSç³»ç»Ÿçš„shelléƒ½é»˜è®¤ä½¿ç”¨bashã€‚</p>
<p>Zshå³Z shellï¼Œæ˜¯ä¸€æ¬¾å¯ç”¨ä½œäº¤äº’å¼ç™»å½•çš„shellåŠè„šæœ¬ç¼–å†™çš„å‘½ä»¤è§£é‡Šå™¨ã€‚Zshå¯¹Bourne shellåšå‡ºäº†å¤§é‡æ”¹è¿›ï¼ŒåŒæ—¶åŠ å…¥äº†Bashã€kshåŠtcshçš„æŸäº›åŠŸèƒ½ã€‚ </p>
<p>æ‰€ä»¥è¯´Zshä¹Ÿæ˜¯ä¸€ä¸ªShellï¼Œå°±æ˜¯ä¼šæ¯”bashèƒ½å¥½ç”¨å¾ˆå¤šã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯2019å¹´èµ·ï¼ŒmacOSçš„é»˜è®¤Shellä»Bashæ”¹ä¸ºZshçš„åŸå› ï¼Ÿ</p>
<p>zshæ‹¥æœ‰å®Œå–„çš„æ’ä»¶æœºåˆ¶ä»¥åŠä¸°å¯Œçš„ç”Ÿæ€ï¼Œå’Œoh my zshä¸€èµ·é£Ÿç”¨æ›´ä½³</p>
</blockquote>
<h5 id="æŸ¥çœ‹æœ¬åœ°Shellçš„å‘½ä»¤"><a href="#æŸ¥çœ‹æœ¬åœ°Shellçš„å‘½ä»¤" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°Shellçš„å‘½ä»¤"></a>æŸ¥çœ‹æœ¬åœ°Shellçš„å‘½ä»¤</h5><ul>
<li><p>æŸ¥çœ‹å½“å‰Linuxçš„å…¨éƒ¨Shellï¼š<code>cat /etc/shells</code></p>
</li>
<li><p>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„Shellï¼š<code>echo $SHELL</code>æˆ–è€…<code>echo $0</code></p>
</li>
<li><p>åˆ‡æ¢é»˜è®¤çš„Shellï¼š<code>chsh -s [shellçš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„]</code>ï¼Œä¹‹åè¦é‡æ–°ç™»é™†Shellæ‰èƒ½ç”Ÿæ•ˆå“ˆã€‚ä¾‹å¦‚ï¼š</p>
</li>
<li><ul>
<li>åˆ‡æ¢ä¸ºBashï¼š <code>chsh -s /bin/bash</code></li>
<li>åˆ‡æ¢ä¸ºZshï¼š<code>chsh -s /bin/zsh</code></li>
</ul>
</li>
</ul>
<h5 id="Shellçš„å„ç§é…ç½®æ–‡ä»¶"><a href="#Shellçš„å„ç§é…ç½®æ–‡ä»¶" class="headerlink" title="Shellçš„å„ç§é…ç½®æ–‡ä»¶"></a>Shellçš„å„ç§é…ç½®æ–‡ä»¶</h5><p>æ— è®ºæ˜¯Bashè¿˜æ˜¯Zshï¼Œéƒ½æ˜¯æœ‰å„è‡ªçš„é…ç½®æ–‡ä»¶æ¥å®Œæˆè‡ªå·±çš„å·¥ä½œçš„ã€‚è¿™äº›é…ç½®æ–‡ä»¶éƒ½æ˜¯éšè—æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“è¿™äº›é…ç½®ã€‚ä½†æ˜¯åœ¨è¿™é‡Œä¹Ÿè¦ç»™å¤§å®¶æ€»ç»“ä¸€ä¸‹éƒ½æœ‰å“ªäº›é…ç½®æ–‡ä»¶ï¼Œä¹Ÿè®¸ä»¥åç”¨çš„ä¸Šå‘¢ã€‚ </p>
<h5 id="Bashçš„é…ç½®æ–‡ä»¶"><a href="#Bashçš„é…ç½®æ–‡ä»¶" class="headerlink" title="Bashçš„é…ç½®æ–‡ä»¶"></a>Bashçš„é…ç½®æ–‡ä»¶</h5><ul>
<li>/etc/profileï¼šä¸ºç³»ç»Ÿçš„<strong>æ¯ä¸ªç”¨æˆ·</strong>è®¾ç½®ç¯å¢ƒä¿¡æ¯ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡<strong>ç™»å½•</strong>æ—¶ä¼šæ‰§è¡Œè¯¥æ–‡ä»¶é‡Œçš„å‘½ä»¤ã€‚é»˜è®¤ä¼šç›´æ¥è°ƒç”¨/etc/bashrcã€‚è¯¥æ–‡ä»¶çš„æ”¹åŠ¨éœ€è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆã€‚ç”¨äºè®¾ç½®ç³»ç»Ÿçº§åˆ«çš„ç¯å¢ƒå˜é‡å’Œå¯åŠ¨ç¨‹åºï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹é…ç½®ä¼šå¯¹æ‰€æœ‰çš„ç”¨æˆ·ç”Ÿæ•ˆã€‚</li>
<li>/etc/bashrcï¼šä¸ºæ¯ä¸€ä¸ªè¿è¡Œbash shellçš„ç”¨æˆ·æ‰§è¡Œæ­¤æ–‡ä»¶ã€‚å½“bash shellè¢«æ‰“å¼€æ—¶ï¼Œä¼šè¯»å–å¹¶æ‰§è¡Œè¯¥æ–‡ä»¶ä¸­çš„å‘½ä»¤ã€‚æ‰€ä»¥ä¿®æ”¹è¯¥æ–‡ä»¶åï¼Œé‡æ–°æ‰“å¼€Shellå³å¯ç”Ÿæ•ˆã€‚</li>
<li>~/.bash_profileï¼šå’Œ/etc/profileç±»ä¼¼ï¼Œä½†æ˜¯åªå¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆã€‚åªå¯¹å•ä¸€ç”¨æˆ·ç”Ÿæ•ˆï¼Œè¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨æˆ·çº§åˆ«çš„è®¾ç½®ï¼Œå¯ä»¥ç†è§£ä¸ºæŸä¸€ç”¨æˆ·ä¸‹çš„profile</li>
<li>~/.bashrcï¼šå’Œ/etc/bashrcç±»ä¼¼ï¼Œä½†æ˜¯åªå¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆã€‚</li>
<li>~/.bash_logoutï¼šå½“æ¯æ¬¡é€€å‡ºbash shellæ—¶ï¼Œæ‰§è¡Œè¯¥æ–‡ä»¶ã€‚</li>
<li>~/.bash_historyï¼šä¿å­˜äº†å†å²å‘½ä»¤ã€‚åœ¨Shellä¸ºBashæ—¶ï¼Œæ¯æ¬¡æ•²å‡»å‘½ä»¤æ—¶ï¼Œéƒ½ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œ</li>
</ul>
<h5 id="Zshçš„é…ç½®æ–‡ä»¶"><a href="#Zshçš„é…ç½®æ–‡ä»¶" class="headerlink" title="Zshçš„é…ç½®æ–‡ä»¶"></a>Zshçš„é…ç½®æ–‡ä»¶</h5><ul>
<li>/etc/bashrc å¯¹åº” /etc/zshrc</li>
<li>~/.bash_profile å¯¹åº” ~/.zprofile</li>
</ul>
<p>åŠ è½½é¡ºåºï¼šzshenvã€zprofileã€zshrcã€zlogin</p>
<hr>
<p>æ‰€ä»¥è¯´ï¼Œå„ç§æ•™ç¨‹é‡Œè¯´çš„é…ç½®éƒ½æ˜¯é»˜è®¤bashçš„ï¼Œbashçš„é…ç½®æ–‡ä»¶å¯¹æ ‡åˆ°zshä¸­å°±å¯ä»¥ã€‚</p>
<p><strong>/etc/profile å’Œ /etc/bashrc è¿™ç§åœ¨ /etc ç›®å½•ä¸‹çš„é…ç½®åˆ™éƒ½å±äºå…¨å±€é…ç½®ï¼Œæ‰€æœ‰ç”¨æˆ·çš„shelléƒ½æœ‰æƒä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡ï¼Œï½/ åˆ™å±äºç”¨æˆ·çº§åˆ«çš„</strong></p>
<h5 id="æ€»ç»“ä¸€ä¸‹ï¼šå„ç§é…ç½®æ–‡ä»¶å¯ä»¥æŒ‰ä¸¤ç§æ–¹å¼åˆ†ç±»ï¼š"><a href="#æ€»ç»“ä¸€ä¸‹ï¼šå„ç§é…ç½®æ–‡ä»¶å¯ä»¥æŒ‰ä¸¤ç§æ–¹å¼åˆ†ç±»ï¼š" class="headerlink" title="æ€»ç»“ä¸€ä¸‹ï¼šå„ç§é…ç½®æ–‡ä»¶å¯ä»¥æŒ‰ä¸¤ç§æ–¹å¼åˆ†ç±»ï¼š"></a>æ€»ç»“ä¸€ä¸‹ï¼šå„ç§é…ç½®æ–‡ä»¶å¯ä»¥æŒ‰ä¸¤ç§æ–¹å¼åˆ†ç±»ï¼š</h5><table>
<thead>
<tr>
<th></th>
<th>profile</th>
<th align="center">bashrc/zshrc</th>
</tr>
</thead>
<tbody><tr>
<td>å…¨å±€</td>
<td>/etc/profileï¼ˆæ— å…³å“ªä¸ªshellï¼‰</td>
<td align="center">/etc/bashrc</td>
</tr>
<tr>
<td>ç”¨æˆ·</td>
<td>~/.bash_profile ï¼ˆä¸“ç”¨äºå“ªä¸ªshellï¼‰</td>
<td align="center">~/.bashrc</td>
</tr>
</tbody></table>
<p>profileçš„bashrcåŒºåˆ«?</p>
<p>è¦ææ¸…bashrcä¸profileçš„åŒºåˆ«ï¼Œé¦–å…ˆè¦å¼„æ˜ç™½ä»€ä¹ˆæ˜¯äº¤äº’å¼shellå’Œéäº¤äº’å¼shellï¼Œå³login shell å’Œnon-login shellã€‚</p>
<p>äº¤äº’å¼æ¨¡å¼å°±æ˜¯shellç­‰å¾…ä½ çš„è¾“å…¥ï¼Œå¹¶ä¸”æ‰§è¡Œä½ æäº¤çš„å‘½ä»¤ã€‚è¿™ç§æ¨¡å¼è¢«ç§°ä½œäº¤äº’å¼æ˜¯å› ä¸ºshellä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚è¿™ç§æ¨¡å¼ä¹Ÿæ˜¯å¤§å¤šæ•°ç”¨æˆ·éå¸¸ç†Ÿæ‚‰çš„ï¼šç™»å½•ã€æ‰§è¡Œä¸€äº›å‘½ä»¤ã€ç­¾é€€ã€‚å½“ä½ ç­¾é€€åï¼Œshellä¹Ÿç»ˆæ­¢äº†ã€‚ shellä¹Ÿå¯ä»¥è¿è¡Œåœ¨å¦å¤–ä¸€ç§æ¨¡å¼ï¼šéäº¤äº’å¼æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œshellä¸ä¸ä½ è¿›è¡Œäº¤äº’ï¼Œè€Œæ˜¯è¯»å–å­˜æ”¾åœ¨æ–‡ä»¶ä¸­çš„å‘½ä»¤,å¹¶ä¸”æ‰§è¡Œå®ƒä»¬ã€‚å½“å®ƒè¯»åˆ°æ–‡ä»¶çš„ç»“å°¾ï¼Œshellä¹Ÿå°±ç»ˆæ­¢äº†ã€‚</p>
<p>bashrc ä¸ profile éƒ½ç”¨äºä¿å­˜ç”¨æˆ·çš„ç¯å¢ƒä¿¡æ¯ï¼Œbashrcç”¨äºäº¤äº’å¼non-loginshellï¼Œè€Œprofileç”¨äºäº¤äº’å¼login shellã€‚</p>
<ol>
<li><p>/etc/profile: æ­¤æ–‡ä»¶ä¸ºç³»ç»Ÿçš„æ¯ä¸ªç”¨æˆ·è®¾ç½®ç¯å¢ƒä¿¡æ¯,å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•æ—¶,è¯¥æ–‡ä»¶è¢«æ‰§è¡Œ.å¹¶ä»/etc/profile.dç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­æœé›†shellçš„è®¾ç½®.</p>
</li>
<li><p>/etc/bashrc: ä¸ºæ¯ä¸€ä¸ªè¿è¡Œbash shellçš„ç”¨æˆ·æ‰§è¡Œæ­¤æ–‡ä»¶.å½“bash shellè¢«æ‰“å¼€æ—¶,è¯¥æ–‡ä»¶è¢«è¯»å–.</p>
</li>
<li><p>~/.bash_profile: æ¯ä¸ªç”¨æˆ·éƒ½å¯ä½¿ç”¨è¯¥æ–‡ä»¶è¾“å…¥ä¸“ç”¨äºè‡ªå·±ä½¿ç”¨çš„shellä¿¡æ¯,å½“ç”¨æˆ·ç™»å½•æ—¶,è¯¥æ–‡ä»¶ä»…ä»…æ‰§è¡Œä¸€æ¬¡!é»˜è®¤æƒ…å†µä¸‹,ä»–è®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡,æ‰§è¡Œç”¨æˆ·çš„.bashrcæ–‡ä»¶.</p>
</li>
<li><p>~/.bashrc: è¯¥æ–‡ä»¶åŒ…å«ä¸“ç”¨äºä½ çš„bash shellçš„bashä¿¡æ¯,å½“ç™»å½•æ—¶ä»¥åŠæ¯æ¬¡æ‰“å¼€æ–°çš„shellæ—¶,è¯¥æ–‡ä»¶è¢«è¯»å–.</p>
</li>
<li><p>~/.bash_logout: å½“æ¯æ¬¡é€€å‡ºç³»ç»Ÿ(é€€å‡ºbash shell)æ—¶,æ‰§è¡Œè¯¥æ–‡ä»¶.</p>
</li>
</ol>
<p>å¦å¤–,/etc/profileä¸­è®¾å®šçš„å˜é‡(å…¨å±€)çš„å¯ä»¥ä½œç”¨äºä»»ä½•ç”¨æˆ·,è€Œ~/.bashrcç­‰ä¸­è®¾å®šçš„å˜é‡(å±€éƒ¨)åªèƒ½ç»§æ‰¿/etc/profileä¸­çš„å˜é‡,ä»–ä»¬æ˜¯â€çˆ¶å­â€å…³ç³».</p>
<hr>
<p>å½“ç™»å…¥ç³»ç»Ÿæ—¶å€™è·å¾—ä¸€ä¸ªshellè¿›ç¨‹æ—¶ï¼Œå…¶è¯»å–ç¯å¢ƒè®¾å®šæ¡£æœ‰ä¸‰æ­¥</p>
<p>1ã€é¦–å…ˆè¯»å…¥çš„æ˜¯å…¨å±€ç¯å¢ƒå˜é‡è®¾å®šæ¡£/etc/profileï¼Œç„¶åæ ¹æ®å…¶å†…å®¹è¯»å–é¢å¤–çš„è®¾å®šçš„æ–‡æ¡£ï¼Œå¦‚<br>/etc/profile.då’Œ/etc/inputrc</p>
<p>2ã€ç„¶åæ ¹æ®ä¸åŒä½¿ç”¨è€…å¸å·ï¼Œå»å…¶å®¶ç›®å½•è¯»å–<del>/.bash_profileï¼Œå¦‚æœè¿™è¯»å–ä¸äº†å°±è¯»å–</del>/.bash_loginï¼Œè¿™ä¸ªä¹Ÿè¯»å–ä¸äº†æ‰ä¼šè¯»å–<br>~/.profileï¼Œè¿™ä¸‰ä¸ªæ–‡æ¡£è®¾å®šåŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œè¯»å–æœ‰ä¼˜å…ˆå…³ç³»</p>
<p>3ã€ç„¶ååœ¨æ ¹æ®ç”¨æˆ·å¸å·è¯»å–~/.bashrc</p>
<hr>
<p>æ€»ç»“ï¼šé…ç½®æ–‡ä»¶å…¨å±€/ç”¨æˆ·â€”äº¤äº’çš„/éäº¤äº’çš„ï¼Œjdkçš„é…ç½®å°±æ˜¯åœ¨/etc/profileä¸­ï¼Œmavençš„é…ç½®åœ¨ï½/.bash_profileæ—¢ç„¶ç”¨çš„æ˜¯zshï¼Œå°±åœ¨ ~/.zprofileé‡Œé¢é…ç½®ã€‚</p>
<hr>
<p>åœ¨ï½/.zprofileæ–‡ä»¶ä¸­ï¼Œæ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export M=&quot;/usr/local/ApacheMaven&quot;</span><br><span class="line">export PATH=&quot;$M/bin:$PATH&quot;</span><br></pre></td></tr></table></figure>

<p>source ï½/.zprofile å³å¯ã€‚</p>
<p>ç„¶åé…ç½®ä¸€ä¸‹é˜¿é‡Œäº‘ä»“åº“ã€‚åœ¨setting.xmlæ–‡ä»¶ä¸­ï¼Œè¦å…³æ³¨ä¸¤ä¸ªåœ°æ–¹ï¼Œ<em><strong>localRepository</strong></em>å’Œ<em><strong>mirrors</strong></em>ã€‚ç¬¬ä¸€ä¸ªlocalRepositoryæ˜¯ä½ æœ¬åœ°ä»“åº“æ‰€åœ¨çš„ä½ç½®ï¼Œä½ çš„åŒ…éƒ½ä¼šä¸‹è½½åˆ°è¿™é‡Œï¼Œé»˜è®¤åœ¨ä½ ç”¨æˆ·ç›®å½•çš„.m2ç›®å½•ä¸‹ï¼Œè¿™é‡Œå¯ä»¥æ¢æˆä½ æƒ³å­˜æ”¾çš„åœ°å€ã€‚ç¬¬äºŒä¸ªmirroræ˜¯ä½ çš„åŒ…ä¸‹è½½åœ°å€ï¼Œå› ä¸ºæœ‰å¢™ï¼Œæ‰€ä»¥å»ºè®®å¢åŠ é˜¿é‡Œäº‘ä»“åº“é…ç½®ï¼Œæ¥åŠ é€Ÿä¸‹è½½ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-åˆ›å»ºmaven-webé¡¹ç›®"><a href="#2-åˆ›å»ºmaven-webé¡¹ç›®" class="headerlink" title="2.åˆ›å»ºmaven webé¡¹ç›®"></a>2.åˆ›å»ºmaven webé¡¹ç›®</h4><p>æ–°å»ºmavené¡¹ç›®æ—¶é€‰ä¸­create from archetypeï¼Œé€‰æ‹©org.apache.maven.archetypes:maven-archetype-webappã€‚</p>
<p>é€‰æ‹©è‡ªå·±mavençš„setting.xmlã€‚</p>
<p>é…ç½®tomcatæœåŠ¡å™¨ï¼Œé€‰æ‹©tomcat-localï¼Œç»™æœåŠ¡å™¨å–åå­—ï¼Œé€‰ç‰ˆæœ¬ç«¯å£å·ä¹‹ç±»çš„ã€‚</p>
<p>deploymentä¸­artifacté€‰æ‹©è¦éƒ¨ç½²çš„jaråŒ…ï¼Œé€‰explodedçš„ã€‚</p>
<p>é€‰æ‹©çƒ­éƒ¨ç½²ï¼Œåœ¨å®é™…å¼€å‘ä¸­æ˜¯å¾ˆç®¡ç”¨çš„webå¼€å‘ï¼Œä½ åå°ï¼Œæ”¹äº†å•¥ä»–å°±çƒ­éƒ¨ç½²ï¼Œä¸ç”¨ä½ é‡å¯tomcatï¼Œå‰å°çš„ä¹Ÿæ˜¯ï¼Œä½ ä¿®æ”¹jsp,css,jsä»€ä¹ˆçš„éƒ½å¯ä»¥ç›´æ¥è¿›è¡Œçƒ­éƒ¨ç½²ï¼Œä½ åªè¦è‡ªå·±åˆ·æ–°ä¸€ä¸‹ä½ çš„é¡µé¢å°±è¡Œäº†ã€‚</p>
<h4 id="3-ä½¿ç”¨log4jé›†åˆslf4j"><a href="#3-ä½¿ç”¨log4jé›†åˆslf4j" class="headerlink" title="3.ä½¿ç”¨log4jé›†åˆslf4j"></a>3.ä½¿ç”¨log4jé›†åˆslf4j</h4><p>Apache Log4jæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æ—¥å¿—è®°å½•å·¥å…·ï¼Œå®ƒçš„æ—¥å¿—çº§åˆ«æŒ‰ä¸‹é¢é¡ºåºé€’å‡ï¼š</p>
<table>
<thead>
<tr>
<th>çº§åˆ«</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>OFF</td>
<td>æœ€é«˜çº§åˆ«ï¼Œç”¨äºå…³é—­æ—¥å¿—è®°å½•ã€‚</td>
</tr>
<tr>
<td>FATAL</td>
<td>å°†å¯¼è‡´åº”ç”¨ç¨‹åºæå‰ç»ˆæ­¢çš„ä¸¥é‡é”™è¯¯çš„ä¿¡æ¯å°†ç«‹å³å‘ˆç°åœ¨æ—¥å¿—ä¸Šã€‚</td>
</tr>
<tr>
<td>ERROR</td>
<td>å°†å…¶ä»–è¿è¡Œæ—¶é”™è¯¯æˆ–æ„å¤–æƒ…å†µçš„ä¿¡æ¯å‘ˆç°åœ¨æ—¥å¿—ä¸Šã€‚</td>
</tr>
<tr>
<td>WARN</td>
<td>ä½¿ç”¨å·²è¿‡æ—¶çš„APIï¼ŒAPIçš„æ»¥ç”¨ï¼Œæ½œåœ¨é”™è¯¯ï¼Œå…¶ä»–ä¸è‰¯çš„æˆ–æ„å¤–çš„è¿è¡Œæ—¶çš„çŠ¶å†µï¼ˆä½†ä¸ä¸€å®šæ˜¯é”™è¯¯çš„ï¼‰</td>
</tr>
<tr>
<td>INFO</td>
<td>ä¸€äº›æ„Ÿå…´è¶£çš„è¿è¡Œæ—¶äº‹ä»¶ï¼ˆå¯åŠ¨/å…³é—­</td>
</tr>
<tr>
<td>DEBUG</td>
<td>ä¸€äº›è¯¦ç»†ä¿¡æ¯ï¼ŒæŸ¥çœ‹ç¨‹åºçš„è¿è¡ŒçŠ¶æ€</td>
</tr>
<tr>
<td>TRACE</td>
<td>æœ€è¯¦ç»†çš„ä¿¡æ¯ã€‚ä¸€èˆ¬è¿™äº›ä¿¡æ¯åªè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</td>
</tr>
</tbody></table>
<h5 id="ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–"><a href="#ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–"></a>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0-alpha7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="ç¬¬äºŒæ­¥ï¼šé…ç½®log4jçš„é…ç½®æ–‡ä»¶"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®log4jçš„é…ç½®æ–‡ä»¶" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½®log4jçš„é…ç½®æ–‡ä»¶"></a>ç¬¬äºŒæ­¥ï¼šé…ç½®log4jçš„é…ç½®æ–‡ä»¶</h5><p>å…¶é…ç½®æ–‡ä»¶åä¸ºlog4j.propertiesï¼Œ<strong>éœ€è¦æ‰‹åŠ¨åœ¨java/resourcesä¸‹åˆ›å»º</strong>ï¼Œå¦‚æœå»ºåœ¨å…¶ä»–ä½ç½®ï¼Œideaè¿™ä¸ªå·¥å…·å°†æ— æ³•è¯†åˆ«ã€‚è¯¥é…ç½®æ–‡ä»¶ç”¨æ¥è®¾ç½®è®°å½•å™¨çš„çº§åˆ«ã€å­˜æ”¾å™¨å’Œå¸ƒå±€çš„ï¼Œå®ƒå¯æ¥key=valueæ ¼å¼çš„è®¾ç½®æˆ–xmlæ ¼å¼çš„è®¾ç½®ä¿¡æ¯ã€‚é€šè¿‡é…ç½®ï¼Œå¯ä»¥åˆ›å»ºå‡ºLog4Jçš„è¿è¡Œç¯å¢ƒã€‚</p>
<p>Log4Jé…ç½®æ–‡ä»¶çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### set log levels é…ç½®æ ¹Logger###</span></span><br><span class="line"><span class="comment">### log4j.rootLogger  = [ level ] , appenderName1 , appenderName2 ,  â€¦ ###</span></span><br><span class="line"><span class="comment">###  level : æ˜¯æ—¥å¿—è®°å½•çš„ä¼˜å…ˆçº§ ä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ERRORã€WARNã€INFOã€DEBUG</span></span><br><span class="line"><span class="comment">###  æ¯”å¦‚åœ¨è¿™é‡Œå®šä¹‰äº†INFOçº§åˆ«ï¼Œåˆ™åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰DEBUGçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯å°†ä¸è¢«æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="comment">### Appender ä¸ºæ—¥å¿—è¾“å‡ºç›®çš„åœ° è¿™é‡Œ å°†debugå±‚çº§åŠä»¥ä¸Šçš„ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileï¼Œè‡ªå·±å®šä¹‰çš„åå­—  ###</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span> = <span class="string">DEBUG,Console,File</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">###  è¾“å‡ºåˆ°æ§åˆ¶å°  ###</span></span><br><span class="line"><span class="meta">log4j.appender.Console</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.Console.Target</span>=<span class="string">System.out</span></span><br><span class="line"><span class="meta">log4j.appender.Console.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.Console.layout.ConversionPattern</span>=<span class="string">[%d&#123;yy/MM/dd HH:mm:ss:SSS&#125;]-%l:%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ ###</span></span><br><span class="line"><span class="meta">log4j.appender.File</span>=<span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.File.File</span>=<span class="string">$&#123;project&#125;src/main/resources/log/app.log</span></span><br><span class="line"><span class="meta">log4j.appender.File.MaxFileSize</span>=<span class="string">10MB</span></span><br><span class="line"><span class="meta">log4j.appender.File.Threshold</span>=<span class="string">ALL</span></span><br><span class="line"><span class="meta">log4j.appender.File.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.File.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yyyy-MM-dd HH\:mm\:ss,SSS&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#   %m   è¾“å‡ºä»£ç ä¸­æŒ‡å®šçš„æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">#ã€€ã€€%p   è¾“å‡ºä¼˜å…ˆçº§ï¼Œå³DEBUGï¼ŒINFOï¼ŒWARNï¼ŒERRORï¼ŒFATAL</span></span><br><span class="line"><span class="comment">#ã€€ã€€%r   è¾“å‡ºè‡ªåº”ç”¨å¯åŠ¨åˆ°è¾“å‡ºè¯¥logä¿¡æ¯è€—è´¹çš„æ¯«ç§’æ•°</span></span><br><span class="line"><span class="comment">#ã€€ã€€%c   è¾“å‡ºæ‰€å±çš„ç±»ç›®ï¼Œé€šå¸¸å°±æ˜¯æ‰€åœ¨ç±»çš„å…¨å</span></span><br><span class="line"><span class="comment">#ã€€ã€€%t   è¾“å‡ºäº§ç”Ÿè¯¥æ—¥å¿—äº‹ä»¶çš„çº¿ç¨‹å</span></span><br><span class="line"><span class="comment">#ã€€ã€€%n   è¾“å‡ºä¸€ä¸ªå›è½¦æ¢è¡Œç¬¦ï¼ŒWindowså¹³å°ä¸ºâ€œ\r\nâ€ï¼ŒUnixå¹³å°ä¸ºâ€œ\nâ€</span></span><br><span class="line"><span class="comment">#ã€€ã€€%d   è¾“å‡ºæ—¥å¿—æ—¶é—´ç‚¹çš„æ—¥æœŸæˆ–æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼ä¸ºISO8601ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶åæŒ‡å®šæ ¼å¼ï¼Œæ¯”å¦‚ï¼š%d&#123;yyy MMM dd HH:mm:ss , SSS&#125;ï¼Œè¾“å‡ºç±»ä¼¼ï¼š2002å¹´10æœˆ18æ—¥  22 ï¼š 10 ï¼š 28 ï¼Œ 921</span></span><br><span class="line"><span class="comment">#ã€€ã€€%l   è¾“å‡ºæ—¥å¿—äº‹ä»¶çš„å‘ç”Ÿä½ç½®ï¼ŒåŒ…æ‹¬ç±»ç›®åã€å‘ç”Ÿçš„çº¿ç¨‹ï¼Œä»¥åŠåœ¨ä»£ç ä¸­çš„è¡Œæ•°ã€‚ä¸¾ä¾‹ï¼šTestlog4.main(TestLog4.java: 10 )</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### Appender ä¸ºæ—¥å¿—è¾“å‡ºç›®çš„åœ°ï¼ŒLog4jæä¾›çš„appenderæœ‰ä»¥ä¸‹å‡ ç§ï¼š</span></span><br><span class="line"><span class="comment">#org.apache.log4j.ConsoleAppenderï¼ˆæ§åˆ¶å°ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.FileAppenderï¼ˆæ–‡ä»¶ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.DailyRollingFileAppenderï¼ˆæ¯å¤©äº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.RollingFileAppenderï¼ˆæ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.WriterAppenderï¼ˆå°†æ—¥å¿—ä¿¡æ¯ä»¥æµæ ¼å¼å‘é€åˆ°ä»»æ„æŒ‡å®šçš„åœ°æ–¹ï¼‰</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### Layoutï¼šæ—¥å¿—è¾“å‡ºæ ¼å¼ï¼ŒLog4jæä¾›çš„layoutæœ‰ä»¥ä¸‹å‡ ç§</span></span><br><span class="line"><span class="comment">#org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ç­‰ä¿¡æ¯ï¼‰</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œé€šè¿‡Thresholdè®¾ç½®ï¼Œå¯ä»¥æŠŠå¼‚å¸¸æ—¥å¿—å•ç‹¬è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### set log levels ###</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span> = <span class="string">debug ,  stdout ,  D ,  E</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### è¾“å‡ºåˆ°æ§åˆ¶å° ###</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span> =  <span class="string">[%p][%d&#123;yyyy-MM-dd HH\:mm\:ss,SSS&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ ###</span></span><br><span class="line"><span class="meta">log4j.appender.D</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.D.File</span> = <span class="string">$&#123;project&#125;src/main/resources/log/app.log</span></span><br><span class="line"><span class="meta">log4j.appender.D.Append</span> = <span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.D.Threshold</span> = <span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.appender.D.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.D.layout.ConversionPattern</span> = <span class="string">[%p][%d&#123;yyyy-MM-dd HH\:mm\:ss,SSS&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### ä¿å­˜å¼‚å¸¸ä¿¡æ¯åˆ°å•ç‹¬æ–‡ä»¶ ###</span></span><br><span class="line"><span class="meta">log4j.appender.E</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.E.File</span> = <span class="string">$&#123;project&#125;src/main/resources/log/error.log</span></span><br><span class="line"><span class="meta">log4j.appender.E.Append</span> = <span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.E.Threshold</span> = <span class="string">ERROR</span></span><br><span class="line"><span class="meta">log4j.appender.E.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.E.layout.ConversionPattern</span> = <span class="string">[%p][%d&#123;yyyy-MM-dd HH\:mm\:ss,SSS&#125;][%c]%m%n</span></span><br></pre></td></tr></table></figure>

<h5 id="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æµ‹è¯•ç±»"><a href="#ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æµ‹è¯•ç±»" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æµ‹è¯•ç±»"></a>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æµ‹è¯•ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.PropertyConfigurator;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Log4jDemo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//private static Logger logger = LoggerFactory.getLogger(Log4jTestDemo.class);</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰é¡¹ç›®çš„æ ¹ç›®å½•</span></span><br><span class="line">        String relativelyPath=System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        <span class="comment">// æŒ‡å®špropertiesæ–‡ä»¶ä½ç½®</span></span><br><span class="line">        PropertyConfigurator.configure(relativelyPath+ <span class="string">&quot;/src/main/resources/conf/log4j.properties&quot;</span>);</span><br><span class="line">        <span class="comment">// è®°å½•debugçº§åˆ«çš„ä¿¡æ¯</span></span><br><span class="line">        log.debug(<span class="string">&quot;This is debug message.&quot;</span>);</span><br><span class="line">        <span class="comment">// è®°å½•infoçº§åˆ«çš„ä¿¡æ¯</span></span><br><span class="line">        log.info(<span class="string">&quot;This is info message.&quot;</span>);</span><br><span class="line">        <span class="comment">// è®°å½•errorçº§åˆ«çš„ä¿¡æ¯</span></span><br><span class="line">        log.error(<span class="string">&quot;This is error message.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é™¤éé…ç½®æ–‡ä»¶åœ¨resourcesç›®å½•ä¸‹ï¼Œå¦åˆ™ä¸èƒ½è‡ªå·±æ‰¾åˆ°é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œè¿˜éœ€è¦åœ¨ä»£ç ä¸­æŒ‡å®šä½ç½®ï¼Œä½æ•ˆï¼</p>
<p>è¿™ä¸ªé—®é¢˜è²Œä¼¼åœ¨springä¸­å¾—åˆ°è§£å†³ï¼Œåœ¨web.xmlä¸­å¢åŠ é…ç½®ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/HenryMrZ/article/details/79258057">https://blog.csdn.net/HenryMrZ/article/details/79258057</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:/conf/log4j.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="4-mavené¡¹ç›®æ‰“åŒ…"><a href="#4-mavené¡¹ç›®æ‰“åŒ…" class="headerlink" title="4.mavené¡¹ç›®æ‰“åŒ…"></a>4.mavené¡¹ç›®æ‰“åŒ…</h4><p>æœ‰ä¸ªé—®é¢˜ï¼šwebé¡¹ç›®è¿›è¡Œéƒ¨ç½²å‰ï¼Œå¿…é¡»è¦å°†é¡¹ç›®è¿›è¡Œæ‰“åŒ…å—ï¼Ÿ</p>
<p>ç›´æ¥éƒ¨ç½²åœ¨tomcatï¼Œå¹¶æ²¡æœ‰åœ¨targetæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°waråŒ…ã€‚</p>
<p>maven-webé¡¹ç›®è¦ä½¿ç”¨servletï¼Œå°±è¦å¯¼å…¥ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¼å…¥ä¹‹åreimportä¸€ä¸‹pom.xmlã€‚</p>
<p>å‘ç°éƒ¨ç½²ä¹‹åï¼ŒåŸæœ¬çš„System.getPropertyè¾“å‡ºçš„é¡¹ç›®ç›®å½•å˜æˆäº†tomcatçš„binç›®å½•ã€‚</p>
<h5 id="ä»‹ç»ä¸€ä¸‹System-getProperty"><a href="#ä»‹ç»ä¸€ä¸‹System-getProperty" class="headerlink" title="ä»‹ç»ä¸€ä¸‹System.getProperty()"></a>ä»‹ç»ä¸€ä¸‹System.getProperty()</h5><p>Javaä¸­ç»™æˆ‘ä»¬æä¾›äº†System.getProperty()è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥è·å–åˆ°Java JVMä»¥åŠæ“ä½œç³»ç»Ÿçš„ä¸€äº›å‚æ•°ï¼Œå¯ä»¥ä¾›ç¨‹åºåˆ¤æ–­ç­‰ã€‚</p>
<p>System.getProperty()æ–¹æ³•ä¸­éœ€è¦ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²çš„å‚æ•°ï¼Œè¡¨ç¤ºéœ€è¦è·å–é‚£ä¸ªç¯å¢ƒé…ç½®ï¼Œè·å¾—ç»“æœä¸ºStringã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">System.getProperty(<span class="string">&quot;java.vm.version&quot;</span>);<span class="comment">//javaè™šæ‹Ÿæœºç‰ˆæœ¬  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;java.vendor.url&quot;</span>); <span class="comment">//javaå®˜æ–¹ç½‘ç«™  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;java.vm.nam&quot;</span>); <span class="comment">//javaè™šæ‹Ÿæœºåç§°  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;user.country&quot;</span>); <span class="comment">//å›½å®¶æˆ–åœ°åŒº  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;user.dir&quot;</span>); <span class="comment">//å·¥ç¨‹çš„è·¯å¾„  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;java.runtime.version&quot;</span>);<span class="comment">//javaè¿è¡Œç¯å¢ƒç‰ˆæœ¬  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;os.arch&quot;</span>); <span class="comment">//æ“ä½œç³»ç»Ÿä½æ•°ï¼ˆ32æˆ–64ï¼‰  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;os.name&quot;</span>); <span class="comment">//æ“ä½œç³»ç»Ÿåç§°  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;sun.jnu.encoding&quot;</span>); <span class="comment">//ç¼–ç æ ¼å¼  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;os.version&quot;</span>); <span class="comment">//æ“çºµç³»ç»Ÿç‰ˆæœ¬  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;java.version&quot;</span>); <span class="comment">//javaç‰ˆæœ¬ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°è·¯å¾„ä¸‹çš„log4j.propertiesé…ç½®æ–‡ä»¶å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String filePath = req.getServletContext().getRealPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">System.out.println(filePath); <span class="comment">// æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„</span></span><br><span class="line"><span class="comment">// æŒ‡å®špropertiesæ–‡ä»¶ä½ç½®</span></span><br><span class="line">PropertyConfigurator.configure(filePath + <span class="string">&quot;WEB-INF/classes/conf/log4j.properties&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="é¡¹ç›®ä¸­targetç›®å½•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#é¡¹ç›®ä¸­targetç›®å½•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="é¡¹ç›®ä¸­targetç›®å½•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>é¡¹ç›®ä¸­targetç›®å½•æ˜¯ä»€ä¹ˆï¼Ÿ</h5><p>targetæ˜¯ç”¨æ¥å­˜æ”¾é¡¹ç›®æ„å»ºåçš„æ–‡ä»¶å’Œç›®å½•ã€jaråŒ…ã€waråŒ…ã€ç¼–è¯‘çš„classæ–‡ä»¶ï¼Œæ‰€æœ‰éƒ½æ˜¯Mavenæ„å»ºæ—¶ç”Ÿæˆçš„ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/zhangzhixi/5102490?b=totalstatistic">https://blog.51cto.com/zhangzhixi/5102490?b=totalstatistic</a></p>
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼štomcatè¿è¡Œä¹‹åï¼Œæ—¥å¿—ä¸ä¿å­˜åœ¨æ–‡ä»¶ä¸­äº†ï¼Œéš¾é“æ˜¯è¯†åˆ«ä¸äº†projectç›®å½•äº†å—ï¼Ÿ</p>
<p>ç¡®å®ï¼Œlogè¾“å‡ºåˆ°äº†tomcatä¸­çš„binç›®å½•ä¸­ã€‚æ”¹æˆç»å¯¹ç›®å½•ã€‚</p>
<h5 id="æ‰“åŒ…éƒ¨ç½²"><a href="#æ‰“åŒ…éƒ¨ç½²" class="headerlink" title="æ‰“åŒ…éƒ¨ç½²"></a>æ‰“åŒ…éƒ¨ç½²</h5><p>ç”±äºwebé¡¹ç›®æ²¡æœ‰å†™javaæ–‡ä»¶æ²¡æœ‰mainå‡½æ•°, æ˜¯æ— æ³•ç›´æ¥è¿è¡Œçš„, å› æ­¤webé¡¹ç›®éœ€è¦æ”¾åœ¨ä¸€ä¸ªå®¹å™¨é‡Œæ‰èƒ½è¿è¡Œ</p>
<p>è¿™é‡Œå°±å°†webé¡¹ç›®æ”¾åœ¨Tomcatè¿™ä¸ªwebæœåŠ¡å™¨é‡Œè¿è¡Œ</p>
<p>åŸºäºmavençš„webé¡¹ç›® â€œ æ‰“åŒ…ã€éƒ¨ç½²ã€ä½¿ç”¨â€ æ“ä½œæ­¥éª¤å¦‚ä¸‹:</p>
<ol>
<li>æ‰“åŒ…ï¼šåœ¨IDEAä¸»ç•Œé¢çš„å³è¾¹æ‰¾åˆ°maven, åœ¨mavençš„ç”Ÿå‘½å‘¨æœŸLifecycleä¸‹é¢æ‰¾åˆ°package, åŒå‡»packageå‘½ä»¤è¿›è¡Œè¿è¡Œã€‚åº•ä¸‹çš„æ§åˆ¶å°æç¤º BUILD SUCCESS ä»£è¡¨æ„å»ºæˆåŠŸã€‚æ„å»ºæˆåŠŸä¹‹å, æ ¹æ®æ§åˆ¶å°é‡Œæç¤ºçš„waråŒ…è·¯å¾„æ‰¾åˆ°warçš„ä½ç½®ã€‚</li>
<li>éƒ¨ç½²ï¼šâ€éƒ¨ç½²â€œ æ“ä½œ      (éƒ¨ç½²å°±æ˜¯æ‰‹åŠ¨æŠŠæ‰“åŒ…å¥½çš„waråŒ…å¤åˆ¶åˆ°tomcat-webappsä¸‹è¾¹)</li>
</ol>
<blockquote>
<p>ä¸æ‰“jaråŒ…è¿è¡Œï¼Œtomcatæ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰åº”ç”¨çš„ç—•è¿¹å•Šã€‚ã€todoã€‘åº”è¯¥æ˜¯æŠŠwaråŒ…æ”¾åœ¨tomcatç›®å½•ä¸‹å’Œideaä¸­å¯åŠ¨ä¸å¤ªä¸€æ ·ã€‚ideaä¸­éœ€è¦ideaä¸€ç›´åœ¨è¿è¡ŒçŠ¶æ€ã€‚ä½†æ˜¯ideaä¸­è¿è¡Œçš„ä¹Ÿæ˜¯tomcatï¼Ÿ</p>
</blockquote>
<ol start="3">
<li><p>è¿è¡Œï¼Œé¦–å…ˆå°†TomcatåŠ è½½åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡</p>
<blockquote>
<p>é…ç½®tomcatç¯å¢ƒå˜é‡ï¼š</p>
<p>å¦‚æœä¸é…ç½®çš„è¯ï¼Œéœ€è¦æ¯æ¬¡éƒ½è¿›åˆ°tomcatçš„binç›®å½•ä¸‹è¿è¡Œstartup.shå¯åŠ¨ã€‚</p>
<p>åœ¨ ï½/.zprofile æ–‡ä»¶ä¸­å¢åŠ   export PATH=${PATH}:tomcat binç›®å½•</p>
<p>â€‹    è¯­æ³•ï¼š</p>
<p>â€‹    ${}ä¸ºå ä½ç¬¦ï¼Œ${PATH} å’Œ $PATHç­‰æ•ˆ</p>
<p>â€‹    =å‰åä¸èƒ½æœ‰ç©ºæ ¼</p>
<p>â€‹    : ä¸ºåˆ†éš”ç¬¦ï¼ˆç­‰åŒäºwindowsç¯å¢ƒå˜é‡ä¸­çš„ ; ï¼‰</p>
<p>â€‹    PATH=$PATH:xxx å¯ä»¥ç†è§£ä¸º â€œ PATH+=xxx â€œï¼ˆå½“ç„¶ä¸èƒ½è¿™ä¹ˆå†™ï¼‰<br>â€‹    PATH=xxx:$PATHè¿™ç§å†™æ³•äº¦å¯ï¼Œåªæ˜¯å‰åé¡ºåºçš„é—®é¢˜ï¼›</p>
<p>export -p æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡</p>
<ol>
<li>sudo su ç”³è¯·æƒé™</li>
<li>startup.sh            //å¯åŠ¨tomacat</li>
<li>shutdown.sh          //å…³é—­tomcat</li>
</ol>
</blockquote>
</li>
</ol>
<p>å¯åŠ¨ä¹‹åï¼Œå¥½å¥‡æ—¶ä¸€ç›´åœ¨è¿è¡Œè¿˜æ˜¯æ€ä¹ˆçš„ï¼Œåº”è¯¥æ˜¯ä¸€ç›´åœ¨è¿è¡Œã€‚èµ·ä¸ªå®šæ—¶çº¿ç¨‹è¯•ä¸€ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ScheduledExecutorService service = Executors.newSingleThreadScheduledExecutor();</span><br><span class="line">service.scheduleAtFixedRate(()-&gt;&#123;</span><br><span class="line">    log.info(<span class="string">&quot;Thread &#123;&#125;, now &#123;&#125;.&quot;</span>, Thread.currentThread(), <span class="keyword">new</span> Date());</span><br><span class="line">&#125;, <span class="number">1</span>, <span class="number">3</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure>

<p>æŠ¥ä¸èƒ½ç”¨lambadaè¡¨è¾¾å¼çš„é”™è¯¯ï¼Œæˆ‘æ”¹äº†levelç­‰çº§ä¸º8ï¼Œæ‰“åŒ…æ—¶è¿˜æŠ¥é”™ã€‚ä¸ç”¨è¯•äº†ï¼Œåªè¦tomcatå¼€çš„ï¼Œåº”ç”¨å°±ä¸€ç›´æ˜¯èµ·çš„ã€‚æ¯è®¿é—®ä¸€æ¬¡ï¼Œlogæ–‡ä»¶ä¸­å°±è®°å½•æ—¥å¿—ã€‚</p>
<h3 id="mavenæ‰“åŒ…"><a href="#mavenæ‰“åŒ…" class="headerlink" title="mavenæ‰“åŒ…"></a>mavenæ‰“åŒ…</h3><h4 id="1-ideaä¸­ä½¿ç”¨mavenæ’ä»¶æ‰“åŒ…"><a href="#1-ideaä¸­ä½¿ç”¨mavenæ’ä»¶æ‰“åŒ…" class="headerlink" title="1.ideaä¸­ä½¿ç”¨mavenæ’ä»¶æ‰“åŒ…"></a>1.ideaä¸­ä½¿ç”¨mavenæ’ä»¶æ‰“åŒ…</h4><p>ä¸Šé¢å°±æ˜¯ç”¨æ­¤æ“ä½œï¼Œåº”è¯¥å…ˆcleanï¼Œå†compileç¼–è¯‘ï¼Œå†æ‰“åŒ…çš„ã€‚</p>
<p>mvn clean æ¸…ç©ºclassæ–‡ä»¶<br>mvn compile ç¼–è¯‘<br>mvn package æ‰“åŒ…<br>mvn test æµ‹è¯•<br>mvn install æ‰“åŒ…å¹¶ä¸Šä¼ åˆ°æœ¬åœ°ä»“åº“<br>mvn deploy ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“<br>mvn -Dmaven.test.skip=true è·³è¿‡æµ‹è¯•</p>
<p>pomä¸­çš„æ’ä»¶åº”è¯¥æ˜¯è‡ªåŠ¨ç»™æˆ‘åŠ çš„ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>log-maven-package<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span><span class="comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>  è¿™ç§æ‰“åŒ…æ–¹å¼ä¼šæœ‰å¤–éƒ¨ä¾èµ–åŒ…ã€‚</p>
<h4 id="2-ç›´æ¥ä½¿ç”¨mvn-packageæ‰“åŒ…"><a href="#2-ç›´æ¥ä½¿ç”¨mvn-packageæ‰“åŒ…" class="headerlink" title="2.ç›´æ¥ä½¿ç”¨mvn packageæ‰“åŒ…"></a>2.ç›´æ¥ä½¿ç”¨mvn packageæ‰“åŒ…</h4><p>ä¸åœ¨ POM ä¸­é…ç½®ä»»ä½•æ’ä»¶ï¼Œç›´æ¥ä½¿ç”¨ <code>mvn package</code> è¿›è¡Œé¡¹ç›®æ‰“åŒ…ï¼Œè¿™å¯¹äºæ²¡æœ‰ä½¿ç”¨å¤–éƒ¨ä¾èµ–åŒ…çš„é¡¹ç›®æ˜¯å¯è¡Œçš„ã€‚ä½†å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹ JAR åŒ…ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸º <code>mvn package</code> æ‰“çš„ JAR åŒ…ä¸­æ˜¯ä¸å«æœ‰ä¾èµ–åŒ…ï¼Œä¼šå¯¼è‡´ä½œä¸šè¿è¡Œæ—¶å‡ºç°æ‰¾ä¸åˆ°ç¬¬ä¸‰æ–¹ä¾èµ–çš„å¼‚å¸¸ã€‚è¿™ç§æ–¹å¼å±€é™æ€§æ¯”è¾ƒå¤§ï¼Œå› ä¸ºå®é™…çš„é¡¹ç›®å¾€å¾€å¾ˆå¤æ‚ï¼Œé€šå¸¸éƒ½ä¼šä¾èµ–ç¬¬ä¸‰æ–¹ JARã€‚</p>
<p>å¤§æ•°æ®æ¡†æ¶çš„å¼€å‘è€…ä¹Ÿè€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥åŸºæœ¬æ‰€æœ‰çš„æ¡†æ¶éƒ½æ”¯æŒåœ¨æäº¤ä½œä¸šæ—¶ä½¿ç”¨ <code>--jars</code> æŒ‡å®šç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼çš„é—®é¢˜åŒæ ·å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯ä½ å¿…é¡»ä¿æŒç”Ÿäº§ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒä¸­çš„æ‰€æœ‰ JAR åŒ…ç‰ˆæœ¬ä¸€è‡´ï¼Œè¿™æ˜¯æœ‰ç»´æŠ¤æˆæœ¬çš„ã€‚</p>
<p>åŸºäºä¸Šé¢è¿™äº›åŸå› ï¼Œæœ€ç®€å•çš„æ˜¯é‡‡ç”¨ <code>All In One</code> çš„æ‰“åŒ…æ–¹å¼ï¼ŒæŠŠæ‰€æœ‰ä¾èµ–éƒ½æ‰“åŒ…åˆ°ä¸€ä¸ª JAR æ–‡ä»¶ä¸­ï¼Œæ­¤æ—¶å¯¹ç¯å¢ƒçš„ä¾èµ–æ€§æœ€å°ã€‚è¦å®ç°è¿™ä¸ªç›®çš„ï¼Œå¯ä»¥ä½¿ç”¨ Maven æä¾›çš„ <code>maven-assembly-plugin</code> æˆ– <code>maven-shade-plugin</code> æ’ä»¶ã€‚</p>
<blockquote>
<p>æˆ‘ç›´æ¥ä½¿ç”¨mvn package æŠ¥é”™è¯¯</p>
<p>[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?</p>
<p>æœªè§£å†³</p>
</blockquote>
<h4 id="3-maven-assembly-pluginæ’ä»¶"><a href="#3-maven-assembly-pluginæ’ä»¶" class="headerlink" title="3.maven-assembly-pluginæ’ä»¶"></a>3.maven-assembly-pluginæ’ä»¶</h4><p><code>Assembly</code> æ’ä»¶æ”¯æŒå°†é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–ã€æ–‡ä»¶éƒ½æ‰“åŒ…åˆ°åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ã€‚ç›®å‰æ”¯æŒè¾“å‡ºä»¥ä¸‹æ–‡ä»¶ç±»å‹ï¼š</p>
<ul>
<li>zip</li>
<li>tar</li>
<li>tar.gz (or tgz)</li>
<li>tar.bz2 (or tbz2)</li>
<li>tar.snappy</li>
<li>tar.xz (or txz)</li>
<li>jar</li>
<li>dir</li>
<li>war</li>
</ul>
<p><strong>åŸºæœ¬ä½¿ç”¨</strong></p>
<p>åœ¨ POM.xml ä¸­å¼•å…¥æ’ä»¶ï¼ŒæŒ‡å®šæ‰“åŒ…æ ¼å¼çš„é…ç½®æ–‡ä»¶ <code>assembly.xml</code>(åç§°å¯è‡ªå®šä¹‰)ï¼Œå¹¶æŒ‡å®šä½œä¸šçš„ä¸»å…¥å£ç±»ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®æœ€ç»ˆæ‰“åŒ…æˆçš„åå­— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>community<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">descriptors</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">descriptor</span>&gt;</span>src/main/resources/assembly.xml<span class="tag">&lt;/<span class="name">descriptor</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">descriptors</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- æŒ‡å®šå¯åŠ¨ç±» --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.liuxuan.Log4jDemo<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>assembly.xml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">assembly</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/ASSEMBLY/2.0.0&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/ASSEMBLY/2.0.0 </span></span></span><br><span class="line"><span class="string"><span class="tag">                              http://maven.apache.org/xsd/assembly-2.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>jar-with-dependencies<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æŒ‡æ˜æ‰“åŒ…æ–¹å¼--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">formats</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">format</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">formats</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">includeBaseDirectory</span>&gt;</span>false<span class="tag">&lt;/<span class="name">includeBaseDirectory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencySets</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencySet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>/<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">useProjectArtifact</span>&gt;</span>true<span class="tag">&lt;/<span class="name">useProjectArtifact</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">unpack</span>&gt;</span>true<span class="tag">&lt;/<span class="name">unpack</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¿™é‡Œä»¥æ’é™¤ storm ç¯å¢ƒä¸­å·²ç»æä¾›çš„ storm-core ä¸ºä¾‹ï¼Œæ¼”ç¤ºæ’é™¤ Jar åŒ…--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>org.apache.storm:storm-core<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencySet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencySets</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">assembly</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é‡‡ç”¨ maven-assembly-plugin è¿›è¡Œæ‰“åŒ…æ—¶å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<p>mvn assembly:assembly </p>
<blockquote>
<p>é—®é¢˜ï¼šä½¿ç”¨å‘½ä»¤mvn compile æ—¶ï¼Œä¼šæŠ¥é”™ no compilerï¼Œä½†æ˜¯ideaä¸­ç‚¹å‡»æ—¶æ²¡é—®é¢˜ã€‚æ‰€ä»¥å¾—å…ˆç‚¹compileç¼–è¯‘ï¼Œå†æ‰§è¡Œassemblyå‘½ä»¤ã€‚</p>
</blockquote>
<p>æ‰“åŒ…åä¼šåŒæ—¶ç”Ÿæˆä¸¤ä¸ª JAR åŒ…ï¼Œå…¶ä¸­åç¼€ä¸º <code>jar-with-dependencies</code> æ˜¯å«æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–çš„ JAR åŒ…ï¼Œåç¼€æ˜¯ç”± <code>assembly.xml</code> ä¸­ <code>&lt;id&gt;</code> æ ‡ç­¾æŒ‡å®šçš„ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ã€‚</p>
<h4 id="4-maven-shade-pluginæ’ä»¶"><a href="#4-maven-shade-pluginæ’ä»¶" class="headerlink" title="4.maven-shade-pluginæ’ä»¶"></a>4.maven-shade-pluginæ’ä»¶</h4><p><code>maven-shade-plugin</code> æ¯” <code>maven-assembly-plugin</code> åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ï¼Œæ¯”å¦‚ä½ çš„å·¥ç¨‹ä¾èµ–å¾ˆå¤šçš„ JAR åŒ…ï¼Œè€Œè¢«ä¾èµ–çš„ JAR åˆä¼šä¾èµ–å…¶ä»–çš„ JAR åŒ…ï¼Œè¿™æ ·,å½“å·¥ç¨‹ä¸­ä¾èµ–åˆ°ä¸åŒçš„ç‰ˆæœ¬çš„ JAR æ—¶ï¼Œå¹¶ä¸” JAR ä¸­å…·æœ‰ç›¸åŒåç§°çš„èµ„æºæ–‡ä»¶æ—¶ï¼Œshade æ’ä»¶ä¼šå°è¯•å°†æ‰€æœ‰èµ„æºæ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·æ—¶ï¼Œè€Œä¸æ˜¯å’Œ assembly ä¸€æ ·æ‰§è¡Œè¦†ç›–æ“ä½œã€‚</p>
<p><strong>é€šå¸¸ä½¿ç”¨ <code>maven-shade-plugin</code> å°±èƒ½å¤Ÿå®Œæˆå¤§å¤šæ•°çš„æ‰“åŒ…éœ€æ±‚ï¼Œå…¶é…ç½®ç®€å•ä¸”é€‚ç”¨æ€§æœ€å¹¿ï¼Œå› æ­¤å»ºè®®ä¼˜å…ˆä½¿ç”¨æ­¤æ–¹å¼ã€‚</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®æœ€ç»ˆæ‰“åŒ…æˆçš„åå­— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>community<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-shade-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>shade<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">transformers</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- æŒ‡å®šå¯åŠ¨ç±» --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">transformer</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">implementation</span>=<span class="string">&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.ronz.community.CommunityApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">transformer</span>&gt;</span></span><br><span class="line">                            </span><br><span class="line">                            <span class="comment">&lt;!-- ä¸‹é¢çš„é…ç½®ä»…é’ˆå¯¹å­˜åœ¨åŒåèµ„æºæ–‡ä»¶çš„æƒ…å†µï¼Œå¦‚æ²¡æœ‰åˆ™ä¸ç”¨é…ç½®--&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- æœ‰äº›é¡¹ç›®åŒ…å¯èƒ½ä¼šåŒ…å«åŒæ–‡ä»¶åçš„èµ„æºæ–‡ä»¶ï¼ˆä¾‹å¦‚å±æ€§æ–‡ä»¶ï¼‰--&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- ä¸ºé¿å…è¦†ç›–ï¼Œå¯ä»¥å°†å®ƒä»¬çš„å†…å®¹åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">transformer</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">implementation</span>=<span class="string">&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">resource</span>&gt;</span>META-INF/spring.handlers<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">transformer</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">transformer</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">implementation</span>=<span class="string">&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">resource</span>&gt;</span>META-INF/spring.schemas<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">transformer</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">transformers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ maven-shade-plugin è¿›è¡Œæ‰“åŒ…çš„æ—¶å€™ï¼Œæ‰“åŒ…å‘½ä»¤å’Œæ™®é€šæ‰“åŒ…ä¸€æ ·</p>
<p>mvn package</p>
<h4 id="5-ä½¿ç”¨-maven-jar-plugin-å’Œ-maven-dependency-plugin-æ’ä»¶"><a href="#5-ä½¿ç”¨-maven-jar-plugin-å’Œ-maven-dependency-plugin-æ’ä»¶" class="headerlink" title="5.ä½¿ç”¨ maven-jar-plugin å’Œ maven-dependency-plugin æ’ä»¶"></a>5.ä½¿ç”¨ maven-jar-plugin å’Œ maven-dependency-plugin æ’ä»¶</h4><p>æ­¤ç§æ‰“åŒ…æ–¹å¼æœ‰ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„ç¼ºç‚¹ï¼šæ‰“åŒ…åä¼šåœ¨ <code>target</code> ç›®å½•ä¸‹ç”Ÿæˆ <code>lib</code> ç›®å½•ï¼ˆå­˜æ”¾ä¾èµ– Jarï¼‰å’Œé¡¹ç›® Jarã€‚ä¹Ÿå°±æ˜¯è¯´ç”±äºä¾èµ–éƒ½å­˜åœ¨äº <code>lib</code> ç›®å½•ä¸­ï¼Œæ‰€ä»¥è¦æƒ³è¿è¡Œ Jar åŒ…ï¼Œå¿…é¡»å°† Jar åŒ…å’Œ <code>lib</code>ç›®å½•æ”¾åœ¨åŒä¸€ä¸ªè·¯å¾„ä¸‹ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®æœ€ç»ˆæ‰“åŒ…æˆçš„åå­— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>community<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- ä¼šåœ¨ MANIFEST.MF ä¸­ç”Ÿæˆ Class-Path é¡¹ --&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- ç³»ç»Ÿä¼šæ ¹æ® Class-Path é¡¹é…ç½®çš„è·¯å¾„åŠ è½½ä¾èµ– --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- æŒ‡å®šä¾èµ–åŒ…æ‰€åœ¨ç›®å½•ï¼Œç›¸å¯¹äºé¡¹ç›®æœ€ç»ˆ Jar åŒ…çš„è·¯å¾„ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- æŒ‡å®š MainClass --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.ronz.community.CommunityApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®ä¾èµ–åŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ç›¸å½“äºæ‰§è¡Œ mvn å‘½ä»¤ï¼Œå°†ä¾èµ–æ‰“åŒ…åˆ°æŒ‡å®šç›®å½• --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--å°†ä¾èµ–æ‰“åŒ…è‡³ target ä¸‹çš„ lib ç›®å½•--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ€æƒ³ä¹Ÿæ¯”è¾ƒç®€å•ã€‚</p>
<p>é¦–å…ˆè¯´ maven-jar-plugin æ’ä»¶ï¼Œå®ƒçš„æ€æƒ³å°±æ˜¯ï¼šæŒ‡å®šå¯åŠ¨ç±»ã€æŒ‡å®šä¾èµ–åŒ…ç›¸å¯¹äºé¡¹ç›®æœ€ç»ˆ Jar åŒ…æ‰€åœ¨çš„è·¯å¾„ã€ç»™ MANIFEST.MF æ–‡ä»¶æ·»åŠ  Class-Path å±æ€§ï¼ˆè¿è¡Œé¡¹ç›® Jar åŒ…æ—¶ä¼šæ ¹æ® Class-Path å±æ€§æ¥æ‰¾åˆ°å…·ä½“ä¾èµ– Jar åŒ…çš„è·¯å¾„ï¼‰ã€‚</p>
<p>æ¥ç€æ˜¯ maven-dependency-plugin æ’ä»¶ï¼Œå®ƒçš„ä¸»è¦æ€æƒ³å°±æ˜¯ï¼šæŒ‡å®šæ‰€æœ‰ä¾èµ–è¢«æ‰“åŒ…ä¸º Jar åŒ…åçš„å­˜æ”¾è·¯å¾„ã€‚</p>
<p>pom.xml æ–‡ä»¶é…ç½®å®Œæ¯•ä¹‹åï¼Œå°±å¯ä»¥è¿è¡Œæ‰“åŒ…å‘½ä»¤äº†ï¼š<br><em># è·³è¿‡æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œ package å‘½ä»¤</em> mvn package -Dmaven.test.skip=true</p>
<p>è¿™ç§æ–¹å¼æ‰“åŒ…å‡ºæ¥çš„ Jar åŒ…ï¼Œåœ¨ä»£ç å±‚é¢åªåŒ…å«äº†é¡¹ç›®æœ¬èº«çš„ä»£ç ã€‚è€Œé¡¹ç›®çš„ä¾èµ–éƒ½ä»¥ Jar åŒ…çš„å½¢å¼æ”¾åœ¨äº†é¡¹ç›® Jar åŒ…åŒçº§åˆ«ç›®å½•ä¸‹çš„ <code>lib</code> ç›®å½•ä¸­ï¼Œè¿™äº›ä¾èµ– Jar åŒ…çš„è·¯å¾„åœ¨ <code>MANIFEST.MF</code> æ–‡ä»¶ä¸­éƒ½ä»¥è·¯å¾„çš„æ–¹å¼æŒ‡æ˜äº†ã€‚</p>
<h4 id="æ‰“åŒ…æ€»ç»“"><a href="#æ‰“åŒ…æ€»ç»“" class="headerlink" title="æ‰“åŒ…æ€»ç»“"></a>æ‰“åŒ…æ€»ç»“</h4><p>å·¥ä½œä¸­ç”¨åˆ°çš„å‘½ä»¤åªæ˜¯ï¼šmvn package -Dmaven.test.skip=trueï¼Œä½†æ˜¯çœ‹é¡¹ç›®ä¸­è²Œä¼¼ä½¿ç”¨çš„æ˜¯assemblyã€‚</p>
<p>æ¨èä½¿ç”¨maven-shade-pluginæ’ä»¶ï¼Œå¯ä»¥é¿å…å‰é¢çš„èµ„æºæ–‡ä»¶è¢«åé¢çš„è¦†ç›–æ‰ã€‚</p>
<p>åªæ˜¯mvn compile è¿™ä¸ªé—®é¢˜è¿˜æ²¡è§£å†³ï¼Œä¸ºä»€ä¹ˆideaä¸­ç‚¹å‡»compileèƒ½å¤Ÿç¼–è¯‘ï¼Œç»ˆç«¯æ‰§è¡Œå‘½ä»¤å´ä¸è¡Œã€‚</p>
<h3 id="githubåœ°å€"><a href="#githubåœ°å€" class="headerlink" title="githubåœ°å€"></a>githubåœ°å€</h3><p><a target="_blank" rel="noopener" href="https://github.com/jadeliuliu/log-maven-package/tree/master">https://github.com/jadeliuliu/log-maven-package/tree/master</a></p>
<p>æ‘˜è‡ªï¼š</p>
<p>slf4jã€log4jã€logbackï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/javalinux/p/15683735.html">https://www.cnblogs.com/javalinux/p/15683735.html</a></p>
<p>logå‘å±•å²ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/7033021644142542878">https://juejin.cn/post/7033021644142542878</a></p>
<p>ideaä¸­åˆ›å»ºmaven webé¡¹ç›®ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/weiqingfeng/p/9494914.html">https://www.cnblogs.com/weiqingfeng/p/9494914.html</a></p>
<p>macåŒºåˆ†.bash_profile å’Œ/etc/profileï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42214743/article/details/116133257">https://blog.csdn.net/weixin_42214743/article/details/116133257</a></p>
<p>bashå’Œzshï¼š<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20036548/answer/2345481001">https://www.zhihu.com/question/20036548/answer/2345481001</a></p>
<p>log4jé…ç½®æ–‡ä»¶ï¼š<a target="_blank" rel="noopener" href="http://www.blogjava.net/zJun/archive/2006/06/28/55511.html">http://www.blogjava.net/zJun/archive/2006/06/28/55511.html</a></p>
<p>mavené¡¹ç›®æ‰“åŒ…éƒ¨ç½²åˆ°tomcatï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/asdx1020/article/details/104554811">https://blog.csdn.net/asdx1020/article/details/104554811</a>   &amp;&amp;   <a target="_blank" rel="noopener" href="https://blog.csdn.net/Shangxingya/article/details/107295800">https://blog.csdn.net/Shangxingya/article/details/107295800</a></p>
<p>å¸¸ç”¨mavenæ‰“åŒ…æ–¹å¼ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904067194437639#heading-1">https://juejin.cn/post/6844904067194437639#heading-1</a>   &amp;&amp; <a target="_blank" rel="noopener" href="https://blog.csdn.net/zhuxian1277/article/details/119880760">https://blog.csdn.net/zhuxian1277/article/details/119880760</a></p>
<h3 id="logæ—¥å¿—æ€ä¹ˆä¼ å‚"><a href="#logæ—¥å¿—æ€ä¹ˆä¼ å‚" class="headerlink" title="logæ—¥å¿—æ€ä¹ˆä¼ å‚"></a>logæ—¥å¿—æ€ä¹ˆä¼ å‚</h3><p>ä¸åŒäºString.formatå’Œsoutï¼Œlogä½¿ç”¨å ä½ç¬¦ä¼ å‚ï¼Œå°±æ˜¯{}ï¼Œå‰é¢ç”¨:è¿˜æ˜¯=è¿˜æ˜¯å…¶ä»–æ— æ‰€è°“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.info(&quot;remindï¼šorderInfo:&#123;&#125;&quot;, JSON.toJSONString(orderInfo));</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯log.erroré‡Œé¢è¿˜æœ‰Exceptionå¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆæ‰“å°:<br>å¯¹äºå¼‚å¸¸ï¼Œæ˜¯ä¸éœ€è¦å ä½ç¬¦çš„ï¼Œè€Œä¸”ä¹Ÿä¸éœ€è¦ e.getMessage()ï¼Œç›´æ¥æ‰“å°å‡ºæ¥å³å¯.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">&#125; catch (Exeception e) &#123;</span><br><span class="line">    log.error(&quot;error in order:&#123;&#125;&quot;, JSON.toJSONString(orderInfo), e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="logæ—¥å¿—çº§åˆ«å¼€å…³"><a href="#logæ—¥å¿—çº§åˆ«å¼€å…³" class="headerlink" title="logæ—¥å¿—çº§åˆ«å¼€å…³"></a>logæ—¥å¿—çº§åˆ«å¼€å…³</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(log.isDebugEnabled()) &#123;</span><br><span class="line">    log.debug();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/19/myblog/JAVA/servlet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/19/myblog/JAVA/servlet/" class="post-title-link" itemprop="url">servletå…¥é—¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-19 15:54:44" itemprop="dateCreated datePublished" datetime="2022-03-19T15:54:44+08:00">2022-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-06 13:41:03" itemprop="dateModified" datetime="2022-10-06T13:41:03+08:00">2022-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-Httpåè®®"><a href="#1-Httpåè®®" class="headerlink" title="1.Httpåè®®"></a>1.Httpåè®®</h3><p>HTTPåè®®çš„ç‰¹ç‚¹<br>1.æ”¯æŒå®¢æˆ· / æœåŠ¡å™¨æ¨¡å¼<br>2.ç®€å•å¿«é€Ÿ<br>3.çµæ´»<br>4.æ— è¿æ¥ï¼ŒHTTP1.1 ç‰ˆæœ¬åæ”¯æŒå¯æŒç»­è¿æ¥<br>5.æ— çŠ¶æ€</p>
<p>HTTP url:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//host[:port]/[abs_path]</span></span><br><span class="line">http:<span class="comment">//IP(ä¸»æœºå/åŸŸå):ç«¯å£/è®¿é—®çš„èµ„æºè·¯å¾„</span></span><br></pre></td></tr></table></figure>

<ul>
<li>http è¡¨ç¤ºé€šè¿‡HTTPåè®®æ¥å®šä½ç½‘ç»œèµ„æº</li>
<li>host è¡¨ç¤ºåˆæ³•çš„ Internet ä¸»æœºåæˆ–è€… ip åœ°å€</li>
<li>port æŒ‡ä¸€ä¸ªç«¯å£å·ï¼Œä¸ºç©ºåˆ™ä¸º 80</li>
<li>abs_path æŒ‡å®šè¯·æ±‚çš„ URL</li>
</ul>
<h4 id="HTTP-è¯·æ±‚"><a href="#HTTP-è¯·æ±‚" class="headerlink" title="HTTP è¯·æ±‚"></a>HTTP è¯·æ±‚</h4><ul>
<li>httpè¯·æ±‚ç”±è¯·æ±‚è¡Œã€<strong>è¯·æ±‚å¤´</strong>ã€è¯·æ±‚æ­£æ–‡ç»„æˆã€‚<ul>
<li>è¯·æ±‚ä½“ç¬¬ä¸€è¡Œå°±æ˜¯è¯·æ±‚è¡Œï¼›è¯·æ±‚è¡Œç”±è¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚è·¯å¾„ã€è¯·æ±‚åè®®ç‰ˆæœ¬ä¸‰éƒ¨åˆ†ç»„æˆ</li>
<li>è¯·æ±‚å¤´æŒ‡ä¸€è¡Œä¸€è¡Œçš„é”®å€¼å¯¹</li>
<li>æ­£æ–‡å³æ˜¯å†…å®¹ï¼›GETè¯·æ±‚æ²¡æœ‰æ­£æ–‡ï¼Œå…¶å†…å®¹ç›´æ¥è·Ÿåœ¨åœ°å€åé¢</li>
</ul>
</li>
</ul>
<h4 id="HTTP-å“åº”"><a href="#HTTP-å“åº”" class="headerlink" title="HTTP å“åº”"></a>HTTP å“åº”</h4><ul>
<li>åœ¨æ¥æ”¶å’Œè§£é‡Šè¯·æ±‚æ¶ˆæ¯åï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ª HTTP å“åº”æ¶ˆæ¯ã€‚HTTP å“åº”ç”±çŠ¶æ€è¡Œã€æ¶ˆæ¯æŠ¥å¤´ã€å“åº”æ­£æ–‡ç»„æˆ<ul>
<li>çŠ¶æ€è¡Œç”±åè®®ç‰ˆæœ¬ã€çŠ¶æ€ç ã€è¯·æ±‚ç»“æœç»„æˆ</li>
<li>æ¶ˆæ¯æŠ¥å¤´ä¸è¯·æ±‚å¤´å¤§è‡´ç›¸åŒ</li>
<li>å“åº”æ­£æ–‡å°±æ˜¯æµè§ˆå™¨å‘ˆç°çš„å†…å®¹</li>
</ul>
</li>
</ul>
<h4 id="æ¶ˆæ¯å¤´"><a href="#æ¶ˆæ¯å¤´" class="headerlink" title="æ¶ˆæ¯å¤´"></a>æ¶ˆæ¯å¤´</h4><p>â€ƒâ€ƒHTTPæ¶ˆæ¯ç”±å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„è¯·æ±‚å’ŒæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„å“åº”ç»„æˆï¼Œè¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½æ˜¯ç”±å¼€å§‹è¡Œï¼ˆå¯¹äºè¯·æ±‚æ¶ˆæ¯ï¼Œ å¼€å§‹è¡Œå°±æ˜¯è¯·æ±‚è¡Œï¼›å“åº”æ¶ˆæ¯åˆ™æ˜¯çŠ¶æ€è¡Œï¼‰ï¼Œæ¶ˆæ¯æŠ¥å¤´ï¼Œç©ºè¡Œï¼Œæ¶ˆæ¯æ­£æ–‡ï¼ˆå¯é€‰ï¼‰ç»„æˆ</p>
<p>â€ƒâ€ƒæ¯ä¸€ä¸ªæŠ¥å¤´åŸŸéƒ½æ˜¯ç”± åå­—+â€:â€+ç©ºæ ¼+å€¼ ç»„æˆï¼Œæ¶ˆæ¯æŠ¥å¤´åŸŸçš„åå­—æ˜¯å¤§å°å†™æ— å…³çš„</p>
<p>1.è¯·æ±‚å¤´ï¼š</p>
<p>â€ƒâ€ƒè¯·æ±‚æŠ¥å¤´å…è®¸å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€’è¯·æ±‚çš„é™„åŠ ä¿¡æ¯ä»¥åŠå®¢æˆ·ç«¯è‡ªèº«çš„ä¿¡æ¯ï¼Œæ— æ³•é€šè¿‡å‚æ•°æ¥ä¼ é€’çš„ç”¨è¯·æ±‚å¤´ã€‚</p>
<ul>
<li><p>refererï¼š è¯¥è¯·æ±‚å¤´æŒ‡æ˜è¯·æ±‚ä»å“ªé‡Œæ¥</p>
<p> æ­¤è¯·æ±‚å¤´åé¢æ¥çš„å€¼ä¸ºä¸Šä¸€ä¸ªé¡µé¢çš„URLåœ°å€ï¼Œé€šå¸¸ç”¨æ¥åšç»Ÿè®¡ã€é˜²ç›—é“¾ã€‚å¦‚æœæ˜¯ä»æµè§ˆå™¨åœ°å€æ ç›´æ¥è¾“å…¥è¿›è¡Œè®¿é—®çš„ï¼Œéƒ½æ²¡æœ‰è¯¥è¯·æ±‚å¤´ã€‚ä¾‹å¦‚ç™¾åº¦çš„å¹¿å‘Šï¼Œæœä¸€ä¸ªä¸œè¥¿ï¼Œå‡ºç°å¹¿å‘Šå­—æ ·çš„è¿æ¥ï¼Œç‚¹å‡»ä¼šè®°å½•æ˜¯ä»ç™¾åº¦æœç´¢è¿›æ¥çš„ã€‚ä¾‹å¦‚é‚€è¯·å¥½å‹ï¼Œç”¨æ¥è®°å½•æ˜¯è°é‚€è¯·è¿›æ¥çš„ã€‚ä¾‹å¦‚ä»aé¡µé¢åˆ°dé¡µé¢ï¼Œå¿…é¡»è¦ç»è¿‡bé¡µé¢å’Œcé¡µé¢ï¼Œé˜²ç›—é“¾ã€‚</p>
</li>
</ul>
<p>2.å“åº”å¤´</p>
<p>â€ƒâ€ƒå“åº”æŠ¥å¤´å…è®¸æœåŠ¡å™¨ä¼ é€’ä¸èƒ½æ”¾åœ¨çŠ¶æ€è¡Œä¸­çš„é™„åŠ å“åº”æ¶ˆæ¯ï¼Œä»¥åŠå…³äºæœåŠ¡å™¨çš„ä¿¡æ¯å’Œå¯¹Request-URLæ‰€æ ‡è¯†çš„èµ„æºè¿›è¡Œä¸‹ä¸€æ­¥è®¿é—®çš„ä¿¡æ¯</p>
<ul>
<li>locationï¼ˆé‡å®šå‘ï¼‰ï¼šlocation å“åº”æŠ¥å¤´åŸŸç”¨äºé‡å®šå‘æ¥æ”¶è€…åˆ°ä¸€ä¸ªæ–°ä½ç½®</li>
</ul>
<p>â€ƒâ€ƒlocationå“åº”æŠ¥å¤´åŸŸï¼Œå¸¸ç”¨åœ¨æœåŠ¡å™¨æ›´æ¢åŸŸåæ—¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(<span class="string">&quot;http://www.baidu.com&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>refreshï¼šç¬¬ä¸€ç§æ˜¯å®šæ—¶è‡ªåŠ¨è·³è½¬åˆ° [url]æŒ‡å®šçš„é¡µé¢ï¼ˆå•ä½ä¸ºç§’ï¼‰ï¼ˆ307é‡å®šå‘è¿‡æ¥çš„ï¼‰ï¼Œå¯ä»¥åœ¨htmlé¡µé¢é€šè¿‡metaæ ‡ç­¾å®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨åå°å®ç°ï¼›ç¬¬äºŒç§æ˜¯ä¸å¸¦ [url] æ˜¯æŒ‡æ¯ [content] ç§’åˆ·æ–°ä¸€æ¬¡é¡µé¢    </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;3;url=http://www.baidu.com&quot;</span>&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2-servletæ¦‚è¿°"><a href="#2-servletæ¦‚è¿°" class="headerlink" title="2.servletæ¦‚è¿°"></a>2.servletæ¦‚è¿°</h3><p>Servlet æ˜¯ Server ä¸ Applet çš„ç¼©å†™ï¼Œæ˜¯æœåŠ¡ç«¯å°ç¨‹åºçš„æ„æ€ã€‚ä½¿ç”¨ Java è¯­è¨€ç¼–å†™çš„æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œå¯ä»¥ç”ŸæˆåŠ¨æ€çš„ WEB é¡µï¼ŒServlet ä¸»è¦è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œå¹¶ç”±æœåŠ¡å™¨è°ƒç”¨æ‰§è¡Œï¼Œ æ˜¯ä¸€ç§æŒ‰ç…§ Servlet æ ‡å‡†æ¥å¼€å‘çš„ç±»ã€‚ æ˜¯ SUN å…¬å¸æä¾›çš„ä¸€é—¨ç”¨äºå¼€å‘åŠ¨æ€ Web èµ„æºçš„æŠ€æœ¯ã€‚ï¼ˆè¨€å¤–ä¹‹æ„ï¼šè¦å®ç° web å¼€å‘ï¼Œéœ€è¦å®ç° Servlet æ ‡å‡†ï¼‰</p>
<p>Servlet æœ¬è´¨ä¸Šä¹Ÿæ˜¯ Java ç±»ï¼Œä½†è¦éµå¾ª Servlet è§„èŒƒè¿›è¡Œç¼–å†™ï¼Œæ²¡æœ‰ main()æ–¹æ³•ï¼Œå®ƒçš„åˆ›å»ºã€ä½¿ç”¨ã€é”€æ¯éƒ½ç”± Servletå®¹å™¨è¿›è¡Œç®¡ç†(å¦‚ Tomcat)ã€‚ï¼ˆè¨€å¤–ä¹‹æ„ï¼šå†™è‡ªå·±çš„ç±»ï¼Œä¸ç”¨å†™ main æ–¹æ³•ï¼Œåˆ«äººè‡ªåŠ¨è°ƒç”¨ï¼‰</p>
<p>Servlet æ˜¯å’Œ HTTP åè®®æ˜¯ç´§å¯†è”ç³»çš„ï¼Œå…¶å¯ä»¥å¤„ç† HTTP åè®®ç›¸å…³çš„æ‰€æœ‰å†…å®¹ã€‚è¿™ä¹Ÿæ˜¯ Servlet åº”ç”¨å¹¿æ³›çš„åŸå› ä¹‹ä¸€ã€‚<br>æä¾›äº† Servlet åŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œå«åš Servlet å®¹å™¨ï¼Œå…¶å¸¸è§å®¹å™¨æœ‰å¾ˆå¤šï¼Œå¦‚ Tomcat, Jetty, WebLogic Server, WebSphere, JBoss ç­‰ç­‰ã€‚</p>
<p><strong>tomcatå’Œservletçš„å…³ç³»</strong></p>
<p>Tomcat æ˜¯Webåº”ç”¨æœåŠ¡å™¨,æ˜¯ä¸€ä¸ªServlet/JSPå®¹å™¨. Tomcat ä½œä¸ºServletå®¹å™¨,è´Ÿè´£å¤„ç†å®¢æˆ·è¯·æ±‚,æŠŠè¯·æ±‚ä¼ é€ç»™Servlet,å¹¶å°†Servletçš„å“åº”ä¼ é€å›ç»™å®¢æˆ·.è€ŒServletæ˜¯ä¸€ç§è¿è¡Œåœ¨æ”¯æŒJavaè¯­è¨€çš„æœåŠ¡å™¨ä¸Šçš„ç»„ä»¶ã€‚</p>
<h3 id="3-ä½¿ç”¨servlet"><a href="#3-ä½¿ç”¨servlet" class="headerlink" title="3.ä½¿ç”¨servlet"></a>3.ä½¿ç”¨servlet</h3><h4 id="3-1-æ–°å»ºwebé¡¹ç›®"><a href="#3-1-æ–°å»ºwebé¡¹ç›®" class="headerlink" title="3.1.æ–°å»ºwebé¡¹ç›®"></a>3.1.æ–°å»ºwebé¡¹ç›®</h4><p>åˆ›å»ºwebå·¥ç¨‹ï¼Œjava enterprise - web applicationï¼Œå¼•å…¥jdkã€tomcatã€‚</p>
<h4 id="3-2-å®ç°servletè§„èŒƒ"><a href="#3-2-å®ç°servletè§„èŒƒ" class="headerlink" title="3.2.å®ç°servletè§„èŒƒ"></a>3.2.å®ç°servletè§„èŒƒ</h4><p>å®ç° Servlet è§„èŒƒï¼Œå³ç»§æ‰¿ HttpServlet ç±»ï¼ˆtomcaté‡Œçš„jaråŒ…æ”¯æŒçš„ï¼‰ï¼Œè¯¥ç±»ä¸­å·²ç»å®Œæˆäº†é€šä¿¡çš„è§„åˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œä¸šåŠ¡çš„å®ç°å³å¯ã€‚</p>
<p><strong>é‡å†™ service æ–¹æ³•</strong><br>æ»¡è¶³ Servlet è§„èŒƒåªæ˜¯è®©æˆ‘ä»¬çš„ç±»èƒ½å¤Ÿæ»¡è¶³æ¥æ”¶è¯·æ±‚çš„è¦æ±‚ï¼Œæ¥æ”¶åˆ°è¯·æ±‚åéœ€è¦å¯¹è¯·æ±‚è¿›è¡Œåˆ†æï¼Œä»¥åŠè¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œè®¡ç®—å‡ºç»“æœï¼Œåˆ™éœ€è¦æ·»åŠ ä»£ç ï¼Œåœ¨è§„èŒƒä¸­æœ‰ä¸€ä¸ªå«åš serviceçš„æ–¹æ³•ï¼Œä¸“é—¨ç”¨æ¥åšè¯·æ±‚å¤„ç†çš„æ“ä½œï¼Œä¸šåŠ¡ä»£ç åˆ™å¯ä»¥å†™åœ¨è¯¥æ–¹æ³•ä¸­ã€‚</p>
<p><strong>é€šè¿‡æ³¨è§£è®¾ç½®è·¯å¾„</strong></p>
<p>åœ¨å®Œæˆå¥½äº†ä¸€åˆ‡ä»£ç çš„ç¼–å†™åï¼Œè¿˜éœ€è¦å‘æœåŠ¡å™¨è¯´æ˜ï¼Œç‰¹å®šè¯·æ±‚å¯¹åº”ç‰¹å®šèµ„æºã€‚</p>
<p>å¼€å‘servleté¡¹ç›®ï¼Œä½¿ç”¨@WebServletå°†ä¸€ä¸ªç»§æ‰¿äºjavax.servlet.http.HttpServlet çš„ç±»å®šä¹‰ä¸ºServletç»„ä»¶ã€‚åœ¨Servlet3.0 ä¸­ ï¼Œ å¯ä»¥ä½¿ç”¨@WebServletæ³¨è§£å°†ä¸€ä¸ªç»§æ‰¿javax.servlet.http.HttpServletçš„ç±»æ ‡æ³¨ä¸ºå¯ä»¥å¤„ç†ç”¨æˆ·è¯·æ±‚çš„Servletã€‚</p>
<blockquote>
<p>javax.servletä¸‹é¢æœ‰ä¸¤ä¸ªservlet-apiï¼Œä¸€ä¸ªæ˜¯servlet-apiï¼Œè¿™ä¸ªå®šä¹‰äº†servletè§„èŒƒï¼Œä¸€ä¸ªæ˜¯javax.servlet-apiï¼Œè¿™ä¸ªæ˜¯serlvetæä¾›çš„apiã€‚<br>@WebServletè¿™ä¸ªæ³¨è§£æ˜¯åœ¨javax.servlet-apiä¾èµ–åŒ…é‡Œ</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nameå¯å†™å¯ä¸å†™ï¼Œvalueè¿‡æ»¤å™¨ä¼šæ‹¦æˆªï¼ŒurlPatternsè¿‡æ»¤å™¨ä¸ä¼šæ‹¦æˆª</span><br><span class="line"><span class="meta">@WebServlet(name=&quot;Servlet01&quot;,value=&quot;/ser01&quot;)</span> </span><br><span class="line"><span class="meta">@WebServlet(name=&quot;Servlet01&quot;,urlPatterns = &quot;/ser01&quot;)</span></span><br><span class="line">ä¹Ÿå¯ä»¥é…ç½®å¤šä¸ªè·¯å¾„ï¼š</span><br><span class="line"><span class="meta">@WebServlet(name=&quot;Servlet01&quot;,value=&#123;&quot;/ser01&quot;,&#x27;/ser001&#x27;&#125;)</span> </span><br><span class="line"><span class="meta">@WebServlet(name=&quot;Servlet01&quot;,urlPatterns=&#123;&quot;/ser01&quot;,&#x27;/ser001&#x27;&#125;)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-19 17:00</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello Servlet!&quot;</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-å‘å¸ƒé¡¹ç›®å¹¶å¯åŠ¨æœåŠ¡"><a href="#3-3-å‘å¸ƒé¡¹ç›®å¹¶å¯åŠ¨æœåŠ¡" class="headerlink" title="3.3.å‘å¸ƒé¡¹ç›®å¹¶å¯åŠ¨æœåŠ¡"></a>3.3.å‘å¸ƒé¡¹ç›®å¹¶å¯åŠ¨æœåŠ¡</h4><p>åˆ°æ­¤ï¼Œéœ€è¦ç¼–å†™å’Œé…ç½®çš„åœ°æ–¹å·²ç»å®Œæˆï¼Œé¡¹ç›®å·²ç»å®Œæ•´äº†ï¼Œä½†æ˜¯å¦‚æœéœ€è¦å¤–ç•Œèƒ½å¤Ÿè®¿é—®ï¼Œ è¿˜éœ€è¦å°†é¡¹ç›®å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸Šå¹¶è¿è¡ŒæœåŠ¡å™¨ã€‚</p>
<p>è®¾ç½®tomcaté…ç½®ï¼Œè®¾ç½®é¡¹ç›®çš„ç«™ç‚¹åï¼ˆé¡¹ç›®å¯¹å¤–è®¿é—®è·¯å¾„ï¼‰</p>
<p>é…ç½®ä¸­é€‰deploymentæ›´æ”¹ç«™ç‚¹åã€‚</p>
<p>ç„¶åå¯åŠ¨å°±å¯ä»¥è®¿é—®é¡µé¢ã€‚</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/servlet_demo/ser01">http://localhost:8080/servlet_demo/ser01</a></p>
<p>tomcatæœ‰ä¸ªç»¿ç‚¹è¡¨ç¤ºæ­£åœ¨è¿è¡Œã€‚</p>
<h3 id="4-servletå·¥ä½œæµç¨‹"><a href="#4-servletå·¥ä½œæµç¨‹" class="headerlink" title="4.servletå·¥ä½œæµç¨‹"></a>4.servletå·¥ä½œæµç¨‹</h3><p>1.é€šè¿‡è¯·æ±‚å¤´è·çŸ¥æµè§ˆå™¨è®¿é—®çš„æ˜¯å“ªä¸ªä¸»æœº</p>
<p>2.å†é€šè¿‡è¯·æ±‚è¡Œè·å–è®¿é—®çš„æ˜¯å“ªä¸ªä¸€ä¸ªwebåº”ç”¨</p>
<p>3.å†é€šè¿‡è¯·æ±‚è¡Œä¸­çš„è¯·æ±‚è·¯å¾„è·çŸ¥è®¿é—®çš„æ˜¯å“ªä¸ªèµ„æº</p>
<p>4.é€šè¿‡è·å–çš„èµ„æºè·¯å¾„åœ¨é…ç½®ä¸­åŒ¹é…åˆ°çœŸå®çš„è·¯å¾„</p>
<p>5.æœåŠ¡å™¨ä¼šåˆ›å»ºservletå¯¹è±¡ï¼Œï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ï¼Œåˆ›å»ºservletå®ä¾‹ï¼Œå¹¶è°ƒç”¨initæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼‰</p>
<p>6.è°ƒç”¨serviceï¼ˆrequestï¼Œ responseï¼‰æ–¹æ³•æ¥å¤„ç†è¯·æ±‚å’Œå“åº”çš„æ“ä½œ</p>
<p>7.è°ƒç”¨serviceå®Œæ¯•åè¿”å›æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨å°†responseç¼“å†²åŒºçš„æ•°æ®å–å‡ºï¼Œä»¥httpå“åº”çš„æ ¼å¼å‘é€ç»™æµè§ˆå™¨</p>
<h3 id="5-servletå·¥ä½œæ¨¡å¼"><a href="#5-servletå·¥ä½œæ¨¡å¼" class="headerlink" title="5.servletå·¥ä½œæ¨¡å¼"></a>5.servletå·¥ä½œæ¨¡å¼</h3><ul>
<li>å®¢æˆ·ç«¯å‘é€è¯·æ±‚è‡³æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨å¯åŠ¨å¹¶è°ƒç”¨Servletï¼ŒServletæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚ç”Ÿæˆå“åº”å†…å®¹å¹¶å°†å…¶ä¼ ç»™æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨å°†å“åº”è¿”å›å®¢æˆ·ç«¯</li>
</ul>
<h3 id="6-servletç”Ÿå‘½å‘¨æœŸ"><a href="#6-servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.servletç”Ÿå‘½å‘¨æœŸ"></a>6.servletç”Ÿå‘½å‘¨æœŸ</h3><p>Servletæ²¡æœ‰ main()æ–¹æ³•ï¼Œä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œå®ƒçš„è¿è¡Œå®Œå…¨ç”± Servlet å¼•æ“æ¥æ§åˆ¶å’Œè°ƒåº¦ã€‚ æ‰€è°“ç”Ÿå‘½å‘¨æœŸï¼ŒæŒ‡çš„æ˜¯servlet å®¹å™¨ä½•æ—¶åˆ›å»º servlet å®ä¾‹ã€ä½•æ—¶è°ƒç”¨å…¶æ–¹æ³•è¿›è¡Œè¯·æ±‚çš„å¤„ç†ã€ ä½•æ—¶å¹¶é”€æ¯å…¶å®ä¾‹çš„æ•´ä¸ªè¿‡ç¨‹ã€‚</p>
<ol>
<li>å®ä¾‹å’Œåˆå§‹åŒ–æ—¶æœºï¼ˆç±»åŠ è½½å’Œå®åŠ›åŒ–ï¼‰<br>å½“è¯·æ±‚åˆ°è¾¾å®¹å™¨æ—¶ï¼Œå®¹å™¨æŸ¥æ‰¾è¯¥ servlet å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ›å»ºå®ä¾‹å¹¶è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
<li>å°±ç»ª/è°ƒç”¨/æœåŠ¡é˜¶æ®µ<br>æœ‰è¯·æ±‚åˆ°è¾¾å®¹å™¨ï¼Œå®¹å™¨è°ƒç”¨ servlet å¯¹è±¡çš„ service()æ–¹æ³•,å¤„ç†è¯·æ±‚çš„æ–¹æ³•åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼›<br>HttpServlet çš„ service()æ–¹æ³•ï¼Œä¼šä¾æ®è¯·æ±‚æ–¹å¼æ¥è°ƒç”¨ doGet()æˆ–è€… doPost()æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œ è¿™ä¸¤ä¸ª do æ–¹æ³•é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦å­ç±»å» overrideã€‚</li>
<li>é”€æ¯æ—¶æœº<br>å½“å®¹å™¨å…³é—­æ—¶ï¼ˆåº”ç”¨ç¨‹åºåœæ­¢æ—¶ï¼‰ï¼Œä¼šå°†ç¨‹åºä¸­çš„ Servlet å®ä¾‹è¿›è¡Œé”€æ¯ã€‚</li>
</ol>
<p>ä¸Šè¿°çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥é€šè¿‡ Servlet ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è§‚å¯Ÿã€‚åœ¨ Servlet ä¸­æœ‰ä¸‰ä¸ªç”Ÿå‘½å‘¨ æœŸæ–¹æ³•ï¼Œä¸ç”±ç”¨æˆ·æ‰‹åŠ¨è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„æ—¶æœºç”±å®¹å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œè§‚å¯Ÿè¿™ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³• å³å¯è§‚å¯Ÿåˆ° Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>1âƒ£ï¸ init æ–¹æ³•ï¼Œåœ¨ Servlet å®ä¾‹åˆ›å»ºä¹‹åæ‰§è¡Œï¼ˆè¯æ˜è¯¥ Servlet æœ‰å®ä¾‹åˆ›å»ºäº†ï¼‰</p>
<p>2âƒ£ï¸service æ–¹æ³•ï¼Œæ¯æ¬¡æœ‰è¯·æ±‚åˆ°è¾¾æŸä¸ª Servlet æ–¹æ³•æ—¶æ‰§è¡Œï¼Œç”¨æ¥å¤„ç†è¯·æ±‚ï¼ˆè¯æ˜è¯¥Servlet è¿›è¡ŒæœåŠ¡äº†ï¼‰</p>
<p>3âƒ£ï¸destroy æ–¹æ³•ï¼ŒServlet å®ä¾‹é”€æ¯æ—¶æ‰§è¡Œï¼ˆè¯æ˜è¯¥ Servlet çš„å®ä¾‹è¢«é”€æ¯äº†ï¼‰</p>
<p>Servlet çš„ç”Ÿå‘½å‘¨æœŸï¼Œç®€å•çš„æ¦‚æ‹¬è¿™å°±åˆ†ä¸ºå››æ­¥ï¼šservlet ç±»åŠ è½½â€“&gt;å®ä¾‹åŒ–â€“&gt;æœåŠ¡â€“&gt;é”€æ¯ã€‚<br>ä¸‹é¢æè¿°ä¸€ä¸‹ Tomcat ä¸ Servlet æ˜¯å¦‚ä½•å·¥ä½œçš„,çœ‹çœ‹ä¸‹é¢çš„æ—¶åºå›¾ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/95e97377049b47058831a2b7cbfe442d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFkZWxsbGx4eHg=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<ol>
<li>Web Client å‘ Servlet å®¹å™¨ï¼ˆTomcatï¼‰å‘å‡º Http è¯·æ±‚</li>
<li>Servlet å®¹å™¨æ¥æ”¶ Web Client çš„è¯·æ±‚</li>
<li>Servlet å®¹å™¨åˆ›å»ºä¸€ä¸ª HttpServletRequest å¯¹è±¡ï¼Œå°† Web Client è¯·æ±‚çš„ä¿¡æ¯å°è£…åˆ°è¿™ä¸ªå¯¹è±¡ ä¸­</li>
<li>Servlet å®¹å™¨åˆ›å»ºä¸€ä¸ª HttpServletResponse å¯¹è±¡</li>
<li>Servlet å®¹å™¨è°ƒHttpServlet å¯¹è±¡service æ–¹æ³•ï¼ŒæŠŠ Request ä¸ Response ä½œä¸ºå‚æ•°ï¼Œä¼ ç»™ HttpServlet</li>
<li>HttpServlet è°ƒç”¨ HttpServletRequest å¯¹è±¡çš„æœ‰å…³æ–¹æ³•ï¼Œè·å– Http è¯·æ±‚ä¿¡æ¯</li>
<li>HttpServlet è°ƒç”¨ HttpServletResponse å¯¹è±¡çš„æœ‰å…³æ–¹æ³•ï¼Œç”Ÿæˆå“åº”æ•°æ®</li>
<li>Servlet å®¹å™¨æŠŠ HttpServlet çš„å“åº”ç»“æœä¼ ç»™ Web Client</li>
</ol>
<h3 id="7-å½¢å‚ï¼šHttpServletRequestå¯¹è±¡"><a href="#7-å½¢å‚ï¼šHttpServletRequestå¯¹è±¡" class="headerlink" title="7.å½¢å‚ï¼šHttpServletRequestå¯¹è±¡"></a>7.å½¢å‚ï¼šHttpServletRequestå¯¹è±¡</h3><p>HttpServletRequest å¯¹è±¡ï¼šä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥æ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šè¯·æ±‚çš„å‚æ•°ï¼Œå‘é€çš„å¤´ä¿¡æ¯ç­‰éƒ½å±äºå®¢æˆ·ç«¯å‘æ¥çš„ä¿¡æ¯ï¼Œservice()æ–¹æ³•ä¸­å½¢å‚æ¥æ”¶çš„HttpServletRequest æ¥å£çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡ä¸»è¦åº”ç”¨åœ¨ HTTP åè®®ä¸Šï¼Œè¯¥å¯¹è±¡æ˜¯ç”± Tomcat å°è£…å¥½ä¼ é€’è¿‡æ¥ã€‚</p>
<p>HttpServletRequest æ˜¯ ServletRequest çš„å­æ¥å£ï¼ŒServletRequest åªæœ‰ä¸€ä¸ªå­æ¥å£ï¼Œå°±æ˜¯ HttpServletRequestã€‚æ—¢ç„¶åªæœ‰ä¸€ä¸ªå­æ¥å£ä¸ºä»€ä¹ˆä¸å°†ä¸¤ä¸ªæ¥å£åˆå¹¶ä¸ºä¸€ä¸ªï¼Ÿ<br>ä»é•¿è¿œä¸Šè®²ï¼šç°åœ¨ä¸»è¦ç”¨çš„åè®®æ˜¯ HTTP åè®®ï¼Œä½†ä»¥åå¯èƒ½å‡ºç°æ›´å¤šæ–°çš„åè®®ã€‚è‹¥ä»¥åæƒ³è¦æ”¯æŒè¿™ç§æ–°åè®®ï¼Œåªéœ€è¦ç›´æ¥ç»§æ‰¿ ServletRequest æ¥å£å°±è¡Œäº†ã€‚</p>
<p>åœ¨ HttpServletRequest æ¥å£ä¸­ï¼Œå®šä¹‰çš„æ–¹æ³•å¾ˆå¤šï¼Œä½†éƒ½æ˜¯å›´ç»•æ¥æ”¶å®¢æˆ·ç«¯å‚æ•°çš„ã€‚ä½†æ˜¯æ€ä¹ˆæ‹¿åˆ°è¯¥å¯¹è±¡å‘¢ï¼Ÿä¸éœ€è¦ï¼Œç›´æ¥åœ¨ Service æ–¹æ³•ä¸­ç”±å®¹å™¨ä¼ å…¥è¿‡æ¥ï¼Œè€Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å–å‡ºå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œè¿›è¡Œåˆ†æã€å¤„ç†ã€‚</p>
<h4 id="æ¥æ”¶è¯·æ±‚"><a href="#æ¥æ”¶è¯·æ±‚" class="headerlink" title="æ¥æ”¶è¯·æ±‚"></a>æ¥æ”¶è¯·æ±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-20 09:41</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser03&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet3</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å¸¸ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ—¶çš„å®Œæ•´è·¯å¾„ï¼ˆä»httpå¼€å§‹ï¼Œåˆ°ï¼Ÿå‰é¢ç»“æŸï¼‰</span></span><br><span class="line">        String url = req.getRequestURL() +<span class="string">&quot;&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;url:&quot;</span>+url);</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ—¶çš„éƒ¨åˆ†è·¯å¾„ï¼ˆä»é¡¹ç›®çš„ç«™ç‚¹åç§°å¼€å§‹ï¼Œåˆ°ï¼Ÿå‰é¢ç»“æŸï¼‰</span></span><br><span class="line">        String uri = req.getRequestURI();</span><br><span class="line">        System.out.println(<span class="string">&quot;uri:&quot;</span>+uri);</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ—¶çš„å‚æ•°å­—ç¬¦ä¸²ï¼ˆä»ï¼Ÿå¼€å§‹ï¼‰</span></span><br><span class="line">        String queryString = req.getQueryString();</span><br><span class="line">        System.out.println(<span class="string">&quot;queryString:&quot;</span>+queryString);</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ–¹å¼</span></span><br><span class="line">        String method = req.getMethod();</span><br><span class="line">        System.out.println(<span class="string">&quot;method:&quot;</span>+method);</span><br><span class="line">        <span class="comment">// è·å–å½“å‰åè®®ç‰ˆæœ¬</span></span><br><span class="line">        String protocol = req.getProtocol();</span><br><span class="line">        System.out.println(<span class="string">&quot;protocol:&quot;</span>+protocol);</span><br><span class="line">        <span class="comment">// è·å–é¡¹ç›®çš„ç«™ç‚¹å</span></span><br><span class="line">        String webApp = req.getContextPath();</span><br><span class="line">        System.out.println(<span class="string">&quot;webApp:&quot;</span>+webApp);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è·å–è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line"><span class="comment">         * http://localhost:8080/servlet_demo/ser03?uname=lili&amp;upwd=lslsls&amp;input=111&amp;input=222&amp;input=333</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// è·å–æŒ‡å®šåç§°çš„å‚æ•°å€¼,è¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line">        String uname = req.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        String upwd = req.getParameter(<span class="string">&quot;upwd&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;uname:&quot;</span>+uname);</span><br><span class="line">        System.out.println(<span class="string">&quot;upwd:&quot;</span>+upwd);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æŒ‡å®šåç§°çš„å‚æ•°çš„æ‰€æœ‰å‚æ•°å€¼,è¿”å›å­—ç¬¦ä¸²æ•°ç»„ï¼ˆç”¨äºå¤é€‰æ¡†ä¼ å€¼ï¼‰</span></span><br><span class="line">        String[] strings = req.getParameterValues(<span class="string">&quot;input&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(strings != <span class="keyword">null</span> &amp;&amp; strings.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(String s : strings)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;strings:&quot;</span>+s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è¯·æ±‚ä¹±ç é—®é¢˜"><a href="#è¯·æ±‚ä¹±ç é—®é¢˜" class="headerlink" title="è¯·æ±‚ä¹±ç é—®é¢˜"></a>è¯·æ±‚ä¹±ç é—®é¢˜</h4><p>ç”±äºç°åœ¨çš„ request å±äºæ¥æ”¶å®¢æˆ·ç«¯çš„å‚æ•°ï¼Œæ‰€ä»¥å¿…ç„¶æœ‰å…¶é»˜è®¤çš„è¯­è¨€ç¼–ç ï¼Œä¸»è¦æ˜¯ç”±äºåœ¨è§£æè¿‡ç¨‹ä¸­é»˜è®¤ä½¿ç”¨çš„ç¼–ç æ–¹å¼ä¸º ISO-8859-1(æ­¤ç¼–ç ä¸æ”¯æŒä¸­æ–‡)ï¼Œæ‰€ä»¥è§£ææ—¶ä¸€å®šä¼šå‡ºç°ä¹±ç ã€‚è¦æƒ³è§£å†³è¿™ç§ä¹±ç é—®é¢˜ï¼Œéœ€è¦è®¾ç½®request ä¸­çš„ç¼–ç æ–¹å¼ï¼Œå‘Šè¯‰æœåŠ¡å™¨ä»¥ä½•ç§æ–¹å¼æ¥è§£ææ•°æ®ã€‚æˆ–è€…åœ¨æ¥æ”¶åˆ°ä¹±ç æ•°æ®ä»¥åï¼Œå†é€šè¿‡ç›¸åº”çš„ç¼–ç æ ¼å¼è¿˜åŸã€‚<br>æ–¹å¼ä¸€ï¼š</p>
<p><code>String nuname = new String(request.getParameter(name).getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;); </code></p>
<p>å€ŸåŠ©äº†String å¯¹è±¡çš„æ–¹æ³•ï¼Œè¯¥ç§æ–¹å¼å¯¹ä»»ä½•è¯·æ±‚æœ‰æ•ˆï¼Œæ˜¯é€šç”¨çš„ã€‚ä½†æ˜¯åŸæœ¬ä¸æ˜¯ä¹±ç çš„ï¼Œä½¿ç”¨çš„è¯ä¼šå‡ºç°ä¹±ç ã€‚<br>Tomcat8èµ·ï¼Œä»¥åçš„GETæ–¹å¼è¯·æ±‚æ˜¯ä¸ä¼šå‡ºç°ä¹±ç çš„ã€‚POSTè¯·æ±‚æ˜¯ä¼šä¹±ç çš„ã€‚</p>
<p>ç”¨JSPè¿›è¡Œpostè¯·æ±‚è¡¨å•æäº¤ï¼šæ–°å»ºlogin.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;ç™»å½•&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;ser03&quot;</span>&gt;</span><br><span class="line">        å§“åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;uname&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        å¯†ç ï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;upwd&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        &lt;button&gt;ç™»å½•&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8080/servlet_demo/login.jsp">http://localhost:8080/servlet_demo/login.jsp</a></p>
<p>æ–¹å¼äºŒï¼šé€šè¿‡è®¾ç½®æœåŠ¡å™¨è§£æç¼–ç çš„æ ¼å¼ï¼ˆåªé’ˆå¯¹postè¯·æ±‚ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®ç¼–ç æ ¼å¼</span></span><br><span class="line">req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);	</span><br></pre></td></tr></table></figure>

<h4 id="è¯·æ±‚è½¬å‘"><a href="#è¯·æ±‚è½¬å‘" class="headerlink" title="è¯·æ±‚è½¬å‘"></a>è¯·æ±‚è½¬å‘</h4><p>è¯·æ±‚è½¬å‘ï¼Œæ˜¯ä¸€ç§æœåŠ¡å™¨çš„è¡Œä¸ºï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾åï¼ŒæœåŠ¡å™¨è¿›è¡Œè½¬å‘ï¼Œæ­¤æ—¶ä¼šå°†è¯·æ±‚å¯¹è±¡è¿›è¡Œä¿å­˜ï¼Œåœ°å€æ ä¸­çš„ URL åœ°å€ä¸ä¼šæ”¹å˜ï¼Œå¾—åˆ°å“åº”åï¼ŒæœåŠ¡å™¨ç«¯å†å°†å“åº”å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä»å§‹è‡³ç»ˆåªæœ‰ä¸€ä¸ªè¯·æ±‚å‘å‡ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-20 21:34</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚è½¬å‘è·³è½¬</span></span><br><span class="line"><span class="comment"> * å¯ä»¥è®©è¯·æ±‚ä»æœåŠ¡ç«¯è·³è½¬åˆ°å®¢æˆ·ç«¯å³jspï¼ˆæˆ–è·³è½¬åˆ°æŒ‡å®šServletï¼‰æœåŠ¡å™¨è¡Œä¸º</span></span><br><span class="line"><span class="comment"> * ç‰¹ç‚¹ï¼š1ã€‚æœåŠ¡ç«¯è¡Œä¸º 2ã€‚åœ°å€æ ä¸ä¼šå‘ç”Ÿæ”¹å˜</span></span><br><span class="line"><span class="comment"> * 3ã€‚ä»å§‹è‡³ç»ˆåªæœ‰ä¸€ä¸ªè¯·æ±‚ 4ã€‚requestæ•°æ®å¯ä»¥å…±äº«</span></span><br><span class="line"><span class="comment"> * åªèƒ½è·³ä¸€æ¬¡</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser04&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet4</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">        String uname = req.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ser04 uname:&quot;</span>+uname);</span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘è·³è½¬åˆ°ser03</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;ser03&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="requestä½œç”¨åŸŸ"><a href="#requestä½œç”¨åŸŸ" class="headerlink" title="requestä½œç”¨åŸŸ"></a><strong>requestä½œç”¨åŸŸ</strong></h4><p>é€šè¿‡è¯¥å¯¹è±¡å¯ä»¥åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­ä¼ é€’æ•°æ®ï¼Œä½œç”¨èŒƒå›´ï¼šåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆï¼Œå³æœåŠ¡å™¨è·³è½¬æœ‰æ•ˆã€‚ï¼ˆè¯·æ±‚è½¬å‘è·³è½¬æ—¶æœ‰æ•ˆï¼Œç›´æ¥è®¿é—®è·³è½¬çš„urlæ— æ•ˆï¼‰ã€‚ä½œç”¨åŸŸåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­ï¼Œåœ¨è¯·æ±‚è½¬å‘è¿‡ç¨‹ä¸­é€šè¿‡requestæ¥ä¼ è¾“/å…±äº«æ•°æ®ã€‚</p>
<p>Ser05ï¼Œå‡†å¤‡ç”¨æ¥è¯·æ±‚è½¬å‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-20 21:34</span></span><br><span class="line"><span class="comment"> * requestä½œç”¨åŸŸ</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser05&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet5</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®åŸŸå¯¹è±¡</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘å¹¶è·³è½¬åˆ°Servlet6ï¼Œå…±äº«åŒä¸€ä¸ªreqå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//req.getRequestDispatcher(&quot;ser06&quot;).forward(req, resp);</span></span><br><span class="line">        <span class="comment">// ä¸€èˆ¬æ˜¯ä»å®¢æˆ·ç«¯è·å–æ•°æ®ï¼Œæ‰€ä»¥è·³è½¬åˆ°jspå®¢æˆ·ç«¯</span></span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘è·³è½¬åˆ°jspï¼Œå¹¶é€šè¿‡åŸŸå¯¹è±¡ä¼ é€’æ•°æ®</span></span><br><span class="line">        <span class="comment">// htmlå°±ä¸è¡Œï¼Œå› ä¸ºæ˜¯é™æ€é¡µé¢ï¼Œè€Œjspæ˜¯åŠ¨æ€é¡µé¢</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;attribute.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·³è½¬åˆ°ser06</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-20 21:34</span></span><br><span class="line"><span class="comment"> * requestä½œç”¨åŸŸ</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser06&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet6</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–åŸŸå¯¹è±¡</span></span><br><span class="line">        String name = (String) req.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;nameï¼š&quot;</span> + name);</span><br><span class="line">        List&lt;String&gt; list = (List&lt;String&gt;) req.getAttribute(<span class="string">&quot;list&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·³è½¬åˆ°jspï¼š</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;attributeé¡µé¢&lt;/h2&gt;</span><br><span class="line">&lt;%-- å¦‚æœè¦åœ¨jspä¸­å†™javaä»£ç ï¼Œéœ€è¦å†™åœ¨è„šæœ¬æ®µä¸­ --%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">// è·å–åŸŸå¯¹è±¡</span></span><br><span class="line">    String name = (String) request.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;nameï¼š&quot;</span> + name);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h3 id="8-å½¢å‚ï¼šHttpServletResponseå¯¹è±¡"><a href="#8-å½¢å‚ï¼šHttpServletResponseå¯¹è±¡" class="headerlink" title="8.å½¢å‚ï¼šHttpServletResponseå¯¹è±¡"></a>8.å½¢å‚ï¼š<strong>HttpServletResponseå¯¹è±¡</strong></h3><p>WebæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„httpè¯·æ±‚ï¼Œä¼šé’ˆå¯¹æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªç”¨äºä»£è¡¨è¯·æ±‚çš„ request å¯¹è±¡å’Œä»£è¡¨å“åº”çš„ response å¯¹è±¡ã€‚<br>request å’Œ response å¯¹è±¡ä»£è¡¨è¯·æ±‚å’Œå“åº”ï¼šè·å–å®¢æˆ·ç«¯æ•°æ®ï¼Œéœ€è¦é€šè¿‡ request å¯¹è±¡ï¼›å‘å®¢æˆ·ç«¯è¾“å‡ºæ•°æ®ï¼Œéœ€è¦é€šè¿‡ response å¯¹è±¡ã€‚</p>
<p>HttpServletResponse çš„ä¸»è¦åŠŸèƒ½ç”¨äºæœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚è¿›è¡Œå“åº”ï¼Œå°† Web æœåŠ¡å™¨å¤„ç†åçš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚service()æ–¹æ³•ä¸­å½¢å‚æ¥æ”¶çš„æ˜¯ HttpServletResponse æ¥å£çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­å°è£…äº†å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€å‘é€å“åº”å¤´ï¼Œå‘é€å“åº”çŠ¶æ€ç çš„æ–¹æ³•ã€‚</p>
<h4 id="å“åº”æ•°æ®"><a href="#å“åº”æ•°æ®" class="headerlink" title="å“åº”æ•°æ®"></a>å“åº”æ•°æ®</h4><p>æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œå¯ä»¥é€šè¿‡ HttpServletResponse å¯¹è±¡ç›´æ¥è¿›è¡Œå“åº”ï¼Œå“åº”æ—¶éœ€è¦è·å–è¾“å‡ºæµã€‚æœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<p>getWriter() è·å–å­—ç¬¦æµ(åªèƒ½å“åº”å­—ç¬¦) </p>
<p>getOutputStream() è·å–å­—èŠ‚æµ(èƒ½å“åº”ä¸€åˆ‡æ•°æ®)</p>
<p>å“åº”å›çš„æ•°æ®åˆ°å®¢æˆ·ç«¯è¢«æµè§ˆå™¨è§£æã€‚<br>æ³¨æ„ï¼šä¸¤è€…ä¸èƒ½åŒæ—¶ä½¿ç”¨ã€‚ä¸€ä¸ªæ–‡ä»¶é‡Œåªèƒ½ç”¨ä¸€ä¸ªï¼Œå› ä¸ºresponseåªæœ‰ä¸€ä¸ªã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-22 08:50</span></span><br><span class="line"><span class="comment"> * getWriter() å­—ç¬¦è¾“å‡ºæµ(è¾“å‡ºå­—ç¬¦ä¸²)</span></span><br><span class="line"><span class="comment"> * getOutputStream() å­—èŠ‚è¾“å‡ºæµ(è¾“å‡ºä¸€åˆ‡æ•°æ®)</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser07&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet7</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">//        // getWriteè·å–å­—ç¬¦è¾“å‡ºæµ</span></span><br><span class="line"><span class="comment">//        PrintWriter writer = resp.getWriter();</span></span><br><span class="line"><span class="comment">//        // è¾“å‡ºæ•°æ®</span></span><br><span class="line"><span class="comment">//        writer.write(&quot;hello&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// getOutputStreamå­—èŠ‚è¾“å‡ºæµ</span></span><br><span class="line">        ServletOutputStream out = resp.getOutputStream();</span><br><span class="line">        <span class="comment">// è¾“å‡ºæ•°æ®</span></span><br><span class="line">        out.write(<span class="string">&quot;hi&quot;</span>.getBytes());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å“åº”ä¹±ç é—®é¢˜"><a href="#å“åº”ä¹±ç é—®é¢˜" class="headerlink" title="å“åº”ä¹±ç é—®é¢˜"></a>å“åº”ä¹±ç é—®é¢˜</h4><p>åœ¨å“åº”ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å“åº”çš„å†…å®¹ä¸­å«æœ‰ä¸­æ–‡ï¼Œåˆ™æœ‰å¯èƒ½å‡ºç°ä¹±ç ã€‚è¿™æ˜¯å› ä¸ºæœåŠ¡å™¨å“åº”çš„æ•°æ®ä¹Ÿä¼šç»è¿‡ç½‘ç»œä¼ è¾“ï¼ŒæœåŠ¡å™¨ç«¯æœ‰ä¸€ç§ç¼–ç æ–¹å¼ï¼Œåœ¨å®¢æˆ·ç«¯ä¹Ÿå­˜åœ¨ä¸€ç§ç¼–ç æ–¹å¼ï¼Œå½“ä¸¤ç«¯ä½¿ç”¨çš„ç¼–ç æ–¹å¼ä¸åŒæ—¶åˆ™å‡ºç°ä¹±ç ã€‚</p>
<p>getWriter()çš„å­—ç¬¦ä¹±ç <br>å¯¹äº getWriter()è·å–åˆ°çš„å­—ç¬¦æµï¼Œå“åº”ä¸­æ–‡å¿…å®šå‡ºä¹±ç ï¼Œç”±äºæœåŠ¡å™¨ç«¯åœ¨è¿›è¡Œç¼–ç æ—¶é»˜è®¤ä¼šä½¿ç”¨ ISO-8859-1 æ ¼å¼çš„ç¼–ç ï¼Œè¯¥ç¼–ç æ–¹å¼å¹¶ä¸æ”¯æŒä¸­æ–‡ã€‚</p>
<p>è¦è§£å†³è¯¥ç§ä¹±ç åªèƒ½åœ¨æœåŠ¡å™¨ç«¯å‘ŠçŸ¥æœåŠ¡å™¨ä½¿ç”¨ä¸€ç§èƒ½å¤Ÿæ”¯æŒä¸­æ–‡çš„ç¼–ç æ ¼å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬é€šå¸¸ç”¨çš„â€UTF-8â€ã€‚</p>
<p>å®¢æˆ·ç«¯ä¹Ÿè¦è®¾ç½®ï¼Œå­—èŠ‚è¾“å‡ºæµå¯ä»¥è®¾ç½®å“åº”ç±»å‹ï¼Œé»˜è®¤æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®æœåŠ¡ç«¯çš„ç¼–ç æ ¼å¼</span></span><br><span class="line">resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®å®¢æˆ·ç«¯çš„ç¼–ç æ ¼å¼å’Œå“åº”ç±»å‹</span></span><br><span class="line">resp.setHeader(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);       </span><br></pre></td></tr></table></figure>

<p>å­—ç¬¦è¾“å‡ºæµä¹Ÿä¸€æ ·ã€‚</p>
<p>ä¹Ÿå¯ä»¥åŒæ—¶è®¾ç½®å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç¼–ç æ ¼å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒæ—¶è®¾ç½®æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ç¼–ç æ ¼å¼</span></span><br><span class="line">resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼šè¦æƒ³è§£å†³å“åº”çš„ä¹±ç ï¼Œåªéœ€è¦ä¿è¯ä½¿ç”¨æ”¯æŒä¸­æ–‡çš„ç¼–ç æ ¼å¼ã€‚å¹¶ä¸”ä¿è¯æœåŠ¡å™¨ç«¯ å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„ç¼–ç æ–¹å¼å³å¯ã€‚</p>
<h4 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h4><p>é‡å®šå‘æ˜¯ä¸€ç§æœåŠ¡å™¨æŒ‡å¯¼ï¼Œå®¢æˆ·ç«¯çš„è¡Œä¸ºã€‚å®¢æˆ·ç«¯å‘å‡ºç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œè¢«æœåŠ¡å™¨æ¥æ”¶å¤„ç†åï¼ŒæœåŠ¡å™¨ä¼šè¿›è¡Œå“åº”ï¼Œåœ¨å“åº”çš„åŒæ—¶ï¼ŒæœåŠ¡å™¨ä¼šç»™å®¢æˆ·ç«¯ä¸€ä¸ªæ–°çš„åœ°å€ï¼ˆä¸‹æ¬¡è¯·æ±‚çš„åœ°å€ response.sendRedirect(url);ï¼‰ï¼Œå½“å®¢æˆ·ç«¯æ¥æ”¶åˆ°å“åº”åï¼Œä¼šç«‹åˆ»ã€é©¬ä¸Šã€è‡ªåŠ¨æ ¹æ®æœåŠ¡å™¨ç»™çš„æ–°åœ°å€å‘èµ·ç¬¬äºŒä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶ä½œå‡ºå“åº”ï¼Œé‡å®šå‘å®Œæˆã€‚<br>ä»æè¿°ä¸­å¯ä»¥çœ‹å‡ºé‡å®šå‘å½“ä¸­æœ‰ä¸¤ä¸ªè¯·æ±‚å­˜åœ¨ï¼Œå¹¶ä¸”å±äºå®¢æˆ·ç«¯è¡Œä¸ºã€‚</p>
<p>ç‰¹ç‚¹ï¼š<br>æœåŠ¡ç«¯æŒ‡å¯¼ï¼Œå®¢æˆ·ç«¯è¡Œä¸º<br>å­˜åœ¨ä¸¤æ¬¡è¯·æ±‚<br> requestå¯¹è±¡ä¸å…±äº«</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-22 08:50</span></span><br><span class="line"><span class="comment"> * é‡å®šå‘ 302</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser08&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet8</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ser08&quot;</span>);</span><br><span class="line">        String uname = req.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ser08:&quot;</span>+uname);</span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;ser07&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è§‚å¯Ÿæµè§ˆå™¨æˆ‘ä»¬å‘ç°ç¬¬ä¸€æ¬¡è¯·æ±‚è·å¾—çš„å“åº”ç ä¸º 302ï¼Œå¹¶ä¸”å«æœ‰ä¸€ä¸ª location å¤´ä¿¡æ¯ã€‚å¹¶ä¸”åœ°å€æ æœ€ç»ˆçœ‹åˆ°çš„åœ°å€æ˜¯å’Œç¬¬ä¸€æ¬¡è¯·æ±‚åœ°å€ä¸åŒçš„ï¼Œåœ°å€æ å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<h4 id="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«"><a href="#è¯·æ±‚è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«" class="headerlink" title="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«"></a><strong>è¯·æ±‚è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«</strong></h4><p><img src="https://img-blog.csdnimg.cn/60cc937f78be4bff8e93f84aebea79f2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFkZWxsbGx4eHg=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>å¯¹äºè¯·æ±‚è½¬å‘ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå‰ç«¯é¡µé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œreq.getAttributeè·å–å‚æ•°ï¼Œæˆ–æ˜¯req.setAttributeè®¾ç½®å‚æ•°ï¼Œä½¿ç”¨è¯·æ±‚è½¬å‘å¯ä»¥å°†å‚æ•°ä¼ é€’åˆ°jspé¡µé¢ï¼Œjspé¡µé¢ä½¿ç”¨req.getAttributeè¿›è¡Œè·å–ã€‚</p>
<p>è€Œé‡å®šå‘æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œä¸¤ä¸ªé¡µé¢ä¹‹é—´æ²¡æœ‰å‚æ•°ä¼ é€’ã€‚</p>
<p>è¯·æ±‚è½¬å‘çš„åœ°å€åªèƒ½æ˜¯å½“å‰ç«™ç‚¹ä¸‹ï¼ˆå­—ç¬¦ä¸²å‚æ•°å°±æ˜¯åŠ è½½é¡¹ç›®æ ¹ç›®å½•åé¢çš„å­—ç¬¦ä¸²ï¼‰ï¼Œé‡å®šå‘åœ°å€å¯ä»¥æ˜¯ä»»æ„åœ°å€ã€‚è·¨åŸŸè·³è½¬åªèƒ½ç”¨é‡å®šå‘ã€‚</p>
<h3 id="9-cookie"><a href="#9-cookie" class="headerlink" title="9.cookie"></a>9.cookie</h3><p>webç¨‹åºä½¿ç”¨httpåè®®ä¼ è¾“ï¼Œhttpæ— çŠ¶æ€ï¼Œå¯¼è‡´æ¯ä¸€æ¬¡è¿æ¥ä¼ è¾“çš„æ•°æ®é‡å¢å¤§ã€‚æœåŠ¡å™¨ä»ç½‘ç»œè¿æ¥ä¸­æ— æ³•è·å¾—å®¢æˆ·ç«¯èº«ä»½ï¼Œcookieç›¸å½“äºæ˜¯æœåŠ¡ç«¯é¢å‘ç»™å®¢æˆ·ç«¯çš„é€šè¡Œè¯ã€‚ä¸åŒçš„æœåŠ¡å™¨åº”ç”¨ç»™å®¢æˆ·ç«¯çš„cookieä¹Ÿä¸ä¸€æ ·ï¼Œæ˜¯éš”ç¦»çš„ã€‚</p>
<p>cookieæ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ç§æŠ€æœ¯ï¼Œé€šè¿‡æœåŠ¡å™¨çš„ç¨‹åºèƒ½å°†ä¸€äº›åªé¡»ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæˆ–è€…åœ¨å®¢æˆ·ç«¯è¿›è¡Œå¤„ç†çš„æ•°æ®ï¼Œæ”¾åœ¨æœ¬åœ°çš„è®¡ç®—æœºä¸Šï¼Œä¸éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå› è€Œæé«˜ç½‘é¡µå¤„ç†çš„æ•ˆç‡ï¼Œå¹¶ä¸”èƒ½å¤Ÿå‡å°‘æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œä½†æ˜¯ç”±äºcookieæ˜¯æœåŠ¡å™¨ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å…¶å®‰å…¨æ€§ä¹Ÿæ˜¯å¾ˆå·®çš„ã€‚ä¾‹å¦‚å¸¸è§çš„è®°ä½å¯†ç åˆ™å¯ä»¥é€šè¿‡cookieæ¥å®ç°ï¼Œè¿˜æœ‰é€šå¸¸çš„æ¨èæ˜¾ç¤ºã€‚</p>
<p>æœ‰ä¸€ä¸ªä¸“é—¨æ“ä½œCookieçš„ç±»javax.servlet.http.Cookieã€‚éšç€æœåŠ¡å™¨ç«¯çš„å“åº”å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä¿å­˜åœ¨æµè§ˆå™¨ã€‚å½“ä¸‹æ¬¡å†è®¿é—®æœåŠ¡å™¨æ—¶æŠŠCookieå†å¸¦å›æœåŠ¡å™¨ã€‚</p>
<p>Cookieçš„æ ¼å¼ï¼šé”®å€¼å¯¹ç”¨=è¿æ¥ï¼Œå¤šä¸ªé”®å€¼å¯¹é—´ç”¨;éš”å¼€ã€‚</p>
<h4 id="cookieçš„åˆ›å»ºå’Œå‘é€"><a href="#cookieçš„åˆ›å»ºå’Œå‘é€" class="headerlink" title="cookieçš„åˆ›å»ºå’Œå‘é€"></a>cookieçš„åˆ›å»ºå’Œå‘é€</h4><p>é€šè¿‡ new Cookie(â€œkeyâ€,â€œvalueâ€);æ¥åˆ›å»ºä¸€ä¸ª Cookie å¯¹è±¡ï¼Œè¦æƒ³å°† Cookie éšå“åº”å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œéœ€è¦å…ˆæ·»åŠ åˆ° response å¯¹è±¡ä¸­ï¼Œresponse.addCookie(cookie);æ­¤æ—¶è¯¥ cookie å¯¹è±¡åˆ™éšç€å“åº”å‘é€è‡³äº†å®¢æˆ·ç«¯ã€‚åœ¨æµè§ˆå™¨ä¸Šå¯ä»¥çœ‹è§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-26 11:04</span></span><br><span class="line"><span class="comment"> * cookieçš„åˆ›å»ºå’Œå‘é€</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/coo1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cookie01</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºcookie nameå”¯ä¸€</span></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="comment">// å‘é€ï¼ˆå“åº”ï¼‰cookie</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>macæµè§ˆå™¨æ£€æŸ¥cookieï¼šå³é”®æ£€æŸ¥å…ƒç´ â€“å‚¨å­˜ç©ºé—´â€“ç‚¹å‡»cookie</p>
<h4 id="cookieçš„è·å–"><a href="#cookieçš„è·å–" class="headerlink" title="cookieçš„è·å–"></a>cookieçš„è·å–</h4><p>åœ¨æœåŠ¡å™¨ç«¯åªæä¾›äº†ä¸€ä¸ª getCookies()çš„æ–¹æ³•ç”¨æ¥è·å–å®¢æˆ·ç«¯å›ä¼ çš„æ‰€æœ‰ cookie ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœéœ€è¦è·å–å• ä¸ª cookie åˆ™éœ€è¦é€šè¿‡éå†ï¼ŒgetName()è·å– Cookie çš„åç§°ï¼ŒgetValue()è·å– Cookie çš„å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-26 11:04</span></span><br><span class="line"><span class="comment"> * cookieçš„è¿”å›ï¼Œæ˜¯æ•°ç»„</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/coo2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cookie02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–cookieæ•°ç»„</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="comment">// éç©ºåˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span>(cookies != <span class="keyword">null</span> &amp;&amp; cookies.length &gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// éå†cookieæ•°ç»„</span></span><br><span class="line">            <span class="keyword">for</span>(Cookie cookie : cookies)&#123;</span><br><span class="line">                String name = cookie.getName();</span><br><span class="line">                String value = cookie.getValue();</span><br><span class="line">                System.out.println(<span class="string">&quot;åç§°ï¼š&quot;</span>+name+<span class="string">&quot;--å€¼ï¼š&quot;</span>+value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥è¿è¡Œå°±æœ‰ä¸Šæ¬¡ä¼ å…¥æµè§ˆå™¨çš„cookieã€‚</p>
<h4 id="cookieè®¾ç½®åˆ°æœŸæ—¶é—´"><a href="#cookieè®¾ç½®åˆ°æœŸæ—¶é—´" class="headerlink" title="cookieè®¾ç½®åˆ°æœŸæ—¶é—´"></a>cookieè®¾ç½®åˆ°æœŸæ—¶é—´</h4><p>é™¤äº† Cookie çš„åç§°å’Œå†…å®¹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…³å¿ƒä¸€ä¸ªä¿¡æ¯ï¼Œåˆ°æœŸæ—¶é—´ï¼Œåˆ°æœŸæ—¶é—´ç”¨æ¥æŒ‡å®šè¯¥ cookie ä½•æ—¶å¤±æ•ˆã€‚é»˜è®¤ ä¸ºå½“å‰æµè§ˆå™¨å…³é—­å³å¤±æ•ˆã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¾å®š cookie çš„æœ‰æ•ˆæ—¶é—´ï¼ˆé€šè¿‡åˆ°æœŸæ—¶é—´è®¡ç®—ï¼‰ï¼Œé€šè¿‡ setMaxAge(int time);æ–¹æ³•è®¾å®š cookie çš„æœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</p>
<p>åˆ°æœŸæ—¶é—´çš„å–å€¼ï¼š</p>
<ul>
<li><p>è´Ÿæ•´æ•°</p>
<p>è‹¥ä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºä¸åœ¨ç¡¬ç›˜å­˜å‚¨è¯¥ cookieã€‚</p>
<p>cookie çš„ maxAge å±æ€§çš„é»˜è®¤å€¼å°±æ˜¯-1ï¼Œè¡¨ç¤ºåªåœ¨æµè§ˆå™¨å†…å­˜ä¸­å­˜æ´»ï¼Œä¸€æ—¦å…³é—­æµè§ˆå™¨çª—å£ï¼Œé‚£ä¹ˆ cookie å°±ä¼šæ¶ˆå¤±ã€‚</p>
</li>
<li><p>æ­£æ•´æ•°</p>
<p>å¤§äº 0 çš„æ•´æ•°ï¼Œè¡¨ç¤ºå­˜å‚¨çš„ç§’æ•°ã€‚</p>
<p>è¡¨ç¤º cookie å¯¹è±¡å¯å­˜æ´»æŒ‡å®šçš„ç§’æ•°ã€‚å½“ç”Ÿå‘½å¤§äº 0 æ—¶ï¼Œæµè§ˆå™¨ä¼šæŠŠ Cookie ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼Œå°±ç®—å…³é—­æµè§ˆå™¨ï¼Œ å°±ç®—é‡å¯å®¢æˆ·ç«¯ç”µè„‘ï¼Œcookie ä¹Ÿä¼šå­˜æ´»ç›¸åº”çš„æ—¶é—´ã€‚</p>
</li>
<li><p>é›¶(ç”¨äºåˆ é™¤Cookie)</p>
<p>è‹¥ä¸º 0ï¼Œè¡¨ç¤ºåˆ é™¤è¯¥ cookieã€‚</p>
<p>cookie ç”Ÿå‘½ç­‰äº 0 æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œå®ƒè¡¨ç¤º cookie è¢«ä½œåºŸï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåŸæ¥æµè§ˆå™¨å·²ç»ä¿å­˜äº†è¿™ä¸ª Cookieï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ Cookie çš„ setMaxAge(0)æ¥åˆ é™¤è¿™ä¸ª Cookieã€‚ æ— è®ºæ˜¯åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼Œè¿˜æ˜¯åœ¨å®¢æˆ·ç«¯ ç¡¬ç›˜ä¸Šéƒ½ä¼šåˆ é™¤è¿™ä¸ª Cookieã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-26 11:04</span></span><br><span class="line"><span class="comment"> * cookieçš„åˆ°æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/coo3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cookie03</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤å€¼-1ï¼Œè¡¨ç¤ºåªåœ¨æµè§ˆå™¨å†…å­˜ä¸­</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºCookieå¯¹è±¡</span></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®Cookie 3å¤©åå¤±æ•ˆ</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">3</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>);</span><br><span class="line">        <span class="comment">// å‘é€Cookieå¯¹è±¡ è®¾ç½®ä¹‹åå¿…éœ€è¿›è¡Œå“åº”</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">        <span class="comment">// åˆ é™¤ä¹‹å‰çš„cookie</span></span><br><span class="line">        Cookie oldCookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;kkk&quot;</span>);</span><br><span class="line">        oldCookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">        resp.addCookie(oldCookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="cookieçš„æ³¨æ„ç‚¹"><a href="#cookieçš„æ³¨æ„ç‚¹" class="headerlink" title="cookieçš„æ³¨æ„ç‚¹"></a>cookieçš„æ³¨æ„ç‚¹</h4><ul>
<li>Cookieä¿å­˜åœ¨å½“å‰æµè§ˆå™¨ä¸­ã€‚</li>
</ul>
<p>åœ¨ä¸€èˆ¬çš„ç«™ç‚¹ä¸­å¸¸å¸¸æœ‰è®°ä½ç”¨æˆ·åè¿™æ ·ä¸€ä¸ªæ“ä½œï¼Œè¯¥æ“ä½œåªæ˜¯å°†ä¿¡æ¯ä¿å­˜åœ¨æœ¬æœºä¸Šï¼Œæ¢ç”µè„‘ä»¥åè¿™äº›ä¿¡æ¯å°±æ—  æ•ˆäº†ã€‚è€Œä¸” cookie è¿˜ä¸èƒ½è·¨æµè§ˆå™¨ã€‚</p>
<ul>
<li>Cookieå­˜ä¸­æ–‡é—®é¢˜ ï¼ˆä¸€èˆ¬ä¸å­˜ä¸­æ–‡ï¼‰</li>
</ul>
<p>Cookie ä¸­ä¸èƒ½å‡ºç°ä¸­æ–‡ï¼Œå¦‚æœæœ‰ä¸­æ–‡åˆ™é€šè¿‡ URLEncoder.encode()æ¥è¿›è¡Œç¼–ç ï¼Œè·å–æ—¶é€šè¿‡ URLDecoder.decode()æ¥è¿›è¡Œè§£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String name = <span class="string">&quot;å§“å&quot;</span>;</span><br><span class="line">String value = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line"><span class="comment">// é€šè¿‡ URLEncoder.encode()æ¥è¿›è¡Œç¼–ç </span></span><br><span class="line">name = URLEncoder.encode(name);</span><br><span class="line">value = URLEncoder.encode(value);</span><br><span class="line"><span class="comment">// åˆ›å»ºCookieå¯¹è±¡</span></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(name,value);</span><br><span class="line"><span class="comment">// å‘é€Cookieå¯¹è±¡</span></span><br><span class="line">response.addCookie(cookie);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//è·å–æ—¶é€šè¿‡ URLDecoder.decode()æ¥è¿›è¡Œè§£ç </span></span><br><span class="line">String name = URLDecoder.decode(cookie.getName());</span><br><span class="line">String value = URLDecoder.decode(cookie.getValue());</span><br></pre></td></tr></table></figure>

<ul>
<li>åŒåCookieé—®é¢˜</li>
</ul>
<p>å¦‚æœæœåŠ¡å™¨ç«¯å‘é€é‡å¤çš„Cookieé‚£ä¹ˆä¼šè¦†ç›–åŸæœ‰çš„Cookieã€‚</p>
<ul>
<li>æµè§ˆå™¨å­˜æ”¾Cookieçš„æ•°é‡</li>
</ul>
<p>ä¸åŒçš„æµè§ˆå™¨å¯¹Cookieä¹Ÿæœ‰é™å®šï¼ŒCookieçš„å­˜å‚¨æœ‰æ˜¯ä¸Šé™çš„ã€‚Cookieæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„ï¼Œè€Œä¸”ä¸€èˆ¬ æ˜¯ç”±æœåŠ¡å™¨ç«¯åˆ›å»ºå’Œè®¾å®šã€‚åæœŸç»“åˆSessionæ¥å®ç°å›è¯è·Ÿè¸ªã€‚Cookieçš„å¤§å°ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸€èˆ¬æ˜¯4kbä»¥ä¸‹ã€‚</p>
<h4 id="cookieçš„è·¯å¾„"><a href="#cookieçš„è·¯å¾„" class="headerlink" title="cookieçš„è·¯å¾„"></a>cookieçš„è·¯å¾„</h4><p>Cookieçš„setPathè®¾ç½®cookieçš„è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„ç›´æ¥å†³å®šæœåŠ¡å™¨çš„è¯·æ±‚æ˜¯å¦ä¼šä»æµè§ˆå™¨ä¸­åŠ è½½æŸäº›cookieã€‚</p>
<p><strong>æƒ…æ™¯ä¸€ï¼šå½“å‰æœåŠ¡å™¨ä¸‹ä»»ä½•é¡¹ç›®çš„ä»»æ„èµ„æºéƒ½å¯è·å–Cookieå¯¹è±¡</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;XXX&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯å¾„ä¸º&quot;/&quot;ï¼Œè¡¨ç¤ºåœ¨å½“å‰æœåŠ¡å™¨ä¸‹ä»»ä½•é¡¹ç›®éƒ½å¯è®¿é—®åˆ°Cookieå¯¹è±¡</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p><strong>æƒ…æ™¯äºŒï¼šå½“å‰é¡¹ç›®ä¸‹çš„èµ„æºå¯è·å–Cookieå¯¹è±¡ ï¼ˆé»˜è®¤ä¸è®¾ç½®Cookieçš„pathï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;XXX&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯å¾„ä¸º&quot;/s01&quot;ï¼Œè¡¨ç¤ºåœ¨å½“å‰é¡¹ç›®ä¸‹ä»»ä½•é¡¹ç›®éƒ½å¯è®¿é—®åˆ°Cookieå¯¹è±¡</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/servlet_demo&quot;</span>); <span class="comment">// é»˜è®¤æƒ…å†µï¼Œå¯ä¸è®¾ç½®pathçš„å€¼</span></span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p><strong>æƒ…æ™¯ä¸‰ï¼šæŒ‡å®šé¡¹ç›®ä¸‹çš„èµ„æºå¯è·å–Cookieå¯¹è±¡</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å½“å‰é¡¹ç›®è·¯å¾„ä¸ºï¼šservlet_demo */</span></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;XXX&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯å¾„ä¸º&quot;/servlet_1&quot;ï¼Œè¡¨ç¤ºåœ¨s02é¡¹ç›®ä¸‹æ‰å¯è®¿é—®åˆ°Cookieå¯¹è±¡</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/servlet_1&quot;</span>); <span class="comment">// åªèƒ½åœ¨servlet_1é¡¹ç›®ä¸‹è·å–Cookieï¼Œå°±ç®—cookieæ˜¯servlet_demoäº§ç”Ÿçš„ï¼Œservlet_demoä¹Ÿä¸èƒ½è·å–å®ƒ</span></span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p><strong>æƒ…æ™¯å››ï¼šæŒ‡å®šé¡¹ç›®çš„æŒ‡å®šç›®å½•ä¸‹çš„èµ„æºå¯è·å–Cookieå¯¹è±¡</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;XXX&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯å¾„ä¸º&quot;/servlet_demo/coo1&quot;ï¼Œè¡¨ç¤ºåœ¨servlet_demo/coo1ç›®å½•ä¸‹æ‰å¯è®¿é—®åˆ°Cookieå¯¹è±¡</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/servlet_demo/cook&quot;</span>); </span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬è®¾ç½®pathï¼Œå¦‚æœå½“å‰è®¿é—®çš„è·¯å¾„åŒ…å«äº†cookieçš„è·¯å¾„ï¼ˆå½“å‰è®¿é—®è·¯å¾„åœ¨cookieè·¯å¾„åŸºç¡€ä¸Šè¦æ¯”cookieçš„èŒƒå›´å°ï¼‰cookieå°±ä¼šåŠ è½½åˆ°requestå¯¹è±¡ä¹‹ä¸­ã€‚</p>
<p>cookieçš„è·¯å¾„æŒ‡çš„æ˜¯å¯ä»¥è®¿é—®è¯¥cookieçš„é¡¶å±‚ç›®å½•ï¼Œè¯¥è·¯å¾„çš„å­è·¯å¾„ä¹Ÿå¯ä»¥è®¿é—®è¯¥cookieã€‚</p>
<p>æ€»ç»“ï¼šå½“è®¿é—®çš„è·¯å¾„åŒ…å«äº†cookieçš„è·¯å¾„æ—¶ï¼Œåˆ™è¯¥è¯·æ±‚å°†å¸¦ä¸Šè¯¥cookieï¼›å¦‚æœè®¿é—®è·¯å¾„ä¸åŒ…å«cookieè·¯å¾„ï¼Œåˆ™è¯¥è¯·æ±‚ä¸ä¼šæºå¸¦è¯¥cookieã€‚</p>
<h3 id="10-HttpSessionå¯¹è±¡"><a href="#10-HttpSessionå¯¹è±¡" class="headerlink" title="10.HttpSessionå¯¹è±¡"></a>10.HttpSessionå¯¹è±¡</h3><p>ä¸Šé¢è®²è§£äº†è¯·æ±‚çš„æ¦‚å¿µï¼Œæ— çŠ¶æ€ï¼Œæ— æ³•åšåˆ°å¤šä¸ªè¯·æ±‚ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚</p>
<p>HttpSessionå¯¹è±¡æ˜¯javax.servlet.http.HttpSessionçš„å®ä¾‹ï¼Œè¯¥æ¥å£å¹¶ä¸åƒHttpServletRequestæˆ–HttpServletResponseè¿˜å­˜åœ¨ä¸€ä¸ªçˆ¶æ¥å£ï¼Œè¯¥æ¥å£åªæ˜¯ä¸€ä¸ªçº¯ç²¹çš„æ¥å£ã€‚è¿™å› ä¸ºSessionæœ¬èº«å°±å±äºHTTPåè®®çš„èŒƒç•´ã€‚</p>
<p>Sessionï¼šåœ¨è®¡ç®—æœºä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œåº”ç”¨ä¸­ï¼Œç§°ä¸ºâ€œä¼šè¯æ§åˆ¶â€ã€‚Sessionå¯¹è±¡å­˜å‚¨ç‰¹å®šç”¨æˆ·ä¼šè¯æ‰€éœ€çš„å±æ€§åŠé…ç½®ä¿¡æ¯ã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºçš„Webé¡µä¹‹é—´è·³è½¬æ—¶ï¼Œå­˜å‚¨åœ¨Sessionå¯¹è±¡ä¸­çš„å˜é‡å°†ä¸ä¼šä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªç”¨æˆ·ä¼šè¯ä¸­ä¸€ç›´å­˜åœ¨ä¸‹å»ã€‚</p>
<p>å¯¹äºæœåŠ¡å™¨è€Œè¨€ï¼Œæ¯ä¸€ä¸ªè¿æ¥åˆ°å®ƒçš„å®¢æˆ·ç«¯éƒ½æ˜¯ä¸€ä¸ª sessionï¼Œservlet å®¹å™¨ä½¿ç”¨æ­¤æ¥å£åˆ›å»º HTTP å®¢æˆ·ç«¯å’Œ HTTP æœåŠ¡å™¨ä¹‹é—´çš„ä¼šè¯ã€‚ä¼šè¯å°†ä¿ç•™æŒ‡å®šçš„æ—¶é—´æ®µï¼Œè·¨å¤šä¸ªè¿æ¥æˆ–æ¥è‡ªç”¨æˆ·çš„é¡µé¢è¯·æ±‚ã€‚<strong>ä¸€ ä¸ªä¼šè¯é€šå¸¸å¯¹åº”äºä¸€ä¸ªç”¨æˆ·ï¼Œè¯¥ç”¨æˆ·å¯èƒ½å¤šæ¬¡è®¿é—®ä¸€ä¸ªç«™ç‚¹ã€‚</strong>å¯ä»¥é€šè¿‡æ­¤æ¥å£æŸ¥çœ‹å’Œæ“ä½œæœ‰å…³æŸä¸ªä¼šè¯ çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä¼šè¯æ ‡è¯†ç¬¦ã€åˆ›å»ºæ—¶é—´å’Œæœ€åä¸€æ¬¡è®¿é—®æ—¶é—´ã€‚åœ¨æ•´ä¸ª session ä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯å±æ€§çš„æ“ ä½œã€‚</p>
<p>sessionæ— è®ºå®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ç«¯éƒ½å¯ä»¥æ„ŸçŸ¥åˆ°ï¼Œè‹¥é‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨ï¼Œåˆ™æ— æ³•å–å¾—ä¹‹å‰è®¾ç½®çš„sessionï¼Œå› ä¸ºæ¯ä¸€ä¸ªsessionåªä¿å­˜åœ¨å½“å‰çš„æµè§ˆå™¨å½“ä¸­ï¼Œå¹¶åœ¨ç›¸å…³çš„é¡µé¢å–å¾—ã€‚</p>
<p>sessionçš„ä½œç”¨æ˜¯ä¸ºäº†æ ‡è¯†ä¸€æ¬¡ä¼šè¯ï¼Œæˆ–è€…è¯´ç¡®è®¤ä¸€ä¸ªç”¨æˆ·ï¼›å¹¶ä¸”åœ¨<strong>ä¸€æ¬¡ä¼šè¯ï¼ˆä¸€ä¸ªç”¨æˆ·çš„å¤šæ¬¡è¯·æ±‚ï¼‰</strong>æœŸé—´å…±äº«æ•°æ®ã€‚å¯ä»¥é€šè¿‡request.getSession()æ–¹æ³•ï¼Œæ¥è·å–å½“å‰ä¼šè¯çš„sessionå¯¹è±¡ã€‚å½“è·å–sessionå¯¹è±¡æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­sessionå¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è·å–sessionå¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-26 22:54</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/sess01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Session1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// sessionå¯¹è±¡çš„è·å–,</span></span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        <span class="comment">// è·å–sessionçš„å”¯ä¸€æ ‡è¯†--ä¼šè¯æ ‡è¯†ç¬¦</span></span><br><span class="line">        String id = session.getId();</span><br><span class="line">        System.out.println(<span class="string">&quot;å”¯ä¸€æ ‡è¯†ç¬¦å·ï¼š&quot;</span>+id);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ›å»ºæ—¶é—´ï¼š&quot;</span>+session.getCreationTime());</span><br><span class="line">        System.out.println(<span class="string">&quot;æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´(æ—¶é—´æˆ³)ï¼š&quot;</span>+session.getLastAccessedTime());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¯å¦æ˜¯æ–°çš„sessionå¯¹è±¡ï¼š&quot;</span>+session.isNew());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ ‡è¯†ä¼šè¯-JSESSIONID"><a href="#æ ‡è¯†ä¼šè¯-JSESSIONID" class="headerlink" title="æ ‡è¯†ä¼šè¯ JSESSIONID"></a><strong>æ ‡è¯†ä¼šè¯ JSESSIONID</strong></h4><p>Session æ—¢ç„¶æ˜¯ä¸ºäº†æ ‡è¯†ä¸€æ¬¡ä¼šè¯ï¼Œé‚£ä¹ˆæ­¤æ¬¡ä¼šè¯å°±åº”è¯¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡å¿—ï¼Œè¿™ä¸ªæ ‡å¿—å°±æ˜¯ sessionIdã€‚</p>
<p>æ¯å½“ä¸€æ¬¡è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼Œå¦‚æœæœåŠ¡å™¨å¼€å¯äº†ä¼šè¯ï¼ˆè®¿é—®äº† sessionï¼‰ï¼ŒæœåŠ¡å™¨ç¬¬ä¸€æ­¥ä¼šæŸ¥çœ‹æ˜¯å¦ä»å®¢æˆ·ç«¯å›ä¼ ä¸€ä¸ªåä¸º JSESSION çš„ cookieï¼Œå¦‚æœæ²¡æœ‰åˆ™è®¤ä¸ºè¿™æ˜¯ä¸€æ¬¡æ–°çš„ä¼šè¯ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ session å¯¹è±¡ï¼Œå¹¶ç”¨å”¯ä¸€çš„ sessionId ä¸ºæ­¤æ¬¡ä¼šè¯åšä¸€ä¸ªæ ‡å¿—ï¼Œ<strong>å¹¶ä¸”è¿˜ä¼šä¼ å¯¹åº”çš„cookieåœ¨æµè§ˆå™¨</strong>ã€‚å¦‚æœæœ‰ JESSIONID è¿™ä¸ª cookie å›ä¼ ï¼ŒæœåŠ¡å™¨åˆ™ä¼š æ ¹æ® JSESSIONID è¿™ä¸ªå€¼å»æŸ¥çœ‹æ˜¯å¦å«æœ‰ id ä¸º JSESSION å€¼çš„ session å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰åˆ™è®¤ä¸ºæ˜¯ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„ session å¯¹è±¡ï¼Œå¹¶æ ‡å¿—æ­¤æ¬¡ä¼šè¯ï¼Œ<strong>å¹¶ä¼šå‘æµè§ˆå™¨å“åº”ä¸€ä¸ªæ–°çš„cookieï¼Œæµè§ˆå™¨æ›´æ–°è¿™ä¸ªcookie</strong>ï¼›å¦‚æœæ‰¾åˆ°äº†ç›¸åº”çš„ session å¯¹è±¡ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¹‹å‰æ ‡å¿—è¿‡çš„ä¸€æ¬¡ä¼šè¯ï¼Œè¿”å›è¯¥ session å¯¹è±¡ï¼Œæ•°æ®è¾¾åˆ°å…±äº«ã€‚</p>
<blockquote>
<p>æµè§ˆå™¨æ¯ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨ï¼Œéƒ½ä¼šå°†cookieä¼ ç»™åå°ï¼Œåå°å¯ä»¥æ“ä½œcookieå†å“åº”ã€‚</p>
<p>æµè§ˆå™¨é‡Œå¯ä»¥å°†sessionidçš„cookieåˆ æ‰ã€‚</p>
</blockquote>
<p>è¿™é‡Œæåˆ°ä¸€ä¸ªå«åš JSESSION çš„ cookieï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ cookieï¼Œå½“ç”¨æˆ·è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œå¦‚æœè®¿é—®äº† sessionï¼Œåˆ™æœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªåä¸º JSESSIONï¼Œå€¼ä¸ºè·å–åˆ°çš„ sessionï¼ˆæ— è®ºæ˜¯è·å–åˆ°çš„è¿˜æ˜¯ æ–°åˆ›å»ºçš„ï¼‰çš„ sessionId çš„ cookie å¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ° response å¯¹è±¡ä¸­ï¼Œå“åº”ç»™å®¢æˆ·ç«¯ï¼Œæœ‰æ•ˆæ—¶é—´ä¸ºå…³é—­æµè§ˆå™¨ã€‚</p>
<p>sessionidä»¥cookieçš„å½¢å¼å­˜å‚¨ï¼› Session çš„åº•å±‚ä¾èµ– Cookie æ¥å®ç°ã€‚ä¸€ä¸ªæœåŠ¡å™¨åº”ç”¨å¯ä»¥å¯¹åº”å¤šä¸ªcookieï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªsessionã€‚</p>
<p>cookieæ˜¯ä¸ºäº†æ–¹ä¾¿å‡å°‘æ•°æ®ä¼ è¾“çš„ï¼Œè®©æœåŠ¡ç«¯è®°ä½å®¢æˆ·ç«¯èº«ä»½çš„ï¼›sessionæ˜¯ä¸ºäº†å¤šæ¬¡è®¿é—®è®°ä½çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯å½¢æˆä¼šè¯çš„ã€‚</p>
<p>cookieæ˜¯æœ‰è·¯å¾„çš„ï¼Œsessionå°±çœ‹æ˜¯ä¸æ˜¯ä¸€æ¬¡ä¼šè¯äº†ã€‚</p>
<h4 id="sessionåŸŸå¯¹è±¡"><a href="#sessionåŸŸå¯¹è±¡" class="headerlink" title="sessionåŸŸå¯¹è±¡"></a>sessionåŸŸå¯¹è±¡</h4><p>Session ç”¨æ¥è¡¨ç¤ºä¸€æ¬¡ä¼šè¯ï¼Œåœ¨ä¸€æ¬¡ä¼šè¯ä¸­æ•°æ®æ˜¯å¯ä»¥å…±äº«çš„ï¼Œè¿™æ—¶ session ä½œä¸ºåŸŸå¯¹è±¡å­˜åœ¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setAttribute(String name, Object o); <span class="comment">// è®¾ç½®åŸŸå¯¹è±¡å†…å®¹ </span></span><br><span class="line">getAttribute(String name); <span class="comment">// è·å–åŸŸå¯¹è±¡å†…å®¹ </span></span><br><span class="line">removeAttribute(String name); <span class="comment">//åˆ é™¤åŸŸå¯¹è±¡å†…å®¹</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-27 09:50</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/sess02&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Session2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;uname&quot;</span>, <span class="string">&quot;lili&quot;</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;pwd&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">        session.removeAttribute(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;lili&quot;</span>);</span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘è·³è½¬åˆ°jspé¡µé¢ï¼Œè¯·æ±‚è½¬å‘ï¼Œä¸€æ¬¡è¯·æ±‚ï¼Œrequestå¯ä»¥æ‹¿åˆ°ï¼Œsessionä¹Ÿå¯ä»¥æ‹¿åˆ°</span></span><br><span class="line">        <span class="comment">//req.getRequestDispatcher(&quot;sess01.jsp&quot;).forward(req, resp);</span></span><br><span class="line">        <span class="comment">// é‡å®šå‘è·³è½¬åˆ°jspé¡µé¢,ä¸¤æ¬¡è¯·æ±‚ï¼Œrequestå¤±æ•ˆï¼Œä½†æ˜¯sessionå¯ä»¥æ‹¿åˆ°</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;sess01.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: mac</span><br><span class="line">  Date: <span class="number">2022</span>/<span class="number">3</span>/<span class="number">27</span></span><br><span class="line">  Time: ä¸Šåˆ<span class="number">10</span>:<span class="number">00</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;è·å–åŸŸå¯¹è±¡&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">// è·å–sessionåŸŸå¯¹è±¡</span></span><br><span class="line">    String uname = (String) request.getSession().getAttribute(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">    String pwd = (String) request.getSession().getAttribute(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–requeståŸŸå¯¹è±¡</span></span><br><span class="line">    String name = (String) request.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;session uname:&quot;</span>+uname);</span><br><span class="line">    System.out.println(<span class="string">&quot;session pwd:&quot;</span>+ pwd);</span><br><span class="line">    System.out.println(<span class="string">&quot;request name:&quot;</span>+ name);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>æ•°æ®å­˜å‚¨åœ¨ session åŸŸå¯¹è±¡ä¸­ï¼Œå½“ session å¯¹è±¡ä¸å­˜åœ¨äº†ï¼Œæ•°æ®ä¹Ÿå°±ä¸èƒ½å…±äº«äº†ã€‚ä¸åŒçš„æœåŠ¡å™¨åº”ç”¨ä¹‹é—´ï¼Œsessionå¯¹è±¡ä¹Ÿæ˜¯éš”ç¦»çš„ï¼Œä¸¤ä¸ªä¸åŒçš„sessionå¯¹è±¡é—´æ•°æ®ä¸èƒ½å…±äº«ã€‚</p>
<h4 id="sessionçš„é”€æ¯"><a href="#sessionçš„é”€æ¯" class="headerlink" title="sessionçš„é”€æ¯"></a><strong>sessionçš„é”€æ¯</strong></h4><p>1.é»˜è®¤åˆ°æœŸæ—¶é—´</p>
<p>å½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚servletå¹¶ä¸”æ“ä½œsessionæ—¶ï¼Œsessionå¯¹è±¡ç”Ÿæˆï¼ŒTomcatä¸­sessioné»˜è®¤çš„å­˜æ´»æ—¶é—´ä¸º30minï¼Œå³ä½ ä¸æ“ä½œç•Œé¢çš„æ—¶é—´ï¼Œä¸€æ—¦æœ‰æ“ä½œï¼Œsessionä¼šé‡æ–°è®¡æ—¶ã€‚</p>
<p>sessionçš„é»˜è®¤æ—¶é—´å¯ä»¥åœ¨tomcatå®‰è£…ç›®å½•ä¸‹çš„confç›®å½•ä¸‹çš„web.xmlæ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ã€‚å•ä½ä¸ºåˆ†ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.è®¾ç½®åˆ°æœŸæ—¶é—´</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡session.setMaxInactionInterval()å¯ä»¥è‡ªè¡Œè®¾å®šå­˜æ´»æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span></span><br><span class="line">HttpSession session = request.getSession();</span><br><span class="line">session.setMaxInactiveInterval(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//10ç§’åé”€æ¯session</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥çœ‹sessionæœ€å¤§ä¸æ´»åŠ¨æ—¶é—´ï¼Œå³å­˜æ´»æ—¶é—´</span></span><br><span class="line">System.out.println(session.getMaxInactiveInterval());</span><br></pre></td></tr></table></figure>

<p>3.ç«‹å³é”€æ¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session.invalidate();</span><br><span class="line"><span class="comment">//sessionç«‹å³ä½œåºŸ</span></span><br></pre></td></tr></table></figure>

<p>æµè§ˆå™¨æ¯æ¬¡è®¿é—®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„ã€‚</p>
<p>4.å…³é—­æµè§ˆå™¨</p>
<p>sessionåº•å±‚ä»¥æ¥cookieï¼Œcookieå¯¹è±¡é»˜è®¤åªåœ¨æµè§ˆå™¨å†…å­˜ä¸­å­˜æ´»ï¼Œå…³é—­æµè§ˆå™¨å³å¤±æ•ˆã€‚</p>
<p>è¿™ä¸ªé»˜è®¤çš„ä¼˜å…ˆçº§é«˜ï¼Œå¦‚æœä¸å…³æµè§ˆå™¨30åˆ†é’Ÿå¤±æ•ˆï¼Œå…³äº†æµè§ˆå™¨ç«‹é©¬å¤±æ•ˆã€‚</p>
<p>5.å…³é—­æœåŠ¡å™¨</p>
<p>éæ­£å¸¸å…³é—­æœåŠ¡å™¨æ—¶æ‰ä¼šå¤±æ•ˆã€‚      </p>
<p>å¦‚æœæ˜¯æ­£å¸¸å…³é—­æœåŠ¡å™¨ï¼Œsessionä¼šè¢«é’åŒ–åˆ°æœ¬åœ°ç£ç›˜ï¼Œä¸‹æ¬¡è®¿é—®æ—¶ä¼šä»æœ¬åœ°ç£ç›˜ä¸­æ´»åŒ–å‡ºæ¥ã€‚åœ¨ å·¥ä½œç©ºé—´ work ç›®å½•ä¸‹çš„ SESSION.ser æ–‡ä»¶ä¸­ã€‚ </p>
<p>Session å¤±æ•ˆåˆ™æ„å‘³ç€æ­¤æ¬¡ä¼šè¯ç»“æŸï¼Œæ•°æ®å…±äº«ç»“æŸã€‚</p>
<h3 id="11-ServletContextå¯¹è±¡"><a href="#11-ServletContextå¯¹è±¡" class="headerlink" title="11.ServletContextå¯¹è±¡"></a>11.ServletContextå¯¹è±¡</h3><h4 id="ServletContextå¯¹è±¡çš„è·å–"><a href="#ServletContextå¯¹è±¡çš„è·å–" class="headerlink" title="ServletContextå¯¹è±¡çš„è·å–"></a>ServletContextå¯¹è±¡çš„è·å–</h4><p>æ¯ä¸€ä¸ªwebåº”ç”¨éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªServletContextå¯¹è±¡ï¼Œåˆç§°ä¸ºApplicationå¯¹è±¡ï¼Œä»åç§°ä¸­å¯çŸ¥ï¼Œè¯¥å¯¹è±¡æ˜¯ä¸åº”ç”¨ç¨‹åºç›¸å…³çš„ã€‚åœ¨webå®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªwebåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ServletContextå¯¹è±¡ã€‚</p>
<p>è¯¥å¯¹è±¡æœ‰ä¸¤å¤§ä½œç”¨ï¼Œç¬¬ä¸€ã€ä½œä¸ºåŸŸå¯¹è±¡æ¥å…±äº«æ•°æ®ï¼Œæ­¤æ—¶æ•°æ®åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«ï¼›ç¬¬äºŒã€è¯¥å¯¹è±¡ä¸­ä¿å­˜äº†å½“å‰åº”ç”¨ç¨‹åºç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚å¯ä»¥é€šè¿‡getServerInfo()æ–¹æ³•è·å–å½“å‰æœåŠ¡å™¨ä¿¡æ¯ï¼ŒgetRealPath(String path)è·å–èµ„æºçš„çœŸå®è·¯å¾„ç­‰ã€‚</p>
<p>ServletContextå¯¹è±¡è·å–ï¼š</p>
<p>â‘ .é€šè¿‡requestå¯¹è±¡è·å–</p>
<p>ServletContext servletContext = req.getServletContext();<br>(ä¸èƒ½ç”¨äº†ï¼Ÿ)</p>
<p>â‘¡.é€šè¿‡sessionå¯¹è±¡è·å–</p>
<p>ServletContext servletContext = request.getSession().getServletContext();</p>
<p>â‘¢.é€šè¿‡servletConfigå¯¹è±¡è·å–ï¼Œåœ¨Servletæ ‡å‡†ä¸­æä¾›äº†ServletConfigæ–¹æ³•</p>
<p>ServletContext servletContext = getServletConfig().getServletContext();</p>
<p>â‘£.ç›´æ¥è·å– Servletç±»ä¸­æä¾›äº†ç›´æ¥è·å–ServletContextå¯¹è±¡çš„æ–¹æ³•</p>
<p>ServletContext servletContext = getServletContext();</p>
<p>å¸¸ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ServletContext servletContext = getServletContext();</span><br><span class="line"><span class="comment">//å¸¸ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="comment">//è·å–å½“å‰æœåŠ¡å™¨çš„ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment">//Apache Tomcat/9.0.59</span></span><br><span class="line">String ServletInfo = servletContext.getServerInfo();</span><br><span class="line">System.out.println(<span class="string">&quot;æœåŠ¡å™¨å½“å‰çš„ç‰ˆæœ¬ä¿¡æ¯ï¼š&quot;</span> + ServletInfo);</span><br><span class="line"><span class="comment">//è·å–é¡¹ç›®çš„çœŸå®è·¯å¾„</span></span><br><span class="line">String realPath = servletContext.getRealPath(<span class="string">&quot;/&quot;</span>);     <span class="comment">//è¡¨ç¤ºè·å–æ ¹è·¯å¾„,é¡¹ç›®çš„è€Œä¸æ˜¯åº”ç”¨çš„</span></span><br><span class="line"><span class="comment">///Users/liuxuan/MyProject/JavaProject/java/web/target/web/</span></span><br><span class="line">System.out.println(<span class="string">&quot;è·å–é¡¹ç›®çš„çœŸå®è·¯å¾„ï¼š&quot;</span> + realPath);</span><br></pre></td></tr></table></figure>



<h4 id="ServletContextåŸŸå¯¹è±¡"><a href="#ServletContextåŸŸå¯¹è±¡" class="headerlink" title="ServletContextåŸŸå¯¹è±¡"></a>ServletContextåŸŸå¯¹è±¡</h4><p>ServletContextä¹Ÿå¯ä»¥å½“åšåŸŸå¯¹è±¡æ¥ä½¿ç”¨ï¼Œé€šè¿‡ServletContextä¸­å­˜å–æ•°æ®ï¼Œå¯ä»¥ä½¿å¾—æ•´ä¸ªåº”ç”¨ç¨‹åºå…±äº«æŸäº›æ•°æ®ã€‚å½“ç„¶ä¸å»ºè®®å­˜æ”¾è¿‡å¤šæ•°æ®ï¼Œå› ä¸ºServletContextä¸­çš„æ•°æ®ä¸€æ—¦å­˜å‚¨è¿›å»æ²¡æœ‰æ‰‹åŠ¨ç§»é™¤çš„è¯ï¼Œå°†ä¼šä¸€ç›´ä¿å­˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-29 09:19</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/con02&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Context2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;</span><br><span class="line">        ServletContext servletContext = getServletContext();</span><br><span class="line">        <span class="comment">// è®¾ç½®åŸŸå¯¹è±¡</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å–åŸŸå¯¹è±¡</span></span><br><span class="line">        String name = (String) servletContext.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        <span class="comment">// ç§»é™¤åŸŸå¯¹è±¡</span></span><br><span class="line">        servletContext.removeAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Servletä¸‰å¤§ä½œç”¨åŸŸ</strong>ï¼š</p>
<p>1.requeståŸŸå¯¹è±¡<br>åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆã€‚è¯·æ±‚è½¬å‘æœ‰æ•ˆ,é‡å®šå‘å¤±è´¥ã€‚</p>
<p>2.sessionåŸŸå¯¹è±¡<br>åœ¨ä¸€æ¬¡ä¼šè¯ä¸­æœ‰æ•ˆã€‚è¯·æ±‚è½¬å‘å’Œé‡å®šå‘éƒ½æœ‰æ•ˆï¼Œsessioné”€æ¯åå¤±æ•ˆã€‚</p>
<p>3.servletContextåŸŸå¯¹è±¡<br>åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­æœ‰æ•ˆã€‚æœåŠ¡å™¨å…³é—­é”€æ¯ã€‚</p>
<h3 id="12-æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#12-æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="12.æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>12.æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h3><p>servletä¸­å¦‚ä½•å®ç°æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ã€‚</p>
<h4 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h4><p>æ–‡ä»¶ä¸Šä¼ æ¶‰åŠåˆ°å‰å°é¡µé¢çš„ç¼–å†™å’Œåå°æœåŠ¡å™¨ç«¯ä»£ç çš„ç¼–å†™ï¼Œå‰å°å‘é€æ–‡ä»¶ï¼Œåå°æ¥æ”¶å¹¶ä¿å­˜æ–‡ä»¶ï¼Œè¿™æ‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ä¸Šä¼ ã€‚</p>
<h5 id="å‰å°é¡µé¢"><a href="#å‰å°é¡µé¢" class="headerlink" title="å‰å°é¡µé¢"></a>å‰å°é¡µé¢</h5><p>åœ¨åšæ–‡ä»¶ä¸Šä¼ çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„ç•Œé¢ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¡¨å•ï¼Œå¹¶ä¸”è¡¨å•çš„è¯·æ±‚æ–¹å¼ä¸º POSTï¼›å…¶æ¬¡æˆ‘ä»¬çš„ form è¡¨å•çš„ enctype å¿…é¡»è®¾ä¸ºâ€multipart/form-dataâ€å³ enctype=â€œmultipart/form-dataâ€ æ„æ€æ˜¯è®¾ç½®è¡¨å•çš„ MIME ç¼–ç ã€‚é»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªç¼–ç æ ¼å¼æ˜¯ â€application/x-www-form-urlencodedâ€ï¼Œä¸èƒ½ç”¨äºæ–‡ä»¶ä¸Šä¼ ï¼›åªæœ‰ä½¿ç”¨äº† multipart/form-data æ‰èƒ½å®Œæ•´åœ°ä¼ é€’æ–‡ä»¶æ•°æ®ã€‚</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: mac</span><br><span class="line">  Date: <span class="number">2022</span>/<span class="number">3</span>/<span class="number">29</span></span><br><span class="line">  Time: ä¸‹åˆ<span class="number">9</span>:<span class="number">41</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;æ–‡ä»¶ä¸Šä¼ &lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        <span class="number">1.</span>å‡†å¤‡è¡¨å•</span><br><span class="line">        <span class="number">2.</span>è®¾ç½®è¡¨å•çš„æäº¤ç±»å‹ method=<span class="string">&quot;post&quot;</span></span><br><span class="line">        <span class="number">3.</span>è®¾ç½®è¡¨å•ç±»å‹ä¸ºæ–‡ä»¶ä¸Šä¼ è¡¨å• enctype=<span class="string">&quot;multipart/form-data&quot;</span></span><br><span class="line">        <span class="number">4.</span>è®¾ç½®æ–‡ä»¶æäº¤çš„åœ°å€ action=<span class="string">&quot;uploadServlet&quot;</span></span><br><span class="line">        <span class="number">5.</span>å‡†å¤‡è¡¨å•å…ƒç´  <span class="number">1.</span>æ™®é€šè¡¨å•é¡¹ type=<span class="string">&quot;text&quot;</span> <span class="number">2.</span>æ–‡ä»¶é¡¹ type=<span class="string">&quot;file&quot;</span></span><br><span class="line">        <span class="number">6.</span>è®¾ç½®è¡¨å•å…ƒç´ çš„nameå±æ€§å€¼ï¼Œå¦åˆ™åå°æ— æ³•æ¥æ”¶æ•°æ®</span><br><span class="line">        --&gt;</span><br><span class="line">    &lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;uploadServlet&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">        å§“åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;uname&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        æ–‡ä»¶ï¼š&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;myfile&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;!-- button é»˜è®¤çš„ type å±æ€§æ˜¯ submitï¼Œåšæäº¤æŒ‰é’®å¯ä»¥ä¸è®¾ç½® type --&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;submit&quot;</span>&gt; æäº¤ &lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h5 id="åå°å®ç°"><a href="#åå°å®ç°" class="headerlink" title="åå°å®ç°"></a>åå°å®ç°</h5><p>ä½¿ç”¨æ³¨è§£ <code>@MultipartConfig</code>æ ‡è¯†ä¸ºæ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œ Servlet å°† <code>Multipart/form-data</code> çš„postè¯·æ±‚å°è£…æˆ Part é€šè¿‡partå¯¹ä¸Šä¼ æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.file;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.MultipartConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Part;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-29 21:51</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@MultipartConfig</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/uploadServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶ä¸Šä¼ ......&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸ºä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼Œé¦–å…ˆè®¾ç½®ç¼–ç </span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æ™®é€šè¡¨å•é¡¹å‚æ•°</span></span><br><span class="line">        String uname = req.getParameter(<span class="string">&quot;uname&quot;</span>); <span class="comment">// è¡¨å•å…ƒç´ ä¸­ uname çš„å€¼</span></span><br><span class="line">        System.out.println(<span class="string">&quot;unameï¼š&quot;</span> + uname);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å– Part å¯¹è±¡ï¼Œä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">        Part part = req.getPart(<span class="string">&quot;myfile&quot;</span>); <span class="comment">// è¡¨å•ä¸­ file æ–‡ä»¶åŸŸçš„ name å±æ€§å€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€šè¿‡ part å¯¹è±¡å¾—åˆ°ä¸Šä¼ çš„æ–‡ä»¶å</span></span><br><span class="line">        String fileName = part.getSubmittedFileName();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ çš„æ–‡ä»¶åï¼š&quot;</span> + fileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾—åˆ°æ–‡ä»¶è¦å­˜æ”¾çš„è·¯å¾„--é¡¹ç›®è·¯å¾„</span></span><br><span class="line">        String filePath = req.getServletContext().getRealPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        System.out.println(filePath); <span class="comment">// æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„</span></span><br><span class="line">        <span class="comment">// /Users/liuxuan/MyProject/JavaProject/servletdemo/servlet-demo/out/artifacts/servlet_demo_war_exploded/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¿å­˜æ–‡ä»¶åˆ°æŒ‡å®šè·¯å¾„</span></span><br><span class="line">        part.write(filePath + <span class="string">&quot;/&quot;</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å‰ç«¯é¡µé¢â€¦/upload.jspé€‰æ‹©æ–‡ä»¶æäº¤åï¼Œè‡ªåŠ¨è·³è½¬è‡³â€¦/uploadServleté¡µé¢ã€‚</p>
<p>âš ï¸ä¸€ä¸ªé£˜çº¢é—®é¢˜</p>
<p>Servlet3.0æ–°å¢äº†request.getParts()/getPart(String filename) apiï¼Œç”¨äºè·å–ä½¿ç”¨multipart/form-dataæ ¼å¼ä¼ é€’çš„httpè¯·æ±‚çš„è¯·æ±‚ä½“ï¼Œé€šå¸¸ç”¨äºè·å–ä¸Šä¼ æ–‡ä»¶ã€‚ç”¨äºä»è¯·æ±‚ä¸­è§£æä¸Šä¼ çš„æ–‡ä»¶ã€‚</p>
<p>request.getParts()  è·å–è¯·æ±‚ä¸­å…¨éƒ¨æ–‡ä»¶<br>getPart(String filename)   è·å–è¯·æ±‚ä¸­æŒ‡å®šnameçš„æ–‡ä»¶</p>
<p>æ‰€ä»¥getPartæ–¹æ³•é£˜çº¢çš„è¯ï¼Œçœ‹ä¸€ä¸‹ç”¨çš„servletæ–¹æ³•ç‰ˆæœ¬æ˜¯ä¸æ˜¯3.0çš„ã€‚</p>
<p><code>InputStream is = part.getInputStream();</code> è·å–è¾“å…¥æµ</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨request.getParts()æ–¹æ³•å¿…é¡»ç»™servletæ·»åŠ æ³¨è§£@MultipartConfigï¼Œå¦åˆ™è™½ç„¶ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯è·å–ä¸åˆ°æ•°æ®ã€‚</p>
<p>æ›´å¤šç”¨æ³•æ’’ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012334071/article/details/50261063/">https://blog.csdn.net/u012334071/article/details/50261063/</a></p>
<p><a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/c66d20190a12a21614791711cc7931b765ce7b61.html">https://wenku.baidu.com/view/c66d20190a12a21614791711cc7931b765ce7b61.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sunyongxing/articles/2622891.html">https://www.cnblogs.com/sunyongxing/articles/2622891.html</a></p>
<h4 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h4><p>å³å°†æœåŠ¡å™¨ä¸Šçš„èµ„æºä¸‹è½½ï¼ˆæ‹·è´ï¼‰åˆ°æœ¬åœ°ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä¸‹è½½ï¼šé€šè¿‡è¶…é“¾æ¥ä¸‹è½½ã€é€šè¿‡ä»£ç ä¸‹è½½ã€‚</p>
<p>é¡¹ç›®å†…çš„æ–‡æœ¬æˆ–å›¾ç‰‡èµ„æºæ–‡ä»¶å¤¹éœ€è¦é€šè¿‡ Tomcat -&gt; Deployment è¿›è¡Œä¸Šä¼ æ‰èƒ½é€šè¿‡é¡¹ç›®å‘å¸ƒï¼Œè¿›è¡Œè®¿é—®ã€‚</p>
<h5 id="è¶…é“¾æ¥ä¸‹è½½"><a href="#è¶…é“¾æ¥ä¸‹è½½" class="headerlink" title="è¶…é“¾æ¥ä¸‹è½½"></a>è¶…é“¾æ¥ä¸‹è½½</h5><p>å½“æˆ‘ä»¬åœ¨HTMLæˆ–JSPé¡µé¢ä¸­ä½¿ç”¨aæ ‡ç­¾æ—¶ï¼ŒåŸæ„æ˜¯å¸Œæœ›èƒ½å¤Ÿè¿›è¡Œè·³è½¬ï¼Œä½†å½“è¶…é“¾æ¥é‡åˆ°æµè§ˆå™¨ä¸è¯†åˆ«çš„èµ„æºæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼›å½“é‡åˆ°æµè§ˆå™¨èƒ½å¤Ÿç›´æ¥æ˜¾ç¤ºçš„èµ„æºï¼Œæµè§ˆå™¨å°±ä¼šé»˜è®¤æ˜¾ç¤ºå‡ºæ¥ï¼Œæ¯”å¦‚txtã€pngã€jpgç­‰ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡downloadå±æ€§è§„å®šæµè§ˆå™¨è¿›è¡Œä¸‹è½½ã€‚ä½†æœ‰äº›æµè§ˆå™¨å¹¶ä¸æ”¯æŒã€‚</p>
<p>åœ¨webæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªdownloadæ–‡ä»¶å¤¹ï¼Œå‡†å¤‡å›¾ç‰‡ã€æ–‡æœ¬æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–‡ä»¶å­˜æ”¾åœ°å€éœ€è¦é…ç½®ä¸€ä¸‹ï¼Œç‚¹å³ä¸Šè§’configurationï¼Œå†ç‚¹deploymentï¼Œå†ç‚¹åŠ å·external sourceï¼Œé€‰åˆ°downloadæ–‡ä»¶å¤¹ä¸‹ï¼Œå†æ”¹ä¸€ä¸‹application contextï¼š/servlet_demo/downloadã€‚è¿™æ ·æ–‡ä»¶å¤¹ä¸‹çš„èµ„æºæ‰èƒ½è¢«æµè§ˆå™¨è®¿é—®åˆ°ã€‚ï¼ˆè¿™ä¸ªdownloadæ˜¯æ–‡ä»¶å¤¹åå­—ï¼‰</p>
<p>è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8080/servlet_demo/download.html">http://localhost:8080/servlet_demo/download.html</a> ï¼ˆè¿™ä¸ªdownloadæ˜¯htmlåå­—ï¼‰</p>
<p>download.htmlï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡ä»¶ä¸‹è½½<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„èµ„æºï¼Œç‚¹å‡»å±•ç¤º --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;download/TacoCloud.jpeg&quot;</span>&gt;</span>å›¾ç‰‡æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;download/Taco.java&quot;</span>&gt;</span>æ–‡æœ¬æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠ downloadç‚¹å‡»ä¸‹è½½,å¯ä¸å†™å±æ€§åï¼Œè¡¨ç¤ºæ–‡ä»¶å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;download/TacoCloud.jpeg&quot;</span> <span class="attr">download</span>=<span class="string">&quot;ç™¾åº¦.jpeg&quot;</span>&gt;</span>å›¾ç‰‡æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;download/Taco.java&quot;</span> <span class="attr">download</span>=<span class="string">&quot;&quot;</span>&gt;</span>æ–‡æœ¬æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æµè§ˆå™¨ä¸èƒ½å¤Ÿè¯†åˆ«çš„èµ„æº,è‡ªåŠ¨ä¸‹è½½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>å‹ç¼©æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="åå°å®ç°ä¸‹è½½"><a href="#åå°å®ç°ä¸‹è½½" class="headerlink" title="åå°å®ç°ä¸‹è½½"></a>åå°å®ç°ä¸‹è½½</h5><p>å®ç°æ­¥éª¤ï¼š</p>
<p>å¾—çŸ¥é“è¦ä¸‹è½½çš„èµ„æºæ–‡ä»¶åï¼Œæ–‡ä»¶åä¼ åˆ°åå°ä»£ç ä¹‹åï¼š</p>
<ol>
<li>éœ€è¦é€šè¿‡response.setContentTypeæ–¹æ³•è®¾ç½®Content-typeå¤´å­—æ®µçš„å€¼ï¼Œä¸ºæµè§ˆå™¨æ— æ³•ä½¿ç”¨æŸç§æ–¹å¼æˆ–æ¿€æ´»æŸä¸ªç¨‹åºæ¥å¤„ç†çš„MIMEç±»å‹ï¼Œä¾‹å¦‚â€œapplication/octet-streamâ€æˆ–â€œapplication/x-msdownloadâ€˜ç­‰ã€‚</li>
<li>éœ€è¦é€šè¿‡response.setHeaderæ–¹æ³•è®¾ç½®Content-Dispositionå¤´çš„å€¼ä¸ºâ€œattachment;filename=æ–‡ä»¶åâ€œ</li>
<li>è¯»å–ä¸‹è½½æ–‡ä»¶ï¼Œè°ƒç”¨response.getOutputStreamæ–¹æ³•å‘å®¢æˆ·ç«¯å†™å…¥é™„ä»¶å†…å®¹ã€‚</li>
</ol>
<p>ç¬¬ä¸€æ­¥ï¼šå†™htmlé¡µé¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;æ–‡ä»¶ä¸‹è½½&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;downloadServlet&quot;</span>&gt;</span><br><span class="line">        æ–‡ä»¶åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;fileName&quot;</span> placeholder=<span class="string">&quot;è¯·è¾“å…¥è¦ä¸‹è½½çš„æ–‡ä»¶å&quot;</span>&gt;</span><br><span class="line">        &lt;button&gt;ä¸‹è½½&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒæ­¥ï¼šå†™ä¸€ä¸ªservleté¡µé¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.file;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-31 21:59</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/downloadServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownloadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//é‡å†™é’¥åŒ™çš„</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶ä¸‹è½½===&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®è¯·æ±‚çš„ç¼–ç æ ¼å¼</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// ä¹±ç é—®é¢˜ï¼Œè®¾ç½®ç¼–ç æ ¼å¼</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å–å‚æ•°ï¼ˆå¾—åˆ°è¦ä¸‹è½½çš„æ–‡ä»¶åï¼‰</span></span><br><span class="line">        String fileName = req.getParameter(<span class="string">&quot;fileName&quot;</span>);</span><br><span class="line">        <span class="comment">// å‚æ•°çš„éç©ºåˆ¤æ–­  trim()å»é™¤å­—ç¬¦ä¸²å‰åç©ºæ ¼ï¼Œä¸­é—´çš„ä¸ç®¡</span></span><br><span class="line">        <span class="keyword">if</span>(fileName == <span class="keyword">null</span> || <span class="string">&quot;&quot;</span>.equals(fileName.trim()))&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;è¯·è¾“å…¥è¦ä¸‹è½½çš„æ–‡ä»¶åï¼&quot;</span>);</span><br><span class="line">            resp.getWriter().close();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¾—åˆ°å›¾ç‰‡å­˜æ”¾çš„è·¯å¾„,æ–‡ä»¶æ”¾åœ¨é…ç½®å¥½çš„downloadç›®å½•ä¸‹çš„ã€‚</span></span><br><span class="line">        String path = req.getServletContext().getRealPath(<span class="string">&quot;/download/&quot;</span>);</span><br><span class="line">        <span class="comment">// é€šè¿‡è·¯å¾„å¾—åˆ°fileå¯¹è±¡</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(path + fileName);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶ï¼š&quot;</span>+ file);</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ–‡ä»¶å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯ä¸ªæ ‡å‡†æ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span>(file.exists() &amp;&amp; file.isFile())&#123;</span><br><span class="line">            <span class="comment">// 1.è®¾ç½®å“åº”ç±»å‹ï¼Œè®¾ç½®ä¸ºæµè§ˆå™¨æ— æ³•ä½¿ç”¨æŸç§æ–¹å¼æˆ–æ¿€æ´»æŸä¸ªç¨‹åºæ¥å¤„ç†çš„MIMEç±»å‹</span></span><br><span class="line">            resp.setContentType(<span class="string">&quot;application/x-msdownload&quot;</span>);</span><br><span class="line">            <span class="comment">// 2.è®¾ç½®å“åº”å¤´</span></span><br><span class="line">            resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + fileName);</span><br><span class="line">            <span class="comment">// 3.å¾—åˆ°fileæ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line">            InputStream in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">            <span class="comment">// 4.å¾—åˆ°å­—èŠ‚è¾“å‡ºæµï¼Œå­—ç¬¦è¾“å‡ºæµæ–‡ä»¶æ˜¯ä¸è¡Œçš„</span></span><br><span class="line">            ServletOutputStream out = resp.getOutputStream();</span><br><span class="line">            <span class="comment">// 5.å®šä¹‰byteæ•°ç»„</span></span><br><span class="line">            <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="comment">// 6.å®šä¹‰é•¿åº¦</span></span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// 7.å¾ªç¯è¾“å‡º</span></span><br><span class="line">            <span class="keyword">while</span> ((len = in.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                out.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 8.å…³é—­èµ„æº</span></span><br><span class="line">            out.close();</span><br><span class="line">            in.close();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡è¯•ï¼&quot;</span>);</span><br><span class="line">            resp.getWriter().close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="githubåœ°å€"><a href="#githubåœ°å€" class="headerlink" title="githubåœ°å€"></a>githubåœ°å€</h3><p><a target="_blank" rel="noopener" href="https://github.com/jadeliuliu/servletdemo/tree/master/servlet-demo">https://github.com/jadeliuliu/servletdemo/tree/master/servlet-demo</a></p>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p>æ¯”è¾ƒå…¨çš„æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_19782019/article/details/80292110">https://blog.csdn.net/qq_19782019/article/details/80292110</a></p>
<p>å®ç°ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/Hello_zbs/article/details/108394660">https://blog.csdn.net/Hello_zbs/article/details/108394660</a></p>
<p>bç«™è§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Ta4y1H7Vc?p=26&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1Ta4y1H7Vc?p=26&amp;spm_id_from=pageDriver</a></p>
<p>å­¦ä¹ ç¬”è®°ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yuan-liu/p/15255326.html">https://www.cnblogs.com/yuan-liu/p/15255326.html</a></p>
<h3 id="servletçš„getå’Œpostè¯·æ±‚"><a href="#servletçš„getå’Œpostè¯·æ±‚" class="headerlink" title="servletçš„getå’Œpostè¯·æ±‚"></a>servletçš„getå’Œpostè¯·æ±‚</h3><p>getï¼šå°†æ•°æ®é€šè¿‡urlé™„åŠ æ•°æ®ç°è¡Œçš„å‘æœåŠ¡å™¨å‘é€æ•°æ®<br>postï¼šå°†æ•°æ®å­˜æ”¾åœ¨è¯·æ±‚ä½“ä¸­éšæ€§çš„å‘æœåŠ¡å™¨å‘é€æ•°æ®</p>
<p>åŒºåˆ«ï¼š<br>1.getå¸¸ç”¨äºä¸åŒ…å«æ•æ„Ÿä¿¡æ¯çš„æŸ¥è¯¢åŠŸèƒ½ ï¼ˆä¸ç”¨è¾“å…¥å¯†ç ï¼‰<br>2.postç”¨äºå®‰å…¨æ€§è¾ƒé«˜çš„åŠŸèƒ½æˆ–è€…æœåŠ¡å™¨çš„â€œå†™â€æ“ä½œ egï¼šç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€æ›´æ–°è´¦ç›®</p>
<p>service()æ˜¯è¯·æ±‚å¤„ç†çš„æ ¸å¿ƒæ–¹æ³•ï¼Œæ— è®ºæ˜¯getæˆ–è€…æ˜¯postéƒ½ä¼šè¢«service()æ–¹æ³•å¤„ç†ã€‚<br>å½“é‡‡ç”¨æ— å·®åˆ«è¯·æ±‚æ—¶ï¼Œå¯ä»¥ç”¨service()æ–¹æ³•ã€‚<br>request.getMethod()æŸ¥çœ‹è¯·æ±‚æ–¹å¼<br>doGet()æ–¹æ³•å¤„ç†getè¯·æ±‚<br>doPost()æ–¹æ³•å¤„ç†postè¯·æ±‚<br>response.setContentType(â€œtext/html;charset=UTF-8â€);è§£å†³ä¸­æ–‡ä¹±ç </p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/6869979139164602382">https://juejin.cn/post/6869979139164602382</a></p>
<h3 id="WebServletå’Œ-RequestMapping"><a href="#WebServletå’Œ-RequestMapping" class="headerlink" title="@WebServletå’Œ@RequestMapping"></a>@WebServletå’Œ@RequestMapping</h3><p>éƒ½æ˜¯ç”¨åœ¨Controllerç±»é‡Œï¼Œç”¨äºæ‹¦æˆªç‰¹å®šè¯·æ±‚çš„ã€‚</p>
<p>@WebServletæ³¨è§£ä½œç”¨åœ¨ç±»ä¸Šï¼Œç”¨äºæ ‡æ³¨åœ¨ä¸€ä¸ªç»§æ‰¿äº†HttpServletç±»ä¹‹ä¸Šï¼Œå±äºç±»çº§åˆ«çš„æ³¨è§£ï¼Œä¸€èˆ¬ç”¨äºéœ€è¦æœ‰HttpServletRequestè¯·æ±‚ä¸­å¸¦äº†å‚æ•°ï¼Œæˆ–è€…éœ€è¦filterç­‰åœºæ™¯ï¼Œè¿™ä¸ªæ˜¯Servletå®ç°çš„è·¯å¾„æ˜ å°„é€»è¾‘ã€‚</p>
<p>@RequestMapping åœ¨controllerç±»ä¸ŠåŠ ï¼Œå…·ä½“çš„æ–¹æ³•ä¸Šå†åŠ ï¼Œ å¯ä»¥åœ¨æ§åˆ¶å™¨ç±»çš„çº§åˆ«å’Œ/æˆ–å…¶ä¸­çš„æ–¹æ³•çš„çº§åˆ«ä¸Šä½¿ç”¨ å¤„ç†æ™®é€šçš„URIè¯·æ±‚ï¼Œæˆ–è€…httpè¯·æ±‚ï¼Œè¿™ä¸ªæ˜¯springå®ç°çš„DispatcherServletçš„è·¯å¾„æ˜ å°„é€»è¾‘ã€‚</p>
<p>âœ… ä¸¤ç§æ„é€ Controllerçš„åŒºåˆ«ï¼š</p>
<p>Controlleræ˜¯spring çš„ä¸€ä¸ªbeanï¼Œç”±springçš„IOCæ¥ç®¡ç†çš„ä¸€ä¸ªbean</p>
<p>Servletæ˜¯ä¸€ä¸ªæ¥å£æˆ–è€…æ¥å£çš„å®ç°ï¼ˆå¸¸è§çš„æ˜¯GenericServlet å’Œ HttpServletï¼‰</p>
<p>Servletå®ç°æ–¹å¼ï¼š<br>æœ‰ä¸€ä¸ªæ˜ å°„å…³ç³»servlet-mappingï¼Œurlçš„endpoint å¯¹åº”çš„å…·ä½“çš„servletï¼Œ æ¯”å¦‚è§„å®šâ€™/demoâ€™ æ˜ å°„åˆ°ServletDemoï¼ˆç»§æ‰¿è‡ªHttpServletï¼Œé‡å†™doGetï¼ŒdoPostç­‰æ–¹æ³•ï¼‰.<br>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥localhost:8088/demo   , è¿™ä¸ªè¯·æ±‚å°±ä¼šæ‰§è¡Œåˆ°ServletDemoçš„doGetæ–¹æ³•ï¼Œç»è¿‡ä¸€ç³»åˆ—é€»è¾‘ï¼Œæœ€ç»ˆå°†è¦è¿”å›ç»™æµè§ˆå™¨çš„æ•°æ®å†™å…¥HttpServletResponseï¼Œè¿™æ ·æµè§ˆå™¨å°±èƒ½æ”¶åˆ°ç»“æœã€‚</p>
<p>Controllerå®ç°æ–¹å¼ï¼š<br>åªæ˜¯ä¸€ä¸ªbeanï¼Œæ–¹æ³•ä¸Šå¯ä»¥åŠ ä¸Šæ³¨è§£GetMappingï¼ŒPostMappingç­‰ï¼Œæ ‡æ³¨æ˜ å°„çš„urlçš„endpointã€‚<br>Servletå®¹å™¨ï¼ˆTomcatç­‰ï¼‰æ¥æ”¶åˆ°è¯·æ±‚ä»¥åï¼Œå°†è¯·æ±‚äº¤ç»™DispatcherServletçš„serviceæ–¹æ³•æ¥å¤„ç†ï¼Œservletä¼šåœ¨doDispatché‡Œé¢å…ˆæ‰¾åˆ°mappedHandler ï¼Œç„¶åæ‰¾åˆ°HandlerAdapterã€‚è°ƒç”¨HandlerAdapter çš„handleæ–¹æ³•ï¼Œå…¶å®åº”è¯¥æ˜¯AbstractHandlerMethodAdapterï¼Œ<br>ç„¶åè°ƒç”¨åˆ°RequestMappingHandlerAdapterçš„handleInternalï¼Œæœ€ç»ˆè°ƒç”¨åˆ°invokeAndHandleï¼Œåå°„è°ƒç”¨controllerçš„æ–¹æ³•ã€‚æ‰¾åˆ°endpointå¯¹åº”çš„beançš„æ–¹æ³•ï¼Œå¹¶è°ƒç”¨ã€‚</p>
<p>æ€»ç»“ï¼š<br><em><strong>å®¹å™¨==ã€‹DispatcherServlet (serviceæ–¹æ³•) ==ã€‹ doDispatcher ==ã€‹HandlerAdapter ï¼ˆhandleï¼‰=ã€‹AbstractHandlerMethodAdapter==ã€‹RequestMappingHandlerAdapter ==ã€‹invokeAndHandle==ã€‹åå°„å…·ä½“çš„controlleræ–¹æ³•</strong></em></p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/huainanyin/p/15936212.html">https://www.cnblogs.com/huainanyin/p/15936212.html</a></p>
<p>Springæä¾›çš„DispatcherServletæ˜¯æ€ä¹ˆè°ƒç”¨æˆ‘ä»¬çš„Controlleré‡Œçš„ä¸šåŠ¡æ¥å£çš„ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/caoyuanyenang/article/details/114401414">https://blog.csdn.net/caoyuanyenang/article/details/114401414</a></p>
<p>âœ…@RequestMapingå‚æ•°<br>è§javaæ³¨è§£</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/19/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/protocolbuffer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/19/myblog/%E5%90%8E%E7%AB%AF%E4%B9%8B%E8%B7%AF/protocolbuffer/" class="post-title-link" itemprop="url">proto bufferçš„javaä½¿ç”¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-03-19 11:39:24 / Modified: 12:21:30" itemprop="dateCreated datePublished" datetime="2022-03-19T11:39:24+08:00">2022-03-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åç«¯å¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="pbä»‹ç»"><a href="#pbä»‹ç»" class="headerlink" title="pbä»‹ç»"></a>pbä»‹ç»</h3><p>Protocol Buffers æ˜¯ä¸€ç§è½»ä¾¿é«˜æ•ˆçš„ç»“æ„åŒ–æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œå¯ä»¥ç”¨äºç»“æ„åŒ–æ•°æ®ä¸²è¡ŒåŒ–ï¼Œæˆ–è€…è¯´åºåˆ—åŒ–ã€‚å®ƒå¾ˆé€‚åˆåšæ•°æ®å­˜å‚¨æˆ– RPC æ•°æ®äº¤æ¢æ ¼å¼ã€‚å¯ç”¨äºé€šè®¯åè®®ã€æ•°æ®å­˜å‚¨ç­‰é¢†åŸŸçš„è¯­è¨€æ— å…³ã€å¹³å°æ— å…³ã€å¯æ‰©å±•çš„åºåˆ—åŒ–ç»“æ„æ•°æ®æ ¼å¼ã€‚ç›®å‰æä¾›äº† C++ã€Javaã€Python ä¸‰ç§è¯­è¨€çš„ APIã€‚<br>protocol bufferå’Œxmlã€jsonç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¼€å‘ä¸­çš„ä¸€ç§æ•°æ®äº¤æ¢æ ¼å¼ï¼Œåªä¸è¿‡ç›¸è¾ƒxmlå’Œjsonï¼Œprotocol bufferçš„ä¼˜ç‚¹æ›´æ˜æ˜¾ï¼Œå®ƒæ›´å°ã€æ›´å¿«ã€æ›´ç®€å•ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/yubo_725/article/details/52219489">https://blog.csdn.net/yubo_725/article/details/52219489</a></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><h4 id="æ–‡ä»¶æœ¬åœ°è½¬æ¢"><a href="#æ–‡ä»¶æœ¬åœ°è½¬æ¢" class="headerlink" title="æ–‡ä»¶æœ¬åœ°è½¬æ¢"></a>æ–‡ä»¶æœ¬åœ°è½¬æ¢</h4><p>å¯ä»¥ä½¿ç”¨ç”¨ProtocolBufferçš„ç¼–è¯‘å™¨å®ç°.protocaolæ–‡ä»¶åˆ°,javaæ–‡ä»¶çš„è½¬æ¢ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å»Googleçš„ç½‘ç«™ä¸Šä¸‹è½½Protocol Bufferçš„ç¼–è¯‘å™¨ï¼š<a target="_blank" rel="noopener" href="https://developers.google.com/protocol-buffers/docs/downloads">https://developers.google.com/protocol-buffers/docs/downloads</a></p>
<p>åœ¨Javaä¸­ä½¿ç”¨ProtocolBufferçš„æ­¥éª¤å¤§è‡´åˆ†ä¸ºä¸‹é¢è¿™å‡ ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰ç¼–å†™.protoæ–‡ä»¶ï¼Œå®šä¹‰æ¶ˆæ¯ç±»å‹</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨ProtocolBufferçš„ç¼–è¯‘å™¨ï¼Œå°†.protoæ–‡ä»¶ç¼–è¯‘æˆå¯¹åº”çš„javaæ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.msg;</span><br><span class="line"> </span><br><span class="line">option java_outer_classname = <span class="string">&quot;PersonBean&quot;</span>;</span><br><span class="line"> </span><br><span class="line">message Person &#123;</span><br><span class="line">    required string name = <span class="number">1</span>;</span><br><span class="line">    required int32 age = <span class="number">2</span>;</span><br><span class="line">    optional string gender = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿å­˜åˆ°ä¸€ä¸ªPerson.protoæ–‡ä»¶ä¸­ï¼Œå…¶ä¸­packageæŒ‡å®šäº†åŒ…åï¼Œå’Œjavaä¸­çš„åŒ…åç±»ä¼¼ï¼Œoption java_outer_classname = â€œPersonBeanâ€;è¿™å¥æŒ‡å®šäº†ç¼–è¯‘å™¨åœ¨ç¼–è¯‘.protoæ–‡ä»¶æ—¶ï¼Œè¾“å‡ºçš„javaç±»çš„ç±»åï¼Œæ¥ç€ä½¿ç”¨messageå®šä¹‰äº†ä¸€ä¸ªåä¸ºPersonçš„æ¶ˆæ¯ï¼Œé‡Œé¢åŒ…å«3ä¸ªæˆå‘˜å˜é‡ï¼Œå…¶ä¸­ç”¨requiredä¿®é¥°çš„å˜é‡ä»£è¡¨å¿…é¡»çš„ï¼Œoptionalä¿®é¥°çš„å˜é‡ä»£è¡¨æ˜¯å¯é€‰çš„ï¼Œè¿™é‡Œå®šä¹‰æ¶ˆæ¯çš„å½¢å¼è·Ÿjavaä¸­å®šä¹‰ç±»éå¸¸ç›¸ä¼¼ã€‚</p>
<p>ä¸‹é¢éœ€è¦ç”¨ProtocolBufferçš„ç¼–è¯‘å™¨æ¥ç¼–è¯‘ä¸Šé¢çš„æ¶ˆæ¯ï¼Œæˆ‘ä»¬ä»googleçš„ç½‘ç«™ä¸Šä¸‹è½½ä¸‹æ¥çš„æ˜¯ä¸€ä¸ªprotoc.exeæ–‡ä»¶ï¼Œå°†è¯¥æ–‡ä»¶è·Ÿä¸Šé¢å®šä¹‰çš„æ¶ˆæ¯æ–‡ä»¶Person.protoæ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œä¸­è¿›å…¥è¯¥ç›®å½•ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<p><code>protoc.exe --java_out=./ Person.proto</code><br>å°±åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆäº†å¯¹åº”çš„javaæ–‡ä»¶PersonProto.java</p>
<h4 id="socketçº¿ä¸Šä¼ è¾“"><a href="#socketçº¿ä¸Šä¼ è¾“" class="headerlink" title="socketçº¿ä¸Šä¼ è¾“"></a>socketçº¿ä¸Šä¼ è¾“</h4><p>åœ¨libç›®å½•ä¸‹å¼•å…¥äº†protobuf-java-2.5.0.jaråŒ…ï¼Œè¿™ä¸ªåŒ…å°±æ˜¯ç”¨æ¥å¯¹ProtocolBufferæ¶ˆæ¯è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„.</p>
<p>æœåŠ¡ç«¯ï¼Œå®šä¹‰ä¸€ä¸ªServerç±»ï¼Œç”¨äºå¤„ç†å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.server;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.demo.constant.Constants;</span><br><span class="line"><span class="keyword">import</span> com.demo.msg.PersonBean;</span><br><span class="line"><span class="keyword">import</span> com.google.protobuf.ByteString;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ServerSocket ss = <span class="keyword">new</span> ServerSocket(Constants.PORT);</span><br><span class="line">        System.out.println(<span class="string">&quot;server started...&quot;</span>);</span><br><span class="line">        Socket socket = ss.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;a client connected!&quot;</span>);</span><br><span class="line">        <span class="comment">//ä»è¾“å…¥æµä¸­è§£æå‡ºPersonå¯¹è±¡ï¼Œååºåˆ—åŒ–ï¼Œbyteæµ-&gt;javaå¯¹è±¡</span></span><br><span class="line">        PersonBean.Person person = PersonBean.Person.parseFrom(ByteString.readFrom(socket.getInputStream()));</span><br><span class="line">        <span class="keyword">if</span>(person != <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;server received data:\n&quot;</span> + person.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯ï¼Œå®šä¹‰ä¸€ä¸ªClientç±»ï¼Œç”¨äºç”Ÿæˆä¸€ä¸ªPersonç±»å¯¹è±¡å¹¶å‘é€ç»™Server</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.client;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.demo.constant.Constants;</span><br><span class="line"><span class="keyword">import</span> com.demo.msg.PersonBean;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;localhost&quot;</span>, Constants.PORT);</span><br><span class="line">        <span class="comment">//æ„é€ ä¸€ä¸ªPersonå¯¹è±¡</span></span><br><span class="line">        PersonBean.Person person = PersonBean.Person.newBuilder().setName(<span class="string">&quot;zhangsan&quot;</span>)</span><br><span class="line">                .setAge(<span class="number">20</span>).setGender(<span class="string">&quot;male&quot;</span>).build();</span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line">        <span class="comment">//å°†Personå¯¹è±¡å†™åˆ°è¾“å‡ºæµä¸­ã€‚åºåˆ—åŒ–ä¸ºå­—èŠ‚æµ</span></span><br><span class="line">        os.write(person.toByteArray());</span><br><span class="line">        os.flush();</span><br><span class="line">        <span class="comment">//è¿™é‡Œæ³¨æ„ä¸€å®šè¦å…³é—­æµï¼Œå¦åˆ™æœåŠ¡ç«¯ä¼šæŠ¥é”™</span></span><br><span class="line">        os.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;client send person&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„PORTä¸ºå¸¸é‡ï¼Œå®šä¹‰åœ¨Constantsç±»ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.constant;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Constants</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PORT = <span class="number">9988</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œä¸€ä¸ªä½¿ç”¨ProtocolBufferæ¥è¿›è¡Œæ•°æ®å‘é€å’Œæ¥æ”¶çš„javaç¨‹åºå°±å®Œæˆäº†ã€‚</p>
<h3 id="åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"><a href="#åºåˆ—åŒ–ä¸ååºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"></a>åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h3><p>å‰é¢çš„ä¾‹å­ä¸­ï¼Œåºåˆ—åŒ–åªæ˜¯åºåˆ—åŒ–ä¸ºäº†å­—èŠ‚æµï¼Œååºåˆ—åŒ–ä¹Ÿæ˜¯å­—èŠ‚æµåˆ°javaå¯¹è±¡ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Student.Builder buidler = Student.newBuilder();</span><br><span class="line">buidler.setName(<span class="string">&quot;Frank&quot;</span>);</span><br><span class="line">buidler.setNumber(<span class="number">123456</span>);</span><br><span class="line">buidler.setHobby(<span class="string">&quot;music&quot;</span>);</span><br><span class="line">Student student = buidler.build();</span><br><span class="line">System.out.println(student.toString());</span><br></pre></td></tr></table></figure>

<p><code>student.toByteArray();</code>  Studentæ˜¯pbæ–‡ä»¶åï¼Œè€Œä¸æ˜¯javaæ–‡ä»¶åã€‚builderæ˜¯å•¥ï¼Ÿ</p>
<p>è¿™ä¸ªæ–¹æ³•ä¼šå¾—åˆ°byte[]ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒé€åˆ°æ–‡ä»¶æµä¸­è¿›è¡Œä¼ è¾“ï¼Œè¿™ä¹Ÿæ˜¯å®ƒçš„ç»ˆæç›®çš„ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å°†protocå¯¹è±¡åºåˆ—åŒ–æˆäº†å­—èŠ‚æµæ•°æ®ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] array = student.toByteArray();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Student student1 = Student.parseFrom(array);</span><br><span class="line">    System.out.println(student1.toString());</span><br><span class="line">&#125; <span class="keyword">catch</span> (InvalidProtocolBufferException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<p>arrayæ˜¯ä¹‹å‰åºåˆ—åŒ–åäº§ç”Ÿçš„byteæ•°æ®ï¼Œç°åœ¨é€šè¿‡Studentçš„é™æ€æ–¹æ³•parseFrom()å¯ä»¥æ•°æ®ååºåˆ—æˆStudentå¯¹è±¡ã€‚</p>
<p>é™¤äº†å¼€å§‹çš„é˜¶æ®µç¼–å†™.protoæ–‡ä»¶ï¼Œç„¶åå†æŠŠ.protoæ–‡ä»¶ç¼–è¯‘æˆjavaæ–‡ä»¶éº»çƒ¦ç‚¹ï¼Œå…¶ä½™çš„æ­¥éª¤ç”šè‡³æ¯”jsonè½¬æ¢çš„æ›´ä¾¿åˆ©ã€‚</p>
<h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>æ˜ç™½äº†ï¼Œä½¿ç”¨pbä¹‹å‰ï¼Œæ˜¯ä¸€å®šè¦ä½¿ç”¨æœ¬åœ°è½¬æ¢çš„ï¼Œåœ¨socketä¸­ä¼ è¾“çš„ä¸€å®šæ˜¯å­—èŠ‚æµã€‚åœ¨å­—èŠ‚æµä¸javaå¯¹è±¡ä¸­é—´åº”è¯¥æ˜¯æœ‰pbæ–‡ä»¶çš„ã€‚  PersonBean.Personã€‚ç”¨çš„éƒ½æ˜¯pbçš„æ–‡ä»¶åã€‚</p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/briblue/article/details/53187780">https://blog.csdn.net/briblue/article/details/53187780</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yubo_725/article/details/52219489">https://blog.csdn.net/yubo_725/article/details/52219489</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/19/myblog/JAVA/java%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/19/myblog/JAVA/java%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">javaå®ç°è‡ªå®šä¹‰æ³¨è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-19 10:22:13" itemprop="dateCreated datePublished" datetime="2022-03-19T10:22:13+08:00">2022-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-09 22:43:27" itemprop="dateModified" datetime="2022-04-09T22:43:27+08:00">2022-04-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="å…³äºæ³¨è§£"><a href="#å…³äºæ³¨è§£" class="headerlink" title="å…³äºæ³¨è§£"></a>å…³äºæ³¨è§£</h3><p>Annotationï¼Œæ³¨è§£æ˜¯Java SE 5.0ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹javaæºä»£ç çš„è¯´æ˜ï¼Œæ˜¯ä¸€ç§å…ƒæ•°æ®ï¼ˆæè¿°æ•°æ®çš„æ•°æ®ï¼‰ã€‚</p>
<ul>
<li>æ³¨é‡Š<br>   æ³¨é‡Šæ˜¯å¯¹ä»£ç çš„è¯´æ˜ï¼Œç»™ä»£ç çš„è¯»è€…çœ‹ï¼Œä¾¿äºå¸®è¯»è€…æ¢³ç†ä¸šåŠ¡é€»è¾‘ï¼›</li>
<li>æ³¨è§£<br>  æ³¨è§£ä¹Ÿæ˜¯å¯¹ä»£ç çš„è¯´æ˜ï¼Œéœ€è¦é…åˆå·¥å…·ï¼ˆè§£æå®ƒçš„ä»£ç ï¼‰ä½¿ç”¨ï¼Œå‚ä¸ä»£ç çš„ç¼–è¯‘ï¼Œç»™åº”ç”¨ç¨‹åºçœ‹çš„ã€‚</li>
</ul>
<p>æ³¨è§£çš„æ¸Šæºï¼š</p>
<p>åœ¨é¢‘ç¹ä½¿ç”¨æ³¨è§£ä¹‹å‰ï¼Œæ˜¯ç”¨xml æ¥ä½œä¸ºå…ƒæ•°æ®ä½¿ç”¨ï¼Œåœ¨æœ€å¼€å§‹ä½¿ç”¨ssm(Spring,SpringMVC,Mybatis)æ¡†æ¶æ—¶ï¼Œbeanä¸beanä¹‹é—´çš„ä¾èµ–å…³ç³»æ˜¯é€šè¿‡xmlæ–‡ä»¶æ¥é…ç½®ï¼Œè¿™ä¸ªxmlæ–‡ä»¶å’Œæºä»£ç åˆ†æ•£ï¼Œå½“å¾®æœåŠ¡ã€åˆ†å¸ƒå¼æ³¨è§£æµè¡Œï¼Œç³»ç»Ÿè¶Šæ¥è¶Šå¤§ï¼Œéœ€è¦è¶Šæ¥è¶Šå¤šçš„xmlæ–‡ä»¶æ¥é…ç½®ç®¡ç†ï¼Œæ–‡ä»¶é…ç½®å†—é•¿ï¼Œè€Œä¸”ç±»å‹ä¸å®‰å…¨ï¼ˆè¿è¡ŒæœŸæ‰ä¼šå‘ç°é”™è¯¯ï¼‰,æ­¤æ—¶å°±éœ€è¦ä¸€ç§æ¯”è¾ƒç®€å•ç›´è§‚è€Œä¸”ç±»å‹å®‰å…¨çš„é…ç½®æ–¹å¼ï¼Œæ³¨è§£å°±åº”è¿è€Œç”Ÿäº†ï¼ŒæŒ‰ç…§Springbootâ€œçº¦å®šå¤§äºé…ç½®â€çš„æ–¹å¼ï¼Œé€šè¿‡æ³¨è§£æ¥çº¦å®šå…¶å«ä¹‰ï¼Œæ›´æ˜¯å‡å°‘äº†xmlé…ç½®æ–‡ä»¶çš„æ•°é‡ã€‚<br>     å¯¹äºä¸€äº›ç»å¸¸å˜åŠ¨æˆ–è€…é…ç½®å¤æ‚çš„é…ç½®ï¼Œä½¿ç”¨xmlæ–‡ä»¶æ¥è¯´æ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œæ‰€ä»¥ç°åœ¨ç»å¸¸æ˜¯æ³¨è§£å’Œxmlæ–¹å¼å…±å­˜ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zt15732625878/article/details/99671586">https://blog.csdn.net/zt15732625878/article/details/99671586</a></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="æ³¨è§£åˆ†ç±»"><a href="#æ³¨è§£åˆ†ç±»" class="headerlink" title="æ³¨è§£åˆ†ç±»"></a>æ³¨è§£åˆ†ç±»</h3><p>æŒ‰ç…§æ¥æºåˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸º JDKçš„æ³¨è§£ï¼Œç¬¬ä¸‰æ–¹çš„æ³¨è§£ï¼Œè‡ªå®šä¹‰æ³¨è§£ã€‚</p>
<p>JDKæ³¨è§£</p>
<p>Java å†…ç½®ä¸‰å¤§æ³¨è§£<br>@Override ï¼ˆæ ‡è®°é‡å†™æ–¹æ³•ï¼‰<br>@Deprecated ï¼ˆæ ‡è®°è¿‡æ—¶ï¼‰<br>@SuppressWarnings ï¼ˆå¿½ç•¥è­¦å‘Šï¼‰</p>
<p>å…ƒæ³¨è§£ (æ³¨è§£çš„æ³¨è§£)<br>@Target ï¼ˆæ³¨è§£çš„ä½œç”¨ç›®æ ‡ï¼‰<br>@Retention ï¼ˆæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼‰<br>@Document ï¼ˆæ³¨è§£æ˜¯å¦è¢«åŒ…å«åœ¨JavaDocä¸­ï¼‰<br>@Inherited ï¼ˆæ˜¯å¦å…è®¸å­ç±»é›†æˆè¯¥æ³¨è§£ï¼‰</p>
<p>ç¬¬ä¸‰æ–¹æ³¨è§£ï¼ˆä¸»è¦æ¥æºäºå„ç§æ¡†æ¶ï¼‰<br>Springæ³¨è§£<br>@RequestMapping,@RestController,@Configuration,@Value,@Controller,@Service,@Repository,@Componentç­‰<br>SpringBootæ³¨è§£<br>@SpringBootApplication,@EnableAutoConfigurationç­‰<br>JPAæ³¨è§£<br>@Table,@Entity,@Column,@Idç­‰<br>â€¦â€¦</p>
<p>è‡ªå®šä¹‰æ³¨è§£<br>ä½¿ç”¨å…ƒæ³¨è§£è‡ªå·±å®šä¹‰çš„æ³¨è§£</p>
<h3 id="æ³¨è§£çš„å®šä¹‰"><a href="#æ³¨è§£çš„å®šä¹‰" class="headerlink" title="æ³¨è§£çš„å®šä¹‰"></a>æ³¨è§£çš„å®šä¹‰</h3><p>1&gt;.æ¯ä¸€ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯å£°æ˜äº†ä¸€ä¸ªé…ç½®å‚æ•°,<br>2&gt;.æ–¹æ³•çš„åç§°å°±æ˜¯å‚æ•°çš„åç§°,<br>3&gt;.è¿”å›å€¼ç±»å‹å°±æ˜¯å‚æ•°çš„ç±»å‹,(è¿”å›å€¼ç±»å‹åªèƒ½æ˜¯åŸºæœ¬ç±»å‹ã€Classã€Stringã€enum)<br>4&gt;.å¯ä»¥é€šè¿‡defaultæ¥å£°æ˜å‚æ•°çš„é»˜è®¤å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="meta">@interface</span> æ³¨è§£å &#123;</span><br><span class="line">    æ³¨è§£å…ƒç´ çš„å£°æ˜<span class="number">1</span> </span><br><span class="line">    æ³¨è§£å…ƒç´ çš„å£°æ˜<span class="number">2</span></span><br><span class="line">    <span class="function">type <span class="title">elementName</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">type <span class="title">elementName</span><span class="params">()</span> <span class="keyword">default</span> value</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Serviceçš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ElementType.TYPE ä»£è¡¨åœ¨ç±»ä¸Šä½¿ç”¨</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="comment">// RetentionPolicy.RUNTIME ä»£è¡¨è¿è¡Œæ—¶ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡åå°„è·å–åˆ°</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="comment">//åŒ…å«åœ¨JavaDocä¸­</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="comment">//å…è®¸é€šè¿‡åŒ…æ‰«æçš„æ–¹å¼è‡ªåŠ¨æ£€æµ‹</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Service &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * The value may indicate a suggestion for a logical component name,</span></span><br><span class="line"><span class="comment">	 * to be turned into a Spring bean in case of an autodetected component.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the suggested component name, if any (or empty String otherwise)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@AliasFor(annotation = Component.class)</span></span><br><span class="line">	<span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Annotationï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Annotation</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ‰€æœ‰æ³¨è§£</strong>ï¼Œ<strong>é»˜è®¤æ˜¯ä¸€ä¸ªå®ç°äº†Annotationæ¥å£çš„æ¥å£ã€‚</strong></p>
<h3 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£</h3><p>æ³¨è§£æ˜¯ä¸€ç§èƒ½è¢«æ·»åŠ åˆ°javaæºä»£ç ä¸­çš„å…ƒæ•°æ®ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‡è®°ï¼Œå¯ä»¥ç”¨åœ¨æ–¹æ³•ã€ç±»ã€å‚æ•°å’ŒåŒ…ä¸Šï¼Œç¨‹åºåœ¨ç¼–è¯‘æˆ–è€…è¿è¡Œæ—¶å¯ä»¥æ£€æµ‹åˆ°è¿™äº›æ ‡è®°è€Œè¿›è¡Œä¸€äº›ç‰¹æ®Šçš„å¤„ç†ã€‚</p>
<p>æ³¨è§£çš„åŸºæœ¬å…ƒç´ ï¼š</p>
<ul>
<li>ä¿®é¥°ç¬¦<br> è®¿é—®ä¿®é¥°ç¬¦å¿…é¡»ä¸ºpublic,ä¸å†™é»˜è®¤ä¸ºpubicï¼›</li>
<li>å…³é”®å­—<br> å…³é”®å­—ä¸º@interfaceï¼›</li>
<li>æ³¨è§£åç§°<br> æ³¨è§£åç§°ä¸ºè‡ªå®šä¹‰æ³¨è§£çš„åç§°ï¼Œä½¿ç”¨æ—¶è¿˜ä¼šç”¨åˆ°ï¼›</li>
<li>æ³¨è§£ç±»å‹å…ƒç´ <br> æ³¨è§£ç±»å‹å…ƒç´ æ˜¯æ³¨è§£ä¸­å†…å®¹ï¼Œå¯ä»¥ç†è§£æˆè‡ªå®šä¹‰æ¥å£çš„å®ç°éƒ¨åˆ†ï¼›</li>
</ul>
<p>ä½¿ç”¨å…ƒæ³¨è§£ä¿®é¥°æ³¨è§£ï¼š</p>
<p>@Targetï¼Œ@Retention,@Document,@Inheritedç”¨æ¥ä¿®é¥°æ³¨è§£ã€‚</p>
<p><strong>@Target</strong><br> è¡¨æ˜è¯¥æ³¨è§£å¯ä»¥åº”ç”¨çš„javaå…ƒç´ ç±»å‹ã€‚<br>ElementType.TYPE    åº”ç”¨äºç±»ã€æ¥å£ï¼ˆåŒ…æ‹¬æ³¨è§£ç±»å‹ï¼‰ã€æšä¸¾<br>ElementType.FIELD    åº”ç”¨äºå±æ€§ï¼ˆåŒ…æ‹¬æšä¸¾ä¸­çš„å¸¸é‡ï¼‰<br>ElementType.METHOD    åº”ç”¨äºæ–¹æ³•<br>ElementType.PARAMETER    åº”ç”¨äºæ–¹æ³•çš„å½¢å‚<br>ElementType.CONSTRUCTOR    åº”ç”¨äºæ„é€ å‡½æ•°<br>ElementType.LOCAL_VARIABLE    åº”ç”¨äºå±€éƒ¨å˜é‡<br>ElementType.ANNOTATION_TYPE    åº”ç”¨äºæ³¨è§£ç±»å‹<br>ElementType.PACKAGE    åº”ç”¨äºåŒ…<br>ElementType.TYPE_PARAMETER    1.8ç‰ˆæœ¬æ–°å¢ï¼Œåº”ç”¨äºç±»å‹å˜é‡<br>ElementType.TYPE_USE    1.8ç‰ˆæœ¬æ–°å¢ï¼Œåº”ç”¨äºä»»ä½•ä½¿ç”¨ç±»å‹çš„è¯­å¥ä¸­ï¼ˆä¾‹å¦‚å£°æ˜è¯­å¥ã€æ³›å‹å’Œå¼ºåˆ¶è½¬æ¢è¯­å¥ä¸­çš„ç±»å‹ï¼‰</p>
<p>@Retention<br>  è¡¨æ˜è¯¥æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ<br>RetentionPolicy.SOURCE    ç¼–è¯‘æ—¶è¢«ä¸¢å¼ƒï¼Œä¸åŒ…å«åœ¨ç±»æ–‡ä»¶ä¸­<br>RetentionPolicy.CLASS    JVMåŠ è½½æ—¶è¢«ä¸¢å¼ƒï¼ŒåŒ…å«åœ¨ç±»æ–‡ä»¶ä¸­ï¼Œé»˜è®¤å€¼<br>RetentionPolicy.RUNTIME    ç”±JVM åŠ è½½ï¼ŒåŒ…å«åœ¨ç±»æ–‡ä»¶ä¸­ï¼Œåœ¨è¿è¡Œæ—¶å¯ä»¥è¢«è·å–åˆ°</p>
<p>@Document<br>  è¡¨æ˜è¯¥æ³¨è§£æ ‡è®°çš„å…ƒç´ å¯ä»¥è¢«Javadoc æˆ–ç±»ä¼¼çš„å·¥å…·æ–‡æ¡£åŒ–</p>
<p>@Inherited<br>  è¡¨æ˜ä½¿ç”¨äº†@Inheritedæ³¨è§£çš„æ³¨è§£ï¼Œæ‰€æ ‡è®°çš„ç±»çš„å­ç±»ä¹Ÿä¼šæ‹¥æœ‰è¿™ä¸ªæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Info &#123;</span><br><span class="line">      <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;tracy&quot;</span>;</span><br><span class="line">      <span class="function"><span class="keyword">boolean</span> <span class="title">isDelete</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"><a href="#ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"></a>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="comment">// ä¸ºPersonç±»é…ç½®äº†åˆšåˆšå®šä¹‰çš„æ³¨è§£@Info</span></span><br><span class="line"><span class="meta">@Info(isDelete = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨åå°„è§£ææ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//è·å–Personçš„Classå¯¹è±¡(ç±»)</span></span><br><span class="line">            Person person = Person.builder().build();</span><br><span class="line">            Class clazz = person.getClass();</span><br><span class="line">            <span class="comment">//åˆ¤æ–­ç±»ä¸Šæ˜¯å¦æœ‰Infoæ³¨è§£</span></span><br><span class="line">            <span class="keyword">if</span> (clazz.isAnnotationPresent(Info.class)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Personç±»ä¸Šé…ç½®äº†Infoæ³¨è§£ï¼&quot;</span>);</span><br><span class="line">                <span class="comment">//è·å–è¯¥å¯¹è±¡ä¸ŠInfoç±»å‹çš„æ³¨è§£</span></span><br><span class="line">                Info infoAnno = (Info) clazz.getAnnotation(Info.class);</span><br><span class="line">                System.out.println(<span class="string">&quot;infoAnno.value :&quot;</span> + infoAnno.value() + <span class="string">&quot;,infoAnno.isDelete:&quot;</span> + infoAnno.isDelete());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Personç±»ä¸Šæ²¡æœ‰é…ç½®Infoæ³¨è§£ï¼&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºä¸€ä¸ªç±»æˆ–è€…æ¥å£æ¥è¯´ï¼ŒClassç±»(java.langåŒ…ä¸‹)ä¸­æä¾›äº†ä¸€äº›æ–¹æ³•ç”¨äºåå°„æ³¨è§£ï¼Œå½“ç„¶å¯¹äºå­—æ®µã€æ–¹æ³•æ¥è¯´åå°„æ³¨è§£çš„æ–¹å¼å¾ˆç±»ä¼¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›æŒ‡å®šçš„æ³¨è§£</span></span><br><span class="line">getAnnotation</span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦è¢«æŒ‡å®šæ³¨è§£ä¿®é¥°</span></span><br><span class="line">isAnnotationPresent</span><br><span class="line"><span class="comment">//è¿”å›æ‰€æœ‰çš„æ³¨è§£</span></span><br><span class="line">getAnnotations</span><br></pre></td></tr></table></figure>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zt15732625878/article/details/100061528">https://blog.csdn.net/zt15732625878/article/details/100061528</a></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä¾‹å­2"><a href="#ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä¾‹å­2" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä¾‹å­2"></a>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä¾‹å­2</h3><p>&lt;1&gt;.ä½œç”¨åœ¨å±æ€§ä¸Šæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> FiledAnnotation &#123;</span><br><span class="line">	 <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;GetFiledAnnotation&quot;</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&lt;2&gt;.ä½œç”¨åœ¨æ–¹æ³•ä¸Šæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MethodAnnotation &#123;</span><br><span class="line">	<span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> &quot;MethodAnnotation&quot;</span>;   </span><br><span class="line">    <span class="function">String <span class="title">url</span><span class="params">()</span> <span class="keyword">default</span> &quot;https:<span class="comment">//www.cnblogs.com&quot;;</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p>&lt;3&gt;.ä½œç”¨åœ¨ç±»ä¸Šæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> TypeAnnotation &#123;</span><br><span class="line">	<span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;Is-TypeAnnotation&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&lt;4&gt;.ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TypeAnnotation(value = &quot;doWork&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Worker</span> </span>&#123;</span><br><span class="line"><span class="meta">@FiledAnnotation(value = &quot;CSDNåšå®¢&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String myfield = <span class="string">&quot;&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@MethodAnnotation()</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getDefaultInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;do the getDefaultInfo method&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@MethodAnnotation(name = &quot;ç™¾åº¦&quot;, url = &quot;www.baidu.com&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getDefineInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;do the getDefineInfo method&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&lt;5&gt;.æµ‹è¯•è‡ªå®šä¹‰æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">	</span><br><span class="line">    Class cls = Class.forName(<span class="string">&quot;com.zbz.annotation.pattern3.Worker&quot;</span>);</span><br><span class="line">    Method[] method = cls.getMethods();</span><br><span class="line">    <span class="comment">/**åˆ¤æ–­Workerç±»ä¸Šæ˜¯å¦æœ‰TypeAnnotationæ³¨è§£*/</span></span><br><span class="line">    <span class="keyword">boolean</span> flag = cls.isAnnotationPresent(TypeAnnotation.class);</span><br><span class="line">    <span class="comment">/**è·å–Workerç±»ä¸Šæ˜¯TypeAnnotationæ³¨è§£å€¼*/</span></span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">    	TypeAnnotation typeAnno = (TypeAnnotation) cls.getAnnotation(TypeAnnotation.class);</span><br><span class="line">    	System.out.println(<span class="string">&quot;@TypeAnnotationå€¼:&quot;</span> + typeAnno.value());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**æ–¹æ³•ä¸Šæ³¨è§£*/</span></span><br><span class="line">    List&lt;Method&gt; list = <span class="keyword">new</span> ArrayList&lt;Method&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; method.length; i++) &#123;</span><br><span class="line">        list.add(method[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (Method m : list) &#123;</span><br><span class="line">    	MethodAnnotation methodAnno = m.getAnnotation(MethodAnnotation.class);</span><br><span class="line">        <span class="keyword">if</span> (methodAnno == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        System.out.println( <span class="string">&quot;æ–¹æ³•åç§°:&quot;</span> + m.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•ä¸Šæ³¨è§£name = &quot;</span> + methodAnno.name());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•ä¸Šæ³¨è§£url = &quot;</span> + methodAnno.url());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**å±æ€§ä¸Šæ³¨è§£*/</span></span><br><span class="line">    List&lt;Field&gt; fieldList = <span class="keyword">new</span> ArrayList&lt;Field&gt;();  <span class="comment">//Fieldè¡¨ç¤ºå±æ€§</span></span><br><span class="line">    <span class="keyword">for</span> (Field f : cls.getDeclaredFields()) &#123;<span class="comment">// è®¿é—®æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">    	FiledAnnotation filedAno = f.getAnnotation(FiledAnnotation.class);</span><br><span class="line">    	System.out.println( <span class="string">&quot;å±æ€§åç§°:&quot;</span> + f.getName());</span><br><span class="line">    	System.out.println(<span class="string">&quot;å±æ€§æ³¨è§£å€¼FiledAnnotation = &quot;</span> + filedAno.value());</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhangbeizhen18/article/details/87885441/">https://blog.csdn.net/zhangbeizhen18/article/details/87885441/</a></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="ç†è§£"><a href="#ç†è§£" class="headerlink" title="ç†è§£"></a>ç†è§£</h3><p>è‡ªå®šä¹‰æ³¨è§£åƒæ˜¯ä¸ºç±»æˆ–è€…ä»€ä¹ˆçš„æ–°å¢åŠ äº†å±æ€§ï¼Œå¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œé€šè¿‡ç±»å¯ä»¥è·å¾—ç±»ä¸Šçš„è‡ªå®šä¹‰æ³¨è§£ï¼Œç„¶åé€šè¿‡æ³¨è§£è·å¾—æ³¨è§£ä¸­çš„å€¼ã€‚æ³¨è§£ä¸æ˜¯å±äºå¯¹è±¡çš„ã€‚å®šä¹‰åœ¨å±æ€§ä¸Šçš„ï¼Œå¯ä»¥ç”¨å±æ€§æ³¨è§£æ¥åŒºåˆ«è¿™äº›å±æ€§ï¼Œç›¸å½“äºå±æ€§åçš„åˆ«åã€‚</p>
<h3 id="å…¶ä»–å‚è€ƒ"><a href="#å…¶ä»–å‚è€ƒ" class="headerlink" title="å…¶ä»–å‚è€ƒ"></a>å…¶ä»–å‚è€ƒ</h3><p>è‡ªå®šä¹‰æ³¨è§£+AOPï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/283936459">https://zhuanlan.zhihu.com/p/283936459</a></p>
<p>ä½¿ç”¨æ–¹æ³•ä¸Šçš„æ³¨è§£ï¼Œå®ç°é€šè¿‡æ³¨è§£æ¥å”¤é†’ä¸€ä¸ªç±»é‡Œæ–¹æ³•çš„æ•ˆæœï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b5b79434d3b5">https://www.jianshu.com/p/b5b79434d3b5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/12/myblog/JAVA/Mybatis%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/12/myblog/JAVA/Mybatis%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">mybatiså…¥é—¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-03-12 21:21:21 / Modified: 23:44:29" itemprop="dateCreated datePublished" datetime="2022-03-12T21:21:21+08:00">2022-03-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>mybatis</strong></p>
<h3 id="â›½ï¸ç¬¬ä¸€è¯¾"><a href="#â›½ï¸ç¬¬ä¸€è¯¾" class="headerlink" title="â›½ï¸ç¬¬ä¸€è¯¾"></a>â›½ï¸ç¬¬ä¸€è¯¾</h3><p>âœ…å¼€å‘æ­¥éª¤ï¼š</p>
<p>1.æ·»åŠ Mybatisçš„åæ ‡ã€mysqlçš„é©±åŠ¨ï¼ˆpom.xmlä¸­ï¼‰</p>
<p>2.åˆ›å»ºæ•°æ®è¡¨ã€ç¼–å†™å¯¹åº”çš„å®ä½“ç±»ï¼ˆæ“ä½œå®ä½“ä»è€Œé—´æ¥æ“ä½œè¡¨ï¼ŒæŸ¥è¯¢è¡¨ä»è€Œé—´æ¥å°è£…å®ä½“ï¼‰</p>
<p>3.ç¼–å†™æ˜ å°„æ–‡ä»¶UserMapper.xml  ä¸»è¦æè¿°sqlæ–‡ä»¶ï¼ˆç¬¬ä¸€ä¸ªç‚¹ï¼šnamespaceå‘½åç©ºé—´ï¼Œç¬¬äºŒä¸ªç‚¹ï¼šidå’ŒresultTypeï¼Œé€šè¿‡å‘½åç©ºé—´.idè¿›è¡Œè°ƒç”¨ï¼ŒresultTypeç»“æœé›†ï¼Œå°è£…åˆ°æŒ‡å®šçš„ç±»å‹ä¸­ï¼‰</p>
<p>4.ç¼–å†™æ ¸å¿ƒæ–‡ä»¶sqlMapConfig.xmlï¼Œé…ç½®mybatisæ ¸å¿ƒå†…å®¹çš„ï¼Œé…ç½®æ•°æ®æºä¿¡æ¯ã€åŠ è½½æ˜ å°„æ–‡ä»¶ï¼ˆå¯èƒ½å¾ˆå¤šï¼‰ã€‚</p>
<p>5.ç¼–å†™æµ‹è¯•ç±»ï¼ˆ1.è·å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ 2.è·å¾—sessionå·¥å‚å¯¹è±¡ 3.è·å¾—sessionä¼šè¯å¯¹è±¡ 4.æ‰§è¡Œæ“ä½œ 5.æ‰“å°æ•°æ® 6.é‡Šæ”¾èµ„æºï¼‰</p>
<p>mybatisæ˜ å°„æ–‡ä»¶ï¼š </p>
<p><img src="https://img-blog.csdnimg.cn/6779525e71d546109fea38a2120c0479.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFkZWxsbGx4eHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="Pasted Graphic.tiff"></p>
<p>DTDçº¦æŸå¤´åœ¨å†™æ ‡ç­¾æˆ–è€…å±æ€§æ—¶èƒ½ç»™æç¤ºã€‚</p>
<p>âœ…ä»€ä¹ˆæ˜¯mybatisï¼Ÿ</p>
<p>æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatisï¼Œ2010å¹´è¿ç§»åˆ°google codeï¼Œæ”¹åä¸ºmybatisï¼Œ2013å¹´è¿ç§»åˆ°githubã€‚</p>
<p>Mybatisæ˜¯ä¸€ä¸ªå®ç°äº†æ•°æ®æŒä¹…åŒ–çš„å¼€æºæ¡†æ¶ï¼Œç®€å•ç†è§£å°±æ˜¯å¯¹JDBCè¿›è¡Œå°è£…ã€‚</p>
<p>ORMappingï¼šObject Relationship Mapping å¯¹è±¡å…³ç³»æ˜ å°„</p>
<p>å¯¹è±¡ï¼šé¢å‘å¯¹è±¡</p>
<p>å…³ç³»ï¼šå…³ç³»å‹æ•°æ®åº“</p>
<p>æ˜ å°„ï¼šjavaåˆ°mysqlçš„æ˜ å°„ï¼Œå¼€å‘è€…ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥ç®¡ç†æ•°æ®åº“ã€‚</p>
<p>âœ…mybatisä¼˜ç¼ºç‚¹</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>1âƒ£ï¸ä¸JDBCç›¸æ¯”ï¼Œå‡å°‘50%ä»£ç é‡</p>
<p>2âƒ£ï¸æœ€ç®€å•çš„æŒä¹…åŒ–æ¡†æ¶ï¼Œå°å·§ç®€å•</p>
<p>3âƒ£ï¸çµæ´»ï¼Œä¸ä¼šå¯¹ç¨‹åºæˆ–æ•°æ®åº“çš„ç°æœ‰è®¾è®¡å¼ºè¡ŒåŠ ä»»ä½•å½±å“ï¼Œsqlå†™åœ¨xmlä¸­ï¼Œä»ç¨‹åºä»£ç ä¸­å½»åº•åˆ†ç¦»ï¼Œè§£è€¦åˆï¼Œå¯é‡ç”¨ã€‚</p>
<p>4âƒ£ï¸æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlè¯­å¥ã€‚</p>
<p>5âƒ£ï¸æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡çš„å±æ€§ä¸æ•°æ®åº“çš„ORMå­—æ®µå…³ç³»æ˜ å°„ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>1âƒ£ï¸åŠè‡ªåŠ¨çš„ï¼Œsqlè¯­å¥ç¼–å†™å·¥ä½œé‡å¤§</p>
<p>2âƒ£ï¸ä¾èµ–äºæ•°æ®åº“ï¼Œæ•°æ®åº“è¿ç§»æ€§å·®ã€‚</p>
<p>âœ…Mybatisæ ¸å¿ƒæ¥å£å’Œç±»</p>
<p>javaå’ŒMybatisçš„è¿æ¥è€…ï¼šsqlsession</p>
<p>SqlSessionFactoryBuilderæ¥å£ build()æ–¹æ³•ã€‚å¾—åˆ°SqlSessionFactoryï¼ˆå·¥å‚å¯¹è±¡ï¼‰ã€‚è°ƒç”¨openSession()æ–¹æ³•ï¼Œè·å¾—SqlSessionã€‚</p>
<p>âœ…Mybatisçš„å¼€å‘æ–¹å¼</p>
<p>1âƒ£ï¸ä½¿ç”¨åŸç”Ÿæ¥å£</p>
<p>2âƒ£ï¸Mapperä»£ç†å®ç°è‡ªå®šä¹‰æ¥å£</p>
<p>ä¸¤ç§æ–¹æ³•éƒ½æ˜¯é€šè¿‡sqlsessionçš„ç›¸å…³æ–¹æ³•æ¥å®Œæˆçš„ã€‚</p>
<p>âœ…åˆ›å»ºç¬¬ä¸€ä¸ªmybatisé¡¹ç›®</p>
<p>1âƒ£ï¸æ–°å»ºä¸€ä¸ªmavené¡¹ç›®</p>
<p>pom.xmlæ–‡ä»¶ï¼šå¢åŠ mybatisåæ ‡org.mybatis. mysqlé©±åŠ¨</p>
<p>â“pom.xmlä¸­åŠ å…¥ä¾èµ–æ˜¾çº¢æ€ä¹ˆåŠï¼Ÿ</p>
<p>è§£å†³ï¼šé¦–å…ˆåˆ é™¤.mæ–‡ä»¶å¤¹ä¸‹çš„repoæ–‡ä»¶å¤¹ï¼Œç„¶åå›åˆ°é¡¹ç›®å³é”®pom.xmlï¼Œé€‰mavenï¼Œé€‰reimport</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.28<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2âƒ£ï¸æ–°å»ºè¡¨</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database mybatis;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> account(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line"> username <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> password <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> age <span class="type">int</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<p>3âƒ£ï¸æ–°å»ºæ•°æ®è¡¨å¯¹åº”çš„å®ä½“ç±»</p>
<p>è¿™é‡Œç”¨Lombokåº“ï¼Œç”¨æ¥è‡ªåŠ¨ç”Ÿæˆæ„é€ æ–¹æ³•.ç±»çº§åˆ«çš„ @Data æ³¨é‡Šæ˜¯ç”± Lombok æä¾›çš„ï¼Œå®ƒå‘Šè¯‰ Lombok ç”Ÿæˆæ‰€æœ‰ç¼ºå°‘çš„æ–¹æ³•ï¼Œä»¥åŠæ¥å—æ‰€æœ‰finalå±æ€§ä½œä¸ºå‚æ•°çš„æ„é€ å‡½æ•°ã€‚</p>
<p>åŠ lombokä¾èµ–æ—¶ï¼Œæœ‰é”™è¯¯ï¼Œå› ä¸ºç‰ˆæœ¬å·çš„åŸå› ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="keyword">private</span> String password;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>4âƒ£ï¸åˆ›å»ºmybatisé…ç½®æ–‡ä»¶ config.xml æ–‡ä»¶åå¯è‡ªå®šä¹‰ï¼Œå»ºåœ¨resourceæ–‡ä»¶å¤¹ä¸­</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">â€‹    <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®Mybatisè¿è¡Œç¯å¢ƒ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- ä¸‹é¢å¯ä»¥å¤šä¸ªenvironmentï¼Œä½†æ˜¯ä¸Šé¢é€‰ä¸€ä¸ª --&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">â€‹      <span class="comment">&lt;!-- é…ç½®jdbcäº‹åŠ¡ç®¡ç† --&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">â€‹      <span class="comment">&lt;!--POOLEDé…ç½®JDBCæ•°æ®æºè¿æ¥æ±  --&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xuan&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jade&quot;</span>/&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>5âƒ£ï¸ä½¿ç”¨åŸç”Ÿæ¥å£çš„æ–¹å¼å¼€å‘</p>
<p>ï¼ˆ1ï¼‰Mybatisæ¡†æ¶éœ€è¦å¼€å‘è€…è‡ªå®šä¹‰sqlè¯­å¥ï¼Œå†™åœ¨Mapper.xmlæ–‡ä»¶ä¸­ï¼Œå®é™…å¼€å‘ä¸­ï¼Œä¼šä¸ºæ¯ä¸ªå®ä½“ç±»åˆ›å»ºå¯¹åº”çš„Mapper.xmlï¼Œå®šä¹‰ç®¡ç†è¯¥å¯¹è±¡æ•°æ®çš„SQLã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">â€‹    <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- namespaceæ˜¯mybatisåŠ è½½é…ç½®æ–‡ä»¶æ—¶è¦æ‰¾çš„è·¯å¾„ï¼ˆåŒ…+æ–‡ä»¶åçš„å½¢å¼ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">  idæ˜¯ä¸€ä¼šå„¿è°ƒç”¨sqlè¯­å¥æ—¶è¦ç”¨çš„åå­—ï¼Œè‡ªå®šä¹‰çš„.</span></span><br><span class="line"><span class="comment">  parameterTypeæ˜¯è¦ä¼ å…¥çš„å‚æ•°,ä¸‹é¢è¯­å¥æ˜¯ä»å¯¹è±¡ä¸­å–å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.demo.mybatis.mapper.AccountMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    insert into account(username, password, age) values(#&#123;username&#125;, #&#123;password&#125;, #&#123;age&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰åœ¨å…¨å±€é…ç½®æ–‡ä»¶config.xmlä¸­æ³¨å†ŒAccountMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨å†ŒAccountMapper.xmlï¼ŒåŠ è½½æ˜ å°„æ–‡ä»¶ï¼Œè¿™é‡Œå¸¦åç¼€ï¼Œæ‰€ä»¥ç”¨è·¯å¾„/ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/demo/mybatis/mapper/AccountMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ3ï¼‰è°ƒç”¨mybatisçš„åŸç”Ÿæ¥å£æ‰§è¡Œæ·»åŠ æ“ä½œï¼Œå†™æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.demo.mybatis.entity.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInsert</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">//åŠ è½½mybatisé…ç½®æ–‡ä»¶config.xml</span></span><br><span class="line">â€‹    InputStream inputStream = TestInsert.class.getClassLoader().getResourceAsStream(<span class="string">&quot;config.xml&quot;</span>); <span class="comment">//å˜æˆä¸€ä¸ªæµ</span></span><br><span class="line">â€‹    SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">â€‹    SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream); <span class="comment">//ä¼ å…¥æµ</span></span><br><span class="line">â€‹    SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">//ç„¶åå°±å¯ä»¥è¿›è¡Œjavaå’Œmysqlçš„å…³è”ï¼Œç»“åˆnamespaceå’Œidè·å–ä½ç½®</span></span><br><span class="line">â€‹    <span class="comment">//å› ä¸ºé…ç½®æ–‡ä»¶å·²ç»åŠ è½½åˆ°ç¯å¢ƒä¸­ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¸‹é¢æ‰¾åˆ°</span></span><br><span class="line">â€‹    String statement = <span class="string">&quot;com.demo.mybatis.mapper.AccountMapper.save&quot;</span>;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">//ä¼ å‚æ•°éœ€è¦å¯¹è±¡ï¼Œå› æ­¤éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">â€‹    Account account = <span class="keyword">new</span> Account(<span class="number">1L</span>, <span class="string">&quot;liu&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="number">12</span>);</span><br><span class="line">â€‹    sqlSession.insert(statement, account);</span><br><span class="line">â€‹    <span class="comment">//commitæ–¹æ³•æäº¤äº‹åŠ¡</span></span><br><span class="line">â€‹    sqlSession.commit();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â“å‡ºç°é—®é¢˜ï¼Œæ˜æ˜å·²ç»æœ‰lombokï¼Œå¯æ˜¯åœ¨å¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™è¿˜æ˜¯æœ‰é—®é¢˜ã€‚</p>
<p>è§£å†³ï¼šæ·»åŠ æ’ä»¶ï¼šè®¾ç½®é‡Œæ‰¾åˆ°pluginsï¼Œæœç´¢lombok pluginï¼Œå®‰è£…ï¼Œé‡å¯ã€‚å‹¾é€‰é…ç½®ï¼šsettingâ€“&gt;build,excecution,deploymentâ€“&gt;compilerâ€“&gt;annotation processorså‹¾é€‰ä¸Š enable annotation processingã€‚å³å¯ç”Ÿæ•ˆã€‚</p>
<p>âš ï¸mavenå·¥ç¨‹ä¸­ä¸èƒ½ç›´æ¥è¯»å–resourceä»¥å¤–çš„xmlæ–‡ä»¶ï¼Œå¾—åœ¨pomé‡ŒåŠ ä¸€ä¸ªé…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">include</span>&gt;</span>*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">include</span>&gt;</span>*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>â“java.lang.ClassNotFoundException: Cannot find class: com.mysql.cj.jdbc</p>
<p>è§£å†³ï¼š<property name="driver" value="com.mysql.cj.jdbc.Driver"> å°‘å†™äº†Driver</property></p>
<p>ğŸ‰Success</p>
<h3 id="â›½ï¸ç¬¬äºŒè¯¾"><a href="#â›½ï¸ç¬¬äºŒè¯¾" class="headerlink" title="â›½ï¸ç¬¬äºŒè¯¾"></a>â›½ï¸ç¬¬äºŒè¯¾</h3><p>âœ…ä½¿ç”¨Mapperä»£ç†å®ç°è‡ªå®šä¹‰æ¥å£</p>
<p>å®é™…å¼€å‘ä¸­æ¨èç”¨è¿™ç§ã€‚</p>
<p>Mapperæ˜¯mybatiså†…éƒ¨æä¾›çš„ç»„å»ºï¼Œæ¥å£æ˜¯å¼€å‘è€…è‡ªå·±å†™ï¼Œæ¥å£çš„å®ç°ç±»æ˜¯ç”±mybatisåŠ¨æ€ç”Ÿæˆå®ç°ç±»ï¼ŒåŒæ—¶è·å–å®ç°ç±»çš„å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ç”¨ã€‚</p>
<p>1âƒ£ï¸è‡ªå®šä¹‰æ¥å£ï¼Œå®šä¹‰ç›¸å…³çš„ä¸šåŠ¡æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.mybatis.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.mybatis.entity.Account;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountRepository</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">save</span><span class="params">(Account account)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(Account account)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Account <span class="title">findById</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>2âƒ£ï¸ç¼–å†™ä¸æ¥å£ç›¸å¯¹åº”çš„Mapper.xmlï¼Œå®šä¹‰æ¥å£æ–¹æ³•å¯¹åº”çš„sqlè¯­å¥ã€‚</p>
<p>statementæ ‡ç­¾ï¼ˆå¦‚<code>&lt;insert&gt;</code>ï¼‰å¯æ ¹æ®sqlæ‰§è¡Œçš„ä¸šåŠ¡é€‰æ‹©insertã€deleteã€updateã€selectã€‚</p>
<p>Mybatisä¼šè‡ªåŠ¨æ ¹æ®è§„åˆ™è‡ªåŠ¨åˆ›å»ºæ¥å£å®ç°ç±»çš„ä»£ç†å¯¹è±¡ã€‚</p>
<p>è§„åˆ™ï¼š</p>
<ol>
<li>Mapper.xmlä¸­namespaceä¸ºæ¥å£çš„å…¨ç±»åã€‚</li>
<li>Mapper.xmlä¸­statementçš„idä¸ºæ¥å£ä¸­å¯¹åº”çš„æ–¹æ³•åã€‚</li>
<li>Mapper.xmlä¸­statementçš„parameterTypeå’Œæ¥å£ä¸­å¯¹åº”æ–¹æ³•çš„å‚æ•°ç±»å‹ä¸€è‡´ã€‚</li>
<li>Mapper.xmlä¸­statementçš„resultTypeå’Œæ¥å£ä¸­å¯¹åº”çš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸€è‡´ã€‚</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">â€‹    <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.demo.mybatis.repository.AccountRepository&quot;</span>&gt;</span>  <span class="comment">&lt;!-- æ˜ å°„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- æ·»åŠ  ä¿®æ”¹ åˆ é™¤ ä¸‰ä¸ªæ“ä½œåœ¨æ•°æ®åº“è¿”å›çš„ç»“æœä¸€å®šæ˜¯intï¼Œ æ‰€ä»¥è¿™é‡Œæ²¡æœ‰resultTypeå±æ€§ --&gt;</span></span><br><span class="line">â€‹    insert into account(username, password, age) values(#&#123;username&#125;, #&#123;password&#125;, #&#123;age&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    update account set username = #&#123;username&#125;, password = #&#123;password&#125;, age = #&#123;age&#125; where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;long&quot;</span>&gt;</span></span><br><span class="line">â€‹    delete from account where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- ä¸å†™é›†åˆç±»å‹ï¼Œè€Œå†™é›†åˆé‡Œçš„æ³›å‹ç±»å‹ --&gt;</span></span><br><span class="line">â€‹    select * from account</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;long&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    select * from account where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>3âƒ£ï¸åœ¨config.xmlä¸­æ³¨å†ŒAccountRepository.xml</p>
<p><code>&lt;mappers&gt;</code></p>
<p>  <code>&lt;mapper resource=&quot;com/demo/mybatis/mapper/AccountMapper.xml&quot;&gt;&lt;/mapper&gt;</code></p>
<p>  <code>&lt;!-- æ³¨å†Œç¬¬äºŒè¯¾ä¸­çš„AccountRepository.xml --&gt;</code></p>
<p>  <code>&lt;mapper resource=&quot;com/demo/mybatis/repository/AccountRepository.xml&quot;&gt;&lt;/mapper&gt;</code></p>
<p><code>&lt;/mappers&gt;</code></p>
<p>4âƒ£ï¸æµ‹è¯•</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">â€‹    <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®Mybatisè¿è¡Œç¯å¢ƒ ,é…ç½®æ•°æ®æºä¿¡æ¯--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- ä¸‹é¢å¯ä»¥å¤šä¸ªenvironmentï¼Œä½†æ˜¯ä¸Šé¢é€‰ä¸€ä¸ª --&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">â€‹      <span class="comment">&lt;!-- é…ç½®jdbcäº‹åŠ¡ç®¡ç† --&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">â€‹      <span class="comment">&lt;!--POOLEDé…ç½®JDBCæ•°æ®æºè¿æ¥æ±  --&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xuan&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jade&quot;</span>/&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- æ³¨å†ŒAccountMapper.xmlï¼ŒåŠ è½½æ˜ å°„æ–‡ä»¶ï¼Œè¿™é‡Œå¸¦åç¼€ï¼Œæ‰€ä»¥ç”¨è·¯å¾„/ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/demo/mybatis/mapper/AccountMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- æ³¨å†Œç¬¬äºŒè¯¾ä¸­çš„AccountRepository.xml --&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/demo/mybatis/repository/AccountRepository.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ğŸ¤”æˆ‘å¯¹åŠ¨æ€ä»£ç†çš„ç†è§£ï¼š</p>
<p>è‡ªå·±åªéœ€è¦å†™ä¸€ä¸ªç±»ï¼Œæ¡†æ¶ä¸ºæˆ‘åŠ¨æ€ä»£ç†å®ç°æ¥å£çš„å®ç°ç±»ï¼Œå¹¶ä¸”è¿˜ç»™æˆ‘å®ç°ç±»çš„å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ç”¨ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ç¬¬ä¸€ç§æ–¹æ³•ï¼Œç¡®å®æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦è‡ªå·±å†™statementï¼Œä½†æ˜¯è¯´çš„è‡ªå·±å†™æ¥å£å®ç°ç±»ï¼Ÿæ²¡æœ‰å§</p>
<h3 id="â›½ï¸ç¬¬ä¸‰è¯¾"><a href="#â›½ï¸ç¬¬ä¸‰è¯¾" class="headerlink" title="â›½ï¸ç¬¬ä¸‰è¯¾"></a>â›½ï¸ç¬¬ä¸‰è¯¾</h3><p>Mapper.xmlè§£è¯»</p>
<ol>
<li><p>statementæ ‡ç­¾ï¼Œselectã€updateã€deleteã€insertåˆ†åˆ«å¯¹åº”æŸ¥è¯¢ã€ä¿®æ”¹ã€åˆ é™¤ã€æ·»åŠ </p>
</li>
<li><p>parameterTypeï¼šå‚æ•°æ•°æ®ç±»å‹</p>
<p>A. åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé€šè¿‡idæŸ¥è¯¢Account,  â€œlongâ€</p>
<p>b. Stringç±»å‹ï¼Œé€šè¿‡nameæŸ¥è¯¢Accountï¼Œâ€java.lang.Stringâ€</p>
<p>C. åŒ…è£…ç±»ï¼Œé€šè¿‡idæŸ¥è¯¢Accountã€‚â€œjava.lang.longâ€</p>
</li>
</ol>
<p>â€‹     {ç”¨åŒ…è£…ç±»çš„å¥½å¤„ï¼šåŸºæœ¬æ•°æ®ç±»å‹æ¥å—ä¸äº†nullï¼Œnullä¼ è¿›æ¥æŠ¥å¼‚å¸¸ï¼Œä¸šåŠ¡ä¸­å¯èƒ½ä¼šæœ‰nullï¼Œéœ€è¦åˆ¤æ–­}</p>
<p>   D.å¤šä¸ªå‚æ•°ï¼Œé€šè¿‡usernameå’ŒageæŸ¥è¯¢account</p>
<p>â€‹     âš ï¸ï¼šå¦‚æœè¿”å›ç»“æœå¯èƒ½å¤šä¸ªï¼Œå°±å¾—Listã€‚å¥½åƒå¤šä¸ªæ“ä½œcommitä¸€æ¬¡å°±è¡Œå§ã€‚</p>
<p>   e.java bean</p>
<p>â€‹    updateæ“ä½œä¼ å…¥çš„accountå¯¹è±¡</p>
<ol>
<li><p>resultTypeç»“æœç±»å‹</p>
<p>A. åŸºæœ¬æ•°æ®ç±»å‹</p>
<p>B. åŒ…è£…ç±» java.lang.Integer</p>
<p>C. stringç±»å‹ï¼Œæ¯”å¦‚é€šè¿‡idæŸ¥è¯¢username</p>
</li>
</ol>
<p>  âš ï¸çœ‹åˆ°idæœ‰ä¸­æ–­ï¼Œè¿™æ˜¯å› ä¸ºä¹‹å‰ç¨‹åºæœ‰é”™å¼‚å¸¸äº†ï¼Œæ²¡commitæäº¤ï¼Œä½†æ˜¯idå·²ç»æ¶¨äº†ã€‚</p>
<p>   D. Java bean</p>
<p>â€‹    findAllè¿”å›çš„accountå¯¹è±¡</p>
<h3 id="â›½ï¸ç¬¬å››è¯¾"><a href="#â›½ï¸ç¬¬å››è¯¾" class="headerlink" title="â›½ï¸ç¬¬å››è¯¾"></a>â›½ï¸ç¬¬å››è¯¾</h3><p>âœ…åŠè”æŸ¥è¯¢</p>
<p>1âƒ£ï¸ä¸€å¯¹å¤šï¼Œä¸€ä¸ªç­å¯¹åº”å¤šä¸ªå­¦ç”Ÿ</p>
<p>è¦æŸ¥è¯¢id=1çš„å­¦ç”Ÿçš„åå­—ã€ç­çº§</p>
<p>å»ºè¡¨ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line"> name <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> cid <span class="type">int</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> classes(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line"> name <span class="type">varchar</span>(<span class="number">11</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢è¯­å¥ï¼š <code>select * from student s, classes c where s.id =1 and s.cid=c.id;</code></p>
<p>ğŸ¤”é¦–å…ˆå»ºæ¥å£ï¼Œå†å†™xxxRepository.xml, å†æŠŠxmlæ–‡ä»¶åŠ è½½åˆ°configä¸­ã€‚ æµ‹è¯•ä»£ç ä¸­ï¼Œç”¨æ–¹æ³•å°±å¥½äº†ã€‚</p>
<p>ğŸmybatiså’Œjavaç±»æ€ä¹ˆåšåˆ°æ˜ å°„ï¼Œmybatisä¸å…³æ³¨è¡¨å’Œç±»çš„ç»“æ„ï¼Œå…³æ³¨çš„æ˜¯ç»“æœé›†å’Œç±»çš„æ˜ å°„ã€‚</p>
<p>ä»selectæŸ¥å‡ºæ¥çš„ç»“æœé›†ï¼Œåˆ°èµ‹ç»™resutlçš„ç»“æœçš„æ˜ å°„ã€‚ä»ç»“æœé›†é‡ŒæŒ‰é¡ºåºæ‰¾resultå¯¹çš„ä¸Šçš„å­—æ®µï¼Œèµ‹ç»™resultã€‚</p>
<p>åº”è¯¥ç»™åé¢çš„å–åˆ«åã€‚è¿™é‡Œå…³äºç­çº§çš„ä¿¡æ¯è¦èµ‹ç»™classeså¯¹è±¡ï¼Œéœ€è¦å»ºç«‹æ˜ å°„ï¼Œç”¨resultMapã€‚</p>
<p>æ³¨æ„æ˜ å°„çš„æ—¶å€™ï¼Œæ˜¯çœ‹è¿™ä¸ªæŸ¥è¯¢ç»“æœé›†ä¸Šé¢çš„å­—æ®µã€‚</p>
<p>è¿™æ ·å°±å®Œæˆäº†ï¼Œç»“æœç±» å’Œ ç»“æœé›†çš„æ˜ å°„</p>
<p>2âƒ£ï¸é€šè¿‡classesæŸ¥students</p>
<p>é€šè¿‡ç­çº§idï¼ŒæŸ¥å‡ºæ•´ä¸ªclassesç±».</p>
<p>é¦–å…ˆå†™æ¥å£ï¼Œå†å†™xmlæ–‡ä»¶ï¼Œxmlæ–‡ä»¶ä¸­å…ˆå†™sqlè¯­å¥ï¼Œå®Œæˆæ˜ å°„ï¼Œæ·»åŠ åˆ°configï¼Œæµ‹è¯•ã€‚</p>
<p>âš ï¸æ³¨æ„ç»“æœé›†è¦ç”¨resultMapï¼Œè¦è¿˜æ˜¯ç”¨resultTypeçš„è¯ï¼Œç›¸å½“äºå†™çš„æ˜ å°„æ²¡æœ‰ç”¨åˆ°ã€‚</p>
<p>3âƒ£ï¸å¤šå¯¹å¤š</p>
<p>æ¯”å¦‚è¯´ï¼Œå®¢æˆ·å’Œå•†å“ï¼Œè¿™ä¸¤ä¸ªæ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚</p>
<p>customerè¡¨å’Œgoodsè¡¨ï¼Œä¸­é—´éœ€è¦å»ºä¸€ä¸ªä»è¡¨customer_goodsï¼Œé‡Œé¢cidè¡¨ç¤ºå®¢æˆ·è¡¨çš„å¤–é”®ï¼Œgidè¡¨ç¤ºå•†å“è¡¨çš„å¤–é”®ã€‚</p>
<p>customerç±»ä¸­ï¼Œæœ‰ä¸€ä¸ªgoodsé›†åˆ</p>
<p>goodsç±»ä¸­ï¼Œæœ‰ä¸€ä¸ªcustimeré›†åˆ</p>
<p>è¦åšçš„æ˜¯ï¼šæ ¹æ®customerçš„idï¼Œè¿”å›custimerç±»ã€‚</p>
<p><code>select c.id as cid, c.name as came, g.id as gid, g.name as gname from customer as c, goods as gï¼Œ customer_goods as cg where c.id=1 and cg.cid = c.id and cg.gid = g.id;</code> </p>
<p>è¿”å›id=1çš„å®¢äººä¹°çš„å•†å“ã€‚</p>
<p>âš ï¸çŸ¥è¯†ç‚¹ï¼›ç¬›å¡å°”ç§¯ï¼Œéœ€è¦æ‰¾è¿™ä¸¤å¼ è¡¨çš„å…³è”å…³ç³»ï¼šç¬¬ä¸‰å¼ è¡¨.</p>
<p>æ ¹æ®ä¸€å¯¹å¤šæ¥å»ºç«‹å¤šå¯¹å¤šçš„æ˜ å°„å°±å¥½äº†ï¼Œä¸åŒä¹‹å¤„åœ¨å»sqlè¯­å¥ä¸­ä¸¤å¼ è¡¨å»ºç«‹å…³ç³»çš„æ–¹å¼æ˜¯é€šè¿‡ç¬¬ä¸‰å¼ è¡¨äº†ã€‚</p>
<p>ä½†æ˜¯xmlæ–‡ä»¶ä¸­æ„å»ºæ˜ å°„è¦çœ‹çš„æ˜¯sqlè¯­å¥è¿”å›ç»“æœé›†å’Œæ¥å£æ–¹æ³•è¦è¿”å›çš„è¿”å›ç±»å¯¹è±¡ã€‚</p>
<h3 id="â›½ï¸ç¬¬äº”è¯¾"><a href="#â›½ï¸ç¬¬äº”è¯¾" class="headerlink" title="â›½ï¸ç¬¬äº”è¯¾"></a>â›½ï¸ç¬¬äº”è¯¾</h3><p>âœ…é€†å‘å·¥ç¨‹</p>
<p>å¯¹ä¼ ç»Ÿå¼€å‘åå‘çš„ä¸€ä¸ªæ–¹å¼ã€‚</p>
<p>Mybatisæ¡†æ¶éœ€è¦ï¼šå®ä½“ç±»ã€è‡ªå®šä¹‰çš„Mapperæ¥å£ã€Mapper.xmlã€‚</p>
<p>ä¼ ç»Ÿçš„å¼€å‘ä¸­ï¼Œä¸Šè¿°çš„ä¸‰ä¸ªç»„ä»¶éœ€è¦å¼€å‘è€…æ‰‹åŠ¨åˆ›å»ºï¼Œé€†å‘å·¥ç¨‹å¯ä»¥å¸®åŠ©å¼€å‘è€…è‡ªåŠ¨åˆ›å»ºè¿™ä¸‰ä¸ªç»„ä»¶ï¼Œå‡è½»å¼€å‘è€…çš„å·¥ä½œé‡ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<p>ç¼ºç‚¹ï¼šé€†å‘å·¥ç¨‹åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œé€†å‘å·¥ç¨‹æ ¹æ®æ•°æ®è¡¨æ¥å»ºç«‹å®ä½“ç±»ç­‰ï¼Œå¦‚æœæ”¹äº†è¡¨ç»“æ„ï¼Œå°±éœ€è¦é‡æ–°æ‰§è¡Œä¸€æ¬¡é€†å‘å·¥ç¨‹ã€‚</p>
<p>å¦‚æœæ”¹äº†è¡¨ç»“æ„ï¼Œå°±éœ€è¦åˆ äº†å·²ç»å­˜åœ¨çš„ï¼Œé‡æ–°æ‰§è¡Œã€‚</p>
<p>====</p>
<p>å¦‚ä½•ä½¿ç”¨ï¼š</p>
<p>Mybatis Generatorï¼Œç®€ç§°MBGï¼Œæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºMybatisæ¡†æ¶å¼€å‘è€…å®šåˆ¶çš„ä»£ç ç”Ÿæˆå™¨å’Œè‡ªåŠ¨ç”ŸæˆMybatisæ¡†æ¶æ‰€éœ€çš„å®ä½“ç±»ã€Mapperæ¥å£ã€Mapper.xmlï¼Œæ”¯æŒåŸºæœ¬CRUDæ“ä½œï¼Œä½†æ˜¯ä¸€äº›ç›¸å¯¹å¤æ‚çš„sqléœ€è¦å¼€å‘è€…è‡ªå·±æ¥å®Œæˆã€‚</p>
<p>1âƒ£ï¸æ–°å»ºMavenå·¥ç¨‹ï¼Œå¼•å…¥ä¾èµ–</p>
<p>æ•°æ®åº“å»ºä¸ªè¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table t_user(</span><br><span class="line"> id int primary key auto_increment,</span><br><span class="line"> name varchar(11),</span><br><span class="line"> age int</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>2âƒ£ï¸åˆ›å»ºMBGé…ç½®æ–‡ä»¶generatorConfig.xml</p>
<p> \1. jdbcConnection é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</p>
<p> \2. javaModelGenerator é…ç½®javaBeançš„ç”Ÿæˆç­–ç•¥ï¼Œè¦æŠŠåˆ›å»ºçš„å®ä½“ç±»æ”¾åœ¨å“ªä¸ªåŒ…é‡Œ</p>
<p> \3. sqlMapGenerator é…ç½®sqlæ˜ å°„æ–‡ä»¶ç”Ÿæˆç­–ç•¥</p>
<p> \4. javaClientGenerator é…ç½®Mapperæ¥å£</p>
<p> \5. table é…ç½®ç›®æ ‡æ•°æ®è¡¨ï¼ˆtableNameï¼šè¡¨åï¼ŒdominObjectNameï¼šJavaBeanç±»åï¼‰</p>
<p>3âƒ£ï¸åˆ›å»ºGeneratoræ‰§è¡Œç±»</p>
<p>å¯åŠ¨ç±»mainï¼Œé‡Œé¢æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œæ²¡ç†è§£åæ­£æ˜¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.exception.InvalidConfigurationException;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.exception.XMLParserException;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">â€‹    List&lt;String&gt;warings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">â€‹    <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">â€‹    String genCig = <span class="string">&quot;/generatorConfig.xml&quot;</span>; <span class="comment">// /å°±è¡¨ç¤ºresourceæ–‡ä»¶å¤¹</span></span><br><span class="line">â€‹    File configFile = <span class="keyword">new</span> File(Main.class.getResource(genCig).getFile()); <span class="comment">//è·å–è¿è¡Œæ—¶ç±»ï¼ŒgetResource(è·¯å¾„)ï¼Œè·å–é…ç½®æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">â€‹    ConfigurationParser configurationParser = <span class="keyword">new</span> ConfigurationParser(warings);</span><br><span class="line">â€‹    Configuration configuration = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="keyword">try</span> &#123;</span><br><span class="line">â€‹      configuration = configurationParser.parseConfiguration(configFile);</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (XMLParserException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125;</span><br><span class="line"></span><br><span class="line">â€‹    DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite);</span><br><span class="line">â€‹    MyBatisGenerator myBatisGenerator = <span class="keyword">null</span>;</span><br><span class="line">â€‹    <span class="keyword">try</span> &#123;</span><br><span class="line">â€‹      myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(configuration, callback, warings);</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (InvalidConfigurationException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="keyword">try</span> &#123;</span><br><span class="line">â€‹      myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">â€‹      throwables.printStackTrace();</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>IDEAæŠ›å‡ºå¼‚å¸¸å¿«æ·é”®ï¼š</strong></p>
<p><strong>Mac</strong></p>
<p><strong>æ–¹å¼ä¸€ï¼ˆå…‰æ ‡ç§»åˆ°è¯¥ä»£ç è¡Œï¼Œoption+Enterï¼‰ï¼Œå¯ä»¥å¼‚å¸¸å¤–æŠ›å‡ºï¼Œä¹Ÿå¯ä»¥try-catchï¼š</strong></p>
<p><strong>æ–¹å¼äºŒï¼ˆå…‰æ ‡ç§»åˆ°è¯¥ä»£ç è¡Œï¼Œæˆ–è€…é€‰ä¸­è¯¥è¡Œä»£ç ï¼Œoption+command+Tï¼‰ï¼š[ä½¿ç”¨å…³é”®å­—æˆ–æ§åˆ¶è¯­å¥ï¼Œæ¯”å¦‚ifâ€¦else, tryâ€¦catch, for, synchronizedç­‰]</strong></p>
<p>4âƒ£ï¸<strong>ç„¶åè¿è¡Œmainæ–¹æ³•ï¼Œæ–‡ä»¶å¤¹ä¸‹ä»€ä¹ˆéƒ½æœ‰äº†ï¼Œè€Œä¸”æ ¹æ®æ•°æ®åº“çš„è¡¨å»ºç«‹äº†å®ä½“ç±»ã€‚</strong></p>
<h3 id="â›½ï¸ç¬¬å…­è¯¾"><a href="#â›½ï¸ç¬¬å…­è¯¾" class="headerlink" title="â›½ï¸ç¬¬å…­è¯¾"></a>â›½ï¸<strong>ç¬¬å…­è¯¾</strong></h3><p>âœ…<strong>å»¶è¿ŸåŠ è½½</strong></p>
<p><strong>ä»€ä¹ˆæ˜¯å»¶è¿ŸåŠ è½½ï¼Ÿä¹Ÿå«æ‡’åŠ è½½ã€æƒ°æ€§åŠ è½½</strong></p>
<p><strong>ä½¿ç”¨å»¶è¿ŸåŠ è½½å¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œé’ˆå¯¹äºæ•°æ®çš„æŒä¹…å±‚çš„æ“ä½œã€‚åœ¨æŸäº›ç‰¹å®šçš„æƒ…å†µä¸‹å»è®¿é—®ç‰¹å®šçš„æ•°æ®åº“ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹å¯ä»¥ä¸è®¿é—®æŸäº›è¡¨ï¼Œä»ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘äº†javaåº”ç”¨ä¸æ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ã€‚</strong></p>
<p><strong>æ¯”å¦‚è¯´ä¸Šé¢åŠè”æŸ¥è¯¢æ—¶ï¼ŒæŸ¥è¯¢å­¦ç”Ÿå’Œç­çº§ï¼Œå­¦ç”Ÿå’Œç­çº§åœ¨ä¸¤å¼ ä¸åŒçš„è¡¨ï¼Œå¦‚æœå½“å‰çš„éœ€æ±‚åªéœ€è¦è·å–å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæŸ¥è¯¢å­¦ç”Ÿå•è¡¨å³å¯ï¼Œå¦‚æœéœ€è¦é€šè¿‡å­¦ç”Ÿè·å–å¯¹åº”çš„ç­çº§ä¿¡æ¯ï¼Œåˆ™å¿…é¡»æŸ¥è¯¢ä¸¤å¼ è¡¨ã€‚</strong></p>
<p><strong>ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦æŸ¥è¯¢ä¸åŒçš„è¡¨ï¼Œæ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚æ¥åŠ¨æ€å‡å°‘æ•°æ®è¡¨æŸ¥è¯¢çš„å·¥ä½œå°±æ˜¯å»¶è¿ŸåŠ è½½ã€‚</strong></p>
<p><strong>ä¸¾ä¾‹ï¼šstudentå’Œclassesçš„ä¾‹å­é‡Œï¼Œä¸¤ä¸ªæ¥å£é‡Œéƒ½å¢åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œå„è‡ªé‡å†™xmlé‡Œé¢å¯¹åº”æ–°å¢æ–¹æ³•çš„sqlè¯­å¥ï¼Œselectè¯­å¥ä¸è”è¡¨æŸ¥è¯¢äº†ï¼Œå„æŸ¥å„çš„ï¼Œæµ‹è¯•æ—¶ï¼Œé¦–å…ˆå¾—åˆ°studentçš„åå­—ï¼Œå¦‚æœå¤Ÿäº†ï¼Œå°±ä¸ç”¨æŸ¥classesè¡¨äº†ï¼Œå¦‚æœä¸å¤Ÿï¼Œå†æ ¹æ®studentçš„cidè·å¾—classesç›¸å…³ä¿¡æ¯ã€‚</strong></p>
<p><strong>å› æ­¤è¦åœ¨é…ç½®æ–‡ä»¶é‡Œå®Œæˆä¸€ä¸ªè¿æ¥çš„æ“ä½œæ¥è‡ªåŠ¨è¯†åˆ«æ˜¯å¦è¿˜éœ€è¦æŸ¥å¦ä¸€å¼ è¡¨ï¼Œåœ¨</strong>associationä¸­ã€‚</p>
<p>å®è·µæ•ˆæœï¼šæ ¹æ®å­¦ç”Ÿidï¼ŒæŸ¥åˆ°å­¦ç”Ÿå®Œæˆä¿¡æ¯ï¼ŒåŒ…æ‹¬é‡Œé¢çš„Classesç±»ã€‚</p>
<p>å®é™…ä¸Šè¿›è¡Œäº†ä¸¤æ¬¡sqlæŸ¥è¯¢ï¼Œæœ¬èº«studentæ¥å£æ–¹æ³•è°ƒç”¨æŸ¥è¯¢ä¸€æ¬¡ï¼Œstudenté…ç½®æ–‡ä»¶ä¸­selectæ ‡ç­¾åˆæŸ¥ä¸€æ¬¡ã€‚</p>
<p>é€šè¿‡é…ç½®configæ–‡ä»¶ä¸­settingå¯ä»¥æ‰“å°sqlæ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<p>ä½†æ˜¯ï¼Œåªæ‹¿nameçš„è¯ï¼Œè¿˜æ˜¯æ‰§è¡Œä¸¤æ¬¡sqlã€‚å› æ­¤éœ€è¦åœ¨configä¸­å¼€å¯å»¶è¿ŸåŠ è½½ã€‚</p>
<p>å¥‡æ€ªäº†ï¼Œæˆ‘å¼€å¯äº†å»¶è¿ŸåŠ è½½ï¼Œåªè·å¾—studentçš„nameï¼Œè¿˜æ˜¯æŸ¥ä¸¤æ¬¡ã€‚</p>
<p>âš ï¸å‡ºç°é—®é¢˜ï¼ŒCannot enable lazy loading because CGLIB is not available. Add CGLIB to your classpath.</p>
<p>åº”è¯¥å¢åŠ CGLIBä¾èµ–ã€‚</p>
<p>â“ä¾èµ–é—²çº¢çš„æ—¶å€™ï¼Œå¿…é¡»è¦åˆ é™¤.m2æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ä¾èµ–ï¼Œç„¶åreimportå—ï¼Ÿ</p>
<h3 id="â›½ï¸ç¬¬ä¸ƒè¯¾"><a href="#â›½ï¸ç¬¬ä¸ƒè¯¾" class="headerlink" title="â›½ï¸ç¬¬ä¸ƒè¯¾"></a>â›½ï¸ç¬¬ä¸ƒè¯¾</h3><p>âœ…MyBatisç¼“å­˜</p>
<p>ä»€ä¹ˆäº‹mybatisç¼“å­˜ï¼Ÿä½¿ç”¨ç¼“å­˜å¯ä»¥å‡å°‘Javaåº”ç”¨ä¸æ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œä»è€Œæé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚æ¯”å¦‚æŸ¥è¯¢å‡ºid=1çš„å¯¹è±¡ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢å‡ºä¹‹åä¼šè‡ªåŠ¨å°†è¯¥å¯¹è±¡ä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œå½“ä¸‹ä¸€æ¬¡æŸ¥è¯¢æ—¶ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºå¯¹è±¡å³å¯ï¼Œæ— éœ€å†æ¬¡è®¿é—®æ•°æ®åº“ã€‚</p>
<p>Mybatisç¼“å­˜åˆ†ç±»ï¼š</p>
<ol>
<li><strong>ä¸€çº§ç¼“å­˜ï¼šSqlSessionçº§åˆ«ï¼Œé»˜è®¤å¼€å¯ï¼Œå¹¶ä¸”ä¸èƒ½å…³é—­ã€‚</strong></li>
</ol>
<p>  <strong>æ“ä½œæ•°æ®åº“æ—¶éœ€è¦åˆ›å»ºSqlSessionå¯¹è±¡ï¼Œåœ¨å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªHashMapç”¨äºå­˜å‚¨ç¼“å­˜æ•°æ®ï¼Œä¸åŒçš„SqlSessionä¹‹é—´ç¼“å­˜æ•°æ®åŒºåŸŸæ˜¯äº’ä¸å½±å“çš„ã€‚</strong></p>
<p>  <strong>ä¸€çº§ç¼“å­˜çš„ä½œç”¨åŸŸæ˜¯SqlSessionèŒƒå›´çš„ï¼Œå½“åœ¨åŒä¸€ä¸ªSqlSessionä¸­æ‰§è¡Œä¸¤æ¬¡ç›¸åŒçš„SQLè¯­å¥æ—¶ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œæ¯•å°†ç»“æœä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ã€‚</strong></p>
<p>  <strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœSqlSessionæ‰§è¡Œäº†DMLæ“ä½œï¼ˆinsertã€updateã€deleteï¼‰ï¼ŒMybatiså¿…é¡»å°†ç¼“å­˜æ¸…ç©ºï¼Œæ¥ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ã€‚</strong></p>
<ol>
<li><strong>äºŒçº§ç¼“å­˜ï¼šMapperçº§åˆ«çš„ï¼Œé»˜è®¤å…³é—­ï¼Œå¯ä»¥å¼€å¯ã€‚</strong></li>
</ol>
<p>  <strong>ä½¿ç”¨äºŒçº§ç¼“å­˜æ—¶ï¼Œå¤šä¸ªSqlSessionä½¿ç”¨åŒä¸€ä¸ªMapperçš„sqlè¯­å¥æ“ä½œæ•°æ®åº“ï¼Œå¾—åˆ°çš„æ•°æ®ä¼šå­˜åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼ŒåŒæ ·æ˜¯ä½¿ç”¨HashMapè¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œç›¸æ¯”è¾ƒä¸€çº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜çš„èŒƒå›´æ›´å¤§ï¼Œå¤šä¸ªsqlsessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ã€‚äºŒçº§ç¼“å­˜æ˜¯è·¨sqlsessionçš„ã€‚</strong></p>
<p>  <strong>äºŒçº§ç¼“å­˜æ˜¯å¤šä¸ªsqlsessionå…±äº«çš„ï¼Œå…¶ä½œç”¨åŸŸæ˜¯mapperçš„åŒä¸€ä¸ªnamespqceï¼Œä¸åŒçš„sqlsessionä¸¤æ¬¡æ‰§è¡Œç›¸åŒçš„namespaceä¸‹çš„sqlè¯­å¥ï¼Œå‚æ•°ä¹Ÿç›¸åŒï¼Œåˆ™ç¬¬ä¸€æ¬¡æ‰§è¡ŒæˆåŠŸä¹‹åä¼šå°†æ•°æ®ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼Œç¬¬äºŒæ¬¡å¯ç›´æ¥ä»äºŒçº§ç¼“å­˜ä¸­å–å‡ºæ•°æ®ã€‚</strong></p>
<p>âš ï¸<strong>ä¸€çº§ç¼“å­˜æ˜¯ä¸€ä¸ªsqlsessionä¸€ä¸ªç¼“å­˜ã€‚äºŒçº§ç¼“å­˜æ˜¯ä¸€ä¸ªmapperä¸€ä¸ªï¼Œå¤šä¸ªsqlsession å¯èƒ½æ˜¯ä½¿ç”¨çš„åŒä¸€mapperï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªnamespaceã€‚äºŒçº§ç¼“å­˜èŒƒå›´æ›´å¤§ã€‚</strong></p>
<p><strong>å¦‚ä½•å¼€å¯äºŒçº§ç¼“å­˜ï¼š</strong></p>
<p><strong>config.xmlä¸­</strong></p>
<p><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</code></p>
<p><strong>ç„¶åå†å¯¹åº”çš„mapper.xmlä¸­ï¼Œæ·»åŠ é…ç½®äºŒçº§ç¼“å­˜</strong></p>
<p><code>&lt;cache&gt;&lt;/cache&gt;</code></p>
<p><strong>ç„¶åå®ä½“ç±»å®ç°åºåˆ—åŒ–æ¥å£</strong></p>
<p><code>public class Classes implements Serializable</code></p>
<ol>
<li><strong>ç¬¬ä¸‰æ–¹äºŒçº§ç¼“å­˜ã€‚éœ€è¦åœ¨pom.xmlé‡Œæ·»åŠ ç›¸å…³ä¾èµ–</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   &lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.0.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p><strong>ç„¶åæ·»åŠ é…ç½®æ–‡ä»¶ehcache.xml ä¸ç”¨è‡ªå·±å†™ï¼Œå®šä¹‰äº†ä¸€äº›äºŒçº§ç¼“å­˜çš„è®¾ç½®</strong></p>
<p><strong>ç„¶ååœ¨config.xmlä¸­å¼€å¯äºŒçº§ç¼“å­˜</strong></p>
<p><strong>ç„¶ååœ¨mapper.xmlä¸­é…ç½®äºŒçº§ç¼“å­˜</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;&gt;</span><br><span class="line">  &lt;!-- ç¼“å­˜åˆ›å»ºä¹‹åï¼Œæœ€åä¸€æ¬¡è®¿é—®ç¼“å­˜çš„æ—¶é—´è‡³ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´é—´éš” --&gt;</span><br><span class="line">  &lt;property name=&quot;timeToIdleSeconds&quot; value=&quot;3600&quot;/&gt;</span><br><span class="line">  &lt;!-- ç¼“å­˜è‡ªåˆ›å»ºæ—¶é—´èµ·è‡³å¤±æ•ˆçš„æ—¶é—´é—´éš” --&gt;</span><br><span class="line">  &lt;property name=&quot;timeToLiveSeconds&quot; value=&quot;3600&quot;/&gt;</span><br><span class="line">  &lt;!-- ç¼“å­˜çš„å›æ”¶ç­–ç•¥ ,LRUç§»é™¤è¿‘æœŸä½¿ç”¨æœ€å°‘--&gt;</span><br><span class="line">  &lt;property name=&quot;memoryStoreEvictionPolicy&quot; value=&quot;LRU&quot;/&gt;</span><br><span class="line">&lt;/cache&gt;</span><br></pre></td></tr></table></figure>

<p><strong>è¿™ä¸ªç¼“å­˜é‡Œå®ä½“ç±»å†…ä¸éœ€è¦å®ç°åºåˆ—åŒ–æ¥å£</strong></p>
<h3 id="â›½ï¸ç¬¬å…«è¯¾-MybatisåŠ¨æ€sql"><a href="#â›½ï¸ç¬¬å…«è¯¾-MybatisåŠ¨æ€sql" class="headerlink" title="â›½ï¸ç¬¬å…«è¯¾ MybatisåŠ¨æ€sql"></a>â›½ï¸<strong>ç¬¬å…«è¯¾ MybatisåŠ¨æ€sql</strong></h3><p><strong>sqlè¯­å¥æ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼Œåªéœ€è¦å®šä¸€ä¸ªå¤§è‡´çš„æ ·å¼ï¼Œå®ƒä¼šæ ¹æ®å…·ä½“çš„å‚æ•°ã€å…·ä½“çš„ä¸šåŠ¡å»åŠ¨æ€ç”Ÿæˆä¸åŒçš„sqlã€‚</strong></p>
<p><strong>èƒŒæ™¯ï¼šä¸šåŠ¡æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå¦‚æœéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»æ‹¼æ¥sqlè¯­å¥æ¥å®Œæˆæ“ä½œï¼Œæ•ˆç‡æ¯”è¾ƒä½è€Œä¸”å®¹æ˜“å‡ºé”™ã€‚</strong></p>
<p>â“<strong>å‘ç°testç±»é‡Œï¼Œç¬¬ä¸€è¡Œçš„åŠ è½½ç±»ä¸€ç›´æ˜¯ç¬¬ä¸€æ¬¡ç”¨çš„ï¼Œè¿™åˆç†å—ï¼Ÿ</strong></p>
<p><strong>ç”¨ä¸€ä¸ªaccountå¯¹è±¡æŸ¥accountå¯¹è±¡ï¼Œæ ¹æ®å¯¹è±¡çš„å››ä¸ªå‚æ•°å¯¹åº”æ”¾åˆ°sqlè¯­å¥ä¸­ï¼Œå¦‚æœä¼ å…¥çš„accountçš„ä¸€ä¸ªå‚æ•°æ²¡è®¾ç½®ï¼Œåˆ™ä¼ åˆ°sqlè¯­å¥é‚£é‡Œï¼Œè¿™ä¸ªå­—æ®µ=nullã€‚ä¸€èˆ¬å°±æ²¡ç»“æœã€‚</strong></p>
<p><strong>åŠ¨æ€sqlï¼šåªéœ€è¦å†™ä¸€ä¸ªæ¨¡ç‰ˆï¼Œè®©ç¨‹åºè‡ªåŠ¨æ ¹æ®å±æ€§æ˜¯å¦æœ‰å€¼ï¼Œæ¥åŠ¨æ€å†³å®šæ˜¯å¦åŠ è¿™ä¸ªæ¡ä»¶ã€‚</strong></p>
<p><strong>å…¶å®å°±æ˜¯ä¸€ä¸ªif elseçš„æµç¨‹ï¼Œåˆ¤æ–­å¦‚æœä¸ºnullï¼Œå°±å¿½ç•¥æ‰ï¼Œä½¿å¾—æœ‰ç»“æœã€‚</strong></p>
<p><strong>ä½¿ç”¨åŠ¨æ€sqlçš„ä½œç”¨ï¼šå¯ç®€åŒ–ä»£ç çš„å¼€å‘ï¼Œå‡å°‘å¼€å‘è€…çš„å·¥ä½œé‡ï¼Œç¨‹åºå¯ä»¥è‡ªåŠ¨æ ¹æ®ä¸šåŠ¡å‚æ•°æ¥å†³å®šsalçš„ç»„æˆã€‚</strong></p>
<ul>
<li><strong>ifæ ‡ç­¾</strong></li>
</ul>
<p><strong>ï½ï½ï½ï½ï½</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByAccount1&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  select * from account where</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != 0&quot;</span>&gt;</span></span><br><span class="line">â€‹    id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">â€‹    and username = #&#123;username&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">â€‹    and password = #&#123;password&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != 0&quot;</span>&gt;</span></span><br><span class="line">â€‹    age = #&#123;age&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>ä½†æ˜¯ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ç»™ï¼Œå°±ä¼šå‡ºé”™ï¼Œå› ä¸ºç›´æ¥andåé¢çš„ï¼Œè¯­æ³•é”™è¯¯ã€‚</strong></p>
<p><strong>å°†ifæ ‡ç­¾çš„è¯­å¥ï¼Œæ”¾åœ¨whereæ ‡ç­¾é‡Œå°±å¯ä»¥äº†ã€‚</strong></p>
<p><strong>ifæ ‡ç­¾å¯ä»¥è‡ªåŠ¨æ ¹æ®è¡¨è¾¾å¼çš„ç»“æœæ¥å†³å®šæ˜¯å¦å°†å¯¹åº”çš„è¯­å¥æ·»åŠ åˆ°sqlä¸­ï¼Œå¦‚æœæ¡ä»¶ä¸æˆç«‹åˆ™ä¸æ·»åŠ ï¼Œå¦‚æœæ¡ä»¶æˆç«‹åˆ™æ·»åŠ ã€‚</strong></p>
<p><strong>whereæ ‡ç­¾å¯ä»¥è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦è¦åˆ é™¤è¯­å¥å—ä¸­çš„andå…³é”®å­—ï¼Œå¦‚æœç›‘æµ‹åˆ°whereç›´æ¥è·Ÿandæ‹¼æ¥ï¼Œåˆ™è‡ªåŠ¨åˆ é™¤andï¼Œé€šå¸¸æƒ…å†µä¸‹ if å’Œ whereç»“åˆä½¿ç”¨ã€‚</strong></p>
<ul>
<li><strong>chooseã€whenæ ‡ç­¾</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByAccount2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  select * from account</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span> = <span class="string">&quot;id !=0 &quot;</span>&gt;</span></span><br><span class="line">â€‹        id = #&#123;id&#125;</span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span> = <span class="string">&quot;username !=null &quot;</span>&gt;</span></span><br><span class="line">â€‹        username = #&#123;username&#125;</span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span> = <span class="string">&quot;password !=null &quot;</span>&gt;</span></span><br><span class="line">â€‹        password = #&#123;password&#125;</span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span> = <span class="string">&quot;age !=0 &quot;</span>&gt;</span></span><br><span class="line">â€‹        age = #&#123;age&#125;</span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>trimæ ‡ç­¾ï¼štrimæ ‡ç­¾ä¸­çš„prefixå’Œsuffixå±æ€§ä¼šè¢«ç”¨äºç”Ÿæˆå®é™…çš„sqlè¯­å¥ï¼Œä¼šå’Œæ ‡ç­¾å†…éƒ¨çš„è¯­å¥è¿›è¡Œæ‹¼æ¥ï¼Œå¦‚æœè¯­å¥å‰åå‡ºç°äº†prefixOverridesæˆ–è€…suffixOverrideså±æ€§ä¸­æŒ‡å®šçš„å€¼ï¼ŒMybatisæ¡†æ¶ä¼šè‡ªåŠ¨å°†å…¶åˆ é™¤ã€‚</strong></li>
</ul>
<ul>
<li><strong>setæ ‡ç­¾ï¼šç”¨äºupdateæ“ä½œï¼Œä¼šè‡ªåŠ¨æ ¹æ®å‚æ•°æ¥é€‰æ‹©ç”Ÿæˆsqlè¯­å¥ã€‚</strong></li>
</ul>
<p><strong>updateä¼ å…¥çš„å¯¹è±¡ï¼Œå¦‚æœsetå±æ€§åªæœ‰ä¸€ä¸ªï¼Œç›¸å½“äºå…¶ä»–å±æ€§ä¸ä¼ å€¼ï¼Œå˜ä¸ºäº†nullæˆ–è€…0.</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update1&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  update account</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != 0&quot;</span>&gt;</span></span><br><span class="line">â€‹      id = #&#123;id&#125;</span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">â€‹      and username = #&#123;username&#125;</span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">â€‹      and password = #&#123;password&#125;</span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != 0&quot;</span>&gt;</span></span><br><span class="line">â€‹      age = #&#123;age&#125;</span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">   where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>è¿™æ˜¯sqlæ‹¼æ¥å—ï¼Ÿ</strong></p>
<ul>
<li><strong>foreachæ ‡ç­¾</strong></li>
</ul>
<p><strong>foreachæ ‡ç­¾å¯ä»¥è¿­ä»£ç”Ÿæˆä¸€ç³»åˆ—å€¼ï¼Œè¿™ä¸ªæ ‡ç­¾ä¸»è¦ç”¨äºsqlçš„inè¯­å¥ã€‚</strong></p>
<p><code>private List&lt;Long&gt; ids;</code></p>
<p><code>List&lt;Long&gt; ids = new ArrayList&lt;Long&gt;();</code></p>
<p><strong>è¿˜å¾—åœ¨å®ä½“ç±»é‡Œå»ºä¸€ä¸ªListå—ï¼Ÿæ„Ÿè§‰ä¸å¤ªä¾¿åˆ©ã€‚</strong></p>
<p><code>&lt;select id=&quot;findByIds&quot; param&gt;</code></p>
<h3 id="â›½ï¸ç¬¬ä¹è¯¾-mybatis-é€šç”¨Mapper"><a href="#â›½ï¸ç¬¬ä¹è¯¾-mybatis-é€šç”¨Mapper" class="headerlink" title="â›½ï¸ç¬¬ä¹è¯¾ mybatis é€šç”¨Mapper"></a>â›½ï¸<strong>ç¬¬ä¹è¯¾ mybatis é€šç”¨Mapper</strong></h3><p><strong>è™½ç„¶æœ‰é€†å‘å·¥ç¨‹MBGï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œä½†æ˜¯entityæ”¹å˜ä¼šç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚</strong></p>
<p>1âƒ£ï¸<strong>å»ºè¡¨</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> mapperdemo(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line"> username <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> password <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> age <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> mapperdemo (username, password, age) <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;liuxuan&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="number">23</span>),</span><br><span class="line">(<span class="string">&#x27;jade&#x27;</span>, <span class="string">&#x27;kk&#x27;</span>, <span class="number">22</span>),</span><br><span class="line">(<span class="string">&#x27;aks&#x27;</span>, <span class="string">&#x27;aa&#x27;</span>, <span class="number">12</span>);</span><br></pre></td></tr></table></figure>



<p>2âƒ£ï¸æ–°å»ºjavaå®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.mybatis.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span> <span class="comment">//æœ‰å‚æ„é€ </span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span>  <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mapperdemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Integer id;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="keyword">private</span> String password;</span><br><span class="line">  <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>~~~~</p>
<p>è€ƒè™‘åˆ°åŸºæœ¬æ•°æ®ç±»å‹åœ¨Javaç±»å‹ä¸­éƒ½æœ‰é»˜è®¤å€¼ï¼Œä¼šå¯¼è‡´mybatisåœ¨æ‰§è¡Œç›¸å…³æ“ä½œæ—¶å¾ˆéš¾åˆ¤æ–­å½“å‰å­—æ®µæ˜¯å¦ä¸ºnullã€‚å› æ­¤åœ¨mybatisç¯å¢ƒä¸‹ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹ã€‚(ä¸Šé¢çš„ä½œåºŸ)</p>
<p>âœ…mapperæ³¨è§£é‡æ¥ï¼š</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/jintingbo/article/details/80517053">https://blog.csdn.net/jintingbo/article/details/80517053</a></p>
<p>ä»mybatis3.4.0å¼€å§‹åŠ å…¥äº†@Mapperæ³¨è§£ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†ä¸å†å†™mapperæ˜ å°„æ–‡ä»¶</p>
<p>ç°åœ¨æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€æ˜“çš„mavené¡¹ç›®å»äº†è§£@Mapperæ³¨è§£çš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<p>1âƒ£ï¸å»ºè¡¨ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line"> name <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> pwd <span class="type">varchar</span>(<span class="number">11</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> (name, pwd) <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;liuxuan&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;jade&#x27;</span>, <span class="string">&#x27;kk&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;aks&#x27;</span>, <span class="string">&#x27;aa&#x27;</span>);</span><br></pre></td></tr></table></figure>



<p>2âƒ£ï¸å®ä½“ç±»</p>
<p>æ“ä½œä¹‹å‰ï¼Œä»githubä¸Šcloneä¸‹æ¥çš„é¡¹ç›®å‡ºç°é—®é¢˜</p>
<p>1.æ–‡ä»¶å·¦ä¸‹è§’æœ‰ä¸ªæ©™è‰²çš„å°æ—¶é’Ÿï¼Œå‡ºç°æ©™è‰²åŸå› ï¼šæ²¡æœ‰æ·»åŠ åˆ°mavenè§£å†³åŠæ³•ï¼šæ‰¾åˆ°é¡¹ç›®çš„xml,å¦‚æœæœ€å¤–å±‚æ²¡æœ‰xml,æ‰¾åˆ°æ¨¡å—é‡Œé¢å¯¹åº”çš„xml,å³é”®é€‰æ‹©Add as Maven project. å¯¼å…¥é€šè¿‡mavenå¯¼å…¥jarã€‚å°±è§£å†³äº†äº†ã€‚</p>
<p>2.é¡¹ç›®ä¾èµ–æ˜¯çº¢çš„ï¼Œå»mavenä»“åº“<a target="_blank" rel="noopener" href="https://mvnrepository.com/">Maven Repository: Search/Browse/Explore</a>ä¸‹ä¸‹æ¥ï¼Œæ”¾åœ¨.m2æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p>3.æ²¡å¼„sdkï¼Œå¼„æˆjdk1.8</p>
<p>4.å¥‡äº†æ€ªäº†ï¼Œè¿™ä¸ªé¡¹ç›®é‡Œå®ä½“ç±»ç”¨Lombokï¼Œä¾èµ–æ˜¾çº¢ï¼Œæ‡µé€¼äº†ã€‚</p>
<p>5.pç©ºé—´æ˜¾çº¢çš„è§£å†³åŠæ³•ï¼šfileâ€“&gt;settingsâ€¦â€“&gt;languages &amp; frameworksâ€“&gt;schemas and DTDs â€“&gt; æ·»åŠ url</p>
<p>3âƒ£ï¸åŠ è½½é…ç½®æ–‡ä»¶æ—¶æ‰¾ä¸åˆ°bean</p>
<p>ä¸çŸ¥é“å•¥åŸå› äº†ï¼Œåº”è¯¥æ˜¯mybatisç»“åˆspringï¼Œè¿™ä¸€ç‚¹è¿˜æ²¡æŒæ¡ã€‚</p>
<p>æ€»ä¹‹ï¼Œä½¿ç”¨æ–¹é¢ï¼Œä¸éœ€è¦åœ¨mapper.xmlé‡Œå†™sqlè¯­å¥ï¼Ÿ</p>
<p>æµ‹è¯•ç±»é‡Œç›´æ¥è°ƒç”¨daoæ¥å£é‡Œçš„æ–¹æ³•å³å¯ï¼Ÿ</p>
<p>ï¼ï¼ï¼é¡¹ç›®é‡Œè¿˜æ˜¯æœ‰sqlè¯­å¥çš„ï¼Œæ¥å£é‡Œç”¨@mapper @paramæ³¨è§£ï¼Œåªæ˜¯ä¼ é€’å‚æ•°ã€‚å’Œä¹‹å‰å­¦çš„ï¼Œåªæ˜¯åœ¨æ¥å£é‡Œå¤šäº†è¿™ä¿©æ³¨è§£ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/12/myblog/JAVA/Tomcat%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Jade liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jadeliu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/12/myblog/JAVA/Tomcat%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">tomcatå…¥é—¨æ•™ç¨‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-12 21:19:51" itemprop="dateCreated datePublished" datetime="2022-03-12T21:19:51+08:00">2022-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-06-04 14:32:50" itemprop="dateModified" datetime="2022-06-04T14:32:50+08:00">2022-06-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a><strong>tomcat</strong></h3><p>ä¸ºä»€ä¹ˆæœ‰tomcatï¼Ÿ</p>
<p>ä¸€ä¸ªé¡¹ç›®ï¼šå®¢æˆ·ç«¯+åç«¯+æ•°æ®åº“ã€‚</p>
<p>å¦‚ä½•è®¿é—®åˆ°æœåŠ¡ï¼Ÿéœ€è¦åœ¨webåº”ç”¨æœåŠ¡å™¨é‡Œè¿›è¡Œéƒ¨ç½²ã€‚</p>
<p>tomcatå°±æ˜¯ä¸€ä¸ªwebåº”ç”¨æœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªæœåŠ¡ï¼Œé‡Œé¢æ”¾javaç¨‹åºã€‚</p>
<p>webåº”ç”¨æœåŠ¡å™¨ï¼štomcatã€Jboosã€Weblogicã€Jettyã€‚</p>
<p>æœ‰äº†tomcatå¯ä»¥å®ç°ä¸¤ä¸ªç”µè„‘ä¹‹é—´çš„äº’ç›¸è®¿é—®ï¼Œå‰ææ˜¯åœ¨ä¸€ä¸ªå±€åŸŸç½‘é‡Œã€‚</p>
<h3 id="1âƒ£ï¸å®‰è£…tomcatã€‚"><a href="#1âƒ£ï¸å®‰è£…tomcatã€‚" class="headerlink" title="1âƒ£ï¸å®‰è£…tomcatã€‚"></a>1âƒ£ï¸å®‰è£…tomcatã€‚</h3><p>apacheå‡ºçš„ï¼Œè¿›å…¥å®˜ç½‘ï¼Œé€‰æ‹©tomcat9ï¼Œä¸‹è½½å‹ç¼©æ–‡ä»¶tar.gz</p>
<p>è§£å‹ç¼©ï¼Œæ”¾libraryé‡Œã€‚</p>
<p>binï¼šå­˜æ”¾å„ä¸ªå¹³å°ä¸‹å¯åŠ¨å’Œåœæ­¢tomcatæœåŠ¡çš„è„šæœ¬æ–‡ä»¶ã€‚batæ˜¯windowsç³»ç»Ÿä¸‹çš„è„šæœ¬æ–‡ä»¶ï¼Œshæ˜¯macå’Œlinuxçš„ã€‚</p>
<p>confï¼šå­˜æ”¾å„ç§tomcatæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®ç«¯å£ï¼Œserver.xmlã€‚</p>
<p>libï¼šå­˜æ”¾tomcatæœåŠ¡å™¨éœ€è¦çš„jaråŒ…ã€‚</p>
<p>logsï¼šå­˜æ”¾tomcatæœåŠ¡è¿è¡Œçš„æ—¥å¿—ã€‚</p>
<p>tempï¼štomcatè¿è¡Œæ—¶çš„ä¸´æ—¶æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ioæµçš„æ—¶å€™ç”¨ï¼Œå¤§æ–‡ä»¶æ”¾åœ¨javaè™šæ‹Ÿæœºå†…å­˜é‡Œå ç”¨èµ„æºå¤§ï¼Œå…ˆæ”¾åœ¨tempæ–‡ä»¶å¤¹é‡Œã€‚</p>
<p>webappsï¼šå­˜æ”¾å…è®¸å®¢æˆ·ç«¯è®¿é—®çš„èµ„æºï¼ˆjavaç¨‹åºï¼‰ã€‚</p>
<p>workï¼šå­˜æ”¾tomcatå°†jspè½¬æ¢ä¹‹åçš„servletæ–‡ä»¶ã€‚</p>
<h3 id="2âƒ£ï¸ideaé›†æˆtomcat"><a href="#2âƒ£ï¸ideaé›†æˆtomcat" class="headerlink" title="2âƒ£ï¸ideaé›†æˆtomcat"></a>2âƒ£ï¸ideaé›†æˆtomcat</h3><p>create new project â€“&gt; java enterprise â€“&gt; web application â€“&gt; å®Œæˆ</p>
<p>index.jspï¼šå†™htmlçš„</p>
<p>web.xmlï¼šé…ç½®åº”ç”¨çš„</p>
<p>æ·»åŠ tomcaté…ç½®ï¼šå³ä¸Šè§’add configurationï¼Œç‚¹åŠ å·ï¼Œtomcalï¼Œé€‰localï¼Œé…ä¸€ä¸ªæœ¬åœ°çš„tomcatï¼Œè®¾ç½®ï¼Œå†™åå­—ï¼Œé€‰tomcatè·¯å¾„ï¼ˆä¸»è¦å°±ç”¨tomcatçš„ä¸¤ä¸ªjaråŒ…ï¼šjspã€servletï¼‰ã€‚ç›¸å½“äºæ˜¯æŠŠideaå’Œtomcatæ˜ å°„èµ·æ¥äº†ã€‚è®¾ç½®urlï¼šé»˜è®¤æµè§ˆå™¨ï¼Œafter launchæ˜¯å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œurlæ˜¯è®¿é—®è·¯å¾„ï¼Œè®¿é—®åˆ°tomcatæœåŠ¡ã€‚ç„¶åé€‰deploymentæ·»åŠ javaå·¥ç¨‹ï¼Œç‚¹åŠ å·ï¼Œé€‰artifactï¼Œè‡ªåŠ¨åŠ è¿›æ¥äº†ã€‚ç›¸å½“äºæ˜¯æŠŠjavaå·¥ç¨‹æ”¾åœ¨testé‡Œäº†ã€‚ç„¶åapplyï¼Œokã€‚</p>
<p>ç‚¹å³ä¸Šè§’è™«å­å›¾æ ‡ã€‚è‡ªåŠ¨è·³å‡ºæ¥é¡µé¢ã€‚å…³æ‰ideaï¼Œå°±æ²¡äº†ã€‚</p>
<p>urlç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šip:port/application name</p>
<p>å¯ä»¥æ”¹åº”ç”¨çš„åå­—ï¼Œåœ¨å³ä¸Šè§’edit applicationï¼Œé€‰deploymentï¼Œä¸‹é¢contextæ”¹åå­—ã€‚é‡å¯å°±å¯ä»¥äº†ã€‚</p>
<p>ä¹Ÿå¯ä»¥æ²¡æœ‰åå­—ï¼Œåªæ˜¯ä¸€ä¸ª/ã€‚</p>
<h3 id="3âƒ£ï¸æ‰“åŒ…åœ¨tomcatè¿è¡Œ"><a href="#3âƒ£ï¸æ‰“åŒ…åœ¨tomcatè¿è¡Œ" class="headerlink" title="3âƒ£ï¸æ‰“åŒ…åœ¨tomcatè¿è¡Œ"></a>3âƒ£ï¸æ‰“åŒ…åœ¨tomcatè¿è¡Œ</h3><p>1.é¦–å…ˆåŸºäºmavenè¿›è¡Œæ‰“åŒ…ï¼Œå°†waråŒ…å¤åˆ¶åˆ°æŸä¸ªè·¯å¾„ï¼ˆä¸æ”¹é…ç½®çš„è¯æ”¾åœ¨webappsæ–‡ä»¶å¤¹ä¸‹ï¼‰<br>2.å¯¹äºæ”¾åœ¨å…¶ä»–æ–‡ä»¶å¤¹çš„waråŒ…ï¼Œåœ¨tomcatåŒ…ä¸‹çš„confæ–‡ä»¶å¤¹ä¸‹çš„server.xmlæ–‡ä»¶å¢åŠ é…ç½®ï¼ˆwaråŒ…è·¯å¾„å¯åŠ¨ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Host&gt; æ ‡ç­¾ä¸‹</span><br><span class="line">&lt;Context docBase=&quot;/Users/liuxuan/MyProject/java/log-maven-package.war&quot; </span><br><span class="line">        path=&quot;/log&quot; </span><br><span class="line">        reloadable=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>path:æŒ‡å®šè®¿é—®è¯¥Webåº”ç”¨çš„URLå…¥å£<br>docBase:æŒ‡å®šWebåº”ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥ç»™å®šç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç»™å®šç›¸å¯¹äº<code>&lt;Host&gt;</code>çš„appBaseå±æ€§çš„ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœWebåº”ç”¨é‡‡ç”¨å¼€æ”¾ç›®å½•ç»“æ„ï¼Œåˆ™æŒ‡å®šWebåº”ç”¨çš„ æ ¹ç›®å½•ï¼Œå¦‚æœWebåº”ç”¨æ˜¯ä¸ªwaræ–‡ä»¶ï¼Œåˆ™æŒ‡å®šwaræ–‡ä»¶çš„è·¯å¾„ã€‚<br>reloadable:å¦‚æœè¿™ä¸ªå±æ€§è®¾ä¸ºtrueï¼ŒtomcatæœåŠ¡å™¨åœ¨è¿è¡ŒçŠ¶æ€ä¸‹ä¼šç›‘è§†åœ¨WEB-INF/classeså’ŒWEB-INF/libç›®å½•ä¸‹classæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œå¦‚æœç›‘æµ‹åˆ°æœ‰classæ–‡ä»¶è¢«æ›´æ–°çš„ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½Webåº”ç”¨ã€‚<br>Tomcatæœ¬èº«è®¾ç½®äº†Reloadableçš„å±æ€§ï¼Œæ•…Tomcatåœ¨æ£€æµ‹åˆ°classæ–‡ä»¶å‘ç”Ÿå˜åŒ–ä¹‹åï¼Œå¯¹WebAppçš„åº”ç”¨è¿›è¡Œäº†é‡æ–°åŠ è½½ï¼šå…ˆå¸è½½ï¼Œå†é‡æ–°åŠ è½½ã€‚<br>åœ¨å¼€å‘é˜¶æ®µå°†reloadableå±æ€§è®¾ä¸ºtrueï¼Œæœ‰åŠ©äºè°ƒè¯•servletå’Œå…¶å®ƒçš„classæ–‡ä»¶ï¼Œä½†è¿™æ ·ç”¨åŠ é‡æœåŠ¡å™¨è¿è¡Œè´Ÿè·ï¼Œå»ºè®®åœ¨Webåº”ç”¨çš„å‘å­˜é˜¶æ®µå°†reloadableè®¾ä¸ºfalseã€‚</p>
</blockquote>
<p>3.å¯åŠ¨tomcatï¼Œä¹‹å‰é…ç½®è¿‡ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥ä¸ç”¨åŒºtomcatçš„binç›®å½•ä¸‹å¯åŠ¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨ï¼šstartup.sh</span><br><span class="line">å…³é—­ï¼šshutdown.sh</span><br><span class="line">æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼šps -ef|grep tomcat</span><br><span class="line">æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼š</span><br><span class="line">cd /usr/local/tomcat/apache-tomcat-8.5.51/logs/</span><br><span class="line">tail -200f catalina.out</span><br></pre></td></tr></table></figure>
<p>4.è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8080/log/">http://localhost:8080/log/</a><br>5.å¤–ç½‘å¦‚ä½•è®¿é—®ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30596023/article/details/98539676">https://blog.csdn.net/weixin_30596023/article/details/98539676</a><br>6.å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_53324833/article/details/123802881">https://blog.csdn.net/qq_53324833/article/details/123802881</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jade liu"
      src="/images/head.gif">
  <p class="site-author-name" itemprop="name">Jade liu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">87</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jadeliuliu" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;jadeliuliu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jadeliu1998@163.com" title="E-Mail â†’ mailto:jadeliu1998@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/jadeliu1998" title="CSDN â†’ https:&#x2F;&#x2F;blog.csdn.net&#x2F;jadeliu1998" rel="noopener" target="_blank"><i class="fab fa-google fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5823044646" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5823044646" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jade liu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>





        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
